---

## üîê M√ìDULO DE AUTENTICACI√ìN

**Roles:**
- ADMIN
- GESTOR
- LECTURA

**Endpoints:**
- POST /auth/register
- POST /auth/login
- POST /auth/logout
- GET /auth/profile (requiere token)

Usa bcrypt para hash de contrase√±as y JWT con expiraci√≥n 24h.

---

## üë• M√ìDULO DE CLIENTES

**Campos:**
id, raz√≥n_social, NIF_CIF, tipo (aut√≥nomo/empresa), email, tel√©fono, direcci√≥n, fecha_alta, responsable_asignado.

**Funciones:**
- CRUD completo.
- Filtros por tipo o gestor.
- Exportaci√≥n CSV o Excel.
- Relaci√≥n: un gestor puede tener varios clientes.

---

## üßæ M√ìDULO DE IMPUESTOS

**Tablas:**
- tax_models (id, nombre, descripci√≥n)
- tax_periods (id, modelo_id, a√±o, trimestre o mes, inicio_presentacion, fin_presentacion)
- client_tax (id, client_id, tax_period_id, estado, notas, fecha_creacion, fecha_actualizacion)
- tax_files (id, client_tax_id, nombre_archivo, ruta, tipo, fecha_subida, subido_por)

**Estados:**
PENDIENTE | CALCULADO | REALIZADO

**Funciones:**
- CRUD de impuestos.
- Subida/descarga de archivos.
- Cambiar estado con registro hist√≥rico.
- Dashboard de resumen por estado y modelo.

---

## üß† M√ìDULO DE TAREAS (GENERALES Y PERSONALES)

**Campos:**
id, t√≠tulo, descripci√≥n, cliente_id (nullable), asignado_a (nullable), prioridad (BAJA|MEDIA|ALTA), estado (PENDIENTE|EN_PROGRESO|COMPLETADA), visibilidad (GENERAL|PERSONAL), fecha_vencimiento, fecha_creaci√≥n, fecha_actualizaci√≥n.

**Reglas:**
- GENERAL: visible a todos los usuarios autenticados.
- PERSONAL: visible solo al usuario asignado y al admin.
- Recordatorios autom√°ticos por email 3 d√≠as antes del vencimiento.

**UI:**
- Vista tabla + vista kanban.
- Colores por estado.
- Badge con candado üîí para tareas personales.

---

## üìö M√ìDULO DE MANUALES (BUILDER VISUAL)

**Objetivo:** crear manuales internos con texto, im√°genes y formato.

**Usa:** editor WYSIWYG (TipTap, Quill o TinyMCE).

**Campos:**
id, t√≠tulo, contenido_html, autor_id, etiquetas, categor√≠a, fecha_creaci√≥n, publicado.

**Funciones:**
- CRUD completo.
- Inserci√≥n de im√°genes (drag & drop).
- Exportar a PDF.
- Permisos: admin y gestor pueden crear, lectura solo ver.

---

## üßë‚Äçüíª PANEL ADMINISTRATIVO

**Funciones:**
- CRUD de usuarios (crear, editar, roles, reset password).
- Configuraci√≥n SMTP y logo.
- Logs de actividad (fecha, usuario, acci√≥n, m√≥dulo).
- Dashboard con:
  - Tareas generales vs personales.
  - Impuestos por estado.
  - Clientes activos.
  - Manuales publicados.
- Gr√°ficas: Chart.js o Recharts.

---

## üì© NOTIFICACIONES AUTOM√ÅTICAS

- Env√≠o de correos autom√°ticos con Nodemailer:
  - Tareas que vencen en ‚â§3 d√≠as.
  - Impuestos que vencen en ‚â§7 d√≠as.
- Plantillas HTML en carpeta `/emails`.
- Log de env√≠os guardado en `/logs/email.log`.

---

## üß± BASE DE DATOS

- Usa Prisma o Sequelize.
- Genera todas las migraciones y el script SQL en `/database/schema.sql`.
- No conectes a ninguna base real, solo crea los archivos necesarios.
- El usuario (yo) configurar√° las credenciales manualmente en `.env`.

Incluye semillas iniciales:
- 3 usuarios (admin, gestor, lectura)
- 5 clientes
- 4 modelos fiscales (303, 390, 130, 131)
- 4 periodos del a√±o actual
- 5 tareas de ejemplo
- 2 manuales de prueba

---

## üé® INTERFAZ DE USUARIO (REACT + TAILWIND)

**Dise√±o visual:**
- Profesional, limpio y moderno (inspirado en SeRanking / Notion).
- Paleta:
  - Azul marino #1E3A8A
  - Naranja #F97316
  - Gris oscuro #374151
  - Blanco #FFFFFF
- Sidebar con secciones: Clientes / Impuestos / Tareas / Manuales / Administraci√≥n.
- Header con nombre del usuario y logout.
- Dashboard con gr√°ficas y m√©tricas.
- Animaciones suaves, modo claro/oscuro, toasts y loaders.

---

## üîí SEGURIDAD

- Sanitizaci√≥n de entradas.
- Rate limiting (login).
- JWT con expiraci√≥n.
- Hash bcrypt.
- Middleware de permisos por rol.
- Validaci√≥n de inputs.

---

## üß∞ DESPLIEGUE (ARCHIVOS EXTRA)

Genera tambi√©n:
- `docker-compose.yml` con servicios:
  - backend (Node)
  - frontend (Nginx)
  - db (Postgres o MariaDB)
- `Dockerfile.backend` y `Dockerfile.frontend`
- `nginx.conf` con redirecci√≥n HTTPS.
- `backup.sh` (dump diario + compresi√≥n + rotaci√≥n 14 d√≠as)
- `README_DEPLOY.md` con instrucciones VPS.

---

## ‚úÖ OBJETIVO FINAL

Deja el proyecto 100 % funcional **dentro de Replit**:
- El backend debe poder ejecutarse con `npm run dev` y responder en `/api`.
- El frontend debe mostrarse correctamente.
- Ning√∫n error en consola.
- Debes probar la app, corregir cualquier error autom√°ticamente y dejarla lista para descargar.
- Incluye en el README pasos claros para:
  1. Instalar dependencias.
  2. Configurar .env.
  3. Crear la base de datos (usando el archivo schema.sql).
  4. Levantar el servidor y el frontend.
  5. Desplegar con Docker.

Cuando termines, muestra:
- Estructura completa de carpetas.
- Comandos principales (`npm run dev`, `npm run build`, etc.).
- Confirmaci√≥n de que la aplicaci√≥n se ejecuta correctamente dentro de Replit.

Genera todo el proyecto completo en este entorno, ejec√∫talo, corrige cualquier error autom√°ticamente y d√©jalo listo para descargar.