{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{createServer}from\"http\";import{Server as SocketIOServer}from\"socket.io\";import{prismaStorage as storage}from\"./prisma-storage\";import{PrismaClient}from\"@prisma/client\";import bcrypt from\"bcrypt\";import jwt from\"jsonwebtoken\";import{registerSchema,validateZod}from\"./utils/validators\";import multer from\"multer\";import path from\"path\";import fs from\"fs\";import{configureSMTP,getSMTPConfig,checkAndSendReminders}from\"./email\";import{setSocketIO,notifyTaskChange}from\"./websocket\";import{checkForUpdates,getCurrentVersion}from\"./services/version-service.js\";import{createSystemBackup,listBackups,restoreFromBackup}from\"./services/backup-service.js\";import{performSystemUpdate,verifyGitSetup,getUpdateHistory}from\"./services/update-service.js\";import{StorageFactory,encryptPassword}from\"./services/storage-factory\";import{uploadToStorage}from\"./middleware/storage-upload\";const prisma=new PrismaClient;const JWT_SECRET=process.env.JWT_SECRET||\"your-secret-key-change-this-in-production\";const SALT_ROUNDS=10;const uploadsDir=path.join(process.cwd(),\"uploads\");const manualsImagesDir=path.join(uploadsDir,\"manuals\",\"images\");const manualsAttachmentsDir=path.join(uploadsDir,\"manuals\",\"attachments\");[uploadsDir,manualsImagesDir,manualsAttachmentsDir].forEach(dir=>{if(!fs.existsSync(dir)){fs.mkdirSync(dir,{recursive:true})}});const imagesMimeTypes=[\"image/jpeg\",\"image/jpg\",\"image/png\",\"image/gif\",\"image/webp\"];const attachmentsMimeTypes=[...imagesMimeTypes,\"application/pdf\",\"application/msword\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\"application/vnd.ms-excel\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\"application/zip\",\"application/x-zip-compressed\"];const multerStorageImages=multer.diskStorage({destination:__name((req,file,cb)=>{cb(null,manualsImagesDir)},\"destination\"),filename:__name((req,file,cb)=>{const uniqueSuffix=`${Date.now()}-${Math.round(Math.random()*1e9)}`;cb(null,`${uniqueSuffix}-${file.originalname}`)},\"filename\")});const multerStorageAttachments=multer.diskStorage({destination:__name((req,file,cb)=>{cb(null,manualsAttachmentsDir)},\"destination\"),filename:__name((req,file,cb)=>{const uniqueSuffix=`${Date.now()}-${Math.round(Math.random()*1e9)}`;cb(null,`${uniqueSuffix}-${file.originalname}`)},\"filename\")});const upload=multer({storage:multer.diskStorage({destination:__name((req,file,cb)=>{cb(null,uploadsDir)},\"destination\"),filename:__name((req,file,cb)=>{const uniqueSuffix=`${Date.now()}-${Math.round(Math.random()*1e9)}`;cb(null,`${uniqueSuffix}-${file.originalname}`)},\"filename\")}),limits:{fileSize:10*1024*1024}});const uploadManualImage=multer({storage:multerStorageImages,limits:{fileSize:5*1024*1024},fileFilter:__name((req,file,cb)=>{if(imagesMimeTypes.includes(file.mimetype)){cb(null,true)}else{cb(new Error(\"Solo se permiten im\\xE1genes (JPEG, PNG, GIF, WebP)\"))}},\"fileFilter\")});const uploadManualAttachment=multer({storage:multerStorageAttachments,limits:{fileSize:10*1024*1024},fileFilter:__name((req,file,cb)=>{if(attachmentsMimeTypes.includes(file.mimetype)){cb(null,true)}else{cb(new Error(\"Tipo de archivo no permitido\"))}},\"fileFilter\")});const authenticateToken=__name(async(req,res,next)=>{try{const authHeader=req.headers[\"authorization\"];const token=authHeader&&authHeader.split(\" \")[1];if(!token){return res.status(401).json({error:\"Token no proporcionado\"})}const decoded=jwt.verify(token,JWT_SECRET);const user=await storage.getUserWithPermissions(decoded.id);if(!user){return res.status(401).json({error:\"Usuario no encontrado\"})}const permissions=user.role?.permissions?.map(rp=>`${rp.permission.resource}:${rp.permission.action}`)||[];req.user={id:user.id,username:user.username,roleId:user.roleId,permissions};next()}catch(error){return res.status(403).json({error:\"Token inv\\xE1lido\"})}},\"authenticateToken\");const authorizeRoles=__name((...roles)=>{return(req,res,next)=>{if(!req.user||!roles.includes(req.user.roleId)){return res.status(403).json({error:\"No tienes permisos para esta acci\\xF3n\"})}next()}},\"authorizeRoles\");const checkPermission=__name(requiredPermission=>{return(req,res,next)=>{if(!req.user){return res.status(401).json({error:\"Usuario no autenticado\"})}if(!req.user.permissions.includes(requiredPermission)){return res.status(403).json({error:\"No tienes permisos para esta acci\\xF3n\",required:requiredPermission})}next()}},\"checkPermission\");async function createAudit(usuarioId,accion,tabla,registroId,valorAnterior=null,valorNuevo=null){try{let cambios=\"\";if(accion===\"CREATE\"){cambios=`Nuevo registro creado en ${tabla}`}else if(accion===\"DELETE\"){cambios=`Registro eliminado de ${tabla}`}else if(accion===\"UPDATE\"&&valorAnterior&&valorNuevo){const cambiosArray=[];Object.keys(valorNuevo).forEach(key=>{if(valorAnterior[key]!==valorNuevo[key]&&![\"fechaActualizacion\",\"updated_at\"].includes(key)){cambiosArray.push(`${key}: \"${valorAnterior[key]}\" \\u2192 \"${valorNuevo[key]}\"`)}});cambios=cambiosArray.length>0?cambiosArray.join(\", \"):\"Sin cambios detectados\"}await storage.createAuditEntry({usuarioId,accion,tabla,registroId,valorAnterior:valorAnterior?JSON.stringify(valorAnterior):null,valorNuevo:valorNuevo?JSON.stringify(valorNuevo):null,cambios})}catch(error){console.error(\"Error al crear auditor\\xEDa:\",error)}}__name(createAudit,\"createAudit\");async function generateClientTaxes(clientId,taxModels){try{console.log(`\\u{1F4CB} Generando impuestos para cliente ${clientId} con modelos: ${taxModels.join(\", \")}`);const models=await prisma.taxModel.findMany({where:{nombre:{in:taxModels}}});console.log(`  \\u2192 Modelos encontrados: ${models.length}`);if(models.length===0){console.warn(`\\u26A0\\uFE0F  No se encontraron modelos fiscales para: ${taxModels.join(\", \")}`);return}for(const model of models){const periods=await prisma.taxPeriod.findMany({where:{modeloId:model.id}});console.log(`  \\u2192 Modelo ${model.nombre}: ${periods.length} per\\xEDodos encontrados`);for(const period of periods){const existing=await prisma.clientTax.findFirst({where:{clientId,taxPeriodId:period.id}});if(!existing){await prisma.clientTax.create({data:{clientId,taxPeriodId:period.id,estado:\"PENDIENTE\"}})}}}console.log(`\\u2705 Impuestos generados autom\\xE1ticamente para cliente ${clientId}`)}catch(error){console.error(\"\\u274C Error al generar impuestos autom\\xE1ticos:\",error);throw error}}__name(generateClientTaxes,\"generateClientTaxes\");async function registerRoutes(app){app.get(\"/api/health\",async(req,res)=>{try{await storage.getAllUsers();res.status(200).json({status:\"healthy\",timestamp:new Date().toISOString(),database:\"connected\"})}catch(error){res.status(503).json({status:\"unhealthy\",timestamp:new Date().toISOString(),database:\"disconnected\"})}});app.post(\"/api/auth/register\",validateZod(registerSchema),async(req,res)=>{try{const{username,email,password,roleId}=req.body;const existingUser=await storage.getUserByUsername(username);if(existingUser){return res.status(400).json({error:\"El usuario ya existe\"})}const existingEmail=await storage.getUserByEmail(email);if(existingEmail){return res.status(400).json({error:\"El email ya est\\xE1 registrado\"})}let defaultRoleId=roleId;if(!defaultRoleId){const defaultRole=await prisma.role.findUnique({where:{name:\"Gestor\"}});if(defaultRole){defaultRoleId=defaultRole.id}}const hashedPassword=await bcrypt.hash(password,SALT_ROUNDS);const user=await storage.createUser({username,email,password:hashedPassword,roleId:defaultRoleId||null});const token=jwt.sign({id:user.id,username:user.username,roleId:user.roleId},JWT_SECRET,{expiresIn:\"24h\"});const{password:_,...userWithoutPassword}=user;res.json({user:userWithoutPassword,token})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/auth/login\",async(req,res)=>{try{const{username,password}=req.body;const user=await storage.getUserByUsername(username);if(!user){return res.status(401).json({error:\"Credenciales incorrectas\"})}const validPassword=await bcrypt.compare(password,user.password);if(!validPassword){return res.status(401).json({error:\"Credenciales incorrectas\"})}if(!user.isActive){return res.status(403).json({error:\"Usuario desactivado. Contacte al administrador\"})}const token=jwt.sign({id:user.id,username:user.username,roleId:user.roleId},JWT_SECRET,{expiresIn:\"24h\"});const fullUser=await storage.getUserWithPermissions(user.id);if(!fullUser){return res.status(500).json({error:\"Error al obtener informaci\\xF3n del usuario\"})}const{password:_,...userWithoutPassword}=fullUser;const permissions=fullUser.role?.permissions?.map(rp=>`${rp.permission.resource}:${rp.permission.action}`)||[];const roleName=fullUser.role?.name||null;res.json({user:{...userWithoutPassword,permissions,roleName},token})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/auth/logout\",(req,res)=>{res.json({message:\"Sesi\\xF3n cerrada exitosamente\"})});app.get(\"/api/auth/profile\",authenticateToken,async(req,res)=>{try{const user=await storage.getUserWithPermissions(req.user.id);if(!user){return res.status(404).json({error:\"Usuario no encontrado\"})}const{password:_,...userWithoutPassword}=user;const permissions=user.role?.permissions?.map(rp=>`${rp.permission.resource}:${rp.permission.action}`)||[];const roleName=user.role?.name||null;res.json({...userWithoutPassword,permissions,roleName})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/users\",authenticateToken,async(req,res)=>{try{const users=await storage.getAllUsers();const usersWithoutPassword=users.map(({password,...user})=>user);res.json(usersWithoutPassword)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/users\",authenticateToken,checkPermission(\"users:create\"),async(req,res)=>{try{const{username,email,password,roleId}=req.body;const hashedPassword=await bcrypt.hash(password,SALT_ROUNDS);const user=await storage.createUser({username,email,password:hashedPassword,roleId});const{password:_,...userWithoutPassword}=user;res.json(userWithoutPassword)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/users/:id\",authenticateToken,checkPermission(\"users:update\"),async(req,res)=>{try{const{id}=req.params;const updateData={...req.body};if(updateData.password){updateData.password=await bcrypt.hash(updateData.password,SALT_ROUNDS)}const user=await storage.updateUser(id,updateData);if(!user){return res.status(404).json({error:\"Usuario no encontrado\"})}const{password:_,...userWithoutPassword}=user;res.json(userWithoutPassword)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/users/:id/toggle-active\",authenticateToken,checkPermission(\"users:update\"),async(req,res)=>{try{const{id}=req.params;const user=await storage.getUser(id);if(!user){return res.status(404).json({error:\"Usuario no encontrado\"})}const newActiveState=!user.isActive;const updatedUser=await storage.updateUser(id,{isActive:newActiveState});if(!updatedUser){return res.status(404).json({error:\"Usuario no encontrado\"})}await storage.createActivityLog({usuarioId:req.user.id,accion:newActiveState?`Activ\\xF3 el usuario ${user.username}`:`Desactiv\\xF3 el usuario ${user.username}`,modulo:\"admin\",detalles:`Estado: ${newActiveState?\"Activo\":\"Inactivo\"}`});const{password:_,...userWithoutPassword}=updatedUser;res.json(userWithoutPassword)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/users/:id\",authenticateToken,checkPermission(\"users:delete\"),async(req,res)=>{try{const{id}=req.params;const user=await storage.getUser(id);if(!user){return res.status(404).json({error:\"Usuario no encontrado\"})}const manuals=await prisma.manual.count({where:{autorId:id}});const activityLogs=await prisma.activityLog.count({where:{usuarioId:id}});const auditTrails=await prisma.auditTrail.count({where:{usuarioId:id}});if(manuals>0){return res.status(409).json({error:`No se puede eliminar: el usuario tiene ${manuals} manual(es) asignado(s) que se borrar\\xEDan permanentemente. Reasigne los manuales a otro usuario primero.`})}const deleted=await storage.deleteUser(id);if(!deleted){return res.status(404).json({error:\"Usuario no encontrado\"})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 el usuario ${user.username}`,modulo:\"admin\",detalles:`Se eliminaron ${activityLogs} logs de actividad y ${auditTrails} registros de auditor\\xEDa`});res.json({message:\"Usuario eliminado exitosamente\",deletedRelations:{activityLogs,auditTrails}})}catch(error){if(error.code===\"P2003\"){return res.status(409).json({error:\"No se puede eliminar el usuario: tiene relaciones activas con otros registros del sistema\"})}res.status(500).json({error:error.message})}});app.get(\"/api/clients\",authenticateToken,async(req,res)=>{try{const clients=await storage.getAllClients();res.json(clients)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/clients\",authenticateToken,checkPermission(\"clients:create\"),async(req,res)=>{try{const client=await storage.createClient(req.body);if(client.taxModels&&Array.isArray(client.taxModels)&&client.taxModels.length>0){await generateClientTaxes(client.id,client.taxModels)}await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 el cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:`NIF/CIF: ${client.nifCif}`});await createAudit(req.user.id,\"CREATE\",\"clients\",client.id,null,client);res.json(client)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/clients/:id\",authenticateToken,checkPermission(\"clients:update\"),async(req,res)=>{try{const{id}=req.params;const oldClient=await storage.getClient(id);const client=await storage.updateClient(id,req.body);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}if(req.body.taxModels&&Array.isArray(req.body.taxModels)){await prisma.clientTax.deleteMany({where:{clientId:id}});if(req.body.taxModels.length>0){await generateClientTaxes(id,req.body.taxModels)}}await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 el cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:null});await createAudit(req.user.id,\"UPDATE\",\"clients\",client.id,oldClient,client);res.json(client)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/clients/:id\",authenticateToken,checkPermission(\"clients:delete\"),async(req,res)=>{try{const{id}=req.params;const client=await storage.getClient(id);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}const clientTaxes=await prisma.clientTax.findMany({where:{clientId:id}});if(clientTaxes.length>0){const updated=await storage.updateClient(id,{isActive:false});await storage.createActivityLog({usuarioId:req.user.id,accion:`Desactiv\\xF3 el cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:`Cliente con ${clientTaxes.length} impuestos asociados`});await createAudit(req.user.id,\"UPDATE\",\"clients\",id,client,updated);res.json({message:\"Cliente desactivado (tiene impuestos asociados)\",softDelete:true,client:updated})}else{const deleted=await storage.deleteClient(id);if(!deleted){return res.status(404).json({error:\"Error al eliminar cliente\"})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 permanentemente el cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:\"Sin impuestos asociados\"});await createAudit(req.user.id,\"DELETE\",\"clients\",id,client,null);res.json({message:\"Cliente eliminado permanentemente\",hardDelete:true})}}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/clients/:id/toggle-active\",authenticateToken,checkPermission(\"clients:update\"),async(req,res)=>{try{const{id}=req.params;const client=await storage.getClient(id);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}const newActiveState=!client.isActive;const updatedClient=await storage.updateClient(id,{isActive:newActiveState});await storage.createActivityLog({usuarioId:req.user.id,accion:newActiveState?`Activ\\xF3 el cliente ${client.razonSocial}`:`Desactiv\\xF3 el cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:`Estado cambiado a: ${newActiveState?\"Activo\":\"Inactivo\"}`});await createAudit(req.user.id,\"UPDATE\",\"clients\",id,client,updatedClient);res.json(updatedClient)}catch(error){res.status(500).json({error:error.message})}});app.put(\"/api/clients/:id/employees\",authenticateToken,checkPermission(\"clients:update\"),async(req,res)=>{try{const{id}=req.params;const{employeeIds,primaryEmployeeId}=req.body;const client=await storage.getClient(id);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}await prisma.clientEmployee.deleteMany({where:{clientId:id}});if(employeeIds&&Array.isArray(employeeIds)&&employeeIds.length>0){await prisma.clientEmployee.createMany({data:employeeIds.map(userId=>({clientId:id,userId,isPrimary:userId===primaryEmployeeId}))});if(primaryEmployeeId){await storage.updateClient(id,{responsableAsignado:primaryEmployeeId})}}else{await storage.updateClient(id,{responsableAsignado:null})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 empleados del cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:`${employeeIds?.length||0} empleados asignados`});const updatedClient=await storage.getClient(id);res.json(updatedClient)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/clients/:id/employees/:userId\",authenticateToken,checkPermission(\"clients:update\"),async(req,res)=>{try{const{id,userId}=req.params;const{isPrimary}=req.body;const client=await storage.getClient(id);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}const user=await storage.getUser(userId);if(!user){return res.status(404).json({error:\"Usuario no encontrado\"})}if(isPrimary){await prisma.clientEmployee.updateMany({where:{clientId:id},data:{isPrimary:false}})}await prisma.clientEmployee.upsert({where:{clientId_userId:{clientId:id,userId}},create:{clientId:id,userId,isPrimary:isPrimary||false},update:{isPrimary:isPrimary||false}});if(isPrimary){await storage.updateClient(id,{responsableAsignado:userId})}else{const primaryEmployee=await prisma.clientEmployee.findFirst({where:{clientId:id,isPrimary:true}});await storage.updateClient(id,{responsableAsignado:primaryEmployee?primaryEmployee.userId:null})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Asign\\xF3 empleado ${user.username} al cliente ${client.razonSocial}`,modulo:\"clientes\",detalles:isPrimary?\"Como responsable principal\":\"Como colaborador\"});const updatedClient=await storage.getClient(id);res.json(updatedClient)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/clients/:id/employees/:userId\",authenticateToken,checkPermission(\"clients:update\"),async(req,res)=>{try{const{id,userId}=req.params;const client=await storage.getClient(id);if(!client){return res.status(404).json({error:\"Cliente no encontrado\"})}const user=await storage.getUser(userId);const employeeToDelete=await prisma.clientEmployee.findUnique({where:{clientId_userId:{clientId:id,userId}}});await prisma.clientEmployee.delete({where:{clientId_userId:{clientId:id,userId}}});if(employeeToDelete?.isPrimary){const remainingEmployee=await prisma.clientEmployee.findFirst({where:{clientId:id}});if(remainingEmployee){await prisma.clientEmployee.update({where:{clientId_userId:{clientId:id,userId:remainingEmployee.userId}},data:{isPrimary:true}});await storage.updateClient(id,{responsableAsignado:remainingEmployee.userId})}else{await storage.updateClient(id,{responsableAsignado:null})}}await storage.createActivityLog({usuarioId:req.user.id,accion:`Desasign\\xF3 empleado ${user?.username||userId} del cliente ${client.razonSocial}`,modulo:\"clientes\"});const updatedClient=await storage.getClient(id);res.json(updatedClient)}catch(error){if(error.code===\"P2025\"){return res.status(404).json({error:\"Asignaci\\xF3n no encontrada\"})}res.status(500).json({error:error.message})}});app.get(\"/api/impuestos\",authenticateToken,async(req,res)=>{try{const impuestos=await storage.getAllImpuestos();res.json(impuestos)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/impuestos\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{modelo,nombre,descripcion}=req.body;if(!modelo||!nombre){return res.status(400).json({error:\"Modelo y nombre son requeridos\"})}const impuesto=await storage.createImpuesto({modelo,nombre,descripcion});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 el impuesto: ${modelo} - ${nombre}`,modulo:\"impuestos\",detalles:descripcion||\"\"});res.status(201).json(impuesto)}catch(error){if(error.code===\"P2002\"){return res.status(400).json({error:\"Ya existe un impuesto con ese modelo\"})}res.status(500).json({error:error.message})}});app.patch(\"/api/impuestos/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const{modelo,nombre,descripcion}=req.body;const impuesto=await storage.updateImpuesto(req.params.id,{modelo,nombre,descripcion});await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 el impuesto: ${impuesto.modelo}`,modulo:\"impuestos\",detalles:JSON.stringify({modelo,nombre,descripcion})});res.json(impuesto)}catch(error){if(error.code===\"P2002\"){return res.status(400).json({error:\"Ya existe un impuesto con ese modelo\"})}res.status(500).json({error:error.message})}});app.delete(\"/api/impuestos/:id\",authenticateToken,checkPermission(\"taxes:delete\"),async(req,res)=>{try{await storage.deleteImpuesto(req.params.id);await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 un impuesto`,modulo:\"impuestos\",detalles:`ID: ${req.params.id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/obligaciones-fiscales\",authenticateToken,async(req,res)=>{try{const obligaciones=await storage.getAllObligacionesFiscales();res.json(obligaciones)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/obligaciones-fiscales/cliente/:clienteId\",authenticateToken,async(req,res)=>{try{const obligaciones=await storage.getObligacionesByCliente(req.params.clienteId);res.json(obligaciones)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/obligaciones-fiscales\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{clienteId,impuestoId,periodicidad,diaVencimiento,observaciones,fechaInicio,fechaFin,activo}=req.body;if(!clienteId||!impuestoId||!periodicidad||!fechaInicio){return res.status(400).json({error:\"Cliente, impuesto, periodicidad y fecha de inicio son requeridos\"})}const obligacion=await storage.createObligacionFiscal({clienteId,impuestoId,periodicidad,diaVencimiento:diaVencimiento||null,observaciones:observaciones||null,fechaInicio:new Date(fechaInicio),fechaFin:fechaFin?new Date(fechaFin):null,activo:activo!==void 0?activo:true,fechaAsignacion:new Date});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 obligaci\\xF3n fiscal para cliente`,modulo:\"impuestos\",detalles:`Cliente: ${clienteId}, Impuesto: ${impuestoId}`});res.status(201).json(obligacion)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/obligaciones-fiscales/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const updateData={...req.body};if(updateData.fechaInicio&&typeof updateData.fechaInicio===\"string\"){updateData.fechaInicio=new Date(updateData.fechaInicio)}if(updateData.fechaFin&&typeof updateData.fechaFin===\"string\"){updateData.fechaFin=new Date(updateData.fechaFin)}const obligacion=await storage.updateObligacionFiscal(req.params.id,updateData);await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 obligaci\\xF3n fiscal`,modulo:\"impuestos\",detalles:`ID: ${req.params.id}`});res.json(obligacion)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/obligaciones-fiscales/:id\",authenticateToken,checkPermission(\"taxes:delete\"),async(req,res)=>{try{await storage.deleteObligacionFiscal(req.params.id);await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 obligaci\\xF3n fiscal`,modulo:\"impuestos\",detalles:`ID: ${req.params.id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/calendario-aeat\",authenticateToken,checkPermission(\"taxes:read\"),async(req,res)=>{try{const{modelo,periodicidad,anio}=req.query;let calendarios;if(modelo||periodicidad||anio){const where={};if(modelo)where.modelo=modelo;if(periodicidad)where.periodicidad=periodicidad;if(anio){where.periodoContable={contains:anio}}calendarios=await prisma.calendarioAEAT.findMany({where,orderBy:[{periodoContable:\"desc\"},{modelo:\"asc\"}]})}else{calendarios=await storage.getAllCalendariosAEAT()}res.json(calendarios)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/calendario-aeat/modelo/:modelo\",authenticateToken,checkPermission(\"taxes:read\"),async(req,res)=>{try{const calendarios=await prisma.calendarioAEAT.findMany({where:{modelo:req.params.modelo},orderBy:{periodoContable:\"desc\"}});res.json(calendarios)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/calendario-aeat\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{modelo,periodicidad,periodoContable,fechaInicio,fechaFin}=req.body;if(!modelo||!periodicidad||!periodoContable||!fechaInicio||!fechaFin){return res.status(400).json({error:\"Modelo, periodicidad, periodo contable, fecha inicio y fecha fin son requeridos\"})}const calendario=await storage.createCalendarioAEAT({modelo,periodicidad,periodoContable,fechaInicio:new Date(fechaInicio),fechaFin:new Date(fechaFin)});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 calendario AEAT`,modulo:\"impuestos\",detalles:`Modelo: ${modelo}, Periodo: ${periodoContable}, Periodicidad: ${periodicidad}`});res.status(201).json(calendario)}catch(error){if(error.code===\"P2002\"){return res.status(400).json({error:\"Ya existe un calendario para este modelo, periodicidad y periodo contable\"})}res.status(500).json({error:error.message})}});app.patch(\"/api/calendario-aeat/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const{fechaInicio,fechaFin}=req.body;const updateData={};if(fechaInicio)updateData.fechaInicio=new Date(fechaInicio);if(fechaFin)updateData.fechaFin=new Date(fechaFin);const calendario=await storage.updateCalendarioAEAT(req.params.id,updateData);await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 calendario AEAT`,modulo:\"impuestos\",detalles:`Modelo: ${calendario.modelo}, Periodo: ${calendario.periodoContable}`});res.json(calendario)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/calendario-aeat/:id\",authenticateToken,checkPermission(\"taxes:delete\"),async(req,res)=>{try{const calendario=await prisma.calendarioAEAT.findUnique({where:{id:req.params.id}});await storage.deleteCalendarioAEAT(req.params.id);await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 calendario AEAT`,modulo:\"impuestos\",detalles:`Modelo: ${calendario?.modelo}, Periodo: ${calendario?.periodoContable}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/declaraciones\",authenticateToken,async(req,res)=>{try{const declaraciones=await storage.getAllDeclaraciones();res.json(declaraciones)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/declaraciones/cliente/:clienteId\",authenticateToken,async(req,res)=>{try{const declaraciones=await storage.getDeclaracionesByCliente(req.params.clienteId);res.json(declaraciones)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/declaraciones\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{obligacionId,anio,periodo,fechaLimite,estado,resultado,observaciones}=req.body;if(!obligacionId||!anio||!periodo||!fechaLimite){return res.status(400).json({error:\"Obligaci\\xF3n, a\\xF1o, periodo y fecha l\\xEDmite son requeridos\"})}const declaracion=await storage.createDeclaracion({obligacionId,anio:parseInt(anio),periodo,fechaLimite:new Date(fechaLimite),estado:estado||\"PENDIENTE\",resultado:resultado||null,observaciones:observaciones||null,fechaPresentacion:null});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 declaraci\\xF3n`,modulo:\"impuestos\",detalles:`Periodo: ${periodo}/${anio}`});res.status(201).json(declaracion)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/declaraciones/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const declaracion=await storage.updateDeclaracion(req.params.id,req.body);await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 declaraci\\xF3n`,modulo:\"impuestos\",detalles:`ID: ${req.params.id}`});res.json(declaracion)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/declaraciones/:id\",authenticateToken,checkPermission(\"taxes:delete\"),async(req,res)=>{try{await storage.deleteDeclaracion(req.params.id);await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 declaraci\\xF3n`,modulo:\"impuestos\",detalles:`ID: ${req.params.id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/tasks\",authenticateToken,async(req,res)=>{try{const tasks=await storage.getAllTasks();const clients=await storage.getAllClients();const users=await storage.getAllUsers();const enriched=tasks.map(task=>({...task,client:clients.find(c=>c.id===task.clienteId),assignedUser:users.find(u=>u.id===task.asignadoA)}));res.json(enriched)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/tasks\",authenticateToken,checkPermission(\"tasks:create\"),async(req,res)=>{try{const taskData={...req.body};if(taskData.fechaVencimiento&&/^\\d{4}-\\d{2}-\\d{2}$/.test(taskData.fechaVencimiento)){taskData.fechaVencimiento=new Date(taskData.fechaVencimiento+\"T00:00:00.000Z\").toISOString()}if(!taskData.asignadoA||taskData.asignadoA===\"\"){delete taskData.asignadoA}if(!taskData.clienteId||taskData.clienteId===\"\"){delete taskData.clienteId}const task=await storage.createTask(taskData);await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 la tarea \"${task.titulo}\"`,modulo:\"tareas\",detalles:null});notifyTaskChange(\"created\",task,task.asignadoA||void 0);res.json(task)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/tasks/:id\",authenticateToken,async(req,res)=>{try{const{id}=req.params;const taskData={...req.body};if(taskData.fechaVencimiento&&/^\\d{4}-\\d{2}-\\d{2}$/.test(taskData.fechaVencimiento)){taskData.fechaVencimiento=new Date(taskData.fechaVencimiento+\"T00:00:00.000Z\").toISOString()}if(!taskData.asignadoA||taskData.asignadoA===\"\"){delete taskData.asignadoA}if(!taskData.clienteId||taskData.clienteId===\"\"){delete taskData.clienteId}const task=await storage.updateTask(id,taskData);if(!task){return res.status(404).json({error:\"Tarea no encontrada\"})}notifyTaskChange(\"updated\",task,task.asignadoA||void 0);res.json(task)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/manuals\",authenticateToken,async(req,res)=>{try{const manuals=await storage.getAllManuals();res.json(manuals)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/manuals/:id\",authenticateToken,async(req,res)=>{try{const{id}=req.params;const manual=await storage.getManual(id);if(!manual){return res.status(404).json({error:\"Manual no encontrado\"})}res.json(manual)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/manuals\",authenticateToken,checkPermission(\"manuals:create\"),async(req,res)=>{try{const manual=await storage.createManual({...req.body,autorId:req.user.id});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 el manual \"${manual.titulo}\"`,modulo:\"manuales\",detalles:null});res.json(manual)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/manuals/:id\",authenticateToken,checkPermission(\"manuals:update\"),async(req,res)=>{try{const{id}=req.params;const currentManual=await storage.getManual(id);if(currentManual&&req.body.createVersion){const nextVersion=await storage.getNextVersionNumber(id);await storage.createManualVersion({manualId:id,versionNumber:nextVersion,titulo:currentManual.titulo,contenidoHtml:currentManual.contenidoHtml,etiquetas:currentManual.etiquetas||null,categoria:currentManual.categoria||null,createdBy:req.user.id})}const manual=await storage.updateManual(id,req.body);if(!manual){return res.status(404).json({error:\"Manual no encontrado\"})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 el manual \"${manual.titulo}\"`,modulo:\"manuales\",detalles:null});res.json(manual)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/manuals/upload-image\",authenticateToken,checkPermission(\"manuals:update\"),uploadManualImage.single(\"image\"),uploadToStorage,async(req,res)=>{try{if(!req.file){return res.status(400).json({error:\"No se proporcion\\xF3 imagen\"})}const imageUrl=`/uploads/manuals/images/${req.file.filename}`;res.json({url:imageUrl})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/manuals/:id/attachments\",authenticateToken,checkPermission(\"manuals:update\"),uploadManualAttachment.single(\"file\"),uploadToStorage,async(req,res)=>{try{const{id}=req.params;if(!req.file){return res.status(400).json({error:\"No se proporcion\\xF3 archivo\"})}const manual=await storage.getManual(id);if(!manual){return res.status(404).json({error:\"Manual no encontrado\"})}const attachment=await storage.createManualAttachment({manualId:id,fileName:req.file.filename,originalName:req.file.originalname,filePath:req.file.path,fileType:path.extname(req.file.originalname).toLowerCase(),fileSize:req.file.size,uploadedBy:req.user.id});res.json(attachment)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/manuals/:id/attachments\",authenticateToken,async(req,res)=>{try{const{id}=req.params;const attachments=await storage.getManualAttachments(id);res.json(attachments)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/manuals/:manualId/attachments/:attachmentId\",authenticateToken,checkPermission(\"manuals:update\"),async(req,res)=>{try{const{attachmentId}=req.params;const attachment=await storage.getManualAttachment(attachmentId);if(!attachment){return res.status(404).json({error:\"Adjunto no encontrado\"})}if(fs.existsSync(attachment.filePath)){fs.unlinkSync(attachment.filePath)}const deleted=await storage.deleteManualAttachment(attachmentId);if(!deleted){return res.status(500).json({error:\"Error al eliminar adjunto\"})}res.json({message:\"Adjunto eliminado correctamente\"})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/manuals/:id/versions\",authenticateToken,async(req,res)=>{try{const{id}=req.params;const versions=await storage.getManualVersions(id);res.json(versions)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/manuals/:id/versions/restore/:versionId\",authenticateToken,checkPermission(\"manuals:update\"),async(req,res)=>{try{const{id,versionId}=req.params;const manual=await storage.restoreManualVersion(id,versionId);if(!manual){return res.status(404).json({error:\"No se pudo restaurar la versi\\xF3n\"})}await storage.createActivityLog({usuarioId:req.user.id,accion:`Restaur\\xF3 versi\\xF3n del manual \"${manual.titulo}\"`,modulo:\"manuales\",detalles:`Versi\\xF3n ID: ${versionId}`});res.json(manual)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/activity-logs\",authenticateToken,checkPermission(\"audits:read\"),async(req,res)=>{try{const logs=await storage.getAllActivityLogs();const users=await storage.getAllUsers();const enriched=logs.map(log=>({...log,user:users.find(u=>u.id===log.usuarioId)}));res.json(enriched)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/dashboard/stats\",authenticateToken,async(req,res)=>{try{const clients=await storage.getAllClients();const tasks=await storage.getAllTasks();const manuals=await storage.getAllManuals();const stats={totalClientes:clients.length,clientesActivos:clients.filter(c=>c.responsableAsignado).length,tareasGenerales:tasks.filter(t=>t.visibilidad===\"GENERAL\").length,tareasPersonales:tasks.filter(t=>t.visibilidad===\"PERSONAL\").length,tareasPendientes:tasks.filter(t=>t.estado===\"PENDIENTE\").length,tareasEnProgreso:tasks.filter(t=>t.estado===\"EN_PROGRESO\").length,tareasCompletadas:tasks.filter(t=>t.estado===\"COMPLETADA\").length,manualesPublicados:manuals.filter(m=>m.publicado).length,manualesTotal:manuals.length};res.json(stats)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/admin/smtp-config\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const{host,port,user,pass}=req.body;if(!host||!port||!user||!pass){return res.status(400).json({error:\"Faltan par\\xE1metros de configuraci\\xF3n SMTP\"})}if(typeof host!==\"string\"||host.length>200){return res.status(400).json({error:\"Host SMTP inv\\xE1lido\"})}const hostPattern=/^[a-zA-Z0-9._:-]+$/;if(!hostPattern.test(host)){return res.status(400).json({error:\"Host SMTP inv\\xE1lido\"})}const portNum=parseInt(String(port),10);if(Number.isNaN(portNum)||portNum<=0||portNum>65535){return res.status(400).json({error:\"Puerto SMTP inv\\xE1lido\"})}configureSMTP({host,port:portNum,user,pass});await storage.createActivityLog({usuarioId:req.user.id,accion:\"Configur\\xF3 los par\\xE1metros SMTP\",modulo:\"admin\",detalles:`Host: ${host}, Puerto: ${port}`});res.json({success:true,message:\"Configuraci\\xF3n SMTP guardada exitosamente\"})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/admin/smtp-config\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const config=getSMTPConfig();if(!config){return res.json({configured:false})}res.json({configured:true,host:config.host,port:config.port,user:config.user})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/admin/smtp-accounts\",authenticateToken,checkPermission(\"admin:smtp_manage\"),async(req,res)=>{try{const accounts=await storage.getAllSMTPAccounts();const accountsWithoutPassword=accounts.map(acc=>({...acc,password:void 0}));res.json(accountsWithoutPassword)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/admin/smtp-accounts\",authenticateToken,checkPermission(\"admin:smtp_manage\"),async(req,res)=>{try{const{nombre,host,port,user,password,isPredeterminada,activa}=req.body;if(!nombre||!host||!port||!user||!password){return res.status(400).json({error:\"Faltan par\\xE1metros requeridos\"})}const account=await storage.createSMTPAccount({nombre,host,port:parseInt(port),user,password,isPredeterminada:isPredeterminada||false,activa:activa!==void 0?activa:true,creadaPor:req.user.id});await storage.createActivityLog({usuarioId:req.user.id,accion:\"Cre\\xF3 cuenta SMTP\",modulo:\"admin\",detalles:`Cuenta: ${nombre} (${user})`});res.json({...account,password:void 0})}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/admin/smtp-accounts/:id\",authenticateToken,checkPermission(\"admin:smtp_manage\"),async(req,res)=>{try{const{id}=req.params;const updates=req.body;if(updates.port){updates.port=parseInt(updates.port)}const account=await storage.updateSMTPAccount(id,updates);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Actualiz\\xF3 cuenta SMTP\",modulo:\"admin\",detalles:`Cuenta ID: ${id}`});res.json({...account,password:void 0})}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/admin/smtp-accounts/:id\",authenticateToken,checkPermission(\"admin:smtp_manage\"),async(req,res)=>{try{const{id}=req.params;await storage.deleteSMTPAccount(id);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Elimin\\xF3 cuenta SMTP\",modulo:\"admin\",detalles:`Cuenta ID: ${id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/admin/smtp-accounts/test\",authenticateToken,checkPermission(\"admin:smtp_manage\"),async(req,res)=>{try{const{host,port,user,password}=req.body;const nodemailer=require(\"nodemailer\");const transporter=nodemailer.createTransport({host,port:parseInt(port),secure:parseInt(port)===465,auth:{user,pass:password}});await transporter.verify();res.json({success:true,message:\"Conexi\\xF3n SMTP exitosa\"})}catch(error){res.status(500).json({success:false,error:error.message})}});app.get(\"/api/admin/storage-config\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const config=await prisma.storageConfig.findFirst({where:{isActive:true},orderBy:{createdAt:\"desc\"}});if(!config){return res.json({type:\"LOCAL\",basePath:\"/uploads\",isActive:true})}res.json({id:config.id,type:config.type,host:config.host,port:config.port,username:config.username,basePath:config.basePath,isActive:config.isActive,createdAt:config.createdAt,updatedAt:config.updatedAt})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/admin/storage-config\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const{type,host,port,username,password,basePath}=req.body;if(!type){return res.status(400).json({error:\"El tipo de almacenamiento es requerido\"})}if(type===\"FTP\"||type===\"SMB\"){if(!host||!port||!username||!password){return res.status(400).json({error:\"Para FTP/SMB se requieren: host, port, username y password\"})}}const encryptedPassword=password?encryptPassword(password):null;await prisma.storageConfig.updateMany({where:{isActive:true},data:{isActive:false}});const config=await prisma.storageConfig.create({data:{type,host,port:port?parseInt(port):null,username,encryptedPassword,basePath:basePath||(type===\"LOCAL\"?\"/uploads\":\"/\"),isActive:true}});await storage.createActivityLog({usuarioId:req.user.id,accion:`Configur\\xF3 almacenamiento ${type}`,modulo:\"admin\",detalles:type===\"LOCAL\"?\"Almacenamiento local\":`${host}:${port}`});await StorageFactory.clearInstance();res.json({id:config.id,type:config.type,host:config.host,port:config.port,username:config.username,basePath:config.basePath,isActive:config.isActive})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/admin/storage-config/test\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const{type,host,port,username,password,basePath}=req.body;if(!type){return res.status(400).json({error:\"El tipo de almacenamiento es requerido\"})}if(type===\"FTP\"||type===\"SMB\"){if(!host||!port||!username||!password){return res.status(400).json({error:\"Para FTP/SMB se requieren: host, port, username y password\"})}}const config={type,host,port:port?parseInt(port):void 0,username,encryptedPassword:password?encryptPassword(password):null,basePath:basePath||(type===\"LOCAL\"?\"/uploads\":\"/\")};const result=await StorageFactory.testConfigurationData(config);if(result.success){res.json({success:true,message:`Conexi\\xF3n ${type} exitosa`,details:result.message})}else{res.status(400).json({success:false,error:result.message})}}catch(error){res.status(500).json({success:false,error:error.message})}});app.post(\"/api/admin/storage-config/migrate\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const{targetConfigId}=req.body;if(!targetConfigId){return res.status(400).json({error:\"Se requiere targetConfigId\"})}const{migrateStorage}=await import(\"./services/migration-service\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s});const result=await migrateStorage(targetConfigId);res.json({success:result.success,totalFiles:result.totalFiles,migratedFiles:result.migratedFiles,errors:result.errors,message:result.success?`Migraci\\xF3n exitosa: ${result.migratedFiles} archivos migrados`:`Migraci\\xF3n con errores: ${result.migratedFiles}/${result.totalFiles} archivos migrados`})}catch(error){res.status(500).json({error:error.message,success:false})}});app.get(\"/api/admin/system-settings\",async(req,res)=>{try{const settings=await storage.getSystemSettings();if(!settings){return res.json({registrationEnabled:true})}res.json(settings)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/admin/system-settings\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const{registrationEnabled}=req.body;const settings=await storage.updateSystemSettings({registrationEnabled});await storage.createActivityLog({usuarioId:req.user.id,accion:registrationEnabled?\"Habilit\\xF3 el registro de usuarios\":\"Deshabilit\\xF3 el registro de usuarios\",modulo:\"admin\",detalles:`Registro de usuarios: ${registrationEnabled?\"Habilitado\":\"Deshabilitado\"}`});res.json(settings)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/system/config\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const configs=await prisma.systemConfig.findMany({orderBy:{key:\"asc\"}});res.json(configs)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/system/config/:key\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const config=await prisma.systemConfig.findUnique({where:{key:req.params.key}});if(!config){return res.status(404).json({error:\"Configuraci\\xF3n no encontrada\"})}res.json(config)}catch(error){res.status(500).json({error:error.message})}});app.put(\"/api/system/config/:key\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const{value}=req.body;if(value===void 0||value===null){return res.status(400).json({error:\"El valor de la configuraci\\xF3n es requerido\"})}const existing=await prisma.systemConfig.findUnique({where:{key:req.params.key}});if(!existing){return res.status(404).json({error:\"Configuraci\\xF3n no encontrada\"})}if(!existing.isEditable){return res.status(403).json({error:\"Esta configuraci\\xF3n no es editable\"})}const config=await prisma.systemConfig.update({where:{key:req.params.key},data:{value:String(value)}});await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 configuraci\\xF3n del sistema`,modulo:\"admin\",detalles:`Configuraci\\xF3n \"${req.params.key}\" actualizada a: ${value}`});res.json(config)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/admin/github-config\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const repoConfig=await prisma.systemConfig.findUnique({where:{key:\"github_repo_url\"}});const branchConfig=await prisma.systemConfig.findUnique({where:{key:\"github_branch\"}});res.json({repoUrl:repoConfig?.value||\"\",branch:branchConfig?.value||\"main\",configured:!!repoConfig?.value})}catch(error){res.status(500).json({error:error.message})}});app.put(\"/api/admin/github-config\",authenticateToken,checkPermission(\"admin:settings\"),async(req,res)=>{try{const{repoUrl,branch}=req.body;if(repoUrl){if(typeof repoUrl!==\"string\"||repoUrl.length>300){return res.status(400).json({error:\"Formato inv\\xE1lido de repoUrl\"})}const ownerRepoMatch=repoUrl.match(/^([a-zA-Z0-9_-]+)\\/([a-zA-Z0-9_.-]+)$/);if(!ownerRepoMatch){try{const candidate=repoUrl.startsWith(\"http://\")||repoUrl.startsWith(\"https://\")?repoUrl:`https://${repoUrl}`;const parsed=new URL(candidate);const hostname=parsed.hostname.toLowerCase();if(!(hostname===\"github.com\"||hostname.endsWith(\".github.com\"))){return res.status(400).json({error:\"Solo se permiten URLs de GitHub en repoUrl\"})}if(parsed.username||parsed.password){return res.status(400).json({error:\"URL inv\\xE1lida en repoUrl\"})}const parts=parsed.pathname.split(\"/\").filter(Boolean);if(parts.length<2){return res.status(400).json({error:\"URL de GitHub inv\\xE1lida, debe apuntar a owner/repo\"})}const owner=parts[0];const repo=parts[1];req.body.repoUrl=`https://github.com/${owner}/${repo}`}catch(e){return res.status(400).json({error:\"Formato inv\\xE1lido. Use 'owner/repo' o una URL v\\xE1lida de GitHub\"})}}}if(repoUrl!==void 0){await prisma.systemConfig.upsert({where:{key:\"github_repo_url\"},create:{key:\"github_repo_url\",value:repoUrl,description:\"URL del repositorio de GitHub para actualizaciones\",isEditable:true},update:{value:repoUrl}})}if(branch!==void 0){await prisma.systemConfig.upsert({where:{key:\"github_branch\"},create:{key:\"github_branch\",value:branch,description:\"Rama de GitHub para actualizaciones\",isEditable:true},update:{value:branch}})}await storage.createActivityLog({usuarioId:req.user.id,accion:\"Actualiz\\xF3 configuraci\\xF3n de GitHub\",modulo:\"admin\",detalles:`Repositorio: ${repoUrl||\"sin cambios\"}, Rama: ${branch||\"sin cambios\"}`});res.json({success:true,message:\"Configuraci\\xF3n de GitHub actualizada exitosamente\",repoUrl,branch})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/system/version\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const currentVersion=await getCurrentVersion();const repoConfig=await prisma.systemConfig.findUnique({where:{key:\"github_repo_url\"}});if(!repoConfig?.value){return res.json({current:currentVersion,latest:null,updateAvailable:false,configured:false,message:\"Repositorio de GitHub no configurado\"})}const match=repoConfig.value.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/);if(!match){return res.json({current:currentVersion,latest:null,updateAvailable:false,configured:false,message:\"URL de GitHub no v\\xE1lida\"})}const[,owner,repo]=match;const versionInfo=await checkForUpdates(owner,repo.replace(\".git\",\"\"));res.json({...versionInfo,configured:true})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/system/update\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const gitCheck=await verifyGitSetup();if(!gitCheck.installed){return res.status(400).json({error:\"Git no est\\xE1 instalado\",message:gitCheck.message})}if(!gitCheck.configured){return res.status(400).json({error:\"Repositorio Git no configurado\",message:gitCheck.message})}performSystemUpdate(req.user.id,progress=>{const io2=req.app.io;if(io2){io2.to(`user:${req.user.id}`).emit(\"update:progress\",progress)}}).then(result=>{const io2=req.app.io;if(io2){io2.to(`user:${req.user.id}`).emit(\"update:complete\",result)}}).catch(error=>{const io2=req.app.io;if(io2){io2.to(`user:${req.user.id}`).emit(\"update:error\",{error:error.message})}});res.json({success:true,message:\"Actualizaci\\xF3n iniciada. Recibir\\xE1 notificaciones del progreso.\"})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/system/backups\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const backups=await listBackups();res.json(backups)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/system/backups\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const backup=await createSystemBackup(req.user.id);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Cre\\xF3 backup del sistema\",modulo:\"sistema\",detalles:`Backup ID: ${backup.id}, Versi\\xF3n: ${backup.version}`});res.json(backup)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/system/restore/:id\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{await restoreFromBackup(req.params.id,req.user.id);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Restaur\\xF3 sistema desde backup\",modulo:\"sistema\",detalles:`Backup ID: ${req.params.id}`});res.json({success:true,message:\"Sistema restaurado exitosamente. Reinicie el servidor para aplicar los cambios.\"})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/system/updates\",authenticateToken,checkPermission(\"admin:system\"),async(req,res)=>{try{const updates=await getUpdateHistory(20);res.json(updates)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/roles\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const roles=await storage.getAllRoles();res.json(roles)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/roles/:id\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const role=await storage.getRoleById(req.params.id);if(!role){return res.status(404).json({error:\"Rol no encontrado\"})}res.json(role)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/roles\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const{name,description}=req.body;if(!name){return res.status(400).json({error:\"El nombre del rol es requerido\"})}const role=await storage.createRole({name,description});await storage.createActivityLog({usuarioId:req.user.id,accion:`Cre\\xF3 el rol: ${name}`,modulo:\"admin\",detalles:description||\"\"});res.status(201).json(role)}catch(error){if(error.code===\"P2002\"){return res.status(400).json({error:\"Ya existe un rol con ese nombre\"})}res.status(500).json({error:error.message})}});app.patch(\"/api/roles/:id\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const{name,description}=req.body;const role=await storage.updateRole(req.params.id,{name,description});await storage.createActivityLog({usuarioId:req.user.id,accion:`Actualiz\\xF3 el rol: ${role.name}`,modulo:\"admin\",detalles:JSON.stringify({name,description})});res.json(role)}catch(error){if(error.code===\"P2002\"){return res.status(400).json({error:\"Ya existe un rol con ese nombre\"})}res.status(500).json({error:error.message})}});app.delete(\"/api/roles/:id\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{await storage.deleteRole(req.params.id);await storage.createActivityLog({usuarioId:req.user.id,accion:`Elimin\\xF3 un rol`,modulo:\"admin\",detalles:`ID: ${req.params.id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/permissions\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const permissions=await storage.getAllPermissions();res.json(permissions)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/roles/:id/permissions\",authenticateToken,checkPermission(\"admin:roles\"),async(req,res)=>{try{const{permissionIds}=req.body;if(!Array.isArray(permissionIds)){return res.status(400).json({error:\"permissionIds debe ser un array\"})}const role=await storage.assignPermissionsToRole(req.params.id,permissionIds);await storage.createActivityLog({usuarioId:req.user.id,accion:`Asign\\xF3 permisos al rol: ${role?.name}`,modulo:\"admin\",detalles:`${permissionIds.length} permisos asignados`});res.json(role)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/audit\",authenticateToken,checkPermission(\"audits:read\"),async(req,res)=>{try{const{table,recordId,userId}=req.query;let audits;if(table&&recordId){audits=await storage.getAuditEntriesByRecord(table,recordId)}else if(table){audits=await storage.getAuditEntriesByTable(table)}else if(userId){audits=await storage.getAuditEntriesByUser(userId)}else{audits=await storage.getAllAuditEntries()}const usersMap=new Map;const users=await storage.getAllUsers();users.forEach(u=>usersMap.set(u.id,u));const auditsWithUsers=audits.map(audit=>({...audit,usuario:usersMap.get(audit.usuarioId)}));res.json(auditsWithUsers)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/search\",authenticateToken,async(req,res)=>{try{const{q}=req.query;if(!q||typeof q!==\"string\"||q.trim().length<2){return res.status(400).json({error:\"Consulta de b\\xFAsqueda demasiado corta (m\\xEDnimo 2 caracteres)\"})}console.log(\"About to call globalSearch with:\",q.trim());const results=await storage.globalSearch(q.trim());console.log(\"globalSearch returned successfully\");console.log(\"Search results:\",{clientes:results.clientes.length,tareas:results.tareas.length,impuestos:results.impuestos.length,manuales:results.manuales.length});const serializedResults=JSON.parse(JSON.stringify(results));res.json(serializedResults)}catch(error){console.error(\"Search error:\",error);res.status(500).json({error:error.message})}});app.get(\"/api/tax-requirements\",authenticateToken,async(req,res)=>{try{const requirements=await prisma.clientTaxRequirement.findMany({include:{client:true}});res.json(requirements)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/tax-requirements\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{clientId,taxModelCode,required=true,note,colorTag}=req.body;const requirement=await prisma.clientTaxRequirement.create({data:{clientId,taxModelCode,required,note,colorTag},include:{client:true}});res.json(requirement)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/tax-requirements/:id/toggle\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const{id}=req.params;const current=await prisma.clientTaxRequirement.findUnique({where:{id}});if(!current){return res.status(404).json({error:\"Requisito no encontrado\"})}const updated=await prisma.clientTaxRequirement.update({where:{id},data:{required:!current.required},include:{client:true}});res.json(updated)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/tax-requirements/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const{id}=req.params;const{note,colorTag}=req.body;const updated=await prisma.clientTaxRequirement.update({where:{id},data:{note,colorTag},include:{client:true}});res.json(updated)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/fiscal-periods\",authenticateToken,async(req,res)=>{try{const periods=await prisma.fiscalPeriod.findMany({orderBy:[{year:\"desc\"},{quarter:\"asc\"}]});res.json(periods)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/fiscal-periods/create-year\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{year}=req.body;const{PrismaClient:PrismaClient2}=await import(\"@prisma/client\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s});const prisma2=new PrismaClient2;const periods=[];for(let q=1;q<=4;q++){const period=await prisma2.fiscalPeriod.create({data:{year:parseInt(year),quarter:q,label:`${q}T`,startsAt:new Date(`${year}-${(q-1)*3+1}-01`),endsAt:new Date(`${year}-${q*3}-${q===4?\"31\":\"30\"}`)}});periods.push(period)}await prisma2.$disconnect();res.json(periods)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/fiscal-periods\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{year,quarter,label,startsAt,endsAt}=req.body;const{PrismaClient:PrismaClient2}=await import(\"@prisma/client\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s});const prisma2=new PrismaClient2;const period=await prisma2.fiscalPeriod.create({data:{year:parseInt(year),quarter,label,startsAt:new Date(startsAt),endsAt:new Date(endsAt)}});await prisma2.$disconnect();res.json(period)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/tax-filings\",authenticateToken,async(req,res)=>{try{const filings=await prisma.clientTaxFiling.findMany({include:{client:true,period:true}});res.json(filings)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/tax-filings\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{clientId,taxModelCode,periodId,status,notes}=req.body;const filing=await prisma.clientTaxFiling.create({data:{clientId,taxModelCode,periodId,status:status||\"NOT_STARTED\",notes}});res.json(filing)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/tax-filings/:id\",authenticateToken,checkPermission(\"taxes:update\"),async(req,res)=>{try{const{id}=req.params;const{status,notes,presentedAt}=req.body;const{PrismaClient:PrismaClient2}=await import(\"@prisma/client\").then(s=>{const e=\"default\";return s[e]&&typeof s[e]==\"object\"&&\"__esModule\"in s[e]?s[e]:s});const prisma2=new PrismaClient2;const data={};if(status)data.status=status;if(notes!==void 0)data.notes=notes;if(presentedAt)data.presentedAt=new Date(presentedAt);const filing=await prisma2.clientTaxFiling.update({where:{id},data});await prisma2.$disconnect();res.json(filing)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/tax-filings/batch\",authenticateToken,checkPermission(\"taxes:create\"),async(req,res)=>{try{const{clientId,taxModelCode,periodIds}=req.body;const filings=await Promise.all(periodIds.map(periodId=>prisma.clientTaxFiling.upsert({where:{clientId_taxModelCode_periodId:{clientId,taxModelCode,periodId}},create:{clientId,taxModelCode,periodId,status:\"NOT_STARTED\"},update:{}})));res.json(filings)}catch(error){res.status(500).json({error:error.message})}});setInterval(()=>{checkAndSendReminders(storage).catch(console.error)},60*60*1e3);const httpServer=createServer(app);const io=new SocketIOServer(httpServer,{cors:{origin:process.env.FRONTEND_URL||\"http://localhost:5000\",methods:[\"GET\",\"POST\"],credentials:true}});io.use(async(socket,next)=>{try{const token=socket.handshake.auth.token;if(!token){return next(new Error(\"No token provided\"))}const decoded=jwt.verify(token,JWT_SECRET);const user=await storage.getUser(decoded.id);if(!user){return next(new Error(\"User not found\"))}socket.data.user={id:user.id,username:user.username,role:user.role};next()}catch(error){next(new Error(\"Invalid token\"))}});app.get(\"/api/notification-templates\",authenticateToken,checkPermission(\"notifications:view_history\"),async(req,res)=>{try{const templates=await storage.getAllNotificationTemplates();res.json(templates)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/notification-templates\",authenticateToken,checkPermission(\"notifications:create\"),async(req,res)=>{try{const{nombre,asunto,contenidoHTML,variables,tipo,activa}=req.body;if(!nombre||!asunto||!contenidoHTML){return res.status(400).json({error:\"Faltan campos requeridos\"})}const template=await storage.createNotificationTemplate({nombre,asunto,contenidoHTML,variables:variables||null,tipo:tipo||\"INFORMATIVO\",activa:activa!==void 0?activa:true,creadoPor:req.user.id});await storage.createActivityLog({usuarioId:req.user.id,accion:\"Cre\\xF3 plantilla de notificaci\\xF3n\",modulo:\"notificaciones\",detalles:`Plantilla: ${nombre}`});res.json(template)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/notification-templates/:id\",authenticateToken,checkPermission(\"notifications:update\"),async(req,res)=>{try{const{id}=req.params;const updates=req.body;const template=await storage.updateNotificationTemplate(id,updates);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Actualiz\\xF3 plantilla de notificaci\\xF3n\",modulo:\"notificaciones\",detalles:`Plantilla ID: ${id}`});res.json(template)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/notification-templates/:id\",authenticateToken,checkPermission(\"notifications:delete\"),async(req,res)=>{try{const{id}=req.params;await storage.deleteNotificationTemplate(id);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Elimin\\xF3 plantilla de notificaci\\xF3n\",modulo:\"notificaciones\",detalles:`Plantilla ID: ${id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/notifications/send\",authenticateToken,checkPermission(\"notifications:send\"),async(req,res)=>{try{const{plantillaId,smtpAccountId,destinatarios,asunto,contenido}=req.body;if(!destinatarios||destinatarios.length===0){return res.status(400).json({error:\"Debe seleccionar al menos un destinatario\"})}const log=await storage.createNotificationLog({plantillaId:plantillaId||null,smtpAccountId:smtpAccountId||null,destinatarios,asunto,contenido,tipo:\"EMAIL\",estado:\"ENVIADO\",fechaEnvio:new Date,enviadoPor:req.user.id});await storage.createActivityLog({usuarioId:req.user.id,accion:\"Envi\\xF3 notificaci\\xF3n\",modulo:\"notificaciones\",detalles:`${destinatarios.length} destinatarios`});res.json(log)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/notifications/history\",authenticateToken,checkPermission(\"notifications:view_history\"),async(req,res)=>{try{const logs=await storage.getAllNotificationLogs();res.json(logs)}catch(error){res.status(500).json({error:error.message})}});app.get(\"/api/notifications/scheduled\",authenticateToken,checkPermission(\"notifications:view_history\"),async(req,res)=>{try{const scheduled=await storage.getAllScheduledNotifications();res.json(scheduled)}catch(error){res.status(500).json({error:error.message})}});app.post(\"/api/notifications/schedule\",authenticateToken,checkPermission(\"notifications:send\"),async(req,res)=>{try{const{plantillaId,smtpAccountId,destinatariosSeleccionados,fechaProgramada,recurrencia}=req.body;if(!plantillaId||!fechaProgramada){return res.status(400).json({error:\"Faltan campos requeridos\"})}const notification=await storage.createScheduledNotification({plantillaId,smtpAccountId:smtpAccountId||null,destinatariosSeleccionados,fechaProgramada:new Date(fechaProgramada),estado:\"PENDIENTE\",recurrencia:recurrencia||\"NINGUNA\",creadoPor:req.user.id});await storage.createActivityLog({usuarioId:req.user.id,accion:\"Program\\xF3 notificaci\\xF3n\",modulo:\"notificaciones\",detalles:`Fecha: ${fechaProgramada}`});res.json(notification)}catch(error){res.status(500).json({error:error.message})}});app.patch(\"/api/notifications/scheduled/:id\",authenticateToken,checkPermission(\"notifications:update\"),async(req,res)=>{try{const{id}=req.params;const updates=req.body;if(updates.fechaProgramada){updates.fechaProgramada=new Date(updates.fechaProgramada)}const notification=await storage.updateScheduledNotification(id,updates);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Actualiz\\xF3 notificaci\\xF3n programada\",modulo:\"notificaciones\",detalles:`Notificaci\\xF3n ID: ${id}`});res.json(notification)}catch(error){res.status(500).json({error:error.message})}});app.delete(\"/api/notifications/scheduled/:id\",authenticateToken,checkPermission(\"notifications:delete\"),async(req,res)=>{try{const{id}=req.params;await storage.deleteScheduledNotification(id);await storage.createActivityLog({usuarioId:req.user.id,accion:\"Elimin\\xF3 notificaci\\xF3n programada\",modulo:\"notificaciones\",detalles:`Notificaci\\xF3n ID: ${id}`});res.json({success:true})}catch(error){res.status(500).json({error:error.message})}});io.on(\"connection\",socket=>{const user=socket.data.user;console.log(`Usuario conectado: ${user.username} (${socket.id})`);socket.join(`user:${user.id}`);socket.join(`role:${user.role}`);io.emit(\"user:connected\",{userId:user.id,username:user.username,timestamp:new Date().toISOString()});socket.on(\"disconnect\",()=>{console.log(`Usuario desconectado: ${user.username}`);io.emit(\"user:disconnected\",{userId:user.id,username:user.username,timestamp:new Date().toISOString()})})});httpServer.io=io;setSocketIO(io);return httpServer}__name(registerRoutes,\"registerRoutes\");export{registerRoutes};\n","warnings":[],"map":{"version":3,"mappings":"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","names":["io","PrismaClient","prisma"],"ignoreList":[],"sources":["/Users/usuario/Documents/Repositorios/Asesoria-La-Llave/server/routes.ts"],"sourcesContent":[null]}}