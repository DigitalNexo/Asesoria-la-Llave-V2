{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import express from\"express\";import{registerRoutes}from\"./routes\";import{setupVite,serveStatic}from\"./vite\";import helmet from\"helmet\";import cors from\"cors\";import{PrismaClient}from\"@prisma/client\";import{httpLogger,logger,dbLogger,logError}from\"./logger\";import{initializeJobs,startAllJobs,stopAllJobs}from\"./jobs\";import bcrypt from\"bcrypt\";const SALT_ROUNDS=10;const app=express();app.set(\"trust proxy\",1);const dbUrl=process.env.DATABASE_URL;if(!dbUrl){logger.fatal(\"\\n\\n\\u274C FATAL: DATABASE_URL no est\\xE1 configurada. Este proyecto requiere una base de datos MariaDB externa.\\nPor favor a\\xF1ade DATABASE_URL en tu archivo .env con el formato:\\n  mysql://USER:PASS@HOST:3306/asesoria_llave?socket_timeout=60&connect_timeout=60\\no\\n  mariadb://USER:PASS@HOST:3306/asesoria_llave\\n\\n\");process.exit(1)}if(!/^mysql:\\/\\//i.test(dbUrl)&&!/^mariadb:\\/\\//i.test(dbUrl)){logger.fatal(`\n\n\\u274C FATAL: DATABASE_URL debe usar el driver MySQL/MariaDB (mysql:// o mariadb://).\nValor actual: ${dbUrl}\nAseg\\xFArate de usar MariaDB como base de datos externa.\n\n`);process.exit(1)}try{const parsed=new URL(dbUrl);const host=parsed.hostname;const allowLocal=process.env.ALLOW_LOCAL_DB===\"true\";const localHosts=[\"localhost\",\"127.0.0.1\",\"::1\",\"db\"];if(!allowLocal&&localHosts.includes(host)){logger.fatal(`\n\n\\u274C FATAL: Se requiere una base de datos MariaDB EXTERNA.\nDATABASE_URL apunta a un host local/internal: ${host}\nSi quieres permitir uso de una base de datos local (ej. docker-compose) define ALLOW_LOCAL_DB=true en tu .env\n\n`);process.exit(1)}}catch(e){logger.warn({err:e},\"No se pudo parsear DATABASE_URL para validaci\\xF3n de host\")}const prisma=new PrismaClient({log:[{level:\"query\",emit:\"event\"},{level:\"error\",emit:\"event\"},{level:\"warn\",emit:\"event\"}]});prisma.$on(\"query\",e=>{dbLogger.debug({duration:e.duration,query:e.query},\"Database query\")});prisma.$on(\"error\",e=>{dbLogger.error({target:e.target},e.message)});prisma.$on(\"warn\",e=>{dbLogger.warn({target:e.target},e.message)});const isDev=process.env.NODE_ENV===\"development\";app.use(helmet({contentSecurityPolicy:isDev?false:{directives:{defaultSrc:[\"'self'\"],styleSrc:[\"'self'\",\"'unsafe-inline'\"],scriptSrc:[\"'self'\"],imgSrc:[\"'self'\",\"data:\",\"blob:\",\"https:\"],connectSrc:[\"'self'\"],fontSrc:[\"'self'\"],objectSrc:[\"'none'\"],mediaSrc:[\"'self'\"],frameSrc:[\"'none'\"]}},hsts:{maxAge:31536e3,includeSubDomains:true,preload:true},referrerPolicy:{policy:\"strict-origin-when-cross-origin\"}}));app.use(cors({origin:process.env.FRONTEND_URL||(isDev?\"*\":false),credentials:true}));app.use(express.json({limit:\"10mb\"}));app.use(express.urlencoded({extended:false,limit:\"10mb\"}));app.use(\"/uploads\",express.static(\"uploads\"));app.use(httpLogger);app.get(\"/health\",async(_req,res)=>{res.status(200).json({status:\"ok\",timestamp:new Date().toISOString(),uptime:process.uptime()})});app.get(\"/ready\",async(_req,res)=>{try{await prisma.$queryRaw`SELECT 1`;res.status(200).json({status:\"ready\",timestamp:new Date().toISOString(),database:\"connected\",s3:process.env.S3_ENDPOINT?\"configured\":\"not configured\",smtp:process.env.SMTP_HOST?\"configured\":\"not configured\"})}catch(error){logger.error({err:error},\"Readiness check failed\");res.status(503).json({status:\"not ready\",database:\"disconnected\",error:error instanceof Error?error.message:\"Unknown error\"})}});async function createInitialAdmin(){try{const adminRole=await prisma.role.findFirst({where:{name:\"Administrador\"}});if(!adminRole){logger.warn(\"\\u26A0\\uFE0F  Rol Administrador no encontrado. Ejecuta las migraciones primero.\");return}const existingAdmin=await prisma.user.findFirst({where:{roleId:adminRole.id}});if(existingAdmin){logger.info(\"\\u2139\\uFE0F  Usuario administrador ya existe en el sistema\");return}const adminEmail=process.env.ADMIN_EMAIL;const adminUsername=process.env.ADMIN_USERNAME;const adminPassword=process.env.ADMIN_PASSWORD;if(!adminEmail||!adminUsername||!adminPassword){logger.fatal(\"\\n\\u2554\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2557\\n\\u2551  \\u274C ERROR CR\\xCDTICO: CONFIGURACI\\xD3N DE ADMINISTRADOR REQUERIDA           \\u2551\\n\\u2560\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2563\\n\\u2551                                                                       \\u2551\\n\\u2551  No existe ning\\xFAn usuario administrador en el sistema y las           \\u2551\\n\\u2551  variables de entorno no est\\xE1n configuradas.                          \\u2551\\n\\u2551                                                                       \\u2551\\n\\u2551  Configura las siguientes variables en tu archivo .env:              \\u2551\\n\\u2551                                                                       \\u2551\\n\\u2551    ADMIN_EMAIL=tu-email@ejemplo.com                                   \\u2551\\n\\u2551    ADMIN_USERNAME=tu-usuario                                          \\u2551\\n\\u2551    ADMIN_PASSWORD=tu-contrase\\xF1a-segura                                \\u2551\\n\\u2551                                                                       \\u2551\\n\\u2551  Requisitos:                                                          \\u2551\\n\\u2551    - Email v\\xE1lido (debe contener @)                                   \\u2551\\n\\u2551    - Usuario m\\xEDnimo 3 caracteres                                      \\u2551\\n\\u2551    - Contrase\\xF1a m\\xEDnimo 6 caracteres                                   \\u2551\\n\\u2551                                                                       \\u2551\\n\\u2551  El servidor se detendr\\xE1 por seguridad.                               \\u2551\\n\\u2551                                                                       \\u2551\\n\\u255A\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255D\\n\");process.exit(1)}const validationErrors=[];const forbiddenPlaceholders={email:[\"CAMBIAR_ESTE_EMAIL@ejemplo.com\",\"CAMBIAR_ESTE_EMAIL@EJEMPLO.COM\",\"admin@asesoriallave.com\",\"admin@tuempresa.com\"],username:[\"CAMBIAR_ESTE_USUARIO\",\"admin\",\"administrator\",\"root\"],password:[\"CAMBIAR_ESTA_CONTRASE\\xD1A_AHORA\",\"CAMBIAR_ESTA_CONTRASENA_AHORA\",\"Admin123!\",\"admin123\",\"password\",\"password123\",\"CambiaEstoAhora123!\"]};if(forbiddenPlaceholders.email.some(p=>p.toLowerCase()===adminEmail.toLowerCase())){validationErrors.push(\"- ADMIN_EMAIL es un valor de ejemplo. Usa un email real \\xFAnico.\")}if(forbiddenPlaceholders.username.some(p=>p.toLowerCase()===adminUsername.toLowerCase())){validationErrors.push(\"- ADMIN_USERNAME es un valor de ejemplo o com\\xFAn. Usa un usuario \\xFAnico.\")}if(forbiddenPlaceholders.password.some(p=>p.toLowerCase()===adminPassword.toLowerCase())){validationErrors.push(\"- ADMIN_PASSWORD es un valor de ejemplo o muy d\\xE9bil. Usa una contrase\\xF1a segura \\xFAnica.\")}if(adminUsername.length<3){validationErrors.push(\"- ADMIN_USERNAME debe tener al menos 3 caracteres\")}if(adminPassword.length<6){validationErrors.push(\"- ADMIN_PASSWORD debe tener al menos 6 caracteres\")}if(!adminEmail.includes(\"@\")||!adminEmail.includes(\".\")){validationErrors.push(\"- ADMIN_EMAIL debe ser un email v\\xE1lido (ejemplo: admin@ejemplo.com)\")}if(validationErrors.length>0){logger.fatal(`\n\\u2554\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2557\n\\u2551  \\u274C ERROR: CREDENCIALES DE ADMINISTRADOR INV\\xC1LIDAS                    \\u2551\n\\u2560\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2563\n\\u2551                                                                       \\u2551\n\\u2551  ${validationErrors.join(\"\\n\\u2551  \")}                                   \\u2551\n\\u2551                                                                       \\u2551\n\\u2551  Corrige las variables en tu archivo .env y reinicia el servidor.    \\u2551\n\\u2551                                                                       \\u2551\n\\u255A\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255D\n`);process.exit(1)}const existingUser=await prisma.user.findFirst({where:{OR:[{email:adminEmail},{username:adminUsername}]}});if(existingUser){logger.fatal(`\n\\u274C ERROR: Usuario con email ${adminEmail} o username ${adminUsername} ya existe.\n   Usa credenciales diferentes para el administrador inicial.\n`);process.exit(1)}const hashedPassword=await bcrypt.hash(adminPassword,SALT_ROUNDS);const adminUser=await prisma.user.create({data:{username:adminUsername,email:adminEmail,password:hashedPassword,roleId:adminRole.id}});logger.info(`\n\\u2554\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2557\n\\u2551  \\u2705 ADMINISTRADOR INICIAL CREADO EXITOSAMENTE                         \\u2551\n\\u2560\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2563\n\\u2551                                                                       \\u2551\n\\u2551  Usuario: ${adminUser.username.padEnd(56)} \\u2551\n\\u2551  Email:   ${adminUser.email.padEnd(56)} \\u2551\n\\u2551                                                                       \\u2551\n\\u2551  \\u{1F510} IMPORTANTE: Cambia la contrase\\xF1a despu\\xE9s del primer login         \\u2551\n\\u2551                                                                       \\u2551\n\\u255A\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255D\n`)}catch(error){logger.fatal({err:error},\"\\u274C Error cr\\xEDtico creando usuario administrador inicial\");process.exit(1)}}__name(createInitialAdmin,\"createInitialAdmin\");(async()=>{await createInitialAdmin();initializeJobs(prisma);const enableCronJobs=process.env.ENABLE_CRON_JOBS===\"true\";if(isDev||enableCronJobs){try{startAllJobs();logger.info(\"\\u2705 Cron jobs iniciados\")}catch(error){logger.error({err:error},\"Error iniciando jobs\")}}else{logger.info(\"\\u2139\\uFE0F  Cron jobs deshabilitados (entorno Autoscale). Use Scheduled Deployments de Replit para tareas programadas.\")}const server=await registerRoutes(app);app.use((err,req,res,_next)=>{const status=err.status||err.statusCode||500;const message=err.message||\"Internal Server Error\";logError(err,{requestId:req.id,method:req.method,url:req.url,status});res.status(status).json({error:message,...isDev&&{stack:err.stack}})});if(app.get(\"env\")===\"development\"){await setupVite(app,server)}else{serveStatic(app)}const port=parseInt(process.env.PORT||\"5000\",10);const listenOptions={port,host:\"0.0.0.0\"};if(process.platform===\"linux\"){listenOptions.reusePort=true}server.listen(listenOptions,()=>{logger.info({port,env:process.env.NODE_ENV,nodeVersion:process.version,reusePort:Boolean(listenOptions.reusePort)},`\\u{1F680} Server listening on port ${port}`)});const shutdown=__name(async signal=>{logger.info(`${signal} received, shutting down gracefully...`);server.close(()=>{logger.info(\"HTTP server closed\")});if(isDev||enableCronJobs){try{stopAllJobs()}catch(error){logger.error({err:error},\"Error deteniendo jobs\")}}await prisma.$disconnect();logger.info(\"Database connection closed\");process.exit(0)},\"shutdown\");process.on(\"SIGTERM\",()=>shutdown(\"SIGTERM\"));process.on(\"SIGINT\",()=>shutdown(\"SIGINT\"))})();\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Users/usuario/Documents/Repositorios/Asesoria-La-Llave/server/index.ts"],"sourcesContent":[null]}}