function uue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SC={exports:{}},Vx={},jC={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H6;function due(){if(H6)return hr;H6=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(Q){return Q===null||typeof Q!="object"?null:(Q=f&&Q[f]||Q["@@iterator"],typeof Q=="function"?Q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function x(Q,F,G){this.props=Q,this.context=F,this.refs=y,this.updater=G||m}x.prototype.isReactComponent={},x.prototype.setState=function(Q,F){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,F,"setState")},x.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function b(){}b.prototype=x.prototype;function S(Q,F,G){this.props=Q,this.context=F,this.refs=y,this.updater=G||m}var j=S.prototype=new b;j.constructor=S,v(j,x.prototype),j.isPureReactComponent=!0;var E=Array.isArray,A=Object.prototype.hasOwnProperty,P={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function k(Q,F,G){var te,le={},he=null,me=null;if(F!=null)for(te in F.ref!==void 0&&(me=F.ref),F.key!==void 0&&(he=""+F.key),F)A.call(F,te)&&!O.hasOwnProperty(te)&&(le[te]=F[te]);var xe=arguments.length-2;if(xe===1)le.children=G;else if(1<xe){for(var de=Array(xe),Ne=0;Ne<xe;Ne++)de[Ne]=arguments[Ne+2];le.children=de}if(Q&&Q.defaultProps)for(te in xe=Q.defaultProps,xe)le[te]===void 0&&(le[te]=xe[te]);return{$$typeof:t,type:Q,key:he,ref:me,props:le,_owner:P.current}}function C(Q,F){return{$$typeof:t,type:Q.type,key:F,ref:Q.ref,props:Q.props,_owner:Q._owner}}function I(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function R(Q){var F={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(G){return F[G]})}var D=/\/+/g;function L(Q,F){return typeof Q=="object"&&Q!==null&&Q.key!=null?R(""+Q.key):F.toString(36)}function z(Q,F,G,te,le){var he=typeof Q;(he==="undefined"||he==="boolean")&&(Q=null);var me=!1;if(Q===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(Q.$$typeof){case t:case e:me=!0}}if(me)return me=Q,le=le(me),Q=te===""?"."+L(me,0):te,E(le)?(G="",Q!=null&&(G=Q.replace(D,"$&/")+"/"),z(le,F,G,"",function(Ne){return Ne})):le!=null&&(I(le)&&(le=C(le,G+(!le.key||me&&me.key===le.key?"":(""+le.key).replace(D,"$&/")+"/")+Q)),F.push(le)),1;if(me=0,te=te===""?".":te+":",E(Q))for(var xe=0;xe<Q.length;xe++){he=Q[xe];var de=te+L(he,xe);me+=z(he,F,G,de,le)}else if(de=p(Q),typeof de=="function")for(Q=de.call(Q),xe=0;!(he=Q.next()).done;)he=he.value,de=te+L(he,xe++),me+=z(he,F,G,de,le);else if(he==="object")throw F=String(Q),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return me}function W(Q,F,G){if(Q==null)return Q;var te=[],le=0;return z(Q,te,"","",function(he){return F.call(G,he,le++)}),te}function X(Q){if(Q._status===-1){var F=Q._result;F=F(),F.then(function(G){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=G)},function(G){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=G)}),Q._status===-1&&(Q._status=0,Q._result=F)}if(Q._status===1)return Q._result.default;throw Q._result}var q={current:null},V={transition:null},Y={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:V,ReactCurrentOwner:P};function re(){throw Error("act(...) is not supported in production builds of React.")}return hr.Children={map:W,forEach:function(Q,F,G){W(Q,function(){F.apply(this,arguments)},G)},count:function(Q){var F=0;return W(Q,function(){F++}),F},toArray:function(Q){return W(Q,function(F){return F})||[]},only:function(Q){if(!I(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},hr.Component=x,hr.Fragment=n,hr.Profiler=i,hr.PureComponent=S,hr.StrictMode=r,hr.Suspense=c,hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,hr.act=re,hr.cloneElement=function(Q,F,G){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var te=v({},Q.props),le=Q.key,he=Q.ref,me=Q._owner;if(F!=null){if(F.ref!==void 0&&(he=F.ref,me=P.current),F.key!==void 0&&(le=""+F.key),Q.type&&Q.type.defaultProps)var xe=Q.type.defaultProps;for(de in F)A.call(F,de)&&!O.hasOwnProperty(de)&&(te[de]=F[de]===void 0&&xe!==void 0?xe[de]:F[de])}var de=arguments.length-2;if(de===1)te.children=G;else if(1<de){xe=Array(de);for(var Ne=0;Ne<de;Ne++)xe[Ne]=arguments[Ne+2];te.children=xe}return{$$typeof:t,type:Q.type,key:le,ref:he,props:te,_owner:me}},hr.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:s,_context:Q},Q.Consumer=Q},hr.createElement=k,hr.createFactory=function(Q){var F=k.bind(null,Q);return F.type=Q,F},hr.createRef=function(){return{current:null}},hr.forwardRef=function(Q){return{$$typeof:l,render:Q}},hr.isValidElement=I,hr.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:X}},hr.memo=function(Q,F){return{$$typeof:u,type:Q,compare:F===void 0?null:F}},hr.startTransition=function(Q){var F=V.transition;V.transition={};try{Q()}finally{V.transition=F}},hr.unstable_act=re,hr.useCallback=function(Q,F){return q.current.useCallback(Q,F)},hr.useContext=function(Q){return q.current.useContext(Q)},hr.useDebugValue=function(){},hr.useDeferredValue=function(Q){return q.current.useDeferredValue(Q)},hr.useEffect=function(Q,F){return q.current.useEffect(Q,F)},hr.useId=function(){return q.current.useId()},hr.useImperativeHandle=function(Q,F,G){return q.current.useImperativeHandle(Q,F,G)},hr.useInsertionEffect=function(Q,F){return q.current.useInsertionEffect(Q,F)},hr.useLayoutEffect=function(Q,F){return q.current.useLayoutEffect(Q,F)},hr.useMemo=function(Q,F){return q.current.useMemo(Q,F)},hr.useReducer=function(Q,F,G){return q.current.useReducer(Q,F,G)},hr.useRef=function(Q){return q.current.useRef(Q)},hr.useState=function(Q){return q.current.useState(Q)},hr.useSyncExternalStore=function(Q,F,G){return q.current.useSyncExternalStore(Q,F,G)},hr.useTransition=function(){return q.current.useTransition()},hr.version="18.3.1",hr}var V6;function m1(){return V6||(V6=1,jC.exports=due()),jC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W6;function fue(){if(W6)return Vx;W6=1;var t=m1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,f={},p=null,m=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(d in c)r.call(c,d)&&!s.hasOwnProperty(d)&&(f[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:l,key:p,ref:m,props:f,_owner:i.current}}return Vx.Fragment=n,Vx.jsx=o,Vx.jsxs=o,Vx}var K6;function hue(){return K6||(K6=1,SC.exports=fue()),SC.exports}var a=hue(),Tw={},EC={exports:{}},tl={},_C={exports:{}},CC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G6;function pue(){return G6||(G6=1,(function(t){function e(V,Y){var re=V.length;V.push(Y);e:for(;0<re;){var Q=re-1>>>1,F=V[Q];if(0<i(F,Y))V[Q]=Y,V[re]=F,re=Q;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var Y=V[0],re=V.pop();if(re!==Y){V[0]=re;e:for(var Q=0,F=V.length,G=F>>>1;Q<G;){var te=2*(Q+1)-1,le=V[te],he=te+1,me=V[he];if(0>i(le,re))he<F&&0>i(me,le)?(V[Q]=me,V[he]=re,Q=he):(V[Q]=le,V[te]=re,Q=te);else if(he<F&&0>i(me,re))V[Q]=me,V[he]=re,Q=he;else break e}}return Y}function i(V,Y){var re=V.sortIndex-Y.sortIndex;return re!==0?re:V.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(V){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=V)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function E(V){if(y=!1,j(V),!v)if(n(c)!==null)v=!0,X(A);else{var Y=n(u);Y!==null&&q(E,Y.startTime-V)}}function A(V,Y){v=!1,y&&(y=!1,b(k),k=-1),m=!0;var re=p;try{for(j(Y),f=n(c);f!==null&&(!(f.expirationTime>Y)||V&&!R());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var F=Q(f.expirationTime<=Y);Y=t.unstable_now(),typeof F=="function"?f.callback=F:f===n(c)&&r(c),j(Y)}else r(c);f=n(c)}if(f!==null)var G=!0;else{var te=n(u);te!==null&&q(E,te.startTime-Y),G=!1}return G}finally{f=null,p=re,m=!1}}var P=!1,O=null,k=-1,C=5,I=-1;function R(){return!(t.unstable_now()-I<C)}function D(){if(O!==null){var V=t.unstable_now();I=V;var Y=!0;try{Y=O(!0,V)}finally{Y?L():(P=!1,O=null)}}else P=!1}var L;if(typeof S=="function")L=function(){S(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=D,L=function(){W.postMessage(null)}}else L=function(){x(D,0)};function X(V){O=V,P||(P=!0,L())}function q(V,Y){k=x(function(){V(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,X(A))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var re=p;p=Y;try{return V()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,Y){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=p;p=V;try{return Y()}finally{p=re}},t.unstable_scheduleCallback=function(V,Y,re){var Q=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Q+re:Q):re=Q,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=re+F,V={id:d++,callback:Y,priorityLevel:V,startTime:re,expirationTime:F,sortIndex:-1},re>Q?(V.sortIndex=re,e(u,V),n(c)===null&&V===n(u)&&(y?(b(k),k=-1):y=!0,q(E,re-Q))):(V.sortIndex=F,e(c,V),v||m||(v=!0,X(A))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var Y=p;return function(){var re=p;p=Y;try{return V.apply(this,arguments)}finally{p=re}}}})(CC)),CC}var Y6;function mue(){return Y6||(Y6=1,_C.exports=pue()),_C.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X6;function gue(){if(X6)return tl;X6=1;var t=m1(),e=mue();function n(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,w=1;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(h,g){o(h,g),o(h+"Capture",g)}function o(h,g){for(i[h]=g,h=0;h<g.length;h++)r.add(g[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function p(h){return c.call(f,h)?!0:c.call(d,h)?!1:u.test(h)?f[h]=!0:(d[h]=!0,!1)}function m(h,g,w,T){if(w!==null&&w.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return T?!1:w!==null?!w.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function v(h,g,w,T){if(g===null||typeof g>"u"||m(h,g,w,T))return!0;if(T)return!1;if(w!==null)switch(w.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function y(h,g,w,T,$,H,ie){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=T,this.attributeNamespace=$,this.mustUseProperty=w,this.propertyName=h,this.type=g,this.sanitizeURL=H,this.removeEmptyString=ie}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){x[h]=new y(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];x[g]=new y(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){x[h]=new y(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){x[h]=new y(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){x[h]=new y(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){x[h]=new y(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){x[h]=new y(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){x[h]=new y(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){x[h]=new y(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function S(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(b,S);x[g]=new y(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(b,S);x[g]=new y(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(b,S);x[g]=new y(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){x[h]=new y(h,1,!1,h.toLowerCase(),null,!1,!1)}),x.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){x[h]=new y(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,g,w,T){var $=x.hasOwnProperty(g)?x[g]:null;($!==null?$.type!==0:T||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(v(g,w,$,T)&&(w=null),T||$===null?p(g)&&(w===null?h.removeAttribute(g):h.setAttribute(g,""+w)):$.mustUseProperty?h[$.propertyName]=w===null?$.type===3?!1:"":w:(g=$.attributeName,T=$.attributeNamespace,w===null?h.removeAttribute(g):($=$.type,w=$===3||$===4&&w===!0?"":""+w,T?h.setAttributeNS(T,g,w):h.setAttribute(g,w))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),V=Symbol.iterator;function Y(h){return h===null||typeof h!="object"?null:(h=V&&h[V]||h["@@iterator"],typeof h=="function"?h:null)}var re=Object.assign,Q;function F(h){if(Q===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);Q=g&&g[1]||""}return`
`+Q+h}var G=!1;function te(h,g){if(!h||G)return"";G=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Ge){var T=Ge}Reflect.construct(h,[],g)}else{try{g.call()}catch(Ge){T=Ge}h.call(g.prototype)}else{try{throw Error()}catch(Ge){T=Ge}h()}}catch(Ge){if(Ge&&T&&typeof Ge.stack=="string"){for(var $=Ge.stack.split(`
`),H=T.stack.split(`
`),ie=$.length-1,Ee=H.length-1;1<=ie&&0<=Ee&&$[ie]!==H[Ee];)Ee--;for(;1<=ie&&0<=Ee;ie--,Ee--)if($[ie]!==H[Ee]){if(ie!==1||Ee!==1)do if(ie--,Ee--,0>Ee||$[ie]!==H[Ee]){var Oe=`
`+$[ie].replace(" at new "," at ");return h.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",h.displayName)),Oe}while(1<=ie&&0<=Ee);break}}}finally{G=!1,Error.prepareStackTrace=w}return(h=h?h.displayName||h.name:"")?F(h):""}function le(h){switch(h.tag){case 5:return F(h.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return h=te(h.type,!1),h;case 11:return h=te(h.type.render,!1),h;case 1:return h=te(h.type,!0),h;default:return""}}function he(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case O:return"Fragment";case P:return"Portal";case C:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case R:return(h.displayName||"Context")+".Consumer";case I:return(h._context.displayName||"Context")+".Provider";case D:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case W:return g=h.displayName||null,g!==null?g:he(h.type)||"Memo";case X:g=h._payload,h=h._init;try{return he(h(g))}catch{}}return null}function me(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(g);case 8:return g===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function xe(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function de(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ne(h){var g=de(h)?"checked":"value",w=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),T=""+h[g];if(!h.hasOwnProperty(g)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var $=w.get,H=w.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return $.call(this)},set:function(ie){T=""+ie,H.call(this,ie)}}),Object.defineProperty(h,g,{enumerable:w.enumerable}),{getValue:function(){return T},setValue:function(ie){T=""+ie},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Ce(h){h._valueTracker||(h._valueTracker=Ne(h))}function ae(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var w=g.getValue(),T="";return h&&(T=de(h)?h.checked?"true":"false":h.value),h=T,h!==w?(g.setValue(h),!0):!1}function Pe(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function J(h,g){var w=g.checked;return re({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??h._wrapperState.initialChecked})}function ne(h,g){var w=g.defaultValue==null?"":g.defaultValue,T=g.checked!=null?g.checked:g.defaultChecked;w=xe(g.value!=null?g.value:w),h._wrapperState={initialChecked:T,initialValue:w,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Re(h,g){g=g.checked,g!=null&&j(h,"checked",g,!1)}function dt(h,g){Re(h,g);var w=xe(g.value),T=g.type;if(w!=null)T==="number"?(w===0&&h.value===""||h.value!=w)&&(h.value=""+w):h.value!==""+w&&(h.value=""+w);else if(T==="submit"||T==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?Ve(h,g.type,w):g.hasOwnProperty("defaultValue")&&Ve(h,g.type,xe(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function et(h,g,w){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var T=g.type;if(!(T!=="submit"&&T!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,w||g===h.value||(h.value=g),h.defaultValue=g}w=h.name,w!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,w!==""&&(h.name=w)}function Ve(h,g,w){(g!=="number"||Pe(h.ownerDocument)!==h)&&(w==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+w&&(h.defaultValue=""+w))}var ge=Array.isArray;function Se(h,g,w,T){if(h=h.options,g){g={};for(var $=0;$<w.length;$++)g["$"+w[$]]=!0;for(w=0;w<h.length;w++)$=g.hasOwnProperty("$"+h[w].value),h[w].selected!==$&&(h[w].selected=$),$&&T&&(h[w].defaultSelected=!0)}else{for(w=""+xe(w),g=null,$=0;$<h.length;$++){if(h[$].value===w){h[$].selected=!0,T&&(h[$].defaultSelected=!0);return}g!==null||h[$].disabled||(g=h[$])}g!==null&&(g.selected=!0)}}function ke(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return re({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function We(h,g){var w=g.value;if(w==null){if(w=g.children,g=g.defaultValue,w!=null){if(g!=null)throw Error(n(92));if(ge(w)){if(1<w.length)throw Error(n(93));w=w[0]}g=w}g==null&&(g=""),w=g}h._wrapperState={initialValue:xe(w)}}function Ke(h,g){var w=xe(g.value),T=xe(g.defaultValue);w!=null&&(w=""+w,w!==h.value&&(h.value=w),g.defaultValue==null&&h.defaultValue!==w&&(h.defaultValue=w)),T!=null&&(h.defaultValue=""+T)}function qe(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function nt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?nt(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var xt,Ot=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,w,T,$){MSApp.execUnsafeLocalFunction(function(){return h(g,w,T,$)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=xt.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function Yt(h,g){if(g){var w=h.firstChild;if(w&&w===h.lastChild&&w.nodeType===3){w.nodeValue=g;return}}h.textContent=g}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$n=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(h){$n.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),Ct[g]=Ct[h]})});function Pn(h,g,w){return g==null||typeof g=="boolean"||g===""?"":w||typeof g!="number"||g===0||Ct.hasOwnProperty(h)&&Ct[h]?(""+g).trim():g+"px"}function Ht(h,g){h=h.style;for(var w in g)if(g.hasOwnProperty(w)){var T=w.indexOf("--")===0,$=Pn(w,g[w],T);w==="float"&&(w="cssFloat"),T?h.setProperty(w,$):h[w]=$}}var xn=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(h,g){if(g){if(xn[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function on(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cn=null;function bn(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Cr=null,ur=null,vn=null;function zt(h){if(h=ph(h)){if(typeof Cr!="function")throw Error(n(280));var g=h.stateNode;g&&(g=nm(g),Cr(h.stateNode,h.type,g))}}function je(h){ur?vn?vn.push(h):vn=[h]:ur=h}function se(){if(ur){var h=ur,g=vn;if(vn=ur=null,zt(h),g)for(h=0;h<g.length;h++)zt(g[h])}}function Le(h,g){return h(g)}function St(){}var Tn=!1;function Dt(h,g,w){if(Tn)return h(g,w);Tn=!0;try{return Le(h,g,w)}finally{Tn=!1,(ur!==null||vn!==null)&&(St(),se())}}function wt(h,g){var w=h.stateNode;if(w===null)return null;var T=nm(w);if(T===null)return null;w=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(h=h.type,T=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!T;break e;default:h=!1}if(h)return null;if(w&&typeof w!="function")throw Error(n(231,g,typeof w));return w}var At=!1;if(l)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){At=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{At=!1}function On(h,g,w,T,$,H,ie,Ee,Oe){var Ge=Array.prototype.slice.call(arguments,3);try{g.apply(w,Ge)}catch(yt){this.onError(yt)}}var en=!1,sr=null,Nr=!1,Ii=null,Ys={onError:function(h){en=!0,sr=h}};function Ta(h,g,w,T,$,H,ie,Ee,Oe){en=!1,sr=null,On.apply(Ys,arguments)}function $o(h,g,w,T,$,H,ie,Ee,Oe){if(Ta.apply(this,arguments),en){if(en){var Ge=sr;en=!1,sr=null}else throw Error(n(198));Nr||(Nr=!0,Ii=Ge)}}function Ss(h){var g=h,w=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(w=g.return),h=g.return;while(h)}return g.tag===3?w:null}function Wa(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function fa(h){if(Ss(h)!==h)throw Error(n(188))}function zo(h){var g=h.alternate;if(!g){if(g=Ss(h),g===null)throw Error(n(188));return g!==h?null:h}for(var w=h,T=g;;){var $=w.return;if($===null)break;var H=$.alternate;if(H===null){if(T=$.return,T!==null){w=T;continue}break}if($.child===H.child){for(H=$.child;H;){if(H===w)return fa($),h;if(H===T)return fa($),g;H=H.sibling}throw Error(n(188))}if(w.return!==T.return)w=$,T=H;else{for(var ie=!1,Ee=$.child;Ee;){if(Ee===w){ie=!0,w=$,T=H;break}if(Ee===T){ie=!0,T=$,w=H;break}Ee=Ee.sibling}if(!ie){for(Ee=H.child;Ee;){if(Ee===w){ie=!0,w=H,T=$;break}if(Ee===T){ie=!0,T=H,w=$;break}Ee=Ee.sibling}if(!ie)throw Error(n(189))}}if(w.alternate!==T)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?h:g}function vo(h){return h=zo(h),h!==null?Ul(h):null}function Ul(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=Ul(h);if(g!==null)return g;h=h.sibling}return null}var Rc=e.unstable_scheduleCallback,ha=e.unstable_cancelCallback,Dc=e.unstable_shouldYield,Qf=e.unstable_requestPaint,Xr=e.unstable_now,Zf=e.unstable_getCurrentPriorityLevel,Lu=e.unstable_ImmediatePriority,Ps=e.unstable_UserBlockingPriority,Hl=e.unstable_NormalPriority,jt=e.unstable_LowPriority,an=e.unstable_IdlePriority,Kn=null,nr=null;function gi(h){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(Kn,h,void 0,(h.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:Ms,qo=Math.log,ci=Math.LN2;function Ms(h){return h>>>=0,h===0?32:31-(qo(h)/ci|0)|0}var Rs=64,Oa=4194304;function Ka(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Xs(h,g){var w=h.pendingLanes;if(w===0)return 0;var T=0,$=h.suspendedLanes,H=h.pingedLanes,ie=w&268435455;if(ie!==0){var Ee=ie&~$;Ee!==0?T=Ka(Ee):(H&=ie,H!==0&&(T=Ka(H)))}else ie=w&~$,ie!==0?T=Ka(ie):H!==0&&(T=Ka(H));if(T===0)return 0;if(g!==0&&g!==T&&(g&$)===0&&($=T&-T,H=g&-g,$>=H||$===16&&(H&4194240)!==0))return g;if((T&4)!==0&&(T|=w&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=T;0<g;)w=31-Ur(g),$=1<<w,T|=h[w],g&=~$;return T}function Ic(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(h,g){for(var w=h.suspendedLanes,T=h.pingedLanes,$=h.expirationTimes,H=h.pendingLanes;0<H;){var ie=31-Ur(H),Ee=1<<ie,Oe=$[ie];Oe===-1?((Ee&w)===0||(Ee&T)!==0)&&($[ie]=Ic(Ee,g)):Oe<=g&&(h.expiredLanes|=Ee),H&=~Ee}}function Lc(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Jf(){var h=Rs;return Rs<<=1,(Rs&4194240)===0&&(Rs=64),h}function Vl(h){for(var g=[],w=0;31>w;w++)g.push(h);return g}function Wl(h,g,w){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Ur(g),h[g]=w}function Ki(h,g){var w=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<w;){var $=31-Ur(w),H=1<<$;g[$]=0,T[$]=-1,h[$]=-1,w&=~H}}function Fu(h,g){var w=h.entangledLanes|=g;for(h=h.entanglements;w;){var T=31-Ur(w),$=1<<T;$&g|h[T]&g&&(h[T]|=g),w&=~$}}var dr=0;function wn(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Fc,Ei,Ar,Bc,Ga,yo=!1,Pa=[],Mt=null,Vt=null,Sn=null,Ft=new Map,vi=new Map,as=[],Bp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eh(h,g){switch(h){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Ft.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(g.pointerId)}}function xo(h,g,w,T,$,H){return h===null||h.nativeEvent!==H?(h={blockedOn:g,domEventName:w,eventSystemFlags:T,nativeEvent:H,targetContainers:[$]},g!==null&&(g=ph(g),g!==null&&Ei(g)),h):(h.eventSystemFlags|=T,g=h.targetContainers,$!==null&&g.indexOf($)===-1&&g.push($),h)}function $c(h,g,w,T,$){switch(g){case"focusin":return Mt=xo(Mt,h,g,w,T,$),!0;case"dragenter":return Vt=xo(Vt,h,g,w,T,$),!0;case"mouseover":return Sn=xo(Sn,h,g,w,T,$),!0;case"pointerover":var H=$.pointerId;return Ft.set(H,xo(Ft.get(H)||null,h,g,w,T,$)),!0;case"gotpointercapture":return H=$.pointerId,vi.set(H,xo(vi.get(H)||null,h,g,w,T,$)),!0}return!1}function Pg(h){var g=Gu(h.target);if(g!==null){var w=Ss(g);if(w!==null){if(g=w.tag,g===13){if(g=Wa(w),g!==null){h.blockedOn=g,Ga(h.priority,function(){Ar(w)});return}}else if(g===3&&w.stateNode.current.memoizedState.isDehydrated){h.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}h.blockedOn=null}function th(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var w=Id(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(w===null){w=h.nativeEvent;var T=new w.constructor(w.type,w);Cn=T,w.target.dispatchEvent(T),Cn=null}else return g=ph(w),g!==null&&Ei(g),h.blockedOn=w,!1;g.shift()}return!0}function Dd(h,g,w){th(h)&&w.delete(g)}function $p(){yo=!1,Mt!==null&&th(Mt)&&(Mt=null),Vt!==null&&th(Vt)&&(Vt=null),Sn!==null&&th(Sn)&&(Sn=null),Ft.forEach(Dd),vi.forEach(Dd)}function ml(h,g){h.blockedOn===g&&(h.blockedOn=null,yo||(yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$p)))}function Kl(h){function g($){return ml($,h)}if(0<Pa.length){ml(Pa[0],h);for(var w=1;w<Pa.length;w++){var T=Pa[w];T.blockedOn===h&&(T.blockedOn=null)}}for(Mt!==null&&ml(Mt,h),Vt!==null&&ml(Vt,h),Sn!==null&&ml(Sn,h),Ft.forEach(g),vi.forEach(g),w=0;w<as.length;w++)T=as[w],T.blockedOn===h&&(T.blockedOn=null);for(;0<as.length&&(w=as[0],w.blockedOn===null);)Pg(w),w.blockedOn===null&&as.shift()}var gl=E.ReactCurrentBatchConfig,nh=!0;function zp(h,g,w,T){var $=dr,H=gl.transition;gl.transition=null;try{dr=1,zc(h,g,w,T)}finally{dr=$,gl.transition=H}}function qp(h,g,w,T){var $=dr,H=gl.transition;gl.transition=null;try{dr=4,zc(h,g,w,T)}finally{dr=$,gl.transition=H}}function zc(h,g,w,T){if(nh){var $=Id(h,g,w,T);if($===null)Jp(h,g,T,Gl,w),eh(h,T);else if($c($,h,g,w,T))T.stopPropagation();else if(eh(h,T),g&4&&-1<Bp.indexOf(h)){for(;$!==null;){var H=ph($);if(H!==null&&Fc(H),H=Id(h,g,w,T),H===null&&Jp(h,g,T,Gl,w),H===$)break;$=H}$!==null&&T.stopPropagation()}else Jp(h,g,T,null,w)}}var Gl=null;function Id(h,g,w,T){if(Gl=null,h=bn(T),h=Gu(h),h!==null)if(g=Ss(h),g===null)h=null;else if(w=g.tag,w===13){if(h=Wa(g),h!==null)return h;h=null}else if(w===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return Gl=h,null}function Ld(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zf()){case Lu:return 1;case Ps:return 4;case Hl:case jt:return 16;case an:return 536870912;default:return 16}default:return 16}}var Uo=null,qc=null,Fd=null;function Up(){if(Fd)return Fd;var h,g=qc,w=g.length,T,$="value"in Uo?Uo.value:Uo.textContent,H=$.length;for(h=0;h<w&&g[h]===$[h];h++);var ie=w-h;for(T=1;T<=ie&&g[w-T]===$[H-T];T++);return Fd=$.slice(h,1<T?1-T:void 0)}function Ho(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function Vo(){return!0}function Hp(){return!1}function pa(h){function g(w,T,$,H,ie){this._reactName=w,this._targetInst=$,this.type=T,this.nativeEvent=H,this.target=ie,this.currentTarget=null;for(var Ee in h)h.hasOwnProperty(Ee)&&(w=h[Ee],this[Ee]=w?w(H):H[Ee]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?Vo:Hp,this.isPropagationStopped=Hp,this}return re(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),g}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=pa(Wo),B=re({},Wo,{view:0,detail:0}),ee=pa(B),we,Ae,Ie,it=re({},B,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bu,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ie&&(Ie&&h.type==="mousemove"?(we=h.screenX-Ie.screenX,Ae=h.screenY-Ie.screenY):Ae=we=0,Ie=h),we)},movementY:function(h){return"movementY"in h?h.movementY:Ae}}),mt=pa(it),tn=re({},it,{dataTransfer:0}),dn=pa(tn),zn=re({},B,{relatedTarget:0}),qn=pa(zn),kr=re({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),_i=pa(kr),ls=re({},Wo,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),ii=pa(ls),js=re({},Wo,{data:0}),Gi=pa(js),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mg(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Ya[h])?!!g[h]:!1}function Bu(){return Mg}var Bd=re({},B,{key:function(h){if(h.key){var g=Qs[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=Ho(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Ko[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bu,charCode:function(h){return h.type==="keypress"?Ho(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ho(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),$u=pa(Bd),$d=re({},it,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=pa($d),zd=re({},B,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bu}),ma=pa(zd),qd=re({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ud=pa(qd),Vp=re({},it,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=pa(Vp),Li=[9,13,27,32],vl=l&&"CompositionEvent"in window,Yl=null;l&&"documentMode"in document&&(Yl=document.documentMode);var Rg=l&&"TextEvent"in window&&!Yl,bo=l&&(!vl||Yl&&8<Yl&&11>=Yl),qu=" ",ih=!1;function sh(h,g){switch(h){case"keyup":return Li.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Go=!1;function wo(h,g){switch(h){case"compositionend":return Uc(g);case"keypress":return g.which!==32?null:(ih=!0,qu);case"textInput":return h=g.data,h===qu&&ih?null:h;default:return null}}function No(h,g){if(Go)return h==="compositionend"||!vl&&sh(h,g)?(h=Up(),Fd=qc=Uo=null,Go=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return bo&&g.locale!=="ko"?null:g.data;default:return null}}var Uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!Uu[h.type]:g==="textarea"}function Hc(h,g,w,T){je(T),g=Bg(g,"onChange"),0<g.length&&(w=new rh("onChange","change",null,w,T),h.push({event:w,listeners:g}))}var Vc=null,Ql=null;function Yi(h){Qp(h,0)}function Hd(h){var g=ef(h);if(ae(g))return h}function Zl(h,g){if(h==="change")return g}var yl=!1;if(l){var Vd;if(l){var Wd="oninput"in document;if(!Wd){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),Wd=typeof ah.oninput=="function"}Vd=Wd}else Vd=!1;yl=Vd&&(!document.documentMode||9<document.documentMode)}function oh(){Vc&&(Vc.detachEvent("onpropertychange",Wc),Ql=Vc=null)}function Wc(h){if(h.propertyName==="value"&&Hd(Ql)){var g=[];Hc(g,Ql,h,bn(h)),Dt(Yi,g)}}function Hu(h,g,w){h==="focusin"?(oh(),Vc=g,Ql=w,Vc.attachEvent("onpropertychange",Wc)):h==="focusout"&&oh()}function Vu(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Hd(Ql)}function Kd(h,g){if(h==="click")return Hd(g)}function Wu(h,g){if(h==="input"||h==="change")return Hd(g)}function Gd(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Fi=typeof Object.is=="function"?Object.is:Gd;function Xa(h,g){if(Fi(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var w=Object.keys(h),T=Object.keys(g);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var $=w[T];if(!c.call(g,$)||!Fi(h[$],g[$]))return!1}return!0}function Tr(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Hr(h,g){var w=Tr(h);h=0;for(var T;w;){if(w.nodeType===3){if(T=h+w.textContent.length,h<=g&&T>=g)return{node:w,offset:g-h};h=T}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Tr(w)}}function Bi(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?Bi(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function cs(){for(var h=window,g=Pe();g instanceof h.HTMLIFrameElement;){try{var w=typeof g.contentWindow.location.href=="string"}catch{w=!1}if(w)h=g.contentWindow;else break;g=Pe(h.document)}return g}function xl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Kp(h){var g=cs(),w=h.focusedElem,T=h.selectionRange;if(g!==w&&w&&w.ownerDocument&&Bi(w.ownerDocument.documentElement,w)){if(T!==null&&xl(w)){if(g=T.start,h=T.end,h===void 0&&(h=g),"selectionStart"in w)w.selectionStart=g,w.selectionEnd=Math.min(h,w.value.length);else if(h=(g=w.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var $=w.textContent.length,H=Math.min(T.start,$);T=T.end===void 0?H:Math.min(T.end,$),!h.extend&&H>T&&($=T,T=H,H=$),$=Hr(w,H);var ie=Hr(w,T);$&&ie&&(h.rangeCount!==1||h.anchorNode!==$.node||h.anchorOffset!==$.offset||h.focusNode!==ie.node||h.focusOffset!==ie.offset)&&(g=g.createRange(),g.setStart($.node,$.offset),h.removeAllRanges(),H>T?(h.addRange(g),h.extend(ie.node,ie.offset)):(g.setEnd(ie.node,ie.offset),h.addRange(g)))}}for(g=[],h=w;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<g.length;w++)h=g[w],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var lh=l&&"documentMode"in document&&11>=document.documentMode,Kc=null,Dg=null,ch=null,Ig=!1;function wx(h,g,w){var T=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Ig||Kc==null||Kc!==Pe(T)||(T=Kc,"selectionStart"in T&&xl(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),ch&&Xa(ch,T)||(ch=T,T=Bg(Dg,"onSelect"),0<T.length&&(g=new rh("onSelect","select",null,g,w),h.push({event:g,listeners:T}),g.target=Kc)))}function Gp(h,g){var w={};return w[h.toLowerCase()]=g.toLowerCase(),w["Webkit"+h]="webkit"+g,w["Moz"+h]="moz"+g,w}var Yd={animationend:Gp("Animation","AnimationEnd"),animationiteration:Gp("Animation","AnimationIteration"),animationstart:Gp("Animation","AnimationStart"),transitionend:Gp("Transition","TransitionEnd")},Xd={},Nx={};l&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function Yp(h){if(Xd[h])return Xd[h];if(!Yd[h])return h;var g=Yd[h],w;for(w in g)if(g.hasOwnProperty(w)&&w in Nx)return Xd[h]=g[w];return h}var Sx=Yp("animationend"),jx=Yp("animationiteration"),Ex=Yp("animationstart"),_x=Yp("transitionend"),Cx=new Map,Ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jl(h,g){Cx.set(h,g),s(g,[h])}for(var uh=0;uh<Ax.length;uh++){var Ma=Ax[uh],Yo=Ma.toLowerCase(),Lg=Ma[0].toUpperCase()+Ma.slice(1);Jl(Yo,"on"+Lg)}Jl(Sx,"onAnimationEnd"),Jl(jx,"onAnimationIteration"),Jl(Ex,"onAnimationStart"),Jl("dblclick","onDoubleClick"),Jl("focusin","onFocus"),Jl("focusout","onBlur"),Jl(_x,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ku));function Xp(h,g,w){var T=h.type||"unknown-event";h.currentTarget=w,$o(T,g,void 0,h),h.currentTarget=null}function Qp(h,g){g=(g&4)!==0;for(var w=0;w<h.length;w++){var T=h[w],$=T.event;T=T.listeners;e:{var H=void 0;if(g)for(var ie=T.length-1;0<=ie;ie--){var Ee=T[ie],Oe=Ee.instance,Ge=Ee.currentTarget;if(Ee=Ee.listener,Oe!==H&&$.isPropagationStopped())break e;Xp($,Ee,Ge),H=Oe}else for(ie=0;ie<T.length;ie++){if(Ee=T[ie],Oe=Ee.instance,Ge=Ee.currentTarget,Ee=Ee.listener,Oe!==H&&$.isPropagationStopped())break e;Xp($,Ee,Ge),H=Oe}}}if(Nr)throw h=Ii,Nr=!1,Ii=null,h}function Qr(h,g){var w=g[Za];w===void 0&&(w=g[Za]=new Set);var T=h+"__bubble";w.has(T)||(Zp(g,h,2,!1),w.add(T))}function Fg(h,g,w){var T=0;g&&(T|=4),Zp(w,h,T,g)}var dh="_reactListening"+Math.random().toString(36).slice(2);function Qd(h){if(!h[dh]){h[dh]=!0,r.forEach(function(w){w!=="selectionchange"&&(Y1.has(w)||Fg(w,!1,h),Fg(w,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[dh]||(g[dh]=!0,Fg("selectionchange",!1,g))}}function Zp(h,g,w,T){switch(Ld(g)){case 1:var $=zp;break;case 4:$=qp;break;default:$=zc}w=$.bind(null,g,w,h),$=void 0,!At||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||($=!0),T?$!==void 0?h.addEventListener(g,w,{capture:!0,passive:$}):h.addEventListener(g,w,!0):$!==void 0?h.addEventListener(g,w,{passive:$}):h.addEventListener(g,w,!1)}function Jp(h,g,w,T,$){var H=T;if((g&1)===0&&(g&2)===0&&T!==null)e:for(;;){if(T===null)return;var ie=T.tag;if(ie===3||ie===4){var Ee=T.stateNode.containerInfo;if(Ee===$||Ee.nodeType===8&&Ee.parentNode===$)break;if(ie===4)for(ie=T.return;ie!==null;){var Oe=ie.tag;if((Oe===3||Oe===4)&&(Oe=ie.stateNode.containerInfo,Oe===$||Oe.nodeType===8&&Oe.parentNode===$))return;ie=ie.return}for(;Ee!==null;){if(ie=Gu(Ee),ie===null)return;if(Oe=ie.tag,Oe===5||Oe===6){T=H=ie;continue e}Ee=Ee.parentNode}}T=T.return}Dt(function(){var Ge=H,yt=bn(w),Nt=[];e:{var vt=Cx.get(h);if(vt!==void 0){var Kt=rh,rn=h;switch(h){case"keypress":if(Ho(w)===0)break e;case"keydown":case"keyup":Kt=$u;break;case"focusin":rn="focus",Kt=qn;break;case"focusout":rn="blur",Kt=qn;break;case"beforeblur":case"afterblur":Kt=qn;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Kt=mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Kt=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Kt=ma;break;case Sx:case jx:case Ex:Kt=_i;break;case _x:Kt=Ud;break;case"scroll":Kt=ee;break;case"wheel":Kt=Wp;break;case"copy":case"cut":case"paste":Kt=ii;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Kt=zu}var ln=(g&4)!==0,Cs=!ln&&h==="scroll",$e=ln?vt!==null?vt+"Capture":null:vt;ln=[];for(var De=Ge,Ue;De!==null;){Ue=De;var kt=Ue.stateNode;if(Ue.tag===5&&kt!==null&&(Ue=kt,$e!==null&&(kt=wt(De,$e),kt!=null&&ln.push(em(De,kt,Ue)))),Cs)break;De=De.return}0<ln.length&&(vt=new Kt(vt,rn,null,w,yt),Nt.push({event:vt,listeners:ln}))}}if((g&7)===0){e:{if(vt=h==="mouseover"||h==="pointerover",Kt=h==="mouseout"||h==="pointerout",vt&&w!==Cn&&(rn=w.relatedTarget||w.fromElement)&&(Gu(rn)||rn[ga]))break e;if((Kt||vt)&&(vt=yt.window===yt?yt:(vt=yt.ownerDocument)?vt.defaultView||vt.parentWindow:window,Kt?(rn=w.relatedTarget||w.toElement,Kt=Ge,rn=rn?Gu(rn):null,rn!==null&&(Cs=Ss(rn),rn!==Cs||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Kt=null,rn=Ge),Kt!==rn)){if(ln=mt,kt="onMouseLeave",$e="onMouseEnter",De="mouse",(h==="pointerout"||h==="pointerover")&&(ln=zu,kt="onPointerLeave",$e="onPointerEnter",De="pointer"),Cs=Kt==null?vt:ef(Kt),Ue=rn==null?vt:ef(rn),vt=new ln(kt,De+"leave",Kt,w,yt),vt.target=Cs,vt.relatedTarget=Ue,kt=null,Gu(yt)===Ge&&(ln=new ln($e,De+"enter",rn,w,yt),ln.target=Ue,ln.relatedTarget=Cs,kt=ln),Cs=kt,Kt&&rn)t:{for(ln=Kt,$e=rn,De=0,Ue=ln;Ue;Ue=Zd(Ue))De++;for(Ue=0,kt=$e;kt;kt=Zd(kt))Ue++;for(;0<De-Ue;)ln=Zd(ln),De--;for(;0<Ue-De;)$e=Zd($e),Ue--;for(;De--;){if(ln===$e||$e!==null&&ln===$e.alternate)break t;ln=Zd(ln),$e=Zd($e)}ln=null}else ln=null;Kt!==null&&X1(Nt,vt,Kt,ln,!1),rn!==null&&Cs!==null&&X1(Nt,Cs,rn,ln,!0)}}e:{if(vt=Ge?ef(Ge):window,Kt=vt.nodeName&&vt.nodeName.toLowerCase(),Kt==="select"||Kt==="input"&&vt.type==="file")var hn=Zl;else if(Xl(vt))if(yl)hn=Wu;else{hn=Vu;var An=Hu}else(Kt=vt.nodeName)&&Kt.toLowerCase()==="input"&&(vt.type==="checkbox"||vt.type==="radio")&&(hn=Kd);if(hn&&(hn=hn(h,Ge))){Hc(Nt,hn,w,yt);break e}An&&An(h,vt,Ge),h==="focusout"&&(An=vt._wrapperState)&&An.controlled&&vt.type==="number"&&Ve(vt,"number",vt.value)}switch(An=Ge?ef(Ge):window,h){case"focusin":(Xl(An)||An.contentEditable==="true")&&(Kc=An,Dg=Ge,ch=null);break;case"focusout":ch=Dg=Kc=null;break;case"mousedown":Ig=!0;break;case"contextmenu":case"mouseup":case"dragend":Ig=!1,wx(Nt,w,yt);break;case"selectionchange":if(lh)break;case"keydown":case"keyup":wx(Nt,w,yt)}var kn;if(vl)e:{switch(h){case"compositionstart":var Hn="onCompositionStart";break e;case"compositionend":Hn="onCompositionEnd";break e;case"compositionupdate":Hn="onCompositionUpdate";break e}Hn=void 0}else Go?sh(h,w)&&(Hn="onCompositionEnd"):h==="keydown"&&w.keyCode===229&&(Hn="onCompositionStart");Hn&&(bo&&w.locale!=="ko"&&(Go||Hn!=="onCompositionStart"?Hn==="onCompositionEnd"&&Go&&(kn=Up()):(Uo=yt,qc="value"in Uo?Uo.value:Uo.textContent,Go=!0)),An=Bg(Ge,Hn),0<An.length&&(Hn=new Gi(Hn,h,null,w,yt),Nt.push({event:Hn,listeners:An}),kn?Hn.data=kn:(kn=Uc(w),kn!==null&&(Hn.data=kn)))),(kn=Rg?wo(h,w):No(h,w))&&(Ge=Bg(Ge,"onBeforeInput"),0<Ge.length&&(yt=new Gi("onBeforeInput","beforeinput",null,w,yt),Nt.push({event:yt,listeners:Ge}),yt.data=kn))}Qp(Nt,g)})}function em(h,g,w){return{instance:h,listener:g,currentTarget:w}}function Bg(h,g){for(var w=g+"Capture",T=[];h!==null;){var $=h,H=$.stateNode;$.tag===5&&H!==null&&($=H,H=wt(h,w),H!=null&&T.unshift(em(h,H,$)),H=wt(h,g),H!=null&&T.push(em(h,H,$))),h=h.return}return T}function Zd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function X1(h,g,w,T,$){for(var H=g._reactName,ie=[];w!==null&&w!==T;){var Ee=w,Oe=Ee.alternate,Ge=Ee.stateNode;if(Oe!==null&&Oe===T)break;Ee.tag===5&&Ge!==null&&(Ee=Ge,$?(Oe=wt(w,H),Oe!=null&&ie.unshift(em(w,Oe,Ee))):$||(Oe=wt(w,H),Oe!=null&&ie.push(em(w,Oe,Ee)))),w=w.return}ie.length!==0&&h.push({event:g,listeners:ie})}var L_=/\r\n?/g,F_=/\u0000|\uFFFD/g;function Q1(h){return(typeof h=="string"?h:""+h).replace(L_,`
`).replace(F_,"")}function $g(h,g,w){if(g=Q1(g),Q1(h)!==g&&w)throw Error(n(425))}function fh(){}var tm=null,Jd=null;function kx(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Tx=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,J1=typeof Promise=="function"?Promise:void 0,B_=typeof queueMicrotask=="function"?queueMicrotask:typeof J1<"u"?function(h){return J1.resolve(null).then(h).catch($_)}:Tx;function $_(h){setTimeout(function(){throw h})}function Ox(h,g){var w=g,T=0;do{var $=w.nextSibling;if(h.removeChild(w),$&&$.nodeType===8)if(w=$.data,w==="/$"){if(T===0){h.removeChild($),Kl(g);return}T--}else w!=="$"&&w!=="$?"&&w!=="$!"||T++;w=$}while(w);Kl(g)}function Ra(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function Xo(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var w=h.data;if(w==="$"||w==="$!"||w==="$?"){if(g===0)return h;g--}else w==="/$"&&g++}h=h.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),ec="__reactFiber$"+Qa,hh="__reactProps$"+Qa,ga="__reactContainer$"+Qa,Za="__reactEvents$"+Qa,z_="__reactListeners$"+Qa,q_="__reactHandles$"+Qa;function Gu(h){var g=h[ec];if(g)return g;for(var w=h.parentNode;w;){if(g=w[ga]||w[ec]){if(w=g.alternate,g.child!==null||w!==null&&w.child!==null)for(h=Xo(h);h!==null;){if(w=h[ec])return w;h=Xo(h)}return g}h=w,w=h.parentNode}return null}function ph(h){return h=h[ec]||h[ga],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function ef(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(n(33))}function nm(h){return h[hh]||null}var Px=[],Gc=-1;function bl(h){return{current:h}}function $r(h){0>Gc||(h.current=Px[Gc],Px[Gc]=null,Gc--)}function Vr(h,g){Gc++,Px[Gc]=h.current,h.current=g}var Yu={},Zs=bl(Yu),Ja=bl(!1),tf=Yu;function mh(h,g){var w=h.type.contextTypes;if(!w)return Yu;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===g)return T.__reactInternalMemoizedMaskedChildContext;var $={},H;for(H in w)$[H]=g[H];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=$),$}function eo(h){return h=h.childContextTypes,h!=null}function zg(){$r(Ja),$r(Zs)}function ew(h,g,w){if(Zs.current!==Yu)throw Error(n(168));Vr(Zs,g),Vr(Ja,w)}function Mx(h,g,w){var T=h.stateNode;if(g=g.childContextTypes,typeof T.getChildContext!="function")return w;T=T.getChildContext();for(var $ in T)if(!($ in g))throw Error(n(108,me(h)||"Unknown",$));return re({},w,T)}function nf(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Yu,tf=Zs.current,Vr(Zs,h),Vr(Ja,Ja.current),!0}function tw(h,g,w){var T=h.stateNode;if(!T)throw Error(n(169));w?(h=Mx(h,g,tf),T.__reactInternalMemoizedMergedChildContext=h,$r(Ja),$r(Zs),Vr(Zs,h)):$r(Ja),Vr(Ja,w)}var Yc=null,rm=!1,_=!1;function M(h){Yc===null?Yc=[h]:Yc.push(h)}function U(h){rm=!0,M(h)}function K(){if(!_&&Yc!==null){_=!0;var h=0,g=dr;try{var w=Yc;for(dr=1;h<w.length;h++){var T=w[h];do T=T(!0);while(T!==null)}Yc=null,rm=!1}catch($){throw Yc!==null&&(Yc=Yc.slice(h+1)),Rc(Lu,K),$}finally{dr=g,_=!1}}return null}var Z=[],oe=0,ce=null,ue=0,fe=[],ye=0,Te=null,Be=1,be="";function Me(h,g){Z[oe++]=ue,Z[oe++]=ce,ce=h,ue=g}function Fe(h,g,w){fe[ye++]=Be,fe[ye++]=be,fe[ye++]=Te,Te=h;var T=Be;h=be;var $=32-Ur(T)-1;T&=~(1<<$),w+=1;var H=32-Ur(g)+$;if(30<H){var ie=$-$%5;H=(T&(1<<ie)-1).toString(32),T>>=ie,$-=ie,Be=1<<32-Ur(g)+$|w<<$|T,be=H+h}else Be=1<<H|w<<$|T,be=h}function rt(h){h.return!==null&&(Me(h,1),Fe(h,1,0))}function ze(h){for(;h===ce;)ce=Z[--oe],Z[oe]=null,ue=Z[--oe],Z[oe]=null;for(;h===Te;)Te=fe[--ye],fe[ye]=null,be=fe[--ye],fe[ye]=null,Be=fe[--ye],fe[ye]=null}var Je=null,tt=null,ot=!1,ut=null;function fn(h,g){var w=sc(5,null,null,0);w.elementType="DELETED",w.stateNode=g,w.return=h,g=h.deletions,g===null?(h.deletions=[w],h.flags|=16):g.push(w)}function Xt(h,g){switch(h.tag){case 5:var w=h.type;return g=g.nodeType!==1||w.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,Je=h,tt=Ra(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,Je=h,tt=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(w=Te!==null?{id:Be,overflow:be}:null,h.memoizedState={dehydrated:g,treeContext:w,retryLane:1073741824},w=sc(18,null,null,0),w.stateNode=g,w.return=h,h.child=w,Je=h,tt=null,!0):!1;default:return!1}}function Gn(h){return(h.mode&1)!==0&&(h.flags&128)===0}function nn(h){if(ot){var g=tt;if(g){var w=g;if(!Xt(h,g)){if(Gn(h))throw Error(n(418));g=Ra(w.nextSibling);var T=Je;g&&Xt(h,g)?fn(T,w):(h.flags=h.flags&-4097|2,ot=!1,Je=h)}}else{if(Gn(h))throw Error(n(418));h.flags=h.flags&-4097|2,ot=!1,Je=h}}}function fr(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Je=h}function $i(h){if(h!==Je)return!1;if(!ot)return fr(h),ot=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!kx(h.type,h.memoizedProps)),g&&(g=tt)){if(Gn(h))throw Xn(),Error(n(418));for(;g;)fn(h,g),g=Ra(g.nextSibling)}if(fr(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var w=h.data;if(w==="/$"){if(g===0){tt=Ra(h.nextSibling);break e}g--}else w!=="$"&&w!=="$!"&&w!=="$?"||g++}h=h.nextSibling}tt=null}}else tt=Je?Ra(h.stateNode.nextSibling):null;return!0}function Xn(){for(var h=tt;h;)h=Ra(h.nextSibling)}function Qt(){tt=Je=null,ot=!1}function It(h){ut===null?ut=[h]:ut.push(h)}var Xi=E.ReactCurrentBatchConfig;function In(h,g,w){if(h=w.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var T=w.stateNode}if(!T)throw Error(n(147,h));var $=T,H=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===H?g.ref:(g=function(ie){var Ee=$.refs;ie===null?delete Ee[H]:Ee[H]=ie},g._stringRef=H,g)}if(typeof h!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,h))}return h}function cr(h,g){throw h=Object.prototype.toString.call(g),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function si(h){var g=h._init;return g(h._payload)}function Ds(h){function g($e,De){if(h){var Ue=$e.deletions;Ue===null?($e.deletions=[De],$e.flags|=16):Ue.push(De)}}function w($e,De){if(!h)return null;for(;De!==null;)g($e,De),De=De.sibling;return null}function T($e,De){for($e=new Map;De!==null;)De.key!==null?$e.set(De.key,De):$e.set(De.index,De),De=De.sibling;return $e}function $($e,De){return $e=Eh($e,De),$e.index=0,$e.sibling=null,$e}function H($e,De,Ue){return $e.index=Ue,h?(Ue=$e.alternate,Ue!==null?(Ue=Ue.index,Ue<De?($e.flags|=2,De):Ue):($e.flags|=2,De)):($e.flags|=1048576,De)}function ie($e){return h&&$e.alternate===null&&($e.flags|=2),$e}function Ee($e,De,Ue,kt){return De===null||De.tag!==6?(De=vC(Ue,$e.mode,kt),De.return=$e,De):(De=$(De,Ue),De.return=$e,De)}function Oe($e,De,Ue,kt){var hn=Ue.type;return hn===O?yt($e,De,Ue.props.children,kt,Ue.key):De!==null&&(De.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===X&&si(hn)===De.type)?(kt=$(De,Ue.props),kt.ref=In($e,De,Ue),kt.return=$e,kt):(kt=ww(Ue.type,Ue.key,Ue.props,null,$e.mode,kt),kt.ref=In($e,De,Ue),kt.return=$e,kt)}function Ge($e,De,Ue,kt){return De===null||De.tag!==4||De.stateNode.containerInfo!==Ue.containerInfo||De.stateNode.implementation!==Ue.implementation?(De=yC(Ue,$e.mode,kt),De.return=$e,De):(De=$(De,Ue.children||[]),De.return=$e,De)}function yt($e,De,Ue,kt,hn){return De===null||De.tag!==7?(De=dm(Ue,$e.mode,kt,hn),De.return=$e,De):(De=$(De,Ue),De.return=$e,De)}function Nt($e,De,Ue){if(typeof De=="string"&&De!==""||typeof De=="number")return De=vC(""+De,$e.mode,Ue),De.return=$e,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case A:return Ue=ww(De.type,De.key,De.props,null,$e.mode,Ue),Ue.ref=In($e,null,De),Ue.return=$e,Ue;case P:return De=yC(De,$e.mode,Ue),De.return=$e,De;case X:var kt=De._init;return Nt($e,kt(De._payload),Ue)}if(ge(De)||Y(De))return De=dm(De,$e.mode,Ue,null),De.return=$e,De;cr($e,De)}return null}function vt($e,De,Ue,kt){var hn=De!==null?De.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return hn!==null?null:Ee($e,De,""+Ue,kt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case A:return Ue.key===hn?Oe($e,De,Ue,kt):null;case P:return Ue.key===hn?Ge($e,De,Ue,kt):null;case X:return hn=Ue._init,vt($e,De,hn(Ue._payload),kt)}if(ge(Ue)||Y(Ue))return hn!==null?null:yt($e,De,Ue,kt,null);cr($e,Ue)}return null}function Kt($e,De,Ue,kt,hn){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return $e=$e.get(Ue)||null,Ee(De,$e,""+kt,hn);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case A:return $e=$e.get(kt.key===null?Ue:kt.key)||null,Oe(De,$e,kt,hn);case P:return $e=$e.get(kt.key===null?Ue:kt.key)||null,Ge(De,$e,kt,hn);case X:var An=kt._init;return Kt($e,De,Ue,An(kt._payload),hn)}if(ge(kt)||Y(kt))return $e=$e.get(Ue)||null,yt(De,$e,kt,hn,null);cr(De,kt)}return null}function rn($e,De,Ue,kt){for(var hn=null,An=null,kn=De,Hn=De=0,wa=null;kn!==null&&Hn<Ue.length;Hn++){kn.index>Hn?(wa=kn,kn=null):wa=kn.sibling;var Lr=vt($e,kn,Ue[Hn],kt);if(Lr===null){kn===null&&(kn=wa);break}h&&kn&&Lr.alternate===null&&g($e,kn),De=H(Lr,De,Hn),An===null?hn=Lr:An.sibling=Lr,An=Lr,kn=wa}if(Hn===Ue.length)return w($e,kn),ot&&Me($e,Hn),hn;if(kn===null){for(;Hn<Ue.length;Hn++)kn=Nt($e,Ue[Hn],kt),kn!==null&&(De=H(kn,De,Hn),An===null?hn=kn:An.sibling=kn,An=kn);return ot&&Me($e,Hn),hn}for(kn=T($e,kn);Hn<Ue.length;Hn++)wa=Kt(kn,$e,Hn,Ue[Hn],kt),wa!==null&&(h&&wa.alternate!==null&&kn.delete(wa.key===null?Hn:wa.key),De=H(wa,De,Hn),An===null?hn=wa:An.sibling=wa,An=wa);return h&&kn.forEach(function(_h){return g($e,_h)}),ot&&Me($e,Hn),hn}function ln($e,De,Ue,kt){var hn=Y(Ue);if(typeof hn!="function")throw Error(n(150));if(Ue=hn.call(Ue),Ue==null)throw Error(n(151));for(var An=hn=null,kn=De,Hn=De=0,wa=null,Lr=Ue.next();kn!==null&&!Lr.done;Hn++,Lr=Ue.next()){kn.index>Hn?(wa=kn,kn=null):wa=kn.sibling;var _h=vt($e,kn,Lr.value,kt);if(_h===null){kn===null&&(kn=wa);break}h&&kn&&_h.alternate===null&&g($e,kn),De=H(_h,De,Hn),An===null?hn=_h:An.sibling=_h,An=_h,kn=wa}if(Lr.done)return w($e,kn),ot&&Me($e,Hn),hn;if(kn===null){for(;!Lr.done;Hn++,Lr=Ue.next())Lr=Nt($e,Lr.value,kt),Lr!==null&&(De=H(Lr,De,Hn),An===null?hn=Lr:An.sibling=Lr,An=Lr);return ot&&Me($e,Hn),hn}for(kn=T($e,kn);!Lr.done;Hn++,Lr=Ue.next())Lr=Kt(kn,$e,Hn,Lr.value,kt),Lr!==null&&(h&&Lr.alternate!==null&&kn.delete(Lr.key===null?Hn:Lr.key),De=H(Lr,De,Hn),An===null?hn=Lr:An.sibling=Lr,An=Lr);return h&&kn.forEach(function(cue){return g($e,cue)}),ot&&Me($e,Hn),hn}function Cs($e,De,Ue,kt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===O&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case A:e:{for(var hn=Ue.key,An=De;An!==null;){if(An.key===hn){if(hn=Ue.type,hn===O){if(An.tag===7){w($e,An.sibling),De=$(An,Ue.props.children),De.return=$e,$e=De;break e}}else if(An.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===X&&si(hn)===An.type){w($e,An.sibling),De=$(An,Ue.props),De.ref=In($e,An,Ue),De.return=$e,$e=De;break e}w($e,An);break}else g($e,An);An=An.sibling}Ue.type===O?(De=dm(Ue.props.children,$e.mode,kt,Ue.key),De.return=$e,$e=De):(kt=ww(Ue.type,Ue.key,Ue.props,null,$e.mode,kt),kt.ref=In($e,De,Ue),kt.return=$e,$e=kt)}return ie($e);case P:e:{for(An=Ue.key;De!==null;){if(De.key===An)if(De.tag===4&&De.stateNode.containerInfo===Ue.containerInfo&&De.stateNode.implementation===Ue.implementation){w($e,De.sibling),De=$(De,Ue.children||[]),De.return=$e,$e=De;break e}else{w($e,De);break}else g($e,De);De=De.sibling}De=yC(Ue,$e.mode,kt),De.return=$e,$e=De}return ie($e);case X:return An=Ue._init,Cs($e,De,An(Ue._payload),kt)}if(ge(Ue))return rn($e,De,Ue,kt);if(Y(Ue))return ln($e,De,Ue,kt);cr($e,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,De!==null&&De.tag===6?(w($e,De.sibling),De=$(De,Ue),De.return=$e,$e=De):(w($e,De),De=vC(Ue,$e.mode,kt),De.return=$e,$e=De),ie($e)):w($e,De)}return Cs}var us=Ds(!0),Ci=Ds(!1),Es=bl(null),Is=null,yi=null,yr=null;function Or(){yr=yi=Is=null}function xi(h){var g=Es.current;$r(Es),h._currentValue=g}function Pr(h,g,w){for(;h!==null;){var T=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),h===w)break;h=h.return}}function zi(h,g){Is=h,yr=yi=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(Zo=!0),h.firstContext=null)}function qi(h){var g=h._currentValue;if(yr!==h)if(h={context:h,memoizedValue:g,next:null},yi===null){if(Is===null)throw Error(n(308));yi=h,Is.dependencies={lanes:0,firstContext:h}}else yi=yi.next=h;return g}var Zr=null;function va(h){Zr===null?Zr=[h]:Zr.push(h)}function Wr(h,g,w,T){var $=g.interleaved;return $===null?(w.next=w,va(g)):(w.next=$.next,$.next=w),g.interleaved=w,Jr(h,T)}function Jr(h,g){h.lanes|=g;var w=h.alternate;for(w!==null&&(w.lanes|=g),w=h,h=h.return;h!==null;)h.childLanes|=g,w=h.alternate,w!==null&&(w.childLanes|=g),w=h,h=h.return;return w.tag===3?w.stateNode:null}var ds=!1;function Js(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function to(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Qi(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Zi(h,g,w){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,(Mr&2)!==0){var $=T.pending;return $===null?g.next=g:(g.next=$.next,$.next=g),T.pending=g,Jr(h,w)}return $=T.interleaved,$===null?(g.next=g,va(T)):(g.next=$.next,$.next=g),T.interleaved=g,Jr(h,w)}function ya(h,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194240)!==0)){var T=g.lanes;T&=h.pendingLanes,w|=T,g.lanes=w,Fu(h,w)}}function ei(h,g){var w=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,w===T)){var $=null,H=null;if(w=w.firstBaseUpdate,w!==null){do{var ie={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};H===null?$=H=ie:H=H.next=ie,w=w.next}while(w!==null);H===null?$=H=g:H=H.next=g}else $=H=g;w={baseState:T.baseState,firstBaseUpdate:$,lastBaseUpdate:H,shared:T.shared,effects:T.effects},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=g:h.next=g,w.lastBaseUpdate=g}function xa(h,g,w,T){var $=h.updateQueue;ds=!1;var H=$.firstBaseUpdate,ie=$.lastBaseUpdate,Ee=$.shared.pending;if(Ee!==null){$.shared.pending=null;var Oe=Ee,Ge=Oe.next;Oe.next=null,ie===null?H=Ge:ie.next=Ge,ie=Oe;var yt=h.alternate;yt!==null&&(yt=yt.updateQueue,Ee=yt.lastBaseUpdate,Ee!==ie&&(Ee===null?yt.firstBaseUpdate=Ge:Ee.next=Ge,yt.lastBaseUpdate=Oe))}if(H!==null){var Nt=$.baseState;ie=0,yt=Ge=Oe=null,Ee=H;do{var vt=Ee.lane,Kt=Ee.eventTime;if((T&vt)===vt){yt!==null&&(yt=yt.next={eventTime:Kt,lane:0,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null});e:{var rn=h,ln=Ee;switch(vt=g,Kt=w,ln.tag){case 1:if(rn=ln.payload,typeof rn=="function"){Nt=rn.call(Kt,Nt,vt);break e}Nt=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=ln.payload,vt=typeof rn=="function"?rn.call(Kt,Nt,vt):rn,vt==null)break e;Nt=re({},Nt,vt);break e;case 2:ds=!0}}Ee.callback!==null&&Ee.lane!==0&&(h.flags|=64,vt=$.effects,vt===null?$.effects=[Ee]:vt.push(Ee))}else Kt={eventTime:Kt,lane:vt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},yt===null?(Ge=yt=Kt,Oe=Nt):yt=yt.next=Kt,ie|=vt;if(Ee=Ee.next,Ee===null){if(Ee=$.shared.pending,Ee===null)break;vt=Ee,Ee=vt.next,vt.next=null,$.lastBaseUpdate=vt,$.shared.pending=null}}while(!0);if(yt===null&&(Oe=Nt),$.baseState=Oe,$.firstBaseUpdate=Ge,$.lastBaseUpdate=yt,g=$.shared.interleaved,g!==null){$=g;do ie|=$.lane,$=$.next;while($!==g)}else H===null&&($.shared.lanes=0);om|=ie,h.lanes=ie,h.memoizedState=Nt}}function Qo(h,g,w){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var T=h[g],$=T.callback;if($!==null){if(T.callback=null,T=w,typeof $!="function")throw Error(n(191,$));$.call(T)}}}var wl={},Ls=bl(wl),Ji=bl(wl),Xu=bl(wl);function Xc(h){if(h===wl)throw Error(n(174));return h}function gh(h,g){switch(Vr(Xu,g),Vr(Ji,h),Vr(Ls,wl),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:_t(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=_t(g,h)}$r(Ls),Vr(Ls,g)}function tc(){$r(Ls),$r(Ji),$r(Xu)}function nw(h){Xc(Xu.current);var g=Xc(Ls.current),w=_t(g,h.type);g!==w&&(Vr(Ji,h),Vr(Ls,w))}function Rx(h){Ji.current===h&&($r(Ls),$r(Ji))}var ui=bl(0);function Nl(h){for(var g=h;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dx=[];function Ix(){for(var h=0;h<Dx.length;h++)Dx[h]._workInProgressVersionPrimary=null;Dx.length=0}var qg=E.ReactCurrentDispatcher,Ug=E.ReactCurrentBatchConfig,nc=0,bi=null,fs=null,es=null,vh=!1,Qc=!1,yh=0,U_=0;function _s(){throw Error(n(321))}function Hg(h,g){if(g===null)return!1;for(var w=0;w<g.length&&w<h.length;w++)if(!Fi(h[w],g[w]))return!1;return!0}function im(h,g,w,T,$,H){if(nc=H,bi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,qg.current=h===null||h.memoizedState===null?Dce:Ice,h=w(T,$),Qc){H=0;do{if(Qc=!1,yh=0,25<=H)throw Error(n(301));H+=1,es=fs=null,g.updateQueue=null,qg.current=Lce,h=w(T,$)}while(Qc)}if(qg.current=ow,g=fs!==null&&fs.next!==null,nc=0,es=fs=bi=null,vh=!1,g)throw Error(n(300));return h}function rc(){var h=yh!==0;return yh=0,h}function Sl(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?bi.memoizedState=es=h:es=es.next=h,es}function So(){if(fs===null){var h=bi.alternate;h=h!==null?h.memoizedState:null}else h=fs.next;var g=es===null?bi.memoizedState:es.next;if(g!==null)es=g,fs=h;else{if(h===null)throw Error(n(310));fs=h,h={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},es===null?bi.memoizedState=es=h:es=es.next=h}return es}function sm(h,g){return typeof g=="function"?g(h):g}function Vg(h){var g=So(),w=g.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=h;var T=fs,$=T.baseQueue,H=w.pending;if(H!==null){if($!==null){var ie=$.next;$.next=H.next,H.next=ie}T.baseQueue=$=H,w.pending=null}if($!==null){H=$.next,T=T.baseState;var Ee=ie=null,Oe=null,Ge=H;do{var yt=Ge.lane;if((nc&yt)===yt)Oe!==null&&(Oe=Oe.next={lane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),T=Ge.hasEagerState?Ge.eagerState:h(T,Ge.action);else{var Nt={lane:yt,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null};Oe===null?(Ee=Oe=Nt,ie=T):Oe=Oe.next=Nt,bi.lanes|=yt,om|=yt}Ge=Ge.next}while(Ge!==null&&Ge!==H);Oe===null?ie=T:Oe.next=Ee,Fi(T,g.memoizedState)||(Zo=!0),g.memoizedState=T,g.baseState=ie,g.baseQueue=Oe,w.lastRenderedState=T}if(h=w.interleaved,h!==null){$=h;do H=$.lane,bi.lanes|=H,om|=H,$=$.next;while($!==h)}else $===null&&(w.lanes=0);return[g.memoizedState,w.dispatch]}function Qu(h){var g=So(),w=g.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=h;var T=w.dispatch,$=w.pending,H=g.memoizedState;if($!==null){w.pending=null;var ie=$=$.next;do H=h(H,ie.action),ie=ie.next;while(ie!==$);Fi(H,g.memoizedState)||(Zo=!0),g.memoizedState=H,g.baseQueue===null&&(g.baseState=H),w.lastRenderedState=H}return[H,T]}function rw(){}function Lx(h,g){var w=bi,T=So(),$=g(),H=!Fi(T.memoizedState,$);if(H&&(T.memoizedState=$,Zo=!0),T=T.queue,Gg(sw.bind(null,w,T,h),[h]),T.getSnapshot!==g||H||es!==null&&es.memoizedState.tag&1){if(w.flags|=2048,jo(9,Fx.bind(null,w,T,$,g),void 0,null),ba===null)throw Error(n(349));(nc&30)!==0||iw(w,g,$)}return $}function iw(h,g,w){h.flags|=16384,h={getSnapshot:g,value:w},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.stores=[h]):(w=g.stores,w===null?g.stores=[h]:w.push(h))}function Fx(h,g,w,T){g.value=w,g.getSnapshot=T,xh(g)&&Wg(h)}function sw(h,g,w){return w(function(){xh(g)&&Wg(h)})}function xh(h){var g=h.getSnapshot;h=h.value;try{var w=g();return!Fi(h,w)}catch{return!0}}function Wg(h){var g=Jr(h,1);g!==null&&nu(g,h,1,-1)}function am(h){var g=Sl();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:h},g.queue=h,h=h.dispatch=Rce.bind(null,bi,h),[g.memoizedState,h]}function jo(h,g,w,T){return h={tag:h,create:g,destroy:w,deps:T,next:null},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.lastEffect=h.next=h):(w=g.lastEffect,w===null?g.lastEffect=h.next=h:(T=w.next,w.next=h,h.next=T,g.lastEffect=h)),h}function Zc(){return So().memoizedState}function jl(h,g,w,T){var $=Sl();bi.flags|=h,$.memoizedState=jo(1|g,w,void 0,T===void 0?null:T)}function rf(h,g,w,T){var $=So();T=T===void 0?null:T;var H=void 0;if(fs!==null){var ie=fs.memoizedState;if(H=ie.destroy,T!==null&&Hg(T,ie.deps)){$.memoizedState=jo(g,w,H,T);return}}bi.flags|=h,$.memoizedState=jo(1|g,w,H,T)}function Kg(h,g){return jl(8390656,8,h,g)}function Gg(h,g){return rf(2048,8,h,g)}function aw(h,g){return rf(4,2,h,g)}function Yg(h,g){return rf(4,4,h,g)}function Xg(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function q3(h,g,w){return w=w!=null?w.concat([h]):null,rf(4,4,Xg.bind(null,g,h),w)}function H_(){}function U3(h,g){var w=So();g=g===void 0?null:g;var T=w.memoizedState;return T!==null&&g!==null&&Hg(g,T[1])?T[0]:(w.memoizedState=[h,g],h)}function H3(h,g){var w=So();g=g===void 0?null:g;var T=w.memoizedState;return T!==null&&g!==null&&Hg(g,T[1])?T[0]:(h=h(),w.memoizedState=[h,g],h)}function V3(h,g,w){return(nc&21)===0?(h.baseState&&(h.baseState=!1,Zo=!0),h.memoizedState=w):(Fi(w,g)||(w=Jf(),bi.lanes|=w,om|=w,h.baseState=!0),g)}function Pce(h,g){var w=dr;dr=w!==0&&4>w?w:4,h(!0);var T=Ug.transition;Ug.transition={};try{h(!1),g()}finally{dr=w,Ug.transition=T}}function W3(){return So().memoizedState}function Mce(h,g,w){var T=Sh(h);if(w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},K3(h))G3(g,w);else if(w=Wr(h,g,w,T),w!==null){var $=_o();nu(w,h,T,$),Y3(w,g,T)}}function Rce(h,g,w){var T=Sh(h),$={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(K3(h))G3(g,$);else{var H=h.alternate;if(h.lanes===0&&(H===null||H.lanes===0)&&(H=g.lastRenderedReducer,H!==null))try{var ie=g.lastRenderedState,Ee=H(ie,w);if($.hasEagerState=!0,$.eagerState=Ee,Fi(Ee,ie)){var Oe=g.interleaved;Oe===null?($.next=$,va(g)):($.next=Oe.next,Oe.next=$),g.interleaved=$;return}}catch{}finally{}w=Wr(h,g,$,T),w!==null&&($=_o(),nu(w,h,T,$),Y3(w,g,T))}}function K3(h){var g=h.alternate;return h===bi||g!==null&&g===bi}function G3(h,g){Qc=vh=!0;var w=h.pending;w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g}function Y3(h,g,w){if((w&4194240)!==0){var T=g.lanes;T&=h.pendingLanes,w|=T,g.lanes=w,Fu(h,w)}}var ow={readContext:qi,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},Dce={readContext:qi,useCallback:function(h,g){return Sl().memoizedState=[h,g===void 0?null:g],h},useContext:qi,useEffect:Kg,useImperativeHandle:function(h,g,w){return w=w!=null?w.concat([h]):null,jl(4194308,4,Xg.bind(null,g,h),w)},useLayoutEffect:function(h,g){return jl(4194308,4,h,g)},useInsertionEffect:function(h,g){return jl(4,2,h,g)},useMemo:function(h,g){var w=Sl();return g=g===void 0?null:g,h=h(),w.memoizedState=[h,g],h},useReducer:function(h,g,w){var T=Sl();return g=w!==void 0?w(g):g,T.memoizedState=T.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},T.queue=h,h=h.dispatch=Mce.bind(null,bi,h),[T.memoizedState,h]},useRef:function(h){var g=Sl();return h={current:h},g.memoizedState=h},useState:am,useDebugValue:H_,useDeferredValue:function(h){return Sl().memoizedState=h},useTransition:function(){var h=am(!1),g=h[0];return h=Pce.bind(null,h[1]),Sl().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,w){var T=bi,$=Sl();if(ot){if(w===void 0)throw Error(n(407));w=w()}else{if(w=g(),ba===null)throw Error(n(349));(nc&30)!==0||iw(T,g,w)}$.memoizedState=w;var H={value:w,getSnapshot:g};return $.queue=H,Kg(sw.bind(null,T,H,h),[h]),T.flags|=2048,jo(9,Fx.bind(null,T,H,w,g),void 0,null),w},useId:function(){var h=Sl(),g=ba.identifierPrefix;if(ot){var w=be,T=Be;w=(T&~(1<<32-Ur(T)-1)).toString(32)+w,g=":"+g+"R"+w,w=yh++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=U_++,g=":"+g+"r"+w.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},Ice={readContext:qi,useCallback:U3,useContext:qi,useEffect:Gg,useImperativeHandle:q3,useInsertionEffect:aw,useLayoutEffect:Yg,useMemo:H3,useReducer:Vg,useRef:Zc,useState:function(){return Vg(sm)},useDebugValue:H_,useDeferredValue:function(h){var g=So();return V3(g,fs.memoizedState,h)},useTransition:function(){var h=Vg(sm)[0],g=So().memoizedState;return[h,g]},useMutableSource:rw,useSyncExternalStore:Lx,useId:W3,unstable_isNewReconciler:!1},Lce={readContext:qi,useCallback:U3,useContext:qi,useEffect:Gg,useImperativeHandle:q3,useInsertionEffect:aw,useLayoutEffect:Yg,useMemo:H3,useReducer:Qu,useRef:Zc,useState:function(){return Qu(sm)},useDebugValue:H_,useDeferredValue:function(h){var g=So();return fs===null?g.memoizedState=h:V3(g,fs.memoizedState,h)},useTransition:function(){var h=Qu(sm)[0],g=So().memoizedState;return[h,g]},useMutableSource:rw,useSyncExternalStore:Lx,useId:W3,unstable_isNewReconciler:!1};function Jc(h,g){if(h&&h.defaultProps){g=re({},g),h=h.defaultProps;for(var w in h)g[w]===void 0&&(g[w]=h[w]);return g}return g}function V_(h,g,w,T){g=h.memoizedState,w=w(T,g),w=w==null?g:re({},g,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var lw={isMounted:function(h){return(h=h._reactInternals)?Ss(h)===h:!1},enqueueSetState:function(h,g,w){h=h._reactInternals;var T=_o(),$=Sh(h),H=Qi(T,$);H.payload=g,w!=null&&(H.callback=w),g=Zi(h,H,$),g!==null&&(nu(g,h,$,T),ya(g,h,$))},enqueueReplaceState:function(h,g,w){h=h._reactInternals;var T=_o(),$=Sh(h),H=Qi(T,$);H.tag=1,H.payload=g,w!=null&&(H.callback=w),g=Zi(h,H,$),g!==null&&(nu(g,h,$,T),ya(g,h,$))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var w=_o(),T=Sh(h),$=Qi(w,T);$.tag=2,g!=null&&($.callback=g),g=Zi(h,$,T),g!==null&&(nu(g,h,T,w),ya(g,h,T))}};function X3(h,g,w,T,$,H,ie){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,H,ie):g.prototype&&g.prototype.isPureReactComponent?!Xa(w,T)||!Xa($,H):!0}function Q3(h,g,w){var T=!1,$=Yu,H=g.contextType;return typeof H=="object"&&H!==null?H=qi(H):($=eo(g)?tf:Zs.current,T=g.contextTypes,H=(T=T!=null)?mh(h,$):Yu),g=new g(w,H),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=lw,h.stateNode=g,g._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=$,h.__reactInternalMemoizedMaskedChildContext=H),g}function Z3(h,g,w,T){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,T),g.state!==h&&lw.enqueueReplaceState(g,g.state,null)}function W_(h,g,w,T){var $=h.stateNode;$.props=w,$.state=h.memoizedState,$.refs={},Js(h);var H=g.contextType;typeof H=="object"&&H!==null?$.context=qi(H):(H=eo(g)?tf:Zs.current,$.context=mh(h,H)),$.state=h.memoizedState,H=g.getDerivedStateFromProps,typeof H=="function"&&(V_(h,g,H,w),$.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(g=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),g!==$.state&&lw.enqueueReplaceState($,$.state,null),xa(h,w,$,T),$.state=h.memoizedState),typeof $.componentDidMount=="function"&&(h.flags|=4194308)}function Qg(h,g){try{var w="",T=g;do w+=le(T),T=T.return;while(T);var $=w}catch(H){$=`
Error generating stack: `+H.message+`
`+H.stack}return{value:h,source:g,stack:$,digest:null}}function K_(h,g,w){return{value:h,source:null,stack:w??null,digest:g??null}}function G_(h,g){try{console.error(g.value)}catch(w){setTimeout(function(){throw w})}}var Fce=typeof WeakMap=="function"?WeakMap:Map;function J3(h,g,w){w=Qi(-1,w),w.tag=3,w.payload={element:null};var T=g.value;return w.callback=function(){mw||(mw=!0,cC=T),G_(h,g)},w}function e6(h,g,w){w=Qi(-1,w),w.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var $=g.value;w.payload=function(){return T($)},w.callback=function(){G_(h,g)}}var H=h.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(w.callback=function(){G_(h,g),typeof T!="function"&&(wh===null?wh=new Set([this]):wh.add(this));var ie=g.stack;this.componentDidCatch(g.value,{componentStack:ie!==null?ie:""})}),w}function t6(h,g,w){var T=h.pingCache;if(T===null){T=h.pingCache=new Fce;var $=new Set;T.set(g,$)}else $=T.get(g),$===void 0&&($=new Set,T.set(g,$));$.has(w)||($.add(w),h=Zce.bind(null,h,g,w),g.then(h,h))}function n6(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function r6(h,g,w,T,$){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(g=Qi(-1,1),g.tag=2,Zi(w,g,1))),w.lanes|=1),h):(h.flags|=65536,h.lanes=$,h)}var Bce=E.ReactCurrentOwner,Zo=!1;function Eo(h,g,w,T){g.child=h===null?Ci(g,null,w,T):us(g,h.child,w,T)}function i6(h,g,w,T,$){w=w.render;var H=g.ref;return zi(g,$),T=im(h,g,w,T,H,$),w=rc(),h!==null&&!Zo?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~$,sf(h,g,$)):(ot&&w&&rt(g),g.flags|=1,Eo(h,g,T,$),g.child)}function s6(h,g,w,T,$){if(h===null){var H=w.type;return typeof H=="function"&&!gC(H)&&H.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(g.tag=15,g.type=H,a6(h,g,H,T,$)):(h=ww(w.type,null,T,g,g.mode,$),h.ref=g.ref,h.return=g,g.child=h)}if(H=h.child,(h.lanes&$)===0){var ie=H.memoizedProps;if(w=w.compare,w=w!==null?w:Xa,w(ie,T)&&h.ref===g.ref)return sf(h,g,$)}return g.flags|=1,h=Eh(H,T),h.ref=g.ref,h.return=g,g.child=h}function a6(h,g,w,T,$){if(h!==null){var H=h.memoizedProps;if(Xa(H,T)&&h.ref===g.ref)if(Zo=!1,g.pendingProps=T=H,(h.lanes&$)!==0)(h.flags&131072)!==0&&(Zo=!0);else return g.lanes=h.lanes,sf(h,g,$)}return Y_(h,g,w,T,$)}function o6(h,g,w){var T=g.pendingProps,$=T.children,H=h!==null?h.memoizedState:null;if(T.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vr(Jg,El),El|=w;else{if((w&1073741824)===0)return h=H!==null?H.baseLanes|w:w,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Vr(Jg,El),El|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=H!==null?H.baseLanes:w,Vr(Jg,El),El|=T}else H!==null?(T=H.baseLanes|w,g.memoizedState=null):T=w,Vr(Jg,El),El|=T;return Eo(h,g,$,w),g.child}function l6(h,g){var w=g.ref;(h===null&&w!==null||h!==null&&h.ref!==w)&&(g.flags|=512,g.flags|=2097152)}function Y_(h,g,w,T,$){var H=eo(w)?tf:Zs.current;return H=mh(g,H),zi(g,$),w=im(h,g,w,T,H,$),T=rc(),h!==null&&!Zo?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~$,sf(h,g,$)):(ot&&T&&rt(g),g.flags|=1,Eo(h,g,w,$),g.child)}function c6(h,g,w,T,$){if(eo(w)){var H=!0;nf(g)}else H=!1;if(zi(g,$),g.stateNode===null)uw(h,g),Q3(g,w,T),W_(g,w,T,$),T=!0;else if(h===null){var ie=g.stateNode,Ee=g.memoizedProps;ie.props=Ee;var Oe=ie.context,Ge=w.contextType;typeof Ge=="object"&&Ge!==null?Ge=qi(Ge):(Ge=eo(w)?tf:Zs.current,Ge=mh(g,Ge));var yt=w.getDerivedStateFromProps,Nt=typeof yt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Nt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Ee!==T||Oe!==Ge)&&Z3(g,ie,T,Ge),ds=!1;var vt=g.memoizedState;ie.state=vt,xa(g,T,ie,$),Oe=g.memoizedState,Ee!==T||vt!==Oe||Ja.current||ds?(typeof yt=="function"&&(V_(g,w,yt,T),Oe=g.memoizedState),(Ee=ds||X3(g,w,Ee,T,vt,Oe,Ge))?(Nt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=Oe),ie.props=T,ie.state=Oe,ie.context=Ge,T=Ee):(typeof ie.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{ie=g.stateNode,to(h,g),Ee=g.memoizedProps,Ge=g.type===g.elementType?Ee:Jc(g.type,Ee),ie.props=Ge,Nt=g.pendingProps,vt=ie.context,Oe=w.contextType,typeof Oe=="object"&&Oe!==null?Oe=qi(Oe):(Oe=eo(w)?tf:Zs.current,Oe=mh(g,Oe));var Kt=w.getDerivedStateFromProps;(yt=typeof Kt=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Ee!==Nt||vt!==Oe)&&Z3(g,ie,T,Oe),ds=!1,vt=g.memoizedState,ie.state=vt,xa(g,T,ie,$);var rn=g.memoizedState;Ee!==Nt||vt!==rn||Ja.current||ds?(typeof Kt=="function"&&(V_(g,w,Kt,T),rn=g.memoizedState),(Ge=ds||X3(g,w,Ge,T,vt,rn,Oe)||!1)?(yt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(T,rn,Oe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(T,rn,Oe)),typeof ie.componentDidUpdate=="function"&&(g.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ie.componentDidUpdate!="function"||Ee===h.memoizedProps&&vt===h.memoizedState||(g.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Ee===h.memoizedProps&&vt===h.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=rn),ie.props=T,ie.state=rn,ie.context=Oe,T=Ge):(typeof ie.componentDidUpdate!="function"||Ee===h.memoizedProps&&vt===h.memoizedState||(g.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Ee===h.memoizedProps&&vt===h.memoizedState||(g.flags|=1024),T=!1)}return X_(h,g,w,T,H,$)}function X_(h,g,w,T,$,H){l6(h,g);var ie=(g.flags&128)!==0;if(!T&&!ie)return $&&tw(g,w,!1),sf(h,g,H);T=g.stateNode,Bce.current=g;var Ee=ie&&typeof w.getDerivedStateFromError!="function"?null:T.render();return g.flags|=1,h!==null&&ie?(g.child=us(g,h.child,null,H),g.child=us(g,null,Ee,H)):Eo(h,g,Ee,H),g.memoizedState=T.state,$&&tw(g,w,!0),g.child}function u6(h){var g=h.stateNode;g.pendingContext?ew(h,g.pendingContext,g.pendingContext!==g.context):g.context&&ew(h,g.context,!1),gh(h,g.containerInfo)}function d6(h,g,w,T,$){return Qt(),It($),g.flags|=256,Eo(h,g,w,T),g.child}var Q_={dehydrated:null,treeContext:null,retryLane:0};function Z_(h){return{baseLanes:h,cachePool:null,transitions:null}}function f6(h,g,w){var T=g.pendingProps,$=ui.current,H=!1,ie=(g.flags&128)!==0,Ee;if((Ee=ie)||(Ee=h!==null&&h.memoizedState===null?!1:($&2)!==0),Ee?(H=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&($|=1),Vr(ui,$&1),h===null)return nn(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(ie=T.children,h=T.fallback,H?(T=g.mode,H=g.child,ie={mode:"hidden",children:ie},(T&1)===0&&H!==null?(H.childLanes=0,H.pendingProps=ie):H=Nw(ie,T,0,null),h=dm(h,T,w,null),H.return=g,h.return=g,H.sibling=h,g.child=H,g.child.memoizedState=Z_(w),g.memoizedState=Q_,h):J_(g,ie));if($=h.memoizedState,$!==null&&(Ee=$.dehydrated,Ee!==null))return $ce(h,g,ie,T,Ee,$,w);if(H){H=T.fallback,ie=g.mode,$=h.child,Ee=$.sibling;var Oe={mode:"hidden",children:T.children};return(ie&1)===0&&g.child!==$?(T=g.child,T.childLanes=0,T.pendingProps=Oe,g.deletions=null):(T=Eh($,Oe),T.subtreeFlags=$.subtreeFlags&14680064),Ee!==null?H=Eh(Ee,H):(H=dm(H,ie,w,null),H.flags|=2),H.return=g,T.return=g,T.sibling=H,g.child=T,T=H,H=g.child,ie=h.child.memoizedState,ie=ie===null?Z_(w):{baseLanes:ie.baseLanes|w,cachePool:null,transitions:ie.transitions},H.memoizedState=ie,H.childLanes=h.childLanes&~w,g.memoizedState=Q_,T}return H=h.child,h=H.sibling,T=Eh(H,{mode:"visible",children:T.children}),(g.mode&1)===0&&(T.lanes=w),T.return=g,T.sibling=null,h!==null&&(w=g.deletions,w===null?(g.deletions=[h],g.flags|=16):w.push(h)),g.child=T,g.memoizedState=null,T}function J_(h,g){return g=Nw({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function cw(h,g,w,T){return T!==null&&It(T),us(g,h.child,null,w),h=J_(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function $ce(h,g,w,T,$,H,ie){if(w)return g.flags&256?(g.flags&=-257,T=K_(Error(n(422))),cw(h,g,ie,T)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(H=T.fallback,$=g.mode,T=Nw({mode:"visible",children:T.children},$,0,null),H=dm(H,$,ie,null),H.flags|=2,T.return=g,H.return=g,T.sibling=H,g.child=T,(g.mode&1)!==0&&us(g,h.child,null,ie),g.child.memoizedState=Z_(ie),g.memoizedState=Q_,H);if((g.mode&1)===0)return cw(h,g,ie,null);if($.data==="$!"){if(T=$.nextSibling&&$.nextSibling.dataset,T)var Ee=T.dgst;return T=Ee,H=Error(n(419)),T=K_(H,T,void 0),cw(h,g,ie,T)}if(Ee=(ie&h.childLanes)!==0,Zo||Ee){if(T=ba,T!==null){switch(ie&-ie){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=($&(T.suspendedLanes|ie))!==0?0:$,$!==0&&$!==H.retryLane&&(H.retryLane=$,Jr(h,$),nu(T,h,$,-1))}return mC(),T=K_(Error(n(421))),cw(h,g,ie,T)}return $.data==="$?"?(g.flags|=128,g.child=h.child,g=Jce.bind(null,h),$._reactRetry=g,null):(h=H.treeContext,tt=Ra($.nextSibling),Je=g,ot=!0,ut=null,h!==null&&(fe[ye++]=Be,fe[ye++]=be,fe[ye++]=Te,Be=h.id,be=h.overflow,Te=g),g=J_(g,T.children),g.flags|=4096,g)}function h6(h,g,w){h.lanes|=g;var T=h.alternate;T!==null&&(T.lanes|=g),Pr(h.return,g,w)}function eC(h,g,w,T,$){var H=h.memoizedState;H===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:$}:(H.isBackwards=g,H.rendering=null,H.renderingStartTime=0,H.last=T,H.tail=w,H.tailMode=$)}function p6(h,g,w){var T=g.pendingProps,$=T.revealOrder,H=T.tail;if(Eo(h,g,T.children,w),T=ui.current,(T&2)!==0)T=T&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&h6(h,w,g);else if(h.tag===19)h6(h,w,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(Vr(ui,T),(g.mode&1)===0)g.memoizedState=null;else switch($){case"forwards":for(w=g.child,$=null;w!==null;)h=w.alternate,h!==null&&Nl(h)===null&&($=w),w=w.sibling;w=$,w===null?($=g.child,g.child=null):($=w.sibling,w.sibling=null),eC(g,!1,$,w,H);break;case"backwards":for(w=null,$=g.child,g.child=null;$!==null;){if(h=$.alternate,h!==null&&Nl(h)===null){g.child=$;break}h=$.sibling,$.sibling=w,w=$,$=h}eC(g,!0,w,null,H);break;case"together":eC(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function uw(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function sf(h,g,w){if(h!==null&&(g.dependencies=h.dependencies),om|=g.lanes,(w&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(n(153));if(g.child!==null){for(h=g.child,w=Eh(h,h.pendingProps),g.child=w,w.return=g;h.sibling!==null;)h=h.sibling,w=w.sibling=Eh(h,h.pendingProps),w.return=g;w.sibling=null}return g.child}function zce(h,g,w){switch(g.tag){case 3:u6(g),Qt();break;case 5:nw(g);break;case 1:eo(g.type)&&nf(g);break;case 4:gh(g,g.stateNode.containerInfo);break;case 10:var T=g.type._context,$=g.memoizedProps.value;Vr(Es,T._currentValue),T._currentValue=$;break;case 13:if(T=g.memoizedState,T!==null)return T.dehydrated!==null?(Vr(ui,ui.current&1),g.flags|=128,null):(w&g.child.childLanes)!==0?f6(h,g,w):(Vr(ui,ui.current&1),h=sf(h,g,w),h!==null?h.sibling:null);Vr(ui,ui.current&1);break;case 19:if(T=(w&g.childLanes)!==0,(h.flags&128)!==0){if(T)return p6(h,g,w);g.flags|=128}if($=g.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),Vr(ui,ui.current),T)break;return null;case 22:case 23:return g.lanes=0,o6(h,g,w)}return sf(h,g,w)}var m6,tC,g6,v6;m6=function(h,g){for(var w=g.child;w!==null;){if(w.tag===5||w.tag===6)h.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},tC=function(){},g6=function(h,g,w,T){var $=h.memoizedProps;if($!==T){h=g.stateNode,Xc(Ls.current);var H=null;switch(w){case"input":$=J(h,$),T=J(h,T),H=[];break;case"select":$=re({},$,{value:void 0}),T=re({},T,{value:void 0}),H=[];break;case"textarea":$=ke(h,$),T=ke(h,T),H=[];break;default:typeof $.onClick!="function"&&typeof T.onClick=="function"&&(h.onclick=fh)}ir(w,T);var ie;w=null;for(Ge in $)if(!T.hasOwnProperty(Ge)&&$.hasOwnProperty(Ge)&&$[Ge]!=null)if(Ge==="style"){var Ee=$[Ge];for(ie in Ee)Ee.hasOwnProperty(ie)&&(w||(w={}),w[ie]="")}else Ge!=="dangerouslySetInnerHTML"&&Ge!=="children"&&Ge!=="suppressContentEditableWarning"&&Ge!=="suppressHydrationWarning"&&Ge!=="autoFocus"&&(i.hasOwnProperty(Ge)?H||(H=[]):(H=H||[]).push(Ge,null));for(Ge in T){var Oe=T[Ge];if(Ee=$?.[Ge],T.hasOwnProperty(Ge)&&Oe!==Ee&&(Oe!=null||Ee!=null))if(Ge==="style")if(Ee){for(ie in Ee)!Ee.hasOwnProperty(ie)||Oe&&Oe.hasOwnProperty(ie)||(w||(w={}),w[ie]="");for(ie in Oe)Oe.hasOwnProperty(ie)&&Ee[ie]!==Oe[ie]&&(w||(w={}),w[ie]=Oe[ie])}else w||(H||(H=[]),H.push(Ge,w)),w=Oe;else Ge==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ee=Ee?Ee.__html:void 0,Oe!=null&&Ee!==Oe&&(H=H||[]).push(Ge,Oe)):Ge==="children"?typeof Oe!="string"&&typeof Oe!="number"||(H=H||[]).push(Ge,""+Oe):Ge!=="suppressContentEditableWarning"&&Ge!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ge)?(Oe!=null&&Ge==="onScroll"&&Qr("scroll",h),H||Ee===Oe||(H=[])):(H=H||[]).push(Ge,Oe))}w&&(H=H||[]).push("style",w);var Ge=H;(g.updateQueue=Ge)&&(g.flags|=4)}},v6=function(h,g,w,T){w!==T&&(g.flags|=4)};function Bx(h,g){if(!ot)switch(h.tailMode){case"hidden":g=h.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function no(h){var g=h.alternate!==null&&h.alternate.child===h.child,w=0,T=0;if(g)for(var $=h.child;$!==null;)w|=$.lanes|$.childLanes,T|=$.subtreeFlags&14680064,T|=$.flags&14680064,$.return=h,$=$.sibling;else for($=h.child;$!==null;)w|=$.lanes|$.childLanes,T|=$.subtreeFlags,T|=$.flags,$.return=h,$=$.sibling;return h.subtreeFlags|=T,h.childLanes=w,g}function qce(h,g,w){var T=g.pendingProps;switch(ze(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(g),null;case 1:return eo(g.type)&&zg(),no(g),null;case 3:return T=g.stateNode,tc(),$r(Ja),$r(Zs),Ix(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&($i(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,ut!==null&&(fC(ut),ut=null))),tC(h,g),no(g),null;case 5:Rx(g);var $=Xc(Xu.current);if(w=g.type,h!==null&&g.stateNode!=null)g6(h,g,w,T,$),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!T){if(g.stateNode===null)throw Error(n(166));return no(g),null}if(h=Xc(Ls.current),$i(g)){T=g.stateNode,w=g.type;var H=g.memoizedProps;switch(T[ec]=g,T[hh]=H,h=(g.mode&1)!==0,w){case"dialog":Qr("cancel",T),Qr("close",T);break;case"iframe":case"object":case"embed":Qr("load",T);break;case"video":case"audio":for($=0;$<Ku.length;$++)Qr(Ku[$],T);break;case"source":Qr("error",T);break;case"img":case"image":case"link":Qr("error",T),Qr("load",T);break;case"details":Qr("toggle",T);break;case"input":ne(T,H),Qr("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!H.multiple},Qr("invalid",T);break;case"textarea":We(T,H),Qr("invalid",T)}ir(w,H),$=null;for(var ie in H)if(H.hasOwnProperty(ie)){var Ee=H[ie];ie==="children"?typeof Ee=="string"?T.textContent!==Ee&&(H.suppressHydrationWarning!==!0&&$g(T.textContent,Ee,h),$=["children",Ee]):typeof Ee=="number"&&T.textContent!==""+Ee&&(H.suppressHydrationWarning!==!0&&$g(T.textContent,Ee,h),$=["children",""+Ee]):i.hasOwnProperty(ie)&&Ee!=null&&ie==="onScroll"&&Qr("scroll",T)}switch(w){case"input":Ce(T),et(T,H,!0);break;case"textarea":Ce(T),qe(T);break;case"select":case"option":break;default:typeof H.onClick=="function"&&(T.onclick=fh)}T=$,g.updateQueue=T,T!==null&&(g.flags|=4)}else{ie=$.nodeType===9?$:$.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=nt(w)),h==="http://www.w3.org/1999/xhtml"?w==="script"?(h=ie.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof T.is=="string"?h=ie.createElement(w,{is:T.is}):(h=ie.createElement(w),w==="select"&&(ie=h,T.multiple?ie.multiple=!0:T.size&&(ie.size=T.size))):h=ie.createElementNS(h,w),h[ec]=g,h[hh]=T,m6(h,g,!1,!1),g.stateNode=h;e:{switch(ie=on(w,T),w){case"dialog":Qr("cancel",h),Qr("close",h),$=T;break;case"iframe":case"object":case"embed":Qr("load",h),$=T;break;case"video":case"audio":for($=0;$<Ku.length;$++)Qr(Ku[$],h);$=T;break;case"source":Qr("error",h),$=T;break;case"img":case"image":case"link":Qr("error",h),Qr("load",h),$=T;break;case"details":Qr("toggle",h),$=T;break;case"input":ne(h,T),$=J(h,T),Qr("invalid",h);break;case"option":$=T;break;case"select":h._wrapperState={wasMultiple:!!T.multiple},$=re({},T,{value:void 0}),Qr("invalid",h);break;case"textarea":We(h,T),$=ke(h,T),Qr("invalid",h);break;default:$=T}ir(w,$),Ee=$;for(H in Ee)if(Ee.hasOwnProperty(H)){var Oe=Ee[H];H==="style"?Ht(h,Oe):H==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Ot(h,Oe)):H==="children"?typeof Oe=="string"?(w!=="textarea"||Oe!=="")&&Yt(h,Oe):typeof Oe=="number"&&Yt(h,""+Oe):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?Oe!=null&&H==="onScroll"&&Qr("scroll",h):Oe!=null&&j(h,H,Oe,ie))}switch(w){case"input":Ce(h),et(h,T,!1);break;case"textarea":Ce(h),qe(h);break;case"option":T.value!=null&&h.setAttribute("value",""+xe(T.value));break;case"select":h.multiple=!!T.multiple,H=T.value,H!=null?Se(h,!!T.multiple,H,!1):T.defaultValue!=null&&Se(h,!!T.multiple,T.defaultValue,!0);break;default:typeof $.onClick=="function"&&(h.onclick=fh)}switch(w){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return no(g),null;case 6:if(h&&g.stateNode!=null)v6(h,g,h.memoizedProps,T);else{if(typeof T!="string"&&g.stateNode===null)throw Error(n(166));if(w=Xc(Xu.current),Xc(Ls.current),$i(g)){if(T=g.stateNode,w=g.memoizedProps,T[ec]=g,(H=T.nodeValue!==w)&&(h=Je,h!==null))switch(h.tag){case 3:$g(T.nodeValue,w,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&$g(T.nodeValue,w,(h.mode&1)!==0)}H&&(g.flags|=4)}else T=(w.nodeType===9?w:w.ownerDocument).createTextNode(T),T[ec]=g,g.stateNode=T}return no(g),null;case 13:if($r(ui),T=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(ot&&tt!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Xn(),Qt(),g.flags|=98560,H=!1;else if(H=$i(g),T!==null&&T.dehydrated!==null){if(h===null){if(!H)throw Error(n(318));if(H=g.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(n(317));H[ec]=g}else Qt(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;no(g),H=!1}else ut!==null&&(fC(ut),ut=null),H=!0;if(!H)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=w,g):(T=T!==null,T!==(h!==null&&h.memoizedState!==null)&&T&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(ui.current&1)!==0?ea===0&&(ea=3):mC())),g.updateQueue!==null&&(g.flags|=4),no(g),null);case 4:return tc(),tC(h,g),h===null&&Qd(g.stateNode.containerInfo),no(g),null;case 10:return xi(g.type._context),no(g),null;case 17:return eo(g.type)&&zg(),no(g),null;case 19:if($r(ui),H=g.memoizedState,H===null)return no(g),null;if(T=(g.flags&128)!==0,ie=H.rendering,ie===null)if(T)Bx(H,!1);else{if(ea!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(ie=Nl(h),ie!==null){for(g.flags|=128,Bx(H,!1),T=ie.updateQueue,T!==null&&(g.updateQueue=T,g.flags|=4),g.subtreeFlags=0,T=w,w=g.child;w!==null;)H=w,h=T,H.flags&=14680066,ie=H.alternate,ie===null?(H.childLanes=0,H.lanes=h,H.child=null,H.subtreeFlags=0,H.memoizedProps=null,H.memoizedState=null,H.updateQueue=null,H.dependencies=null,H.stateNode=null):(H.childLanes=ie.childLanes,H.lanes=ie.lanes,H.child=ie.child,H.subtreeFlags=0,H.deletions=null,H.memoizedProps=ie.memoizedProps,H.memoizedState=ie.memoizedState,H.updateQueue=ie.updateQueue,H.type=ie.type,h=ie.dependencies,H.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),w=w.sibling;return Vr(ui,ui.current&1|2),g.child}h=h.sibling}H.tail!==null&&Xr()>ev&&(g.flags|=128,T=!0,Bx(H,!1),g.lanes=4194304)}else{if(!T)if(h=Nl(ie),h!==null){if(g.flags|=128,T=!0,w=h.updateQueue,w!==null&&(g.updateQueue=w,g.flags|=4),Bx(H,!0),H.tail===null&&H.tailMode==="hidden"&&!ie.alternate&&!ot)return no(g),null}else 2*Xr()-H.renderingStartTime>ev&&w!==1073741824&&(g.flags|=128,T=!0,Bx(H,!1),g.lanes=4194304);H.isBackwards?(ie.sibling=g.child,g.child=ie):(w=H.last,w!==null?w.sibling=ie:g.child=ie,H.last=ie)}return H.tail!==null?(g=H.tail,H.rendering=g,H.tail=g.sibling,H.renderingStartTime=Xr(),g.sibling=null,w=ui.current,Vr(ui,T?w&1|2:w&1),g):(no(g),null);case 22:case 23:return pC(),T=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(g.flags|=8192),T&&(g.mode&1)!==0?(El&1073741824)!==0&&(no(g),g.subtreeFlags&6&&(g.flags|=8192)):no(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function Uce(h,g){switch(ze(g),g.tag){case 1:return eo(g.type)&&zg(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return tc(),$r(Ja),$r(Zs),Ix(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return Rx(g),null;case 13:if($r(ui),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(n(340));Qt()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return $r(ui),null;case 4:return tc(),null;case 10:return xi(g.type._context),null;case 22:case 23:return pC(),null;case 24:return null;default:return null}}var dw=!1,ro=!1,Hce=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Zg(h,g){var w=h.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){hs(h,g,T)}else w.current=null}function nC(h,g,w){try{w()}catch(T){hs(h,g,T)}}var y6=!1;function Vce(h,g){if(tm=nh,h=cs(),xl(h)){if("selectionStart"in h)var w={start:h.selectionStart,end:h.selectionEnd};else e:{w=(w=h.ownerDocument)&&w.defaultView||window;var T=w.getSelection&&w.getSelection();if(T&&T.rangeCount!==0){w=T.anchorNode;var $=T.anchorOffset,H=T.focusNode;T=T.focusOffset;try{w.nodeType,H.nodeType}catch{w=null;break e}var ie=0,Ee=-1,Oe=-1,Ge=0,yt=0,Nt=h,vt=null;t:for(;;){for(var Kt;Nt!==w||$!==0&&Nt.nodeType!==3||(Ee=ie+$),Nt!==H||T!==0&&Nt.nodeType!==3||(Oe=ie+T),Nt.nodeType===3&&(ie+=Nt.nodeValue.length),(Kt=Nt.firstChild)!==null;)vt=Nt,Nt=Kt;for(;;){if(Nt===h)break t;if(vt===w&&++Ge===$&&(Ee=ie),vt===H&&++yt===T&&(Oe=ie),(Kt=Nt.nextSibling)!==null)break;Nt=vt,vt=Nt.parentNode}Nt=Kt}w=Ee===-1||Oe===-1?null:{start:Ee,end:Oe}}else w=null}w=w||{start:0,end:0}}else w=null;for(Jd={focusedElem:h,selectionRange:w},nh=!1,Zt=g;Zt!==null;)if(g=Zt,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,Zt=h;else for(;Zt!==null;){g=Zt;try{var rn=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var ln=rn.memoizedProps,Cs=rn.memoizedState,$e=g.stateNode,De=$e.getSnapshotBeforeUpdate(g.elementType===g.type?ln:Jc(g.type,ln),Cs);$e.__reactInternalSnapshotBeforeUpdate=De}break;case 3:var Ue=g.stateNode.containerInfo;Ue.nodeType===1?Ue.textContent="":Ue.nodeType===9&&Ue.documentElement&&Ue.removeChild(Ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(kt){hs(g,g.return,kt)}if(h=g.sibling,h!==null){h.return=g.return,Zt=h;break}Zt=g.return}return rn=y6,y6=!1,rn}function $x(h,g,w){var T=g.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var $=T=T.next;do{if(($.tag&h)===h){var H=$.destroy;$.destroy=void 0,H!==void 0&&nC(g,w,H)}$=$.next}while($!==T)}}function fw(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&h)===h){var T=w.create;w.destroy=T()}w=w.next}while(w!==g)}}function rC(h){var g=h.ref;if(g!==null){var w=h.stateNode;switch(h.tag){case 5:h=w;break;default:h=w}typeof g=="function"?g(h):g.current=h}}function x6(h){var g=h.alternate;g!==null&&(h.alternate=null,x6(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[ec],delete g[hh],delete g[Za],delete g[z_],delete g[q_])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function b6(h){return h.tag===5||h.tag===3||h.tag===4}function w6(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||b6(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function iC(h,g,w){var T=h.tag;if(T===5||T===6)h=h.stateNode,g?w.nodeType===8?w.parentNode.insertBefore(h,g):w.insertBefore(h,g):(w.nodeType===8?(g=w.parentNode,g.insertBefore(h,w)):(g=w,g.appendChild(h)),w=w._reactRootContainer,w!=null||g.onclick!==null||(g.onclick=fh));else if(T!==4&&(h=h.child,h!==null))for(iC(h,g,w),h=h.sibling;h!==null;)iC(h,g,w),h=h.sibling}function sC(h,g,w){var T=h.tag;if(T===5||T===6)h=h.stateNode,g?w.insertBefore(h,g):w.appendChild(h);else if(T!==4&&(h=h.child,h!==null))for(sC(h,g,w),h=h.sibling;h!==null;)sC(h,g,w),h=h.sibling}var Da=null,eu=!1;function bh(h,g,w){for(w=w.child;w!==null;)N6(h,g,w),w=w.sibling}function N6(h,g,w){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(Kn,w)}catch{}switch(w.tag){case 5:ro||Zg(w,g);case 6:var T=Da,$=eu;Da=null,bh(h,g,w),Da=T,eu=$,Da!==null&&(eu?(h=Da,w=w.stateNode,h.nodeType===8?h.parentNode.removeChild(w):h.removeChild(w)):Da.removeChild(w.stateNode));break;case 18:Da!==null&&(eu?(h=Da,w=w.stateNode,h.nodeType===8?Ox(h.parentNode,w):h.nodeType===1&&Ox(h,w),Kl(h)):Ox(Da,w.stateNode));break;case 4:T=Da,$=eu,Da=w.stateNode.containerInfo,eu=!0,bh(h,g,w),Da=T,eu=$;break;case 0:case 11:case 14:case 15:if(!ro&&(T=w.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){$=T=T.next;do{var H=$,ie=H.destroy;H=H.tag,ie!==void 0&&((H&2)!==0||(H&4)!==0)&&nC(w,g,ie),$=$.next}while($!==T)}bh(h,g,w);break;case 1:if(!ro&&(Zg(w,g),T=w.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=w.memoizedProps,T.state=w.memoizedState,T.componentWillUnmount()}catch(Ee){hs(w,g,Ee)}bh(h,g,w);break;case 21:bh(h,g,w);break;case 22:w.mode&1?(ro=(T=ro)||w.memoizedState!==null,bh(h,g,w),ro=T):bh(h,g,w);break;default:bh(h,g,w)}}function S6(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var w=h.stateNode;w===null&&(w=h.stateNode=new Hce),g.forEach(function(T){var $=eue.bind(null,h,T);w.has(T)||(w.add(T),T.then($,$))})}}function tu(h,g){var w=g.deletions;if(w!==null)for(var T=0;T<w.length;T++){var $=w[T];try{var H=h,ie=g,Ee=ie;e:for(;Ee!==null;){switch(Ee.tag){case 5:Da=Ee.stateNode,eu=!1;break e;case 3:Da=Ee.stateNode.containerInfo,eu=!0;break e;case 4:Da=Ee.stateNode.containerInfo,eu=!0;break e}Ee=Ee.return}if(Da===null)throw Error(n(160));N6(H,ie,$),Da=null,eu=!1;var Oe=$.alternate;Oe!==null&&(Oe.return=null),$.return=null}catch(Ge){hs($,g,Ge)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)j6(g,h),g=g.sibling}function j6(h,g){var w=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(tu(g,h),Zu(h),T&4){try{$x(3,h,h.return),fw(3,h)}catch(ln){hs(h,h.return,ln)}try{$x(5,h,h.return)}catch(ln){hs(h,h.return,ln)}}break;case 1:tu(g,h),Zu(h),T&512&&w!==null&&Zg(w,w.return);break;case 5:if(tu(g,h),Zu(h),T&512&&w!==null&&Zg(w,w.return),h.flags&32){var $=h.stateNode;try{Yt($,"")}catch(ln){hs(h,h.return,ln)}}if(T&4&&($=h.stateNode,$!=null)){var H=h.memoizedProps,ie=w!==null?w.memoizedProps:H,Ee=h.type,Oe=h.updateQueue;if(h.updateQueue=null,Oe!==null)try{Ee==="input"&&H.type==="radio"&&H.name!=null&&Re($,H),on(Ee,ie);var Ge=on(Ee,H);for(ie=0;ie<Oe.length;ie+=2){var yt=Oe[ie],Nt=Oe[ie+1];yt==="style"?Ht($,Nt):yt==="dangerouslySetInnerHTML"?Ot($,Nt):yt==="children"?Yt($,Nt):j($,yt,Nt,Ge)}switch(Ee){case"input":dt($,H);break;case"textarea":Ke($,H);break;case"select":var vt=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!H.multiple;var Kt=H.value;Kt!=null?Se($,!!H.multiple,Kt,!1):vt!==!!H.multiple&&(H.defaultValue!=null?Se($,!!H.multiple,H.defaultValue,!0):Se($,!!H.multiple,H.multiple?[]:"",!1))}$[hh]=H}catch(ln){hs(h,h.return,ln)}}break;case 6:if(tu(g,h),Zu(h),T&4){if(h.stateNode===null)throw Error(n(162));$=h.stateNode,H=h.memoizedProps;try{$.nodeValue=H}catch(ln){hs(h,h.return,ln)}}break;case 3:if(tu(g,h),Zu(h),T&4&&w!==null&&w.memoizedState.isDehydrated)try{Kl(g.containerInfo)}catch(ln){hs(h,h.return,ln)}break;case 4:tu(g,h),Zu(h);break;case 13:tu(g,h),Zu(h),$=h.child,$.flags&8192&&(H=$.memoizedState!==null,$.stateNode.isHidden=H,!H||$.alternate!==null&&$.alternate.memoizedState!==null||(lC=Xr())),T&4&&S6(h);break;case 22:if(yt=w!==null&&w.memoizedState!==null,h.mode&1?(ro=(Ge=ro)||yt,tu(g,h),ro=Ge):tu(g,h),Zu(h),T&8192){if(Ge=h.memoizedState!==null,(h.stateNode.isHidden=Ge)&&!yt&&(h.mode&1)!==0)for(Zt=h,yt=h.child;yt!==null;){for(Nt=Zt=yt;Zt!==null;){switch(vt=Zt,Kt=vt.child,vt.tag){case 0:case 11:case 14:case 15:$x(4,vt,vt.return);break;case 1:Zg(vt,vt.return);var rn=vt.stateNode;if(typeof rn.componentWillUnmount=="function"){T=vt,w=vt.return;try{g=T,rn.props=g.memoizedProps,rn.state=g.memoizedState,rn.componentWillUnmount()}catch(ln){hs(T,w,ln)}}break;case 5:Zg(vt,vt.return);break;case 22:if(vt.memoizedState!==null){C6(Nt);continue}}Kt!==null?(Kt.return=vt,Zt=Kt):C6(Nt)}yt=yt.sibling}e:for(yt=null,Nt=h;;){if(Nt.tag===5){if(yt===null){yt=Nt;try{$=Nt.stateNode,Ge?(H=$.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none"):(Ee=Nt.stateNode,Oe=Nt.memoizedProps.style,ie=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ee.style.display=Pn("display",ie))}catch(ln){hs(h,h.return,ln)}}}else if(Nt.tag===6){if(yt===null)try{Nt.stateNode.nodeValue=Ge?"":Nt.memoizedProps}catch(ln){hs(h,h.return,ln)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===h)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===h)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===h)break e;yt===Nt&&(yt=null),Nt=Nt.return}yt===Nt&&(yt=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}break;case 19:tu(g,h),Zu(h),T&4&&S6(h);break;case 21:break;default:tu(g,h),Zu(h)}}function Zu(h){var g=h.flags;if(g&2){try{e:{for(var w=h.return;w!==null;){if(b6(w)){var T=w;break e}w=w.return}throw Error(n(160))}switch(T.tag){case 5:var $=T.stateNode;T.flags&32&&(Yt($,""),T.flags&=-33);var H=w6(h);sC(h,H,$);break;case 3:case 4:var ie=T.stateNode.containerInfo,Ee=w6(h);iC(h,Ee,ie);break;default:throw Error(n(161))}}catch(Oe){hs(h,h.return,Oe)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function Wce(h,g,w){Zt=h,E6(h)}function E6(h,g,w){for(var T=(h.mode&1)!==0;Zt!==null;){var $=Zt,H=$.child;if($.tag===22&&T){var ie=$.memoizedState!==null||dw;if(!ie){var Ee=$.alternate,Oe=Ee!==null&&Ee.memoizedState!==null||ro;Ee=dw;var Ge=ro;if(dw=ie,(ro=Oe)&&!Ge)for(Zt=$;Zt!==null;)ie=Zt,Oe=ie.child,ie.tag===22&&ie.memoizedState!==null?A6($):Oe!==null?(Oe.return=ie,Zt=Oe):A6($);for(;H!==null;)Zt=H,E6(H),H=H.sibling;Zt=$,dw=Ee,ro=Ge}_6(h)}else($.subtreeFlags&8772)!==0&&H!==null?(H.return=$,Zt=H):_6(h)}}function _6(h){for(;Zt!==null;){var g=Zt;if((g.flags&8772)!==0){var w=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:ro||fw(5,g);break;case 1:var T=g.stateNode;if(g.flags&4&&!ro)if(w===null)T.componentDidMount();else{var $=g.elementType===g.type?w.memoizedProps:Jc(g.type,w.memoizedProps);T.componentDidUpdate($,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var H=g.updateQueue;H!==null&&Qo(g,H,T);break;case 3:var ie=g.updateQueue;if(ie!==null){if(w=null,g.child!==null)switch(g.child.tag){case 5:w=g.child.stateNode;break;case 1:w=g.child.stateNode}Qo(g,ie,w)}break;case 5:var Ee=g.stateNode;if(w===null&&g.flags&4){w=Ee;var Oe=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&w.focus();break;case"img":Oe.src&&(w.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Ge=g.alternate;if(Ge!==null){var yt=Ge.memoizedState;if(yt!==null){var Nt=yt.dehydrated;Nt!==null&&Kl(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ro||g.flags&512&&rC(g)}catch(vt){hs(g,g.return,vt)}}if(g===h){Zt=null;break}if(w=g.sibling,w!==null){w.return=g.return,Zt=w;break}Zt=g.return}}function C6(h){for(;Zt!==null;){var g=Zt;if(g===h){Zt=null;break}var w=g.sibling;if(w!==null){w.return=g.return,Zt=w;break}Zt=g.return}}function A6(h){for(;Zt!==null;){var g=Zt;try{switch(g.tag){case 0:case 11:case 15:var w=g.return;try{fw(4,g)}catch(Oe){hs(g,w,Oe)}break;case 1:var T=g.stateNode;if(typeof T.componentDidMount=="function"){var $=g.return;try{T.componentDidMount()}catch(Oe){hs(g,$,Oe)}}var H=g.return;try{rC(g)}catch(Oe){hs(g,H,Oe)}break;case 5:var ie=g.return;try{rC(g)}catch(Oe){hs(g,ie,Oe)}}}catch(Oe){hs(g,g.return,Oe)}if(g===h){Zt=null;break}var Ee=g.sibling;if(Ee!==null){Ee.return=g.return,Zt=Ee;break}Zt=g.return}}var Kce=Math.ceil,hw=E.ReactCurrentDispatcher,aC=E.ReactCurrentOwner,ic=E.ReactCurrentBatchConfig,Mr=0,ba=null,Fs=null,Ia=0,El=0,Jg=bl(0),ea=0,zx=null,om=0,pw=0,oC=0,qx=null,Jo=null,lC=0,ev=1/0,af=null,mw=!1,cC=null,wh=null,gw=!1,Nh=null,vw=0,Ux=0,uC=null,yw=-1,xw=0;function _o(){return(Mr&6)!==0?Xr():yw!==-1?yw:yw=Xr()}function Sh(h){return(h.mode&1)===0?1:(Mr&2)!==0&&Ia!==0?Ia&-Ia:Xi.transition!==null?(xw===0&&(xw=Jf()),xw):(h=dr,h!==0||(h=window.event,h=h===void 0?16:Ld(h.type)),h)}function nu(h,g,w,T){if(50<Ux)throw Ux=0,uC=null,Error(n(185));Wl(h,w,T),((Mr&2)===0||h!==ba)&&(h===ba&&((Mr&2)===0&&(pw|=w),ea===4&&jh(h,Ia)),el(h,T),w===1&&Mr===0&&(g.mode&1)===0&&(ev=Xr()+500,rm&&K()))}function el(h,g){var w=h.callbackNode;ji(h,g);var T=Xs(h,h===ba?Ia:0);if(T===0)w!==null&&ha(w),h.callbackNode=null,h.callbackPriority=0;else if(g=T&-T,h.callbackPriority!==g){if(w!=null&&ha(w),g===1)h.tag===0?U(T6.bind(null,h)):M(T6.bind(null,h)),B_(function(){(Mr&6)===0&&K()}),w=null;else{switch(wn(T)){case 1:w=Lu;break;case 4:w=Ps;break;case 16:w=Hl;break;case 536870912:w=an;break;default:w=Hl}w=F6(w,k6.bind(null,h))}h.callbackPriority=g,h.callbackNode=w}}function k6(h,g){if(yw=-1,xw=0,(Mr&6)!==0)throw Error(n(327));var w=h.callbackNode;if(tv()&&h.callbackNode!==w)return null;var T=Xs(h,h===ba?Ia:0);if(T===0)return null;if((T&30)!==0||(T&h.expiredLanes)!==0||g)g=bw(h,T);else{g=T;var $=Mr;Mr|=2;var H=P6();(ba!==h||Ia!==g)&&(af=null,ev=Xr()+500,cm(h,g));do try{Xce();break}catch(Ee){O6(h,Ee)}while(!0);Or(),hw.current=H,Mr=$,Fs!==null?g=0:(ba=null,Ia=0,g=ea)}if(g!==0){if(g===2&&($=Lc(h),$!==0&&(T=$,g=dC(h,$))),g===1)throw w=zx,cm(h,0),jh(h,T),el(h,Xr()),w;if(g===6)jh(h,T);else{if($=h.current.alternate,(T&30)===0&&!Gce($)&&(g=bw(h,T),g===2&&(H=Lc(h),H!==0&&(T=H,g=dC(h,H))),g===1))throw w=zx,cm(h,0),jh(h,T),el(h,Xr()),w;switch(h.finishedWork=$,h.finishedLanes=T,g){case 0:case 1:throw Error(n(345));case 2:um(h,Jo,af);break;case 3:if(jh(h,T),(T&130023424)===T&&(g=lC+500-Xr(),10<g)){if(Xs(h,0)!==0)break;if($=h.suspendedLanes,($&T)!==T){_o(),h.pingedLanes|=h.suspendedLanes&$;break}h.timeoutHandle=Tx(um.bind(null,h,Jo,af),g);break}um(h,Jo,af);break;case 4:if(jh(h,T),(T&4194240)===T)break;for(g=h.eventTimes,$=-1;0<T;){var ie=31-Ur(T);H=1<<ie,ie=g[ie],ie>$&&($=ie),T&=~H}if(T=$,T=Xr()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*Kce(T/1960))-T,10<T){h.timeoutHandle=Tx(um.bind(null,h,Jo,af),T);break}um(h,Jo,af);break;case 5:um(h,Jo,af);break;default:throw Error(n(329))}}}return el(h,Xr()),h.callbackNode===w?k6.bind(null,h):null}function dC(h,g){var w=qx;return h.current.memoizedState.isDehydrated&&(cm(h,g).flags|=256),h=bw(h,g),h!==2&&(g=Jo,Jo=w,g!==null&&fC(g)),h}function fC(h){Jo===null?Jo=h:Jo.push.apply(Jo,h)}function Gce(h){for(var g=h;;){if(g.flags&16384){var w=g.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var T=0;T<w.length;T++){var $=w[T],H=$.getSnapshot;$=$.value;try{if(!Fi(H(),$))return!1}catch{return!1}}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function jh(h,g){for(g&=~oC,g&=~pw,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var w=31-Ur(g),T=1<<w;h[w]=-1,g&=~T}}function T6(h){if((Mr&6)!==0)throw Error(n(327));tv();var g=Xs(h,0);if((g&1)===0)return el(h,Xr()),null;var w=bw(h,g);if(h.tag!==0&&w===2){var T=Lc(h);T!==0&&(g=T,w=dC(h,T))}if(w===1)throw w=zx,cm(h,0),jh(h,g),el(h,Xr()),w;if(w===6)throw Error(n(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,um(h,Jo,af),el(h,Xr()),null}function hC(h,g){var w=Mr;Mr|=1;try{return h(g)}finally{Mr=w,Mr===0&&(ev=Xr()+500,rm&&K())}}function lm(h){Nh!==null&&Nh.tag===0&&(Mr&6)===0&&tv();var g=Mr;Mr|=1;var w=ic.transition,T=dr;try{if(ic.transition=null,dr=1,h)return h()}finally{dr=T,ic.transition=w,Mr=g,(Mr&6)===0&&K()}}function pC(){El=Jg.current,$r(Jg)}function cm(h,g){h.finishedWork=null,h.finishedLanes=0;var w=h.timeoutHandle;if(w!==-1&&(h.timeoutHandle=-1,Z1(w)),Fs!==null)for(w=Fs.return;w!==null;){var T=w;switch(ze(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&zg();break;case 3:tc(),$r(Ja),$r(Zs),Ix();break;case 5:Rx(T);break;case 4:tc();break;case 13:$r(ui);break;case 19:$r(ui);break;case 10:xi(T.type._context);break;case 22:case 23:pC()}w=w.return}if(ba=h,Fs=h=Eh(h.current,null),Ia=El=g,ea=0,zx=null,oC=pw=om=0,Jo=qx=null,Zr!==null){for(g=0;g<Zr.length;g++)if(w=Zr[g],T=w.interleaved,T!==null){w.interleaved=null;var $=T.next,H=w.pending;if(H!==null){var ie=H.next;H.next=$,T.next=ie}w.pending=T}Zr=null}return h}function O6(h,g){do{var w=Fs;try{if(Or(),qg.current=ow,vh){for(var T=bi.memoizedState;T!==null;){var $=T.queue;$!==null&&($.pending=null),T=T.next}vh=!1}if(nc=0,es=fs=bi=null,Qc=!1,yh=0,aC.current=null,w===null||w.return===null){ea=1,zx=g,Fs=null;break}e:{var H=h,ie=w.return,Ee=w,Oe=g;if(g=Ia,Ee.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Ge=Oe,yt=Ee,Nt=yt.tag;if((yt.mode&1)===0&&(Nt===0||Nt===11||Nt===15)){var vt=yt.alternate;vt?(yt.updateQueue=vt.updateQueue,yt.memoizedState=vt.memoizedState,yt.lanes=vt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var Kt=n6(ie);if(Kt!==null){Kt.flags&=-257,r6(Kt,ie,Ee,H,g),Kt.mode&1&&t6(H,Ge,g),g=Kt,Oe=Ge;var rn=g.updateQueue;if(rn===null){var ln=new Set;ln.add(Oe),g.updateQueue=ln}else rn.add(Oe);break e}else{if((g&1)===0){t6(H,Ge,g),mC();break e}Oe=Error(n(426))}}else if(ot&&Ee.mode&1){var Cs=n6(ie);if(Cs!==null){(Cs.flags&65536)===0&&(Cs.flags|=256),r6(Cs,ie,Ee,H,g),It(Qg(Oe,Ee));break e}}H=Oe=Qg(Oe,Ee),ea!==4&&(ea=2),qx===null?qx=[H]:qx.push(H),H=ie;do{switch(H.tag){case 3:H.flags|=65536,g&=-g,H.lanes|=g;var $e=J3(H,Oe,g);ei(H,$e);break e;case 1:Ee=Oe;var De=H.type,Ue=H.stateNode;if((H.flags&128)===0&&(typeof De.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(wh===null||!wh.has(Ue)))){H.flags|=65536,g&=-g,H.lanes|=g;var kt=e6(H,Ee,g);ei(H,kt);break e}}H=H.return}while(H!==null)}R6(w)}catch(hn){g=hn,Fs===w&&w!==null&&(Fs=w=w.return);continue}break}while(!0)}function P6(){var h=hw.current;return hw.current=ow,h===null?ow:h}function mC(){(ea===0||ea===3||ea===2)&&(ea=4),ba===null||(om&268435455)===0&&(pw&268435455)===0||jh(ba,Ia)}function bw(h,g){var w=Mr;Mr|=2;var T=P6();(ba!==h||Ia!==g)&&(af=null,cm(h,g));do try{Yce();break}catch($){O6(h,$)}while(!0);if(Or(),Mr=w,hw.current=T,Fs!==null)throw Error(n(261));return ba=null,Ia=0,ea}function Yce(){for(;Fs!==null;)M6(Fs)}function Xce(){for(;Fs!==null&&!Dc();)M6(Fs)}function M6(h){var g=L6(h.alternate,h,El);h.memoizedProps=h.pendingProps,g===null?R6(h):Fs=g,aC.current=null}function R6(h){var g=h;do{var w=g.alternate;if(h=g.return,(g.flags&32768)===0){if(w=qce(w,g,El),w!==null){Fs=w;return}}else{if(w=Uce(w,g),w!==null){w.flags&=32767,Fs=w;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ea=6,Fs=null;return}}if(g=g.sibling,g!==null){Fs=g;return}Fs=g=h}while(g!==null);ea===0&&(ea=5)}function um(h,g,w){var T=dr,$=ic.transition;try{ic.transition=null,dr=1,Qce(h,g,w,T)}finally{ic.transition=$,dr=T}return null}function Qce(h,g,w,T){do tv();while(Nh!==null);if((Mr&6)!==0)throw Error(n(327));w=h.finishedWork;var $=h.finishedLanes;if(w===null)return null;if(h.finishedWork=null,h.finishedLanes=0,w===h.current)throw Error(n(177));h.callbackNode=null,h.callbackPriority=0;var H=w.lanes|w.childLanes;if(Ki(h,H),h===ba&&(Fs=ba=null,Ia=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||gw||(gw=!0,F6(Hl,function(){return tv(),null})),H=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||H){H=ic.transition,ic.transition=null;var ie=dr;dr=1;var Ee=Mr;Mr|=4,aC.current=null,Vce(h,w),j6(w,h),Kp(Jd),nh=!!tm,Jd=tm=null,h.current=w,Wce(w),Qf(),Mr=Ee,dr=ie,ic.transition=H}else h.current=w;if(gw&&(gw=!1,Nh=h,vw=$),H=h.pendingLanes,H===0&&(wh=null),gi(w.stateNode),el(h,Xr()),g!==null)for(T=h.onRecoverableError,w=0;w<g.length;w++)$=g[w],T($.value,{componentStack:$.stack,digest:$.digest});if(mw)throw mw=!1,h=cC,cC=null,h;return(vw&1)!==0&&h.tag!==0&&tv(),H=h.pendingLanes,(H&1)!==0?h===uC?Ux++:(Ux=0,uC=h):Ux=0,K(),null}function tv(){if(Nh!==null){var h=wn(vw),g=ic.transition,w=dr;try{if(ic.transition=null,dr=16>h?16:h,Nh===null)var T=!1;else{if(h=Nh,Nh=null,vw=0,(Mr&6)!==0)throw Error(n(331));var $=Mr;for(Mr|=4,Zt=h.current;Zt!==null;){var H=Zt,ie=H.child;if((Zt.flags&16)!==0){var Ee=H.deletions;if(Ee!==null){for(var Oe=0;Oe<Ee.length;Oe++){var Ge=Ee[Oe];for(Zt=Ge;Zt!==null;){var yt=Zt;switch(yt.tag){case 0:case 11:case 15:$x(8,yt,H)}var Nt=yt.child;if(Nt!==null)Nt.return=yt,Zt=Nt;else for(;Zt!==null;){yt=Zt;var vt=yt.sibling,Kt=yt.return;if(x6(yt),yt===Ge){Zt=null;break}if(vt!==null){vt.return=Kt,Zt=vt;break}Zt=Kt}}}var rn=H.alternate;if(rn!==null){var ln=rn.child;if(ln!==null){rn.child=null;do{var Cs=ln.sibling;ln.sibling=null,ln=Cs}while(ln!==null)}}Zt=H}}if((H.subtreeFlags&2064)!==0&&ie!==null)ie.return=H,Zt=ie;else e:for(;Zt!==null;){if(H=Zt,(H.flags&2048)!==0)switch(H.tag){case 0:case 11:case 15:$x(9,H,H.return)}var $e=H.sibling;if($e!==null){$e.return=H.return,Zt=$e;break e}Zt=H.return}}var De=h.current;for(Zt=De;Zt!==null;){ie=Zt;var Ue=ie.child;if((ie.subtreeFlags&2064)!==0&&Ue!==null)Ue.return=ie,Zt=Ue;else e:for(ie=De;Zt!==null;){if(Ee=Zt,(Ee.flags&2048)!==0)try{switch(Ee.tag){case 0:case 11:case 15:fw(9,Ee)}}catch(hn){hs(Ee,Ee.return,hn)}if(Ee===ie){Zt=null;break e}var kt=Ee.sibling;if(kt!==null){kt.return=Ee.return,Zt=kt;break e}Zt=Ee.return}}if(Mr=$,K(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(Kn,h)}catch{}T=!0}return T}finally{dr=w,ic.transition=g}}return!1}function D6(h,g,w){g=Qg(w,g),g=J3(h,g,1),h=Zi(h,g,1),g=_o(),h!==null&&(Wl(h,1,g),el(h,g))}function hs(h,g,w){if(h.tag===3)D6(h,h,w);else for(;g!==null;){if(g.tag===3){D6(g,h,w);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(wh===null||!wh.has(T))){h=Qg(w,h),h=e6(g,h,1),g=Zi(g,h,1),h=_o(),g!==null&&(Wl(g,1,h),el(g,h));break}}g=g.return}}function Zce(h,g,w){var T=h.pingCache;T!==null&&T.delete(g),g=_o(),h.pingedLanes|=h.suspendedLanes&w,ba===h&&(Ia&w)===w&&(ea===4||ea===3&&(Ia&130023424)===Ia&&500>Xr()-lC?cm(h,0):oC|=w),el(h,g)}function I6(h,g){g===0&&((h.mode&1)===0?g=1:(g=Oa,Oa<<=1,(Oa&130023424)===0&&(Oa=4194304)));var w=_o();h=Jr(h,g),h!==null&&(Wl(h,g,w),el(h,w))}function Jce(h){var g=h.memoizedState,w=0;g!==null&&(w=g.retryLane),I6(h,w)}function eue(h,g){var w=0;switch(h.tag){case 13:var T=h.stateNode,$=h.memoizedState;$!==null&&(w=$.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(g),I6(h,w)}var L6;L6=function(h,g,w){if(h!==null)if(h.memoizedProps!==g.pendingProps||Ja.current)Zo=!0;else{if((h.lanes&w)===0&&(g.flags&128)===0)return Zo=!1,zce(h,g,w);Zo=(h.flags&131072)!==0}else Zo=!1,ot&&(g.flags&1048576)!==0&&Fe(g,ue,g.index);switch(g.lanes=0,g.tag){case 2:var T=g.type;uw(h,g),h=g.pendingProps;var $=mh(g,Zs.current);zi(g,w),$=im(null,g,T,h,$,w);var H=rc();return g.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,eo(T)?(H=!0,nf(g)):H=!1,g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,Js(g),$.updater=lw,g.stateNode=$,$._reactInternals=g,W_(g,T,h,w),g=X_(null,g,T,!0,H,w)):(g.tag=0,ot&&H&&rt(g),Eo(null,g,$,w),g=g.child),g;case 16:T=g.elementType;e:{switch(uw(h,g),h=g.pendingProps,$=T._init,T=$(T._payload),g.type=T,$=g.tag=nue(T),h=Jc(T,h),$){case 0:g=Y_(null,g,T,h,w);break e;case 1:g=c6(null,g,T,h,w);break e;case 11:g=i6(null,g,T,h,w);break e;case 14:g=s6(null,g,T,Jc(T.type,h),w);break e}throw Error(n(306,T,""))}return g;case 0:return T=g.type,$=g.pendingProps,$=g.elementType===T?$:Jc(T,$),Y_(h,g,T,$,w);case 1:return T=g.type,$=g.pendingProps,$=g.elementType===T?$:Jc(T,$),c6(h,g,T,$,w);case 3:e:{if(u6(g),h===null)throw Error(n(387));T=g.pendingProps,H=g.memoizedState,$=H.element,to(h,g),xa(g,T,null,w);var ie=g.memoizedState;if(T=ie.element,H.isDehydrated)if(H={element:T,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},g.updateQueue.baseState=H,g.memoizedState=H,g.flags&256){$=Qg(Error(n(423)),g),g=d6(h,g,T,w,$);break e}else if(T!==$){$=Qg(Error(n(424)),g),g=d6(h,g,T,w,$);break e}else for(tt=Ra(g.stateNode.containerInfo.firstChild),Je=g,ot=!0,ut=null,w=Ci(g,null,T,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Qt(),T===$){g=sf(h,g,w);break e}Eo(h,g,T,w)}g=g.child}return g;case 5:return nw(g),h===null&&nn(g),T=g.type,$=g.pendingProps,H=h!==null?h.memoizedProps:null,ie=$.children,kx(T,$)?ie=null:H!==null&&kx(T,H)&&(g.flags|=32),l6(h,g),Eo(h,g,ie,w),g.child;case 6:return h===null&&nn(g),null;case 13:return f6(h,g,w);case 4:return gh(g,g.stateNode.containerInfo),T=g.pendingProps,h===null?g.child=us(g,null,T,w):Eo(h,g,T,w),g.child;case 11:return T=g.type,$=g.pendingProps,$=g.elementType===T?$:Jc(T,$),i6(h,g,T,$,w);case 7:return Eo(h,g,g.pendingProps,w),g.child;case 8:return Eo(h,g,g.pendingProps.children,w),g.child;case 12:return Eo(h,g,g.pendingProps.children,w),g.child;case 10:e:{if(T=g.type._context,$=g.pendingProps,H=g.memoizedProps,ie=$.value,Vr(Es,T._currentValue),T._currentValue=ie,H!==null)if(Fi(H.value,ie)){if(H.children===$.children&&!Ja.current){g=sf(h,g,w);break e}}else for(H=g.child,H!==null&&(H.return=g);H!==null;){var Ee=H.dependencies;if(Ee!==null){ie=H.child;for(var Oe=Ee.firstContext;Oe!==null;){if(Oe.context===T){if(H.tag===1){Oe=Qi(-1,w&-w),Oe.tag=2;var Ge=H.updateQueue;if(Ge!==null){Ge=Ge.shared;var yt=Ge.pending;yt===null?Oe.next=Oe:(Oe.next=yt.next,yt.next=Oe),Ge.pending=Oe}}H.lanes|=w,Oe=H.alternate,Oe!==null&&(Oe.lanes|=w),Pr(H.return,w,g),Ee.lanes|=w;break}Oe=Oe.next}}else if(H.tag===10)ie=H.type===g.type?null:H.child;else if(H.tag===18){if(ie=H.return,ie===null)throw Error(n(341));ie.lanes|=w,Ee=ie.alternate,Ee!==null&&(Ee.lanes|=w),Pr(ie,w,g),ie=H.sibling}else ie=H.child;if(ie!==null)ie.return=H;else for(ie=H;ie!==null;){if(ie===g){ie=null;break}if(H=ie.sibling,H!==null){H.return=ie.return,ie=H;break}ie=ie.return}H=ie}Eo(h,g,$.children,w),g=g.child}return g;case 9:return $=g.type,T=g.pendingProps.children,zi(g,w),$=qi($),T=T($),g.flags|=1,Eo(h,g,T,w),g.child;case 14:return T=g.type,$=Jc(T,g.pendingProps),$=Jc(T.type,$),s6(h,g,T,$,w);case 15:return a6(h,g,g.type,g.pendingProps,w);case 17:return T=g.type,$=g.pendingProps,$=g.elementType===T?$:Jc(T,$),uw(h,g),g.tag=1,eo(T)?(h=!0,nf(g)):h=!1,zi(g,w),Q3(g,T,$),W_(g,T,$,w),X_(null,g,T,!0,h,w);case 19:return p6(h,g,w);case 22:return o6(h,g,w)}throw Error(n(156,g.tag))};function F6(h,g){return Rc(h,g)}function tue(h,g,w,T){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sc(h,g,w,T){return new tue(h,g,w,T)}function gC(h){return h=h.prototype,!(!h||!h.isReactComponent)}function nue(h){if(typeof h=="function")return gC(h)?1:0;if(h!=null){if(h=h.$$typeof,h===D)return 11;if(h===W)return 14}return 2}function Eh(h,g){var w=h.alternate;return w===null?(w=sc(h.tag,g,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=g,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&14680064,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,g=h.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w}function ww(h,g,w,T,$,H){var ie=2;if(T=h,typeof h=="function")gC(h)&&(ie=1);else if(typeof h=="string")ie=5;else e:switch(h){case O:return dm(w.children,$,H,g);case k:ie=8,$|=8;break;case C:return h=sc(12,w,g,$|2),h.elementType=C,h.lanes=H,h;case L:return h=sc(13,w,g,$),h.elementType=L,h.lanes=H,h;case z:return h=sc(19,w,g,$),h.elementType=z,h.lanes=H,h;case q:return Nw(w,$,H,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case I:ie=10;break e;case R:ie=9;break e;case D:ie=11;break e;case W:ie=14;break e;case X:ie=16,T=null;break e}throw Error(n(130,h==null?h:typeof h,""))}return g=sc(ie,w,g,$),g.elementType=h,g.type=T,g.lanes=H,g}function dm(h,g,w,T){return h=sc(7,h,T,g),h.lanes=w,h}function Nw(h,g,w,T){return h=sc(22,h,T,g),h.elementType=q,h.lanes=w,h.stateNode={isHidden:!1},h}function vC(h,g,w){return h=sc(6,h,null,g),h.lanes=w,h}function yC(h,g,w){return g=sc(4,h.children!==null?h.children:[],h.key,g),g.lanes=w,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function rue(h,g,w,T,$){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=T,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function xC(h,g,w,T,$,H,ie,Ee,Oe){return h=new rue(h,g,w,Ee,Oe),g===1?(g=1,H===!0&&(g|=8)):g=0,H=sc(3,null,null,g),h.current=H,H.stateNode=h,H.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Js(H),h}function iue(h,g,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:T==null?null:""+T,children:h,containerInfo:g,implementation:w}}function B6(h){if(!h)return Yu;h=h._reactInternals;e:{if(Ss(h)!==h||h.tag!==1)throw Error(n(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(eo(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(h.tag===1){var w=h.type;if(eo(w))return Mx(h,w,g)}return g}function $6(h,g,w,T,$,H,ie,Ee,Oe){return h=xC(w,T,!0,h,$,H,ie,Ee,Oe),h.context=B6(null),w=h.current,T=_o(),$=Sh(w),H=Qi(T,$),H.callback=g??null,Zi(w,H,$),h.current.lanes=$,Wl(h,$,T),el(h,T),h}function Sw(h,g,w,T){var $=g.current,H=_o(),ie=Sh($);return w=B6(w),g.context===null?g.context=w:g.pendingContext=w,g=Qi(H,ie),g.payload={element:h},T=T===void 0?null:T,T!==null&&(g.callback=T),h=Zi($,g,ie),h!==null&&(nu(h,$,ie,H),ya(h,$,ie)),ie}function jw(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function z6(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<g?w:g}}function bC(h,g){z6(h,g),(h=h.alternate)&&z6(h,g)}function sue(){return null}var q6=typeof reportError=="function"?reportError:function(h){console.error(h)};function wC(h){this._internalRoot=h}Ew.prototype.render=wC.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(n(409));Sw(h,g,null,null)},Ew.prototype.unmount=wC.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;lm(function(){Sw(null,h,null,null)}),g[ga]=null}};function Ew(h){this._internalRoot=h}Ew.prototype.unstable_scheduleHydration=function(h){if(h){var g=Bc();h={blockedOn:null,target:h,priority:g};for(var w=0;w<as.length&&g!==0&&g<as[w].priority;w++);as.splice(w,0,h),w===0&&Pg(h)}};function NC(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function _w(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function U6(){}function aue(h,g,w,T,$){if($){if(typeof T=="function"){var H=T;T=function(){var Ge=jw(ie);H.call(Ge)}}var ie=$6(g,T,h,0,null,!1,!1,"",U6);return h._reactRootContainer=ie,h[ga]=ie.current,Qd(h.nodeType===8?h.parentNode:h),lm(),ie}for(;$=h.lastChild;)h.removeChild($);if(typeof T=="function"){var Ee=T;T=function(){var Ge=jw(Oe);Ee.call(Ge)}}var Oe=xC(h,0,!1,null,null,!1,!1,"",U6);return h._reactRootContainer=Oe,h[ga]=Oe.current,Qd(h.nodeType===8?h.parentNode:h),lm(function(){Sw(g,Oe,w,T)}),Oe}function Cw(h,g,w,T,$){var H=w._reactRootContainer;if(H){var ie=H;if(typeof $=="function"){var Ee=$;$=function(){var Oe=jw(ie);Ee.call(Oe)}}Sw(g,ie,h,$)}else ie=aue(w,g,h,$,T);return jw(ie)}Fc=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var w=Ka(g.pendingLanes);w!==0&&(Fu(g,w|1),el(g,Xr()),(Mr&6)===0&&(ev=Xr()+500,K()))}break;case 13:lm(function(){var T=Jr(h,1);if(T!==null){var $=_o();nu(T,h,1,$)}}),bC(h,1)}},Ei=function(h){if(h.tag===13){var g=Jr(h,134217728);if(g!==null){var w=_o();nu(g,h,134217728,w)}bC(h,134217728)}},Ar=function(h){if(h.tag===13){var g=Sh(h),w=Jr(h,g);if(w!==null){var T=_o();nu(w,h,g,T)}bC(h,g)}},Bc=function(){return dr},Ga=function(h,g){var w=dr;try{return dr=h,g()}finally{dr=w}},Cr=function(h,g,w){switch(g){case"input":if(dt(h,w),g=w.name,w.type==="radio"&&g!=null){for(w=h;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<w.length;g++){var T=w[g];if(T!==h&&T.form===h.form){var $=nm(T);if(!$)throw Error(n(90));ae(T),dt(T,$)}}}break;case"textarea":Ke(h,w);break;case"select":g=w.value,g!=null&&Se(h,!!w.multiple,g,!1)}},Le=hC,St=lm;var oue={usingClientEntryPoint:!1,Events:[ph,ef,nm,je,se,hC]},Hx={findFiberByHostInstance:Gu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lue={bundleType:Hx.bundleType,version:Hx.version,rendererPackageName:Hx.rendererPackageName,rendererConfig:Hx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=vo(h),h===null?null:h.stateNode},findFiberByHostInstance:Hx.findFiberByHostInstance||sue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aw.isDisabled&&Aw.supportsFiber)try{Kn=Aw.inject(lue),nr=Aw}catch{}}return tl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oue,tl.createPortal=function(h,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NC(g))throw Error(n(200));return iue(h,g,null,w)},tl.createRoot=function(h,g){if(!NC(h))throw Error(n(299));var w=!1,T="",$=q6;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&($=g.onRecoverableError)),g=xC(h,1,!1,null,null,w,!1,T,$),h[ga]=g.current,Qd(h.nodeType===8?h.parentNode:h),new wC(g)},tl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=vo(g),h=h===null?null:h.stateNode,h},tl.flushSync=function(h){return lm(h)},tl.hydrate=function(h,g,w){if(!_w(g))throw Error(n(200));return Cw(null,h,g,!0,w)},tl.hydrateRoot=function(h,g,w){if(!NC(h))throw Error(n(405));var T=w!=null&&w.hydratedSources||null,$=!1,H="",ie=q6;if(w!=null&&(w.unstable_strictMode===!0&&($=!0),w.identifierPrefix!==void 0&&(H=w.identifierPrefix),w.onRecoverableError!==void 0&&(ie=w.onRecoverableError)),g=$6(g,null,h,1,w??null,$,!1,H,ie),h[ga]=g.current,Qd(h),T)for(h=0;h<T.length;h++)w=T[h],$=w._getVersion,$=$(w._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[w,$]:g.mutableSourceEagerHydrationData.push(w,$);return new Ew(g)},tl.render=function(h,g,w){if(!_w(g))throw Error(n(200));return Cw(null,h,g,!1,w)},tl.unmountComponentAtNode=function(h){if(!_w(h))throw Error(n(40));return h._reactRootContainer?(lm(function(){Cw(null,null,h,!1,function(){h._reactRootContainer=null,h[ga]=null})}),!0):!1},tl.unstable_batchedUpdates=hC,tl.unstable_renderSubtreeIntoContainer=function(h,g,w,T){if(!_w(w))throw Error(n(200));if(h==null||h._reactInternals===void 0)throw Error(n(38));return Cw(h,g,w,!1,T)},tl.version="18.3.1-next-f1338f8080-20240426",tl}var Q6;function wK(){if(Q6)return EC.exports;Q6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),EC.exports=gue(),EC.exports}var Z6;function vue(){if(Z6)return Tw;Z6=1;var t=wK();return Tw.createRoot=t.createRoot,Tw.hydrateRoot=t.hydrateRoot,Tw}var yue=vue();function xue(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,o=[],l="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),l+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~r?"?":"")+"\\"+i.substring(s))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var N=m1();const ve=qr(N),$4=uue({__proto__:null,default:ve},[N]);var AC={exports:{}},kC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6;function bue(){if(J6)return kC;J6=1;var t=m1();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(f,p){var m=p(),v=r({inst:{value:m,getSnapshot:p}}),y=v[0].inst,x=v[1];return s(function(){y.value=m,y.getSnapshot=p,c(y)&&x({inst:y})},[f,m,p]),i(function(){return c(y)&&x({inst:y}),f(function(){c(y)&&x({inst:y})})},[f]),o(m),m}function c(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return kC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,kC}var eF;function NK(){return eF||(eF=1,AC.exports=bue()),AC.exports}var Rj=NK();const wue=$4.useInsertionEffect,Nue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SK=Nue?N.useLayoutEffect:N.useEffect,Sue=wue||SK,z4=t=>{const e=N.useRef([t,(...n)=>e[0](...n)]).current;return Sue(()=>{e[0]=t}),e[1]},jue="popstate",q4="pushState",U4="replaceState",Eue="hashchange",tF=[jue,q4,U4,Eue],_ue=t=>{for(const e of tF)addEventListener(e,t);return()=>{for(const e of tF)removeEventListener(e,t)}},jK=(t,e)=>Rj.useSyncExternalStore(_ue,t,e),Cue=()=>location.search,Aue=({ssrSearch:t=""}={})=>jK(Cue,()=>t),nF=()=>location.pathname,kue=({ssrPath:t}={})=>jK(nF,t?()=>t:nF),Tue=(t,{replace:e=!1,state:n=null}={})=>history[e?U4:q4](n,"",t),Oue=(t={})=>[kue(t),Tue],rF=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[rF]>"u"){for(const t of[q4,U4]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,rF,{value:!0})}const Pue=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",EK=(t="")=>t==="/"?"":t,Mue=(t,e)=>t[0]==="~"?t.slice(1):EK(e)+t,Rue=(t="",e)=>Pue(iF(EK(t)),iF(e)),iF=t=>{try{return decodeURI(t)}catch{return t}},_K={hook:Oue,searchHook:Aue,parser:xue,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},CK=N.createContext(_K),gg=()=>N.useContext(CK),AK={},kK=N.createContext(AK),H4=()=>N.useContext(kK),g1=t=>{const[e,n]=t.hook(t);return[Rue(t.base,e),z4((r,i)=>n(Mue(r,t.base),i))]},ca=()=>g1(gg()),V4=(t,e,n,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=s!==!1?Object.fromEntries(s.map((f,p)=>[f,c[p]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[l]:[]]:[!1,null]},Dj=t=>V4(gg().parser,t,ca()[0]),Due=({children:t,...e})=>{const n=gg(),r=e.hook?_K:n;let i=r;const[s,o]=e.ssrPath?.split("?")??[];o&&(e.ssrSearch=o,e.ssrPath=s),e.hrefs=e.hrefs??e.hook?.hrefs;let l=N.useRef({}),c=l.current,u=c;for(let d in r){const f=d==="base"?r[d]+(e[d]||""):e[d]||r[d];c===u&&f!==u[d]&&(l.current=u={...u}),u[d]=f,(f!==r[d]||f!==i[d])&&(i=u)}return N.createElement(CK.Provider,{value:i,children:t})},sF=({children:t,component:e},n)=>e?N.createElement(e,{params:n}):typeof t=="function"?t(n):t,Iue=t=>{let e=N.useRef(AK);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,i])=>i!==n[r])?t:n},rr=({path:t,nest:e,match:n,...r})=>{const i=gg(),[s]=g1(i),[o,l,c]=n??V4(i.parser,t,s,e),u=Iue({...H4(),...l});if(!o)return null;const d=c?N.createElement(Due,{base:c},sF(r,u)):sF(r,u);return N.createElement(kK.Provider,{value:u,children:d})},Cb=N.forwardRef((t,e)=>{const n=gg(),[r,i]=g1(n),{to:s="",href:o=s,onClick:l,asChild:c,children:u,className:d,replace:f,state:p,...m}=t,v=z4(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(l?.(x),x.defaultPrevented||(x.preventDefault(),i(o,t)))}),y=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&N.isValidElement(u)?N.cloneElement(u,{onClick:v,href:y}):N.createElement("a",{...m,onClick:v,href:y,className:d?.call?d(r===o):d,children:u,ref:e})}),TK=t=>Array.isArray(t)?t.flatMap(e=>TK(e&&e.type===N.Fragment?e.props.children:e)):[t],gP=({children:t,location:e})=>{const n=gg(),[r]=g1(n);for(const i of TK(t)){let s=0;if(N.isValidElement(i)&&(s=V4(n.parser,i.props.path,e||r,i.props.nest))[0])return N.cloneElement(i,{match:s})}return null},Wx=t=>{const{to:e,href:n=e}=t,r=gg(),[,i]=g1(r),s=z4(()=>i(e||n,t)),{ssrContext:o}=r;return SK(()=>{s()},[]),o&&(o.redirectTo=e),null};var Gy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lue={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Fue=class{#e=Lue;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Nm=new Fue;function Bue(t){setTimeout(t,0)}var Hm=typeof window>"u"||"Deno"in globalThis;function ko(){}function $ue(t,e){return typeof t=="function"?t(e):t}function vP(t){return typeof t=="number"&&t>=0&&t!==1/0}function OK(t,e){return Math.max(t+(e||0)-Date.now(),0)}function np(t,e){return typeof t=="function"?t(e):t}function hc(t,e){return typeof t=="function"?t(e):t}function aF(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==W4(o,e.options))return!1}else if(!n0(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function oF(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Vm(e.options.mutationKey)!==Vm(s))return!1}else if(!n0(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function W4(t,e){return(e?.queryKeyHashFn||Vm)(t)}function Vm(t){return JSON.stringify(t,(e,n)=>yP(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function n0(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>n0(t[n],e[n])):!1}var zue=Object.prototype.hasOwnProperty;function PK(t,e){if(t===e)return t;const n=lF(t)&&lF(e);if(!n&&!(yP(t)&&yP(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:s[u],f=t[d],p=e[d];if(f===p){l[d]=f,(n?u<i:zue.call(t,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[d]=p;continue}const m=PK(f,p);l[d]=m,m===f&&c++}return i===o&&c===i?t:l}function aN(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function lF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function yP(t){if(!cF(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!cF(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function cF(t){return Object.prototype.toString.call(t)==="[object Object]"}function que(t){return new Promise(e=>{Nm.setTimeout(e,t)})}function xP(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?PK(t,e):e}function Uue(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Hue(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K4=Symbol();function MK(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===K4?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function RK(t,e){return typeof t=="function"?t(...e):!!t}var Vue=class extends Gy{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Hm&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},G4=new Vue;function bP(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Wue=Bue;function Kue(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=Wue;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var sa=Kue(),Gue=class extends Gy{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Hm&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},oN=new Gue;function Yue(t){return Math.min(1e3*2**t,3e4)}function DK(t){return(t??"online")==="online"?oN.isOnline():!0}var wP=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function IK(t){let e=!1,n=0,r;const i=bP(),s=()=>i.status!=="pending",o=y=>{if(!s()){const x=new wP(y);p(x),t.onCancel?.(x)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>G4.isFocused()&&(t.networkMode==="always"||oN.isOnline())&&t.canRun(),d=()=>DK(t.networkMode)&&t.canRun(),f=y=>{s()||(r?.(),i.resolve(y))},p=y=>{s()||(r?.(),i.reject(y))},m=()=>new Promise(y=>{r=x=>{(s()||u())&&y(x)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),v=()=>{if(s())return;let y;const x=n===0?t.initialPromise:void 0;try{y=x??t.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(f).catch(b=>{if(s())return;const S=t.retry??(Hm?0:3),j=t.retryDelay??Yue,E=typeof j=="function"?j(n,b):j,A=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,b);if(e||!A){p(b);return}n++,t.onFail?.(n,b),que(E).then(()=>u()?void 0:m()).then(()=>{e?p(b):v()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),i)}}var LK=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vP(this.gcTime)&&(this.#e=Nm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Hm?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Nm.clearTimeout(this.#e),this.#e=void 0)}},Xue=class extends LK{#e;#t;#n;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=uF(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=uF(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=xP(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(ko).catch(ko):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>hc(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>np(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!OK(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const l=MK(this.options,e),u=(()=>{const d={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=IK({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof wP&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof wP){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...FK(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),sa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function FK(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DK(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function uF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Que=class extends Gy{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=bP(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#a;#o;#s;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),dF(this.#t,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return NP(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return NP(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),e._defaulted&&!aN(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&fF(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||hc(this.options.enabled,this.#t)!==hc(e.enabled,this.#t)||np(this.options.staleTime,this.#t)!==np(e.staleTime,this.#t))&&this.#g();const i=this.#v();r&&(this.#t!==n||hc(this.options.enabled,this.#t)!==hc(e.enabled,this.#t)||i!==this.#l)&&this.#y(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return Jue(this,n)&&(this.#i=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#N();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(ko)),e}#g(){this.#b();const t=np(this.options.staleTime,this.#t);if(Hm||this.#i.isStale||!vP(t))return;const n=OK(this.#i.dataUpdatedAt,t)+1;this.#c=Nm.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#w(),this.#l=t,!(Hm||hc(this.options.enabled,this.#t)===!1||!vP(this.#l)||this.#l===0)&&(this.#u=Nm.setInterval(()=>{(this.options.refetchIntervalInBackground||G4.isFocused())&&this.#d()},this.#l))}#x(){this.#g(),this.#y(this.#v())}#b(){this.#c&&(Nm.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(Nm.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#i,s=this.#r,o=this.#a,c=t!==n?t.state:this.#n,{state:u}=t;let d={...u},f=!1,p;if(e._optimisticResults){const k=this.hasListeners(),C=!k&&dF(t,e),I=k&&fF(t,n,e,r);(C||I)&&(d={...d,...FK(u.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:y}=d;p=d.data;let x=!1;if(e.placeholderData!==void 0&&p===void 0&&y==="pending"){let k;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(k=i.data,x=!0):k=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,k!==void 0&&(y="success",p=xP(i?.data,k,e),f=!0)}if(e.select&&p!==void 0&&!x)if(i&&p===s?.data&&e.select===this.#m)p=this.#f;else try{this.#m=e.select,p=e.select(p),p=xP(i?.data,p,e),this.#f=p,this.#s=null}catch(k){this.#s=k}this.#s&&(m=this.#s,p=this.#f,v=Date.now(),y="error");const b=d.fetchStatus==="fetching",S=y==="pending",j=y==="error",E=S&&b,A=p!==void 0,O={status:y,fetchStatus:d.fetchStatus,isPending:S,isSuccess:y==="success",isError:j,isInitialLoading:E,isLoading:E,data:p,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!S,isLoadingError:j&&!A,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&A,isStale:Y4(t,e),refetch:this.refetch,promise:this.#o,isEnabled:hc(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const k=R=>{O.status==="error"?R.reject(O.error):O.data!==void 0&&R.resolve(O.data)},C=()=>{const R=this.#o=O.promise=bP();k(R)},I=this.#o;switch(I.status){case"pending":t.queryHash===n.queryHash&&k(I);break;case"fulfilled":(O.status==="error"||O.data!==I.value)&&C();break;case"rejected":(O.status!=="error"||O.error!==I.reason)&&C();break}}return O}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#h=this.#t),aN(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#i).some(o=>{const l=o;return this.#i[l]!==t[l]&&s.has(l)})};this.#S({listeners:n()})}#N(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(t){sa.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Zue(t,e){return hc(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function dF(t,e){return Zue(t,e)||t.state.data!==void 0&&NP(t,e,e.refetchOnMount)}function NP(t,e,n){if(hc(e.enabled,t)!==!1&&np(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Y4(t,e)}return!1}function fF(t,e,n,r){return(t!==e||hc(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Y4(t,n)}function Y4(t,e){return hc(e.enabled,t)!==!1&&t.isStaleByTime(np(e.staleTime,t))}function Jue(t,e){return!aN(t.getCurrentResult(),e)}function hF(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let d=!1;const f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},p=MK(e.options,e.fetchOptions),m=async(v,y,x)=>{if(d)return Promise.reject();if(y==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:y,direction:x?"backward":"forward",meta:e.options.meta};return f(P),P})(),j=await p(S),{maxPages:E}=e.options,A=x?Hue:Uue;return{pages:A(v.pages,j,E),pageParams:A(v.pageParams,y,E)}};if(i&&s.length){const v=i==="backward",y=v?ede:pF,x={pages:s,pageParams:o},b=y(r,x);l=await m(x,b,v)}else{const v=t??s.length;do{const y=c===0?o[0]??r.initialPageParam:pF(r,l);if(c>0&&y==null)break;l=await m(l,y),c++}while(c<v)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=u}}}function pF(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function ede(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var tde=class extends LK{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||BK(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=IK({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#r({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#i.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const o=await this.options.onMutate?.(t,n);o!==this.state.context&&this.#r({type:"pending",context:o,variables:t,isPaused:i})}const s=await this.#i.start();return await this.#n.config.onSuccess?.(s,t,this.state.context,this,n),await this.options.onSuccess?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(s,null,t,this.state.context,n),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#n.config.onError?.(s,t,this.state.context,this,n),await this.options.onError?.(s,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,s,t,this.state.context,n),s}finally{this.#r({type:"error",error:s})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),sa.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function BK(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nde=class extends Gy{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new tde({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Ow(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Ow(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Ow(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Ow(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){sa.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>oF(e,n))}findAll(t={}){return this.getAll().filter(e=>oF(t,e))}notify(t){sa.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return sa.batch(()=>Promise.all(t.map(e=>e.continue().catch(ko))))}};function Ow(t){return t.options.scope?.id}var rde=class extends Gy{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),aN(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Vm(n.mutationKey)!==Vm(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??BK();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){sa.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,n,r,i),this.#i.onSettled?.(e.data,null,n,r,i)):e?.type==="error"&&(this.#i.onError?.(e.error,n,r,i),this.#i.onSettled?.(void 0,e.error,n,r,i))}this.listeners.forEach(n=>{n(this.#t)})})}},ide=class extends Gy{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??W4(r,e);let s=this.get(i);return s||(s=new Xue({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>aF(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>aF(t,n)):e}notify(t){sa.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){sa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sde=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new ide,this.#t=t.mutationCache||new nde,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=G4.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=oN.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(np(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=$ue(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return sa.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;sa.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return sa.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=sa.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ko).catch(ko)}invalidateQueries(t,e={}){return sa.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=sa.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ko)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ko)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(np(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ko).catch(ko)}fetchInfiniteQuery(t){return t.behavior=hF(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ko).catch(ko)}ensureInfiniteQueryData(t){return t.behavior=hF(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oN.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(Vm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{n0(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(Vm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{n0(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=W4(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===K4&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},$K=N.createContext(void 0),mo=t=>{const e=N.useContext($K);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ade=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx($K.Provider,{value:t,children:e})),zK=N.createContext(!1),ode=()=>N.useContext(zK);zK.Provider;function lde(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var cde=N.createContext(lde()),ude=()=>N.useContext(cde),dde=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},fde=t=>{N.useEffect(()=>{t.clearReset()},[t])},hde=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||RK(n,[t.error,r])),pde=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},mde=(t,e)=>t.isLoading&&t.isFetching&&!e,gde=(t,e)=>t?.suspense&&e.isPending,mF=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function vde(t,e,n){const r=ode(),i=ude(),s=mo(),o=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",pde(o),dde(o,i),fde(i);const l=!s.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new e(s,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(f=>{const p=d?c.subscribe(sa.batchCalls(f)):ko;return c.updateResult(),p},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),gde(o,u))throw mF(o,c,i);if(hde({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Hm&&mde(u,r)&&(l?mF(o,c,i):s.getQueryCache().get(o.queryHash)?.promise)?.catch(ko).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?u:c.trackResult(u)}function Wt(t,e){return vde(t,Que)}function $t(t,e){const n=mo(),[r]=N.useState(()=>new rde(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const i=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(sa.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=N.useCallback((o,l)=>{r.mutate(o,l).catch(ko)},[r]);if(i.error&&RK(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function qK(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Rt(t,e,n,r){const i=localStorage.getItem("token"),s={};n&&(s["Content-Type"]="application/json"),i&&(s.Authorization=`Bearer ${i}`);const o=new AbortController;try{const l=await fetch(e,{method:t,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include",signal:o.signal});await qK(l);const c=l.headers.get("content-type")||"";return l.status===204||!c.includes("application/json")?{}:l.json()}catch(l){throw l.name==="AbortError"?new Error(`La peticin tard ms de ${0/1e3}s y fue cancelada`):l}finally{}}const UK=({on401:t})=>async({queryKey:e})=>{const n=localStorage.getItem("token"),r={};n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(e.join("/"),{headers:r,credentials:"include"});return t==="returnNull"&&i.status===401?null:(await qK(i),await i.json())},cn=new sde({defaultOptions:{queries:{queryFn:UK({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),yde=1,xde=1e6;let TC=0;function bde(){return TC=(TC+1)%Number.MAX_SAFE_INTEGER,TC.toString()}const OC=new Map,gF=t=>{if(OC.has(t))return;const e=setTimeout(()=>{OC.delete(t),Ab({type:"REMOVE_TOAST",toastId:t})},xde);OC.set(t,e)},wde=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,yde)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?gF(n):t.toasts.forEach(r=>{gF(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},M2=[];let R2={toasts:[]};function Ab(t){R2=wde(R2,t),M2.forEach(e=>{e(R2)})}function Er({...t}){const e=bde(),n=i=>Ab({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Ab({type:"DISMISS_TOAST",toastId:e});return Ab({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Dr(){const[t,e]=N.useState(R2);return N.useEffect(()=>(M2.push(e),()=>{const n=M2.indexOf(e);n>-1&&M2.splice(n,1)}),[t]),{...t,toast:Er,dismiss:n=>Ab({type:"DISMISS_TOAST",toastId:n})}}var hu=wK();const HK=qr(hu);function bt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function vF(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function If(...t){return e=>{let n=!1;const r=t.map(i=>{const s=vF(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():vF(t[i],null)}}}}function _n(...t){return N.useCallback(If(...t),t)}function Nde(t,e){const n=N.createContext(e),r=s=>{const{children:o,...l}=s,c=N.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Gs(t,e=[]){let n=[];function r(s,o){const l=N.createContext(o),c=n.length;n=[...n,o];const u=f=>{const{scope:p,children:m,...v}=f,y=p?.[t]?.[c]||l,x=N.useMemo(()=>v,Object.values(v));return a.jsx(y.Provider,{value:x,children:m})};u.displayName=s+"Provider";function d(f,p){const m=p?.[t]?.[c]||l,v=N.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>N.createContext(o));return function(l){const c=l?.[t]||s;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,Sde(i,...e)]}function Sde(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function hp(t){const e=jde(t),n=N.forwardRef((r,i)=>{const{children:s,...o}=r,l=N.Children.toArray(s),c=l.find(Ede);if(c){const u=c.props.children,d=l.map(f=>f===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:i,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Ij=hp("Slot");function jde(t){const e=N.forwardRef((n,r)=>{const{children:i,...s}=n;if(N.isValidElement(i)){const o=Cde(i),l=_de(s,i.props);return i.type!==N.Fragment&&(l.ref=r?If(r,o):o),N.cloneElement(i,l)}return N.Children.count(i)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var VK=Symbol("radix.slottable");function WK(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=VK,e}function Ede(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===VK}function _de(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{const c=s(...l);return i(...l),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Cde(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Yy(t){const e=t+"CollectionProvider",[n,r]=Gs(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:x,children:b}=y,S=ve.useRef(null),j=ve.useRef(new Map).current;return a.jsx(i,{scope:x,itemMap:j,collectionRef:S,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=hp(l),u=ve.forwardRef((y,x)=>{const{scope:b,children:S}=y,j=s(l,b),E=_n(x,j.collectionRef);return a.jsx(c,{ref:E,children:S})});u.displayName=l;const d=t+"CollectionItemSlot",f="data-radix-collection-item",p=hp(d),m=ve.forwardRef((y,x)=>{const{scope:b,children:S,...j}=y,E=ve.useRef(null),A=_n(x,E),P=s(d,b);return ve.useEffect(()=>(P.itemMap.set(E,{ref:E,...j}),()=>void P.itemMap.delete(E))),a.jsx(p,{[f]:"",ref:A,children:S})});m.displayName=d;function v(y){const x=s(t+"CollectionConsumer",y);return ve.useCallback(()=>{const S=x.collectionRef.current;if(!S)return[];const j=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((P,O)=>j.indexOf(P.ref.current)-j.indexOf(O.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var Ade=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lt=Ade.reduce((t,e)=>{const n=hp(`Primitive.${e}`),r=N.forwardRef((i,s)=>{const{asChild:o,...l}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function X4(t,e){t&&hu.flushSync(()=>t.dispatchEvent(e))}function bs(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>e.current?.(...n),[])}function kde(t,e=globalThis?.document){const n=bs(t);N.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Tde="DismissableLayer",SP="dismissableLayer.update",Ode="dismissableLayer.pointerDownOutside",Pde="dismissableLayer.focusOutside",yF,KK=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vg=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(KK),[d,f]=N.useState(null),p=d?.ownerDocument??globalThis?.document,[,m]=N.useState({}),v=_n(e,O=>f(O)),y=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(x),S=d?y.indexOf(d):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,E=S>=b,A=Rde(O=>{const k=O.target,C=[...u.branches].some(I=>I.contains(k));!E||C||(i?.(O),o?.(O),O.defaultPrevented||l?.())},p),P=Dde(O=>{const k=O.target;[...u.branches].some(I=>I.contains(k))||(s?.(O),o?.(O),O.defaultPrevented||l?.())},p);return kde(O=>{S===u.layers.size-1&&(r?.(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},p),N.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(yF=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xF(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=yF)}},[d,p,n,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xF())},[d,u]),N.useEffect(()=>{const O=()=>m({});return document.addEventListener(SP,O),()=>document.removeEventListener(SP,O)},[]),a.jsx(Lt.div,{...c,ref:v,style:{pointerEvents:j?E?"auto":"none":void 0,...t.style},onFocusCapture:bt(t.onFocusCapture,P.onFocusCapture),onBlurCapture:bt(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:bt(t.onPointerDownCapture,A.onPointerDownCapture)})});vg.displayName=Tde;var Mde="DismissableLayerBranch",GK=N.forwardRef((t,e)=>{const n=N.useContext(KK),r=N.useRef(null),i=_n(e,r);return N.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),a.jsx(Lt.div,{...t,ref:i})});GK.displayName=Mde;function Rde(t,e=globalThis?.document){const n=bs(t),r=N.useRef(!1),i=N.useRef(()=>{});return N.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){YK(Ode,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Dde(t,e=globalThis?.document){const n=bs(t),r=N.useRef(!1);return N.useEffect(()=>{const i=s=>{s.target&&!r.current&&YK(Pde,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xF(){const t=new CustomEvent(SP);document.dispatchEvent(t)}function YK(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?X4(i,s):i.dispatchEvent(s)}var Ide=vg,Lde=GK,ws=globalThis?.document?N.useLayoutEffect:()=>{},Fde="Portal",Xy=N.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=N.useState(!1);ws(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?HK.createPortal(a.jsx(Lt.div,{...r,ref:e}),o):null});Xy.displayName=Fde;function Bde(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var ua=t=>{const{present:e,children:n}=t,r=$de(e),i=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),s=_n(r.ref,zde(i));return typeof n=="function"||r.isPresent?N.cloneElement(i,{ref:s}):null};ua.displayName="Presence";function $de(t){const[e,n]=N.useState(),r=N.useRef(null),i=N.useRef(t),s=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Bde(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Pw(r.current);s.current=l==="mounted"?u:"none"},[l]),ws(()=>{const u=r.current,d=i.current;if(d!==t){const p=s.current,m=Pw(u);t?c("MOUNT"):m==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),ws(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const y=Pw(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&y&&(c("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=m=>{m.target===e&&(s.current=Pw(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Pw(t){return t?.animationName||"none"}function zde(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var qde=$4[" useInsertionEffect ".trim().toString()]||ws;function Ro({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=Ude({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:i;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=N.useCallback(d=>{if(l){const f=Hde(d)?d(t):d;f!==t&&o.current?.(f)}else s(d)},[l,t,s,o]);return[c,u]}function Ude({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),i=N.useRef(n),s=N.useRef(e);return qde(()=>{s.current=e},[e]),N.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function Hde(t){return typeof t=="function"}var XK=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Vde="VisuallyHidden",Lj=N.forwardRef((t,e)=>a.jsx(Lt.span,{...t,ref:e,style:{...XK,...t.style}}));Lj.displayName=Vde;var Wde=Lj,Q4="ToastProvider",[Z4,Kde,Gde]=Yy("Toast"),[QK]=Gs("Toast",[Gde]),[Yde,Fj]=QK(Q4),ZK=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[l,c]=N.useState(null),[u,d]=N.useState(0),f=N.useRef(!1),p=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Q4}\`. Expected non-empty \`string\`.`),a.jsx(Z4.Provider,{scope:e,children:a.jsx(Yde,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};ZK.displayName=Q4;var JK="ToastViewport",Xde=["F8"],jP="toast.viewportPause",EP="toast.viewportResume",eG=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Xde,label:i="Notifications ({hotkey})",...s}=t,o=Fj(JK,n),l=Kde(n),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),f=N.useRef(null),p=_n(e,f,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;N.useEffect(()=>{const x=b=>{r.length!==0&&r.every(j=>b[j]||b.code===j)&&f.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),N.useEffect(()=>{const x=c.current,b=f.current;if(v&&x&&b){const S=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(jP);b.dispatchEvent(P),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(EP);b.dispatchEvent(P),o.isClosePausedRef.current=!1}},E=P=>{!x.contains(P.relatedTarget)&&j()},A=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",S),x.addEventListener("focusout",E),x.addEventListener("pointermove",S),x.addEventListener("pointerleave",A),window.addEventListener("blur",S),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",S),x.removeEventListener("focusout",E),x.removeEventListener("pointermove",S),x.removeEventListener("pointerleave",A),window.removeEventListener("blur",S),window.removeEventListener("focus",j)}}},[v,o.isClosePausedRef]);const y=N.useCallback(({tabbingDirection:x})=>{const S=l().map(j=>{const E=j.ref.current,A=[E,...cfe(E)];return x==="forwards"?A:A.reverse()});return(x==="forwards"?S.reverse():S).flat()},[l]);return N.useEffect(()=>{const x=f.current;if(x){const b=S=>{const j=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!j){const A=document.activeElement,P=S.shiftKey;if(S.target===x&&P){u.current?.focus();return}const C=y({tabbingDirection:P?"backwards":"forwards"}),I=C.findIndex(R=>R===A);PC(C.slice(I+1))?S.preventDefault():P?u.current?.focus():d.current?.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[l,y]),a.jsxs(Lde,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&a.jsx(_P,{ref:u,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"forwards"});PC(x)}}),a.jsx(Z4.Slot,{scope:n,children:a.jsx(Lt.ol,{tabIndex:-1,...s,ref:p})}),v&&a.jsx(_P,{ref:d,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"backwards"});PC(x)}})]})});eG.displayName=JK;var tG="ToastFocusProxy",_P=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Fj(tG,n);return a.jsx(Lj,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!s.viewport?.contains(l)&&r()}})});_P.displayName=tG;var v1="Toast",Qde="toast.swipeStart",Zde="toast.swipeMove",Jde="toast.swipeCancel",efe="toast.swipeEnd",nG=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[l,c]=Ro({prop:r,defaultProp:i??!0,onChange:s,caller:v1});return a.jsx(ua,{present:n||l,children:a.jsx(rfe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:bs(t.onPause),onResume:bs(t.onResume),onSwipeStart:bt(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:bt(t.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:bt(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:bt(t.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});nG.displayName=v1;var[tfe,nfe]=QK(v1,{onClose(){}}),rfe=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...v}=t,y=Fj(v1,n),[x,b]=N.useState(null),S=_n(e,z=>b(z)),j=N.useRef(null),E=N.useRef(null),A=i||y.duration,P=N.useRef(0),O=N.useRef(A),k=N.useRef(0),{onToastAdd:C,onToastRemove:I}=y,R=bs(()=>{x?.contains(document.activeElement)&&y.viewport?.focus(),o()}),D=N.useCallback(z=>{!z||z===1/0||(window.clearTimeout(k.current),P.current=new Date().getTime(),k.current=window.setTimeout(R,z))},[R]);N.useEffect(()=>{const z=y.viewport;if(z){const W=()=>{D(O.current),u?.()},X=()=>{const q=new Date().getTime()-P.current;O.current=O.current-q,window.clearTimeout(k.current),c?.()};return z.addEventListener(jP,X),z.addEventListener(EP,W),()=>{z.removeEventListener(jP,X),z.removeEventListener(EP,W)}}},[y.viewport,A,c,u,D]),N.useEffect(()=>{s&&!y.isClosePausedRef.current&&D(A)},[s,A,y.isClosePausedRef,D]),N.useEffect(()=>(C(),()=>I()),[C,I]);const L=N.useMemo(()=>x?cG(x):null,[x]);return y.viewport?a.jsxs(a.Fragment,{children:[L&&a.jsx(ife,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:L}),a.jsx(tfe,{scope:n,onClose:R,children:hu.createPortal(a.jsx(Z4.ItemSlot,{scope:n,children:a.jsx(Ide,{asChild:!0,onEscapeKeyDown:bt(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||R(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Lt.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:bt(t.onKeyDown,z=>{z.key==="Escape"&&(l?.(z.nativeEvent),z.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:bt(t.onPointerDown,z=>{z.button===0&&(j.current={x:z.clientX,y:z.clientY})}),onPointerMove:bt(t.onPointerMove,z=>{if(!j.current)return;const W=z.clientX-j.current.x,X=z.clientY-j.current.y,q=!!E.current,V=["left","right"].includes(y.swipeDirection),Y=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,re=V?Y(0,W):0,Q=V?0:Y(0,X),F=z.pointerType==="touch"?10:2,G={x:re,y:Q},te={originalEvent:z,delta:G};q?(E.current=G,Mw(Zde,f,te,{discrete:!1})):bF(G,y.swipeDirection,F)?(E.current=G,Mw(Qde,d,te,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(W)>F||Math.abs(X)>F)&&(j.current=null)}),onPointerUp:bt(t.onPointerUp,z=>{const W=E.current,X=z.target;if(X.hasPointerCapture(z.pointerId)&&X.releasePointerCapture(z.pointerId),E.current=null,j.current=null,W){const q=z.currentTarget,V={originalEvent:z,delta:W};bF(W,y.swipeDirection,y.swipeThreshold)?Mw(efe,m,V,{discrete:!0}):Mw(Jde,p,V,{discrete:!0}),q.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),ife=t=>{const{__scopeToast:e,children:n,...r}=t,i=Fj(v1,e),[s,o]=N.useState(!1),[l,c]=N.useState(!1);return ofe(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Xy,{asChild:!0,children:a.jsx(Lj,{...r,children:s&&a.jsxs(a.Fragment,{children:[i.label," ",n]})})})},sfe="ToastTitle",rG=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Lt.div,{...r,ref:e})});rG.displayName=sfe;var afe="ToastDescription",iG=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Lt.div,{...r,ref:e})});iG.displayName=afe;var sG="ToastAction",aG=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(lG,{altText:n,asChild:!0,children:a.jsx(J4,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${sG}\`. Expected non-empty \`string\`.`),null)});aG.displayName=sG;var oG="ToastClose",J4=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=nfe(oG,n);return a.jsx(lG,{asChild:!0,children:a.jsx(Lt.button,{type:"button",...r,ref:e,onClick:bt(t.onClick,i.onClose)})})});J4.displayName=oG;var lG=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return a.jsx(Lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function cG(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),lfe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...cG(r))}}),e}function Mw(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?X4(i,s):i.dispatchEvent(s)}var bF=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function ofe(t=()=>{}){const e=bs(t);ws(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function lfe(t){return t.nodeType===t.ELEMENT_NODE}function cfe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function PC(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var ufe=ZK,uG=eG,dG=nG,fG=rG,hG=iG,pG=aG,mG=J4;function gG(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gG(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mr(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gG(t))&&(r&&(r+=" "),r+=e);return r}const wF=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,NF=mr,yg=(t,e)=>n=>{var r;if(e?.variants==null)return NF(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n?.[u],f=s?.[u];if(d===null)return null;const p=wF(d)||wF(f);return i[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...s,...l}[y]):{...s,...l}[y]===x})?[...u,f,p]:u},[]);return NF(t,o,c,n?.class,n?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vG=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ffe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hfe=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...ffe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:vG("lucide",i),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(t,e)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(hfe,{ref:s,iconNode:e,className:vG(`lucide-${dfe(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=st("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=st("AlarmClock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=st("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=st("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=st("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=st("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=st("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=st("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mfe=st("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=st("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=st("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=st("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=st("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=st("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=st("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=st("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=st("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=st("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=st("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=st("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=st("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=st("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=st("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wfe=st("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=st("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=st("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=st("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=st("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=st("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=st("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=st("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=st("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=st("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=st("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=st("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=st("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=st("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=st("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=st("FileKey",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["circle",{cx:"10",cy:"16",r:"2",key:"4ckbqe"}],["path",{d:"m16 10-4.5 4.5",key:"7p3ebg"}],["path",{d:"m15 11 1 1",key:"1bsyx3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=st("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=st("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=st("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=st("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=st("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=st("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=st("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=st("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=st("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=st("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=st("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=st("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=st("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=st("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=st("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=st("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=st("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=st("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=st("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=st("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=st("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=st("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=st("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=st("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=st("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=st("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=st("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=st("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=st("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=st("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=st("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=st("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=st("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=st("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=st("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=st("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=st("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=st("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=st("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=st("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=st("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=st("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=st("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=st("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=st("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=st("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=st("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=st("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=st("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=st("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=st("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=st("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=st("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=st("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=st("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=st("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=st("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=st("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=st("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=st("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=st("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=st("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=st("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=st("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=st("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=st("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=st("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=st("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=st("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=st("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=st("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rhe=st("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=st("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=st("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=st("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uD="-",ohe=t=>{const e=che(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(uD);return l[0]===""&&l.length!==1&&l.shift(),qG(l,e)||lhe(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},qG=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?qG(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(uD);return e.validators.find(({validator:o})=>o(s))?.classGroupId},AF=/^\[(.+)\]$/,lhe=t=>{if(AF.test(t)){const e=AF.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},che=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dhe(Object.entries(t.classGroups),n).forEach(([s,o])=>{TP(o,r,s,e)}),r},TP=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:kF(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(uhe(i)){TP(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{TP(o,kF(e,s),n,r)})})},kF=(t,e)=>{let n=t;return e.split(uD).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uhe=t=>t.isThemeGetter,dhe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,fhe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},UG="!",hhe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let x=0;x<l.length;x++){let b=l[x];if(u===0){if(b===i&&(r||l.slice(x,x+s)===e)){c.push(l.slice(d,x)),d=x+s;continue}if(b==="/"){f=x;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(d),m=p.startsWith(UG),v=m?p.substring(1):p,y=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},phe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mhe=t=>({cache:fhe(t.cacheSize),parseClassName:hhe(t),...ohe(t)}),ghe=/\s+/,vhe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(ghe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=n(u);let v=!!m,y=r(v?p.substring(0,m):p);if(!y){if(!v){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}v=!1}const x=phe(d).join(":"),b=f?x+UG:x,S=b+y;if(s.includes(S))continue;s.push(S);const j=i(y,v);for(let E=0;E<j.length;++E){const A=j[E];s.push(b+A)}l=u+(l.length>0?" "+l:l)}return l};function yhe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=HG(e))&&(r&&(r+=" "),r+=n);return r}const HG=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=HG(t[r]))&&(n&&(n+=" "),n+=e);return n};function xhe(t,...e){let n,r,i,s=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return n=mhe(u),r=n.cache.get,i=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=vhe(c,n);return i(c,d),d}return function(){return s(yhe.apply(null,arguments))}}const Ai=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},VG=/^\[(?:([a-z-]+):)?(.+)\]$/i,bhe=/^\d+\/\d+$/,whe=new Set(["px","full","screen"]),Nhe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,She=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jhe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ehe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_he=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,of=t=>qv(t)||whe.has(t)||bhe.test(t),Ch=t=>Zy(t,"length",Rhe),qv=t=>!!t&&!Number.isNaN(Number(t)),RC=t=>Zy(t,"number",qv),Kx=t=>!!t&&Number.isInteger(Number(t)),Che=t=>t.endsWith("%")&&qv(t.slice(0,-1)),ar=t=>VG.test(t),Ah=t=>Nhe.test(t),Ahe=new Set(["length","size","percentage"]),khe=t=>Zy(t,Ahe,WG),The=t=>Zy(t,"position",WG),Ohe=new Set(["image","url"]),Phe=t=>Zy(t,Ohe,Ihe),Mhe=t=>Zy(t,"",Dhe),Gx=()=>!0,Zy=(t,e,n)=>{const r=VG.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Rhe=t=>She.test(t)&&!jhe.test(t),WG=()=>!1,Dhe=t=>Ehe.test(t),Ihe=t=>_he.test(t),Lhe=()=>{const t=Ai("colors"),e=Ai("spacing"),n=Ai("blur"),r=Ai("brightness"),i=Ai("borderColor"),s=Ai("borderRadius"),o=Ai("borderSpacing"),l=Ai("borderWidth"),c=Ai("contrast"),u=Ai("grayscale"),d=Ai("hueRotate"),f=Ai("invert"),p=Ai("gap"),m=Ai("gradientColorStops"),v=Ai("gradientColorStopPositions"),y=Ai("inset"),x=Ai("margin"),b=Ai("opacity"),S=Ai("padding"),j=Ai("saturate"),E=Ai("scale"),A=Ai("sepia"),P=Ai("skew"),O=Ai("space"),k=Ai("translate"),C=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",ar,e],D=()=>[ar,e],L=()=>["",of,Ch],z=()=>["auto",qv,ar],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",ar],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[qv,ar];return{cacheSize:500,separator:":",theme:{colors:[Gx],spacing:[of,Ch],blur:["none","",Ah,ar],brightness:Q(),borderColor:[t],borderRadius:["none","","full",Ah,ar],borderSpacing:D(),borderWidth:L(),contrast:Q(),grayscale:Y(),hueRotate:Q(),invert:Y(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[Che,Ch],inset:R(),margin:R(),opacity:Q(),padding:D(),saturate:Q(),scale:Q(),sepia:Y(),skew:Q(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",ar]}],container:["container"],columns:[{columns:[Ah]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),ar]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kx,ar]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ar]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Kx,ar]}],"grid-cols":[{"grid-cols":[Gx]}],"col-start-end":[{col:["auto",{span:["full",Kx,ar]},ar]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Gx]}],"row-start-end":[{row:["auto",{span:[Kx,ar]},ar]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ar]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ar,e]}],"min-w":[{"min-w":[ar,e,"min","max","fit"]}],"max-w":[{"max-w":[ar,e,"none","full","min","max","fit","prose",{screen:[Ah]},Ah]}],h:[{h:[ar,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ar,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ar,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ar,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ah,Ch]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",RC]}],"font-family":[{font:[Gx]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ar]}],"line-clamp":[{"line-clamp":["none",qv,RC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",of,ar]}],"list-image":[{"list-image":["none",ar]}],"list-style-type":[{list:["none","disc","decimal",ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",of,Ch]}],"underline-offset":[{"underline-offset":["auto",of,ar]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),The]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",khe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Phe]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[of,ar]}],"outline-w":[{outline:[of,Ch]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[of,Ch]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ah,Mhe]}],"shadow-color":[{shadow:[Gx]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ah,ar]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[j]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ar]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",ar]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Kx,ar]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ar]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[of,Ch,RC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fhe=xhe(Lhe);function ft(...t){return Fhe(mr(t))}const Bhe=ufe,KG=N.forwardRef(({className:t,...e},n)=>a.jsx(uG,{ref:n,className:ft("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));KG.displayName=uG.displayName;const $he=yg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GG=N.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(dG,{ref:r,className:ft($he({variant:e}),t),...n}));GG.displayName=dG.displayName;const zhe=N.forwardRef(({className:t,...e},n)=>a.jsx(pG,{ref:n,className:ft("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));zhe.displayName=pG.displayName;const YG=N.forwardRef(({className:t,...e},n)=>a.jsx(mG,{ref:n,className:ft("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Gm,{className:"h-4 w-4"})}));YG.displayName=mG.displayName;const XG=N.forwardRef(({className:t,...e},n)=>a.jsx(fG,{ref:n,className:ft("text-sm font-semibold",t),...e}));XG.displayName=fG.displayName;const QG=N.forwardRef(({className:t,...e},n)=>a.jsx(hG,{ref:n,className:ft("text-sm opacity-90",t),...e}));QG.displayName=hG.displayName;function qhe(){const{toasts:t}=Dr();return a.jsxs(Bhe,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return a.jsxs(GG,{...s,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(XG,{children:n}),r&&a.jsx(QG,{children:r})]}),i,a.jsx(YG,{})]},e)}),a.jsx(KG,{})]})}var Uhe=$4[" useId ".trim().toString()]||(()=>{}),Hhe=0;function Hs(t){const[e,n]=N.useState(Uhe());return ws(()=>{n(r=>r??String(Hhe++))},[t]),e?`radix-${e}`:""}const Vhe=["top","right","bottom","left"],gp=Math.min,Pl=Math.max,fN=Math.round,Rw=Math.floor,hd=t=>({x:t,y:t}),Whe={left:"right",right:"left",bottom:"top",top:"bottom"},Khe={start:"end",end:"start"};function OP(t,e,n){return Pl(t,gp(e,n))}function Lf(t,e){return typeof t=="function"?t(e):t}function Ff(t){return t.split("-")[0]}function Jy(t){return t.split("-")[1]}function dD(t){return t==="x"?"y":"x"}function fD(t){return t==="y"?"height":"width"}const Ghe=new Set(["top","bottom"]);function od(t){return Ghe.has(Ff(t))?"y":"x"}function hD(t){return dD(od(t))}function Yhe(t,e,n){n===void 0&&(n=!1);const r=Jy(t),i=hD(t),s=fD(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=hN(o)),[o,hN(o)]}function Xhe(t){const e=hN(t);return[PP(t),e,PP(e)]}function PP(t){return t.replace(/start|end/g,e=>Khe[e])}const TF=["left","right"],OF=["right","left"],Qhe=["top","bottom"],Zhe=["bottom","top"];function Jhe(t,e,n){switch(t){case"top":case"bottom":return n?e?OF:TF:e?TF:OF;case"left":case"right":return e?Qhe:Zhe;default:return[]}}function epe(t,e,n,r){const i=Jy(t);let s=Jhe(Ff(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(PP)))),s}function hN(t){return t.replace(/left|right|bottom|top/g,e=>Whe[e])}function tpe(t){return{top:0,right:0,bottom:0,left:0,...t}}function ZG(t){return typeof t!="number"?tpe(t):{top:t,right:t,bottom:t,left:t}}function pN(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function PF(t,e,n){let{reference:r,floating:i}=t;const s=od(e),o=hD(e),l=fD(o),c=Ff(e),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Jy(e)){case"start":m[o]-=p*(n&&u?-1:1);break;case"end":m[o]+=p*(n&&u?-1:1);break}return m}const npe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=PF(u,r,c),p=r,m={},v=0;for(let y=0;y<l.length;y++){const{name:x,fn:b}=l[y],{x:S,y:j,data:E,reset:A}=await b({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=S??d,f=j??f,m={...m,[x]:{...m[x],...E}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:d,y:f}=PF(u,p,c)),y=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:m}};async function s0(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Lf(e,t),v=ZG(m),x=l[p?f==="floating"?"reference":"floating":f],b=pN(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),S=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),E=await(s.isElement==null?void 0:s.isElement(j))?await(s.getScale==null?void 0:s.getScale(j))||{x:1,y:1}:{x:1,y:1},A=pN(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:j,strategy:c}):S);return{top:(b.top-A.top+v.top)/E.y,bottom:(A.bottom-b.bottom+v.bottom)/E.y,left:(b.left-A.left+v.left)/E.x,right:(A.right-b.right+v.right)/E.x}}const rpe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Lf(t,e)||{};if(u==null)return{};const f=ZG(d),p={x:n,y:r},m=hD(i),v=fD(m),y=await o.getDimensions(u),x=m==="y",b=x?"top":"left",S=x?"bottom":"right",j=x?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],A=p[m]-s.reference[m],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let O=P?P[j]:0;(!O||!await(o.isElement==null?void 0:o.isElement(P)))&&(O=l.floating[j]||s.floating[v]);const k=E/2-A/2,C=O/2-y[v]/2-1,I=gp(f[b],C),R=gp(f[S],C),D=I,L=O-y[v]-R,z=O/2-y[v]/2+k,W=OP(D,z,L),X=!c.arrow&&Jy(i)!=null&&z!==W&&s.reference[v]/2-(z<D?I:R)-y[v]/2<0,q=X?z<D?z-D:z-L:0;return{[m]:p[m]+q,data:{[m]:W,centerOffset:z-W-q,...X&&{alignmentOffset:q}},reset:X}}}),ipe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...x}=Lf(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=Ff(i),S=od(l),j=Ff(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=p||(j||!y?[hN(l)]:Xhe(l)),P=v!=="none";!p&&P&&A.push(...epe(l,y,v,E));const O=[l,...A],k=await s0(e,x),C=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&C.push(k[b]),f){const z=Yhe(i,o,E);C.push(k[z[0]],k[z[1]])}if(I=[...I,{placement:i,overflows:C}],!C.every(z=>z<=0)){var R,D;const z=(((R=s.flip)==null?void 0:R.index)||0)+1,W=O[z];if(W&&(!(f==="alignment"?S!==od(W):!1)||I.every(V=>od(V.placement)===S?V.overflows[0]>0:!0)))return{data:{index:z,overflows:I},reset:{placement:W}};let X=(D=I.filter(q=>q.overflows[0]<=0).sort((q,V)=>q.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!X)switch(m){case"bestFit":{var L;const q=(L=I.filter(V=>{if(P){const Y=od(V.placement);return Y===S||Y==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(Y=>Y>0).reduce((Y,re)=>Y+re,0)]).sort((V,Y)=>V[1]-Y[1])[0])==null?void 0:L[0];q&&(X=q);break}case"initialPlacement":X=l;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function MF(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RF(t){return Vhe.some(e=>t[e]>=0)}const spe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Lf(t,e);switch(r){case"referenceHidden":{const s=await s0(e,{...i,elementContext:"reference"}),o=MF(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RF(o)}}}case"escaped":{const s=await s0(e,{...i,altBoundary:!0}),o=MF(s,n.floating);return{data:{escapedOffsets:o,escaped:RF(o)}}}default:return{}}}}},JG=new Set(["left","top"]);async function ape(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ff(n),l=Jy(n),c=od(n)==="y",u=JG.has(o)?-1:1,d=s&&c?-1:1,f=Lf(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const ope=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,c=await ape(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},lpe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:b,y:S}=x;return{x:b,y:S}}},...c}=Lf(t,e),u={x:n,y:r},d=await s0(e,c),f=od(Ff(i)),p=dD(f);let m=u[p],v=u[f];if(s){const x=p==="y"?"top":"left",b=p==="y"?"bottom":"right",S=m+d[x],j=m-d[b];m=OP(S,m,j)}if(o){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",S=v+d[x],j=v-d[b];v=OP(S,v,j)}const y=l.fn({...e,[p]:m,[f]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:s,[f]:o}}}}}},cpe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Lf(t,e),d={x:n,y:r},f=od(i),p=dD(f);let m=d[p],v=d[f];const y=Lf(l,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const j=p==="y"?"height":"width",E=s.reference[p]-s.floating[j]+x.mainAxis,A=s.reference[p]+s.reference[j]-x.mainAxis;m<E?m=E:m>A&&(m=A)}if(u){var b,S;const j=p==="y"?"width":"height",E=JG.has(Ff(i)),A=s.reference[f]-s.floating[j]+(E&&((b=o.offset)==null?void 0:b[f])||0)+(E?0:x.crossAxis),P=s.reference[f]+s.reference[j]+(E?0:((S=o.offset)==null?void 0:S[f])||0)-(E?x.crossAxis:0);v<A?v=A:v>P&&(v=P)}return{[p]:m,[f]:v}}}},upe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Lf(t,e),d=await s0(e,u),f=Ff(i),p=Jy(i),m=od(i)==="y",{width:v,height:y}=s.floating;let x,b;f==="top"||f==="bottom"?(x=f,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,x=p==="end"?"top":"bottom");const S=y-d.top-d.bottom,j=v-d.left-d.right,E=gp(y-d[x],S),A=gp(v-d[b],j),P=!e.middlewareData.shift;let O=E,k=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=S),P&&!p){const I=Pl(d.left,0),R=Pl(d.right,0),D=Pl(d.top,0),L=Pl(d.bottom,0);m?k=v-2*(I!==0||R!==0?I+R:Pl(d.left,d.right)):O=y-2*(D!==0||L!==0?D+L:Pl(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:O});const C=await o.getDimensions(l.floating);return v!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function qj(){return typeof window<"u"}function ex(t){return eY(t)?(t.nodeName||"").toLowerCase():"#document"}function Fl(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ad(t){var e;return(e=(eY(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eY(t){return qj()?t instanceof Node||t instanceof Fl(t).Node:!1}function yu(t){return qj()?t instanceof Element||t instanceof Fl(t).Element:!1}function bd(t){return qj()?t instanceof HTMLElement||t instanceof Fl(t).HTMLElement:!1}function DF(t){return!qj()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fl(t).ShadowRoot}const dpe=new Set(["inline","contents"]);function x1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=xu(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!dpe.has(i)}const fpe=new Set(["table","td","th"]);function hpe(t){return fpe.has(ex(t))}const ppe=[":popover-open",":modal"];function Uj(t){return ppe.some(e=>{try{return t.matches(e)}catch{return!1}})}const mpe=["transform","translate","scale","rotate","perspective"],gpe=["transform","translate","scale","rotate","perspective","filter"],vpe=["paint","layout","strict","content"];function pD(t){const e=mD(),n=yu(t)?xu(t):t;return mpe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||gpe.some(r=>(n.willChange||"").includes(r))||vpe.some(r=>(n.contain||"").includes(r))}function ype(t){let e=vp(t);for(;bd(e)&&!sy(e);){if(pD(e))return e;if(Uj(e))return null;e=vp(e)}return null}function mD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xpe=new Set(["html","body","#document"]);function sy(t){return xpe.has(ex(t))}function xu(t){return Fl(t).getComputedStyle(t)}function Hj(t){return yu(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function vp(t){if(ex(t)==="html")return t;const e=t.assignedSlot||t.parentNode||DF(t)&&t.host||Ad(t);return DF(e)?e.host:e}function tY(t){const e=vp(t);return sy(e)?t.ownerDocument?t.ownerDocument.body:t.body:bd(e)&&x1(e)?e:tY(e)}function a0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=tY(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Fl(i);if(s){const l=MP(o);return e.concat(o,o.visualViewport||[],x1(i)?i:[],l&&n?a0(l):[])}return e.concat(i,a0(i,[],n))}function MP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function nY(t){const e=xu(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=bd(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=fN(n)!==s||fN(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function gD(t){return yu(t)?t:t.contextElement}function Uv(t){const e=gD(t);if(!bd(e))return hd(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=nY(e);let o=(s?fN(n.width):n.width)/r,l=(s?fN(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const bpe=hd(0);function rY(t){const e=Fl(t);return!mD()||!e.visualViewport?bpe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wpe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fl(t)?!1:e}function Ym(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=gD(t);let o=hd(1);e&&(r?yu(r)&&(o=Uv(r)):o=Uv(t));const l=wpe(s,n,r)?rY(s):hd(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const p=Fl(s),m=r&&yu(r)?Fl(r):r;let v=p,y=MP(v);for(;y&&r&&m!==v;){const x=Uv(y),b=y.getBoundingClientRect(),S=xu(y),j=b.left+(y.clientLeft+parseFloat(S.paddingLeft))*x.x,E=b.top+(y.clientTop+parseFloat(S.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,f*=x.y,c+=j,u+=E,v=Fl(y),y=MP(v)}}return pN({width:d,height:f,x:c,y:u})}function Vj(t,e){const n=Hj(t).scrollLeft;return e?e.left+n:Ym(Ad(t)).left+n}function iY(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Vj(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Npe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Ad(r),l=e?Uj(e.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=hd(1);const d=hd(0),f=bd(r);if((f||!f&&!s)&&((ex(r)!=="body"||x1(o))&&(c=Hj(r)),bd(r))){const m=Ym(r);u=Uv(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!f&&!s?iY(o,c):hd(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function Spe(t){return Array.from(t.getClientRects())}function jpe(t){const e=Ad(t),n=Hj(t),r=t.ownerDocument.body,i=Pl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Pl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Vj(t);const l=-n.scrollTop;return xu(r).direction==="rtl"&&(o+=Pl(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}const IF=25;function Epe(t,e){const n=Fl(t),r=Ad(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const d=mD();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const u=Vj(r);if(u<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),m=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-m);v<=IF&&(s-=v)}else u<=IF&&(s+=u);return{width:s,height:o,x:l,y:c}}const _pe=new Set(["absolute","fixed"]);function Cpe(t,e){const n=Ym(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=bd(t)?Uv(t):hd(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function LF(t,e,n){let r;if(e==="viewport")r=Epe(t,n);else if(e==="document")r=jpe(Ad(t));else if(yu(e))r=Cpe(e,n);else{const i=rY(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pN(r)}function sY(t,e){const n=vp(t);return n===e||!yu(n)||sy(n)?!1:xu(n).position==="fixed"||sY(n,e)}function Ape(t,e){const n=e.get(t);if(n)return n;let r=a0(t,[],!1).filter(l=>yu(l)&&ex(l)!=="body"),i=null;const s=xu(t).position==="fixed";let o=s?vp(t):t;for(;yu(o)&&!sy(o);){const l=xu(o),c=pD(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&_pe.has(i.position)||x1(o)&&!c&&sY(t,o))?r=r.filter(d=>d!==o):i=l,o=vp(o)}return e.set(t,r),r}function kpe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Uj(e)?[]:Ape(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=LF(e,d,i);return u.top=Pl(f.top,u.top),u.right=gp(f.right,u.right),u.bottom=gp(f.bottom,u.bottom),u.left=Pl(f.left,u.left),u},LF(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Tpe(t){const{width:e,height:n}=nY(t);return{width:e,height:n}}function Ope(t,e,n){const r=bd(e),i=Ad(e),s=n==="fixed",o=Ym(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=hd(0);function u(){c.x=Vj(i)}if(r||!r&&!s)if((ex(e)!=="body"||x1(i))&&(l=Hj(e)),r){const m=Ym(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?iY(i,l):hd(0),f=o.left+l.scrollLeft-c.x-d.x,p=o.top+l.scrollTop-c.y-d.y;return{x:f,y:p,width:o.width,height:o.height}}function DC(t){return xu(t).position==="static"}function FF(t,e){if(!bd(t)||xu(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ad(t)===n&&(n=n.ownerDocument.body),n}function aY(t,e){const n=Fl(t);if(Uj(t))return n;if(!bd(t)){let i=vp(t);for(;i&&!sy(i);){if(yu(i)&&!DC(i))return i;i=vp(i)}return n}let r=FF(t,e);for(;r&&hpe(r)&&DC(r);)r=FF(r,e);return r&&sy(r)&&DC(r)&&!pD(r)?n:r||ype(t)||n}const Ppe=async function(t){const e=this.getOffsetParent||aY,n=this.getDimensions,r=await n(t.floating);return{reference:Ope(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Mpe(t){return xu(t).direction==="rtl"}const Rpe={convertOffsetParentRelativeRectToViewportRelativeRect:Npe,getDocumentElement:Ad,getClippingRect:kpe,getOffsetParent:aY,getElementRects:Ppe,getClientRects:Spe,getDimensions:Tpe,getScale:Uv,isElement:yu,isRTL:Mpe};function oY(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Dpe(t,e){let n=null,r;const i=Ad(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=u;if(l||e(),!p||!m)return;const v=Rw(f),y=Rw(i.clientWidth-(d+p)),x=Rw(i.clientHeight-(f+m)),b=Rw(d),j={rootMargin:-v+"px "+-y+"px "+-x+"px "+-b+"px",threshold:Pl(0,gp(1,c))||1};let E=!0;function A(P){const O=P[0].intersectionRatio;if(O!==c){if(!E)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!oY(u,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(A,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,j)}n.observe(t)}return o(!0),s}function Ipe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=gD(t),d=i||s?[...u?a0(u):[],...a0(e)]:[];d.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=u&&l?Dpe(u,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(b=>{let[S]=b;S&&S.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let v,y=c?Ym(t):null;c&&x();function x(){const b=Ym(t);y&&!oY(y,b)&&n(),y=b,v=requestAnimationFrame(x)}return n(),()=>{var b;d.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),f?.(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const Lpe=ope,Fpe=lpe,Bpe=ipe,$pe=upe,zpe=spe,BF=rpe,qpe=cpe,Upe=(t,e,n)=>{const r=new Map,i={platform:Rpe,...n},s={...i.platform,_c:r};return npe(t,e,{...i,platform:s})};var Hpe=typeof document<"u",Vpe=function(){},D2=Hpe?N.useLayoutEffect:Vpe;function mN(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mN(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!mN(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function lY(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $F(t,e){const n=lY(t);return Math.round(e*n)/n}function IC(t){const e=N.useRef(t);return D2(()=>{e.current=t}),e}function Wpe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=N.useState(r);mN(p,r)||m(r);const[v,y]=N.useState(null),[x,b]=N.useState(null),S=N.useCallback(V=>{V!==P.current&&(P.current=V,y(V))},[]),j=N.useCallback(V=>{V!==O.current&&(O.current=V,b(V))},[]),E=s||v,A=o||x,P=N.useRef(null),O=N.useRef(null),k=N.useRef(d),C=c!=null,I=IC(c),R=IC(i),D=IC(u),L=N.useCallback(()=>{if(!P.current||!O.current)return;const V={placement:e,strategy:n,middleware:p};R.current&&(V.platform=R.current),Upe(P.current,O.current,V).then(Y=>{const re={...Y,isPositioned:D.current!==!1};z.current&&!mN(k.current,re)&&(k.current=re,hu.flushSync(()=>{f(re)}))})},[p,e,n,R,D]);D2(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const z=N.useRef(!1);D2(()=>(z.current=!0,()=>{z.current=!1}),[]),D2(()=>{if(E&&(P.current=E),A&&(O.current=A),E&&A){if(I.current)return I.current(E,A,L);L()}},[E,A,L,I,C]);const W=N.useMemo(()=>({reference:P,floating:O,setReference:S,setFloating:j}),[S,j]),X=N.useMemo(()=>({reference:E,floating:A}),[E,A]),q=N.useMemo(()=>{const V={position:n,left:0,top:0};if(!X.floating)return V;const Y=$F(X.floating,d.x),re=$F(X.floating,d.y);return l?{...V,transform:"translate("+Y+"px, "+re+"px)",...lY(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:re}},[n,l,X.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:L,refs:W,elements:X,floatingStyles:q}),[d,L,W,X,q])}const Kpe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?BF({element:r.current,padding:i}).fn(n):{}:r?BF({element:r,padding:i}).fn(n):{}}}},Gpe=(t,e)=>({...Lpe(t),options:[t,e]}),Ype=(t,e)=>({...Fpe(t),options:[t,e]}),Xpe=(t,e)=>({...qpe(t),options:[t,e]}),Qpe=(t,e)=>({...Bpe(t),options:[t,e]}),Zpe=(t,e)=>({...$pe(t),options:[t,e]}),Jpe=(t,e)=>({...zpe(t),options:[t,e]}),eme=(t,e)=>({...Kpe(t),options:[t,e]});var tme="Arrow",cY=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return a.jsx(Lt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});cY.displayName=tme;var nme=cY;function Wj(t){const[e,n]=N.useState(void 0);return ws(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var vD="Popper",[uY,Ep]=Gs(vD),[rme,dY]=uY(vD),fY=t=>{const{__scopePopper:e,children:n}=t,[r,i]=N.useState(null);return a.jsx(rme,{scope:e,anchor:r,onAnchorChange:i,children:n})};fY.displayName=vD;var hY="PopperAnchor",pY=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=dY(hY,n),o=N.useRef(null),l=_n(e,o),c=N.useRef(null);return N.useEffect(()=>{const u=c.current;c.current=r?.current||o.current,u!==c.current&&s.onAnchorChange(c.current)}),r?null:a.jsx(Lt.div,{...i,ref:l})});pY.displayName=hY;var yD="PopperContent",[ime,sme]=uY(yD),mY=N.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...y}=t,x=dY(yD,n),[b,S]=N.useState(null),j=_n(e,me=>S(me)),[E,A]=N.useState(null),P=Wj(E),O=P?.width??0,k=P?.height??0,C=r+(s!=="center"?"-"+s:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],D=R.length>0,L={padding:I,boundary:R.filter(ome),altBoundary:D},{refs:z,floatingStyles:W,placement:X,isPositioned:q,middlewareData:V}=Wpe({strategy:"fixed",placement:C,whileElementsMounted:(...me)=>Ipe(...me,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[Gpe({mainAxis:i+k,alignmentAxis:o}),c&&Ype({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Xpe():void 0,...L}),c&&Qpe({...L}),Zpe({...L,apply:({elements:me,rects:xe,availableWidth:de,availableHeight:Ne})=>{const{width:Ce,height:ae}=xe.reference,Pe=me.floating.style;Pe.setProperty("--radix-popper-available-width",`${de}px`),Pe.setProperty("--radix-popper-available-height",`${Ne}px`),Pe.setProperty("--radix-popper-anchor-width",`${Ce}px`),Pe.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),E&&eme({element:E,padding:l}),lme({arrowWidth:O,arrowHeight:k}),p&&Jpe({strategy:"referenceHidden",...L})]}),[Y,re]=yY(X),Q=bs(v);ws(()=>{q&&Q?.()},[q,Q]);const F=V.arrow?.x,G=V.arrow?.y,te=V.arrow?.centerOffset!==0,[le,he]=N.useState();return ws(()=>{b&&he(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:q?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(ime,{scope:n,placedSide:Y,onArrowChange:A,arrowX:F,arrowY:G,shouldHideArrow:te,children:a.jsx(Lt.div,{"data-side":Y,"data-align":re,...y,ref:j,style:{...y.style,animation:q?void 0:"none"}})})})});mY.displayName=yD;var gY="PopperArrow",ame={top:"bottom",right:"left",bottom:"top",left:"right"},vY=N.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=sme(gY,r),o=ame[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(nme,{...i,ref:n,style:{...i.style,display:"block"}})})});vY.displayName=gY;function ome(t){return t!==null}var lme=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=yY(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(i.arrow?.x??0)+l/2,m=(i.arrow?.y??0)+c/2;let v="",y="";return u==="bottom"?(v=o?f:`${p}px`,y=`${-c}px`):u==="top"?(v=o?f:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,y=o?f:`${m}px`):u==="left"&&(v=`${r.floating.width+c}px`,y=o?f:`${m}px`),{data:{x:v,y}}}});function yY(t){const[e,n="center"]=t.split("-");return[e,n]}var Kj=fY,b1=pY,Gj=mY,Yj=vY,[Xj]=Gs("Tooltip",[Ep]),Qj=Ep(),xY="TooltipProvider",cme=700,RP="tooltip.open",[ume,xD]=Xj(xY),bY=t=>{const{__scopeTooltip:e,delayDuration:n=cme,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(ume,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};bY.displayName=xY;var o0="Tooltip",[dme,Zj]=Xj(o0),wY=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=t,c=xD(o0,t.__scopeTooltip),u=Qj(e),[d,f]=N.useState(null),p=Hs(),m=N.useRef(0),v=o??c.disableHoverableContent,y=l??c.delayDuration,x=N.useRef(!1),[b,S]=Ro({prop:r,defaultProp:i??!1,onChange:O=>{O?(c.onOpen(),document.dispatchEvent(new CustomEvent(RP))):c.onClose(),s?.(O)},caller:o0}),j=N.useMemo(()=>b?x.current?"delayed-open":"instant-open":"closed",[b]),E=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,S(!0)},[S]),A=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,S(!1)},[S]),P=N.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,S(!0),m.current=0},y)},[y,S]);return N.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),a.jsx(Kj,{...u,children:a.jsx(dme,{scope:e,contentId:p,open:b,stateAttribute:j,trigger:d,onTriggerChange:f,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?P():E()},[c.isOpenDelayedRef,P,E]),onTriggerLeave:N.useCallback(()=>{v?A():(window.clearTimeout(m.current),m.current=0)},[A,v]),onOpen:E,onClose:A,disableHoverableContent:v,children:n})})};wY.displayName=o0;var DP="TooltipTrigger",NY=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Zj(DP,n),s=xD(DP,n),o=Qj(n),l=N.useRef(null),c=_n(e,l,i.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),f=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(b1,{asChild:!0,...o,children:a.jsx(Lt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:bt(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:bt(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:bt(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:bt(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:bt(t.onBlur,i.onClose),onClick:bt(t.onClick,i.onClose)})})});NY.displayName=DP;var fme="TooltipPortal",[EQe,hme]=Xj(fme,{forceMount:void 0}),ay="TooltipContent",SY=N.forwardRef((t,e)=>{const n=hme(ay,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Zj(ay,t.__scopeTooltip);return a.jsx(ua,{present:r||o.open,children:o.disableHoverableContent?a.jsx(jY,{side:i,...s,ref:e}):a.jsx(pme,{side:i,...s,ref:e})})}),pme=N.forwardRef((t,e)=>{const n=Zj(ay,t.__scopeTooltip),r=xD(ay,t.__scopeTooltip),i=N.useRef(null),s=_n(e,i),[o,l]=N.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:f}=r,p=N.useCallback(()=>{l(null),f(!1)},[f]),m=N.useCallback((v,y)=>{const x=v.currentTarget,b={x:v.clientX,y:v.clientY},S=xme(b,x.getBoundingClientRect()),j=bme(b,S),E=wme(y.getBoundingClientRect()),A=Sme([...j,...E]);l(A),f(!0)},[f]);return N.useEffect(()=>()=>p(),[p]),N.useEffect(()=>{if(c&&d){const v=x=>m(x,d),y=x=>m(x,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",y)}}},[c,d,m,p]),N.useEffect(()=>{if(o){const v=y=>{const x=y.target,b={x:y.clientX,y:y.clientY},S=c?.contains(x)||d?.contains(x),j=!Nme(b,o);S?p():j&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,p]),a.jsx(jY,{...t,ref:s})}),[mme,gme]=Xj(o0,{isInside:!1}),vme=WK("TooltipContent"),jY=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=t,c=Zj(ay,n),u=Qj(n),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(RP,d),()=>document.removeEventListener(RP,d)),[d]),N.useEffect(()=>{if(c.trigger){const f=p=>{p.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(vg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(Gj,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(vme,{children:r}),a.jsx(mme,{scope:n,isInside:!0,children:a.jsx(Wde,{id:c.contentId,role:"tooltip",children:i||r})})]})})});SY.displayName=ay;var EY="TooltipArrow",yme=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Qj(n);return gme(EY,n).isInside?null:a.jsx(Yj,{...i,...r,ref:e})});yme.displayName=EY;function xme(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function bme(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function wme(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Nme(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,f=c.x,p=c.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function Sme(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jme(e)}function jme(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Eme=bY,_me=wY,Cme=NY,_Y=SY;const CY=Eme,AY=_me,kY=Cme,bD=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(_Y,{ref:r,sideOffset:e,className:ft("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));bD.displayName=_Y.displayName;const Ame={theme:"light",setTheme:()=>null,toggleTheme:()=>null},TY=N.createContext(Ame);function kme({children:t,defaultTheme:e="light",...n}){const[r,i]=N.useState(()=>localStorage.getItem("theme")||e);N.useEffect(()=>{const l=document.documentElement;l.classList.remove("light","dark"),l.classList.add(r),localStorage.setItem("theme",r)},[r]);const o={theme:r,setTheme:i,toggleTheme:()=>{i(r==="light"?"dark":"light")}};return a.jsx(TY.Provider,{...n,value:o,children:t})}const Tme=()=>{const t=N.useContext(TY);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},OY=N.createContext(void 0);function Ome({children:t}){const e=mo(),{data:n,isLoading:r}=Wt({queryKey:["/api/auth/profile"],queryFn:UK({on401:"returnNull"}),retry:!1,enabled:!0}),i=$t({mutationFn:async({username:d,password:f})=>await Rt("POST","/api/auth/login",{username:d,password:f}),onSuccess:d=>{localStorage.setItem("token",d.token),e.setQueryData(["/api/auth/profile"],d.user)}}),s=$t({mutationFn:async({username:d,email:f,password:p,role:m})=>await Rt("POST","/api/auth/register",{username:d,email:f,password:p,role:m}),onSuccess:d=>{localStorage.setItem("token",d.token),e.setQueryData(["/api/auth/profile"],d.user)}}),o=$t({mutationFn:async()=>{await Rt("POST","/api/auth/logout",{})},onSuccess:()=>{localStorage.removeItem("token"),e.setQueryData(["/api/auth/profile"],null),e.clear()}}),l=async(d,f)=>{await i.mutateAsync({username:d,password:f})},c=async(d,f,p,m)=>{await s.mutateAsync({username:d,email:f,password:p,role:m})},u=async()=>{await o.mutateAsync()};return a.jsx(OY.Provider,{value:{user:n??null,isLoading:r,login:l,register:c,logout:u},children:t})}function xg(){const t=N.useContext(OY);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const wd=Object.create(null);wd.open="0";wd.close="1";wd.ping="2";wd.pong="3";wd.message="4";wd.upgrade="5";wd.noop="6";const I2=Object.create(null);Object.keys(wd).forEach(t=>{I2[wd[t]]=t});const IP={type:"error",data:"parser error"},PY=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",MY=typeof ArrayBuffer=="function",RY=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,wD=({type:t,data:e},n,r)=>PY&&e instanceof Blob?n?r(e):zF(e,r):MY&&(e instanceof ArrayBuffer||RY(e))?n?r(e):zF(new Blob([e]),r):r(wd[t]+(e||"")),zF=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function qF(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let LC;function Pme(t,e){if(PY&&t.data instanceof Blob)return t.data.arrayBuffer().then(qF).then(e);if(MY&&(t.data instanceof ArrayBuffer||RY(t.data)))return e(qF(t.data));wD(t,!1,n=>{LC||(LC=new TextEncoder),e(LC.encode(n))})}const UF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<UF.length;t++)pb[UF.charCodeAt(t)]=t;const Mme=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)s=pb[t.charCodeAt(r)],o=pb[t.charCodeAt(r+1)],l=pb[t.charCodeAt(r+2)],c=pb[t.charCodeAt(r+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return u},Rme=typeof ArrayBuffer=="function",ND=(t,e)=>{if(typeof t!="string")return{type:"message",data:DY(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Dme(t.substring(1),e)}:I2[n]?t.length>1?{type:I2[n],data:t.substring(1)}:{type:I2[n]}:IP},Dme=(t,e)=>{if(Rme){const n=Mme(t);return DY(n,e)}else return{base64:!0,data:t}},DY=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},IY="",Ime=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{wD(s,!1,l=>{r[o]=l,++i===n&&e(r.join(IY))})})},Lme=(t,e)=>{const n=t.split(IY),r=[];for(let i=0;i<n.length;i++){const s=ND(n[i],e);if(r.push(s),s.type==="error")break}return r};function Fme(){return new TransformStream({transform(t,e){Pme(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let FC;function Dw(t){return t.reduce((e,n)=>e+n.length,0)}function Iw(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Bme(t,e){FC||(FC=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Dw(n)<1)break;const c=Iw(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Dw(n)<2)break;const c=Iw(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Dw(n)<8)break;const c=Iw(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(IP);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Dw(n)<i)break;const c=Iw(n,i);l.enqueue(ND(s?c:FC.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(IP);break}}}})}const LY=4;function qs(t){if(t)return $me(t)}function $me(t){for(var e in qs.prototype)t[e]=qs.prototype[e];return t}qs.prototype.on=qs.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};qs.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};qs.prototype.off=qs.prototype.removeListener=qs.prototype.removeAllListeners=qs.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};qs.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};qs.prototype.emitReserved=qs.prototype.emit;qs.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};qs.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Jj=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),gc=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),zme="arraybuffer";function FY(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const qme=gc.setTimeout,Ume=gc.clearTimeout;function eE(t,e){e.useNativeTimers?(t.setTimeoutFn=qme.bind(gc),t.clearTimeoutFn=Ume.bind(gc)):(t.setTimeoutFn=gc.setTimeout.bind(gc),t.clearTimeoutFn=gc.clearTimeout.bind(gc))}const Hme=1.33;function Vme(t){return typeof t=="string"?Wme(t):Math.ceil((t.byteLength||t.size)*Hme)}function Wme(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function BY(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Kme(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Gme(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Yme extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class SD extends qs{constructor(e){super(),this.writable=!1,eE(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Yme(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ND(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Kme(e);return n.length?"?"+n:""}}class Xme extends SD{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Lme(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ime(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=BY()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let $Y=!1;try{$Y=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Qme=$Y;function Zme(){}class Jme extends Xme{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class pd extends qs{constructor(e,n,r){super(),this.createRequest=e,eE(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=FY(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=pd.requestsCount++,pd.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Zme,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete pd.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}pd.requestsCount=0;pd.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",HF);else if(typeof addEventListener=="function"){const t="onpagehide"in gc?"pagehide":"unload";addEventListener(t,HF,!1)}}function HF(){for(let t in pd.requests)pd.requests.hasOwnProperty(t)&&pd.requests[t].abort()}const ege=(function(){const t=zY({xdomain:!1});return t&&t.responseType!==null})();class tge extends Jme{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=ege&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new pd(zY,this.uri(),e)}}function zY(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Qme))return new XMLHttpRequest}catch{}if(!e)try{return new gc[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const qY=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nge extends SD{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=qY?{}:FY(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;wD(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Jj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=BY()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const BC=gc.WebSocket||gc.MozWebSocket;let rge=class extends nge{createSocket(e,n,r){return qY?new BC(e,n,r):n?new BC(e,n):new BC(e)}doWrite(e,n){this.ws.send(n)}};class ige extends SD{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Bme(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Fme();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Jj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const sge={websocket:rge,webtransport:ige,polling:tge},age=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oge=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function LP(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=age.exec(t||""),s={},o=14;for(;o--;)s[oge[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=lge(s,s.path),s.queryKey=cge(s,s.query),s}function lge(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function cge(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const FP=typeof addEventListener=="function"&&typeof removeEventListener=="function",L2=[];FP&&addEventListener("offline",()=>{L2.forEach(t=>t())},!1);class sp extends qs{constructor(e,n){if(super(),this.binaryType=zme,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=LP(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=LP(n.host).host);eE(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Gme(this.opts.query)),FP&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},L2.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=LY,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&sp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",sp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Vme(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Jj(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(sp.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),FP&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=L2.indexOf(this._offlineEventListener);r!==-1&&L2.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}sp.protocol=LY;class uge extends sp{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;sp.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;sp.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=n.name,s(),this.emitReserved("upgradeError",p)};function l(){o("transport closed")}function c(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let dge=class extends uge{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>sge[i]).filter(i=>!!i)),super(e,r)}};function fge(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=LP(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const hge=typeof ArrayBuffer=="function",pge=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,UY=Object.prototype.toString,mge=typeof Blob=="function"||typeof Blob<"u"&&UY.call(Blob)==="[object BlobConstructor]",gge=typeof File=="function"||typeof File<"u"&&UY.call(File)==="[object FileConstructor]";function jD(t){return hge&&(t instanceof ArrayBuffer||pge(t))||mge&&t instanceof Blob||gge&&t instanceof File}function F2(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(F2(t[n]))return!0;return!1}if(jD(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return F2(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&F2(t[n]))return!0;return!1}function vge(t){const e=[],n=t.data,r=t;return r.data=BP(n,e),r.attachments=e.length,{packet:r,buffers:e}}function BP(t,e){if(!t)return t;if(jD(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=BP(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=BP(t[r],e));return n}return t}function yge(t,e){return t.data=$P(t.data,e),delete t.attachments,t}function $P(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=$P(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=$P(t[n],e));return t}const xge=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bge=5;var Sr;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Sr||(Sr={}));class wge{constructor(e){this.replacer=e}encode(e){return(e.type===Sr.EVENT||e.type===Sr.ACK)&&F2(e)?this.encodeAsBinary({type:e.type===Sr.EVENT?Sr.BINARY_EVENT:Sr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Sr.BINARY_EVENT||e.type===Sr.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=vge(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function VF(t){return Object.prototype.toString.call(t)==="[object Object]"}class ED extends qs{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Sr.BINARY_EVENT;r||n.type===Sr.BINARY_ACK?(n.type=r?Sr.EVENT:Sr.ACK,this.reconstructor=new Nge(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(jD(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Sr[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Sr.BINARY_EVENT||r.type===Sr.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(ED.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Sr.CONNECT:return VF(n);case Sr.DISCONNECT:return n===void 0;case Sr.CONNECT_ERROR:return typeof n=="string"||VF(n);case Sr.EVENT:case Sr.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&xge.indexOf(n[0])===-1);case Sr.ACK:case Sr.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Nge{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=yge(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Sge=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ED,Encoder:wge,get PacketType(){return Sr},protocol:bge},Symbol.toStringTag,{value:"Module"}));function au(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const jge=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class HY extends qs{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[au(e,"open",this.onopen.bind(this)),au(e,"packet",this.onpacket.bind(this)),au(e,"error",this.onerror.bind(this)),au(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(jge.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Sr.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),o.id=d}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Sr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Sr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Sr.EVENT:case Sr.BINARY_EVENT:this.onevent(e);break;case Sr.ACK:case Sr.BINARY_ACK:this.onack(e);break;case Sr.DISCONNECT:this.ondisconnect();break;case Sr.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Sr.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Sr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function tx(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}tx.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};tx.prototype.reset=function(){this.attempts=0};tx.prototype.setMin=function(t){this.ms=t};tx.prototype.setMax=function(t){this.max=t};tx.prototype.setJitter=function(t){this.jitter=t};class zP extends qs{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,eE(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new tx({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Sge;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new dge(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=au(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=au(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(au(e,"ping",this.onping.bind(this)),au(e,"data",this.ondata.bind(this)),au(e,"error",this.onerror.bind(this)),au(e,"close",this.onclose.bind(this)),au(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Jj(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new HY(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Yx={};function B2(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=fge(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Yx[i]&&s in Yx[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new zP(r,e):(Yx[i]||(Yx[i]=new zP(r,e)),c=Yx[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(B2,{Manager:zP,Socket:HY,io:B2,connect:B2});const VY=N.createContext({socket:null,connected:!1,onlineUsers:0}),Ege=()=>N.useContext(VY);function _ge({children:t}){const[e,n]=N.useState(null),[r,i]=N.useState(!1),[s,o]=N.useState(0),{toast:l}=Dr(),[c,u]=N.useState(localStorage.getItem("token"));return N.useEffect(()=>{const d=()=>{const p=localStorage.getItem("token");u(p)};window.addEventListener("storage",d);const f=setInterval(d,1e3);return()=>{window.removeEventListener("storage",d),clearInterval(f)}},[]),N.useEffect(()=>{if(!c){e&&(e.close(),n(null),i(!1),o(0));return}const d=B2(window.location.origin,{auth:{token:c}});return d.on("connect",()=>{console.log("WebSocket conectado"),i(!0),d.emit("get:online-count")}),d.on("disconnect",f=>{console.log(`WebSocket desconectado - Razn: ${f}`),i(!1),f==="io client disconnect"||f==="io server disconnect"||f==="ping timeout"||o(0)}),d.on("heartbeat",f=>{console.log(" Heartbeat recibido:",f),d.emit("heartbeat-response",{timestamp:Date.now()})}),d.on("online-count",f=>{console.log(`Usuarios conectados: ${f}`),o(f)}),d.on("notification",f=>{console.log("Notificacin recibida:",f),l({title:f.title,description:f.message,variant:f.action==="deleted"?"destructive":"default"})}),d.on("user:connected",()=>{console.log("Usuario conectado")}),d.on("user:disconnected",()=>{console.log("Usuario desconectado")}),d.on("session:new",f=>{console.log("Nueva sesin detectada:",f),l({title:"Nueva Sesin",description:`Usuario ${f.username} se conect desde ${f.ip}`,variant:"default"})}),d.on("session:update",f=>{console.log("Sesin actualizada:",f)}),d.on("sessions:terminated",f=>{console.log("Sesiones terminadas:",f),l({title:"Sesiones Terminadas",description:`Se terminaron ${f.count} sesiones del usuario`,variant:"default"})}),d.on("session:terminated",f=>{console.log("Sesin terminada por administrador:",f),l({title:"Sesin Terminada",description:f.message||"Tu sesin ha sido terminada por un administrador",variant:"destructive"}),localStorage.removeItem("token"),window.location.href="/"}),d.on("connect_error",f=>{console.error("Error de conexin WebSocket:",f),i(!1),o(0)}),n(d),()=>{d.close()}},[c,l]),a.jsx(VY.Provider,{value:{socket:e,connected:r,onlineUsers:s},children:t})}const $C=768;function Cge(){const[t,e]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${$C-1}px)`),r=()=>{e(window.innerWidth<$C)};return n.addEventListener("change",r),e(window.innerWidth<$C),()=>n.removeEventListener("change",r)},[]),!!t}const l0=yg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),pe=N.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Ij:"button";return a.jsx(o,{className:ft(l0({variant:e,size:n,className:t})),ref:s,...i})});pe.displayName="Button";const Ye=N.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:ft("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ye.displayName="Input";var Age="Separator",WF="horizontal",kge=["horizontal","vertical"],WY=N.forwardRef((t,e)=>{const{decorative:n,orientation:r=WF,...i}=t,s=Tge(r)?r:WF,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(Lt.div,{"data-orientation":s,...l,...i,ref:e})});WY.displayName=Age;function Tge(t){return kge.includes(t)}var KY=WY;const ts=N.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>a.jsx(KY,{ref:i,decorative:n,orientation:e,className:ft("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ts.displayName=KY.displayName;var zC="focusScope.autoFocusOnMount",qC="focusScope.autoFocusOnUnmount",KF={bubbles:!1,cancelable:!0},Oge="FocusScope",w1=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,c]=N.useState(null),u=bs(i),d=bs(s),f=N.useRef(null),p=_n(e,y=>c(y)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let y=function(j){if(m.paused||!l)return;const E=j.target;l.contains(E)?f.current=E:Rh(f.current,{select:!0})},x=function(j){if(m.paused||!l)return;const E=j.relatedTarget;E!==null&&(l.contains(E)||Rh(f.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const A of j)A.removedNodes.length>0&&Rh(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const S=new MutationObserver(b);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),S.disconnect()}}},[r,l,m.paused]),N.useEffect(()=>{if(l){YF.add(m);const y=document.activeElement;if(!l.contains(y)){const b=new CustomEvent(zC,KF);l.addEventListener(zC,u),l.dispatchEvent(b),b.defaultPrevented||(Pge(Lge(GY(l)),{select:!0}),document.activeElement===y&&Rh(l))}return()=>{l.removeEventListener(zC,u),setTimeout(()=>{const b=new CustomEvent(qC,KF);l.addEventListener(qC,d),l.dispatchEvent(b),b.defaultPrevented||Rh(y??document.body,{select:!0}),l.removeEventListener(qC,d),YF.remove(m)},0)}}},[l,u,d,m]);const v=N.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(x&&b){const S=y.currentTarget,[j,E]=Mge(S);j&&E?!y.shiftKey&&b===E?(y.preventDefault(),n&&Rh(j,{select:!0})):y.shiftKey&&b===j&&(y.preventDefault(),n&&Rh(E,{select:!0})):b===S&&y.preventDefault()}},[n,r,m.paused]);return a.jsx(Lt.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});w1.displayName=Oge;function Pge(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Rh(r,{select:e}),document.activeElement!==n)return}function Mge(t){const e=GY(t),n=GF(e,t),r=GF(e.reverse(),t);return[n,r]}function GY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function GF(t,e){for(const n of t)if(!Rge(n,{upTo:e}))return n}function Rge(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Dge(t){return t instanceof HTMLInputElement&&"select"in t}function Rh(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Dge(t)&&e&&t.select()}}var YF=Ige();function Ige(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=XF(t,e),t.unshift(e)},remove(e){t=XF(t,e),t[0]?.resume()}}}function XF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Lge(t){return t.filter(e=>e.tagName!=="A")}var UC=0;function tE(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??QF()),document.body.insertAdjacentElement("beforeend",t[1]??QF()),UC++,()=>{UC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),UC--}},[])}function QF(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var id=function(){return id=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},id.apply(this,arguments)};function YY(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Fge(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var $2="right-scroll-bar-position",z2="width-before-scroll-bar",Bge="with-scroll-bars-hidden",$ge="--removed-body-scroll-bar-size";function HC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function zge(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var qge=typeof window<"u"?N.useLayoutEffect:N.useEffect,ZF=new WeakMap;function Uge(t,e){var n=zge(null,function(r){return t.forEach(function(i){return HC(i,r)})});return qge(function(){var r=ZF.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(l){s.has(l)||HC(l,null)}),s.forEach(function(l){i.has(l)||HC(l,o)})}ZF.set(n,t)},[t]),n}function Hge(t){return t}function Vge(t,e){e===void 0&&(e=Hge);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function Wge(t){t===void 0&&(t={});var e=Vge(null);return e.options=id({async:!0,ssr:!1},t),e}var XY=function(t){var e=t.sideCar,n=YY(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,id({},n))};XY.isSideCarExport=!0;function Kge(t,e){return t.useMedium(e),XY}var QY=Wge(),VC=function(){},nE=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:VC,onWheelCapture:VC,onTouchMoveCapture:VC}),i=r[0],s=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,m=t.noRelative,v=t.noIsolation,y=t.inert,x=t.allowPinchZoom,b=t.as,S=b===void 0?"div":b,j=t.gapMode,E=YY(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,P=Uge([n,e]),O=id(id({},E),i);return N.createElement(N.Fragment,null,d&&N.createElement(A,{sideCar:QY,removeScrollBar:u,shards:f,noRelative:m,noIsolation:v,inert:y,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:j}),o?N.cloneElement(N.Children.only(l),id(id({},O),{ref:P})):N.createElement(S,id({},O,{className:c,ref:P}),l))});nE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nE.classNames={fullWidth:z2,zeroRight:$2};var Gge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Yge(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Gge();return e&&t.setAttribute("nonce",e),t}function Xge(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Qge(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Zge=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Yge())&&(Xge(e,n),Qge(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Jge=function(){var t=Zge();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ZY=function(){var t=Jge(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},eve={left:0,top:0,right:0,gap:0},WC=function(t){return parseInt(t||"",10)||0},tve=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[WC(n),WC(r),WC(i)]},nve=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return eve;var e=tve(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},rve=ZY(),Hv="data-scroll-locked",ive=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Bge,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Hv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($2,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(z2,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat($2," .").concat($2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(z2," .").concat(z2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hv,`] {
    `).concat($ge,": ").concat(l,`px;
  }
`)},JF=function(){var t=parseInt(document.body.getAttribute(Hv)||"0",10);return isFinite(t)?t:0},sve=function(){N.useEffect(function(){return document.body.setAttribute(Hv,(JF()+1).toString()),function(){var t=JF()-1;t<=0?document.body.removeAttribute(Hv):document.body.setAttribute(Hv,t.toString())}},[])},ave=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;sve();var s=N.useMemo(function(){return nve(i)},[i]);return N.createElement(rve,{styles:ive(s,!e,i,n?"":"!important")})},qP=!1;if(typeof window<"u")try{var Lw=Object.defineProperty({},"passive",{get:function(){return qP=!0,!0}});window.addEventListener("test",Lw,Lw),window.removeEventListener("test",Lw,Lw)}catch{qP=!1}var nv=qP?{passive:!1}:!1,ove=function(t){return t.tagName==="TEXTAREA"},JY=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ove(t)&&n[e]==="visible")},lve=function(t){return JY(t,"overflowY")},cve=function(t){return JY(t,"overflowX")},e8=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=eX(t,r);if(i){var s=tX(t,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},uve=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},dve=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},eX=function(t,e){return t==="v"?lve(e):cve(e)},tX=function(t,e){return t==="v"?uve(e):dve(e)},fve=function(t,e){return t==="h"&&e==="rtl"?-1:1},hve=function(t,e,n,r,i){var s=fve(t,window.getComputedStyle(e).direction),o=s*r,l=n.target,c=e.contains(l),u=!1,d=o>0,f=0,p=0;do{if(!l)break;var m=tX(t,l),v=m[0],y=m[1],x=m[2],b=y-x-s*v;(v||b)&&eX(t,l)&&(f+=b,p+=v);var S=l.parentNode;l=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Fw=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},t8=function(t){return[t.deltaX,t.deltaY]},n8=function(t){return t&&"current"in t?t.current:t},pve=function(t,e){return t[0]===e[0]&&t[1]===e[1]},mve=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gve=0,rv=[];function vve(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(gve++)[0],s=N.useState(ZY)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=Fge([t.lockRef.current],(t.shards||[]).map(n8),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=Fw(y),S=n.current,j="deltaX"in y?y.deltaX:S[0]-b[0],E="deltaY"in y?y.deltaY:S[1]-b[1],A,P=y.target,O=Math.abs(j)>Math.abs(E)?"h":"v";if("touches"in y&&O==="h"&&P.type==="range")return!1;var k=e8(O,P);if(!k)return!0;if(k?A=O:(A=O==="v"?"h":"v",k=e8(O,P)),!k)return!1;if(!r.current&&"changedTouches"in y&&(j||E)&&(r.current=A),!A)return!0;var C=r.current||A;return hve(C,x,y,C==="h"?j:E)},[]),c=N.useCallback(function(y){var x=y;if(!(!rv.length||rv[rv.length-1]!==s)){var b="deltaY"in x?t8(x):Fw(x),S=e.current.filter(function(A){return A.name===x.type&&(A.target===x.target||x.target===A.shadowParent)&&pve(A.delta,b)})[0];if(S&&S.should){x.cancelable&&x.preventDefault();return}if(!S){var j=(o.current.shards||[]).map(n8).filter(Boolean).filter(function(A){return A.contains(x.target)}),E=j.length>0?l(x,j[0]):!o.current.noIsolation;E&&x.cancelable&&x.preventDefault()}}},[]),u=N.useCallback(function(y,x,b,S){var j={name:y,delta:x,target:b,should:S,shadowParent:yve(b)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(E){return E!==j})},1)},[]),d=N.useCallback(function(y){n.current=Fw(y),r.current=void 0},[]),f=N.useCallback(function(y){u(y.type,t8(y),y.target,l(y,t.lockRef.current))},[]),p=N.useCallback(function(y){u(y.type,Fw(y),y.target,l(y,t.lockRef.current))},[]);N.useEffect(function(){return rv.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,nv),document.addEventListener("touchmove",c,nv),document.addEventListener("touchstart",d,nv),function(){rv=rv.filter(function(y){return y!==s}),document.removeEventListener("wheel",c,nv),document.removeEventListener("touchmove",c,nv),document.removeEventListener("touchstart",d,nv)}},[]);var m=t.removeScrollBar,v=t.inert;return N.createElement(N.Fragment,null,v?N.createElement(s,{styles:mve(i)}):null,m?N.createElement(ave,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function yve(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const xve=Kge(QY,vve);var N1=N.forwardRef(function(t,e){return N.createElement(nE,id({},t,{ref:e,sideCar:xve}))});N1.classNames=nE.classNames;var bve=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},iv=new WeakMap,Bw=new WeakMap,$w={},KC=0,nX=function(t){return t&&(t.host||nX(t.parentNode))},wve=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=nX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Nve=function(t,e,n,r){var i=wve(e,Array.isArray(t)?t:[t]);$w[n]||($w[n]=new WeakMap);var s=$w[n],o=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))d(p);else try{var m=p.getAttribute(r),v=m!==null&&m!=="false",y=(iv.get(p)||0)+1,x=(s.get(p)||0)+1;iv.set(p,y),s.set(p,x),o.push(p),y===1&&v&&Bw.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return d(e),l.clear(),KC++,function(){o.forEach(function(f){var p=iv.get(f)-1,m=s.get(f)-1;iv.set(f,p),s.set(f,m),p||(Bw.has(f)||f.removeAttribute(r),Bw.delete(f)),m||f.removeAttribute(n)}),KC--,KC||(iv=new WeakMap,iv=new WeakMap,Bw=new WeakMap,$w={})}},rE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=bve(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Nve(r,i,n,"aria-hidden")):function(){return null}},iE="Dialog",[rX,iX]=Gs(iE),[Sve,Eu]=rX(iE),sX=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,d]=Ro({prop:r,defaultProp:i??!1,onChange:s,caller:iE});return a.jsx(Sve,{scope:e,triggerRef:l,contentRef:c,contentId:Hs(),titleId:Hs(),descriptionId:Hs(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};sX.displayName=iE;var aX="DialogTrigger",oX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Eu(aX,n),s=_n(e,i.triggerRef);return a.jsx(Lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":AD(i.open),...r,ref:s,onClick:bt(t.onClick,i.onOpenToggle)})});oX.displayName=aX;var _D="DialogPortal",[jve,lX]=rX(_D,{forceMount:void 0}),cX=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Eu(_D,e);return a.jsx(jve,{scope:e,forceMount:n,children:N.Children.map(r,o=>a.jsx(ua,{present:n||s.open,children:a.jsx(Xy,{asChild:!0,container:i,children:o})}))})};cX.displayName=_D;var gN="DialogOverlay",uX=N.forwardRef((t,e)=>{const n=lX(gN,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Eu(gN,t.__scopeDialog);return s.modal?a.jsx(ua,{present:r||s.open,children:a.jsx(_ve,{...i,ref:e})}):null});uX.displayName=gN;var Eve=hp("DialogOverlay.RemoveScroll"),_ve=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Eu(gN,n);return a.jsx(N1,{as:Eve,allowPinchZoom:!0,shards:[i.contentRef],children:a.jsx(Lt.div,{"data-state":AD(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Xm="DialogContent",dX=N.forwardRef((t,e)=>{const n=lX(Xm,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Eu(Xm,t.__scopeDialog);return a.jsx(ua,{present:r||s.open,children:s.modal?a.jsx(Cve,{...i,ref:e}):a.jsx(Ave,{...i,ref:e})})});dX.displayName=Xm;var Cve=N.forwardRef((t,e)=>{const n=Eu(Xm,t.__scopeDialog),r=N.useRef(null),i=_n(e,n.contentRef,r);return N.useEffect(()=>{const s=r.current;if(s)return rE(s)},[]),a.jsx(fX,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:bt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:bt(t.onFocusOutside,s=>s.preventDefault())})}),Ave=N.forwardRef((t,e)=>{const n=Eu(Xm,t.__scopeDialog),r=N.useRef(!1),i=N.useRef(!1);return a.jsx(fX,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),fX=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,l=Eu(Xm,n),c=N.useRef(null),u=_n(e,c);return tE(),a.jsxs(a.Fragment,{children:[a.jsx(w1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(vg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":AD(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(Tve,{titleId:l.titleId}),a.jsx(Pve,{contentRef:c,descriptionId:l.descriptionId})]})]})}),CD="DialogTitle",hX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Eu(CD,n);return a.jsx(Lt.h2,{id:i.titleId,...r,ref:e})});hX.displayName=CD;var pX="DialogDescription",mX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Eu(pX,n);return a.jsx(Lt.p,{id:i.descriptionId,...r,ref:e})});mX.displayName=pX;var gX="DialogClose",vX=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Eu(gX,n);return a.jsx(Lt.button,{type:"button",...r,ref:e,onClick:bt(t.onClick,()=>i.onOpenChange(!1))})});vX.displayName=gX;function AD(t){return t?"open":"closed"}var yX="DialogTitleWarning",[kve,xX]=Nde(yX,{contentName:Xm,titleName:CD,docsSlug:"dialog"}),Tve=({titleId:t})=>{const e=xX(yX),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Ove="DialogDescriptionWarning",Pve=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xX(Ove).contentName}}.`;return N.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},sE=sX,bX=oX,aE=cX,nx=uX,rx=dX,S1=hX,j1=mX,oE=vX;const Mve=sE,Rve=aE,wX=N.forwardRef(({className:t,...e},n)=>a.jsx(nx,{className:ft("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));wX.displayName=nx.displayName;const Dve=yg("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),NX=N.forwardRef(({side:t="right",className:e,children:n,...r},i)=>a.jsxs(Rve,{children:[a.jsx(wX,{}),a.jsxs(rx,{ref:i,className:ft(Dve({side:t}),e),...r,children:[n,a.jsxs(oE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Gm,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));NX.displayName=rx.displayName;const SX=({className:t,...e})=>a.jsx("div",{className:ft("flex flex-col space-y-2 text-center sm:text-left",t),...e});SX.displayName="SheetHeader";const jX=N.forwardRef(({className:t,...e},n)=>a.jsx(S1,{ref:n,className:ft("text-lg font-semibold text-foreground",t),...e}));jX.displayName=S1.displayName;const EX=N.forwardRef(({className:t,...e},n)=>a.jsx(j1,{ref:n,className:ft("text-sm text-muted-foreground",t),...e}));EX.displayName=j1.displayName;function pr({className:t,...e}){return a.jsx("div",{className:ft("animate-pulse rounded-md bg-muted",t),...e})}const Ive="sidebar_state",Lve=3600*24*7,Fve="16rem",Bve="18rem",$ve="3rem",zve="b",_X=N.createContext(null);function kD(){const t=N.useContext(_X);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function qve({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:s,...o}){const l=Cge(),[c,u]=N.useState(!1),[d,f]=N.useState(t),p=e??d,m=N.useCallback(b=>{const S=typeof b=="function"?b(p):b;n?n(S):f(S),document.cookie=`${Ive}=${S}; path=/; max-age=${Lve}`},[n,p]),v=N.useCallback(()=>l?u(b=>!b):m(b=>!b),[l,m,u]);N.useEffect(()=>{const b=S=>{S.key===zve&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),v())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[v]);const y=p?"expanded":"collapsed",x=N.useMemo(()=>({state:y,open:p,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:v}),[y,p,m,l,c,u,v]);return a.jsx(_X.Provider,{value:x,children:a.jsx(CY,{delayDuration:0,children:a.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Fve,"--sidebar-width-icon":$ve,...i},className:ft("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...o,children:s})})})}function Uve({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...s}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:u}=kD();return n==="none"?a.jsx("div",{"data-slot":"sidebar",className:ft("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",r),...s,children:i}):o?a.jsx(Mve,{open:c,onOpenChange:u,...s,children:a.jsxs(NX,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":Bve},side:t,children:[a.jsxs(SX,{className:"sr-only",children:[a.jsx(jX,{children:"Sidebar"}),a.jsx(EX,{children:"Displays the mobile sidebar."})]}),a.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):a.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[a.jsx("div",{"data-slot":"sidebar-gap",className:ft("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),a.jsx("div",{"data-slot":"sidebar-container",className:ft("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...s,children:a.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function Hve({className:t,onClick:e,...n}){const{toggleSidebar:r}=kD();return a.jsxs(pe,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ft("h-7 w-7",t),onClick:i=>{e?.(i),r()},...n,children:[a.jsx(Vfe,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function Vve({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ft("flex flex-col gap-2 p-2",t),...e})}function Wve({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ft("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function Kve({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ft("relative flex w-full min-w-0 flex-col p-2",t),...e})}function Gve({className:t,asChild:e=!1,...n}){const r=e?Ij:"div";return a.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ft("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function Yve({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ft("w-full text-sm",t),...e})}function Xve({className:t,...e}){return a.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ft("flex w-full min-w-0 flex-col gap-1",t),...e})}function Qve({className:t,...e}){return a.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ft("group/menu-item relative",t),...e})}const Zve=yg("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Jve({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:s,...o}){const l=t?Ij:"button",{isMobile:c,state:u}=kD(),d=a.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:ft(Zve({variant:n,size:r}),s),...o});return i?(typeof i=="string"&&(i={children:i}),a.jsxs(AY,{children:[a.jsx(kY,{asChild:!0,children:d}),a.jsx(bD,{side:"right",align:"center",hidden:u!=="collapsed"||c,...i})]})):d}function eye(){return Rj.useSyncExternalStore(tye,()=>!0,()=>!1)}function tye(){return()=>{}}var TD="Avatar",[nye]=Gs(TD),[rye,CX]=nye(TD),AX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=N.useState("idle");return a.jsx(rye,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:a.jsx(Lt.span,{...r,ref:e})})});AX.displayName=TD;var kX="AvatarImage",TX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=CX(kX,n),l=iye(r,s),c=bs(u=>{i(u),o.onImageLoadingStatusChange(u)});return ws(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Lt.img,{...s,ref:e,src:r}):null});TX.displayName=kX;var OX="AvatarFallback",PX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=CX(OX,n),[o,l]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?a.jsx(Lt.span,{...i,ref:e}):null});PX.displayName=OX;function r8(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function iye(t,{referrerPolicy:e,crossOrigin:n}){const r=eye(),i=N.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=N.useState(()=>r8(s,t));return ws(()=>{l(r8(s,t))},[s,t]),ws(()=>{const c=f=>()=>{l(f)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,n,e]),o}var MX=AX,RX=TX,DX=PX;const vN=N.forwardRef(({className:t,...e},n)=>a.jsx(MX,{ref:n,className:ft(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));vN.displayName=MX.displayName;const sye=N.forwardRef(({className:t,...e},n)=>a.jsx(RX,{ref:n,className:ft("aspect-square h-full w-full",t),...e}));sye.displayName=RX.displayName;const yN=N.forwardRef(({className:t,...e},n)=>a.jsx(DX,{ref:n,className:ft("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));yN.displayName=DX.displayName;const aye=[{title:"Dashboard",url:"/",icon:Mfe,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Clientes",url:"/clientes",icon:ip,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Impuestos",url:"/impuestos/control",icon:Vi,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Documentacin",url:"/documentacion",icon:lN,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Tareas",url:"/tareas",icon:zv,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Manuales",url:"/manuales",icon:lN,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Notificaciones",url:"/notificaciones",icon:mfe,roles:["Administrador","Gestor"]},{title:"Auditora",url:"/auditoria",icon:Sm,roles:["Administrador","Gestor"]},{title:"Administracin",url:"/admin",icon:zj,roles:["Administrador"]}];function oye(){const[t]=ca(),{user:e,logout:n}=xg(),r=aye.filter(s=>e&&e.roleName&&Array.isArray(s.roles)&&s.roles.includes(e.roleName)),i=s=>s.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return a.jsxs(Uve,{children:[a.jsxs(Wve,{children:[a.jsx("div",{className:"p-6",children:a.jsx("h1",{className:"text-xl font-display font-bold text-primary",children:"Asesora La Llave"})}),a.jsxs(Kve,{children:[a.jsx(Gve,{children:"Navegacin"}),a.jsx(Yve,{children:a.jsx(Xve,{children:r.map(s=>a.jsx(Qve,{children:a.jsx(Jve,{asChild:!0,isActive:t.startsWith(s.url)||t===s.url,children:a.jsxs(Cb,{href:s.url,"data-testid":`link-${s.title.toLowerCase()}`,children:[a.jsx(s.icon,{className:"h-4 w-4"}),a.jsx("span",{children:s.title})]})})},s.title))})})]})]}),a.jsxs(Vve,{className:"p-4",children:[e&&a.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b",children:[a.jsx(vN,{className:"h-9 w-9",children:a.jsx(yN,{className:"bg-primary text-primary-foreground text-sm",children:i(e.username)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:e.username}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.roleName||"Sin rol"})]})]}),a.jsxs(pe,{variant:"ghost",className:"w-full justify-start",onClick:n,"data-testid":"button-logout",children:[a.jsx($fe,{className:"h-4 w-4 mr-2"}),"Cerrar Sesin"]})]})]})}function lye(){const{theme:t,toggleTheme:e}=Tme();return a.jsxs(pe,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-theme-toggle",children:[t==="light"?a.jsx(Ufe,{className:"h-5 w-5"}):a.jsx(Zfe,{className:"h-5 w-5"}),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}var i8=1,cye=.9,uye=.8,dye=.17,GC=.1,YC=.999,fye=.9999,hye=.99,pye=/[\\\/_+.#"@\[\(\{&]/,mye=/[\\\/_+.#"@\[\(\{&]/g,gye=/[\s-]/,IX=/[\s-]/g;function UP(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?i8:hye;var l=`${i},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,i),d=0,f,p,m,v;u>=0;)f=UP(t,e,n,r,u+1,s+1,o),f>d&&(u===i?f*=i8:pye.test(t.charAt(u-1))?(f*=uye,m=t.slice(i,u-1).match(mye),m&&i>0&&(f*=Math.pow(YC,m.length))):gye.test(t.charAt(u-1))?(f*=cye,v=t.slice(i,u-1).match(IX),v&&i>0&&(f*=Math.pow(YC,v.length))):(f*=dye,i>0&&(f*=Math.pow(YC,u-i))),t.charAt(u)!==e.charAt(s)&&(f*=fye)),(f<GC&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(p=UP(t,e,n,r,u+1,s+2,o),p*GC>f&&(f=p*GC)),f>d&&(d=f),u=n.indexOf(c,u+1);return o[l]=d,d}function s8(t){return t.toLowerCase().replace(IX," ")}function vye(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,UP(t,e,s8(t),s8(e),0,0,{})}var Xx='[cmdk-group=""]',XC='[cmdk-group-items=""]',yye='[cmdk-group-heading=""]',LX='[cmdk-item=""]',a8=`${LX}:not([aria-disabled="true"])`,HP="cmdk-item-select",bv="data-value",xye=(t,e,n)=>vye(t,e,n),FX=N.createContext(void 0),E1=()=>N.useContext(FX),BX=N.createContext(void 0),OD=()=>N.useContext(BX),$X=N.createContext(void 0),zX=N.forwardRef((t,e)=>{let n=wv(()=>{var F,G;return{search:"",value:(G=(F=t.value)!=null?F:t.defaultValue)!=null?G:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=wv(()=>new Set),i=wv(()=>new Map),s=wv(()=>new Map),o=wv(()=>new Set),l=qX(t),{label:c,children:u,value:d,onValueChange:f,filter:p,shouldFilter:m,loop:v,disablePointerSelection:y=!1,vimBindings:x=!0,...b}=t,S=Hs(),j=Hs(),E=Hs(),A=N.useRef(null),P=Tye();Qm(()=>{if(d!==void 0){let F=d.trim();n.current.value=F,O.emit()}},[d]),Qm(()=>{P(6,L)},[]);let O=N.useMemo(()=>({subscribe:F=>(o.current.add(F),()=>o.current.delete(F)),snapshot:()=>n.current,setState:(F,G,te)=>{var le,he,me,xe;if(!Object.is(n.current[F],G)){if(n.current[F]=G,F==="search")D(),I(),P(1,R);else if(F==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let de=document.getElementById(E);de?de.focus():(le=document.getElementById(S))==null||le.focus()}if(P(7,()=>{var de;n.current.selectedItemId=(de=z())==null?void 0:de.id,O.emit()}),te||P(5,L),((he=l.current)==null?void 0:he.value)!==void 0){let de=G??"";(xe=(me=l.current).onValueChange)==null||xe.call(me,de);return}}O.emit()}},emit:()=>{o.current.forEach(F=>F())}}),[]),k=N.useMemo(()=>({value:(F,G,te)=>{var le;G!==((le=s.current.get(F))==null?void 0:le.value)&&(s.current.set(F,{value:G,keywords:te}),n.current.filtered.items.set(F,C(G,te)),P(2,()=>{I(),O.emit()}))},item:(F,G)=>(r.current.add(F),G&&(i.current.has(G)?i.current.get(G).add(F):i.current.set(G,new Set([F]))),P(3,()=>{D(),I(),n.current.value||R(),O.emit()}),()=>{s.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let te=z();P(4,()=>{D(),te?.getAttribute("id")===F&&R(),O.emit()})}),group:F=>(i.current.has(F)||i.current.set(F,new Set),()=>{s.current.delete(F),i.current.delete(F)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:S,inputId:E,labelId:j,listInnerRef:A}),[]);function C(F,G){var te,le;let he=(le=(te=l.current)==null?void 0:te.filter)!=null?le:xye;return F?he(F,n.current.search,G):0}function I(){if(!n.current.search||l.current.shouldFilter===!1)return;let F=n.current.filtered.items,G=[];n.current.filtered.groups.forEach(le=>{let he=i.current.get(le),me=0;he.forEach(xe=>{let de=F.get(xe);me=Math.max(de,me)}),G.push([le,me])});let te=A.current;W().sort((le,he)=>{var me,xe;let de=le.getAttribute("id"),Ne=he.getAttribute("id");return((me=F.get(Ne))!=null?me:0)-((xe=F.get(de))!=null?xe:0)}).forEach(le=>{let he=le.closest(XC);he?he.appendChild(le.parentElement===he?le:le.closest(`${XC} > *`)):te.appendChild(le.parentElement===te?le:le.closest(`${XC} > *`))}),G.sort((le,he)=>he[1]-le[1]).forEach(le=>{var he;let me=(he=A.current)==null?void 0:he.querySelector(`${Xx}[${bv}="${encodeURIComponent(le[0])}"]`);me?.parentElement.appendChild(me)})}function R(){let F=W().find(te=>te.getAttribute("aria-disabled")!=="true"),G=F?.getAttribute(bv);O.setState("value",G||void 0)}function D(){var F,G,te,le;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let he=0;for(let me of r.current){let xe=(G=(F=s.current.get(me))==null?void 0:F.value)!=null?G:"",de=(le=(te=s.current.get(me))==null?void 0:te.keywords)!=null?le:[],Ne=C(xe,de);n.current.filtered.items.set(me,Ne),Ne>0&&he++}for(let[me,xe]of i.current)for(let de of xe)if(n.current.filtered.items.get(de)>0){n.current.filtered.groups.add(me);break}n.current.filtered.count=he}function L(){var F,G,te;let le=z();le&&(((F=le.parentElement)==null?void 0:F.firstChild)===le&&((te=(G=le.closest(Xx))==null?void 0:G.querySelector(yye))==null||te.scrollIntoView({block:"nearest"})),le.scrollIntoView({block:"nearest"}))}function z(){var F;return(F=A.current)==null?void 0:F.querySelector(`${LX}[aria-selected="true"]`)}function W(){var F;return Array.from(((F=A.current)==null?void 0:F.querySelectorAll(a8))||[])}function X(F){let G=W()[F];G&&O.setState("value",G.getAttribute(bv))}function q(F){var G;let te=z(),le=W(),he=le.findIndex(xe=>xe===te),me=le[he+F];(G=l.current)!=null&&G.loop&&(me=he+F<0?le[le.length-1]:he+F===le.length?le[0]:le[he+F]),me&&O.setState("value",me.getAttribute(bv))}function V(F){let G=z(),te=G?.closest(Xx),le;for(;te&&!le;)te=F>0?Aye(te,Xx):kye(te,Xx),le=te?.querySelector(a8);le?O.setState("value",le.getAttribute(bv)):q(F)}let Y=()=>X(W().length-1),re=F=>{F.preventDefault(),F.metaKey?Y():F.altKey?V(1):q(1)},Q=F=>{F.preventDefault(),F.metaKey?X(0):F.altKey?V(-1):q(-1)};return N.createElement(Lt.div,{ref:e,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var G;(G=b.onKeyDown)==null||G.call(b,F);let te=F.nativeEvent.isComposing||F.keyCode===229;if(!(F.defaultPrevented||te))switch(F.key){case"n":case"j":{x&&F.ctrlKey&&re(F);break}case"ArrowDown":{re(F);break}case"p":case"k":{x&&F.ctrlKey&&Q(F);break}case"ArrowUp":{Q(F);break}case"Home":{F.preventDefault(),X(0);break}case"End":{F.preventDefault(),Y();break}case"Enter":{F.preventDefault();let le=z();if(le){let he=new Event(HP);le.dispatchEvent(he)}}}}},N.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:Pye},c),lE(t,F=>N.createElement(BX.Provider,{value:O},N.createElement(FX.Provider,{value:k},F))))}),bye=N.forwardRef((t,e)=>{var n,r;let i=Hs(),s=N.useRef(null),o=N.useContext($X),l=E1(),c=qX(t),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o?.forceMount;Qm(()=>{if(!u)return l.item(i,o?.id)},[u]);let d=UX(i,s,[t.value,t.children,s],t.keywords),f=OD(),p=yp(P=>P.value&&P.value===d.current),m=yp(P=>u||l.filter()===!1?!0:P.search?P.filtered.items.get(i)>0:!0);N.useEffect(()=>{let P=s.current;if(!(!P||t.disabled))return P.addEventListener(HP,v),()=>P.removeEventListener(HP,v)},[m,t.onSelect,t.disabled]);function v(){var P,O;y(),(O=(P=c.current).onSelect)==null||O.call(P,d.current)}function y(){f.setState("value",d.current,!0)}if(!m)return null;let{disabled:x,value:b,onSelect:S,forceMount:j,keywords:E,...A}=t;return N.createElement(Lt.div,{ref:If(s,e),...A,id:i,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||l.getDisablePointerSelection()?void 0:y,onClick:x?void 0:v},t.children)}),wye=N.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=Hs(),l=N.useRef(null),c=N.useRef(null),u=Hs(),d=E1(),f=yp(m=>i||d.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Qm(()=>d.group(o),[]),UX(o,l,[t.value,t.heading,c]);let p=N.useMemo(()=>({id:o,forceMount:i}),[i]);return N.createElement(Lt.div,{ref:If(l,e),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&N.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),lE(t,m=>N.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},N.createElement($X.Provider,{value:p},m))))}),Nye=N.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=N.useRef(null),s=yp(o=>!o.search);return!n&&!s?null:N.createElement(Lt.div,{ref:If(i,e),...r,"cmdk-separator":"",role:"separator"})}),Sye=N.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=OD(),o=yp(u=>u.search),l=yp(u=>u.selectedItemId),c=E1();return N.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),N.createElement(Lt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:i?t.value:o,onChange:u=>{i||s.setState("search",u.target.value),n?.(u.target.value)}})}),jye=N.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=N.useRef(null),o=N.useRef(null),l=yp(u=>u.selectedItemId),c=E1();return N.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(f),p.unobserve(u)}}},[]),N.createElement(Lt.div,{ref:If(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},lE(t,u=>N.createElement("div",{ref:If(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Eye=N.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...l}=t;return N.createElement(sE,{open:n,onOpenChange:r},N.createElement(aE,{container:o},N.createElement(nx,{"cmdk-overlay":"",className:i}),N.createElement(rx,{"aria-label":t.label,"cmdk-dialog":"",className:s},N.createElement(zX,{ref:e,...l}))))}),_ye=N.forwardRef((t,e)=>yp(n=>n.filtered.count===0)?N.createElement(Lt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),Cye=N.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return N.createElement(Lt.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},lE(t,o=>N.createElement("div",{"aria-hidden":!0},o)))}),dl=Object.assign(zX,{List:jye,Item:bye,Input:Sye,Group:wye,Separator:Nye,Dialog:Eye,Empty:_ye,Loading:Cye});function Aye(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function kye(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function qX(t){let e=N.useRef(t);return Qm(()=>{e.current=t}),e}var Qm=typeof window>"u"?N.useEffect:N.useLayoutEffect;function wv(t){let e=N.useRef();return e.current===void 0&&(e.current=t()),e}function yp(t){let e=OD(),n=()=>t(e.snapshot());return N.useSyncExternalStore(e.subscribe,n,n)}function UX(t,e,n,r=[]){let i=N.useRef(),s=E1();return Qm(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=r.map(u=>u.trim());s.value(t,l,c),(o=e.current)==null||o.setAttribute(bv,l),i.current=l}),i}var Tye=()=>{let[t,e]=N.useState(),n=wv(()=>new Map);return Qm(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function Oye(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function lE({asChild:t,children:e},n){return t&&N.isValidElement(e)?N.cloneElement(Oye(e),{ref:e.ref},n(e.props.children)):n(e)}var Pye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const xr=sE,Ua=bX,Mye=aE,HX=N.forwardRef(({className:t,...e},n)=>a.jsx(nx,{ref:n,className:ft("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));HX.displayName=nx.displayName;const vr=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Mye,{children:[a.jsx(HX,{}),a.jsxs(rx,{ref:r,className:ft("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 max-h-[85vh] overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(oE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(Gm,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vr.displayName=rx.displayName;const br=({className:t,...e})=>a.jsx("div",{className:ft("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});br.displayName="DialogHeader";const ss=({className:t,...e})=>a.jsx("div",{className:ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ss.displayName="DialogFooter";const wr=N.forwardRef(({className:t,...e},n)=>a.jsx(S1,{ref:n,className:ft("text-lg font-semibold leading-none tracking-tight",t),...e}));wr.displayName=S1.displayName;const _r=N.forwardRef(({className:t,...e},n)=>a.jsx(j1,{ref:n,className:ft("text-sm text-muted-foreground",t),...e}));_r.displayName=j1.displayName;const VX=N.forwardRef(({className:t,...e},n)=>a.jsx(dl,{ref:n,className:ft("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));VX.displayName=dl.displayName;const Rye=({children:t,...e})=>a.jsx(xr,{...e,children:a.jsx(vr,{className:"overflow-hidden p-0 shadow-lg",children:a.jsx(VX,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),WX=N.forwardRef(({className:t,...e},n)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(Qy,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(dl.Input,{ref:n,className:ft("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));WX.displayName=dl.Input.displayName;const KX=N.forwardRef(({className:t,...e},n)=>a.jsx(dl.List,{ref:n,className:ft("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));KX.displayName=dl.List.displayName;const GX=N.forwardRef((t,e)=>a.jsx(dl.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));GX.displayName=dl.Empty.displayName;const q2=N.forwardRef(({className:t,...e},n)=>a.jsx(dl.Group,{ref:n,className:ft("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));q2.displayName=dl.Group.displayName;const Dye=N.forwardRef(({className:t,...e},n)=>a.jsx(dl.Separator,{ref:n,className:ft("-mx-1 h-px bg-border",t),...e}));Dye.displayName=dl.Separator.displayName;const U2=N.forwardRef(({className:t,...e},n)=>a.jsx(dl.Item,{ref:n,className:ft("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));U2.displayName=dl.Item.displayName;function Iye(){const[t,e]=N.useState(!1),[n,r]=N.useState(""),[,i]=ca();N.useEffect(()=>{const l=c=>{c.key==="k"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),e(u=>!u))};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[]);const{data:s}=Wt({queryKey:["/api/search",n],enabled:n.length>=2,queryFn:async()=>{const l=await fetch(`/api/search?q=${encodeURIComponent(n)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!l.ok)throw new Error("Error en bsqueda");return l.json()}}),o=(l,c)=>{e(!1),r(""),l==="cliente"?i("/clientes"):l==="tarea"?i("/tareas"):l==="manual"&&i(`/manuales/${c}`)};return a.jsxs(a.Fragment,{children:[a.jsxs(pe,{variant:"outline",className:"relative w-full justify-start text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64",onClick:()=>e(!0),"data-testid":"button-global-search",children:[a.jsx(Qy,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden lg:inline-flex",children:"Buscar..."}),a.jsx("span",{className:"inline-flex lg:hidden",children:"Buscar"}),a.jsxs("kbd",{className:"pointer-events-none absolute right-1.5 top-2 hidden h-6 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[a.jsx("span",{className:"text-xs",children:""}),"K"]})]}),a.jsxs(Rye,{open:t,onOpenChange:e,children:[a.jsx(WX,{placeholder:"Buscar clientes, tareas, impuestos, manuales...",value:n,onValueChange:r,"data-testid":"input-global-search"}),a.jsxs(KX,{children:[a.jsx(GX,{children:n.length<2?"Escribe al menos 2 caracteres para buscar":"No se encontraron resultados"}),s&&s.clientes.length>0&&a.jsx(q2,{heading:"Clientes",children:s.clientes.map(l=>a.jsxs(U2,{onSelect:()=>o("cliente",l.id),"data-testid":`search-result-client-${l.id}`,children:[a.jsx(Km,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.razonSocial}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.nifCif})]})]},l.id))}),s&&s.tareas.length>0&&a.jsx(q2,{heading:"Tareas",children:s.tareas.map(l=>a.jsxs(U2,{onSelect:()=>o("tarea",l.id),"data-testid":`search-result-task-${l.id}`,children:[a.jsx(zv,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.titulo}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.estado})]})]},l.id))}),null,s&&s.manuales.length>0&&a.jsx(q2,{heading:"Manuales",children:s.manuales.map(l=>a.jsxs(U2,{onSelect:()=>o("manual",l.id),"data-testid":`search-result-manual-${l.id}`,children:[a.jsx(lN,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.titulo}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.categoria})]})]},l.id))})]})]})]})}function Lye(){const{data:t,isLoading:e}=Wt({queryKey:["/api/health"],refetchInterval:3e4,retry:2}),n=t?.status==="healthy"&&t?.database==="connected";return e?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(CP,{className:"h-4 w-4 animate-pulse"}),a.jsx("span",{className:"hidden sm:inline",children:"Verificando..."})]}):a.jsxs(AY,{children:[a.jsx(kY,{asChild:!0,children:a.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-help",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Efe,{className:"h-4 w-4 text-green-500","data-testid":"icon-db-connected"}),a.jsx("span",{className:"hidden sm:inline",children:"DB Activa"})]}):a.jsxs(a.Fragment,{children:[a.jsx(CP,{className:"h-4 w-4 text-red-500","data-testid":"icon-db-disconnected"}),a.jsx("span",{className:"hidden sm:inline",children:"DB Desconectada"})]})})}),a.jsx(bD,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"font-semibold",children:["Estado: ",n?"Conectada":"Desconectada"]}),t?.timestamp&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["ltima verificacin: ",new Date(t.timestamp).toLocaleTimeString()]})]})})]})}const Xe=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Xe.displayName="Card";const ht=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("flex flex-col space-y-1.5 p-6",t),...e}));ht.displayName="CardHeader";const gt=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("text-2xl font-semibold leading-none tracking-tight",t),...e}));gt.displayName="CardTitle";const jn=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("text-sm text-muted-foreground",t),...e}));jn.displayName="CardDescription";const Qe=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("p-6 pt-0",t),...e}));Qe.displayName="CardContent";const Fye=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("flex items-center p-6 pt-0",t),...e}));Fye.displayName="CardFooter";function Bye(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Xe,{className:"w-full max-w-md mx-4",children:a.jsxs(Qe,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(Ec,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var $ye="Label",YX=N.forwardRef((t,e)=>a.jsx(Lt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YX.displayName=$ye;var XX=YX;const zye=yg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=N.forwardRef(({className:t,...e},n)=>a.jsx(XX,{ref:n,className:ft(zye(),t),...e}));_e.displayName=XX.displayName;var qye=N.createContext(void 0);function bg(t){const e=N.useContext(qye);return t||e||"ltr"}var QC="rovingFocusGroup.onEntryFocus",Uye={bubbles:!1,cancelable:!0},_1="RovingFocusGroup",[VP,QX,Hye]=Yy(_1),[Vye,cE]=Gs(_1,[Hye]),[Wye,Kye]=Vye(_1),ZX=N.forwardRef((t,e)=>a.jsx(VP.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(VP.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Gye,{...t,ref:e})})}));ZX.displayName=_1;var Gye=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,p=N.useRef(null),m=_n(e,p),v=bg(s),[y,x]=Ro({prop:o,defaultProp:l??null,onChange:c,caller:_1}),[b,S]=N.useState(!1),j=bs(u),E=QX(n),A=N.useRef(!1),[P,O]=N.useState(0);return N.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(QC,j),()=>k.removeEventListener(QC,j)},[j]),a.jsx(Wye,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:y,onItemFocus:N.useCallback(k=>x(k),[x]),onItemShiftTab:N.useCallback(()=>S(!0),[]),onFocusableItemAdd:N.useCallback(()=>O(k=>k+1),[]),onFocusableItemRemove:N.useCallback(()=>O(k=>k-1),[]),children:a.jsx(Lt.div,{tabIndex:b||P===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:bt(t.onMouseDown,()=>{A.current=!0}),onFocus:bt(t.onFocus,k=>{const C=!A.current;if(k.target===k.currentTarget&&C&&!b){const I=new CustomEvent(QC,Uye);if(k.currentTarget.dispatchEvent(I),!I.defaultPrevented){const R=E().filter(X=>X.focusable),D=R.find(X=>X.active),L=R.find(X=>X.id===y),W=[D,L,...R].filter(Boolean).map(X=>X.ref.current);tQ(W,d)}}A.current=!1}),onBlur:bt(t.onBlur,()=>S(!1))})})}),JX="RovingFocusGroupItem",eQ=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=t,c=Hs(),u=s||c,d=Kye(JX,n),f=d.currentTabStopId===u,p=QX(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:y}=d;return N.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),a.jsx(VP.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:a.jsx(Lt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:bt(t.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:bt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:bt(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const b=Qye(x,d.orientation,d.dir);if(b!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let j=p().filter(E=>E.focusable).map(E=>E.ref.current);if(b==="last")j.reverse();else if(b==="prev"||b==="next"){b==="prev"&&j.reverse();const E=j.indexOf(x.currentTarget);j=d.loop?Zye(j,E+1):j.slice(E+1)}setTimeout(()=>tQ(j))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});eQ.displayName=JX;var Yye={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xye(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Qye(t,e,n){const r=Xye(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Yye[r]}function tQ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Zye(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var nQ=ZX,rQ=eQ,uE="Tabs",[Jye]=Gs(uE,[cE]),iQ=cE(),[exe,PD]=Jye(uE),sQ=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=bg(l),[f,p]=Ro({prop:r,onChange:i,defaultProp:s??"",caller:uE});return a.jsx(exe,{scope:n,baseId:Hs(),value:f,onValueChange:p,orientation:o,dir:d,activationMode:c,children:a.jsx(Lt.div,{dir:d,"data-orientation":o,...u,ref:e})})});sQ.displayName=uE;var aQ="TabsList",oQ=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=PD(aQ,n),o=iQ(n);return a.jsx(nQ,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:a.jsx(Lt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});oQ.displayName=aQ;var lQ="TabsTrigger",cQ=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=PD(lQ,n),l=iQ(n),c=fQ(o.baseId,r),u=hQ(o.baseId,r),d=r===o.value;return a.jsx(rQ,{asChild:!0,...l,focusable:!i,active:d,children:a.jsx(Lt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:bt(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:bt(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:bt(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});cQ.displayName=lQ;var uQ="TabsContent",dQ=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,l=PD(uQ,n),c=fQ(l.baseId,r),u=hQ(l.baseId,r),d=r===l.value,f=N.useRef(d);return N.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(ua,{present:i||d,children:({present:p})=>a.jsx(Lt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&s})})});dQ.displayName=uQ;function fQ(t,e){return`${t}-trigger-${e}`}function hQ(t,e){return`${t}-content-${e}`}var txe=sQ,pQ=oQ,mQ=cQ,gQ=dQ;const kc=txe,ql=N.forwardRef(({className:t,...e},n)=>a.jsx(pQ,{ref:n,className:ft("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));ql.displayName=pQ.displayName;const Wn=N.forwardRef(({className:t,...e},n)=>a.jsx(mQ,{ref:n,className:ft("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Wn.displayName=mQ.displayName;const or=N.forwardRef(({className:t,...e},n)=>a.jsx(gQ,{ref:n,className:ft("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));or.displayName=gQ.displayName;function o8(){const[,t]=ca(),{login:e,register:n,logout:r,user:i}=xg(),{toast:s}=Dr(),[o,l]=N.useState({username:"",password:""}),[c,u]=N.useState({username:"",email:"",password:"",confirmPassword:""}),{data:d}=Wt({queryKey:["/api/admin/system-settings"]});N.useEffect(()=>{i&&r()},[i,r]);const f=async m=>{m.preventDefault();try{await e(o.username,o.password),s({title:"Inicio de sesin exitoso",description:"Bienvenido de nuevo"}),t("/")}catch(v){s({title:"Error",description:v.message||"Credenciales incorrectas",variant:"destructive"})}},p=async m=>{if(m.preventDefault(),c.password!==c.confirmPassword){s({title:"Error",description:"Las contraseas no coinciden",variant:"destructive"});return}try{await n(c.username,c.email,c.password),s({title:"Registro exitoso",description:"Tu cuenta ha sido creada"}),t("/")}catch(v){s({title:"Error",description:v.message||"Error al crear la cuenta",variant:"destructive"})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-ring/5 p-4",children:a.jsxs(Xe,{className:"w-full max-w-md",children:[a.jsxs(ht,{className:"space-y-1",children:[a.jsx(gt,{className:"text-3xl font-display font-bold text-center text-primary",children:"Asesora La Llave"}),a.jsx(jn,{className:"text-center",children:"Sistema de gestin profesional"})]}),a.jsx(Qe,{children:a.jsxs(kc,{defaultValue:"login",className:"w-full",children:[a.jsxs(ql,{className:`grid w-full ${d?.registrationEnabled??!0?"grid-cols-2":"grid-cols-1"} mb-6`,children:[a.jsx(Wn,{value:"login",children:"Iniciar Sesin"}),(d?.registrationEnabled??!0)&&a.jsx(Wn,{value:"register",children:"Registrarse"})]}),a.jsx(or,{value:"login",children:a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"login-username",children:"Usuario"}),a.jsx(Ye,{id:"login-username",type:"text",placeholder:"tu_usuario",value:o.username,onChange:m=>l({...o,username:m.target.value}),required:!0,"data-testid":"input-login-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"login-password",children:"Contrasea"}),a.jsx(Ye,{id:"login-password",type:"password",placeholder:"",value:o.password,onChange:m=>l({...o,password:m.target.value}),required:!0,"data-testid":"input-login-password"})]}),a.jsx(pe,{type:"submit",className:"w-full","data-testid":"button-login-submit",children:"Iniciar Sesin"})]})}),(d?.registrationEnabled??!0)&&a.jsx(or,{value:"register",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"register-username",children:"Usuario"}),a.jsx(Ye,{id:"register-username",type:"text",placeholder:"tu_usuario",value:c.username,onChange:m=>u({...c,username:m.target.value}),required:!0,"data-testid":"input-register-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"register-email",children:"Email"}),a.jsx(Ye,{id:"register-email",type:"email",placeholder:"tu@email.com",value:c.email,onChange:m=>u({...c,email:m.target.value}),required:!0,"data-testid":"input-register-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"register-password",children:"Contrasea"}),a.jsx(Ye,{id:"register-password",type:"password",placeholder:"",value:c.password,onChange:m=>u({...c,password:m.target.value}),required:!0,"data-testid":"input-register-password"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"register-confirm-password",children:"Confirmar Contrasea"}),a.jsx(Ye,{id:"register-confirm-password",type:"password",placeholder:"",value:c.confirmPassword,onChange:m=>u({...c,confirmPassword:m.target.value}),required:!0,"data-testid":"input-register-confirm-password"})]}),a.jsx(pe,{type:"submit",className:"w-full","data-testid":"button-register-submit",children:"Crear Cuenta"})]})})]})})]})})}var ZC,l8;function fl(){if(l8)return ZC;l8=1;var t=Array.isArray;return ZC=t,ZC}var JC,c8;function vQ(){if(c8)return JC;c8=1;var t=typeof kw=="object"&&kw&&kw.Object===Object&&kw;return JC=t,JC}var eA,u8;function kd(){if(u8)return eA;u8=1;var t=vQ(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return eA=n,eA}var tA,d8;function C1(){if(d8)return tA;d8=1;var t=kd(),e=t.Symbol;return tA=e,tA}var nA,f8;function nxe(){if(f8)return nA;f8=1;var t=C1(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(l?o[i]=c:delete o[i]),d}return nA=s,nA}var rA,h8;function rxe(){if(h8)return rA;h8=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return rA=n,rA}var iA,p8;function Vf(){if(p8)return iA;p8=1;var t=C1(),e=nxe(),n=rxe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?e(l):n(l)}return iA=o,iA}var sA,m8;function Wf(){if(m8)return sA;m8=1;function t(e){return e!=null&&typeof e=="object"}return sA=t,sA}var aA,g8;function ix(){if(g8)return aA;g8=1;var t=Vf(),e=Wf(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return aA=r,aA}var oA,v8;function MD(){if(v8)return oA;v8=1;var t=fl(),e=ix(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return oA=i,oA}var lA,y8;function _p(){if(y8)return lA;y8=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return lA=t,lA}var cA,x8;function RD(){if(x8)return cA;x8=1;var t=Vf(),e=_p(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==r||c==i||c==n||c==s}return cA=o,cA}var uA,b8;function ixe(){if(b8)return uA;b8=1;var t=kd(),e=t["__core-js_shared__"];return uA=e,uA}var dA,w8;function sxe(){if(w8)return dA;w8=1;var t=ixe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return dA=n,dA}var fA,N8;function yQ(){if(N8)return fA;N8=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return fA=n,fA}var hA,S8;function axe(){if(S8)return hA;S8=1;var t=RD(),e=sxe(),n=_p(),r=yQ(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!n(p)||e(p))return!1;var m=t(p)?d:s;return m.test(r(p))}return hA=f,hA}var pA,j8;function oxe(){if(j8)return pA;j8=1;function t(e,n){return e?.[n]}return pA=t,pA}var mA,E8;function wg(){if(E8)return mA;E8=1;var t=axe(),e=oxe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return mA=n,mA}var gA,_8;function dE(){if(_8)return gA;_8=1;var t=wg(),e=t(Object,"create");return gA=e,gA}var vA,C8;function lxe(){if(C8)return vA;C8=1;var t=dE();function e(){this.__data__=t?t(null):{},this.size=0}return vA=e,vA}var yA,A8;function cxe(){if(A8)return yA;A8=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return yA=t,yA}var xA,k8;function uxe(){if(k8)return xA;k8=1;var t=dE(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return r.call(o,s)?o[s]:void 0}return xA=i,xA}var bA,T8;function dxe(){if(T8)return bA;T8=1;var t=dE(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return bA=r,bA}var wA,O8;function fxe(){if(O8)return wA;O8=1;var t=dE(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return wA=n,wA}var NA,P8;function hxe(){if(P8)return NA;P8=1;var t=lxe(),e=cxe(),n=uxe(),r=dxe(),i=fxe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,NA=s,NA}var SA,M8;function pxe(){if(M8)return SA;M8=1;function t(){this.__data__=[],this.size=0}return SA=t,SA}var jA,R8;function DD(){if(R8)return jA;R8=1;function t(e,n){return e===n||e!==e&&n!==n}return jA=t,jA}var EA,D8;function fE(){if(D8)return EA;D8=1;var t=DD();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return EA=e,EA}var _A,I8;function mxe(){if(I8)return _A;I8=1;var t=fE(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return _A=r,_A}var CA,L8;function gxe(){if(L8)return CA;L8=1;var t=fE();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return CA=e,CA}var AA,F8;function vxe(){if(F8)return AA;F8=1;var t=fE();function e(n){return t(this.__data__,n)>-1}return AA=e,AA}var kA,B8;function yxe(){if(B8)return kA;B8=1;var t=fE();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return kA=e,kA}var TA,$8;function hE(){if($8)return TA;$8=1;var t=pxe(),e=mxe(),n=gxe(),r=vxe(),i=yxe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,TA=s,TA}var OA,z8;function ID(){if(z8)return OA;z8=1;var t=wg(),e=kd(),n=t(e,"Map");return OA=n,OA}var PA,q8;function xxe(){if(q8)return PA;q8=1;var t=hxe(),e=hE(),n=ID();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return PA=r,PA}var MA,U8;function bxe(){if(U8)return MA;U8=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return MA=t,MA}var RA,H8;function pE(){if(H8)return RA;H8=1;var t=bxe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return RA=e,RA}var DA,V8;function wxe(){if(V8)return DA;V8=1;var t=pE();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return DA=e,DA}var IA,W8;function Nxe(){if(W8)return IA;W8=1;var t=pE();function e(n){return t(this,n).get(n)}return IA=e,IA}var LA,K8;function Sxe(){if(K8)return LA;K8=1;var t=pE();function e(n){return t(this,n).has(n)}return LA=e,LA}var FA,G8;function jxe(){if(G8)return FA;G8=1;var t=pE();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return FA=e,FA}var BA,Y8;function LD(){if(Y8)return BA;Y8=1;var t=xxe(),e=wxe(),n=Nxe(),r=Sxe(),i=jxe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,BA=s,BA}var $A,X8;function xQ(){if(X8)return $A;X8=1;var t=LD(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,$A=n,$A}var zA,Q8;function Exe(){if(Q8)return zA;Q8=1;var t=xQ(),e=500;function n(r){var i=t(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return zA=n,zA}var qA,Z8;function _xe(){if(Z8)return qA;Z8=1;var t=Exe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return qA=r,qA}var UA,J8;function FD(){if(J8)return UA;J8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return UA=t,UA}var HA,eB;function Cxe(){if(eB)return HA;eB=1;var t=C1(),e=FD(),n=fl(),r=ix(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(r(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return HA=o,HA}var VA,tB;function bQ(){if(tB)return VA;tB=1;var t=Cxe();function e(n){return n==null?"":t(n)}return VA=e,VA}var WA,nB;function wQ(){if(nB)return WA;nB=1;var t=fl(),e=MD(),n=_xe(),r=bQ();function i(s,o){return t(s)?s:e(s,o)?[s]:n(r(s))}return WA=i,WA}var KA,rB;function mE(){if(rB)return KA;rB=1;var t=ix();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return KA=e,KA}var GA,iB;function BD(){if(iB)return GA;iB=1;var t=wQ(),e=mE();function n(r,i){i=t(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return GA=n,GA}var YA,sB;function NQ(){if(sB)return YA;sB=1;var t=BD();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return YA=e,YA}var Axe=NQ();const wc=qr(Axe);var XA,aB;function kxe(){if(aB)return XA;aB=1;function t(e){return e==null}return XA=t,XA}var Txe=kxe();const Yn=qr(Txe);var QA,oB;function Oxe(){if(oB)return QA;oB=1;var t=Vf(),e=fl(),n=Wf(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return QA=i,QA}var Pxe=Oxe();const Zm=qr(Pxe);var Mxe=RD();const tr=qr(Mxe);var Rxe=_p();const sx=qr(Rxe);var ZA={exports:{}},Kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lB;function Dxe(){if(lB)return Kr;lB=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case t:switch(x=x.type,x){case n:case i:case r:case u:case d:return x;default:switch(x=x&&x.$$typeof,x){case l:case o:case c:case p:case f:case s:return x;default:return b}}case e:return b}}}return Kr.ContextConsumer=o,Kr.ContextProvider=s,Kr.Element=t,Kr.ForwardRef=c,Kr.Fragment=n,Kr.Lazy=p,Kr.Memo=f,Kr.Portal=e,Kr.Profiler=i,Kr.StrictMode=r,Kr.Suspense=u,Kr.SuspenseList=d,Kr.isAsyncMode=function(){return!1},Kr.isConcurrentMode=function(){return!1},Kr.isContextConsumer=function(x){return y(x)===o},Kr.isContextProvider=function(x){return y(x)===s},Kr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Kr.isForwardRef=function(x){return y(x)===c},Kr.isFragment=function(x){return y(x)===n},Kr.isLazy=function(x){return y(x)===p},Kr.isMemo=function(x){return y(x)===f},Kr.isPortal=function(x){return y(x)===e},Kr.isProfiler=function(x){return y(x)===i},Kr.isStrictMode=function(x){return y(x)===r},Kr.isSuspense=function(x){return y(x)===u},Kr.isSuspenseList=function(x){return y(x)===d},Kr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===u||x===d||x===m||typeof x=="object"&&x!==null&&(x.$$typeof===p||x.$$typeof===f||x.$$typeof===s||x.$$typeof===o||x.$$typeof===c||x.$$typeof===v||x.getModuleId!==void 0)},Kr.typeOf=y,Kr}var cB;function Ixe(){return cB||(cB=1,ZA.exports=Dxe()),ZA.exports}var Lxe=Ixe(),JA,uB;function SQ(){if(uB)return JA;uB=1;var t=Vf(),e=Wf(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return JA=r,JA}var ek,dB;function Fxe(){if(dB)return ek;dB=1;var t=SQ();function e(n){return t(n)&&n!=+n}return ek=e,ek}var Bxe=Fxe();const ax=qr(Bxe);var $xe=SQ();const zxe=qr($xe);var pu=function(e){return e===0?0:e>0?1:-1},jm=function(e){return Zm(e)&&e.indexOf("%")===e.length-1},Pt=function(e){return zxe(e)&&!ax(e)},qxe=function(e){return Yn(e)},aa=function(e){return Pt(e)||Zm(e)},Uxe=0,Ng=function(e){var n=++Uxe;return"".concat(e||"").concat(n)},Jm=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pt(e)&&!Zm(e))return r;var s;if(jm(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return ax(s)&&(s=r),i&&s>n&&(s=n),s},Uh=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Hxe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},As=function(e,n){return Pt(e)&&Pt(n)?function(r){return e+r*(n-e)}:function(){return n}};function xN(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):wc(r,e))===n})}var Vxe=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,i=0,s=0,o=0,l=1/0,c=-1/0,u=0,d=0,f=0;f<n;f++)u=e[f].cx||0,d=e[f].cy||0,r+=u,i+=d,s+=u*d,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var p=n*o!==r*r?(n*s-r*i)/(n*o-r*r):0;return{xmin:l,xmax:c,a:p,b:(i-p*r)/n}},Wxe=function(e,n){return Pt(e)&&Pt(n)?e-n:Zm(e)&&Zm(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Vv(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function WP(t){"@babel/helpers - typeof";return WP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(t)}var Kxe=["viewBox","children"],Gxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],fB=["points","pathLength"],tk={svg:Kxe,polygon:fB,polyline:fB},$D=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],bN=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!sx(r))return null;var i={};return Object.keys(r).forEach(function(s){$D.includes(s)&&(i[s]=n||function(o){return r[s](r,o)})}),i},Yxe=function(e,n,r){return function(i){return e(n,r,i),null}},c0=function(e,n,r){if(!sx(e)||WP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];$D.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=Yxe(o,n,r))}),i},Xxe=["children"],Qxe=["children"];function hB(t,e){if(t==null)return{};var n=Zxe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KP(t){"@babel/helpers - typeof";return KP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KP(t)}var pB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Af=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},mB=null,nk=null,zD=function t(e){if(e===mB&&Array.isArray(nk))return nk;var n=[];return N.Children.forEach(e,function(r){Yn(r)||(Lxe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),nk=n,mB=e,n};function ll(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Af(i)}):r=[Af(e)],zD(t).forEach(function(i){var s=wc(i,"type.displayName")||wc(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function kl(t,e){var n=ll(t,e);return n&&n[0]}var gB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Pt(r)||r<=0||!Pt(i)||i<=0)},Jxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ebe=function(e){return e&&e.type&&Zm(e.type)&&Jxe.indexOf(e.type)>=0},jQ=function(e){return e&&KP(e)==="object"&&"clipDot"in e},tbe=function(e,n,r,i){var s,o=(s=tk?.[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!tr(e)&&(i&&o.includes(n)||Gxe.includes(n))||r&&$D.includes(n)},Jn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(N.isValidElement(e)&&(i=e.props),!sx(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;tbe((l=i)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=i[o])}),s},GP=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return vB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!vB(s,o))return!1}return!0},vB=function(e,n){if(Yn(e)&&Yn(n))return!0;if(!Yn(e)&&!Yn(n)){var r=e.props||{},i=r.children,s=hB(r,Xxe),o=n.props||{},l=o.children,c=hB(o,Qxe);return i&&l?Vv(s,c)&&GP(i,l):!i&&!l?Vv(s,c):!1}return!1},yB=function(e,n){var r=[],i={};return zD(e).forEach(function(s,o){if(ebe(s))r.push(s);else if(s){var l=Af(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,o);r.push(f),i[l]=!0}}}),r},nbe=function(e){var n=e&&e.type;return n&&pB[n]?pB[n]:null},rbe=function(e,n){return zD(n).indexOf(e)},ibe=["children","width","height","viewBox","className","style","title","desc"];function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YP.apply(this,arguments)}function sbe(t,e){if(t==null)return{};var n=abe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function abe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XP(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=sbe(t,ibe),d=i||{width:n,height:r,x:0,y:0},f=mr("recharts-surface",s);return ve.createElement("svg",YP({},Jn(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ve.createElement("title",null,l),ve.createElement("desc",null,c),e)}var obe=["children","className"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QP.apply(this,arguments)}function lbe(t,e){if(t==null)return{};var n=cbe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zr=ve.forwardRef(function(t,e){var n=t.children,r=t.className,i=lbe(t,obe),s=mr("recharts-layer",r);return ve.createElement("g",QP({className:s},Jn(i,!0),{ref:e}),n)}),kf=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},rk,xB;function ube(){if(xB)return rk;xB=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return rk=t,rk}var ik,bB;function dbe(){if(bB)return ik;bB=1;var t=ube();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return ik=e,ik}var sk,wB;function EQ(){if(wB)return sk;wB=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return sk=c,sk}var ak,NB;function fbe(){if(NB)return ak;NB=1;function t(e){return e.split("")}return ak=t,ak}var ok,SB;function hbe(){if(SB)return ok;SB=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=u+"?",y="["+s+"]?",x="(?:"+m+"(?:"+[d,f,p].join("|")+")"+y+v+")*",b=y+v+x,S="(?:"+[d+l+"?",l,f,p,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+S+b,"g");function E(A){return A.match(j)||[]}return ok=E,ok}var lk,jB;function pbe(){if(jB)return lk;jB=1;var t=fbe(),e=EQ(),n=hbe();function r(i){return e(i)?n(i):t(i)}return lk=r,lk}var ck,EB;function mbe(){if(EB)return ck;EB=1;var t=dbe(),e=EQ(),n=pbe(),r=bQ();function i(s){return function(o){o=r(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return ck=i,ck}var uk,_B;function gbe(){if(_B)return uk;_B=1;var t=mbe(),e=t("toUpperCase");return uk=e,uk}var vbe=gbe();const gE=qr(vbe);function wi(t){return function(){return t}}const _Q=Math.cos,wN=Math.sin,_u=Math.sqrt,NN=Math.PI,vE=2*NN,ZP=Math.PI,JP=2*ZP,pm=1e-6,ybe=JP-pm;function CQ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function xbe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return CQ;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class bbe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?CQ:xbe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-e,u=i-n,d=o-e,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>pm)if(!(Math.abs(f*c-u*d)>pm)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,v=i-l,y=c*c+u*u,x=m*m+v*v,b=Math.sqrt(y),S=Math.sqrt(p),j=s*Math.tan((ZP-Math.acos((y+p-x)/(2*b*S)))/2),E=j/S,A=j/b;Math.abs(E-1)>pm&&this._append`L${e+E*d},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*m>d*v)},${this._x1=e+A*c},${this._y1=n+A*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>pm||Math.abs(this._y1-d)>pm)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%JP+JP),p>ybe?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>pm&&this._append`A${r},${r},0,${+(p>=ZP)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new bbe(e)}function UD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function AQ(t){this._context=t}AQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function yE(t){return new AQ(t)}function kQ(t){return t[0]}function TQ(t){return t[1]}function OQ(t,e){var n=wi(!0),r=null,i=yE,s=null,o=qD(l);t=typeof t=="function"?t:t===void 0?kQ:wi(t),e=typeof e=="function"?e:e===void 0?TQ:wi(e);function l(c){var u,d=(c=UD(c)).length,f,p=!1,m;for(r==null&&(s=i(m=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(f,u,c),+e(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:wi(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:wi(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:wi(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function zw(t,e,n){var r=null,i=wi(!0),s=null,o=yE,l=null,c=qD(u);t=typeof t=="function"?t:t===void 0?kQ:wi(+t),e=typeof e=="function"?e:wi(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?TQ:wi(+n);function u(f){var p,m,v,y=(f=UD(f)).length,x,b=!1,S,j=new Array(y),E=new Array(y);for(s==null&&(l=o(S=c())),p=0;p<=y;++p){if(!(p<y&&i(x=f[p],p,f))===b)if(b=!b)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=m;--v)l.point(j[v],E[v]);l.lineEnd(),l.areaEnd()}b&&(j[p]=+t(x,p,f),E[p]=+e(x,p,f),l.point(r?+r(x,p,f):j[p],n?+n(x,p,f):E[p]))}if(S)return l=null,S+""||null}function d(){return OQ().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:wi(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:wi(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:wi(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:wi(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:wi(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:wi(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:wi(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class PQ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function wbe(t){return new PQ(t,!0)}function Nbe(t){return new PQ(t,!1)}const HD={draw(t,e){const n=_u(e/NN);t.moveTo(n,0),t.arc(0,0,n,0,vE)}},Sbe={draw(t,e){const n=_u(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},MQ=_u(1/3),jbe=MQ*2,Ebe={draw(t,e){const n=_u(e/jbe),r=n*MQ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},_be={draw(t,e){const n=_u(e),r=-n/2;t.rect(r,r,n,n)}},Cbe=.8908130915292852,RQ=wN(NN/10)/wN(7*NN/10),Abe=wN(vE/10)*RQ,kbe=-_Q(vE/10)*RQ,Tbe={draw(t,e){const n=_u(e*Cbe),r=Abe*n,i=kbe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=vE*s/5,l=_Q(o),c=wN(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},dk=_u(3),Obe={draw(t,e){const n=-_u(e/(dk*3));t.moveTo(0,n*2),t.lineTo(-dk*n,-n),t.lineTo(dk*n,-n),t.closePath()}},ac=-.5,oc=_u(3)/2,eM=1/_u(12),Pbe=(eM/2+1)*3,Mbe={draw(t,e){const n=_u(e/Pbe),r=n/2,i=n*eM,s=r,o=n*eM+n,l=-s,c=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(ac*r-oc*i,oc*r+ac*i),t.lineTo(ac*s-oc*o,oc*s+ac*o),t.lineTo(ac*l-oc*c,oc*l+ac*c),t.lineTo(ac*r+oc*i,ac*i-oc*r),t.lineTo(ac*s+oc*o,ac*o-oc*s),t.lineTo(ac*l+oc*c,ac*c-oc*l),t.closePath()}};function Rbe(t,e){let n=null,r=qD(i);t=typeof t=="function"?t:wi(t||HD),e=typeof e=="function"?e:wi(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:wi(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:wi(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function SN(){}function jN(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function DQ(t){this._context=t}DQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dbe(t){return new DQ(t)}function IQ(t){this._context=t}IQ.prototype={areaStart:SN,areaEnd:SN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:jN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ibe(t){return new IQ(t)}function LQ(t){this._context=t}LQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:jN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lbe(t){return new LQ(t)}function FQ(t){this._context=t}FQ.prototype={areaStart:SN,areaEnd:SN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Fbe(t){return new FQ(t)}function CB(t){return t<0?-1:1}function AB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(CB(s)+CB(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function kB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fk(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,o-l*n,s,o)}function EN(t){this._context=t}EN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fk(this,this._t0,kB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fk(this,kB(this,n=AB(this,t,e)),n);break;default:fk(this,this._t0,n=AB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function BQ(t){this._context=new $Q(t)}(BQ.prototype=Object.create(EN.prototype)).point=function(t,e){EN.prototype.point.call(this,e,t)};function $Q(t){this._context=t}$Q.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Bbe(t){return new EN(t)}function $be(t){return new BQ(t)}function zQ(t){this._context=t}zQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=TB(t),i=TB(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function TB(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function zbe(t){return new zQ(t)}function xE(t,e){this._context=t,this._t=e}xE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function qbe(t){return new xE(t,.5)}function Ube(t){return new xE(t,0)}function Hbe(t){return new xE(t,1)}function oy(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function tM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Vbe(t,e){return t[e]}function Wbe(t){const e=[];return e.key=t,e}function Kbe(){var t=wi([]),e=tM,n=oy,r=Vbe;function i(s){var o=Array.from(t.apply(this,arguments),Wbe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(f,o[l].key,u,s)]).data=f;for(l=0,d=UD(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:wi(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:wi(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?tM:typeof s=="function"?s:wi(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??oy,i):n},i}function Gbe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}oy(t,e)}}function Ybe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}oy(t,e)}}function Xbe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[r][1]||0,p=d[r-1][1]||0,m=(f-p)/2,v=0;v<l;++v){var y=t[e[v]],x=y[r][1]||0,b=y[r-1][1]||0;m+=x-b}c+=f,u+=m*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,oy(t,e)}}function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}var Qbe=["type","size","sizeType"];function nM(){return nM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nM.apply(this,arguments)}function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){Zbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zbe(t,e,n){return e=Jbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jbe(t){var e=e0e(t,"string");return u0(e)=="symbol"?e:e+""}function e0e(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t0e(t,e){if(t==null)return{};var n=n0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qQ={symbolCircle:HD,symbolCross:Sbe,symbolDiamond:Ebe,symbolSquare:_be,symbolStar:Tbe,symbolTriangle:Obe,symbolWye:Mbe},r0e=Math.PI/180,i0e=function(e){var n="symbol".concat(gE(e));return qQ[n]||HD},s0e=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*r0e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},a0e=function(e,n){qQ["symbol".concat(gE(e))]=n},bE=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=t0e(e,Qbe),u=PB(PB({},c),{},{type:r,size:s,sizeType:l}),d=function(){var x=i0e(r),b=Rbe().type(x).size(s0e(s,l,r));return b()},f=u.className,p=u.cx,m=u.cy,v=Jn(u,!0);return p===+p&&m===+m&&s===+s?ve.createElement("path",nM({},v,{className:mr("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:d()})):null};bE.registerSymbol=a0e;function ly(t){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ly(t)}function rM(){return rM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rM.apply(this,arguments)}function MB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MB(Object(n),!0).forEach(function(r){d0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HQ(r.key),r)}}function u0e(t,e,n){return e&&c0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d0e(t,e,n){return e=_N(e),f0e(t,UQ()?Reflect.construct(e,n||[],_N(t).constructor):e.apply(t,n))}function f0e(t,e){if(e&&(ly(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h0e(t)}function h0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UQ=function(){return!!t})()}function _N(t){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_N(t)}function p0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iM(t,e)}function iM(t,e){return iM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iM(t,e)}function d0(t,e,n){return e=HQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HQ(t){var e=m0e(t,"string");return ly(e)=="symbol"?e:e+""}function m0e(t,e){if(ly(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lc=32,VD=(function(t){function e(){return l0e(this,e),d0e(this,e,arguments)}return p0e(e,t),u0e(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=lc/2,o=lc/6,l=lc/3,c=r.inactive?i:r.color;if(r.type==="plainline")return ve.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:lc,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return ve.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(lc,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return ve.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(lc/8,"h").concat(lc,"v").concat(lc*3/4,"h").concat(-lc,"z"),className:"recharts-legend-icon"});if(ve.isValidElement(r.legendIcon)){var u=o0e({},r);return delete u.legendIcon,ve.cloneElement(r.legendIcon,u)}return ve.createElement(bE,{fill:c,cx:s,cy:s,size:lc,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:lc,height:lc},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,v){var y=m.formatter||c,x=mr(d0(d0({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=tr(m.value)?null:m.value;kf(!tr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?u:m.color;return ve.createElement("li",rM({className:x,style:f,key:"legend-item-".concat(v)},c0(r.props,m,v)),ve.createElement(XP,{width:o,height:o,viewBox:d,style:p},r.renderIcon(m)),ve.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},y?y(b,m,v):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return ve.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(N.PureComponent);d0(VD,"displayName","Legend");d0(VD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var hk,RB;function g0e(){if(RB)return hk;RB=1;var t=hE();function e(){this.__data__=new t,this.size=0}return hk=e,hk}var pk,DB;function v0e(){if(DB)return pk;DB=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return pk=t,pk}var mk,IB;function y0e(){if(IB)return mk;IB=1;function t(e){return this.__data__.get(e)}return mk=t,mk}var gk,LB;function x0e(){if(LB)return gk;LB=1;function t(e){return this.__data__.has(e)}return gk=t,gk}var vk,FB;function b0e(){if(FB)return vk;FB=1;var t=hE(),e=ID(),n=LD(),r=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<r-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return vk=i,vk}var yk,BB;function VQ(){if(BB)return yk;BB=1;var t=hE(),e=g0e(),n=v0e(),r=y0e(),i=x0e(),s=b0e();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,yk=o,yk}var xk,$B;function w0e(){if($B)return xk;$B=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return xk=e,xk}var bk,zB;function N0e(){if(zB)return bk;zB=1;function t(e){return this.__data__.has(e)}return bk=t,bk}var wk,qB;function WQ(){if(qB)return wk;qB=1;var t=LD(),e=w0e(),n=N0e();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,wk=r,wk}var Nk,UB;function KQ(){if(UB)return Nk;UB=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Nk=t,Nk}var Sk,HB;function GQ(){if(HB)return Sk;HB=1;function t(e,n){return e.has(n)}return Sk=t,Sk}var jk,VB;function YQ(){if(VB)return jk;VB=1;var t=WQ(),e=KQ(),n=GQ(),r=1,i=2;function s(o,l,c,u,d,f){var p=c&r,m=o.length,v=l.length;if(m!=v&&!(p&&v>m))return!1;var y=f.get(o),x=f.get(l);if(y&&x)return y==l&&x==o;var b=-1,S=!0,j=c&i?new t:void 0;for(f.set(o,l),f.set(l,o);++b<m;){var E=o[b],A=l[b];if(u)var P=p?u(A,E,b,l,o,f):u(E,A,b,o,l,f);if(P!==void 0){if(P)continue;S=!1;break}if(j){if(!e(l,function(O,k){if(!n(j,k)&&(E===O||d(E,O,c,u,f)))return j.push(k)})){S=!1;break}}else if(!(E===A||d(E,A,c,u,f))){S=!1;break}}return f.delete(o),f.delete(l),S}return jk=s,jk}var Ek,WB;function S0e(){if(WB)return Ek;WB=1;var t=kd(),e=t.Uint8Array;return Ek=e,Ek}var _k,KB;function j0e(){if(KB)return _k;KB=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return _k=t,_k}var Ck,GB;function WD(){if(GB)return Ck;GB=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Ck=t,Ck}var Ak,YB;function E0e(){if(YB)return Ak;YB=1;var t=C1(),e=S0e(),n=DD(),r=YQ(),i=j0e(),s=WD(),o=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",p="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",S="[object DataView]",j=t?t.prototype:void 0,E=j?j.valueOf:void 0;function A(P,O,k,C,I,R,D){switch(k){case S:if(P.byteLength!=O.byteLength||P.byteOffset!=O.byteOffset)return!1;P=P.buffer,O=O.buffer;case b:return!(P.byteLength!=O.byteLength||!R(new e(P),new e(O)));case c:case u:case p:return n(+P,+O);case d:return P.name==O.name&&P.message==O.message;case m:case y:return P==O+"";case f:var L=i;case v:var z=C&o;if(L||(L=s),P.size!=O.size&&!z)return!1;var W=D.get(P);if(W)return W==O;C|=l,D.set(P,O);var X=r(L(P),L(O),C,I,R,D);return D.delete(P),X;case x:if(E)return E.call(P)==E.call(O)}return!1}return Ak=A,Ak}var kk,XB;function XQ(){if(XB)return kk;XB=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return kk=t,kk}var Tk,QB;function _0e(){if(QB)return Tk;QB=1;var t=XQ(),e=fl();function n(r,i,s){var o=i(r);return e(r)?o:t(o,s(r))}return Tk=n,Tk}var Ok,ZB;function C0e(){if(ZB)return Ok;ZB=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var l=e[r];n(l,r,e)&&(o[s++]=l)}return o}return Ok=t,Ok}var Pk,JB;function A0e(){if(JB)return Pk;JB=1;function t(){return[]}return Pk=t,Pk}var Mk,e$;function k0e(){if(e$)return Mk;e$=1;var t=C0e(),e=A0e(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return r.call(o,l)}))}:e;return Mk=s,Mk}var Rk,t$;function T0e(){if(t$)return Rk;t$=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Rk=t,Rk}var Dk,n$;function O0e(){if(n$)return Dk;n$=1;var t=Vf(),e=Wf(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return Dk=r,Dk}var Ik,r$;function KD(){if(r$)return Ik;r$=1;var t=O0e(),e=Wf(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Ik=s,Ik}var mb={exports:{}},Lk,i$;function P0e(){if(i$)return Lk;i$=1;function t(){return!1}return Lk=t,Lk}mb.exports;var s$;function QQ(){return s$||(s$=1,(function(t,e){var n=kd(),r=P0e(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(mb,mb.exports)),mb.exports}var Fk,a$;function GD(){if(a$)return Fk;a$=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Fk=n,Fk}var Bk,o$;function YD(){if(o$)return Bk;o$=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Bk=e,Bk}var $k,l$;function M0e(){if(l$)return $k;l$=1;var t=Vf(),e=YD(),n=Wf(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",x="[object ArrayBuffer]",b="[object DataView]",S="[object Float32Array]",j="[object Float64Array]",E="[object Int8Array]",A="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",I="[object Uint32Array]",R={};R[S]=R[j]=R[E]=R[A]=R[P]=R[O]=R[k]=R[C]=R[I]=!0,R[r]=R[i]=R[x]=R[s]=R[b]=R[o]=R[l]=R[c]=R[u]=R[d]=R[f]=R[p]=R[m]=R[v]=R[y]=!1;function D(L){return n(L)&&e(L.length)&&!!R[t(L)]}return $k=D,$k}var zk,c$;function ZQ(){if(c$)return zk;c$=1;function t(e){return function(n){return e(n)}}return zk=t,zk}var gb={exports:{}};gb.exports;var u$;function R0e(){return u$||(u$=1,(function(t,e){var n=vQ(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(gb,gb.exports)),gb.exports}var qk,d$;function JQ(){if(d$)return qk;d$=1;var t=M0e(),e=ZQ(),n=R0e(),r=n&&n.isTypedArray,i=r?e(r):t;return qk=i,qk}var Uk,f$;function D0e(){if(f$)return Uk;f$=1;var t=T0e(),e=KD(),n=fl(),r=QQ(),i=GD(),s=JQ(),o=Object.prototype,l=o.hasOwnProperty;function c(u,d){var f=n(u),p=!f&&e(u),m=!f&&!p&&r(u),v=!f&&!p&&!m&&s(u),y=f||p||m||v,x=y?t(u.length,String):[],b=x.length;for(var S in u)(d||l.call(u,S))&&!(y&&(S=="length"||m&&(S=="offset"||S=="parent")||v&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,b)))&&x.push(S);return x}return Uk=c,Uk}var Hk,h$;function I0e(){if(h$)return Hk;h$=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return Hk=e,Hk}var Vk,p$;function eZ(){if(p$)return Vk;p$=1;function t(e,n){return function(r){return e(n(r))}}return Vk=t,Vk}var Wk,m$;function L0e(){if(m$)return Wk;m$=1;var t=eZ(),e=t(Object.keys,Object);return Wk=e,Wk}var Kk,g$;function F0e(){if(g$)return Kk;g$=1;var t=I0e(),e=L0e(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return Kk=i,Kk}var Gk,v$;function A1(){if(v$)return Gk;v$=1;var t=RD(),e=YD();function n(r){return r!=null&&e(r.length)&&!t(r)}return Gk=n,Gk}var Yk,y$;function wE(){if(y$)return Yk;y$=1;var t=D0e(),e=F0e(),n=A1();function r(i){return n(i)?t(i):e(i)}return Yk=r,Yk}var Xk,x$;function B0e(){if(x$)return Xk;x$=1;var t=_0e(),e=k0e(),n=wE();function r(i){return t(i,n,e)}return Xk=r,Xk}var Qk,b$;function $0e(){if(b$)return Qk;b$=1;var t=B0e(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,c,u,d){var f=l&e,p=t(s),m=p.length,v=t(o),y=v.length;if(m!=y&&!f)return!1;for(var x=m;x--;){var b=p[x];if(!(f?b in o:r.call(o,b)))return!1}var S=d.get(s),j=d.get(o);if(S&&j)return S==o&&j==s;var E=!0;d.set(s,o),d.set(o,s);for(var A=f;++x<m;){b=p[x];var P=s[b],O=o[b];if(c)var k=f?c(O,P,b,o,s,d):c(P,O,b,s,o,d);if(!(k===void 0?P===O||u(P,O,l,c,d):k)){E=!1;break}A||(A=b=="constructor")}if(E&&!A){var C=s.constructor,I=o.constructor;C!=I&&"constructor"in s&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof I=="function"&&I instanceof I)&&(E=!1)}return d.delete(s),d.delete(o),E}return Qk=i,Qk}var Zk,w$;function z0e(){if(w$)return Zk;w$=1;var t=wg(),e=kd(),n=t(e,"DataView");return Zk=n,Zk}var Jk,N$;function q0e(){if(N$)return Jk;N$=1;var t=wg(),e=kd(),n=t(e,"Promise");return Jk=n,Jk}var eT,S$;function tZ(){if(S$)return eT;S$=1;var t=wg(),e=kd(),n=t(e,"Set");return eT=n,eT}var tT,j$;function U0e(){if(j$)return tT;j$=1;var t=wg(),e=kd(),n=t(e,"WeakMap");return tT=n,tT}var nT,E$;function H0e(){if(E$)return nT;E$=1;var t=z0e(),e=ID(),n=q0e(),r=tZ(),i=U0e(),s=Vf(),o=yQ(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=o(t),v=o(e),y=o(n),x=o(r),b=o(i),S=s;return(t&&S(new t(new ArrayBuffer(1)))!=p||e&&S(new e)!=l||n&&S(n.resolve())!=u||r&&S(new r)!=d||i&&S(new i)!=f)&&(S=function(j){var E=s(j),A=E==c?j.constructor:void 0,P=A?o(A):"";if(P)switch(P){case m:return p;case v:return l;case y:return u;case x:return d;case b:return f}return E}),nT=S,nT}var rT,_$;function V0e(){if(_$)return rT;_$=1;var t=VQ(),e=YQ(),n=E0e(),r=$0e(),i=H0e(),s=fl(),o=QQ(),l=JQ(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function v(y,x,b,S,j,E){var A=s(y),P=s(x),O=A?d:i(y),k=P?d:i(x);O=O==u?f:O,k=k==u?f:k;var C=O==f,I=k==f,R=O==k;if(R&&o(y)){if(!o(x))return!1;A=!0,C=!1}if(R&&!C)return E||(E=new t),A||l(y)?e(y,x,b,S,j,E):n(y,x,O,b,S,j,E);if(!(b&c)){var D=C&&m.call(y,"__wrapped__"),L=I&&m.call(x,"__wrapped__");if(D||L){var z=D?y.value():y,W=L?x.value():x;return E||(E=new t),j(z,W,b,S,E)}}return R?(E||(E=new t),r(y,x,b,S,j,E)):!1}return rT=v,rT}var iT,C$;function XD(){if(C$)return iT;C$=1;var t=V0e(),e=Wf();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,o,n,l)}return iT=n,iT}var sT,A$;function W0e(){if(A$)return sT;A$=1;var t=VQ(),e=XD(),n=1,r=2;function i(s,o,l,c){var u=l.length,d=u,f=!c;if(s==null)return!d;for(s=Object(s);u--;){var p=l[u];if(f&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++u<d;){p=l[u];var m=p[0],v=s[m],y=p[1];if(f&&p[2]){if(v===void 0&&!(m in s))return!1}else{var x=new t;if(c)var b=c(v,y,m,s,o,x);if(!(b===void 0?e(y,v,n|r,c,x):b))return!1}}return!0}return sT=i,sT}var aT,k$;function nZ(){if(k$)return aT;k$=1;var t=_p();function e(n){return n===n&&!t(n)}return aT=e,aT}var oT,T$;function K0e(){if(T$)return oT;T$=1;var t=nZ(),e=wE();function n(r){for(var i=e(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,t(l)]}return i}return oT=n,oT}var lT,O$;function rZ(){if(O$)return lT;O$=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return lT=t,lT}var cT,P$;function G0e(){if(P$)return cT;P$=1;var t=W0e(),e=K0e(),n=rZ();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return cT=r,cT}var uT,M$;function Y0e(){if(M$)return uT;M$=1;function t(e,n){return e!=null&&n in Object(e)}return uT=t,uT}var dT,R$;function X0e(){if(R$)return dT;R$=1;var t=wQ(),e=KD(),n=fl(),r=GD(),i=YD(),s=mE();function o(l,c,u){c=t(c,l);for(var d=-1,f=c.length,p=!1;++d<f;){var m=s(c[d]);if(!(p=l!=null&&u(l,m)))break;l=l[m]}return p||++d!=f?p:(f=l==null?0:l.length,!!f&&i(f)&&r(m,f)&&(n(l)||e(l)))}return dT=o,dT}var fT,D$;function Q0e(){if(D$)return fT;D$=1;var t=Y0e(),e=X0e();function n(r,i){return r!=null&&e(r,i,t)}return fT=n,fT}var hT,I$;function Z0e(){if(I$)return hT;I$=1;var t=XD(),e=NQ(),n=Q0e(),r=MD(),i=nZ(),s=rZ(),o=mE(),l=1,c=2;function u(d,f){return r(d)&&i(f)?s(o(d),f):function(p){var m=e(p,d);return m===void 0&&m===f?n(p,d):t(f,m,l|c)}}return hT=u,hT}var pT,L$;function ox(){if(L$)return pT;L$=1;function t(e){return e}return pT=t,pT}var mT,F$;function J0e(){if(F$)return mT;F$=1;function t(e){return function(n){return n?.[e]}}return mT=t,mT}var gT,B$;function e1e(){if(B$)return gT;B$=1;var t=BD();function e(n){return function(r){return t(r,n)}}return gT=e,gT}var vT,$$;function t1e(){if($$)return vT;$$=1;var t=J0e(),e=e1e(),n=MD(),r=mE();function i(s){return n(s)?t(r(s)):e(s)}return vT=i,vT}var yT,z$;function Cp(){if(z$)return yT;z$=1;var t=G0e(),e=Z0e(),n=ox(),r=fl(),i=t1e();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return yT=s,yT}var xT,q$;function iZ(){if(q$)return xT;q$=1;function t(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return xT=t,xT}var bT,U$;function n1e(){if(U$)return bT;U$=1;function t(e){return e!==e}return bT=t,bT}var wT,H$;function r1e(){if(H$)return wT;H$=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return wT=t,wT}var NT,V$;function i1e(){if(V$)return NT;V$=1;var t=iZ(),e=n1e(),n=r1e();function r(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return NT=r,NT}var ST,W$;function s1e(){if(W$)return ST;W$=1;var t=i1e();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return ST=e,ST}var jT,K$;function a1e(){if(K$)return jT;K$=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return jT=t,jT}var ET,G$;function o1e(){if(G$)return ET;G$=1;function t(){}return ET=t,ET}var _T,Y$;function l1e(){if(Y$)return _T;Y$=1;var t=tZ(),e=o1e(),n=WD(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return _T=i,_T}var CT,X$;function c1e(){if(X$)return CT;X$=1;var t=WQ(),e=s1e(),n=a1e(),r=GQ(),i=l1e(),s=WD(),o=200;function l(c,u,d){var f=-1,p=e,m=c.length,v=!0,y=[],x=y;if(d)v=!1,p=n;else if(m>=o){var b=u?null:i(c);if(b)return s(b);v=!1,p=r,x=new t}else x=u?[]:y;e:for(;++f<m;){var S=c[f],j=u?u(S):S;if(S=d||S!==0?S:0,v&&j===j){for(var E=x.length;E--;)if(x[E]===j)continue e;u&&x.push(j),y.push(S)}else p(x,j,d)||(x!==y&&x.push(j),y.push(S))}return y}return CT=l,CT}var AT,Q$;function u1e(){if(Q$)return AT;Q$=1;var t=Cp(),e=c1e();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return AT=n,AT}var d1e=u1e();const Z$=qr(d1e);function sZ(t,e,n){return e===!0?Z$(t,n):tr(e)?Z$(t,e):t}function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}var f1e=["ref"];function J$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(n),!0).forEach(function(r){NE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oZ(r.key),r)}}function p1e(t,e,n){return e&&e7(t.prototype,e),n&&e7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m1e(t,e,n){return e=CN(e),g1e(t,aZ()?Reflect.construct(e,n||[],CN(t).constructor):e.apply(t,n))}function g1e(t,e){if(e&&(cy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v1e(t)}function v1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aZ=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CN(t)}function y1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sM(t,e)}function sM(t,e){return sM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sM(t,e)}function NE(t,e,n){return e=oZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oZ(t){var e=x1e(t,"string");return cy(e)=="symbol"?e:e+""}function x1e(t,e){if(cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function b1e(t,e){if(t==null)return{};var n=w1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function w1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function N1e(t){return t.value}function S1e(t,e){if(ve.isValidElement(t))return ve.cloneElement(t,e);if(typeof t=="function")return ve.createElement(t,e);e.ref;var n=b1e(e,f1e);return ve.createElement(VD,n)}var t7=1,Tf=(function(t){function e(){var n;h1e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=m1e(this,e,[].concat(i)),NE(n,"lastBoundingBox",{width:-1,height:-1}),n}return y1e(e,t),p1e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>t7||Math.abs(i.height-this.lastBoundingBox.height)>t7)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return lf(lf({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=lf(lf({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ve.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},S1e(s,lf(lf({},this.props),{},{payload:sZ(d,u,N1e)})))}}],[{key:"getWithHeight",value:function(r,i){var s=lf(lf({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&Pt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])})(N.PureComponent);NE(Tf,"displayName","Legend");NE(Tf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var kT,n7;function j1e(){if(n7)return kT;n7=1;var t=C1(),e=KD(),n=fl(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return kT=i,kT}var TT,r7;function lZ(){if(r7)return TT;r7=1;var t=XQ(),e=j1e();function n(r,i,s,o,l){var c=-1,u=r.length;for(s||(s=e),l||(l=[]);++c<u;){var d=r[c];i>0&&s(d)?i>1?n(d,i-1,s,o,l):t(l,d):o||(l[l.length]=d)}return l}return TT=n,TT}var OT,i7;function E1e(){if(i7)return OT;i7=1;function t(e){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var u=l[e?c:++s];if(r(o[u],u,o)===!1)break}return n}}return OT=t,OT}var PT,s7;function _1e(){if(s7)return PT;s7=1;var t=E1e(),e=t();return PT=e,PT}var MT,a7;function cZ(){if(a7)return MT;a7=1;var t=_1e(),e=wE();function n(r,i){return r&&t(r,i,e)}return MT=n,MT}var RT,o7;function C1e(){if(o7)return RT;o7=1;var t=A1();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=r?o:-1,c=Object(i);(r?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return RT=e,RT}var DT,l7;function QD(){if(l7)return DT;l7=1;var t=cZ(),e=C1e(),n=e(t);return DT=n,DT}var IT,c7;function uZ(){if(c7)return IT;c7=1;var t=QD(),e=A1();function n(r,i){var s=-1,o=e(r)?Array(r.length):[];return t(r,function(l,c,u){o[++s]=i(l,c,u)}),o}return IT=n,IT}var LT,u7;function A1e(){if(u7)return LT;u7=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return LT=t,LT}var FT,d7;function k1e(){if(d7)return FT;d7=1;var t=ix();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=r!==void 0,u=r===null,d=r===r,f=t(r);if(!u&&!f&&!l&&n>r||l&&c&&d&&!u&&!f||s&&c&&d||!i&&d||!o)return 1;if(!s&&!l&&!f&&n<r||f&&i&&o&&!s&&!l||u&&i&&o||!c&&o||!d)return-1}return 0}return FT=e,FT}var BT,f7;function T1e(){if(f7)return BT;f7=1;var t=k1e();function e(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,c=o.length,u=i.length;++s<c;){var d=t(o[s],l[s]);if(d){if(s>=u)return d;var f=i[s];return d*(f=="desc"?-1:1)}}return n.index-r.index}return BT=e,BT}var $T,h7;function O1e(){if(h7)return $T;h7=1;var t=FD(),e=BD(),n=Cp(),r=uZ(),i=A1e(),s=ZQ(),o=T1e(),l=ox(),c=fl();function u(d,f,p){f.length?f=t(f,function(y){return c(y)?function(x){return e(x,y.length===1?y[0]:y)}:y}):f=[l];var m=-1;f=t(f,s(n));var v=r(d,function(y,x,b){var S=t(f,function(j){return j(y)});return{criteria:S,index:++m,value:y}});return i(v,function(y,x){return o(y,x,p)})}return $T=u,$T}var zT,p7;function P1e(){if(p7)return zT;p7=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return zT=t,zT}var qT,m7;function M1e(){if(m7)return qT;m7=1;var t=P1e(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),u=Array(c);++l<c;)u[l]=o[i+l];l=-1;for(var d=Array(i+1);++l<i;)d[l]=o[l];return d[i]=s(u),t(r,this,d)}}return qT=n,qT}var UT,g7;function R1e(){if(g7)return UT;g7=1;function t(e){return function(){return e}}return UT=t,UT}var HT,v7;function dZ(){if(v7)return HT;v7=1;var t=wg(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return HT=e,HT}var VT,y7;function D1e(){if(y7)return VT;y7=1;var t=R1e(),e=dZ(),n=ox(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return VT=r,VT}var WT,x7;function I1e(){if(x7)return WT;x7=1;var t=800,e=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return WT=r,WT}var KT,b7;function L1e(){if(b7)return KT;b7=1;var t=D1e(),e=I1e(),n=e(t);return KT=n,KT}var GT,w7;function F1e(){if(w7)return GT;w7=1;var t=ox(),e=M1e(),n=L1e();function r(i,s){return n(e(i,s,t),i+"")}return GT=r,GT}var YT,N7;function SE(){if(N7)return YT;N7=1;var t=DD(),e=A1(),n=GD(),r=_p();function i(s,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return YT=i,YT}var XT,S7;function B1e(){if(S7)return XT;S7=1;var t=lZ(),e=O1e(),n=F1e(),r=SE(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return XT=i,XT}var $1e=B1e();const ZD=qr($1e);function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function aM(){return aM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aM.apply(this,arguments)}function z1e(t,e){return V1e(t)||H1e(t,e)||U1e(t,e)||q1e()}function q1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U1e(t,e){if(t){if(typeof t=="string")return j7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j7(t,e)}}function j7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function V1e(t){if(Array.isArray(t))return t}function E7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(n),!0).forEach(function(r){W1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W1e(t,e,n){return e=K1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K1e(t){var e=G1e(t,"string");return f0(e)=="symbol"?e:e+""}function G1e(t,e){if(f0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y1e(t){return Array.isArray(t)&&aa(t[0])&&aa(t[1])?t.join(" ~ "):t}var X1e=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,p=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,y=e.label,x=e.labelFormatter,b=e.accessibilityLayer,S=b===void 0?!1:b,j=function(){if(d&&d.length){var D={padding:0,margin:0},L=(p?ZD(d,p):d).map(function(z,W){if(z.type==="none")return null;var X=QT({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),q=z.formatter||f||Y1e,V=z.value,Y=z.name,re=V,Q=Y;if(q&&re!=null&&Q!=null){var F=q(V,Y,z,W,d);if(Array.isArray(F)){var G=z1e(F,2);re=G[0],Q=G[1]}else re=F}return ve.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:X},aa(Q)?ve.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,aa(Q)?ve.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ve.createElement("span",{className:"recharts-tooltip-item-value"},re),ve.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ve.createElement("ul",{className:"recharts-tooltip-item-list",style:D},L)}return null},E=QT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),A=QT({margin:0},u),P=!Yn(y),O=P?y:"",k=mr("recharts-default-tooltip",m),C=mr("recharts-tooltip-label",v);P&&x&&d!==void 0&&d!==null&&(O=x(y,d));var I=S?{role:"status","aria-live":"assertive"}:{};return ve.createElement("div",aM({className:k,style:E},I),ve.createElement("p",{className:C,style:A},ve.isValidElement(O)?O:"".concat(O)),j())};function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function qw(t,e,n){return e=Q1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q1e(t){var e=Z1e(t,"string");return h0(e)=="symbol"?e:e+""}function Z1e(t,e){if(h0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qx="recharts-tooltip-wrapper",J1e={visibility:"hidden"};function ewe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return mr(Qx,qw(qw(qw(qw({},"".concat(Qx,"-right"),Pt(n)&&e&&Pt(e.x)&&n>=e.x),"".concat(Qx,"-left"),Pt(n)&&e&&Pt(e.x)&&n<e.x),"".concat(Qx,"-bottom"),Pt(r)&&e&&Pt(e.y)&&r>=e.y),"".concat(Qx,"-top"),Pt(r)&&e&&Pt(e.y)&&r<e.y))}function _7(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Pt(s[r]))return s[r];var d=n[r]-l-i,f=n[r]+i;if(e[r])return o[r]?d:f;if(o[r]){var p=d,m=c[r];return p<m?Math.max(f,c[r]):Math.max(d,c[r])}var v=f+l,y=c[r]+u;return v>y?Math.max(d,c[r]):Math.max(f,c[r])}function twe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function nwe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&n?(d=_7({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=_7({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=twe({translateX:d,translateY:f,useTranslate3d:l})):u=J1e,{cssProperties:u,cssClasses:ewe({translateX:d,translateY:f,coordinate:n})}}function uy(t){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(t)}function C7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C7(Object(n),!0).forEach(function(r){lM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hZ(r.key),r)}}function swe(t,e,n){return e&&iwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function awe(t,e,n){return e=AN(e),owe(t,fZ()?Reflect.construct(e,n||[],AN(t).constructor):e.apply(t,n))}function owe(t,e){if(e&&(uy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lwe(t)}function lwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fZ=function(){return!!t})()}function AN(t){return AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AN(t)}function cwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oM(t,e)}function oM(t,e){return oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oM(t,e)}function lM(t,e,n){return e=hZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hZ(t){var e=uwe(t,"string");return uy(e)=="symbol"?e:e+""}function uwe(t,e){if(uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var k7=1,dwe=(function(t){function e(){var n;rwe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=awe(this,e,[].concat(i)),lM(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lM(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return cwe(e,t),swe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>k7||Math.abs(r.height-this.state.lastBoundingBox.height)>k7)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,m=i.offset,v=i.position,y=i.reverseDirection,x=i.useTranslate3d,b=i.viewBox,S=i.wrapperStyle,j=nwe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:b}),E=j.cssClasses,A=j.cssProperties,P=A7(A7({transition:p&&s?"transform ".concat(l,"ms ").concat(c):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},S);return ve.createElement("div",{tabIndex:-1,className:E,style:P,ref:function(k){r.wrapperNode=k}},u)}}])})(N.PureComponent),fwe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ap={isSsr:fwe()};function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function T7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T7(Object(n),!0).forEach(function(r){JD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mZ(r.key),r)}}function mwe(t,e,n){return e&&pwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gwe(t,e,n){return e=kN(e),vwe(t,pZ()?Reflect.construct(e,n||[],kN(t).constructor):e.apply(t,n))}function vwe(t,e){if(e&&(dy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ywe(t)}function ywe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pZ=function(){return!!t})()}function kN(t){return kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kN(t)}function xwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cM(t,e)}function cM(t,e){return cM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cM(t,e)}function JD(t,e,n){return e=mZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mZ(t){var e=bwe(t,"string");return dy(e)=="symbol"?e:e+""}function bwe(t,e){if(dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wwe(t){return t.dataKey}function Nwe(t,e){return ve.isValidElement(t)?ve.cloneElement(t,e):typeof t=="function"?ve.createElement(t,e):ve.createElement(X1e,e)}var il=(function(t){function e(){return hwe(this,e),gwe(this,e,arguments)}return xwe(e,t),mwe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,m=i.offset,v=i.payload,y=i.payloadUniqBy,x=i.position,b=i.reverseDirection,S=i.useTranslate3d,j=i.viewBox,E=i.wrapperStyle,A=v??[];f&&A.length&&(A=sZ(v.filter(function(O){return O.value!=null&&(O.hide!==!0||r.props.includeHidden)}),y,wwe));var P=A.length>0;return ve.createElement(dwe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:s,coordinate:d,hasPayload:P,offset:m,position:x,reverseDirection:b,useTranslate3d:S,viewBox:j,wrapperStyle:E},Nwe(u,O7(O7({},this.props),{},{payload:A})))}}])})(N.PureComponent);JD(il,"displayName","Tooltip");JD(il,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ap.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ZT,P7;function Swe(){if(P7)return ZT;P7=1;var t=kd(),e=function(){return t.Date.now()};return ZT=e,ZT}var JT,M7;function jwe(){if(M7)return JT;M7=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return JT=e,JT}var e5,R7;function Ewe(){if(R7)return e5;R7=1;var t=jwe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return e5=n,e5}var t5,D7;function gZ(){if(D7)return t5;D7=1;var t=Ewe(),e=_p(),n=ix(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=s.test(u);return f||o.test(u)?l(u.slice(2),f?2:8):i.test(u)?r:+u}return t5=c,t5}var n5,I7;function _we(){if(I7)return n5;I7=1;var t=_p(),e=Swe(),n=gZ(),r="Expected a function",i=Math.max,s=Math.min;function o(l,c,u){var d,f,p,m,v,y,x=0,b=!1,S=!1,j=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(b=!!u.leading,S="maxWait"in u,p=S?i(n(u.maxWait)||0,c):p,j="trailing"in u?!!u.trailing:j);function E(L){var z=d,W=f;return d=f=void 0,x=L,m=l.apply(W,z),m}function A(L){return x=L,v=setTimeout(k,c),b?E(L):m}function P(L){var z=L-y,W=L-x,X=c-z;return S?s(X,p-W):X}function O(L){var z=L-y,W=L-x;return y===void 0||z>=c||z<0||S&&W>=p}function k(){var L=e();if(O(L))return C(L);v=setTimeout(k,P(L))}function C(L){return v=void 0,j&&d?E(L):(d=f=void 0,m)}function I(){v!==void 0&&clearTimeout(v),x=0,d=y=f=v=void 0}function R(){return v===void 0?m:C(e())}function D(){var L=e(),z=O(L);if(d=arguments,f=this,y=L,z){if(v===void 0)return A(y);if(S)return clearTimeout(v),v=setTimeout(k,c),E(y)}return v===void 0&&(v=setTimeout(k,c)),m}return D.cancel=I,D.flush=R,D}return n5=o,n5}var r5,L7;function Cwe(){if(L7)return r5;L7=1;var t=_we(),e=_p(),n="Expected a function";function r(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return r5=r,r5}var Awe=Cwe();const vZ=qr(Awe);function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function F7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F7(Object(n),!0).forEach(function(r){kwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kwe(t,e,n){return e=Twe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Twe(t){var e=Owe(t,"string");return p0(e)=="symbol"?e:e+""}function Owe(t,e){if(p0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pwe(t,e){return Iwe(t)||Dwe(t,e)||Rwe(t,e)||Mwe()}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(t,e){if(t){if(typeof t=="string")return B7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B7(t,e)}}function B7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Iwe(t){if(Array.isArray(t))return t}var kb=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,m=t.children,v=t.debounce,y=v===void 0?0:v,x=t.id,b=t.className,S=t.onResize,j=t.style,E=j===void 0?{}:j,A=N.useRef(null),P=N.useRef();P.current=S,N.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var O=N.useState({containerWidth:i.width,containerHeight:i.height}),k=Pwe(O,2),C=k[0],I=k[1],R=N.useCallback(function(L,z){I(function(W){var X=Math.round(L),q=Math.round(z);return W.containerWidth===X&&W.containerHeight===q?W:{containerWidth:X,containerHeight:q}})},[]);N.useEffect(function(){var L=function(Y){var re,Q=Y[0].contentRect,F=Q.width,G=Q.height;R(F,G),(re=P.current)===null||re===void 0||re.call(P,F,G)};y>0&&(L=vZ(L,y,{trailing:!0,leading:!1}));var z=new ResizeObserver(L),W=A.current.getBoundingClientRect(),X=W.width,q=W.height;return R(X,q),z.observe(A.current),function(){z.disconnect()}},[R,y]);var D=N.useMemo(function(){var L=C.containerWidth,z=C.containerHeight;if(L<0||z<0)return null;kf(jm(o)||jm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),kf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=jm(o)?L:o,X=jm(c)?z:c;n&&n>0&&(W?X=W/n:X&&(W=X*n),p&&X>p&&(X=p)),kf(W>0||X>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,X,o,c,d,f,n);var q=!Array.isArray(m)&&Af(m.type).endsWith("Chart");return ve.Children.map(m,function(V){return ve.isValidElement(V)?N.cloneElement(V,Uw({width:W,height:X},q?{style:Uw({height:"100%",width:"100%",maxHeight:X,maxWidth:W},V.props.style)}:{})):V})},[n,m,c,p,f,d,C,o]);return ve.createElement("div",{id:x?"".concat(x):void 0,className:mr("recharts-responsive-container",b),style:Uw(Uw({},E),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:A},D)}),Kh=function(e){return null};Kh.displayName="Cell";function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(r){Lwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lwe(t,e,n){return e=Fwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fwe(t){var e=Bwe(t,"string");return m0(e)=="symbol"?e:e+""}function Bwe(t,e){if(m0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(m0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sv={widthCache:{},cacheCount:0},$we=2e3,zwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z7="recharts_measurement_span";function qwe(t){var e=uM({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Tb=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ap.isSsr)return{width:0,height:0};var r=qwe(n),i=JSON.stringify({text:e,copyStyle:r});if(sv.widthCache[i])return sv.widthCache[i];try{var s=document.getElementById(z7);s||(s=document.createElement("span"),s.setAttribute("id",z7),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=uM(uM({},zwe),r);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return sv.widthCache[i]=c,++sv.cacheCount>$we&&(sv.cacheCount=0,sv.widthCache={}),c}catch{return{width:0,height:0}}},Uwe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function g0(t){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g0(t)}function TN(t,e){return Kwe(t)||Wwe(t,e)||Vwe(t,e)||Hwe()}function Hwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vwe(t,e){if(t){if(typeof t=="string")return q7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q7(t,e)}}function q7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Kwe(t){if(Array.isArray(t))return t}function Gwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xwe(r.key),r)}}function Ywe(t,e,n){return e&&U7(t.prototype,e),n&&U7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xwe(t){var e=Qwe(t,"string");return g0(e)=="symbol"?e:e+""}function Qwe(t,e){if(g0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(g0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var H7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Zwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},e2e=Object.keys(yZ),Mv="NaN";function t2e(t,e){return t*yZ[e]}var Hw=(function(){function t(e,n){Gwe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Zwe.test(n)&&(this.num=NaN,this.unit=""),e2e.includes(n)&&(this.num=t2e(e,n),this.unit="px")}return Ywe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Jwe.exec(n))!==null&&r!==void 0?r:[],s=TN(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])})();function xZ(t){if(t.includes(Mv))return Mv;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=H7.exec(e))!==null&&n!==void 0?n:[],i=TN(r,4),s=i[1],o=i[2],l=i[3],c=Hw.parse(s??""),u=Hw.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Mv;e=e.replace(H7,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=V7.exec(e))!==null&&f!==void 0?f:[],m=TN(p,4),v=m[1],y=m[2],x=m[3],b=Hw.parse(v??""),S=Hw.parse(x??""),j=y==="+"?b.add(S):b.subtract(S);if(j.isNaN())return Mv;e=e.replace(V7,j.toString())}return e}var W7=/\(([^()]*)\)/;function n2e(t){for(var e=t;e.includes("(");){var n=W7.exec(e),r=TN(n,2),i=r[1];e=e.replace(W7,xZ(i))}return e}function r2e(t){var e=t.replace(/\s+/g,"");return e=n2e(e),e=xZ(e),e}function i2e(t){try{return r2e(t)}catch{return Mv}}function i5(t){var e=i2e(t.slice(5,-1));return e===Mv?"":e}var s2e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],a2e=["dx","dy","angle","className","breakAll"];function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dM.apply(this,arguments)}function K7(t,e){if(t==null)return{};var n=o2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function o2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G7(t,e){return d2e(t)||u2e(t,e)||c2e(t,e)||l2e()}function l2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2e(t,e){if(t){if(typeof t=="string")return Y7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y7(t,e)}}function Y7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function d2e(t){if(Array.isArray(t))return t}var bZ=/[ \f\n\r\t\v\u2028\u2029]+/,wZ=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];Yn(n)||(r?s=n.toString().split(""):s=n.toString().split(bZ));var o=s.map(function(c){return{word:c,width:Tb(c,i).width}}),l=r?0:Tb("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},f2e=function(e,n,r,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Pt(o),f=l,p=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(X,q){var V=q.word,Y=q.width,re=X[X.length-1];if(re&&(i==null||s||re.width+Y+r<Number(i)))re.words.push(V),re.width+=Y+r;else{var Q={words:[V],width:Y};X.push(Q)}return X},[])},m=p(n),v=function(W){return W.reduce(function(X,q){return X.width>q.width?X:q})};if(!d)return m;for(var y="",x=function(W){var X=f.slice(0,W),q=wZ({breakAll:u,style:c,children:X+y}).wordsWithComputedWidth,V=p(q),Y=V.length>o||v(V).width>Number(i);return[Y,V]},b=0,S=f.length-1,j=0,E;b<=S&&j<=f.length-1;){var A=Math.floor((b+S)/2),P=A-1,O=x(P),k=G7(O,2),C=k[0],I=k[1],R=x(A),D=G7(R,1),L=D[0];if(!C&&!L&&(b=A+1),C&&L&&(S=A-1),!C&&L){E=I;break}j++}return E||m},X7=function(e){var n=Yn(e)?[]:e.toString().split(bZ);return[{words:n}]},h2e=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!Ap.isSsr){var c,u,d=wZ({breakAll:o,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return X7(i);return f2e({breakAll:o,children:i,maxLines:l,style:s},c,u,n,r)}return X7(i)},Q7="#808080",ON=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,m=p===void 0?"start":p,v=e.verticalAnchor,y=v===void 0?"end":v,x=e.fill,b=x===void 0?Q7:x,S=K7(e,s2e),j=N.useMemo(function(){return h2e({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:f,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,f,S.style,S.width]),E=S.dx,A=S.dy,P=S.angle,O=S.className,k=S.breakAll,C=K7(S,a2e);if(!aa(r)||!aa(s))return null;var I=r+(Pt(E)?E:0),R=s+(Pt(A)?A:0),D;switch(y){case"start":D=i5("calc(".concat(u,")"));break;case"middle":D=i5("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=i5("calc(".concat(j.length-1," * -").concat(l,")"));break}var L=[];if(f){var z=j[0].width,W=S.width;L.push("scale(".concat((Pt(W)?W/z:1)/z,")"))}return P&&L.push("rotate(".concat(P,", ").concat(I,", ").concat(R,")")),L.length&&(C.transform=L.join(" ")),ve.createElement("text",dM({},Jn(C,!0),{x:I,y:R,className:mr("recharts-text",O),textAnchor:m,fill:b.includes("url")?Q7:b}),j.map(function(X,q){var V=X.words.join(k?"":" ");return ve.createElement("tspan",{x:I,dy:q===0?D:l,key:"".concat(V,"-").concat(q)},V)}))};function ap(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p2e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eI(t){let e,n,r;t.length!==2?(e=ap,n=(l,c)=>ap(t(l),c),r=(l,c)=>t(l)-c):(e=t===ap||t===p2e?t:m2e,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:o,right:s}}function m2e(){return 0}function NZ(t){return t===null?NaN:+t}function*g2e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const v2e=eI(ap),k1=v2e.right;eI(NZ).center;class Z7 extends Map{constructor(e,n=b2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(J7(this,e))}has(e){return super.has(J7(this,e))}set(e,n){return super.set(y2e(this,e),n)}delete(e){return super.delete(x2e(this,e))}}function J7({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function y2e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function x2e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function b2e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function w2e(t=ap){if(t===ap)return SZ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function SZ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const N2e=Math.sqrt(50),S2e=Math.sqrt(10),j2e=Math.sqrt(2);function PN(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=N2e?10:s>=S2e?5:s>=j2e?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?PN(t,e,n*2):[l,c,u]}function fM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?PN(e,t,n):PN(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function hM(t,e,n){return e=+e,t=+t,n=+n,PN(t,e,n)[2]}function pM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?hM(e,t,n):hM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ez(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function tz(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function jZ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?SZ:w2e(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/c+p)),v=Math.min(r,Math.floor(e+(c-u)*f/c+p));jZ(t,e,m,v,i)}const s=t[e];let o=n,l=r;for(Zx(t,n,e),i(t[r],s)>0&&Zx(t,n,r);o<l;){for(Zx(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Zx(t,n,l):(++l,Zx(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Zx(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function E2e(t,e,n){if(t=Float64Array.from(g2e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return tz(t);if(e>=1)return ez(t);var r,i=(r-1)*e,s=Math.floor(i),o=ez(jZ(t,s).subarray(0,s+1)),l=tz(t.subarray(s+1));return o+(l-o)*(i-s)}}function _2e(t,e,n=NZ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function C2e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Tc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Kf(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const mM=Symbol("implicit");function tI(){var t=new Z7,e=[],n=[],r=mM;function i(s){let o=t.get(s);if(o===void 0){if(r!==mM)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Z7;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return tI(e,n).unknown(r)},Tc.apply(i,arguments),i}function v0(){var t=tI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,m=i<r,v=m?i:r,y=m?r:i;s=(y-v)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),v+=(y-v-s*(p-c))*d,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var x=C2e(p).map(function(b){return v+s*b});return n(m?x.reverse():x)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,f()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return v0(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Tc.apply(f(),arguments)}function EZ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return EZ(e())},t}function Ob(){return EZ(v0.apply(null,arguments).paddingInner(1))}function nI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _Z(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function T1(){}var y0=.7,MN=1/y0,Wv="\\s*([+-]?\\d+)\\s*",x0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A2e=/^#([0-9a-f]{3,8})$/,k2e=new RegExp(`^rgb\\(${Wv},${Wv},${Wv}\\)$`),T2e=new RegExp(`^rgb\\(${md},${md},${md}\\)$`),O2e=new RegExp(`^rgba\\(${Wv},${Wv},${Wv},${x0}\\)$`),P2e=new RegExp(`^rgba\\(${md},${md},${md},${x0}\\)$`),M2e=new RegExp(`^hsl\\(${x0},${md},${md}\\)$`),R2e=new RegExp(`^hsla\\(${x0},${md},${md},${x0}\\)$`),nz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nI(T1,b0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rz,formatHex:rz,formatHex8:D2e,formatHsl:I2e,formatRgb:iz,toString:iz});function rz(){return this.rgb().formatHex()}function D2e(){return this.rgb().formatHex8()}function I2e(){return CZ(this).formatHsl()}function iz(){return this.rgb().formatRgb()}function b0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=A2e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sz(e):n===3?new al(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=k2e.exec(t))?new al(e[1],e[2],e[3],1):(e=T2e.exec(t))?new al(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=O2e.exec(t))?Vw(e[1],e[2],e[3],e[4]):(e=P2e.exec(t))?Vw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=M2e.exec(t))?lz(e[1],e[2]/100,e[3]/100,1):(e=R2e.exec(t))?lz(e[1],e[2]/100,e[3]/100,e[4]):nz.hasOwnProperty(t)?sz(nz[t]):t==="transparent"?new al(NaN,NaN,NaN,0):null}function sz(t){return new al(t>>16&255,t>>8&255,t&255,1)}function Vw(t,e,n,r){return r<=0&&(t=e=n=NaN),new al(t,e,n,r)}function L2e(t){return t instanceof T1||(t=b0(t)),t?(t=t.rgb(),new al(t.r,t.g,t.b,t.opacity)):new al}function gM(t,e,n,r){return arguments.length===1?L2e(t):new al(t,e,n,r??1)}function al(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}nI(al,gM,_Z(T1,{brighter(t){return t=t==null?MN:Math.pow(MN,t),new al(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?y0:Math.pow(y0,t),new al(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new al(Dm(this.r),Dm(this.g),Dm(this.b),RN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:az,formatHex:az,formatHex8:F2e,formatRgb:oz,toString:oz}));function az(){return`#${Em(this.r)}${Em(this.g)}${Em(this.b)}`}function F2e(){return`#${Em(this.r)}${Em(this.g)}${Em(this.b)}${Em((isNaN(this.opacity)?1:this.opacity)*255)}`}function oz(){const t=RN(this.opacity);return`${t===1?"rgb(":"rgba("}${Dm(this.r)}, ${Dm(this.g)}, ${Dm(this.b)}${t===1?")":`, ${t})`}`}function RN(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Em(t){return t=Dm(t),(t<16?"0":"")+t.toString(16)}function lz(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cu(t,e,n,r)}function CZ(t){if(t instanceof cu)return new cu(t.h,t.s,t.l,t.opacity);if(t instanceof T1||(t=b0(t)),!t)return new cu;if(t instanceof cu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new cu(o,l,c,t.opacity)}function B2e(t,e,n,r){return arguments.length===1?CZ(t):new cu(t,e,n,r??1)}function cu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}nI(cu,B2e,_Z(T1,{brighter(t){return t=t==null?MN:Math.pow(MN,t),new cu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?y0:Math.pow(y0,t),new cu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new al(s5(t>=240?t-240:t+120,i,r),s5(t,i,r),s5(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new cu(cz(this.h),Ww(this.s),Ww(this.l),RN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=RN(this.opacity);return`${t===1?"hsl(":"hsla("}${cz(this.h)}, ${Ww(this.s)*100}%, ${Ww(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cz(t){return t=(t||0)%360,t<0?t+360:t}function Ww(t){return Math.max(0,Math.min(1,t||0))}function s5(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const rI=t=>()=>t;function $2e(t,e){return function(n){return t+n*e}}function z2e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function q2e(t){return(t=+t)==1?AZ:function(e,n){return n-e?z2e(e,n,t):rI(isNaN(e)?n:e)}}function AZ(t,e){var n=e-t;return n?$2e(t,n):rI(isNaN(t)?e:t)}const uz=(function t(e){var n=q2e(e);function r(i,s){var o=n((i=gM(i)).r,(s=gM(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=AZ(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r})(1);function U2e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function H2e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function V2e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=lx(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function W2e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function DN(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function K2e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=lx(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var vM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a5=new RegExp(vM.source,"g");function G2e(t){return function(){return t}}function Y2e(t){return function(e){return t(e)+""}}function X2e(t,e){var n=vM.lastIndex=a5.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=vM.exec(t))&&(i=a5.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:DN(r,i)})),n=a5.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Y2e(c[0].x):G2e(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function lx(t,e){var n=typeof e,r;return e==null||n==="boolean"?rI(e):(n==="number"?DN:n==="string"?(r=b0(e))?(e=r,uz):X2e:e instanceof b0?uz:e instanceof Date?W2e:H2e(e)?U2e:Array.isArray(e)?V2e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?K2e:DN)(t,e)}function iI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Q2e(t,e){e===void 0&&(e=t,t=lx);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function Z2e(t){return function(){return t}}function IN(t){return+t}var dz=[0,1];function Po(t){return t}function yM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Z2e(isNaN(e)?NaN:.5)}function J2e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function eNe(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=yM(i,r),s=n(o,s)):(r=yM(r,i),s=n(s,o)),function(l){return s(r(l))}}function tNe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=yM(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=k1(t,l,1,r)-1;return s[c](i[c](l))}}function O1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jE(){var t=dz,e=dz,n=lx,r,i,s,o=Po,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==Po&&(o=J2e(t[0],t[p-1])),l=p>2?tNe:eNe,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(r),e,n)))(r(o(p)))}return f.invert=function(p){return o(i((u||(u=l(e,t.map(r),DN)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,IN),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=iI,d()},f.clamp=function(p){return arguments.length?(o=p?!0:Po,d()):o!==Po},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(s=p,f):s},function(p,m){return r=p,i=m,d()}}function sI(){return jE()(Po,Po)}function nNe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function LN(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fy(t){return t=LN(Math.abs(t)),t?t[1]:NaN}function rNe(t,e){return function(n,r){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function iNe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sNe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w0(t){if(!(e=sNe.exec(t)))throw new Error("invalid format: "+t);var e;return new aI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}w0.prototype=aI.prototype;function aI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aNe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var kZ;function oNe(t,e){var n=LN(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(kZ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+LN(t,Math.max(0,e+s-1))[0]}function fz(t,e){var n=LN(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hz={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nNe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fz(t*100,e),r:fz,s:oNe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pz(t){return t}var mz=Array.prototype.map,gz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lNe(t){var e=t.grouping===void 0||t.thousands===void 0?pz:rNe(mz.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?pz:iNe(mz.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=w0(f);var p=f.fill,m=f.align,v=f.sign,y=f.symbol,x=f.zero,b=f.width,S=f.comma,j=f.precision,E=f.trim,A=f.type;A==="n"?(S=!0,A="g"):hz[A]||(j===void 0&&(j=12),E=!0,A="g"),(x||p==="0"&&m==="=")&&(x=!0,p="0",m="=");var P=y==="$"?n:y==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",O=y==="$"?r:/[%p]/.test(A)?o:"",k=hz[A],C=/[defgprs%]/.test(A);j=j===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function I(R){var D=P,L=O,z,W,X;if(A==="c")L=k(R)+L,R="";else{R=+R;var q=R<0||1/R<0;if(R=isNaN(R)?c:k(Math.abs(R),j),E&&(R=aNe(R)),q&&+R==0&&v!=="+"&&(q=!1),D=(q?v==="("?v:l:v==="-"||v==="("?"":v)+D,L=(A==="s"?gz[8+kZ/3]:"")+L+(q&&v==="("?")":""),C){for(z=-1,W=R.length;++z<W;)if(X=R.charCodeAt(z),48>X||X>57){L=(X===46?i+R.slice(z+1):R.slice(z))+L,R=R.slice(0,z);break}}}S&&!x&&(R=e(R,1/0));var V=D.length+R.length+L.length,Y=V<b?new Array(b-V+1).join(p):"";switch(S&&x&&(R=e(Y+R,Y.length?b-L.length:1/0),Y=""),m){case"<":R=D+R+L+Y;break;case"=":R=D+Y+R+L;break;case"^":R=Y.slice(0,V=Y.length>>1)+D+R+L+Y.slice(V);break;default:R=Y+D+R+L;break}return s(R)}return I.toString=function(){return f+""},I}function d(f,p){var m=u((f=w0(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(fy(p)/3)))*3,y=Math.pow(10,-v),x=gz[8+v/3];return function(b){return m(y*b)+x}}return{format:u,formatPrefix:d}}var Kw,oI,TZ;cNe({thousands:",",grouping:[3],currency:["$",""]});function cNe(t){return Kw=lNe(t),oI=Kw.format,TZ=Kw.formatPrefix,Kw}function uNe(t){return Math.max(0,-fy(Math.abs(t)))}function dNe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fy(e)/3)))*3-fy(Math.abs(t)))}function fNe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fy(e)-fy(t))+1}function OZ(t,e,n,r){var i=pM(t,e,n),s;switch(r=w0(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=dNe(i,o))&&(r.precision=s),TZ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=fNe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return oI(r)}function kp(t){var e=t.domain;return t.ticks=function(n){var r=e();return fM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return OZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],l=r[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=hM(o,l,n),u===c)return r[i]=o,r[s]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function FN(){var t=sI();return t.copy=function(){return O1(t,FN())},Tc.apply(t,arguments),kp(t)}function PZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,IN),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return PZ(t).unknown(e)},t=arguments.length?Array.from(t,IN):[0,1],kp(n)}function MZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function vz(t){return Math.log(t)}function yz(t){return Math.exp(t)}function hNe(t){return-Math.log(-t)}function pNe(t){return-Math.exp(-t)}function mNe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gNe(t){return t===10?mNe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function vNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function xz(t){return(e,n)=>-t(-e,n)}function lI(t){const e=t(vz,yz),n=e.domain;let r=10,i,s;function o(){return i=vNe(r),s=gNe(r),n()[0]<0?(i=xz(i),s=xz(s),t(hNe,pNe)):t(vz,yz),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),m=i(d),v,y;const x=l==null?10:+l;let b=[];if(!(r%1)&&m-p<x){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(v=1;v<r;++v)if(y=p<0?v/s(-p):v*s(p),!(y<u)){if(y>d)break;b.push(y)}}else for(;p<=m;++p)for(v=r-1;v>=1;--v)if(y=p>0?v/s(-p):v*s(p),!(y<u)){if(y>d)break;b.push(y)}b.length*2<x&&(b=fM(u,d,x))}else b=fM(p,m,Math.min(m-p,x)).map(s);return f?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=w0(c)).precision==null&&(c.trim=!0),c=oI(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(MZ(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function RZ(){const t=lI(jE()).domain([1,10]);return t.copy=()=>O1(t,RZ()).base(t.base()),Tc.apply(t,arguments),t}function bz(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function wz(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cI(t){var e=1,n=t(bz(e),wz(e));return n.constant=function(r){return arguments.length?t(bz(e=+r),wz(e)):e},kp(n)}function DZ(){var t=cI(jE());return t.copy=function(){return O1(t,DZ()).constant(t.constant())},Tc.apply(t,arguments)}function Nz(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function yNe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function xNe(t){return t<0?-t*t:t*t}function uI(t){var e=t(Po,Po),n=1;function r(){return n===1?t(Po,Po):n===.5?t(yNe,xNe):t(Nz(n),Nz(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},kp(e)}function dI(){var t=uI(jE());return t.copy=function(){return O1(t,dI()).exponent(t.exponent())},Tc.apply(t,arguments),t}function bNe(){return dI.apply(null,arguments).exponent(.5)}function Sz(t){return Math.sign(t)*t*t}function wNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function IZ(){var t=sI(),e=[0,1],n=!1,r;function i(s){var o=wNe(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(Sz(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,IN)).map(Sz)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Tc.apply(i,arguments),kp(i)}function LZ(){var t=[],e=[],n=[],r;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=_2e(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:e[k1(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ap),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return LZ().domain(t).range(e).unknown(r)},Tc.apply(s,arguments)}function FZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[k1(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return FZ().domain([t,e]).range(i).unknown(s)},Tc.apply(kp(o),arguments)}function BZ(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[k1(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return BZ().domain(t).range(e).unknown(n)},Tc.apply(i,arguments)}const o5=new Date,l5=new Date;function da(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>da(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(o5.setTime(+s),l5.setTime(+o),t(o5),t(l5),Math.floor(n(o5,l5))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const BN=da(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);BN.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?da(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):BN);BN.range;const Sf=1e3,xc=Sf*60,jf=xc*60,Bf=jf*24,fI=Bf*7,jz=Bf*30,c5=Bf*365,_m=da(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sf)},(t,e)=>(e-t)/Sf,t=>t.getUTCSeconds());_m.range;const hI=da(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sf)},(t,e)=>{t.setTime(+t+e*xc)},(t,e)=>(e-t)/xc,t=>t.getMinutes());hI.range;const pI=da(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xc)},(t,e)=>(e-t)/xc,t=>t.getUTCMinutes());pI.range;const mI=da(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sf-t.getMinutes()*xc)},(t,e)=>{t.setTime(+t+e*jf)},(t,e)=>(e-t)/jf,t=>t.getHours());mI.range;const gI=da(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*jf)},(t,e)=>(e-t)/jf,t=>t.getUTCHours());gI.range;const P1=da(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xc)/Bf,t=>t.getDate()-1);P1.range;const EE=da(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bf,t=>t.getUTCDate()-1);EE.range;const $Z=da(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bf,t=>Math.floor(t/Bf));$Z.range;function Sg(t){return da(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xc)/fI)}const _E=Sg(0),$N=Sg(1),NNe=Sg(2),SNe=Sg(3),hy=Sg(4),jNe=Sg(5),ENe=Sg(6);_E.range;$N.range;NNe.range;SNe.range;hy.range;jNe.range;ENe.range;function jg(t){return da(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fI)}const CE=jg(0),zN=jg(1),_Ne=jg(2),CNe=jg(3),py=jg(4),ANe=jg(5),kNe=jg(6);CE.range;zN.range;_Ne.range;CNe.range;py.range;ANe.range;kNe.range;const vI=da(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());vI.range;const yI=da(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yI.range;const $f=da(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$f.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:da(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});$f.range;const zf=da(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:da(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zf.range;function zZ(t,e,n,r,i,s){const o=[[_m,1,Sf],[_m,5,5*Sf],[_m,15,15*Sf],[_m,30,30*Sf],[s,1,xc],[s,5,5*xc],[s,15,15*xc],[s,30,30*xc],[i,1,jf],[i,3,3*jf],[i,6,6*jf],[i,12,12*jf],[r,1,Bf],[r,2,2*Bf],[n,1,fI],[e,1,jz],[e,3,3*jz],[t,1,c5]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),v=m?m.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,f){const p=Math.abs(d-u)/f,m=eI(([,,x])=>x).right(o,p);if(m===o.length)return t.every(pM(u/c5,d/c5,f));if(m===0)return BN.every(Math.max(pM(u,d,f),1));const[v,y]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return v.every(y)}return[l,c]}const[TNe,ONe]=zZ(zf,yI,CE,$Z,gI,pI),[PNe,MNe]=zZ($f,vI,_E,P1,mI,hI);function u5(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function d5(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function RNe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=eb(i),d=tb(i),f=eb(s),p=tb(s),m=eb(o),v=tb(o),y=eb(l),x=tb(l),b=eb(c),S=tb(c),j={a:q,A:V,b:Y,B:re,c:null,d:Tz,e:Tz,f:rSe,g:hSe,G:mSe,H:eSe,I:tSe,j:nSe,L:qZ,m:iSe,M:sSe,p:Q,q:F,Q:Mz,s:Rz,S:aSe,u:oSe,U:lSe,V:cSe,w:uSe,W:dSe,x:null,X:null,y:fSe,Y:pSe,Z:gSe,"%":Pz},E={a:G,A:te,b:le,B:he,c:null,d:Oz,e:Oz,f:bSe,g:TSe,G:PSe,H:vSe,I:ySe,j:xSe,L:HZ,m:wSe,M:NSe,p:me,q:xe,Q:Mz,s:Rz,S:SSe,u:jSe,U:ESe,V:_Se,w:CSe,W:ASe,x:null,X:null,y:kSe,Y:OSe,Z:MSe,"%":Pz},A={a:I,A:R,b:D,B:L,c:z,d:Az,e:Az,f:XNe,g:Cz,G:_z,H:kz,I:kz,j:WNe,L:YNe,m:VNe,M:KNe,p:C,q:HNe,Q:ZNe,s:JNe,S:GNe,u:BNe,U:$Ne,V:zNe,w:FNe,W:qNe,x:W,X,y:Cz,Y:_z,Z:UNe,"%":QNe};j.x=P(n,j),j.X=P(r,j),j.c=P(e,j),E.x=P(n,E),E.X=P(r,E),E.c=P(e,E);function P(de,Ne){return function(Ce){var ae=[],Pe=-1,J=0,ne=de.length,Re,dt,et;for(Ce instanceof Date||(Ce=new Date(+Ce));++Pe<ne;)de.charCodeAt(Pe)===37&&(ae.push(de.slice(J,Pe)),(dt=Ez[Re=de.charAt(++Pe)])!=null?Re=de.charAt(++Pe):dt=Re==="e"?" ":"0",(et=Ne[Re])&&(Re=et(Ce,dt)),ae.push(Re),J=Pe+1);return ae.push(de.slice(J,Pe)),ae.join("")}}function O(de,Ne){return function(Ce){var ae=Jx(1900,void 0,1),Pe=k(ae,de,Ce+="",0),J,ne;if(Pe!=Ce.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Ne&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(J=d5(Jx(ae.y,0,1)),ne=J.getUTCDay(),J=ne>4||ne===0?zN.ceil(J):zN(J),J=EE.offset(J,(ae.V-1)*7),ae.y=J.getUTCFullYear(),ae.m=J.getUTCMonth(),ae.d=J.getUTCDate()+(ae.w+6)%7):(J=u5(Jx(ae.y,0,1)),ne=J.getDay(),J=ne>4||ne===0?$N.ceil(J):$N(J),J=P1.offset(J,(ae.V-1)*7),ae.y=J.getFullYear(),ae.m=J.getMonth(),ae.d=J.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ne="Z"in ae?d5(Jx(ae.y,0,1)).getUTCDay():u5(Jx(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ne+5)%7:ae.w+ae.U*7-(ne+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,d5(ae)):u5(ae)}}function k(de,Ne,Ce,ae){for(var Pe=0,J=Ne.length,ne=Ce.length,Re,dt;Pe<J;){if(ae>=ne)return-1;if(Re=Ne.charCodeAt(Pe++),Re===37){if(Re=Ne.charAt(Pe++),dt=A[Re in Ez?Ne.charAt(Pe++):Re],!dt||(ae=dt(de,Ce,ae))<0)return-1}else if(Re!=Ce.charCodeAt(ae++))return-1}return ae}function C(de,Ne,Ce){var ae=u.exec(Ne.slice(Ce));return ae?(de.p=d.get(ae[0].toLowerCase()),Ce+ae[0].length):-1}function I(de,Ne,Ce){var ae=m.exec(Ne.slice(Ce));return ae?(de.w=v.get(ae[0].toLowerCase()),Ce+ae[0].length):-1}function R(de,Ne,Ce){var ae=f.exec(Ne.slice(Ce));return ae?(de.w=p.get(ae[0].toLowerCase()),Ce+ae[0].length):-1}function D(de,Ne,Ce){var ae=b.exec(Ne.slice(Ce));return ae?(de.m=S.get(ae[0].toLowerCase()),Ce+ae[0].length):-1}function L(de,Ne,Ce){var ae=y.exec(Ne.slice(Ce));return ae?(de.m=x.get(ae[0].toLowerCase()),Ce+ae[0].length):-1}function z(de,Ne,Ce){return k(de,e,Ne,Ce)}function W(de,Ne,Ce){return k(de,n,Ne,Ce)}function X(de,Ne,Ce){return k(de,r,Ne,Ce)}function q(de){return o[de.getDay()]}function V(de){return s[de.getDay()]}function Y(de){return c[de.getMonth()]}function re(de){return l[de.getMonth()]}function Q(de){return i[+(de.getHours()>=12)]}function F(de){return 1+~~(de.getMonth()/3)}function G(de){return o[de.getUTCDay()]}function te(de){return s[de.getUTCDay()]}function le(de){return c[de.getUTCMonth()]}function he(de){return l[de.getUTCMonth()]}function me(de){return i[+(de.getUTCHours()>=12)]}function xe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var Ne=P(de+="",j);return Ne.toString=function(){return de},Ne},parse:function(de){var Ne=O(de+="",!1);return Ne.toString=function(){return de},Ne},utcFormat:function(de){var Ne=P(de+="",E);return Ne.toString=function(){return de},Ne},utcParse:function(de){var Ne=O(de+="",!0);return Ne.toString=function(){return de},Ne}}}var Ez={"-":"",_:" ",0:"0"},Aa=/^\s*\d+/,DNe=/^%/,INe=/[\\^$*+?|[\]().{}]/g;function Br(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function LNe(t){return t.replace(INe,"\\$&")}function eb(t){return new RegExp("^(?:"+t.map(LNe).join("|")+")","i")}function tb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function FNe(t,e,n){var r=Aa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function BNe(t,e,n){var r=Aa.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $Ne(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function zNe(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function qNe(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _z(t,e,n){var r=Aa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Cz(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function UNe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function HNe(t,e,n){var r=Aa.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function VNe(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Az(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function WNe(t,e,n){var r=Aa.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kz(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function KNe(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function GNe(t,e,n){var r=Aa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function YNe(t,e,n){var r=Aa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function XNe(t,e,n){var r=Aa.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function QNe(t,e,n){var r=DNe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ZNe(t,e,n){var r=Aa.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function JNe(t,e,n){var r=Aa.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Tz(t,e){return Br(t.getDate(),e,2)}function eSe(t,e){return Br(t.getHours(),e,2)}function tSe(t,e){return Br(t.getHours()%12||12,e,2)}function nSe(t,e){return Br(1+P1.count($f(t),t),e,3)}function qZ(t,e){return Br(t.getMilliseconds(),e,3)}function rSe(t,e){return qZ(t,e)+"000"}function iSe(t,e){return Br(t.getMonth()+1,e,2)}function sSe(t,e){return Br(t.getMinutes(),e,2)}function aSe(t,e){return Br(t.getSeconds(),e,2)}function oSe(t){var e=t.getDay();return e===0?7:e}function lSe(t,e){return Br(_E.count($f(t)-1,t),e,2)}function UZ(t){var e=t.getDay();return e>=4||e===0?hy(t):hy.ceil(t)}function cSe(t,e){return t=UZ(t),Br(hy.count($f(t),t)+($f(t).getDay()===4),e,2)}function uSe(t){return t.getDay()}function dSe(t,e){return Br($N.count($f(t)-1,t),e,2)}function fSe(t,e){return Br(t.getFullYear()%100,e,2)}function hSe(t,e){return t=UZ(t),Br(t.getFullYear()%100,e,2)}function pSe(t,e){return Br(t.getFullYear()%1e4,e,4)}function mSe(t,e){var n=t.getDay();return t=n>=4||n===0?hy(t):hy.ceil(t),Br(t.getFullYear()%1e4,e,4)}function gSe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Br(e/60|0,"0",2)+Br(e%60,"0",2)}function Oz(t,e){return Br(t.getUTCDate(),e,2)}function vSe(t,e){return Br(t.getUTCHours(),e,2)}function ySe(t,e){return Br(t.getUTCHours()%12||12,e,2)}function xSe(t,e){return Br(1+EE.count(zf(t),t),e,3)}function HZ(t,e){return Br(t.getUTCMilliseconds(),e,3)}function bSe(t,e){return HZ(t,e)+"000"}function wSe(t,e){return Br(t.getUTCMonth()+1,e,2)}function NSe(t,e){return Br(t.getUTCMinutes(),e,2)}function SSe(t,e){return Br(t.getUTCSeconds(),e,2)}function jSe(t){var e=t.getUTCDay();return e===0?7:e}function ESe(t,e){return Br(CE.count(zf(t)-1,t),e,2)}function VZ(t){var e=t.getUTCDay();return e>=4||e===0?py(t):py.ceil(t)}function _Se(t,e){return t=VZ(t),Br(py.count(zf(t),t)+(zf(t).getUTCDay()===4),e,2)}function CSe(t){return t.getUTCDay()}function ASe(t,e){return Br(zN.count(zf(t)-1,t),e,2)}function kSe(t,e){return Br(t.getUTCFullYear()%100,e,2)}function TSe(t,e){return t=VZ(t),Br(t.getUTCFullYear()%100,e,2)}function OSe(t,e){return Br(t.getUTCFullYear()%1e4,e,4)}function PSe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?py(t):py.ceil(t),Br(t.getUTCFullYear()%1e4,e,4)}function MSe(){return"+0000"}function Pz(){return"%"}function Mz(t){return+t}function Rz(t){return Math.floor(+t/1e3)}var av,WZ,KZ;RSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RSe(t){return av=RNe(t),WZ=av.format,av.parse,KZ=av.utcFormat,av.utcParse,av}function DSe(t){return new Date(t)}function ISe(t){return t instanceof Date?+t:+new Date(+t)}function xI(t,e,n,r,i,s,o,l,c,u){var d=sI(),f=d.invert,p=d.domain,m=u(".%L"),v=u(":%S"),y=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),S=u("%b %d"),j=u("%B"),E=u("%Y");function A(P){return(c(P)<P?m:l(P)<P?v:o(P)<P?y:s(P)<P?x:r(P)<P?i(P)<P?b:S:n(P)<P?j:E)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?p(Array.from(P,ISe)):p().map(DSe)},d.ticks=function(P){var O=p();return t(O[0],O[O.length-1],P??10)},d.tickFormat=function(P,O){return O==null?A:u(O)},d.nice=function(P){var O=p();return(!P||typeof P.range!="function")&&(P=e(O[0],O[O.length-1],P??10)),P?p(MZ(O,P)):d},d.copy=function(){return O1(d,xI(t,e,n,r,i,s,o,l,c,u))},d}function LSe(){return Tc.apply(xI(PNe,MNe,$f,vI,_E,P1,mI,hI,_m,WZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FSe(){return Tc.apply(xI(TNe,ONe,zf,yI,CE,EE,gI,pI,_m,KZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function AE(){var t=0,e=1,n,r,i,s,o=Po,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(s(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(p){var m,v;return arguments.length?([m,v]=p,o=f(m,v),u):[o(0),o(1)]}}return u.range=d(lx),u.rangeRound=d(iI),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Tp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function GZ(){var t=kp(AE()(Po));return t.copy=function(){return Tp(t,GZ())},Kf.apply(t,arguments)}function YZ(){var t=lI(AE()).domain([1,10]);return t.copy=function(){return Tp(t,YZ()).base(t.base())},Kf.apply(t,arguments)}function XZ(){var t=cI(AE());return t.copy=function(){return Tp(t,XZ()).constant(t.constant())},Kf.apply(t,arguments)}function bI(){var t=uI(AE());return t.copy=function(){return Tp(t,bI()).exponent(t.exponent())},Kf.apply(t,arguments)}function BSe(){return bI.apply(null,arguments).exponent(.5)}function QZ(){var t=[],e=Po;function n(r){if(r!=null&&!isNaN(r=+r))return e((k1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ap),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>E2e(t,s/r))},n.copy=function(){return QZ(e).domain(t)},Kf.apply(n,arguments)}function kE(){var t=0,e=.5,n=1,r=1,i,s,o,l,c,u=Po,d,f=!1,p;function m(y){return isNaN(y=+y)?p:(y=.5+((y=+d(y))-s)*(r*y<r*s?l:c),u(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,n]=y,i=d(t=+t),s=d(e=+e),o=d(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(u=y,m):u};function v(y){return function(x){var b,S,j;return arguments.length?([b,S,j]=x,u=Q2e(y,[b,S,j]),m):[u(0),u(.5),u(1)]}}return m.range=v(lx),m.rangeRound=v(iI),m.unknown=function(y){return arguments.length?(p=y,m):p},function(y){return d=y,i=y(t),s=y(e),o=y(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,m}}function ZZ(){var t=kp(kE()(Po));return t.copy=function(){return Tp(t,ZZ())},Kf.apply(t,arguments)}function JZ(){var t=lI(kE()).domain([.1,1,10]);return t.copy=function(){return Tp(t,JZ()).base(t.base())},Kf.apply(t,arguments)}function eJ(){var t=cI(kE());return t.copy=function(){return Tp(t,eJ()).constant(t.constant())},Kf.apply(t,arguments)}function wI(){var t=uI(kE());return t.copy=function(){return Tp(t,wI()).exponent(t.exponent())},Kf.apply(t,arguments)}function $Se(){return wI.apply(null,arguments).exponent(.5)}const Dz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:v0,scaleDiverging:ZZ,scaleDivergingLog:JZ,scaleDivergingPow:wI,scaleDivergingSqrt:$Se,scaleDivergingSymlog:eJ,scaleIdentity:PZ,scaleImplicit:mM,scaleLinear:FN,scaleLog:RZ,scaleOrdinal:tI,scalePoint:Ob,scalePow:dI,scaleQuantile:LZ,scaleQuantize:FZ,scaleRadial:IZ,scaleSequential:GZ,scaleSequentialLog:YZ,scaleSequentialPow:bI,scaleSequentialQuantile:QZ,scaleSequentialSqrt:BSe,scaleSequentialSymlog:XZ,scaleSqrt:bNe,scaleSymlog:DZ,scaleThreshold:BZ,scaleTime:LSe,scaleUtc:FSe,tickFormat:OZ},Symbol.toStringTag,{value:"Module"}));var f5,Iz;function tJ(){if(Iz)return f5;Iz=1;var t=ix();function e(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=r(l);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,d=l}return d}return f5=e,f5}var h5,Lz;function zSe(){if(Lz)return h5;Lz=1;function t(e,n){return e>n}return h5=t,h5}var p5,Fz;function qSe(){if(Fz)return p5;Fz=1;var t=tJ(),e=zSe(),n=ox();function r(i){return i&&i.length?t(i,n,e):void 0}return p5=r,p5}var USe=qSe();const Gh=qr(USe);var m5,Bz;function HSe(){if(Bz)return m5;Bz=1;function t(e,n){return e<n}return m5=t,m5}var g5,$z;function VSe(){if($z)return g5;$z=1;var t=tJ(),e=HSe(),n=ox();function r(i){return i&&i.length?t(i,n,e):void 0}return g5=r,g5}var WSe=VSe();const TE=qr(WSe);var v5,zz;function KSe(){if(zz)return v5;zz=1;var t=FD(),e=Cp(),n=uZ(),r=fl();function i(s,o){var l=r(s)?t:n;return l(s,e(o,3))}return v5=i,v5}var y5,qz;function GSe(){if(qz)return y5;qz=1;var t=lZ(),e=KSe();function n(r,i){return t(e(r,i),1)}return y5=n,y5}var YSe=GSe();const XSe=qr(YSe);var x5,Uz;function QSe(){if(Uz)return x5;Uz=1;var t=XD();function e(n,r){return t(n,r)}return x5=e,x5}var ZSe=QSe();const eg=qr(ZSe);var cx=1e9,JSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SI,Hi=!0,Cc="[DecimalError] ",Im=Cc+"Invalid argument: ",NI=Cc+"Exponent out of range: ",ux=Math.floor,mm=Math.pow,eje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ml,Na=1e7,Oi=7,nJ=9007199254740991,qN=ux(nJ/Oi),Jt={};Jt.absoluteValue=Jt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Jt.comparedTo=Jt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Jt.decimalPlaces=Jt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Oi;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Jt.dividedBy=Jt.div=function(t){return Of(this,new this.constructor(t))};Jt.dividedToIntegerBy=Jt.idiv=function(t){var e=this,n=e.constructor;return pi(Of(e,new n(t),0,1),n.precision)};Jt.equals=Jt.eq=function(t){return!this.cmp(t)};Jt.exponent=function(){return Vs(this)};Jt.greaterThan=Jt.gt=function(t){return this.cmp(t)>0};Jt.greaterThanOrEqualTo=Jt.gte=function(t){return this.cmp(t)>=0};Jt.isInteger=Jt.isint=function(){return this.e>this.d.length-2};Jt.isNegative=Jt.isneg=function(){return this.s<0};Jt.isPositive=Jt.ispos=function(){return this.s>0};Jt.isZero=function(){return this.s===0};Jt.lessThan=Jt.lt=function(t){return this.cmp(t)<0};Jt.lessThanOrEqualTo=Jt.lte=function(t){return this.cmp(t)<1};Jt.logarithm=Jt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ml))throw Error(Cc+"NaN");if(n.s<1)throw Error(Cc+(n.s?"NaN":"-Infinity"));return n.eq(Ml)?new r(0):(Hi=!1,e=Of(N0(n,s),N0(t,s),s),Hi=!0,pi(e,i))};Jt.minus=Jt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sJ(e,t):rJ(e,(t.s=-t.s,t))};Jt.modulo=Jt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Cc+"NaN");return n.s?(Hi=!1,e=Of(n,t,0,1).times(t),Hi=!0,n.minus(e)):pi(new r(n),i)};Jt.naturalExponential=Jt.exp=function(){return iJ(this)};Jt.naturalLogarithm=Jt.ln=function(){return N0(this)};Jt.negated=Jt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Jt.plus=Jt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rJ(e,t):sJ(e,(t.s=-t.s,t))};Jt.precision=Jt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Im+t);if(e=Vs(i)+1,r=i.d.length-1,n=r*Oi+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Jt.squareRoot=Jt.sqrt=function(){var t,e,n,r,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Cc+"NaN")}for(t=Vs(l),Hi=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=ld(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ux((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=r,r=s.plus(Of(l,s,o+2)).times(.5),ld(s.d).slice(0,o)===(e=ld(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(pi(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;o+=4}return Hi=!0,pi(r,n)};Jt.times=Jt.mul=function(t){var e,n,r,i,s,o,l,c,u,d=this,f=d.constructor,p=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=p.length,u=m.length,c<u&&(s=p,p=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)l=s[i]+m[r]*p[i-r-1]+e,s[i--]=l%Na|0,e=l/Na|0;s[i]=(s[i]+e)%Na|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Hi?pi(t,f.precision):t};Jt.toDecimalPlaces=Jt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Nd(t,0,cx),e===void 0?e=r.rounding:Nd(e,0,8),pi(n,t+Vs(n)+1,e))};Jt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=tg(r,!0):(Nd(t,0,cx),e===void 0?e=i.rounding:Nd(e,0,8),r=pi(new i(r),t+1,e),n=tg(r,!0,t+1)),n};Jt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?tg(i):(Nd(t,0,cx),e===void 0?e=s.rounding:Nd(e,0,8),r=pi(new s(i),t+Vs(i)+1,e),n=tg(r.abs(),!1,t+Vs(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Jt.toInteger=Jt.toint=function(){var t=this,e=t.constructor;return pi(new e(t),Vs(t)+1,e.rounding)};Jt.toNumber=function(){return+this};Jt.toPower=Jt.pow=function(t){var e,n,r,i,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ml);if(l=new c(l),!l.s){if(t.s<1)throw Error(Cc+"Infinity");return l}if(l.eq(Ml))return l;if(r=c.precision,t.eq(Ml))return pi(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=d<0?-d:d)<=nJ){for(i=new c(Ml),e=Math.ceil(r/Oi+4),Hi=!1;n%2&&(i=i.times(l),Vz(i.d,e)),n=ux(n/2),n!==0;)l=l.times(l),Vz(l.d,e);return Hi=!0,t.s<0?new c(Ml).div(i):pi(i,r)}}else if(s<0)throw Error(Cc+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Hi=!1,i=t.times(N0(l,r+u)),Hi=!0,i=iJ(i),i.s=s,i};Jt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Vs(i),r=tg(i,n<=s.toExpNeg||n>=s.toExpPos)):(Nd(t,1,cx),e===void 0?e=s.rounding:Nd(e,0,8),i=pi(new s(i),t,e),n=Vs(i),r=tg(i,t<=n||n<=s.toExpNeg,t)),r};Jt.toSignificantDigits=Jt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Nd(t,1,cx),e===void 0?e=r.rounding:Nd(e,0,8)),pi(new r(n),t,e)};Jt.toString=Jt.valueOf=Jt.val=Jt.toJSON=Jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Vs(t),n=t.constructor;return tg(t,e<=n.toExpNeg||e>=n.toExpPos)};function rJ(t,e){var n,r,i,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Hi?pi(e,f):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=o,l=c.length),o=Math.ceil(f/Oi),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Na|0,c[s]%=Na;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Hi?pi(e,f):e}function Nd(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Im+t)}function ld(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Oi-r.length,n&&(s+=Lh(n)),s+=r;o=t[e],r=o+"",n=Oi-r.length,n&&(s+=Lh(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Of=(function(){function t(r,i){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+o,r[l]=s%Na|0,o=s/Na|0;return o&&r.unshift(o),r}function e(r,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Na+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var l,c,u,d,f,p,m,v,y,x,b,S,j,E,A,P,O,k,C=r.constructor,I=r.s==i.s?1:-1,R=r.d,D=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(Cc+"Division by zero");for(c=r.e-i.e,O=D.length,A=R.length,m=new C(I),v=m.d=[],u=0;D[u]==(R[u]||0);)++u;if(D[u]>(R[u]||0)&&--c,s==null?S=s=C.precision:o?S=s+(Vs(r)-Vs(i))+1:S=s,S<0)return new C(0);if(S=S/Oi+2|0,u=0,O==1)for(d=0,D=D[0],S++;(u<A||d)&&S--;u++)j=d*Na+(R[u]||0),v[u]=j/D|0,d=j%D|0;else{for(d=Na/(D[0]+1)|0,d>1&&(D=t(D,d),R=t(R,d),O=D.length,A=R.length),E=O,y=R.slice(0,O),x=y.length;x<O;)y[x++]=0;k=D.slice(),k.unshift(0),P=D[0],D[1]>=Na/2&&++P;do d=0,l=e(D,y,O,x),l<0?(b=y[0],O!=x&&(b=b*Na+(y[1]||0)),d=b/P|0,d>1?(d>=Na&&(d=Na-1),f=t(D,d),p=f.length,x=y.length,l=e(f,y,p,x),l==1&&(d--,n(f,O<p?k:D,p))):(d==0&&(l=d=1),f=D.slice()),p=f.length,p<x&&f.unshift(0),n(y,f,x),l==-1&&(x=y.length,l=e(D,y,O,x),l<1&&(d++,n(y,O<x?k:D,x))),x=y.length):l===0&&(d++,y=[0]),v[u++]=d,l&&y[0]?y[x++]=R[E]||0:(y=[R[E]],x=1);while((E++<A||y[0]!==void 0)&&S--)}return v[0]||v.shift(),m.e=c,pi(m,o?s+Vs(m)+1:s)}})();function iJ(t,e){var n,r,i,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Vs(t)>16)throw Error(NI+Vs(t));if(!t.s)return new d(Ml);for(Hi=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(mm(2,u))/Math.LN10*2+5|0,l+=r,n=i=s=new d(Ml),d.precision=l;;){if(i=pi(i.times(t),l),n=n.times(++c),o=s.plus(Of(i,n,l)),ld(o.d).slice(0,l)===ld(s.d).slice(0,l)){for(;u--;)s=pi(s.times(s),l);return d.precision=f,e==null?(Hi=!0,pi(s,f)):s}s=o}}function Vs(t){for(var e=t.e*Oi,n=t.d[0];n>=10;n/=10)e++;return e}function b5(t,e,n){if(e>t.LN10.sd())throw Hi=!0,n&&(t.precision=n),Error(Cc+"LN10 precision limit exceeded");return pi(new t(t.LN10),e)}function Lh(t){for(var e="";t--;)e+="0";return e}function N0(t,e){var n,r,i,s,o,l,c,u,d,f=1,p=10,m=t,v=m.d,y=m.constructor,x=y.precision;if(m.s<1)throw Error(Cc+(m.s?"NaN":"-Infinity"));if(m.eq(Ml))return new y(0);if(e==null?(Hi=!1,u=x):u=e,m.eq(10))return e==null&&(Hi=!0),b5(y,u);if(u+=p,y.precision=u,n=ld(v),r=n.charAt(0),s=Vs(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=ld(m.d),r=n.charAt(0),f++;s=Vs(m),r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return c=b5(y,u+2,x).times(s+""),m=N0(new y(r+"."+n.slice(1)),u-p).plus(c),y.precision=x,e==null?(Hi=!0,pi(m,x)):m;for(l=o=m=Of(m.minus(Ml),m.plus(Ml),u),d=pi(m.times(m),u),i=3;;){if(o=pi(o.times(d),u),c=l.plus(Of(o,new y(i),u)),ld(c.d).slice(0,u)===ld(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(b5(y,u+2,x).times(s+""))),l=Of(l,new y(f),u),y.precision=x,e==null?(Hi=!0,pi(l,x)):l;l=c,i+=2}}function Hz(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ux(n/Oi),t.d=[],r=(n+1)%Oi,n<0&&(r+=Oi),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Oi;r<i;)t.d.push(+e.slice(r,r+=Oi));e=e.slice(r),r=Oi-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Hi&&(t.e>qN||t.e<-qN))throw Error(NI+n)}else t.s=0,t.e=0,t.d=[0];return t}function pi(t,e,n){var r,i,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Oi,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/Oi),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;r%=Oi,i=r-Oi+o}if(n!==void 0&&(s=mm(10,o-i-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/mm(10,o-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=Vs(t),f.length=1,e=e-s-1,f[0]=mm(10,(Oi-e%Oi)%Oi),t.e=ux(-e/Oi)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=mm(10,Oi-r),f[d]=i>0?(u/mm(10,o-i)%mm(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Na&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=Na)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Hi&&(t.e>qN||t.e<-qN))throw Error(NI+Vs(t));return t}function sJ(t,e){var n,r,i,s,o,l,c,u,d,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Hi?pi(e,m):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(m/Oi),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}o=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=Na-1;--c[s],c[i]+=Na}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Hi?pi(e,m):e):new p(0)}function tg(t,e,n){var r,i=Vs(t),s=ld(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Lh(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Lh(-i-1)+s,n&&(r=n-o)>0&&(s+=Lh(r))):i>=o?(s+=Lh(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Lh(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Lh(r))),t.s<0?"-"+s:s}function Vz(t,e){if(t.length>e)return t.length=e,!0}function aJ(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Im+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Hz(o,s.toString())}else if(typeof s!="string")throw Error(Im+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,eje.test(s))Hz(o,s);else throw Error(Im+s)}if(i.prototype=Jt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=aJ,i.config=i.set=tje,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function tje(t){if(!t||typeof t!="object")throw Error(Cc+"Object expected");var e,n,r,i=["precision",1,cx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ux(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Im+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Im+n+": "+r);return this}var SI=aJ(JSe);Ml=new SI(1);const oi=SI;function nje(t){return aje(t)||sje(t)||ije(t)||rje()}function rje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ije(t,e){if(t){if(typeof t=="string")return xM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xM(t,e)}}function sje(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aje(t){if(Array.isArray(t))return xM(t)}function xM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var oje=function(e){return e},oJ={},lJ=function(e){return e===oJ},Wz=function(e){return function n(){return arguments.length===0||arguments.length===1&&lJ(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},lje=function t(e,n){return e===1?n:Wz(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==oJ}).length;return o>=e?n.apply(void 0,i):t(e-o,Wz(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return lJ(f)?c.shift():f});return n.apply(void 0,nje(d).concat(c))}))})},OE=function(e){return lje(e.length,e)},bM=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},cje=OE(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),uje=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return oje;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},wM=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},cJ=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function dje(t){var e;return t===0?e=1:e=Math.floor(new oi(t).abs().log(10).toNumber())+1,e}function fje(t,e,n){for(var r=new oi(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var hje=OE(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),pje=OE(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),mje=OE(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const PE={rangeStep:fje,getDigitCount:dje,interpolateNumber:hje,uninterpolateNumber:pje,uninterpolateTruncation:mje};function NM(t){return yje(t)||vje(t)||uJ(t)||gje()}function gje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vje(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yje(t){if(Array.isArray(t))return SM(t)}function S0(t,e){return wje(t)||bje(t,e)||uJ(t,e)||xje()}function xje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uJ(t,e){if(t){if(typeof t=="string")return SM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SM(t,e)}}function SM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bje(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function wje(t){if(Array.isArray(t))return t}function dJ(t){var e=S0(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function fJ(t,e,n){if(t.lte(0))return new oi(0);var r=PE.getDigitCount(t.toNumber()),i=new oi(10).pow(r),s=t.div(i),o=r!==1?.05:.1,l=new oi(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new oi(Math.ceil(c))}function Nje(t,e,n){var r=1,i=new oi(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new oi(10).pow(PE.getDigitCount(t)-1),i=new oi(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new oi(Math.floor(t)))}else t===0?i=new oi(Math.floor((e-1)/2)):n||(i=new oi(Math.floor(t)));var o=Math.floor((e-1)/2),l=uje(cje(function(c){return i.add(new oi(c-o).mul(r)).toNumber()}),bM);return l(0,e)}function hJ(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new oi(0),tickMin:new oi(0),tickMax:new oi(0)};var s=fJ(new oi(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new oi(0):(o=new oi(t).add(e).div(2),o=o.sub(new oi(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new oi(e).sub(o).div(s).toNumber()),u=l+c+1;return u>n?hJ(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:o.sub(new oi(l).mul(s)),tickMax:o.add(new oi(c).mul(s))})}function Sje(t){var e=S0(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=dJ([n,r]),c=S0(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(NM(bM(0,i-1).map(function(){return 1/0}))):[].concat(NM(bM(0,i-1).map(function(){return-1/0})),[d]);return n>r?wM(f):f}if(u===d)return Nje(u,i,s);var p=hJ(u,d,o,s),m=p.step,v=p.tickMin,y=p.tickMax,x=PE.rangeStep(v,y.add(new oi(.1).mul(m)),m);return n>r?wM(x):x}function jje(t,e){var n=S0(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=dJ([r,i]),l=S0(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=fJ(new oi(u).sub(c).div(d-1),s,0),p=[].concat(NM(PE.rangeStep(new oi(c),new oi(u).sub(new oi(.99).mul(f)),f)),[u]);return r>i?wM(p):p}var Eje=cJ(Sje),_je=cJ(jje),Cje="Invariant failed";function ng(t,e){throw new Error(Cje)}var Aje=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UN.apply(this,arguments)}function kje(t,e){return Mje(t)||Pje(t,e)||Oje(t,e)||Tje()}function Tje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oje(t,e){if(t){if(typeof t=="string")return Kz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kz(t,e)}}function Kz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Mje(t){if(Array.isArray(t))return t}function Rje(t,e){if(t==null)return{};var n=Dje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ije(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lje(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gJ(r.key),r)}}function Fje(t,e,n){return e&&Lje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bje(t,e,n){return e=HN(e),$je(t,pJ()?Reflect.construct(e,n||[],HN(t).constructor):e.apply(t,n))}function $je(t,e){if(e&&(my(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zje(t)}function zje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pJ=function(){return!!t})()}function HN(t){return HN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HN(t)}function qje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jM(t,e)}function jM(t,e){return jM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jM(t,e)}function mJ(t,e,n){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gJ(t){var e=Uje(t,"string");return my(e)=="symbol"?e:e+""}function Uje(t,e){if(my(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(my(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dx=(function(t){function e(){return Ije(this,e),Bje(this,e,arguments)}return qje(e,t),Fje(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,p=Rje(r,Aje),m=Jn(p,!1);this.props.direction==="x"&&d.type!=="number"&&ng();var v=c.map(function(y){var x=u(y,l),b=x.x,S=x.y,j=x.value,E=x.errorVal;if(!E)return null;var A=[],P,O;if(Array.isArray(E)){var k=kje(E,2);P=k[0],O=k[1]}else P=O=E;if(s==="vertical"){var C=d.scale,I=S+i,R=I+o,D=I-o,L=C(j-P),z=C(j+O);A.push({x1:z,y1:R,x2:z,y2:D}),A.push({x1:L,y1:I,x2:z,y2:I}),A.push({x1:L,y1:R,x2:L,y2:D})}else if(s==="horizontal"){var W=f.scale,X=b+i,q=X-o,V=X+o,Y=W(j-P),re=W(j+O);A.push({x1:q,y1:re,x2:V,y2:re}),A.push({x1:X,y1:Y,x2:X,y2:re}),A.push({x1:q,y1:Y,x2:V,y2:Y})}return ve.createElement(zr,UN({className:"recharts-errorBar",key:"bar-".concat(A.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},m),A.map(function(Q){return ve.createElement("line",UN({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return ve.createElement(zr,{className:"recharts-errorBars"},v)}}])})(ve.Component);mJ(dx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mJ(dx,"displayName","ErrorBar");function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}function Gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(n),!0).forEach(function(r){Hje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hje(t,e,n){return e=Vje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vje(t){var e=Wje(t,"string");return j0(e)=="symbol"?e:e+""}function Wje(t,e){if(j0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(j0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vJ=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=kl(n,Tf);if(!o)return null;var l=Tf.defaultProps,c=l!==void 0?fm(fm({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var p=f.item,m=f.props,v=m.sectors||m.data||[];return d.concat(v.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(r||[]).map(function(d){var f=d.item,p=f.type.defaultProps,m=p!==void 0?fm(fm({},p),f.props):{},v=m.dataKey,y=m.name,x=m.legendType,b=m.hide;return{inactive:b,dataKey:v,type:c.iconType||x||"square",color:jI(f),value:y||v,payload:m}}),fm(fm(fm({},c),Tf.getWithHeight(o,i)),{},{payload:u,item:o})};function E0(t){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(t)}function Yz(t){return Xje(t)||Yje(t)||Gje(t)||Kje()}function Kje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gje(t,e){if(t){if(typeof t=="string")return EM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EM(t,e)}}function Yje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xje(t){if(Array.isArray(t))return EM(t)}function EM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xz(Object(n),!0).forEach(function(r){Kv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kv(t,e,n){return e=Qje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qje(t){var e=Zje(t,"string");return E0(e)=="symbol"?e:e+""}function Zje(t,e){if(E0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(E0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function la(t,e,n){return Yn(t)||Yn(e)?n:aa(e)?wc(t,e,n):tr(e)?e(t):n}function Pb(t,e,n,r){var i=XSe(t,function(l){return la(l,e)});if(n==="number"){var s=i.filter(function(l){return Pt(l)||parseFloat(l)});return s.length?[TE(s),Gh(s)]:[1/0,-1/0]}var o=r?i.filter(function(l){return!Yn(l)}):i;return o.map(function(l){return aa(l)||l instanceof Date?l:""})}var Jje=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r?.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,p=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(pu(f-d)!==pu(p-f)){var v=[];if(pu(p-f)===pu(c[1]-c[0])){m=p;var y=f+c[1]-c[0];v[0]=Math.min(y,(y+d)/2),v[1]=Math.max(y,(y+d)/2)}else{m=d;var x=p+c[1]-c[0];v[0]=Math.min(f,(x+f)/2),v[1]=Math.max(f,(x+f)/2)}var b=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>b[0]&&e<=b[1]||e>=v[0]&&e<=v[1]){o=i[u].index;break}}else{var S=Math.min(d,p),j=Math.max(d,p);if(e>(S+f)/2&&e<=(j+f)/2){o=i[u].index;break}}}else for(var E=0;E<l;E++)if(E===0&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E>0&&E<l-1&&e>(r[E].coordinate+r[E-1].coordinate)/2&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E===l-1&&e>(r[E].coordinate+r[E-1].coordinate)/2){o=r[E].index;break}return o},jI=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?gs(gs({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},eEe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),p=0,m=f.length;p<m;p++){var v=d[f[p]],y=v.items,x=v.cateAxisId,b=y.filter(function(O){return Af(O.type).indexOf("Bar")>=0});if(b&&b.length){var S=b[0].type.defaultProps,j=S!==void 0?gs(gs({},S),b[0].props):b[0].props,E=j.barSize,A=j[x];o[A]||(o[A]=[]);var P=Yn(E)?n:E;o[A].push({item:b[0],stackList:b.slice(1),barSize:Yn(P)?void 0:Jm(P,r,0)})}}return o},tEe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Jm(n,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=i/c,v=o.reduce(function(E,A){return E+A.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&m>0&&(p=!0,m*=.9,v=c*m);var y=(i-v)/2>>0,x={offset:y-u,size:0};d=o.reduce(function(E,A){var P={item:A.item,position:{offset:x.offset+x.size+u,size:p?m:A.barSize}},O=[].concat(Yz(E),[P]);return x=O[O.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(k){O.push({item:k,position:x})}),O},f)}else{var b=Jm(r,i,0,!0);i-2*b-(c-1)*u<=0&&(u=0);var S=(i-2*b-(c-1)*u)/c;S>1&&(S>>=0);var j=l===+l?Math.min(S,l):S;d=o.reduce(function(E,A,P){var O=[].concat(Yz(E),[{item:A.item,position:{offset:b+(S+u)*P+(S-j)/2,size:j}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(k){O.push({item:k,position:O[O.length-1].position})}),O},f)}return d},nEe=function(e,n,r,i){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=vJ({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,p=d.height,m=u.align,v=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&m!=="center"&&Pt(e[m]))return gs(gs({},e),{},Kv({},m,e[m]+(f||0)));if((y==="horizontal"||y==="vertical"&&m==="center")&&v!=="middle"&&Pt(e[v]))return gs(gs({},e),{},Kv({},v,e[v]+(p||0)))}return e},rEe=function(e,n,r){return Yn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},yJ=function(e,n,r,i,s){var o=n.props.children,l=ll(o,dx).filter(function(u){return rEe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=la(d,r);if(Yn(f))return u;var p=Array.isArray(f)?[TE(f),Gh(f)]:[f,f],m=c.reduce(function(v,y){var x=la(d,y,0),b=p[0]-Math.abs(Array.isArray(x)?x[0]:x),S=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(b,v[0]),Math.max(S,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},iEe=function(e,n,r,i,s){var o=n.map(function(l){return yJ(e,l,r,s,i)}).filter(function(l){return!Yn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},xJ=function(e,n,r,i,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&yJ(e,c,u,i)||Pb(e,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},bJ=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},wJ=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},Ef=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&l?.length>=2?pu(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=s?s.indexOf(f):f;return{coordinate:i(p)+u,value:f,offset:u}});return d.filter(function(f){return!ax(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+u,value:f,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,p){return{coordinate:i(f)+u,value:s?s[f]:f,index:p,offset:u}})},w5=new WeakMap,Gw=function(e,n){if(typeof n!="function")return e;w5.has(e)||w5.set(e,new WeakMap);var r=w5.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},sEe=function(e,n,r){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:v0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:FN(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ob(),realScaleType:"point"}:s==="category"?{scale:v0(),realScaleType:"band"}:{scale:FN(),realScaleType:"linear"};if(Zm(i)){var c="scale".concat(gE(i));return{scale:(Dz[c]||Ob)(),realScaleType:Dz[c]?c:"point"}}return tr(i)?{scale:i}:{scale:Ob(),realScaleType:"point"}},Qz=1e-4,aEe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-Qz,o=Math.max(i[0],i[1])+Qz,l=e(n[0]),c=e(n[r-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[r-1]])}},oEe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},lEe=function(e,n){if(!n||n.length!==2||!Pt(n[0])||!Pt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Pt(e[0])||e[0]<r)&&(s[0]=r),(!Pt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},cEe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,l=0;l<n;++l){var c=ax(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=s,e[l][r][1]=s+c,s=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},uEe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<n;++o){var l=ax(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},dEe={sign:cEe,expand:Gbe,none:oy,silhouette:Ybe,wiggle:Xbe,positive:uEe},fEe=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),s=dEe[r],o=Kbe().keys(i).value(function(l,c){return+la(l,c,0)}).order(tM).offset(s);return o(e)},hEe=function(e,n,r,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(f,p){var m,v=(m=p.type)!==null&&m!==void 0&&m.defaultProps?gs(gs({},p.type.defaultProps),p.props):p.props,y=v.stackId,x=v.hide;if(x)return f;var b=v[r],S=f[b]||{hasStack:!1,stackGroups:{}};if(aa(y)){var j=S.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};j.items.push(p),S.hasStack=!0,S.stackGroups[y]=j}else S.stackGroups[Ng("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return gs(gs({},f),{},Kv({},b,S))},c),d={};return Object.keys(u).reduce(function(f,p){var m=u[p];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(y,x){var b=m.stackGroups[x];return gs(gs({},y),{},Kv({},x,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:fEe(e,b.items,s)}))},v)}return gs(gs({},f),{},Kv({},p,m))},d)},pEe=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Eje(u,s,l);return e.domain([TE(d),Gh(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),p=_je(f,s,l);return{niceTicks:p}}return null};function gy(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Yn(i[e.dataKey])){var l=xN(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=la(i,Yn(o)?e.dataKey:o);return Yn(c)?null:e.scale(c)}var Zz=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=la(o,n.dataKey,n.domain[l]);return Yn(c)?null:n.scale(c)-s/2+i},mEe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},gEe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?gs(gs({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(aa(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},vEe=function(e){return e.reduce(function(n,r){return[TE(r.concat([n[0]]).filter(Pt)),Gh(r.concat([n[1]]).filter(Pt))]},[1/0,-1/0])},NJ=function(e,n,r){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,d){var f=vEe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Jz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_M=function(e,n,r){if(tr(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Pt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Jz.test(e[0])){var s=+Jz.exec(e[0])[1];i[0]=n[0]-s}else tr(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Pt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(e9.test(e[1])){var o=+e9.exec(e[1])[1];i[1]=n[1]+o}else tr(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},VN=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=ZD(n,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},t9=function(e,n,r){return!e||!e.length||eg(e,wc(r,"type.defaultProps.domain"))?n:e},SJ=function(e,n){var r=e.type.defaultProps?gs(gs({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return gs(gs({},Jn(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:jI(e),value:la(n,i),type:c,payload:n,chartType:u,hide:d})};function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){yEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yEe(t,e,n){return e=xEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xEe(t){var e=bEe(t,"string");return _0(e)=="symbol"?e:e+""}function bEe(t,e){if(_0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WN=Math.PI/180,wEe=function(e){return e*180/Math.PI},za=function(e,n,r,i){return{x:e+Math.cos(-WN*i)*r,y:n+Math.sin(-WN*i)*r}},NEe=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},SEe=function(e,n){var r=e.x,i=e.y,s=n.cx,o=n.cy,l=NEe({x:r,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:wEe(u),angleInRadian:u}},jEe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:r-o*360}},EEe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},i9=function(e,n){var r=e.x,i=e.y,s=SEe({x:r,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=jEe(n),f=d.startAngle,p=d.endAngle,m=l,v;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;v=m>=p&&m<=f}return v?r9(r9({},n),{},{radius:o,angle:EEe(m,n)}):null};function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}var _Ee=["offset"];function CEe(t){return OEe(t)||TEe(t)||kEe(t)||AEe()}function AEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kEe(t,e){if(t){if(typeof t=="string")return CM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CM(t,e)}}function TEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OEe(t){if(Array.isArray(t))return CM(t)}function CM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PEe(t,e){if(t==null)return{};var n=MEe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function s9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(r){REe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function REe(t,e,n){return e=DEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DEe(t){var e=IEe(t,"string");return C0(e)=="symbol"?e:e+""}function IEe(t,e){if(C0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(C0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}var LEe=function(e){var n=e.value,r=e.formatter,i=Yn(e.children)?n:e.children;return tr(r)?r(i):i},FEe=function(e,n){var r=pu(n-e),i=Math.min(Math.abs(n-e),360);return r*i},BEe=function(e,n,r){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,v=c.endAngle,y=c.clockWise,x=(f+p)/2,b=FEe(m,v),S=b>=0?1:-1,j,E;i==="insideStart"?(j=m+S*o,E=y):i==="insideEnd"?(j=v-S*o,E=!y):i==="end"&&(j=v+S*o,E=y),E=b<=0?E:!E;var A=za(u,d,x,j),P=za(u,d,x,j+(E?1:-1)*359),O="M".concat(A.x,",").concat(A.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(E?0:1,`,
    `).concat(P.x,",").concat(P.y),k=Yn(e.id)?Ng("recharts-radial-line-"):e.id;return ve.createElement("text",A0({},r,{dominantBaseline:"central",className:mr("recharts-radial-bar-label",l)}),ve.createElement("defs",null,ve.createElement("path",{id:k,d:O})),ve.createElement("textPath",{xlinkHref:"#".concat(k)},n))},$Ee=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,p=(d+f)/2;if(i==="outside"){var m=za(o,l,u+r,p),v=m.x,y=m.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,b=za(o,l,x,p),S=b.x,j=b.y;return{x:S,y:j,textAnchor:"middle",verticalAnchor:"middle"}},zEe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,p=f*i,m=f>0?"end":"start",v=f>0?"start":"end",y=u>=0?1:-1,x=y*i,b=y>0?"end":"start",S=y>0?"start":"end";if(s==="top"){var j={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:m};return na(na({},j),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var E={x:l+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return na(na({},E),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var A={x:l-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return na(na({},A),r?{width:Math.max(A.x-r.x,0),height:d}:{})}if(s==="right"){var P={x:l+u+x,y:c+d/2,textAnchor:S,verticalAnchor:"middle"};return na(na({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:d}:{})}var O=r?{width:u,height:d}:{};return s==="insideLeft"?na({x:l+x,y:c+d/2,textAnchor:S,verticalAnchor:"middle"},O):s==="insideRight"?na({x:l+u-x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},O):s==="insideTop"?na({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},O):s==="insideBottom"?na({x:l+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:m},O):s==="insideTopLeft"?na({x:l+x,y:c+p,textAnchor:S,verticalAnchor:v},O):s==="insideTopRight"?na({x:l+u-x,y:c+p,textAnchor:b,verticalAnchor:v},O):s==="insideBottomLeft"?na({x:l+x,y:c+d-p,textAnchor:S,verticalAnchor:m},O):s==="insideBottomRight"?na({x:l+u-x,y:c+d-p,textAnchor:b,verticalAnchor:m},O):sx(s)&&(Pt(s.x)||jm(s.x))&&(Pt(s.y)||jm(s.y))?na({x:l+Jm(s.x,u),y:c+Jm(s.y,d),textAnchor:"end",verticalAnchor:"end"},O):na({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},O)},qEe=function(e){return"cx"in e&&Pt(e.cx)};function uo(t){var e=t.offset,n=e===void 0?5:e,r=PEe(t,_Ee),i=na({offset:n},r),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!s||Yn(l)&&Yn(c)&&!N.isValidElement(u)&&!tr(u))return null;if(N.isValidElement(u))return N.cloneElement(u,i);var m;if(tr(u)){if(m=N.createElement(u,i),N.isValidElement(m))return m}else m=LEe(i);var v=qEe(s),y=Jn(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BEe(i,m,y);var x=v?$Ee(i):zEe(i);return ve.createElement(ON,A0({className:mr("recharts-label",f)},y,x,{breakAll:p}),m)}uo.displayName="Label";var jJ=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,m=e.top,v=e.left,y=e.width,x=e.height,b=e.clockWise,S=e.labelViewBox;if(S)return S;if(Pt(y)&&Pt(x)){if(Pt(f)&&Pt(p))return{x:f,y:p,width:y,height:x};if(Pt(m)&&Pt(v))return{x:m,y:v,width:y,height:x}}return Pt(f)&&Pt(p)?{x:f,y:p,width:0,height:0}:Pt(n)&&Pt(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},UEe=function(e,n){return e?e===!0?ve.createElement(uo,{key:"label-implicit",viewBox:n}):aa(e)?ve.createElement(uo,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===uo?N.cloneElement(e,{key:"label-implicit",viewBox:n}):ve.createElement(uo,{key:"label-implicit",content:e,viewBox:n}):tr(e)?ve.createElement(uo,{key:"label-implicit",content:e,viewBox:n}):sx(e)?ve.createElement(uo,A0({viewBox:n},e,{key:"label-implicit"})):null:null},HEe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=jJ(e),o=ll(i,uo).map(function(c,u){return N.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=UEe(e.label,n||s);return[l].concat(CEe(o))};uo.parseViewBox=jJ;uo.renderCallByParent=HEe;var N5,a9;function VEe(){if(a9)return N5;a9=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return N5=t,N5}var WEe=VEe();const KEe=qr(WEe);function k0(t){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k0(t)}var GEe=["valueAccessor"],YEe=["data","dataKey","clockWise","id","textBreakAll"];function XEe(t){return e_e(t)||JEe(t)||ZEe(t)||QEe()}function QEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZEe(t,e){if(t){if(typeof t=="string")return AM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AM(t,e)}}function JEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e_e(t){if(Array.isArray(t))return AM(t)}function AM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KN(){return KN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KN.apply(this,arguments)}function o9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(n),!0).forEach(function(r){t_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t_e(t,e,n){return e=n_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n_e(t){var e=r_e(t,"string");return k0(e)=="symbol"?e:e+""}function r_e(t,e){if(k0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(k0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c9(t,e){if(t==null)return{};var n=i_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function i_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var s_e=function(e){return Array.isArray(e.value)?KEe(e.value):e.value};function gd(t){var e=t.valueAccessor,n=e===void 0?s_e:e,r=c9(t,GEe),i=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=c9(r,YEe);return!i||!i.length?null:ve.createElement(zr,{className:"recharts-label-list"},i.map(function(d,f){var p=Yn(s)?n(d,f):la(d&&d.payload,s),m=Yn(l)?{}:{id:"".concat(l,"-").concat(f)};return ve.createElement(uo,KN({},Jn(d,!0),u,m,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:uo.parseViewBox(Yn(o)?d:l9(l9({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}gd.displayName="LabelList";function a_e(t,e){return t?t===!0?ve.createElement(gd,{key:"labelList-implicit",data:e}):ve.isValidElement(t)||tr(t)?ve.createElement(gd,{key:"labelList-implicit",data:e,content:t}):sx(t)?ve.createElement(gd,KN({data:e},t,{key:"labelList-implicit"})):null:null}function o_e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=ll(r,gd).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=a_e(t.label,e);return[s].concat(XEe(i))}gd.renderCallByParent=o_e;function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function kM(){return kM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kM.apply(this,arguments)}function u9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(n),!0).forEach(function(r){l_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l_e(t,e,n){return e=c_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c_e(t){var e=u_e(t,"string");return T0(e)=="symbol"?e:e+""}function u_e(t,e){if(T0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(T0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d_e=function(e,n){var r=pu(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Yw=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/WN,p=u?s:s+o*f,m=za(n,r,d,p),v=za(n,r,i,p),y=u?s-o*f:s,x=za(n,r,d*Math.cos(f*WN),y);return{center:m,circleTangency:v,lineTangency:x,theta:f}},EJ=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=d_e(o,l),u=o+c,d=za(n,r,s,o),f=za(n,r,s,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=za(n,r,i,o),v=za(n,r,i,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},f_e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=pu(d-u),p=Yw({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,v=p.lineTangency,y=p.theta,x=Yw({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=x.circleTangency,S=x.lineTangency,j=x.theta,E=c?Math.abs(u-d):Math.abs(u-d)-y-j;if(E<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):EJ({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var P=Yw({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=P.circleTangency,k=P.lineTangency,C=P.theta,I=Yw({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=I.circleTangency,D=I.lineTangency,L=I.theta,z=c?Math.abs(u-d):Math.abs(u-d)-C-L;if(z<0&&o===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},h_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_J=function(e){var n=d9(d9({},h_e),e),r=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,p=n.className;if(o<s||d===f)return null;var m=mr("recharts-sector",p),v=o-s,y=Jm(l,v,0,!0),x;return y>0&&Math.abs(d-f)<360?x=f_e({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=EJ({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),ve.createElement("path",kM({},Jn(n,!0),{className:m,d:x,role:"img"}))};function O0(t){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TM.apply(this,arguments)}function f9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(n),!0).forEach(function(r){p_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p_e(t,e,n){return e=m_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m_e(t){var e=g_e(t,"string");return O0(e)=="symbol"?e:e+""}function g_e(t,e){if(O0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(O0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p9={curveBasisClosed:Ibe,curveBasisOpen:Lbe,curveBasis:Dbe,curveBumpX:wbe,curveBumpY:Nbe,curveLinearClosed:Fbe,curveLinear:yE,curveMonotoneX:Bbe,curveMonotoneY:$be,curveNatural:zbe,curveStep:qbe,curveStepAfter:Hbe,curveStepBefore:Ube},Xw=function(e){return e.x===+e.x&&e.y===+e.y},nb=function(e){return e.x},rb=function(e){return e.y},v_e=function(e,n){if(tr(e))return e;var r="curve".concat(gE(e));return(r==="curveMonotone"||r==="curveBump")&&n?p9["".concat(r).concat(n==="vertical"?"Y":"X")]:p9[r]||yE},y_e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=v_e(r,l),f=u?s.filter(function(y){return Xw(y)}):s,p;if(Array.isArray(o)){var m=u?o.filter(function(y){return Xw(y)}):o,v=f.map(function(y,x){return h9(h9({},y),{},{base:m[x]})});return l==="vertical"?p=zw().y(rb).x1(nb).x0(function(y){return y.base.x}):p=zw().x(nb).y1(rb).y0(function(y){return y.base.y}),p.defined(Xw).curve(d),p(v)}return l==="vertical"&&Pt(o)?p=zw().y(rb).x1(nb).x0(o):Pt(o)?p=zw().x(nb).y1(rb).y0(o):p=OQ().x(nb).y(rb),p.defined(Xw).curve(d),p(f)},Lm=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?y_e(e):i;return N.createElement("path",TM({},Jn(e,!1),bN(e),{className:mr("recharts-curve",n),d:o,ref:s}))},S5={exports:{}},j5,m9;function x_e(){if(m9)return j5;m9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return j5=t,j5}var E5,g9;function b_e(){if(g9)return E5;g9=1;var t=x_e();function e(){}function n(){}return n.resetWarningCache=e,E5=function(){function r(o,l,c,u,d,f){if(f!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},E5}var v9;function w_e(){return v9||(v9=1,S5.exports=b_e()()),S5.exports}var N_e=w_e();const Gr=qr(N_e);var S_e=Object.getOwnPropertyNames,j_e=Object.getOwnPropertySymbols,E_e=Object.prototype.hasOwnProperty;function y9(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Qw(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=t(n,r,i);return s.delete(n),s.delete(r),c}}function __e(t){return t?.[Symbol.toStringTag]}function x9(t){return S_e(t).concat(j_e(t))}var C_e=Object.hasOwn||(function(t,e){return E_e.call(t,e)});function Eg(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var A_e="__v",k_e="__o",T_e="_owner",b9=Object.getOwnPropertyDescriptor,w9=Object.keys;function O_e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function P_e(t,e){return Eg(t.getTime(),e.getTime())}function M_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function R_e(t,e){return t===e}function N9(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var p=o.value,m=l.value;if(n.equals(p[0],m[0],c,f,t,e,n)&&n.equals(p[1],m[1],p[0],m[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var D_e=Eg;function I_e(t,e,n){var r=w9(t),i=r.length;if(w9(e).length!==i)return!1;for(;i-- >0;)if(!CJ(t,e,n,r[i]))return!1;return!0}function ib(t,e,n){var r=x9(t),i=r.length;if(x9(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=r[i],!CJ(t,e,n,s)||(o=b9(t,s),l=b9(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function L_e(t,e){return Eg(t.valueOf(),e.valueOf())}function F_e(t,e){return t.source===e.source&&t.flags===e.flags}function S9(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function B_e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function $_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function CJ(t,e,n,r){return(r===T_e||r===k_e||r===A_e)&&(t.$$typeof||e.$$typeof)?!0:C_e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var z_e="[object Arguments]",q_e="[object Boolean]",U_e="[object Date]",H_e="[object Error]",V_e="[object Map]",W_e="[object Number]",K_e="[object Object]",G_e="[object RegExp]",Y_e="[object Set]",X_e="[object String]",Q_e="[object URL]",Z_e=Array.isArray,j9=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,E9=Object.assign,J_e=Object.prototype.toString.call.bind(Object.prototype.toString);function eCe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,p=t.areUrlsEqual,m=t.unknownTagComparators;return function(y,x,b){if(y===x)return!0;if(y==null||x==null)return!1;var S=typeof y;if(S!==typeof x)return!1;if(S!=="object")return S==="number"?o(y,x,b):S==="function"?i(y,x,b):!1;var j=y.constructor;if(j!==x.constructor)return!1;if(j===Object)return l(y,x,b);if(Z_e(y))return e(y,x,b);if(j9!=null&&j9(y))return f(y,x,b);if(j===Date)return n(y,x,b);if(j===RegExp)return u(y,x,b);if(j===Map)return s(y,x,b);if(j===Set)return d(y,x,b);var E=J_e(y);if(E===U_e)return n(y,x,b);if(E===G_e)return u(y,x,b);if(E===V_e)return s(y,x,b);if(E===Y_e)return d(y,x,b);if(E===K_e)return typeof y.then!="function"&&typeof x.then!="function"&&l(y,x,b);if(E===Q_e)return p(y,x,b);if(E===H_e)return r(y,x,b);if(E===z_e)return l(y,x,b);if(E===q_e||E===W_e||E===X_e)return c(y,x,b);if(m){var A=m[E];if(!A){var P=__e(y);P&&(A=m[P])}if(A)return A(y,x,b)}return!1}}function tCe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?ib:O_e,areDatesEqual:P_e,areErrorsEqual:M_e,areFunctionsEqual:R_e,areMapsEqual:r?y9(N9,ib):N9,areNumbersEqual:D_e,areObjectsEqual:r?ib:I_e,arePrimitiveWrappersEqual:L_e,areRegExpsEqual:F_e,areSetsEqual:r?y9(S9,ib):S9,areTypedArraysEqual:r?ib:B_e,areUrlsEqual:$_e,unknownTagComparators:void 0};if(n&&(i=E9({},i,n(i))),e){var s=Qw(i.areArraysEqual),o=Qw(i.areMapsEqual),l=Qw(i.areObjectsEqual),c=Qw(i.areSetsEqual);i=E9({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function nCe(t){return function(e,n,r,i,s,o,l){return t(e,n,l)}}function rCe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(c,u){var d=r(),f=d.cache,p=f===void 0?e?new WeakMap:void 0:f,m=d.meta;return n(c,u,{cache:p,equals:i,meta:m,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var iCe=Op();Op({strict:!0});Op({circular:!0});Op({circular:!0,strict:!0});Op({createInternalComparator:function(){return Eg}});Op({strict:!0,createInternalComparator:function(){return Eg}});Op({circular:!0,createInternalComparator:function(){return Eg}});Op({circular:!0,createInternalComparator:function(){return Eg},strict:!0});function Op(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=tCe(t),c=eCe(l),u=r?r(c):nCe(c);return rCe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function sCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function _9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):sCe(i)};requestAnimationFrame(r)}function OM(t){"@babel/helpers - typeof";return OM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OM(t)}function aCe(t){return uCe(t)||cCe(t)||lCe(t)||oCe()}function oCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lCe(t,e){if(t){if(typeof t=="string")return C9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C9(t,e)}}function C9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uCe(t){if(Array.isArray(t))return t}function dCe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=aCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){_9(i.bind(null,u),c);return}i(c),_9(i.bind(null,u));return}OM(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function P0(t){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(t)}function A9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(n),!0).forEach(function(r){AJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AJ(t,e,n){return e=fCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fCe(t){var e=hCe(t,"string");return P0(e)==="symbol"?e:String(e)}function hCe(t,e){if(P0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(P0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},mCe=function(e){return e},gCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Mb=function(e,n){return Object.keys(n).reduce(function(r,i){return k9(k9({},r),{},AJ({},i,e(i,n[i])))},{})},T9=function(e,n,r){return e.map(function(i){return"".concat(gCe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function vCe(t,e){return bCe(t)||xCe(t,e)||kJ(t,e)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function bCe(t){if(Array.isArray(t))return t}function wCe(t){return jCe(t)||SCe(t)||kJ(t)||NCe()}function NCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kJ(t,e){if(t){if(typeof t=="string")return PM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PM(t,e)}}function SCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jCe(t){if(Array.isArray(t))return PM(t)}function PM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var GN=1e-4,TJ=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},OJ=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},O9=function(e,n){return function(r){var i=TJ(e,n);return OJ(i,r)}},ECe=function(e,n){return function(r){var i=TJ(e,n),s=[].concat(wCe(i.map(function(o,l){return o*l}).slice(1)),[0]);return OJ(s,r)}},P9=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=vCe(u,4);i=d[0],s=d[1],o=d[2],l=d[3]}}}var f=O9(i,o),p=O9(s,l),m=ECe(i,o),v=function(b){return b>1?1:b<0?0:b},y=function(b){for(var S=b>1?1:b,j=S,E=0;E<8;++E){var A=f(j)-S,P=m(j);if(Math.abs(A-S)<GN||P<GN)return p(j);j=v(j-A/P)}return p(j)};return y.isStepper=!1,y},_Ce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(d,f,p){var m=-(d-f)*r,v=p*s,y=p+(m-v)*l/1e3,x=p*l/1e3+d;return Math.abs(x-f)<GN&&Math.abs(y)<GN?[f,0]:[x,y]};return c.isStepper=!0,c.dt=l,c},CCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return P9(i);case"spring":return _Ce();default:if(i.split("(")[0]==="cubic-bezier")return P9(i)}return typeof i=="function"?i:null};function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function M9(t){return TCe(t)||kCe(t)||PJ(t)||ACe()}function ACe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TCe(t){if(Array.isArray(t))return RM(t)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){MM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MM(t,e,n){return e=OCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OCe(t){var e=PCe(t,"string");return M0(e)==="symbol"?e:String(e)}function PCe(t,e){if(M0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(M0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MCe(t,e){return ICe(t)||DCe(t,e)||PJ(t,e)||RCe()}function RCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PJ(t,e){if(t){if(typeof t=="string")return RM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RM(t,e)}}function RM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ICe(t){if(Array.isArray(t))return t}var YN=function(e,n,r){return e+(n-e)*r},DM=function(e){var n=e.from,r=e.to;return n!==r},LCe=function t(e,n,r){var i=Mb(function(s,o){if(DM(o)){var l=e(o.from,o.to,o.velocity),c=MCe(l,2),u=c[0],d=c[1];return La(La({},o),{},{from:u,velocity:d})}return o},n);return r<1?Mb(function(s,o){return DM(o)?La(La({},o),{},{velocity:YN(o.velocity,i[s].velocity,r),from:YN(o.from,i[s].from,r)}):o},n):t(e,i,r-1)};const FCe=(function(t,e,n,r,i){var s=pCe(t,e),o=s.reduce(function(x,b){return La(La({},x),{},MM({},b,[t[b],e[b]]))},{}),l=s.reduce(function(x,b){return La(La({},x),{},MM({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return Mb(function(b,S){return S.from},l)},m=function(){return!Object.values(l).filter(DM).length},v=function(b){u||(u=b);var S=b-u,j=S/n.dt;l=LCe(n,l,j),i(La(La(La({},t),e),p())),u=b,m()||(c=requestAnimationFrame(f))},y=function(b){d||(d=b);var S=(b-d)/r,j=Mb(function(A,P){return YN.apply(void 0,M9(P).concat([n(S)]))},o);if(i(La(La(La({},t),e),j)),S<1)c=requestAnimationFrame(f);else{var E=Mb(function(A,P){return YN.apply(void 0,M9(P).concat([n(1)]))},o);i(La(La(La({},t),e),E))}};return f=n.isStepper?v:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}var BCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $Ce(t,e){if(t==null)return{};var n=zCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zCe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _5(t){return VCe(t)||HCe(t)||UCe(t)||qCe()}function qCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UCe(t,e){if(t){if(typeof t=="string")return IM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IM(t,e)}}function HCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VCe(t){if(Array.isArray(t))return IM(t)}function IM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){vb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vb(t,e,n){return e=MJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MJ(r.key),r)}}function GCe(t,e,n){return e&&KCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MJ(t){var e=YCe(t,"string");return vy(e)==="symbol"?e:String(e)}function YCe(t,e){if(vy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LM(t,e)}function LM(t,e){return LM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LM(t,e)}function QCe(t){var e=ZCe();return function(){var r=XN(t),i;if(e){var s=XN(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return FM(this,i)}}function FM(t,e){if(e&&(vy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BM(t)}function BM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function XN(t){return XN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XN(t)}var bu=(function(t){XCe(n,t);var e=QCe(n);function n(r,i){var s;WCe(this,n),s=e.call(this,r,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,p=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(BM(s)),s.changeStyle=s.changeStyle.bind(BM(s)),!l||m<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:d}),FM(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof p=="function")return s.state={style:u},FM(s);s.state={style:c?vb({},c,u):u}}else s.state={style:{}};return s}return GCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,p=this.state.style;if(l){if(!o){var m={style:c?vb({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(m);return}if(!(iCe(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||u?f:i.to;if(this.state&&p){var x={style:c?vb({},c,y):y};(c&&p[c]!==y||!c&&p!==y)&&this.setState(x)}this.runAnimation(ru(ru({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,m=FCe(o,l,CCe(u),c,this.changeStyle),v=function(){s.stopJSAnimation=m()};this.manager.start([p,d,v,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,p=f===void 0?0:f,m=function(y,x,b){if(b===0)return y;var S=x.duration,j=x.easing,E=j===void 0?"ease":j,A=x.style,P=x.properties,O=x.onAnimationEnd,k=b>0?o[b-1]:x,C=P||Object.keys(A);if(typeof E=="function"||E==="spring")return[].concat(_5(y),[s.runJSAnimation.bind(s,{from:k.style,to:A,duration:S,easing:E}),S]);var I=T9(C,S,E),R=ru(ru(ru({},k.style),A),{},{transition:I});return[].concat(_5(y),[R,S,O]).filter(mCe)};return this.manager.start([c].concat(_5(o.reduce(m,[d,Math.max(p,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=dCe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,m=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var y=l?vb({},l,c):c,x=T9(Object.keys(y),o,u);v.start([d,s,ru(ru({},y),{},{transition:x}),o,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=$Ce(i,BCe),u=N.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(m){var v=m.props,y=v.style,x=y===void 0?{}:y,b=v.className,S=N.cloneElement(m,ru(ru({},c),{},{style:ru(ru({},x),d),className:b}));return S};return u===1?f(N.Children.only(s)):ve.createElement("div",null,N.Children.map(s,function(p){return f(p)}))}}]),n})(N.PureComponent);bu.displayName="Animate";bu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};bu.propTypes={from:Gr.oneOfType([Gr.object,Gr.string]),to:Gr.oneOfType([Gr.object,Gr.string]),attributeName:Gr.string,duration:Gr.number,begin:Gr.number,easing:Gr.oneOfType([Gr.string,Gr.func]),steps:Gr.arrayOf(Gr.shape({duration:Gr.number.isRequired,style:Gr.object.isRequired,easing:Gr.oneOfType([Gr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Gr.func]),properties:Gr.arrayOf("string"),onAnimationEnd:Gr.func})),children:Gr.oneOfType([Gr.node,Gr.func]),isActive:Gr.bool,canBegin:Gr.bool,onAnimationEnd:Gr.func,shouldReAnimate:Gr.bool,onAnimationStart:Gr.func,onAnimationReStart:Gr.func};function R0(t){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R0(t)}function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QN.apply(this,arguments)}function JCe(t,e){return rAe(t)||nAe(t,e)||tAe(t,e)||eAe()}function eAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tAe(t,e){if(t){if(typeof t=="string")return I9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I9(t,e)}}function I9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function rAe(t){if(Array.isArray(t))return t}function L9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(n),!0).forEach(function(r){iAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iAe(t,e,n){return e=sAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sAe(t){var e=aAe(t,"string");return R0(e)=="symbol"?e:e+""}function aAe(t,e){if(R0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(R0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B9=function(e,n,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=s[p]>o?o:s[p];d="M".concat(e,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*f[1])),d+="L ".concat(e+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);d="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*v,`
            L `).concat(e+r,",").concat(n+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+i,`
            L `).concat(e+c*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},oAe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return r>=u&&r<=d&&i>=f&&i<=p}return!1},lAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EI=function(e){var n=F9(F9({},lAe),e),r=N.useRef(),i=N.useState(-1),s=JCe(i,2),o=s[0],l=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&l(E)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,p=n.radius,m=n.className,v=n.animationEasing,y=n.animationDuration,x=n.animationBegin,b=n.isAnimationActive,S=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var j=mr("recharts-rectangle",m);return S?ve.createElement(bu,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:y,animationEasing:v,isActive:S},function(E){var A=E.width,P=E.height,O=E.x,k=E.y;return ve.createElement(bu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:y,isActive:b,easing:v},ve.createElement("path",QN({},Jn(n,!0),{className:j,d:B9(O,k,A,P,p),ref:r})))}):ve.createElement("path",QN({},Jn(n,!0),{className:j,d:B9(c,u,d,f,p)}))};function $M(){return $M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$M.apply(this,arguments)}var ME=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,o=mr("recharts-dot",s);return n===+n&&r===+r&&i===+i?N.createElement("circle",$M({},Jn(e,!1),bN(e),{className:o,cx:n,cy:r,r:i})):null};function D0(t){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}var cAe=["x","y","top","left","width","height","className"];function zM(){return zM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zM.apply(this,arguments)}function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(r){dAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dAe(t,e,n){return e=fAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fAe(t){var e=hAe(t,"string");return D0(e)=="symbol"?e:e+""}function hAe(t,e){if(D0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(D0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pAe(t,e){if(t==null)return{};var n=mAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gAe=function(e,n,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},vAe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,p=e.height,m=p===void 0?0:p,v=e.className,y=pAe(e,cAe),x=uAe({x:r,y:s,top:l,left:u,width:f,height:m},y);return!Pt(r)||!Pt(s)||!Pt(f)||!Pt(m)||!Pt(l)||!Pt(u)?null:ve.createElement("path",zM({},Jn(x,!0),{className:mr("recharts-cross",v),d:gAe(r,s,f,m,l,u)}))},C5,z9;function yAe(){if(z9)return C5;z9=1;var t=eZ(),e=t(Object.getPrototypeOf,Object);return C5=e,C5}var A5,q9;function xAe(){if(q9)return A5;q9=1;var t=Vf(),e=yAe(),n=Wf(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var f=e(d);if(f===null)return!0;var p=l.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return A5=u,A5}var bAe=xAe();const wAe=qr(bAe);var k5,U9;function NAe(){if(U9)return k5;U9=1;var t=Vf(),e=Wf(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return k5=r,k5}var SAe=NAe();const jAe=qr(SAe);function I0(t){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I0(t)}function ZN(){return ZN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZN.apply(this,arguments)}function EAe(t,e){return kAe(t)||AAe(t,e)||CAe(t,e)||_Ae()}function _Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CAe(t,e){if(t){if(typeof t=="string")return H9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H9(t,e)}}function H9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function kAe(t){if(Array.isArray(t))return t}function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(r){TAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TAe(t,e,n){return e=OAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OAe(t){var e=PAe(t,"string");return I0(e)=="symbol"?e:e+""}function PAe(t,e){if(I0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(I0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K9=function(e,n,r,i,s){var o=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+s),l+="L ".concat(e+r-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},MAe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RAe=function(e){var n=W9(W9({},MAe),e),r=N.useRef(),i=N.useState(-1),s=EAe(i,2),o=s[0],l=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,p=n.height,m=n.className,v=n.animationEasing,y=n.animationDuration,x=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var S=mr("recharts-trapezoid",m);return b?ve.createElement(bu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:y,animationEasing:v,isActive:b},function(j){var E=j.upperWidth,A=j.lowerWidth,P=j.height,O=j.x,k=j.y;return ve.createElement(bu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:y,easing:v},ve.createElement("path",ZN({},Jn(n,!0),{className:S,d:K9(O,k,E,A,P),ref:r})))}):ve.createElement("g",null,ve.createElement("path",ZN({},Jn(n,!0),{className:S,d:K9(c,u,d,f,p)})))},DAe=["option","shapeType","propTransformer","activeClassName","isActive"];function L0(t){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}function IAe(t,e){if(t==null)return{};var n=LAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(n),!0).forEach(function(r){FAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FAe(t,e,n){return e=BAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BAe(t){var e=$Ae(t,"string");return L0(e)=="symbol"?e:e+""}function $Ae(t,e){if(L0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(L0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zAe(t,e){return JN(JN({},e),t)}function qAe(t,e){return t==="symbols"}function Y9(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ve.createElement(EI,n);case"trapezoid":return ve.createElement(RAe,n);case"sector":return ve.createElement(_J,n);case"symbols":if(qAe(e))return ve.createElement(bE,n);break;default:return null}}function UAe(t){return N.isValidElement(t)?t.props:t}function qM(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?zAe:r,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=IAe(t,DAe),u;if(N.isValidElement(e))u=N.cloneElement(e,JN(JN({},c),UAe(e)));else if(tr(e))u=e(c);else if(wAe(e)&&!jAe(e)){var d=i(e,c);u=ve.createElement(Y9,{shapeType:n,elementProps:d})}else{var f=c;u=ve.createElement(Y9,{shapeType:n,elementProps:f})}return l?ve.createElement(zr,{className:o},u):u}function RE(t,e){return e!=null&&"trapezoids"in t.props}function DE(t,e){return e!=null&&"sectors"in t.props}function F0(t,e){return e!=null&&"points"in t.props}function HAe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function VAe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function WAe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function KAe(t,e){var n;return RE(t,e)?n=HAe:DE(t,e)?n=VAe:F0(t,e)&&(n=WAe),n}function GAe(t,e){var n;return RE(t,e)?n="trapezoids":DE(t,e)?n="sectors":F0(t,e)&&(n="points"),n}function YAe(t,e){if(RE(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(DE(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return F0(t,e)?e.payload:{}}function XAe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=GAe(n,e),s=YAe(n,e),o=r.filter(function(c,u){var d=eg(s,c),f=n.props[i].filter(function(v){var y=KAe(n,e);return y(v,e)}),p=n.props[i].indexOf(f[f.length-1]),m=u===p;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var T5,X9;function QAe(){if(X9)return T5;X9=1;var t=Math.ceil,e=Math.max;function n(r,i,s,o){for(var l=-1,c=e(t((i-r)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=r,r+=s;return u}return T5=n,T5}var O5,Q9;function RJ(){if(Q9)return O5;Q9=1;var t=gZ(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return O5=r,O5}var P5,Z9;function ZAe(){if(Z9)return P5;Z9=1;var t=QAe(),e=SE(),n=RJ();function r(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return P5=r,P5}var M5,J9;function JAe(){if(J9)return M5;J9=1;var t=ZAe(),e=t();return M5=e,M5}var eke=JAe();const eS=qr(eke);function B0(t){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function eq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eq(Object(n),!0).forEach(function(r){DJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DJ(t,e,n){return e=tke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tke(t){var e=nke(t,"string");return B0(e)=="symbol"?e:e+""}function nke(t,e){if(B0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(B0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rke=["Webkit","Moz","O","ms"],ike=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=rke.reduce(function(s,o){return tq(tq({},s),{},DJ({},o+r,n))},{});return i[e]=n,i};function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tS.apply(this,arguments)}function nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(n),!0).forEach(function(r){Al(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ske(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LJ(r.key),r)}}function ake(t,e,n){return e&&rq(t.prototype,e),n&&rq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oke(t,e,n){return e=nS(e),lke(t,IJ()?Reflect.construct(e,n||[],nS(t).constructor):e.apply(t,n))}function lke(t,e){if(e&&(yy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cke(t)}function cke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IJ=function(){return!!t})()}function nS(t){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nS(t)}function uke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UM(t,e)}function UM(t,e){return UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UM(t,e)}function Al(t,e,n){return e=LJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LJ(t){var e=dke(t,"string");return yy(e)=="symbol"?e:e+""}function dke(t,e){if(yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fke=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ob().domain(eS(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},iq=function(e){return e.changedTouches&&!!e.changedTouches.length},xy=(function(t){function e(n){var r;return ske(this,e),r=oke(this,e,[n]),Al(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Al(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Al(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o?.({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Al(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Al(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Al(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Al(r,"handleSlideDragStart",function(i){var s=iq(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return uke(e,t),ake(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),p=Math.max(i,s),m=e.getIndexInRange(o,f),v=e.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=la(s[r],l,r);return tr(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,m=c.endIndex,v=c.onChange,y=r.pageX-s;y>0?y=Math.min(y,u+d-f-l,u+d-f-o):y<0&&(y=Math.max(y,u-o,u-l));var x=this.getIndex({startX:o+y,endX:l+y});(x.startIndex!==p||x.endIndex!==m)&&v&&v(x),this.setState({startX:o+y,endX:l+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=iq(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,f=d.x,p=d.width,m=d.travellerWidth,v=d.onChange,y=d.gap,x=d.data,b={startX:this.state.startX,endX:this.state.endX},S=r.pageX-s;S>0?S=Math.min(S,f+p-m-u):S<0&&(S=Math.max(S,f-u)),b[o]=u+S;var j=this.getIndex(b),E=j.startIndex,A=j.endIndex,P=function(){var k=x.length-1;return o==="startX"&&(l>c?E%y===0:A%y===0)||l<c&&A===k||o==="endX"&&(l>c?A%y===0:E%y===0)||l>c&&A===k};this.setState(Al(Al({},o,u+S),"brushMoveStartX",r.pageX),function(){v&&P()&&v(j)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var p=f+r;if(!(p===-1||p>=l.length)){var m=l[p];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(Al({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return ve.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=N.Children.only(u);return f?ve.cloneElement(f,{x:i,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,m=c.ariaLabel,v=c.data,y=c.startIndex,x=c.endIndex,b=Math.max(r,this.props.x),S=R5(R5({},Jn(this.props,!1)),{},{x:b,y:u,width:d,height:f}),j=m||"Min value: ".concat((s=v[y])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[x])===null||o===void 0?void 0:o.name);return ve.createElement(zr,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,S))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return ve.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,p=d.endX,m=5,v={pointerEvents:"none",fill:u};return ve.createElement(zr,{className:"recharts-brush-texts"},ve.createElement(ON,tS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+l/2},v),this.getTextOfTick(i)),ve.createElement(ON,tS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+m,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,p=this.state,m=p.startX,v=p.endX,y=p.isTextActive,x=p.isSlideMoving,b=p.isTravellerMoving,S=p.isTravellerFocused;if(!i||!i.length||!Pt(l)||!Pt(c)||!Pt(u)||!Pt(d)||u<=0||d<=0)return null;var j=mr("recharts-brush",s),E=ve.Children.count(o)===1,A=ike("userSelect","none");return ve.createElement(zr,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(y||x||b||S||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return ve.createElement(ve.Fragment,null,ve.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),ve.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),ve.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return ve.isValidElement(r)?s=ve.cloneElement(r,i):tr(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return R5({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?fke({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var p=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>i?l=c:o=c}return i>=r[l]?l:o}}])})(N.PureComponent);Al(xy,"displayName","Brush");Al(xy,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var D5,sq;function hke(){if(sq)return D5;sq=1;var t=QD();function e(n,r){var i;return t(n,function(s,o,l){return i=r(s,o,l),!i}),!!i}return D5=e,D5}var I5,aq;function pke(){if(aq)return I5;aq=1;var t=KQ(),e=Cp(),n=hke(),r=fl(),i=SE();function s(o,l,c){var u=r(o)?t:n;return c&&i(o,l,c)&&(l=void 0),u(o,e(l,3))}return I5=s,I5}var mke=pke();const gke=qr(mke);var vd=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},L5,oq;function vke(){if(oq)return L5;oq=1;var t=dZ();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return L5=e,L5}var F5,lq;function yke(){if(lq)return F5;lq=1;var t=vke(),e=cZ(),n=Cp();function r(i,s){var o={};return s=n(s,3),e(i,function(l,c,u){t(o,c,s(l,c,u))}),o}return F5=r,F5}var xke=yke();const bke=qr(xke);var B5,cq;function wke(){if(cq)return B5;cq=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return B5=t,B5}var $5,uq;function Nke(){if(uq)return $5;uq=1;var t=QD();function e(n,r){var i=!0;return t(n,function(s,o,l){return i=!!r(s,o,l),i}),i}return $5=e,$5}var z5,dq;function Ske(){if(dq)return z5;dq=1;var t=wke(),e=Nke(),n=Cp(),r=fl(),i=SE();function s(o,l,c){var u=r(o)?t:e;return c&&i(o,l,c)&&(l=void 0),u(o,n(l,3))}return z5=s,z5}var jke=Ske();const FJ=qr(jke);var Eke=["x","y"];function $0(t){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(t)}function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HM.apply(this,arguments)}function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(n),!0).forEach(function(r){_ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ke(t,e,n){return e=Cke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cke(t){var e=Ake(t,"string");return $0(e)=="symbol"?e:e+""}function Ake(t,e){if($0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kke(t,e){if(t==null)return{};var n=Tke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oke(t,e){var n=t.x,r=t.y,i=kke(t,Eke),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),p=parseInt(f,10);return sb(sb(sb(sb(sb({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function hq(t){return ve.createElement(qM,HM({shapeType:"rectangle",propTransformer:Oke,activeClassName:"recharts-active-bar"},t))}var Pke=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=Pt(r)||qxe(r);return s?e(r,i):(s||ng(),n)}},Mke=["value","background"],BJ;function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function Rke(t,e){if(t==null)return{};var n=Dke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(this,arguments)}function pq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(n),!0).forEach(function(r){Yh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ike(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zJ(r.key),r)}}function Lke(t,e,n){return e&&mq(t.prototype,e),n&&mq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fke(t,e,n){return e=iS(e),Bke(t,$J()?Reflect.construct(e,n||[],iS(t).constructor):e.apply(t,n))}function Bke(t,e){if(e&&(by(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ke(t)}function $ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $J(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($J=function(){return!!t})()}function iS(t){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iS(t)}function zke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VM(t,e)}function VM(t,e){return VM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VM(t,e)}function Yh(t,e,n){return e=zJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zJ(t){var e=qke(t,"string");return by(e)=="symbol"?e:e+""}function qke(t,e){if(by(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(by(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mo=(function(t){function e(){var n;Ike(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Fke(this,e,[].concat(i)),Yh(n,"state",{isAnimationFinished:!1}),Yh(n,"id",Ng("recharts-bar-")),Yh(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Yh(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return zke(e,t),Lke(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Jn(this.props,!1);return r&&r.map(function(f,p){var m=p===c,v=m?u:o,y=$s($s($s({},d),f),{},{isActive:m,option:v,index:p,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ve.createElement(zr,rS({className:"recharts-bar-rectangle"},c0(i.props,f,p),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),ve.createElement(hq,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return ve.createElement(bu,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,y=s.map(function(x,b){var S=p&&p[b];if(S){var j=As(S.x,x.x),E=As(S.y,x.y),A=As(S.width,x.width),P=As(S.height,x.height);return $s($s({},x),{},{x:j(v),y:E(v),width:A(v),height:P(v)})}if(o==="horizontal"){var O=As(0,x.height),k=O(v);return $s($s({},x),{},{y:x.y+x.height-k,height:k})}var C=As(0,x.width),I=C(v);return $s($s({},x),{},{width:I})});return ve.createElement(zr,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!eg(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=Jn(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,p=Rke(u,Mke);if(!f)return null;var m=$s($s($s($s($s({},p),{},{fill:"#eee"},f),c),c0(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return ve.createElement(hq,rS({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ll(d,dx);if(!f)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,b){var S=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:S,errorVal:la(x,b)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ve.createElement(zr,v,f.map(function(y){return ve.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,p=r.height,m=r.isAnimationActive,v=r.background,y=r.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,b=mr("recharts-bar",o),S=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,E=S||j,A=Yn(y)?this.id:y;return ve.createElement(zr,{className:b},S||j?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(A)},ve.createElement("rect",{x:S?u:u-f/2,y:j?d:d-p/2,width:S?f:f*2,height:j?p:p*2}))):null,ve.createElement(zr,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(A,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,A),(!m||x)&&gd.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(N.PureComponent);BJ=Mo;Yh(Mo,"displayName","Bar");Yh(Mo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ap.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yh(Mo,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,m=oEe(r,n);if(!m)return null;var v=e.layout,y=n.type.defaultProps,x=y!==void 0?$s($s({},y),n.props):n.props,b=x.dataKey,S=x.children,j=x.minPointSize,E=v==="horizontal"?o:s,A=u?E.scale.domain():null,P=mEe({numericAxis:E}),O=ll(S,Kh),k=f.map(function(C,I){var R,D,L,z,W,X;u?R=lEe(u[d+I],A):(R=la(C,b),Array.isArray(R)||(R=[P,R]));var q=Pke(j,BJ.defaultProps.minPointSize)(R[1],I);if(v==="horizontal"){var V,Y=[o.scale(R[0]),o.scale(R[1])],re=Y[0],Q=Y[1];D=Zz({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:C,index:I}),L=(V=Q??re)!==null&&V!==void 0?V:void 0,z=m.size;var F=re-Q;if(W=Number.isNaN(F)?0:F,X={x:D,y:o.y,width:z,height:o.height},Math.abs(q)>0&&Math.abs(W)<Math.abs(q)){var G=pu(W||q)*(Math.abs(q)-Math.abs(W));L-=G,W+=G}}else{var te=[s.scale(R[0]),s.scale(R[1])],le=te[0],he=te[1];if(D=le,L=Zz({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:C,index:I}),z=he-le,W=m.size,X={x:s.x,y:L,width:s.width,height:W},Math.abs(q)>0&&Math.abs(z)<Math.abs(q)){var me=pu(z||q)*(Math.abs(q)-Math.abs(z));z+=me}}return $s($s($s({},C),{},{x:D,y:L,width:z,height:W,value:u?R:R[1],payload:C,background:X},O&&O[I]&&O[I].props),{},{tooltipPayload:[SJ(n,C)],tooltipPosition:{x:D+z/2,y:L+W/2}})});return $s({data:k,layout:v},p)});function z0(t){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z0(t)}function Uke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qJ(r.key),r)}}function Hke(t,e,n){return e&&gq(t.prototype,e),n&&gq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ou(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(n),!0).forEach(function(r){IE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IE(t,e,n){return e=qJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qJ(t){var e=Vke(t,"string");return z0(e)=="symbol"?e:e+""}function Vke(t,e){if(z0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(z0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _I=function(e,n,r,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},p=!!kl(u,Mo);return d.reduce(function(m,v){var y=n[v],x=y.orientation,b=y.domain,S=y.padding,j=S===void 0?{}:S,E=y.mirror,A=y.reversed,P="".concat(x).concat(E?"Mirror":""),O,k,C,I,R;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var D=b[1]-b[0],L=1/0,z=y.categoricalDomain.sort(Wxe);if(z.forEach(function(te,le){le>0&&(L=Math.min((te||0)-(z[le-1]||0),L))}),Number.isFinite(L)){var W=L/D,X=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(O=W*X/2),y.padding==="no-gap"){var q=Jm(e.barCategoryGap,W*X),V=W*X/2;O=V-q-(V-q)/X*q}}}i==="xAxis"?k=[r.left+(j.left||0)+(O||0),r.left+r.width-(j.right||0)-(O||0)]:i==="yAxis"?k=c==="horizontal"?[r.top+r.height-(j.bottom||0),r.top+(j.top||0)]:[r.top+(j.top||0)+(O||0),r.top+r.height-(j.bottom||0)-(O||0)]:k=y.range,A&&(k=[k[1],k[0]]);var Y=sEe(y,s,p),re=Y.scale,Q=Y.realScaleType;re.domain(b).range(k),aEe(re);var F=pEe(re,ou(ou({},y),{},{realScaleType:Q}));i==="xAxis"?(R=x==="top"&&!E||x==="bottom"&&E,C=r.left,I=f[P]-R*y.height):i==="yAxis"&&(R=x==="left"&&!E||x==="right"&&E,C=f[P]-R*y.width,I=r.top);var G=ou(ou(ou({},y),F),{},{realScaleType:Q,x:C,y:I,scale:re,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return G.bandSize=VN(G,F),!y.hide&&i==="xAxis"?f[P]+=(R?-1:1)*G.height:y.hide||(f[P]+=(R?-1:1)*G.width),ou(ou({},m),{},IE({},v,G))},{})},UJ=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},Wke=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return UJ({x:n,y:r},{x:i,y:s})},HJ=(function(){function t(e){Uke(this,t),this.scale=e}return Hke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();IE(HJ,"EPS",1e-4);var CI=function(e){var n=Object.keys(e).reduce(function(r,i){return ou(ou({},r),{},IE({},i,HJ.create(e[i])))},{});return ou(ou({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return bke(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return FJ(i,function(s,o){return n[o].isInRange(s)})}})};function Kke(t){return(t%180+180)%180}var Gke=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Kke(i),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},q5,yq;function Yke(){if(yq)return q5;yq=1;var t=Cp(),e=A1(),n=wE();function r(i){return function(s,o,l){var c=Object(s);if(!e(s)){var u=t(o,3);s=n(s),o=function(f){return u(c[f],f,c)}}var d=i(s,o,l);return d>-1?c[u?s[d]:d]:void 0}}return q5=r,q5}var U5,xq;function Xke(){if(xq)return U5;xq=1;var t=RJ();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return U5=e,U5}var H5,bq;function Qke(){if(bq)return H5;bq=1;var t=iZ(),e=Cp(),n=Xke(),r=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=r(c+u,0)),t(s,e(o,3),u)}return H5=i,H5}var V5,wq;function Zke(){if(wq)return V5;wq=1;var t=Yke(),e=Qke(),n=t(e);return V5=n,V5}var Jke=Zke();const eTe=qr(Jke);var tTe=xQ();const nTe=qr(tTe);var rTe=nTe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),AI=N.createContext(void 0),kI=N.createContext(void 0),VJ=N.createContext(void 0),WJ=N.createContext({}),KJ=N.createContext(void 0),GJ=N.createContext(0),YJ=N.createContext(0),Nq=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=rTe(s);return ve.createElement(AI.Provider,{value:r},ve.createElement(kI.Provider,{value:i},ve.createElement(WJ.Provider,{value:s},ve.createElement(VJ.Provider,{value:d},ve.createElement(KJ.Provider,{value:o},ve.createElement(GJ.Provider,{value:u},ve.createElement(YJ.Provider,{value:c},l)))))))},iTe=function(){return N.useContext(KJ)},XJ=function(e){var n=N.useContext(AI);n==null&&ng();var r=n[e];return r==null&&ng(),r},sTe=function(){var e=N.useContext(AI);return Uh(e)},aTe=function(){var e=N.useContext(kI),n=eTe(e,function(r){return FJ(r.domain,Number.isFinite)});return n||Uh(e)},QJ=function(e){var n=N.useContext(kI);n==null&&ng();var r=n[e];return r==null&&ng(),r},oTe=function(){var e=N.useContext(VJ);return e},lTe=function(){return N.useContext(WJ)},TI=function(){return N.useContext(YJ)},OI=function(){return N.useContext(GJ)};function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function cTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JJ(r.key),r)}}function dTe(t,e,n){return e&&uTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fTe(t,e,n){return e=sS(e),hTe(t,ZJ()?Reflect.construct(e,n||[],sS(t).constructor):e.apply(t,n))}function hTe(t,e){if(e&&(wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pTe(t)}function pTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZJ=function(){return!!t})()}function sS(t){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sS(t)}function mTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WM(t,e)}function WM(t,e){return WM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WM(t,e)}function Sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(n),!0).forEach(function(r){PI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PI(t,e,n){return e=JJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JJ(t){var e=gTe(t,"string");return wy(e)=="symbol"?e:e+""}function gTe(t,e){if(wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vTe(t,e){return wTe(t)||bTe(t,e)||xTe(t,e)||yTe()}function yTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xTe(t,e){if(t){if(typeof t=="string")return Eq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eq(t,e)}}function Eq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function wTe(t){if(Array.isArray(t))return t}function KM(){return KM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KM.apply(this,arguments)}var NTe=function(e,n){var r;return ve.isValidElement(e)?r=ve.cloneElement(e,n):tr(e)?r=e(n):r=ve.createElement("line",KM({},n,{className:"recharts-reference-line-line"})),r},STe=function(e,n,r,i,s,o,l,c,u){var d=s.x,f=s.y,p=s.width,m=s.height;if(r){var v=u.y,y=e.y.apply(v,{position:o});if(vd(u,"discard")&&!e.y.isInRange(y))return null;var x=[{x:d+p,y},{x:d,y}];return c==="left"?x.reverse():x}if(n){var b=u.x,S=e.x.apply(b,{position:o});if(vd(u,"discard")&&!e.x.isInRange(S))return null;var j=[{x:S,y:f+m},{x:S,y:f}];return l==="top"?j.reverse():j}if(i){var E=u.segment,A=E.map(function(P){return e.apply(P,{position:o})});return vd(u,"discard")&&gke(A,function(P){return!e.isInRange(P)})?null:A}return null};function jTe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=iTe(),d=XJ(i),f=QJ(s),p=oTe();if(!u||!p)return null;kf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=CI({x:d.scale,y:f.scale}),v=aa(e),y=aa(n),x=r&&r.length===2,b=STe(m,v,y,x,p,t.position,d.orientation,f.orientation,t);if(!b)return null;var S=vTe(b,2),j=S[0],E=j.x,A=j.y,P=S[1],O=P.x,k=P.y,C=vd(t,"hidden")?"url(#".concat(u,")"):void 0,I=jq(jq({clipPath:C},Jn(t,!0)),{},{x1:E,y1:A,x2:O,y2:k});return ve.createElement(zr,{className:mr("recharts-reference-line",l)},NTe(o,I),uo.renderCallByParent(t,Wke({x1:E,y1:A,x2:O,y2:k})))}var MI=(function(t){function e(){return cTe(this,e),fTe(this,e,arguments)}return mTe(e,t),dTe(e,[{key:"render",value:function(){return ve.createElement(jTe,this.props)}}])})(ve.Component);PI(MI,"displayName","ReferenceLine");PI(MI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GM.apply(this,arguments)}function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function _q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_q(Object(n),!0).forEach(function(r){LE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ETe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tee(r.key),r)}}function CTe(t,e,n){return e&&_Te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ATe(t,e,n){return e=aS(e),kTe(t,eee()?Reflect.construct(e,n||[],aS(t).constructor):e.apply(t,n))}function kTe(t,e){if(e&&(Ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TTe(t)}function TTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eee=function(){return!!t})()}function aS(t){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aS(t)}function OTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YM(t,e)}function YM(t,e){return YM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YM(t,e)}function LE(t,e,n){return e=tee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tee(t){var e=PTe(t,"string");return Ny(e)=="symbol"?e:e+""}function PTe(t,e){if(Ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MTe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=CI({x:i.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return vd(e,"discard")&&!o.isInRange(l)?null:l},FE=(function(t){function e(){return ETe(this,e),ATe(this,e,arguments)}return OTe(e,t),CTe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=aa(i),d=aa(s);if(kf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=MTe(this.props);if(!f)return null;var p=f.x,m=f.y,v=this.props,y=v.shape,x=v.className,b=vd(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=Cq(Cq({clipPath:b},Jn(this.props,!0)),{},{cx:p,cy:m});return ve.createElement(zr,{className:mr("recharts-reference-dot",x)},e.renderDot(y,S),uo.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])})(ve.Component);LE(FE,"displayName","ReferenceDot");LE(FE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});LE(FE,"renderDot",function(t,e){var n;return ve.isValidElement(t)?n=ve.cloneElement(t,e):tr(t)?n=t(e):n=ve.createElement(ME,GM({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XM.apply(this,arguments)}function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function Aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(n),!0).forEach(function(r){BE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ree(r.key),r)}}function ITe(t,e,n){return e&&DTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LTe(t,e,n){return e=oS(e),FTe(t,nee()?Reflect.construct(e,n||[],oS(t).constructor):e.apply(t,n))}function FTe(t,e){if(e&&(Sy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BTe(t)}function BTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nee=function(){return!!t})()}function oS(t){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oS(t)}function $Te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QM(t,e)}function QM(t,e){return QM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QM(t,e)}function BE(t,e,n){return e=ree(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ree(t){var e=zTe(t,"string");return Sy(e)=="symbol"?e:e+""}function zTe(t,e){if(Sy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qTe=function(e,n,r,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var p=CI({x:d.scale,y:f.scale}),m={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return vd(s,"discard")&&(!p.isInRange(m)||!p.isInRange(v))?null:UJ(m,v)},$E=(function(t){function e(){return RTe(this,e),LTe(this,e,arguments)}return $Te(e,t),ITe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;kf(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=aa(i),p=aa(s),m=aa(o),v=aa(l),y=this.props.shape;if(!f&&!p&&!m&&!v&&!y)return null;var x=qTe(f,p,m,v,this.props);if(!x&&!y)return null;var b=vd(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ve.createElement(zr,{className:mr("recharts-reference-area",c)},e.renderRect(y,kq(kq({clipPath:b},Jn(this.props,!0)),x)),uo.renderCallByParent(this.props,x))}}])})(ve.Component);BE($E,"displayName","ReferenceArea");BE($E,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});BE($E,"renderRect",function(t,e){var n;return ve.isValidElement(t)?n=ve.cloneElement(t,e):tr(t)?n=t(e):n=ve.createElement(EI,XM({},e,{className:"recharts-reference-area-rect"})),n});function iee(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function UTe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Gke(r,n)}function HTe(t,e,n){var r=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:r?i:s,end:r?i+o:s+l}:{start:r?i+o:s+l,end:r?i:s}}function lS(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function VTe(t,e){return iee(t,e+1)}function WTe(t,e,n,r,i){for(var s=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var v=r?.[c];if(v===void 0)return{v:iee(r,u)};var y=c,x,b=function(){return x===void 0&&(x=n(v,y)),x},S=v.coordinate,j=c===0||lS(t,S,b,d,l);j||(c=0,d=o,u+=1),j&&(d=S+t*(b()/2+i),c+=u)},p;u<=s.length;)if(p=f(),p)return p.v;return[]}function q0(t){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q0(t)}function Tq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tq(Object(n),!0).forEach(function(r){KTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KTe(t,e,n){return e=GTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GTe(t){var e=YTe(t,"string");return q0(e)=="symbol"?e:e+""}function YTe(t,e){if(q0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(q0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XTe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(p){var m=s[p],v,y=function(){return v===void 0&&(v=n(m,p)),v};if(p===o-1){var x=t*(m.coordinate+t*y()/2-c);s[p]=m=lo(lo({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else s[p]=m=lo(lo({},m),{},{tickCoord:m.coordinate});var b=lS(t,m.tickCoord,y,l,c);b&&(c=m.tickCoord-t*(y()/2+i),s[p]=lo(lo({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function QTe(t,e,n,r,i,s){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var d=r[l-1],f=n(d,l-1),p=t*(d.coordinate+t*f/2-u);o[l-1]=d=lo(lo({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var m=lS(t,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-t*(f/2+i),o[l-1]=lo(lo({},d),{},{isShow:!0}))}for(var v=s?l-1:l,y=function(S){var j=o[S],E,A=function(){return E===void 0&&(E=n(j,S)),E};if(S===0){var P=t*(j.coordinate-t*A()/2-c);o[S]=j=lo(lo({},j),{},{tickCoord:P<0?j.coordinate-P*t:j.coordinate})}else o[S]=j=lo(lo({},j),{},{tickCoord:j.coordinate});var O=lS(t,j.tickCoord,A,c,u);O&&(c=j.tickCoord+t*(A()/2+i),o[S]=lo(lo({},j),{},{isShow:!0}))},x=0;x<v;x++)y(x);return o}function RI(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Pt(c)||Ap.isSsr)return VTe(i,typeof c=="number"&&Pt(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?Tb(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(j,E){var A=tr(u)?u(j.value,E):j.value;return m==="width"?UTe(Tb(A,{fontSize:e,letterSpacing:n}),v,f):Tb(A,{fontSize:e,letterSpacing:n})[m]},x=i.length>=2?pu(i[1].coordinate-i[0].coordinate):1,b=HTe(s,x,m);return c==="equidistantPreserveStart"?WTe(x,b,y,i,o):(c==="preserveStart"||c==="preserveStartEnd"?p=QTe(x,b,y,i,o,c==="preserveStartEnd"):p=XTe(x,b,y,i,o),p.filter(function(S){return S.isShow}))}var ZTe=["viewBox"],JTe=["viewBox"],e5e=["ticks"];function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rv.apply(this,arguments)}function Oq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oq(Object(n),!0).forEach(function(r){DI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W5(t,e){if(t==null)return{};var n=t5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function t5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function n5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aee(r.key),r)}}function r5e(t,e,n){return e&&Pq(t.prototype,e),n&&Pq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i5e(t,e,n){return e=cS(e),s5e(t,see()?Reflect.construct(e,n||[],cS(t).constructor):e.apply(t,n))}function s5e(t,e){if(e&&(jy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a5e(t)}function a5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function see(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(see=function(){return!!t})()}function cS(t){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cS(t)}function o5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZM(t,e)}function ZM(t,e){return ZM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ZM(t,e)}function DI(t,e,n){return e=aee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aee(t){var e=l5e(t,"string");return jy(e)=="symbol"?e:e+""}function l5e(t,e){if(jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fx=(function(t){function e(n){var r;return n5e(this,e),r=i5e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return o5e(e,t),r5e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=W5(r,ZTe),l=this.props,c=l.viewBox,u=W5(l,JTe);return!Vv(s,c)||!Vv(o,u)||!Vv(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,m,v,y,x,b,S,j=f?-1:1,E=r.tickSize||d,A=Pt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=v=r.coordinate,x=o+ +!f*c,y=x-j*E,S=y-j*p,b=A;break;case"left":y=x=r.coordinate,v=s+ +!f*l,m=v-j*E,b=m-j*p,S=A;break;case"right":y=x=r.coordinate,v=s+ +f*l,m=v+j*E,b=m+j*p,S=A;break;default:m=v=r.coordinate,x=o+ +f*c,y=x+j*E,S=y+j*p,b=A;break}return{line:{x1:m,y1:y,x2:v,y2:x},tick:{x:b,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=ta(ta(ta({},Jn(this.props,!1)),Jn(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=ta(ta({},f),{},{x1:i,y1:s+p*l,x2:i+o,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=ta(ta({},f),{},{x1:i+m*o,y1:s,x2:i+m*o,y2:s+l})}return ve.createElement("line",Rv({},f,{className:mr("recharts-cartesian-axis-line",wc(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,p=l.unit,m=RI(ta(ta({},this.props),{},{ticks:r}),i,s),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),x=Jn(this.props,!1),b=Jn(d,!1),S=ta(ta({},x),{},{fill:"none"},Jn(c,!1)),j=m.map(function(E,A){var P=o.getTickLineCoord(E),O=P.line,k=P.tick,C=ta(ta(ta(ta({textAnchor:v,verticalAnchor:y},x),{},{stroke:"none",fill:u},b),k),{},{index:A,payload:E,visibleTicksCount:m.length,tickFormatter:f});return ve.createElement(zr,Rv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},c0(o.props,E,A)),c&&ve.createElement("line",Rv({},S,O,{className:mr("recharts-cartesian-axis-tick-line",wc(c,"className"))})),d&&e.renderTickItem(d,C,"".concat(tr(f)?f(E.value,A):E.value).concat(p||"")))});return ve.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,m=W5(f,e5e),v=p;return tr(c)&&(v=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:ve.createElement(zr,{className:mr("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),uo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o,l=mr(i.className,"recharts-cartesian-axis-tick-value");return ve.isValidElement(r)?o=ve.cloneElement(r,ta(ta({},i),{},{className:l})):tr(r)?o=r(ta(ta({},i),{},{className:l})):o=ve.createElement(ON,Rv({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])})(N.Component);DI(fx,"displayName","CartesianAxis");DI(fx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var c5e=["x1","y1","x2","y2","key"],u5e=["offset"];function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function Mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mq(Object(n),!0).forEach(function(r){d5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d5e(t,e,n){return e=f5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f5e(t){var e=h5e(t,"string");return rg(e)=="symbol"?e:e+""}function h5e(t,e){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}function Rq(t,e){if(t==null)return{};var n=p5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function p5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var m5e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return ve.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function oee(t,e){var n;if(ve.isValidElement(t))n=ve.cloneElement(t,e);else if(tr(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=Rq(e,c5e),u=Jn(c,!1);u.offset;var d=Rq(u,u5e);n=ve.createElement("line",Cm({},d,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function g5e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=fo(fo({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return oee(i,u)});return ve.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function v5e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=fo(fo({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return oee(i,u)});return ve.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function y5e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var v=!d[m+1],y=v?i+o-p:d[m+1]-p;if(y<=0)return null;var x=m%e.length;return ve.createElement("rect",{key:"react-".concat(m),y:p,x:r,height:y,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function x5e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var v=!d[m+1],y=v?s+l-p:d[m+1]-p;if(y<=0)return null;var x=m%r.length;return ve.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:y,height:c,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var b5e=function(e,n){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return wJ(RI(fo(fo(fo({},fx.defaultProps),r),{},{ticks:Ef(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},w5e=function(e,n){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return wJ(RI(fo(fo(fo({},fx.defaultProps),r),{},{ticks:Ef(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},ov={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Gv(t){var e,n,r,i,s,o,l=TI(),c=OI(),u=lTe(),d=fo(fo({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ov.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:ov.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:ov.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:ov.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:ov.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:ov.verticalFill,x:Pt(t.x)?t.x:u.left,y:Pt(t.y)?t.y:u.top,width:Pt(t.width)?t.width:u.width,height:Pt(t.height)?t.height:u.height}),f=d.x,p=d.y,m=d.width,v=d.height,y=d.syncWithTicks,x=d.horizontalValues,b=d.verticalValues,S=sTe(),j=aTe();if(!Pt(m)||m<=0||!Pt(v)||v<=0||!Pt(f)||f!==+f||!Pt(p)||p!==+p)return null;var E=d.verticalCoordinatesGenerator||b5e,A=d.horizontalCoordinatesGenerator||w5e,P=d.horizontalPoints,O=d.verticalPoints;if((!P||!P.length)&&tr(A)){var k=x&&x.length,C=A({yAxis:j?fo(fo({},j),{},{ticks:k?x:j.ticks}):void 0,width:l,height:c,offset:u},k?!0:y);kf(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(rg(C),"]")),Array.isArray(C)&&(P=C)}if((!O||!O.length)&&tr(E)){var I=b&&b.length,R=E({xAxis:S?fo(fo({},S),{},{ticks:I?b:S.ticks}):void 0,width:l,height:c,offset:u},I?!0:y);kf(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(rg(R),"]")),Array.isArray(R)&&(O=R)}return ve.createElement("g",{className:"recharts-cartesian-grid"},ve.createElement(m5e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ve.createElement(g5e,Cm({},d,{offset:u,horizontalPoints:P,xAxis:S,yAxis:j})),ve.createElement(v5e,Cm({},d,{offset:u,verticalPoints:O,xAxis:S,yAxis:j})),ve.createElement(y5e,Cm({},d,{horizontalPoints:P})),ve.createElement(x5e,Cm({},d,{verticalPoints:O})))}Gv.displayName="CartesianGrid";var N5e=["type","layout","connectNulls","ref"],S5e=["key"];function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function Dq(t,e){if(t==null)return{};var n=j5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rb.apply(this,arguments)}function Iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(n),!0).forEach(function(r){lu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lv(t){return A5e(t)||C5e(t)||_5e(t)||E5e()}function E5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5e(t,e){if(t){if(typeof t=="string")return JM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JM(t,e)}}function C5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A5e(t){if(Array.isArray(t))return JM(t)}function JM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cee(r.key),r)}}function T5e(t,e,n){return e&&Lq(t.prototype,e),n&&Lq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O5e(t,e,n){return e=uS(e),P5e(t,lee()?Reflect.construct(e,n||[],uS(t).constructor):e.apply(t,n))}function P5e(t,e){if(e&&(Ey(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M5e(t)}function M5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lee=function(){return!!t})()}function uS(t){return uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uS(t)}function R5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eR(t,e)}function eR(t,e){return eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eR(t,e)}function lu(t,e,n){return e=cee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cee(t){var e=D5e(t,"string");return Ey(e)=="symbol"?e:e+""}function D5e(t,e){if(Ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qf=(function(t){function e(){var n;k5e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=O5e(this,e,[].concat(i)),lu(n,"state",{isAnimationFinished:!0,totalLength:0}),lu(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),lu(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(b,S){return b+S});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,p=l-o,m=[],v=0,y=0;v<c.length;y+=c[v],++v)if(y+c[v]>f){m=[].concat(lv(c.slice(0,v)),[f-y]);break}var x=m.length%2===0?[0,p]:[p];return[].concat(lv(e.repeat(c,d)),lv(m),x).map(function(b){return"".concat(b,"px")}).join(", ")}),lu(n,"id",Ng("recharts-line-")),lu(n,"pathRef",function(o){n.mainCurve=o}),lu(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),lu(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return R5e(e,t),T5e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ll(d,dx);if(!f)return null;var p=function(y,x){return{x:y.x,y:y.y,value:y.value,errorVal:la(y.payload,x)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ve.createElement(zr,m,f.map(function(v){return ve.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Jn(this.props,!1),p=Jn(c,!0),m=u.map(function(y,x){var b=Cl(Cl(Cl({key:"dot-".concat(x),r:3},f),p),{},{index:x,cx:y.x,cy:y.y,value:y.value,dataKey:d,payload:y.payload,points:u});return e.renderDotItem(c,b)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return ve.createElement(zr,Rb({className:"recharts-line-dots",key:"dots"},v),m)}},{key:"renderCurveStatically",value:function(r,i,s,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=Dq(l,N5e),p=Cl(Cl(Cl({},Jn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return ve.createElement(Lm,Rb({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,v=o.animateNewValues,y=o.width,x=o.height,b=this.state,S=b.prevPoints,j=b.totalLength;return ve.createElement(bu,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var A=E.t;if(S){var P=S.length/l.length,O=l.map(function(D,L){var z=Math.floor(L*P);if(S[z]){var W=S[z],X=As(W.x,D.x),q=As(W.y,D.y);return Cl(Cl({},D),{},{x:X(A),y:q(A)})}if(v){var V=As(y*2,D.x),Y=As(x/2,D.y);return Cl(Cl({},D),{},{x:V(A),y:Y(A)})}return Cl(Cl({},D),{},{x:D.x,y:D.y})});return s.renderCurveStatically(O,r,i)}var k=As(0,j),C=k(A),I;if(c){var R="".concat(c).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});I=s.getStrokeDasharray(C,j,R)}else I=s.generateSimpleStrokeDasharray(j,C);return s.renderCurveStatically(l,r,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!eg(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,p=i.left,m=i.width,v=i.height,y=i.isAnimationActive,x=i.id;if(s||!l||!l.length)return null;var b=this.state.isAnimationFinished,S=l.length===1,j=mr("recharts-line",c),E=u&&u.allowDataOverflow,A=d&&d.allowDataOverflow,P=E||A,O=Yn(x)?this.id:x,k=(r=Jn(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=k.r,I=C===void 0?3:C,R=k.strokeWidth,D=R===void 0?2:R,L=jQ(o)?o:{},z=L.clipDot,W=z===void 0?!0:z,X=I*2+D;return ve.createElement(zr,{className:j},E||A?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(O)},ve.createElement("rect",{x:E?p:p-m/2,y:A?f:f-v/2,width:E?m:m*2,height:A?v:v*2})),!W&&ve.createElement("clipPath",{id:"clipPath-dots-".concat(O)},ve.createElement("rect",{x:p-X/2,y:f-X/2,width:m+X,height:v+X}))):null,!S&&this.renderCurve(P,O),this.renderErrorBar(P,O),(S||o)&&this.renderDots(P,W,O),(!y||b)&&gd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(lv(r),[0]):r,o=[],l=0;l<i;++l)o=[].concat(lv(o),lv(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(ve.isValidElement(r))s=ve.cloneElement(r,i);else if(tr(r))s=r(i);else{var o=i.key,l=Dq(i,S5e),c=mr("recharts-line-dot",typeof r!="boolean"?r.className:"");s=ve.createElement(ME,Rb({key:o},l,{className:c}))}return s}}])})(N.PureComponent);lu(qf,"displayName","Line");lu(qf,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ap.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});lu(qf,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,f=c.map(function(p,m){var v=la(p,o);return d==="horizontal"?{x:gy({axis:n,ticks:i,bandSize:l,entry:p,index:m}),y:Yn(v)?null:r.scale(v),value:v,payload:p}:{x:Yn(v)?null:n.scale(v),y:gy({axis:r,ticks:s,bandSize:l,entry:p,index:m}),value:v,payload:p}});return Cl({points:f,layout:d},u)});var I5e=["layout","type","stroke","connectNulls","isRange","ref"],L5e=["key"],uee;function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function dee(t,e){if(t==null)return{};var n=F5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function F5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Am.apply(this,arguments)}function Fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fq(Object(n),!0).forEach(function(r){cd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hee(r.key),r)}}function $5e(t,e,n){return e&&Bq(t.prototype,e),n&&Bq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z5e(t,e,n){return e=dS(e),q5e(t,fee()?Reflect.construct(e,n||[],dS(t).constructor):e.apply(t,n))}function q5e(t,e){if(e&&(_y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U5e(t)}function U5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fee=function(){return!!t})()}function dS(t){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dS(t)}function H5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tR(t,e)}function tR(t,e){return tR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tR(t,e)}function cd(t,e,n){return e=hee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hee(t){var e=V5e(t,"string");return _y(e)=="symbol"?e:e+""}function V5e(t,e){if(_y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _g=(function(t){function e(){var n;B5e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=z5e(this,e,[].concat(i)),cd(n,"state",{isAnimationFinished:!0}),cd(n,"id",Ng("recharts-area-")),cd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),tr(o)&&o()}),cd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),tr(o)&&o()}),n}return H5e(e,t),$5e(e,[{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,p=Jn(this.props,!1),m=Jn(u,!0),v=d.map(function(x,b){var S=Dh(Dh(Dh({key:"dot-".concat(b),r:3},p),m),{},{index:b,cx:x.x,cy:x.y,dataKey:f,value:x.value,payload:x.payload,points:d});return e.renderDotItem(u,S)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return ve.createElement(zr,Am({className:"recharts-area-dots"},y),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),f=Gh(o.map(function(p){return p.y||0}));return Pt(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Gh(s.map(function(p){return p.y||0})),f)),Pt(f)?ve.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),f=Gh(o.map(function(p){return p.x||0}));return Pt(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Gh(s.map(function(p){return p.x||0})),f)),Pt(f)?ve.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,p=l.isRange;l.ref;var m=dee(l,I5e);return ve.createElement(zr,{clipPath:s?"url(#clipPath-".concat(o,")"):null},ve.createElement(Lm,Am({},Jn(m,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&ve.createElement(Lm,Am({},Jn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&p&&ve.createElement(Lm,Am({},Jn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,v=this.state,y=v.prevPoints,x=v.prevBaseLine;return ve.createElement(bu,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var S=b.t;if(y){var j=y.length/l.length,E=l.map(function(k,C){var I=Math.floor(C*j);if(y[I]){var R=y[I],D=As(R.x,k.x),L=As(R.y,k.y);return Dh(Dh({},k),{},{x:D(S),y:L(S)})}return k}),A;if(Pt(c)&&typeof c=="number"){var P=As(x,c);A=P(S)}else if(Yn(c)||ax(c)){var O=As(x,0);A=O(S)}else A=c.map(function(k,C){var I=Math.floor(C*j);if(x[I]){var R=x[I],D=As(R.x,k.x),L=As(R.y,k.y);return Dh(Dh({},k),{},{x:D(S),y:L(S)})}return k});return s.renderAreaStatically(E,A,r,i)}return ve.createElement(zr,null,ve.createElement("defs",null,ve.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(S))),ve.createElement(zr,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,p=u.totalLength;return c&&o&&o.length&&(!d&&p>0||!eg(d,o)||!eg(f,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,l,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,p=i.yAxis,m=i.width,v=i.height,y=i.isAnimationActive,x=i.id;if(s||!l||!l.length)return null;var b=this.state.isAnimationFinished,S=l.length===1,j=mr("recharts-area",c),E=f&&f.allowDataOverflow,A=p&&p.allowDataOverflow,P=E||A,O=Yn(x)?this.id:x,k=(r=Jn(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=k.r,I=C===void 0?3:C,R=k.strokeWidth,D=R===void 0?2:R,L=jQ(o)?o:{},z=L.clipDot,W=z===void 0?!0:z,X=I*2+D;return ve.createElement(zr,{className:j},E||A?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(O)},ve.createElement("rect",{x:E?d:d-m/2,y:A?u:u-v/2,width:E?m:m*2,height:A?v:v*2})),!W&&ve.createElement("clipPath",{id:"clipPath-dots-".concat(O)},ve.createElement("rect",{x:d-X/2,y:u-X/2,width:m+X,height:v+X}))):null,S?null:this.renderArea(P,O),(o||S)&&this.renderDots(P,W,O),(!y||b)&&gd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(N.PureComponent);uee=_g;cd(_g,"displayName","Area");cd(_g,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ap.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});cd(_g,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(Pt(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});cd(_g,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,m=e.layout,v=u&&u.length,y=uee.getBaseValue(e,n,r,i),x=m==="horizontal",b=!1,S=f.map(function(E,A){var P;v?P=u[d+A]:(P=la(E,c),Array.isArray(P)?b=!0:P=[y,P]);var O=P[1]==null||v&&la(E,c)==null;return x?{x:gy({axis:r,ticks:s,bandSize:l,entry:E,index:A}),y:O?null:i.scale(P[1]),value:P,payload:E}:{x:O?null:r.scale(P[1]),y:gy({axis:i,ticks:o,bandSize:l,entry:E,index:A}),value:P,payload:E}}),j;return v||b?j=S.map(function(E){var A=Array.isArray(E.value)?E.value[0]:null;return x?{x:E.x,y:A!=null&&E.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:E.y}}):j=x?i.scale(y):r.scale(y),Dh({points:S,baseLine:j,layout:m,isRange:b},p)});cd(_g,"renderDotItem",function(t,e){var n;if(ve.isValidElement(t))n=ve.cloneElement(t,e);else if(tr(t))n=t(e);else{var r=mr("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=dee(e,L5e);n=ve.createElement(ME,Am({},s,{key:i,className:r}))}return n});function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function W5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gee(r.key),r)}}function G5e(t,e,n){return e&&K5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y5e(t,e,n){return e=fS(e),X5e(t,pee()?Reflect.construct(e,n||[],fS(t).constructor):e.apply(t,n))}function X5e(t,e){if(e&&(Cy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q5e(t)}function Q5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pee=function(){return!!t})()}function fS(t){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fS(t)}function Z5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nR(t,e)}function nR(t,e){return nR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nR(t,e)}function mee(t,e,n){return e=gee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gee(t){var e=J5e(t,"string");return Cy(e)=="symbol"?e:e+""}function J5e(t,e){if(Cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zE=(function(t){function e(){return W5e(this,e),Y5e(this,e,arguments)}return Z5e(e,t),G5e(e,[{key:"render",value:function(){return null}}])})(N.Component);mee(zE,"displayName","ZAxis");mee(zE,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var eOe=["option","isActive"];function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Db.apply(this,arguments)}function tOe(t,e){if(t==null)return{};var n=nOe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rOe(t){var e=t.option,n=t.isActive,r=tOe(t,eOe);return typeof e=="string"?N.createElement(qM,Db({option:N.createElement(bE,Db({type:e},r)),isActive:n,shapeType:"symbols"},r)):N.createElement(qM,Db({option:e,isActive:n,shapeType:"symbols"},r))}function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ib.apply(this,arguments)}function $q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$q(Object(n),!0).forEach(function(r){Xh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yee(r.key),r)}}function sOe(t,e,n){return e&&zq(t.prototype,e),n&&zq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aOe(t,e,n){return e=hS(e),oOe(t,vee()?Reflect.construct(e,n||[],hS(t).constructor):e.apply(t,n))}function oOe(t,e){if(e&&(Ay(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lOe(t)}function lOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vee=function(){return!!t})()}function hS(t){return hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hS(t)}function cOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rR(t,e)}function rR(t,e){return rR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rR(t,e)}function Xh(t,e,n){return e=yee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yee(t){var e=uOe(t,"string");return Ay(e)=="symbol"?e:e+""}function uOe(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qE=(function(t){function e(){var n;iOe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=aOe(this,e,[].concat(i)),Xh(n,"state",{isAnimationFinished:!1}),Xh(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),Xh(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),Xh(n,"id",Ng("recharts-scatter-")),n}return cOe(e,t),sOe(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,s=this.props,o=s.shape,l=s.activeShape,c=s.activeIndex,u=Jn(this.props,!1);return r.map(function(d,f){var p=c===f,m=p?l:o,v=dc(dc({},u),d);return ve.createElement(zr,Ib({className:"recharts-scatter-symbol",key:"symbol-".concat(d?.cx,"-").concat(d?.cy,"-").concat(d?.size,"-").concat(f)},c0(i.props,d,f),{role:"img"}),ve.createElement(rOe,Ib({option:m,isActive:p,key:"symbol-".concat(f)},v)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,s=i.points,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevPoints;return ve.createElement(bu,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,v=s.map(function(y,x){var b=f&&f[x];if(b){var S=As(b.cx,y.cx),j=As(b.cy,y.cy),E=As(b.size,y.size);return dc(dc({},y),{},{cx:S(m),cy:j(m),size:E(m)})}var A=As(0,y.size);return dc(dc({},y),{},{size:A(m)})});return ve.createElement(zr,null,r.renderSymbolsStatically(v))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,s=r.isAnimationActive,o=this.state.prevPoints;return s&&i&&i.length&&(!o||!eg(o,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,o=i.xAxis,l=i.yAxis,c=i.children,u=ll(c,dx);return u?u.map(function(d,f){var p=d.props,m=p.direction,v=p.dataKey;return ve.cloneElement(d,{key:"".concat(m,"-").concat(v,"-").concat(s[f]),data:s,xAxis:o,yAxis:l,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(x,b){return{x:x.cx,y:x.cy,value:m==="x"?+x.node.x:+x.node.y,errorVal:la(x,b)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,s=r.line,o=r.lineType,l=r.lineJointType,c=Jn(this.props,!1),u=Jn(s,!1),d,f;if(o==="joint")d=i.map(function(j){return{x:j.cx,y:j.cy}});else if(o==="fitting"){var p=Vxe(i),m=p.xmin,v=p.xmax,y=p.a,x=p.b,b=function(E){return y*E+x};d=[{x:m,y:b(m)},{x:v,y:b(v)}]}var S=dc(dc(dc({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return ve.isValidElement(s)?f=ve.cloneElement(s,S):tr(s)?f=s(S):f=ve.createElement(Lm,Ib({},S,{type:l})),ve.createElement(zr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.points,o=r.line,l=r.className,c=r.xAxis,u=r.yAxis,d=r.left,f=r.top,p=r.width,m=r.height,v=r.id,y=r.isAnimationActive;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,b=mr("recharts-scatter",l),S=c&&c.allowDataOverflow,j=u&&u.allowDataOverflow,E=S||j,A=Yn(v)?this.id:v;return ve.createElement(zr,{className:b,clipPath:E?"url(#clipPath-".concat(A,")"):null},S||j?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(A)},ve.createElement("rect",{x:S?d:d-p/2,y:j?f:f-m/2,width:S?p:p*2,height:j?m:m*2}))):null,o&&this.renderLine(),this.renderErrorBar(),ve.createElement(zr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||x)&&gd.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])})(N.PureComponent);Xh(qE,"displayName","Scatter");Xh(qE,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ap.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Xh(qE,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,i=t.item,s=t.displayedData,o=t.xAxisTicks,l=t.yAxisTicks,c=t.offset,u=i.props.tooltipType,d=ll(i.props.children,Kh),f=Yn(e.dataKey)?i.props.dataKey:e.dataKey,p=Yn(n.dataKey)?i.props.dataKey:n.dataKey,m=r&&r.dataKey,v=r?r.range:zE.defaultProps.range,y=v&&v[0],x=e.scale.bandwidth?e.scale.bandwidth():0,b=n.scale.bandwidth?n.scale.bandwidth():0,S=s.map(function(j,E){var A=la(j,f),P=la(j,p),O=!Yn(m)&&la(j,m)||"-",k=[{name:Yn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:A,payload:j,dataKey:f,type:u},{name:Yn(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:P,payload:j,dataKey:p,type:u}];O!=="-"&&k.push({name:r.name||r.dataKey,unit:r.unit||"",value:O,payload:j,dataKey:m,type:u});var C=gy({axis:e,ticks:o,bandSize:x,entry:j,index:E,dataKey:f}),I=gy({axis:n,ticks:l,bandSize:b,entry:j,index:E,dataKey:p}),R=O!=="-"?r.scale(O):y,D=Math.sqrt(Math.max(R,0)/Math.PI);return dc(dc({},j),{},{cx:C,cy:I,x:C-D,y:I-D,xAxis:e,yAxis:n,zAxis:r,width:2*D,height:2*D,size:R,node:{x:A,y:P,z:O},tooltipPayload:k,tooltipPosition:{x:C,y:I},payload:j},d&&d[E]&&d[E].props)});return dc({points:S},c)});function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function dOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wee(r.key),r)}}function hOe(t,e,n){return e&&fOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pOe(t,e,n){return e=pS(e),mOe(t,xee()?Reflect.construct(e,n||[],pS(t).constructor):e.apply(t,n))}function mOe(t,e){if(e&&(ky(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gOe(t)}function gOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xee=function(){return!!t})()}function pS(t){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pS(t)}function vOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iR(t,e)}function iR(t,e){return iR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iR(t,e)}function bee(t,e,n){return e=wee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wee(t){var e=yOe(t,"string");return ky(e)=="symbol"?e:e+""}function yOe(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sR(){return sR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sR.apply(this,arguments)}function xOe(t){var e=t.xAxisId,n=TI(),r=OI(),i=XJ(e);return i==null?null:N.createElement(fx,sR({},i,{className:mr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Ef(o,!0)}}))}var yd=(function(t){function e(){return dOe(this,e),pOe(this,e,arguments)}return vOe(e,t),hOe(e,[{key:"render",value:function(){return N.createElement(xOe,this.props)}}])})(N.Component);bee(yd,"displayName","XAxis");bee(yd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function bOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jee(r.key),r)}}function NOe(t,e,n){return e&&wOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SOe(t,e,n){return e=mS(e),jOe(t,Nee()?Reflect.construct(e,n||[],mS(t).constructor):e.apply(t,n))}function jOe(t,e){if(e&&(Ty(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EOe(t)}function EOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nee=function(){return!!t})()}function mS(t){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mS(t)}function _Oe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aR(t,e)}function aR(t,e){return aR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aR(t,e)}function See(t,e,n){return e=jee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jee(t){var e=COe(t,"string");return Ty(e)=="symbol"?e:e+""}function COe(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function oR(){return oR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oR.apply(this,arguments)}var AOe=function(e){var n=e.yAxisId,r=TI(),i=OI(),s=QJ(n);return s==null?null:N.createElement(fx,oR({},s,{className:mr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Ef(l,!0)}}))},bc=(function(t){function e(){return bOe(this,e),SOe(this,e,arguments)}return _Oe(e,t),NOe(e,[{key:"render",value:function(){return N.createElement(AOe,this.props)}}])})(N.Component);See(bc,"displayName","YAxis");See(bc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function qq(t){return POe(t)||OOe(t)||TOe(t)||kOe()}function kOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TOe(t,e){if(t){if(typeof t=="string")return lR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lR(t,e)}}function OOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function POe(t){if(Array.isArray(t))return lR(t)}function lR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cR=function(e,n,r,i,s){var o=ll(e,MI),l=ll(e,FE),c=[].concat(qq(o),qq(l)),u=ll(e,$E),d="".concat(i,"Id"),f=i[0],p=n;if(c.length&&(p=c.reduce(function(y,x){if(x.props[d]===r&&vd(x.props,"extendDomain")&&Pt(x.props[f])){var b=x.props[f];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},p)),u.length){var m="".concat(f,"1"),v="".concat(f,"2");p=u.reduce(function(y,x){if(x.props[d]===r&&vd(x.props,"extendDomain")&&Pt(x.props[m])&&Pt(x.props[v])){var b=x.props[m],S=x.props[v];return[Math.min(y[0],b,S),Math.max(y[1],b,S)]}return y},p)}return s&&s.length&&(p=s.reduce(function(y,x){return Pt(x)?[Math.min(y[0],x),Math.max(y[1],x)]:y},p)),p},K5={exports:{}},Uq;function MOe(){return Uq||(Uq=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,v=new Array(m);p<m;p++)v[p]=f[p].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,m,v){var y=n?n+u:u;if(!this._events[y])return!1;var x=this._events[y],b=arguments.length,S,j;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,m),!0;case 6:return x.fn.call(x.context,d,f,p,m,v),!0}for(j=1,S=new Array(b-1);j<b;j++)S[j-1]=arguments[j];x.fn.apply(x.context,S)}else{var E=x.length,A;for(j=0;j<E;j++)switch(x[j].once&&this.removeListener(u,x[j].fn,void 0,!0),b){case 1:x[j].fn.call(x[j].context);break;case 2:x[j].fn.call(x[j].context,d);break;case 3:x[j].fn.call(x[j].context,d,f);break;case 4:x[j].fn.call(x[j].context,d,f,p);break;default:if(!S)for(A=1,S=new Array(b-1);A<b;A++)S[A-1]=arguments[A];x[j].fn.apply(x[j].context,S)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!p||v.once)&&(!f||v.context===f)&&o(this,m);else{for(var y=0,x=[],b=v.length;y<b;y++)(v[y].fn!==d||p&&!v[y].once||f&&v[y].context!==f)&&x.push(v[y]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(K5)),K5.exports}var ROe=MOe();const DOe=qr(ROe);var G5=new DOe,Y5="recharts.syncMouseEvents";function U0(t){"@babel/helpers - typeof";return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0(t)}function IOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Eee(r.key),r)}}function FOe(t,e,n){return e&&LOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X5(t,e,n){return e=Eee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eee(t){var e=BOe(t,"string");return U0(e)=="symbol"?e:e+""}function BOe(t,e){if(U0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(U0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $Oe=(function(){function t(){IOe(this,t),X5(this,"activeIndex",0),X5(this,"coordinateList",[]),X5(this,"layout","horizontal")}return FOe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,p=n.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,p=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function zOe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t?.[0],i=t?.[1];if(r&&i&&Pt(r)&&Pt(i))return!0}return!1}function qOe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function _ee(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,o=za(e,n,r,i),l=za(e,n,r,s);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function UOe(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=za(l,c,u,f),m=za(l,c,d,f);r=p.x,i=p.y,s=m.x,o=m.y}else return _ee(e);return[{x:r,y:i},{x:s,y:o}]}function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function Hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(n),!0).forEach(function(r){HOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HOe(t,e,n){return e=VOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VOe(t){var e=WOe(t,"string");return H0(e)=="symbol"?e:e+""}function WOe(t,e){if(H0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(H0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KOe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||p!=="ScatterChart"&&i!=="axis")return null;var v,y=Lm;if(p==="ScatterChart")v=o,y=vAe;else if(p==="BarChart")v=qOe(f,o,c,d),y=EI;else if(f==="radial"){var x=_ee(o),b=x.cx,S=x.cy,j=x.radius,E=x.startAngle,A=x.endAngle;v={cx:b,cy:S,startAngle:E,endAngle:A,innerRadius:j,outerRadius:j},y=_J}else v={points:UOe(f,o,c)},y=Lm;var P=Zw(Zw(Zw(Zw({stroke:"#ccc",pointerEvents:"none"},c),v),Jn(m,!1)),{},{payload:l,payloadIndex:u,className:mr("recharts-tooltip-cursor",m.className)});return N.isValidElement(m)?N.cloneElement(m,P):N.createElement(y,P)}var GOe=["item"],YOe=["children","className","width","height","style","compact","title","desc"];function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dv.apply(this,arguments)}function Vq(t,e){return ZOe(t)||QOe(t,e)||Aee(t,e)||XOe()}function XOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function ZOe(t){if(Array.isArray(t))return t}function Wq(t,e){if(t==null)return{};var n=JOe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ePe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kee(r.key),r)}}function nPe(t,e,n){return e&&tPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rPe(t,e,n){return e=gS(e),iPe(t,Cee()?Reflect.construct(e,n||[],gS(t).constructor):e.apply(t,n))}function iPe(t,e){if(e&&(Oy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(t)}function sPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cee=function(){return!!t})()}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gS(t)}function aPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uR(t,e)}function uR(t,e){return uR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uR(t,e)}function Py(t){return cPe(t)||lPe(t)||Aee(t)||oPe()}function oPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(t,e){if(t){if(typeof t=="string")return dR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dR(t,e)}}function lPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cPe(t){if(Array.isArray(t))return dR(t)}function dR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(n),!0).forEach(function(r){Mn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mn(t,e,n){return e=kee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kee(t){var e=uPe(t,"string");return Oy(e)=="symbol"?e:e+""}function uPe(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dPe={xAxis:["bottom","top"],yAxis:["left","right"]},fPe={width:"100%",height:"100%"},Tee={x:0,y:0};function Jw(t){return t}var hPe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},pPe=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return at(at(at({},i),za(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return at(at(at({},i),za(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return Tee},UE=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Py(l),Py(u)):l},[]);return o.length>0?o:e&&e.length&&Pt(i)&&Pt(s)?e.slice(i,s+1):[]};function Oee(t){return t==="number"?[0,"auto"]:void 0}var fR=function(e,n,r,i){var s=e.graphicalItems,o=e.tooltipAxis,l=UE(n,e);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;p=xN(m,o.dataKey,i)}else p=f&&f[r]||l[r];return p?[].concat(Py(c),[SJ(u,p)]):c},[])},Gq=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},o=hPe(s,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=Jje(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=fR(e,n,d,f),m=pPe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},mPe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,m=bJ(d,s);return r.reduce(function(v,y){var x,b=y.type.defaultProps!==void 0?at(at({},y.type.defaultProps),y.props):y.props,S=b.type,j=b.dataKey,E=b.allowDataOverflow,A=b.allowDuplicatedCategory,P=b.scale,O=b.ticks,k=b.includeHidden,C=b[o];if(v[C])return v;var I=UE(e.data,{graphicalItems:i.filter(function(F){var G,te=o in F.props?F.props[o]:(G=F.type.defaultProps)===null||G===void 0?void 0:G[o];return te===C}),dataStartIndex:c,dataEndIndex:u}),R=I.length,D,L,z;zOe(b.domain,E,S)&&(D=_M(b.domain,null,E),m&&(S==="number"||P!=="auto")&&(z=Pb(I,j,"category")));var W=Oee(S);if(!D||D.length===0){var X,q=(X=b.domain)!==null&&X!==void 0?X:W;if(j){if(D=Pb(I,j,S),S==="category"&&m){var V=Hxe(D);A&&V?(L=D,D=eS(0,R)):A||(D=t9(q,D,y).reduce(function(F,G){return F.indexOf(G)>=0?F:[].concat(Py(F),[G])},[]))}else if(S==="category")A?D=D.filter(function(F){return F!==""&&!Yn(F)}):D=t9(q,D,y).reduce(function(F,G){return F.indexOf(G)>=0||G===""||Yn(G)?F:[].concat(Py(F),[G])},[]);else if(S==="number"){var Y=iEe(I,i.filter(function(F){var G,te,le=o in F.props?F.props[o]:(G=F.type.defaultProps)===null||G===void 0?void 0:G[o],he="hide"in F.props?F.props.hide:(te=F.type.defaultProps)===null||te===void 0?void 0:te.hide;return le===C&&(k||!he)}),j,s,d);Y&&(D=Y)}m&&(S==="number"||P!=="auto")&&(z=Pb(I,j,"category"))}else m?D=eS(0,R):l&&l[C]&&l[C].hasStack&&S==="number"?D=p==="expand"?[0,1]:NJ(l[C].stackGroups,c,u):D=xJ(I,i.filter(function(F){var G=o in F.props?F.props[o]:F.type.defaultProps[o],te="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return G===C&&(k||!te)}),S,d,!0);if(S==="number")D=cR(f,D,C,s,O),q&&(D=_M(q,D,E));else if(S==="category"&&q){var re=q,Q=D.every(function(F){return re.indexOf(F)>=0});Q&&(D=re)}}return at(at({},v),{},Mn({},C,at(at({},b),{},{axisType:s,domain:D,categoricalDomain:z,duplicateDomain:L,originalDomain:(x=b.domain)!==null&&x!==void 0?x:W,isCategorical:m,layout:d})))},{})},gPe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=UE(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=p.length,v=bJ(d,s),y=-1;return r.reduce(function(x,b){var S=b.type.defaultProps!==void 0?at(at({},b.type.defaultProps),b.props):b.props,j=S[o],E=Oee("number");if(!x[j]){y++;var A;return v?A=eS(0,m):l&&l[j]&&l[j].hasStack?(A=NJ(l[j].stackGroups,c,u),A=cR(f,A,j,s)):(A=_M(E,xJ(p,r.filter(function(P){var O,k,C=o in P.props?P.props[o]:(O=P.type.defaultProps)===null||O===void 0?void 0:O[o],I="hide"in P.props?P.props.hide:(k=P.type.defaultProps)===null||k===void 0?void 0:k.hide;return C===j&&!I}),"number",d),i.defaultProps.allowDataOverflow),A=cR(f,A,j,s)),at(at({},x),{},Mn({},j,at(at({axisType:s},i.defaultProps),{},{hide:!0,orientation:wc(dPe,"".concat(s,".").concat(y%2),null),domain:A,originalDomain:E,isCategorical:v,layout:d})))}return x},{})},vPe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=ll(d,s),m={};return p&&p.length?m=mPe(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=gPe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},yPe=function(e){var n=Uh(e),r=Ef(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ZD(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:VN(n,r)}},Yq=function(e){var n=e.children,r=e.defaultShowTooltip,i=kl(n,xy),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},xPe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Af(n&&n.type);return r&&r.indexOf("Bar")>=0})},Xq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},bPe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,p=r.margin||{},m=kl(f,xy),v=kl(f,Tf),y=Object.keys(c).reduce(function(A,P){var O=c[P],k=O.orientation;return!O.mirror&&!O.hide?at(at({},A),{},Mn({},k,A[k]+O.width)):A},{left:p.left||0,right:p.right||0}),x=Object.keys(o).reduce(function(A,P){var O=o[P],k=O.orientation;return!O.mirror&&!O.hide?at(at({},A),{},Mn({},k,wc(A,"".concat(k))+O.height)):A},{top:p.top||0,bottom:p.bottom||0}),b=at(at({},x),y),S=b.bottom;m&&(b.bottom+=m.props.height||xy.defaultProps.height),v&&n&&(b=nEe(b,i,r,n));var j=u-b.left-b.right,E=d-b.top-b.bottom;return at(at({brushBottom:S},b),{},{width:Math.max(j,0),height:Math.max(E,0)})},wPe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},II=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(b,S){var j=S.graphicalItems,E=S.stackGroups,A=S.offset,P=S.updateId,O=S.dataStartIndex,k=S.dataEndIndex,C=b.barSize,I=b.layout,R=b.barGap,D=b.barCategoryGap,L=b.maxBarSize,z=Xq(I),W=z.numericAxisName,X=z.cateAxisName,q=xPe(j),V=[];return j.forEach(function(Y,re){var Q=UE(b.data,{graphicalItems:[Y],dataStartIndex:O,dataEndIndex:k}),F=Y.type.defaultProps!==void 0?at(at({},Y.type.defaultProps),Y.props):Y.props,G=F.dataKey,te=F.maxBarSize,le=F["".concat(W,"Id")],he=F["".concat(X,"Id")],me={},xe=c.reduce(function(Se,ke){var We=S["".concat(ke.axisType,"Map")],Ke=F["".concat(ke.axisType,"Id")];We&&We[Ke]||ke.axisType==="zAxis"||ng();var qe=We[Ke];return at(at({},Se),{},Mn(Mn({},ke.axisType,qe),"".concat(ke.axisType,"Ticks"),Ef(qe)))},me),de=xe[X],Ne=xe["".concat(X,"Ticks")],Ce=E&&E[le]&&E[le].hasStack&&gEe(Y,E[le].stackGroups),ae=Af(Y.type).indexOf("Bar")>=0,Pe=VN(de,Ne),J=[],ne=q&&eEe({barSize:C,stackGroups:E,totalSize:wPe(xe,X)});if(ae){var Re,dt,et=Yn(te)?L:te,Ve=(Re=(dt=VN(de,Ne,!0))!==null&&dt!==void 0?dt:et)!==null&&Re!==void 0?Re:0;J=tEe({barGap:R,barCategoryGap:D,bandSize:Ve!==Pe?Ve:Pe,sizeList:ne[he],maxBarSize:et}),Ve!==Pe&&(J=J.map(function(Se){return at(at({},Se),{},{position:at(at({},Se.position),{},{offset:Se.position.offset-Ve/2})})}))}var ge=Y&&Y.type&&Y.type.getComposedData;ge&&V.push({props:at(at({},ge(at(at({},xe),{},{displayedData:Q,props:b,dataKey:G,item:Y,bandSize:Pe,barPosition:J,offset:A,stackedData:Ce,layout:I,dataStartIndex:O,dataEndIndex:k}))),{},Mn(Mn(Mn({key:Y.key||"item-".concat(re)},W,xe[W]),X,xe[X]),"animationId",P)),childIndex:rbe(Y,b.children),item:Y})}),V},m=function(b,S){var j=b.props,E=b.dataStartIndex,A=b.dataEndIndex,P=b.updateId;if(!gB({props:j}))return null;var O=j.children,k=j.layout,C=j.stackOffset,I=j.data,R=j.reverseStackOrder,D=Xq(k),L=D.numericAxisName,z=D.cateAxisName,W=ll(O,r),X=hEe(I,W,"".concat(L,"Id"),"".concat(z,"Id"),C,R),q=c.reduce(function(F,G){var te="".concat(G.axisType,"Map");return at(at({},F),{},Mn({},te,vPe(j,at(at({},G),{},{graphicalItems:W,stackGroups:G.axisType===L&&X,dataStartIndex:E,dataEndIndex:A}))))},{}),V=bPe(at(at({},q),{},{props:j,graphicalItems:W}),S?.legendBBox);Object.keys(q).forEach(function(F){q[F]=d(j,q[F],V,F.replace("Map",""),n)});var Y=q["".concat(z,"Map")],re=yPe(Y),Q=p(j,at(at({},q),{},{dataStartIndex:E,dataEndIndex:A,updateId:P,graphicalItems:W,stackGroups:X,offset:V}));return at(at({formattedGraphicalItems:Q,graphicalItems:W,offset:V,stackGroups:X},re),q)},v=(function(x){function b(S){var j,E,A;return ePe(this,b),A=rPe(this,b,[S]),Mn(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Mn(A,"accessibilityManager",new $Oe),Mn(A,"handleLegendBBoxUpdate",function(P){if(P){var O=A.state,k=O.dataStartIndex,C=O.dataEndIndex,I=O.updateId;A.setState(at({legendBBox:P},m({props:A.props,dataStartIndex:k,dataEndIndex:C,updateId:I},at(at({},A.state),{},{legendBBox:P}))))}}),Mn(A,"handleReceiveSyncEvent",function(P,O,k){if(A.props.syncId===P){if(k===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(O)}}),Mn(A,"handleBrushChange",function(P){var O=P.startIndex,k=P.endIndex;if(O!==A.state.dataStartIndex||k!==A.state.dataEndIndex){var C=A.state.updateId;A.setState(function(){return at({dataStartIndex:O,dataEndIndex:k},m({props:A.props,dataStartIndex:O,dataEndIndex:k,updateId:C},A.state))}),A.triggerSyncEvent({dataStartIndex:O,dataEndIndex:k})}}),Mn(A,"handleMouseEnter",function(P){var O=A.getMouseInfo(P);if(O){var k=at(at({},O),{},{isTooltipActive:!0});A.setState(k),A.triggerSyncEvent(k);var C=A.props.onMouseEnter;tr(C)&&C(k,P)}}),Mn(A,"triggeredAfterMouseMove",function(P){var O=A.getMouseInfo(P),k=O?at(at({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(k),A.triggerSyncEvent(k);var C=A.props.onMouseMove;tr(C)&&C(k,P)}),Mn(A,"handleItemMouseEnter",function(P){A.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Mn(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Mn(A,"handleMouseMove",function(P){P.persist(),A.throttleTriggeredAfterMouseMove(P)}),Mn(A,"handleMouseLeave",function(P){A.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};A.setState(O),A.triggerSyncEvent(O);var k=A.props.onMouseLeave;tr(k)&&k(O,P)}),Mn(A,"handleOuterEvent",function(P){var O=nbe(P),k=wc(A.props,"".concat(O));if(O&&tr(k)){var C,I;/.*touch.*/i.test(O)?I=A.getMouseInfo(P.changedTouches[0]):I=A.getMouseInfo(P),k((C=I)!==null&&C!==void 0?C:{},P)}}),Mn(A,"handleClick",function(P){var O=A.getMouseInfo(P);if(O){var k=at(at({},O),{},{isTooltipActive:!0});A.setState(k),A.triggerSyncEvent(k);var C=A.props.onClick;tr(C)&&C(k,P)}}),Mn(A,"handleMouseDown",function(P){var O=A.props.onMouseDown;if(tr(O)){var k=A.getMouseInfo(P);O(k,P)}}),Mn(A,"handleMouseUp",function(P){var O=A.props.onMouseUp;if(tr(O)){var k=A.getMouseInfo(P);O(k,P)}}),Mn(A,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Mn(A,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseDown(P.changedTouches[0])}),Mn(A,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&A.handleMouseUp(P.changedTouches[0])}),Mn(A,"handleDoubleClick",function(P){var O=A.props.onDoubleClick;if(tr(O)){var k=A.getMouseInfo(P);O(k,P)}}),Mn(A,"handleContextMenu",function(P){var O=A.props.onContextMenu;if(tr(O)){var k=A.getMouseInfo(P);O(k,P)}}),Mn(A,"triggerSyncEvent",function(P){A.props.syncId!==void 0&&G5.emit(Y5,A.props.syncId,P,A.eventEmitterSymbol)}),Mn(A,"applySyncEvent",function(P){var O=A.props,k=O.layout,C=O.syncMethod,I=A.state.updateId,R=P.dataStartIndex,D=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)A.setState(at({dataStartIndex:R,dataEndIndex:D},m({props:A.props,dataStartIndex:R,dataEndIndex:D,updateId:I},A.state)));else if(P.activeTooltipIndex!==void 0){var L=P.chartX,z=P.chartY,W=P.activeTooltipIndex,X=A.state,q=X.offset,V=X.tooltipTicks;if(!q)return;if(typeof C=="function")W=C(V,P);else if(C==="value"){W=-1;for(var Y=0;Y<V.length;Y++)if(V[Y].value===P.activeLabel){W=Y;break}}var re=at(at({},q),{},{x:q.left,y:q.top}),Q=Math.min(L,re.x+re.width),F=Math.min(z,re.y+re.height),G=V[W]&&V[W].value,te=fR(A.state,A.props.data,W),le=V[W]?{x:k==="horizontal"?V[W].coordinate:Q,y:k==="horizontal"?F:V[W].coordinate}:Tee;A.setState(at(at({},P),{},{activeLabel:G,activeCoordinate:le,activePayload:te,activeTooltipIndex:W}))}else A.setState(P)}),Mn(A,"renderCursor",function(P){var O,k=A.state,C=k.isTooltipActive,I=k.activeCoordinate,R=k.activePayload,D=k.offset,L=k.activeTooltipIndex,z=k.tooltipAxisBandSize,W=A.getTooltipEventType(),X=(O=P.props.active)!==null&&O!==void 0?O:C,q=A.props.layout,V=P.key||"_recharts-cursor";return ve.createElement(KOe,{key:V,activeCoordinate:I,activePayload:R,activeTooltipIndex:L,chartName:n,element:P,isActive:X,layout:q,offset:D,tooltipAxisBandSize:z,tooltipEventType:W})}),Mn(A,"renderPolarAxis",function(P,O,k){var C=wc(P,"type.axisType"),I=wc(A.state,"".concat(C,"Map")),R=P.type.defaultProps,D=R!==void 0?at(at({},R),P.props):P.props,L=I&&I[D["".concat(C,"Id")]];return N.cloneElement(P,at(at({},L),{},{className:mr(C,L.className),key:P.key||"".concat(O,"-").concat(k),ticks:Ef(L,!0)}))}),Mn(A,"renderPolarGrid",function(P){var O=P.props,k=O.radialLines,C=O.polarAngles,I=O.polarRadius,R=A.state,D=R.radiusAxisMap,L=R.angleAxisMap,z=Uh(D),W=Uh(L),X=W.cx,q=W.cy,V=W.innerRadius,Y=W.outerRadius;return N.cloneElement(P,{polarAngles:Array.isArray(C)?C:Ef(W,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(I)?I:Ef(z,!0).map(function(re){return re.coordinate}),cx:X,cy:q,innerRadius:V,outerRadius:Y,key:P.key||"polar-grid",radialLines:k})}),Mn(A,"renderLegend",function(){var P=A.state.formattedGraphicalItems,O=A.props,k=O.children,C=O.width,I=O.height,R=A.props.margin||{},D=C-(R.left||0)-(R.right||0),L=vJ({children:k,formattedGraphicalItems:P,legendWidth:D,legendContent:u});if(!L)return null;var z=L.item,W=Wq(L,GOe);return N.cloneElement(z,at(at({},W),{},{chartWidth:C,chartHeight:I,margin:R,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Mn(A,"renderTooltip",function(){var P,O=A.props,k=O.children,C=O.accessibilityLayer,I=kl(k,il);if(!I)return null;var R=A.state,D=R.isTooltipActive,L=R.activeCoordinate,z=R.activePayload,W=R.activeLabel,X=R.offset,q=(P=I.props.active)!==null&&P!==void 0?P:D;return N.cloneElement(I,{viewBox:at(at({},X),{},{x:X.left,y:X.top}),active:q,label:W,payload:q?z:[],coordinate:L,accessibilityLayer:C})}),Mn(A,"renderBrush",function(P){var O=A.props,k=O.margin,C=O.data,I=A.state,R=I.offset,D=I.dataStartIndex,L=I.dataEndIndex,z=I.updateId;return N.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Gw(A.handleBrushChange,P.props.onChange),data:C,x:Pt(P.props.x)?P.props.x:R.left,y:Pt(P.props.y)?P.props.y:R.top+R.height+R.brushBottom-(k.bottom||0),width:Pt(P.props.width)?P.props.width:R.width,startIndex:D,endIndex:L,updateId:"brush-".concat(z)})}),Mn(A,"renderReferenceElement",function(P,O,k){if(!P)return null;var C=A,I=C.clipPathId,R=A.state,D=R.xAxisMap,L=R.yAxisMap,z=R.offset,W=P.type.defaultProps||{},X=P.props,q=X.xAxisId,V=q===void 0?W.xAxisId:q,Y=X.yAxisId,re=Y===void 0?W.yAxisId:Y;return N.cloneElement(P,{key:P.key||"".concat(O,"-").concat(k),xAxis:D[V],yAxis:L[re],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:I})}),Mn(A,"renderActivePoints",function(P){var O=P.item,k=P.activePoint,C=P.basePoint,I=P.childIndex,R=P.isRange,D=[],L=O.props.key,z=O.item.type.defaultProps!==void 0?at(at({},O.item.type.defaultProps),O.item.props):O.item.props,W=z.activeDot,X=z.dataKey,q=at(at({index:I,dataKey:X,cx:k.x,cy:k.y,r:4,fill:jI(O.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Jn(W,!1)),bN(W));return D.push(b.renderActiveDot(W,q,"".concat(L,"-activePoint-").concat(I))),C?D.push(b.renderActiveDot(W,at(at({},q),{},{cx:C.x,cy:C.y}),"".concat(L,"-basePoint-").concat(I))):R&&D.push(null),D}),Mn(A,"renderGraphicChild",function(P,O,k){var C=A.filterFormatItem(P,O,k);if(!C)return null;var I=A.getTooltipEventType(),R=A.state,D=R.isTooltipActive,L=R.tooltipAxis,z=R.activeTooltipIndex,W=R.activeLabel,X=A.props.children,q=kl(X,il),V=C.props,Y=V.points,re=V.isRange,Q=V.baseLine,F=C.item.type.defaultProps!==void 0?at(at({},C.item.type.defaultProps),C.item.props):C.item.props,G=F.activeDot,te=F.hide,le=F.activeBar,he=F.activeShape,me=!!(!te&&D&&q&&(G||le||he)),xe={};I!=="axis"&&q&&q.props.trigger==="click"?xe={onClick:Gw(A.handleItemMouseEnter,P.props.onClick)}:I!=="axis"&&(xe={onMouseLeave:Gw(A.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Gw(A.handleItemMouseEnter,P.props.onMouseEnter)});var de=N.cloneElement(P,at(at({},C.props),xe));function Ne(ke){return typeof L.dataKey=="function"?L.dataKey(ke.payload):null}if(me)if(z>=0){var Ce,ae;if(L.dataKey&&!L.allowDuplicatedCategory){var Pe=typeof L.dataKey=="function"?Ne:"payload.".concat(L.dataKey.toString());Ce=xN(Y,Pe,W),ae=re&&Q&&xN(Q,Pe,W)}else Ce=Y?.[z],ae=re&&Q&&Q[z];if(he||le){var J=P.props.activeIndex!==void 0?P.props.activeIndex:z;return[N.cloneElement(P,at(at(at({},C.props),xe),{},{activeIndex:J})),null,null]}if(!Yn(Ce))return[de].concat(Py(A.renderActivePoints({item:C,activePoint:Ce,basePoint:ae,childIndex:z,isRange:re})))}else{var ne,Re=(ne=A.getItemByXY(A.state.activeCoordinate))!==null&&ne!==void 0?ne:{graphicalItem:de},dt=Re.graphicalItem,et=dt.item,Ve=et===void 0?P:et,ge=dt.childIndex,Se=at(at(at({},C.props),xe),{},{activeIndex:ge});return[N.cloneElement(Ve,Se),null,null]}return re?[de,null,null]:[de,null]}),Mn(A,"renderCustomized",function(P,O,k){return N.cloneElement(P,at(at({key:"recharts-customized-".concat(k)},A.props),A.state))}),Mn(A,"renderMap",{CartesianGrid:{handler:Jw,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Jw},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Jw},YAxis:{handler:Jw},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((j=S.id)!==null&&j!==void 0?j:Ng("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=vZ(A.triggeredAfterMouseMove,(E=S.throttleDelay)!==null&&E!==void 0?E:1e3/60),A.state={},A}return aPe(b,x),nPe(b,[{key:"componentDidMount",value:function(){var j,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,E=j.children,A=j.data,P=j.height,O=j.layout,k=kl(E,il);if(k){var C=k.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,R=fR(this.state,A,C,I),D=this.state.tooltipTicks[C].coordinate,L=(this.state.offset.top+P)/2,z=O==="horizontal",W=z?{x:D,y:L}:{y:D,x:L},X=this.state.formattedGraphicalItems.find(function(V){var Y=V.item;return Y.type.name==="Scatter"});X&&(W=at(at({},W),X.props.points[C].tooltipPosition),R=X.props.points[C].tooltipPayload);var q={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:I,activePayload:R,activeCoordinate:W};this.setState(q),this.renderCursor(k),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var A,P;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(j){GP([kl(j.children,il)],[kl(this.props.children,il)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=kl(this.props.children,il);if(j&&typeof j.props.shared=="boolean"){var E=j.props.shared?"axis":"item";return l.indexOf(E)>=0?E:s}return s}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var E=this.container,A=E.getBoundingClientRect(),P=Uwe(A),O={chartX:Math.round(j.pageX-P.left),chartY:Math.round(j.pageY-P.top)},k=A.width/E.offsetWidth||1,C=this.inRange(O.chartX,O.chartY,k);if(!C)return null;var I=this.state,R=I.xAxisMap,D=I.yAxisMap,L=this.getTooltipEventType(),z=Gq(this.state,this.props.data,this.props.layout,C);if(L!=="axis"&&R&&D){var W=Uh(R).scale,X=Uh(D).scale,q=W&&W.invert?W.invert(O.chartX):null,V=X&&X.invert?X.invert(O.chartY):null;return at(at({},O),{},{xValue:q,yValue:V},z)}return z?at(at({},O),z):null}},{key:"inRange",value:function(j,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,O=j/A,k=E/A;if(P==="horizontal"||P==="vertical"){var C=this.state.offset,I=O>=C.left&&O<=C.left+C.width&&k>=C.top&&k<=C.top+C.height;return I?{x:O,y:k}:null}var R=this.state,D=R.angleAxisMap,L=R.radiusAxisMap;if(D&&L){var z=Uh(D);return i9({x:O,y:k},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,E=this.getTooltipEventType(),A=kl(j,il),P={};A&&E==="axis"&&(A.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=bN(this.props,this.handleOuterEvent);return at(at({},O),P)}},{key:"addListener",value:function(){G5.on(Y5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){G5.removeListener(Y5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,E,A){for(var P=this.state.formattedGraphicalItems,O=0,k=P.length;O<k;O++){var C=P[O];if(C.item===j||C.props.key===j.key||E===Af(C.item.type)&&A===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,E=this.state.offset,A=E.left,P=E.top,O=E.height,k=E.width;return ve.createElement("defs",null,ve.createElement("clipPath",{id:j},ve.createElement("rect",{x:A,y:P,height:O,width:k})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(E,A){var P=Vq(A,2),O=P[0],k=P[1];return at(at({},E),{},Mn({},O,k.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(E,A){var P=Vq(A,2),O=P[0],k=P[1];return at(at({},E),{},Mn({},O,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[j])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(j){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[j])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(j){var E=this.state,A=E.formattedGraphicalItems,P=E.activeItem;if(A&&A.length)for(var O=0,k=A.length;O<k;O++){var C=A[O],I=C.props,R=C.item,D=R.type.defaultProps!==void 0?at(at({},R.type.defaultProps),R.props):R.props,L=Af(R.type);if(L==="Bar"){var z=(I.data||[]).find(function(V){return oAe(j,V)});if(z)return{graphicalItem:C,payload:z}}else if(L==="RadialBar"){var W=(I.data||[]).find(function(V){return i9(j,V)});if(W)return{graphicalItem:C,payload:W}}else if(RE(C,P)||DE(C,P)||F0(C,P)){var X=XAe({graphicalItem:C,activeTooltipItem:P,itemData:D.data}),q=D.activeIndex===void 0?X:D.activeIndex;return{graphicalItem:at(at({},C),{},{childIndex:q}),payload:F0(C,P)?D.data[X]:C.props.data[X]}}}return null}},{key:"render",value:function(){var j=this;if(!gB(this))return null;var E=this.props,A=E.children,P=E.className,O=E.width,k=E.height,C=E.style,I=E.compact,R=E.title,D=E.desc,L=Wq(E,YOe),z=Jn(L,!1);if(I)return ve.createElement(Nq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement(XP,Dv({},z,{width:O,height:k,title:R,desc:D}),this.renderClipPath(),yB(A,this.renderMap)));if(this.props.accessibilityLayer){var W,X;z.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,z.role=(X=this.props.role)!==null&&X!==void 0?X:"application",z.onKeyDown=function(V){j.accessibilityManager.keyboardEvent(V)},z.onFocus=function(){j.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return ve.createElement(Nq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement("div",Dv({className:mr("recharts-wrapper",P),style:at({position:"relative",cursor:"default",width:O,height:k},C)},q,{ref:function(Y){j.container=Y}}),ve.createElement(XP,Dv({},z,{width:O,height:k,title:R,desc:D,style:fPe}),this.renderClipPath(),yB(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(N.Component);Mn(v,"displayName",n),Mn(v,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Mn(v,"getDerivedStateFromProps",function(x,b){var S=x.dataKey,j=x.data,E=x.children,A=x.width,P=x.height,O=x.layout,k=x.stackOffset,C=x.margin,I=b.dataStartIndex,R=b.dataEndIndex;if(b.updateId===void 0){var D=Yq(x);return at(at(at({},D),{},{updateId:0},m(at(at({props:x},D),{},{updateId:0}),b)),{},{prevDataKey:S,prevData:j,prevWidth:A,prevHeight:P,prevLayout:O,prevStackOffset:k,prevMargin:C,prevChildren:E})}if(S!==b.prevDataKey||j!==b.prevData||A!==b.prevWidth||P!==b.prevHeight||O!==b.prevLayout||k!==b.prevStackOffset||!Vv(C,b.prevMargin)){var L=Yq(x),z={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},W=at(at({},Gq(b,j,O)),{},{updateId:b.updateId+1}),X=at(at(at({},L),z),W);return at(at(at({},X),m(at({props:x},X),b)),{},{prevDataKey:S,prevData:j,prevWidth:A,prevHeight:P,prevLayout:O,prevStackOffset:k,prevMargin:C,prevChildren:E})}if(!GP(E,b.prevChildren)){var q,V,Y,re,Q=kl(E,xy),F=Q&&(q=(V=Q.props)===null||V===void 0?void 0:V.startIndex)!==null&&q!==void 0?q:I,G=Q&&(Y=(re=Q.props)===null||re===void 0?void 0:re.endIndex)!==null&&Y!==void 0?Y:R,te=F!==I||G!==R,le=!Yn(j),he=le&&!te?b.updateId:b.updateId+1;return at(at({updateId:he},m(at(at({props:x},b),{},{updateId:he,dataStartIndex:F,dataEndIndex:G}),b)),{},{prevChildren:E,dataStartIndex:F,dataEndIndex:G})}return null}),Mn(v,"renderActiveDot",function(x,b,S){var j;return N.isValidElement(x)?j=N.cloneElement(x,b):tr(x)?j=x(b):j=ve.createElement(ME,b),ve.createElement(zr,{className:"recharts-active-dot",key:S},j)});var y=N.forwardRef(function(b,S){return ve.createElement(v,Dv({},b,{ref:S}))});return y.displayName=v.displayName,y},NPe=II({chartName:"LineChart",GraphicalChild:qf,axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:bc}],formatAxisMap:_I}),hR=II({chartName:"BarChart",GraphicalChild:Mo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:bc}],formatAxisMap:_I}),SPe=II({chartName:"ComposedChart",GraphicalChild:[qf,_g,Mo,qE],axisComponents:[{axisType:"xAxis",AxisComp:yd},{axisType:"yAxis",AxisComp:bc},{axisType:"zAxis",AxisComp:zE}],formatAxisMap:_I});function jPe(){const{data:t,isLoading:e}=Wt({queryKey:["/api/dashboard/stats"]}),n=t?[{name:"Pendientes",value:t.tareasPendientes,fill:"hsl(var(--chart-4))"},{name:"En Progreso",value:t.tareasEnProgreso,fill:"hsl(var(--chart-2))"},{name:"Completadas",value:t.tareasCompletadas,fill:"hsl(var(--chart-3))"}]:[];return e?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx(pr,{className:"h-9 w-48 mb-2"}),a.jsx(pr,{className:"h-5 w-96"})]}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((r,i)=>a.jsxs(Xe,{children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(pr,{className:"h-4 w-32"}),a.jsx(pr,{className:"h-4 w-4"})]}),a.jsxs(Qe,{children:[a.jsx(pr,{className:"h-8 w-16 mb-2"}),a.jsx(pr,{className:"h-3 w-24"})]})]},i))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Resumen general de la actividad"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(Xe,{className:"hover-elevate",children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(gt,{className:"text-sm font-medium",children:"Clientes Activos"}),a.jsx(ip,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"text-3xl font-bold",children:t?.clientesActivos||0}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["de ",t?.totalClientes||0," totales"]})]})]}),a.jsxs(Xe,{className:"hover-elevate",children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(gt,{className:"text-sm font-medium",children:"Impuestos Pendientes"}),a.jsx(Ec,{className:"h-4 w-4 text-chart-4"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"text-3xl font-bold text-chart-4",children:t?.impuestosPendientes||0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"requieren atencin"})]})]}),a.jsxs(Xe,{className:"hover-elevate",children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(gt,{className:"text-sm font-medium",children:"Tareas Activas"}),a.jsx(zv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"text-3xl font-bold",children:(t?.tareasPendientes||0)+(t?.tareasEnProgreso||0)}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t?.tareasGenerales||0," generales, ",t?.tareasPersonales||0," personales"]})]})]}),a.jsxs(Xe,{className:"hover-elevate",children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(gt,{className:"text-sm font-medium",children:"Manuales"}),a.jsx(lN,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"text-3xl font-bold",children:t?.manualesPublicados||0}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["de ",t?.manualesTotal||0," publicados"]})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[null,a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(mp,{className:"h-5 w-5"}),"Distribucin de Tareas"]})}),a.jsx(Qe,{children:a.jsx(kb,{width:"100%",height:300,children:a.jsxs(hR,{data:n,children:[a.jsx(Gv,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(yd,{dataKey:"name",className:"text-xs"}),a.jsx(bc,{className:"text-xs"}),a.jsx(il,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),a.jsx(Mo,{dataKey:"value",radius:[8,8,0,0],children:n.map((r,i)=>a.jsx(Kh,{fill:r.fill},`cell-${i}`))})]})})})]})]})]})}var H2={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var EPe=H2.exports,Qq;function _Pe(){return Qq||(Qq=1,(function(t,e){((n,r)=>{t.exports=r()})(EPe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(k){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var I=A(C);I.chunkSize=parseInt(I.chunkSize),C.step||C.chunk||(I.chunkSize=null),this._handle=new y(I),(this._handle.streamer=this)._config=I}).call(this,k),this.parseChunk=function(C,I){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let L=this._config.newline;L||(D=this._config.quoteChar||'"',L=this._handle.guessLineEndings(C,D)),C=[...C.split(L).slice(R)].join(L)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(C))!==void 0&&(C=D),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+C,D=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=D.meta.cursor,R=(this._finished||(this._partialLine=R.substring(C-this._baseIndex),this._baseIndex=C),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:D,workerId:u.WORKER_ID,finished:R});else if(O(this._config.chunk)&&!I){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!R||!O(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(C){O(this._config.error)?this._config.error(C):o&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:C,finished:!1})}}function f(k){var C;(k=k||{}).chunkSize||(k.chunkSize=u.RemoteChunkSize),d.call(this,k),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),s||(C.onload=P(this._chunkLoaded,this),C.onerror=P(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var I,R=this._config.downloadRequestHeaders;for(I in R)C.setRequestHeader(I,R[I])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+D));try{C.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}s&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(I){I=C.statusText||I,this._sendError(new Error(I))}}function p(k){(k=k||{}).chunkSize||(k.chunkSize=u.LocalChunkSize),d.call(this,k);var C,I,R=typeof FileReader<"u";this.stream=function(D){this._input=D,I=D.slice||D.webkitSlice||D.mozSlice,R?((C=new FileReader).onload=P(this._chunkLoaded,this),C.onerror=P(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,L=(this._config.chunkSize&&(L=Math.min(this._start+this._config.chunkSize,this._input.size),D=I.call(D,this._start,L)),C.readAsText(D,this._config.encoding));R||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(C.error)}}function m(k){var C;d.call(this,k=k||{}),this.stream=function(I){return C=I,this._nextChunk()},this._nextChunk=function(){var I,R;if(!this._finished)return I=this._config.chunkSize,C=I?(R=C.substring(0,I),C.substring(I)):(R=C,""),this._finished=!C,this.parseChunk(R)}}function v(k){d.call(this,k=k||{});var C=[],I=!0,R=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):I=!0},this._streamData=P(function(D){try{C.push(typeof D=="string"?D:D.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(L){this._streamError(L)}},this),this._streamError=P(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=P(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(k){var C,I,R,D,L=Math.pow(2,53),z=-L,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,X=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,q=this,V=0,Y=0,re=!1,Q=!1,F=[],G={data:[],errors:[],meta:{}};function te(xe){return k.skipEmptyLines==="greedy"?xe.join("").trim()==="":xe.length===1&&xe[0].length===0}function le(){if(G&&R&&(me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),R=!1),k.skipEmptyLines&&(G.data=G.data.filter(function(Ce){return!te(Ce)})),he()){let Ce=function(ae,Pe){O(k.transformHeader)&&(ae=k.transformHeader(ae,Pe)),F.push(ae)};if(G)if(Array.isArray(G.data[0])){for(var xe=0;he()&&xe<G.data.length;xe++)G.data[xe].forEach(Ce);G.data.splice(0,1)}else G.data.forEach(Ce)}function de(Ce,ae){for(var Pe=k.header?{}:[],J=0;J<Ce.length;J++){var ne=J,Re=Ce[J],Re=((dt,et)=>(Ve=>(k.dynamicTypingFunction&&k.dynamicTyping[Ve]===void 0&&(k.dynamicTyping[Ve]=k.dynamicTypingFunction(Ve)),(k.dynamicTyping[Ve]||k.dynamicTyping)===!0))(dt)?et==="true"||et==="TRUE"||et!=="false"&&et!=="FALSE"&&((Ve=>{if(W.test(Ve)&&(Ve=parseFloat(Ve),z<Ve&&Ve<L))return 1})(et)?parseFloat(et):X.test(et)?new Date(et):et===""?null:et):et)(ne=k.header?J>=F.length?"__parsed_extra":F[J]:ne,Re=k.transform?k.transform(Re,ne):Re);ne==="__parsed_extra"?(Pe[ne]=Pe[ne]||[],Pe[ne].push(Re)):Pe[ne]=Re}return k.header&&(J>F.length?me("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+J,Y+ae):J<F.length&&me("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+J,Y+ae)),Pe}var Ne;G&&(k.header||k.dynamicTyping||k.transform)&&(Ne=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(de),Ne=G.data.length):G.data=de(G.data,0),k.header&&G.meta&&(G.meta.fields=F),Y+=Ne)}function he(){return k.header&&F.length===0}function me(xe,de,Ne,Ce){xe={type:xe,code:de,message:Ne},Ce!==void 0&&(xe.row=Ce),G.errors.push(xe)}O(k.step)&&(D=k.step,k.step=function(xe){G=xe,he()?le():(le(),G.data.length!==0&&(V+=xe.data.length,k.preview&&V>k.preview?I.abort():(G.data=G.data[0],D(G,q))))}),this.parse=function(xe,de,Ne){var Ce=k.quoteChar||'"',Ce=(k.newline||(k.newline=this.guessLineEndings(xe,Ce)),R=!1,k.delimiter?O(k.delimiter)&&(k.delimiter=k.delimiter(xe),G.meta.delimiter=k.delimiter):((Ce=((ae,Pe,J,ne,Re)=>{var dt,et,Ve,ge;Re=Re||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Se=0;Se<Re.length;Se++){for(var ke,We=Re[Se],Ke=0,qe=0,nt=0,_t=(Ve=void 0,new b({comments:ne,delimiter:We,newline:Pe,preview:10}).parse(ae)),xt=0;xt<_t.data.length;xt++)J&&te(_t.data[xt])?nt++:(ke=_t.data[xt].length,qe+=ke,Ve===void 0?Ve=ke:0<ke&&(Ke+=Math.abs(ke-Ve),Ve=ke));0<_t.data.length&&(qe/=_t.data.length-nt),(et===void 0||Ke<=et)&&(ge===void 0||ge<qe)&&1.99<qe&&(et=Ke,dt=We,ge=qe)}return{successful:!!(k.delimiter=dt),bestDelimiter:dt}})(xe,k.newline,k.skipEmptyLines,k.comments,k.delimitersToGuess)).successful?k.delimiter=Ce.bestDelimiter:(R=!0,k.delimiter=u.DefaultDelimiter),G.meta.delimiter=k.delimiter),A(k));return k.preview&&k.header&&Ce.preview++,C=xe,I=new b(Ce),G=I.parse(C,de,Ne),le(),re?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,I.abort(),C=O(k.chunk)?"":C.substring(I.getCharIndex())},this.resume=function(){q.streamer._halted?(re=!1,q.streamer.parseChunk(C,!0)):setTimeout(q.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,I.abort(),G.meta.aborted=!0,O(k.complete)&&k.complete(G),C=""},this.guessLineEndings=function(ae,Ce){ae=ae.substring(0,1048576);var Ce=new RegExp(x(Ce)+"([^]*?)"+x(Ce),"gm"),Ne=(ae=ae.replace(Ce,"")).split("\r"),Ce=ae.split(`
`),ae=1<Ce.length&&Ce[0].length<Ne[0].length;if(Ne.length===1||ae)return`
`;for(var Pe=0,J=0;J<Ne.length;J++)Ne[J][0]===`
`&&Pe++;return Pe>=Ne.length/2?`\r
`:"\r"}}function x(k){return k.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(k){var C=(k=k||{}).delimiter,I=k.newline,R=k.comments,D=k.step,L=k.preview,z=k.fastMode,W=null,X=!1,q=k.quoteChar==null?'"':k.quoteChar,V=q;if(k.escapeChar!==void 0&&(V=k.escapeChar),(typeof C!="string"||-1<u.BAD_DELIMITERS.indexOf(C))&&(C=","),R===C)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<u.BAD_DELIMITERS.indexOf(R))&&(R=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var Y=0,re=!1;this.parse=function(Q,F,G){if(typeof Q!="string")throw new Error("Input must be a string");var te=Q.length,le=C.length,he=I.length,me=R.length,xe=O(D),de=[],Ne=[],Ce=[],ae=Y=0;if(!Q)return Ke();if(z||z!==!1&&Q.indexOf(q)===-1){for(var Pe=Q.split(I),J=0;J<Pe.length;J++){if(Ce=Pe[J],Y+=Ce.length,J!==Pe.length-1)Y+=I.length;else if(G)return Ke();if(!R||Ce.substring(0,me)!==R){if(xe){if(de=[],ge(Ce.split(C)),qe(),re)return Ke()}else ge(Ce.split(C));if(L&&L<=J)return de=de.slice(0,L),Ke(!0)}}return Ke()}for(var ne=Q.indexOf(C,Y),Re=Q.indexOf(I,Y),dt=new RegExp(x(V)+x(q),"g"),et=Q.indexOf(q,Y);;)if(Q[Y]===q)for(et=Y,Y++;;){if((et=Q.indexOf(q,et+1))===-1)return G||Ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:de.length,index:Y}),ke();if(et===te-1)return ke(Q.substring(Y,et).replace(dt,q));if(q===V&&Q[et+1]===V)et++;else if(q===V||et===0||Q[et-1]!==V){ne!==-1&&ne<et+1&&(ne=Q.indexOf(C,et+1));var Ve=Se((Re=Re!==-1&&Re<et+1?Q.indexOf(I,et+1):Re)===-1?ne:Math.min(ne,Re));if(Q.substr(et+1+Ve,le)===C){Ce.push(Q.substring(Y,et).replace(dt,q)),Q[Y=et+1+Ve+le]!==q&&(et=Q.indexOf(q,Y)),ne=Q.indexOf(C,Y),Re=Q.indexOf(I,Y);break}if(Ve=Se(Re),Q.substring(et+1+Ve,et+1+Ve+he)===I){if(Ce.push(Q.substring(Y,et).replace(dt,q)),We(et+1+Ve+he),ne=Q.indexOf(C,Y),et=Q.indexOf(q,Y),xe&&(qe(),re))return Ke();if(L&&de.length>=L)return Ke(!0);break}Ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:de.length,index:Y}),et++}}else if(R&&Ce.length===0&&Q.substring(Y,Y+me)===R){if(Re===-1)return Ke();Y=Re+he,Re=Q.indexOf(I,Y),ne=Q.indexOf(C,Y)}else if(ne!==-1&&(ne<Re||Re===-1))Ce.push(Q.substring(Y,ne)),Y=ne+le,ne=Q.indexOf(C,Y);else{if(Re===-1)break;if(Ce.push(Q.substring(Y,Re)),We(Re+he),xe&&(qe(),re))return Ke();if(L&&de.length>=L)return Ke(!0)}return ke();function ge(nt){de.push(nt),ae=Y}function Se(nt){var _t=0;return _t=nt!==-1&&(nt=Q.substring(et+1,nt))&&nt.trim()===""?nt.length:_t}function ke(nt){return G||(nt===void 0&&(nt=Q.substring(Y)),Ce.push(nt),Y=te,ge(Ce),xe&&qe()),Ke()}function We(nt){Y=nt,ge(Ce),Ce=[],Re=Q.indexOf(I,Y)}function Ke(nt){if(k.header&&!F&&de.length&&!X){var _t=de[0],xt=Object.create(null),Ot=new Set(_t);let Yt=!1;for(let Ct=0;Ct<_t.length;Ct++){let $n=_t[Ct];if(xt[$n=O(k.transformHeader)?k.transformHeader($n,Ct):$n]){let Pn,Ht=xt[$n];for(;Pn=$n+"_"+Ht,Ht++,Ot.has(Pn););Ot.add(Pn),_t[Ct]=Pn,xt[$n]++,Yt=!0,(W=W===null?{}:W)[Pn]=$n}else xt[$n]=1,_t[Ct]=$n;Ot.add($n)}Yt&&console.warn("Duplicate headers found and renamed."),X=!0}return{data:de,errors:Ne,meta:{delimiter:C,linebreak:I,aborted:re,truncated:!!nt,cursor:ae+(F||0),renamedHeaders:W}}}function qe(){D(Ke()),de=[],Ne=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return Y}}function S(k){var C=k.data,I=l[C.workerId],R=!1;if(C.error)I.userError(C.error,C.file);else if(C.results&&C.results.data){var D={abort:function(){R=!0,j(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:E,resume:E};if(O(I.userStep)){for(var L=0;L<C.results.data.length&&(I.userStep({data:C.results.data[L],errors:C.results.errors,meta:C.results.meta},D),!R);L++);delete C.results}else O(I.userChunk)&&(I.userChunk(C.results,D,C.file),delete C.results)}C.finished&&!R&&j(C.workerId,C.results)}function j(k,C){var I=l[k];O(I.userComplete)&&I.userComplete(C),I.terminate(),delete l[k]}function E(){throw new Error("Not implemented.")}function A(k){if(typeof k!="object"||k===null)return k;var C,I=Array.isArray(k)?[]:{};for(C in k)I[C]=A(k[C]);return I}function P(k,C){return function(){k.apply(C,arguments)}}function O(k){return typeof k=="function"}return u.parse=function(k,C){var I=(C=C||{}).dynamicTyping||!1;if(O(I)&&(C.dynamicTypingFunction=I,I={}),C.dynamicTyping=I,C.transform=!!O(C.transform)&&C.transform,!C.worker||!u.WORKERS_SUPPORTED)return I=null,u.NODE_STREAM_INPUT,typeof k=="string"?(k=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(k),I=new(C.download?f:m)(C)):k.readable===!0&&O(k.read)&&O(k.on)?I=new v(C):(r.File&&k instanceof File||k instanceof Object)&&(I=new p(C)),I.stream(k);(I=(()=>{var R;return!!u.WORKERS_SUPPORTED&&(R=(()=>{var D=r.URL||r.webkitURL||null,L=n.toString();return u.BLOB_URL||(u.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",L,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=S,R.id=c++,l[R.id]=R)})()).userStep=C.step,I.userChunk=C.chunk,I.userComplete=C.complete,I.userError=C.error,C.step=O(C.step),C.chunk=O(C.chunk),C.complete=O(C.complete),C.error=O(C.error),delete C.worker,I.postMessage({input:k,config:C,workerId:I.id})},u.unparse=function(k,C){var I=!1,R=!0,D=",",L=`\r
`,z='"',W=z+z,X=!1,q=null,V=!1,Y=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||u.BAD_DELIMITERS.filter(function(F){return C.delimiter.indexOf(F)!==-1}).length||(D=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(I=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(X=C.skipEmptyLines),typeof C.newline=="string"&&(L=C.newline),typeof C.quoteChar=="string"&&(z=C.quoteChar),typeof C.header=="boolean"&&(R=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");q=C.columns}C.escapeChar!==void 0&&(W=C.escapeChar+z),C.escapeFormulae instanceof RegExp?V=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(V=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(z),"g"));if(typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(k)){if(!k.length||Array.isArray(k[0]))return re(null,k,X);if(typeof k[0]=="object")return re(q||Object.keys(k[0]),k,X)}else if(typeof k=="object")return typeof k.data=="string"&&(k.data=JSON.parse(k.data)),Array.isArray(k.data)&&(k.fields||(k.fields=k.meta&&k.meta.fields||q),k.fields||(k.fields=Array.isArray(k.data[0])?k.fields:typeof k.data[0]=="object"?Object.keys(k.data[0]):[]),Array.isArray(k.data[0])||typeof k.data[0]=="object"||(k.data=[k.data])),re(k.fields||[],k.data||[],X);throw new Error("Unable to serialize unrecognized input");function re(F,G,te){var le="",he=(typeof F=="string"&&(F=JSON.parse(F)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(F)&&0<F.length),me=!Array.isArray(G[0]);if(he&&R){for(var xe=0;xe<F.length;xe++)0<xe&&(le+=D),le+=Q(F[xe],xe);0<G.length&&(le+=L)}for(var de=0;de<G.length;de++){var Ne=(he?F:G[de]).length,Ce=!1,ae=he?Object.keys(G[de]).length===0:G[de].length===0;if(te&&!he&&(Ce=te==="greedy"?G[de].join("").trim()==="":G[de].length===1&&G[de][0].length===0),te==="greedy"&&he){for(var Pe=[],J=0;J<Ne;J++){var ne=me?F[J]:J;Pe.push(G[de][ne])}Ce=Pe.join("").trim()===""}if(!Ce){for(var Re=0;Re<Ne;Re++){0<Re&&!ae&&(le+=D);var dt=he&&me?F[Re]:Re;le+=Q(G[de][dt],Re)}de<G.length-1&&(!te||0<Ne&&!ae)&&(le+=L)}}return le}function Q(F,G){var te,le;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(le=!1,V&&typeof F=="string"&&V.test(F)&&(F="'"+F,le=!0),te=F.toString().replace(Y,W),(le=le||I===!0||typeof I=="function"&&I(F,G)||Array.isArray(I)&&I[G]||((he,me)=>{for(var xe=0;xe<me.length;xe++)if(-1<he.indexOf(me[xe]))return!0;return!1})(te,u.BAD_DELIMITERS)||-1<te.indexOf(D)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?z+te+z:te)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=b,u.ParserHandle=y,u.NetworkStreamer=f,u.FileStreamer=p,u.StringStreamer=m,u.ReadableStreamStreamer=v,r.jQuery&&((i=r.jQuery).fn.parse=function(k){var C=k.config||{},I=[];return this.each(function(L){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)I.push({file:this.files[z],inputElem:this,instanceConfig:i.extend({},C)})}),R(),this;function R(){if(I.length===0)O(k.complete)&&k.complete();else{var L,z,W,X,q=I[0];if(O(k.before)){var V=k.before(q.file,q.inputElem);if(typeof V=="object"){if(V.action==="abort")return L="AbortError",z=q.file,W=q.inputElem,X=V.reason,void(O(k.error)&&k.error({name:L},z,W,X));if(V.action==="skip")return void D();typeof V.config=="object"&&(q.instanceConfig=i.extend(q.instanceConfig,V.config))}else if(V==="skip")return void D()}var Y=q.instanceConfig.complete;q.instanceConfig.complete=function(re){O(Y)&&Y(re,q.file,q.inputElem),D()},u.parse(q.file,q.instanceConfig)}}function D(){I.splice(0,1),R()}}),o&&(r.onmessage=function(k){k=k.data,u.WORKER_ID===void 0&&k&&(u.WORKER_ID=k.workerId),typeof k.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(k.input,k.config),finished:!0}):(r.File&&k.input instanceof File||k.input instanceof Object)&&(k=u.parse(k.input,k.config))&&r.postMessage({workerId:u.WORKER_ID,results:k,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,(m.prototype=Object.create(m.prototype)).constructor=m,(v.prototype=Object.create(d.prototype)).constructor=v,u})})(H2)),H2.exports}var CPe=_Pe();const APe=qr(CPe),Do=N.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:ft("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Do.displayName="Textarea";const ns=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:ft("w-full caption-bottom text-sm",t),...e})}));ns.displayName="Table";const rs=N.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:ft("[&_tr]:border-b",t),...e}));rs.displayName="TableHeader";const is=N.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:ft("[&_tr:last-child]:border-0",t),...e}));is.displayName="TableBody";const kPe=N.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:ft("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));kPe.displayName="TableFooter";const gn=N.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:ft("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));gn.displayName="TableRow";const Ze=N.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:ft("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Ze.displayName="TableHead";const He=N.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:ft("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));He.displayName="TableCell";const TPe=N.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:ft("mt-4 text-sm text-muted-foreground",t),...e}));TPe.displayName="TableCaption";const OPe=yg("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ct({className:t,variant:e,...n}){return a.jsx("div",{className:ft(OPe({variant:e}),t),...n})}function V0(t,[e,n]){return Math.min(n,Math.max(e,t))}function HE(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var PPe=[" ","Enter","ArrowUp","ArrowDown"],MPe=[" ","Enter"],ig="Select",[VE,WE,RPe]=Yy(ig),[hx]=Gs(ig,[RPe,Ep]),KE=Ep(),[DPe,Pp]=hx(ig),[IPe,LPe]=hx(ig),Pee=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:m,form:v}=t,y=KE(e),[x,b]=N.useState(null),[S,j]=N.useState(null),[E,A]=N.useState(!1),P=bg(u),[O,k]=Ro({prop:r,defaultProp:i??!1,onChange:s,caller:ig}),[C,I]=Ro({prop:o,defaultProp:l,onChange:c,caller:ig}),R=N.useRef(null),D=x?v||!!x.closest("form"):!0,[L,z]=N.useState(new Set),W=Array.from(L).map(X=>X.props.value).join(";");return a.jsx(Kj,{...y,children:a.jsxs(DPe,{required:m,scope:e,trigger:x,onTriggerChange:b,valueNode:S,onValueNodeChange:j,valueNodeHasChildren:E,onValueNodeHasChildrenChange:A,contentId:Hs(),value:C,onValueChange:I,open:O,onOpenChange:k,dir:P,triggerPointerDownPosRef:R,disabled:p,children:[a.jsx(VE.Provider,{scope:e,children:a.jsx(IPe,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(X=>{z(q=>new Set(q).add(X))},[]),onNativeOptionRemove:N.useCallback(X=>{z(q=>{const V=new Set(q);return V.delete(X),V})},[]),children:n})}),D?a.jsxs(nte,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:C,onChange:X=>I(X.target.value),disabled:p,form:v,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(L)]},W):null]})})};Pee.displayName=ig;var Mee="SelectTrigger",Ree=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=KE(n),o=Pp(Mee,n),l=o.disabled||r,c=_n(e,o.onTriggerChange),u=WE(n),d=N.useRef("touch"),[f,p,m]=ite(y=>{const x=u().filter(j=>!j.disabled),b=x.find(j=>j.value===o.value),S=ste(x,y,b);S!==void 0&&o.onValueChange(S.value)}),v=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return a.jsx(b1,{asChild:!0,...s,children:a.jsx(Lt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":rte(o.value)?"":void 0,...i,ref:c,onClick:bt(i.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&v(y)}),onPointerDown:bt(i.onPointerDown,y=>{d.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:bt(i.onKeyDown,y=>{const x=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(x&&y.key===" ")&&PPe.includes(y.key)&&(v(),y.preventDefault())})})})});Ree.displayName=Mee;var Dee="SelectValue",Iee=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...l}=t,c=Pp(Dee,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=_n(e,c.onValueNodeChange);return ws(()=>{u(d)},[u,d]),a.jsx(Lt.span,{...l,ref:f,style:{pointerEvents:"none"},children:rte(c.value)?a.jsx(a.Fragment,{children:o}):s})});Iee.displayName=Dee;var FPe="SelectIcon",Lee=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return a.jsx(Lt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Lee.displayName=FPe;var BPe="SelectPortal",Fee=t=>a.jsx(Xy,{asChild:!0,...t});Fee.displayName=BPe;var sg="SelectContent",Bee=N.forwardRef((t,e)=>{const n=Pp(sg,t.__scopeSelect),[r,i]=N.useState();if(ws(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?hu.createPortal(a.jsx($ee,{scope:t.__scopeSelect,children:a.jsx(VE.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),s):null}return a.jsx(zee,{...t,ref:e})});Bee.displayName=sg;var su=10,[$ee,Mp]=hx(sg),$Pe="SelectContentImpl",zPe=hp("SelectContent.RemoveScroll"),zee=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x,...b}=t,S=Pp(sg,n),[j,E]=N.useState(null),[A,P]=N.useState(null),O=_n(e,me=>E(me)),[k,C]=N.useState(null),[I,R]=N.useState(null),D=WE(n),[L,z]=N.useState(!1),W=N.useRef(!1);N.useEffect(()=>{if(j)return rE(j)},[j]),tE();const X=N.useCallback(me=>{const[xe,...de]=D().map(ae=>ae.ref.current),[Ne]=de.slice(-1),Ce=document.activeElement;for(const ae of me)if(ae===Ce||(ae?.scrollIntoView({block:"nearest"}),ae===xe&&A&&(A.scrollTop=0),ae===Ne&&A&&(A.scrollTop=A.scrollHeight),ae?.focus(),document.activeElement!==Ce))return},[D,A]),q=N.useCallback(()=>X([k,j]),[X,k,j]);N.useEffect(()=>{L&&q()},[L,q]);const{onOpenChange:V,triggerPointerDownPosRef:Y}=S;N.useEffect(()=>{if(j){let me={x:0,y:0};const xe=Ne=>{me={x:Math.abs(Math.round(Ne.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(Y.current?.y??0))}},de=Ne=>{me.x<=10&&me.y<=10?Ne.preventDefault():j.contains(Ne.target)||V(!1),document.removeEventListener("pointermove",xe),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",de,{capture:!0})}}},[j,V,Y]),N.useEffect(()=>{const me=()=>V(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[V]);const[re,Q]=ite(me=>{const xe=D().filter(Ce=>!Ce.disabled),de=xe.find(Ce=>Ce.ref.current===document.activeElement),Ne=ste(xe,me,de);Ne&&setTimeout(()=>Ne.ref.current.focus())}),F=N.useCallback((me,xe,de)=>{const Ne=!W.current&&!de;(S.value!==void 0&&S.value===xe||Ne)&&(C(me),Ne&&(W.current=!0))},[S.value]),G=N.useCallback(()=>j?.focus(),[j]),te=N.useCallback((me,xe,de)=>{const Ne=!W.current&&!de;(S.value!==void 0&&S.value===xe||Ne)&&R(me)},[S.value]),le=r==="popper"?pR:qee,he=le===pR?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x}:{};return a.jsx($ee,{scope:n,content:j,viewport:A,onViewportChange:P,itemRefCallback:F,selectedItem:k,onItemLeave:G,itemTextRefCallback:te,focusSelectedItem:q,selectedItemText:I,position:r,isPositioned:L,searchRef:re,children:a.jsx(N1,{as:zPe,allowPinchZoom:!0,children:a.jsx(w1,{asChild:!0,trapped:S.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:bt(i,me=>{S.trigger?.focus({preventScroll:!0}),me.preventDefault()}),children:a.jsx(vg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:a.jsx(le,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:me=>me.preventDefault(),...b,...he,onPlaced:()=>z(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:bt(b.onKeyDown,me=>{const xe=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!xe&&me.key.length===1&&Q(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Ne=D().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Ce=me.target,ae=Ne.indexOf(Ce);Ne=Ne.slice(ae+1)}setTimeout(()=>X(Ne)),me.preventDefault()}})})})})})})});zee.displayName=$Pe;var qPe="SelectItemAlignedPosition",qee=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Pp(sg,n),o=Mp(sg,n),[l,c]=N.useState(null),[u,d]=N.useState(null),f=_n(e,O=>d(O)),p=WE(n),m=N.useRef(!1),v=N.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:b,focusSelectedItem:S}=o,j=N.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&y&&x&&b){const O=s.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),C=s.valueNode.getBoundingClientRect(),I=b.getBoundingClientRect();if(s.dir!=="rtl"){const Ce=I.left-k.left,ae=C.left-Ce,Pe=O.left-ae,J=O.width+Pe,ne=Math.max(J,k.width),Re=window.innerWidth-su,dt=V0(ae,[su,Math.max(su,Re-ne)]);l.style.minWidth=J+"px",l.style.left=dt+"px"}else{const Ce=k.right-I.right,ae=window.innerWidth-C.right-Ce,Pe=window.innerWidth-O.right-ae,J=O.width+Pe,ne=Math.max(J,k.width),Re=window.innerWidth-su,dt=V0(ae,[su,Math.max(su,Re-ne)]);l.style.minWidth=J+"px",l.style.right=dt+"px"}const R=p(),D=window.innerHeight-su*2,L=y.scrollHeight,z=window.getComputedStyle(u),W=parseInt(z.borderTopWidth,10),X=parseInt(z.paddingTop,10),q=parseInt(z.borderBottomWidth,10),V=parseInt(z.paddingBottom,10),Y=W+X+L+V+q,re=Math.min(x.offsetHeight*5,Y),Q=window.getComputedStyle(y),F=parseInt(Q.paddingTop,10),G=parseInt(Q.paddingBottom,10),te=O.top+O.height/2-su,le=D-te,he=x.offsetHeight/2,me=x.offsetTop+he,xe=W+X+me,de=Y-xe;if(xe<=te){const Ce=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-y.offsetTop-y.offsetHeight,Pe=Math.max(le,he+(Ce?G:0)+ae+q),J=xe+Pe;l.style.height=J+"px"}else{const Ce=R.length>0&&x===R[0].ref.current;l.style.top="0px";const Pe=Math.max(te,W+y.offsetTop+(Ce?F:0)+he)+de;l.style.height=Pe+"px",y.scrollTop=xe-te+y.offsetTop}l.style.margin=`${su}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=D+"px",r?.(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,l,u,y,x,b,s.dir,r]);ws(()=>j(),[j]);const[E,A]=N.useState();ws(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const P=N.useCallback(O=>{O&&v.current===!0&&(j(),S?.(),v.current=!1)},[j,S]);return a.jsx(HPe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:P,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:a.jsx(Lt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});qee.displayName=qPe;var UPe="SelectPopperPosition",pR=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=su,...s}=t,o=KE(n);return a.jsx(Gj,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pR.displayName=UPe;var[HPe,LI]=hx(sg,{}),mR="SelectViewport",Uee=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Mp(mR,n),o=LI(mR,n),l=_n(e,s.onViewportChange),c=N.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(VE.Slot,{scope:n,children:a.jsx(Lt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:bt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p?.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-su*2,y=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),b=Math.max(y,x);if(b<v){const S=b+m,j=Math.min(v,S),E=S-j;f.style.height=j+"px",f.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Uee.displayName=mR;var Hee="SelectGroup",[VPe,WPe]=hx(Hee),KPe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Hs();return a.jsx(VPe,{scope:n,id:i,children:a.jsx(Lt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});KPe.displayName=Hee;var Vee="SelectLabel",Wee=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=WPe(Vee,n);return a.jsx(Lt.div,{id:i.id,...r,ref:e})});Wee.displayName=Vee;var vS="SelectItem",[GPe,Kee]=hx(vS),Gee=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,l=Pp(vS,n),c=Mp(vS,n),u=l.value===r,[d,f]=N.useState(s??""),[p,m]=N.useState(!1),v=_n(e,S=>c.itemRefCallback?.(S,r,i)),y=Hs(),x=N.useRef("touch"),b=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(GPe,{scope:n,value:r,disabled:i,textId:y,isSelected:u,onItemTextChange:N.useCallback(S=>{f(j=>j||(S?.textContent??"").trim())},[]),children:a.jsx(VE.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:a.jsx(Lt.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:bt(o.onFocus,()=>m(!0)),onBlur:bt(o.onBlur,()=>m(!1)),onClick:bt(o.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:bt(o.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:bt(o.onPointerDown,S=>{x.current=S.pointerType}),onPointerMove:bt(o.onPointerMove,S=>{x.current=S.pointerType,i?c.onItemLeave?.():x.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:bt(o.onPointerLeave,S=>{S.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:bt(o.onKeyDown,S=>{c.searchRef?.current!==""&&S.key===" "||(MPe.includes(S.key)&&b(),S.key===" "&&S.preventDefault())})})})})});Gee.displayName=vS;var yb="SelectItemText",Yee=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Pp(yb,n),l=Mp(yb,n),c=Kee(yb,n),u=LPe(yb,n),[d,f]=N.useState(null),p=_n(e,b=>f(b),c.onItemTextChange,b=>l.itemTextRefCallback?.(b,c.value,c.disabled)),m=d?.textContent,v=N.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=u;return ws(()=>(y(v),()=>x(v)),[y,x,v]),a.jsxs(a.Fragment,{children:[a.jsx(Lt.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?hu.createPortal(s.children,o.valueNode):null]})});Yee.displayName=yb;var Xee="SelectItemIndicator",Qee=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Kee(Xee,n).isSelected?a.jsx(Lt.span,{"aria-hidden":!0,...r,ref:e}):null});Qee.displayName=Xee;var gR="SelectScrollUpButton",Zee=N.forwardRef((t,e)=>{const n=Mp(gR,t.__scopeSelect),r=LI(gR,t.__scopeSelect),[i,s]=N.useState(!1),o=_n(e,r.onScrollButtonChange);return ws(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?a.jsx(ete,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Zee.displayName=gR;var vR="SelectScrollDownButton",Jee=N.forwardRef((t,e)=>{const n=Mp(vR,t.__scopeSelect),r=LI(vR,t.__scopeSelect),[i,s]=N.useState(!1),o=_n(e,r.onScrollButtonChange);return ws(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?a.jsx(ete,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Jee.displayName=vR;var ete=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Mp("SelectScrollButton",n),o=N.useRef(null),l=WE(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),ws(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),a.jsx(Lt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:bt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:bt(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:bt(i.onPointerLeave,()=>{c()})})}),YPe="SelectSeparator",tte=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(Lt.div,{"aria-hidden":!0,...r,ref:e})});tte.displayName=YPe;var yR="SelectArrow",XPe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=KE(n),s=Pp(yR,n),o=Mp(yR,n);return s.open&&o.position==="popper"?a.jsx(Yj,{...i,...r,ref:e}):null});XPe.displayName=yR;var QPe="SelectBubbleInput",nte=N.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=N.useRef(null),s=_n(r,i),o=HE(e);return N.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(Lt.select,{...n,style:{...XK,...n.style},ref:s,defaultValue:e})});nte.displayName=QPe;function rte(t){return t===""||t===void 0}function ite(t){const e=bs(t),n=N.useRef(""),r=N.useRef(0),i=N.useCallback(o=>{const l=n.current+o;e(l),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),s=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function ste(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=ZPe(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function ZPe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var JPe=Pee,ate=Ree,eMe=Iee,tMe=Lee,nMe=Fee,ote=Bee,rMe=Uee,lte=Wee,cte=Gee,iMe=Yee,sMe=Qee,ute=Zee,dte=Jee,fte=tte;const Fn=JPe,Bn=eMe,Rn=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(ate,{ref:r,className:ft("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(tMe,{asChild:!0,children:a.jsx(Bj,{className:"h-4 w-4 opacity-50"})})]}));Rn.displayName=ate.displayName;const hte=N.forwardRef(({className:t,...e},n)=>a.jsx(ute,{ref:n,className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(xfe,{className:"h-4 w-4"})}));hte.displayName=ute.displayName;const pte=N.forwardRef(({className:t,...e},n)=>a.jsx(dte,{ref:n,className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Bj,{className:"h-4 w-4"})}));pte.displayName=dte.displayName;const Dn=N.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>a.jsx(nMe,{children:a.jsxs(ote,{ref:i,className:ft("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(hte,{}),a.jsx(rMe,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(pte,{})]})}));Dn.displayName=ote.displayName;const aMe=N.forwardRef(({className:t,...e},n)=>a.jsx(lte,{ref:n,className:ft("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));aMe.displayName=lte.displayName;const lt=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(cte,{ref:r,className:ft("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(sMe,{children:a.jsx(eD,{className:"h-4 w-4"})})}),a.jsx(iMe,{children:e})]}));lt.displayName=cte.displayName;const oMe=N.forwardRef(({className:t,...e},n)=>a.jsx(fte,{ref:n,className:ft("-mx-1 my-1 h-px bg-muted",t),...e}));oMe.displayName=fte.displayName;var GE="Checkbox",[lMe]=Gs(GE),[cMe,FI]=lMe(GE);function uMe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=t,[p,m]=Ro({prop:n,defaultProp:i??!1,onChange:c,caller:GE}),[v,y]=N.useState(null),[x,b]=N.useState(null),S=N.useRef(!1),j=v?!!o||!!v.closest("form"):!0,E={checked:p,disabled:s,setChecked:m,control:v,setControl:y,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:S,required:u,defaultChecked:op(i)?!1:i,isFormControl:j,bubbleInput:x,setBubbleInput:b};return a.jsx(cMe,{scope:e,...E,children:dMe(f)?f(E):r})}var mte="CheckboxTrigger",gte=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:v}=FI(mte,t),y=_n(i,d),x=N.useRef(c);return N.useEffect(()=>{const b=s?.form;if(b){const S=()=>f(x.current);return b.addEventListener("reset",S),()=>b.removeEventListener("reset",S)}},[s,f]),a.jsx(Lt.button,{type:"button",role:"checkbox","aria-checked":op(c)?"mixed":c,"aria-required":u,"data-state":wte(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:y,onKeyDown:bt(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:bt(n,b=>{f(S=>op(S)?!0:!S),v&&m&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})})});gte.displayName=mte;var BI=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=t;return a.jsx(uMe,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(gte,{...f,ref:e,__scopeCheckbox:n}),p&&a.jsx(bte,{__scopeCheckbox:n})]})})});BI.displayName=GE;var vte="CheckboxIndicator",yte=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=FI(vte,n);return a.jsx(ua,{present:r||op(s.checked)||s.checked===!0,children:a.jsx(Lt.span,{"data-state":wte(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});yte.displayName=vte;var xte="CheckboxBubbleInput",bte=N.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:p,setBubbleInput:m}=FI(xte,t),v=_n(n,m),y=HE(s),x=Wj(r);N.useEffect(()=>{const S=p;if(!S)return;const j=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(j,"checked").set,P=!i.current;if(y!==s&&A){const O=new Event("click",{bubbles:P});S.indeterminate=op(s),A.call(S,op(s)?!1:s),S.dispatchEvent(O)}},[p,y,s,i]);const b=N.useRef(op(s)?!1:s);return a.jsx(Lt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:f,...e,tabIndex:-1,ref:v,style:{...e.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bte.displayName=xte;function dMe(t){return typeof t=="function"}function op(t){return t==="indeterminate"}function wte(t){return op(t)?"indeterminate":t?"checked":"unchecked"}const ki=N.forwardRef(({className:t,...e},n)=>a.jsx(BI,{ref:n,className:ft("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(yte,{className:ft("flex items-center justify-center text-current"),children:a.jsx(eD,{className:"h-4 w-4"})})}));ki.displayName=BI.displayName;var YE="Switch",[fMe]=Gs(YE),[hMe,pMe]=fMe(YE),Nte=N.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[p,m]=N.useState(null),v=_n(e,j=>m(j)),y=N.useRef(!1),x=p?d||!!p.closest("form"):!0,[b,S]=Ro({prop:i,defaultProp:s??!1,onChange:u,caller:YE});return a.jsxs(hMe,{scope:n,checked:b,disabled:l,children:[a.jsx(Lt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":_te(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:bt(t.onClick,j=>{S(E=>!E),x&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),x&&a.jsx(Ete,{control:p,bubbles:!y.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Nte.displayName=YE;var Ste="SwitchThumb",jte=N.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=pMe(Ste,n);return a.jsx(Lt.span,{"data-state":_te(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});jte.displayName=Ste;var mMe="SwitchBubbleInput",Ete=N.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=N.useRef(null),l=_n(o,s),c=HE(n),u=Wj(e);return N.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&m){const v=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(v)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ete.displayName=mMe;function _te(t){return t?"checked":"unchecked"}var Cte=Nte,gMe=jte;const Va=N.forwardRef(({className:t,...e},n)=>a.jsx(Cte,{className:ft("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(gMe,{className:ft("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Va.displayName=Cte.displayName;var Ate="AlertDialog",[vMe]=Gs(Ate,[iX]),Gf=iX(),kte=t=>{const{__scopeAlertDialog:e,...n}=t,r=Gf(e);return a.jsx(sE,{...r,...n,modal:!0})};kte.displayName=Ate;var yMe="AlertDialogTrigger",xMe=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Gf(n);return a.jsx(bX,{...i,...r,ref:e})});xMe.displayName=yMe;var bMe="AlertDialogPortal",Tte=t=>{const{__scopeAlertDialog:e,...n}=t,r=Gf(e);return a.jsx(aE,{...r,...n})};Tte.displayName=bMe;var wMe="AlertDialogOverlay",Ote=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Gf(n);return a.jsx(nx,{...i,...r,ref:e})});Ote.displayName=wMe;var Yv="AlertDialogContent",[NMe,SMe]=vMe(Yv),jMe=WK("AlertDialogContent"),Pte=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Gf(n),o=N.useRef(null),l=_n(e,o),c=N.useRef(null);return a.jsx(kve,{contentName:Yv,titleName:Mte,docsSlug:"alert-dialog",children:a.jsx(NMe,{scope:n,cancelRef:c,children:a.jsxs(rx,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:bt(i.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(jMe,{children:r}),a.jsx(_Me,{contentRef:o})]})})})});Pte.displayName=Yv;var Mte="AlertDialogTitle",Rte=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Gf(n);return a.jsx(S1,{...i,...r,ref:e})});Rte.displayName=Mte;var Dte="AlertDialogDescription",Ite=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Gf(n);return a.jsx(j1,{...i,...r,ref:e})});Ite.displayName=Dte;var EMe="AlertDialogAction",Lte=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Gf(n);return a.jsx(oE,{...i,...r,ref:e})});Lte.displayName=EMe;var Fte="AlertDialogCancel",Bte=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=SMe(Fte,n),s=Gf(n),o=_n(e,i);return a.jsx(oE,{...s,...r,ref:o})});Bte.displayName=Fte;var _Me=({contentRef:t})=>{const e=`\`${Yv}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Yv}\` by passing a \`${Dte}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Yv}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},CMe=kte,AMe=Tte,$te=Ote,zte=Pte,qte=Lte,Ute=Bte,Hte=Rte,Vte=Ite;const Td=CMe,kMe=AMe,Wte=N.forwardRef(({className:t,...e},n)=>a.jsx($te,{className:ft("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Wte.displayName=$te.displayName;const Cu=N.forwardRef(({className:t,...e},n)=>a.jsxs(kMe,{children:[a.jsx(Wte,{}),a.jsx(zte,{ref:n,className:ft("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Cu.displayName=zte.displayName;const Au=({className:t,...e})=>a.jsx("div",{className:ft("flex flex-col space-y-2 text-center sm:text-left",t),...e});Au.displayName="AlertDialogHeader";const Rp=({className:t,...e})=>a.jsx("div",{className:ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Rp.displayName="AlertDialogFooter";const ku=N.forwardRef(({className:t,...e},n)=>a.jsx(Hte,{ref:n,className:ft("text-lg font-semibold",t),...e}));ku.displayName=Hte.displayName;const Tu=N.forwardRef(({className:t,...e},n)=>a.jsx(Vte,{ref:n,className:ft("text-sm text-muted-foreground",t),...e}));Tu.displayName=Vte.displayName;const Ou=N.forwardRef(({className:t,...e},n)=>a.jsx(qte,{ref:n,className:ft(l0(),t),...e}));Ou.displayName=qte.displayName;const Pu=N.forwardRef(({className:t,...e},n)=>a.jsx(Ute,{ref:n,className:ft(l0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Pu.displayName=Ute.displayName;var M1=t=>t.type==="checkbox",km=t=>t instanceof Date,rl=t=>t==null;const Kte=t=>typeof t=="object";var Ws=t=>!rl(t)&&!Array.isArray(t)&&Kte(t)&&!km(t),Gte=t=>Ws(t)&&t.target?M1(t.target)?t.target.checked:t.target.value:t,TMe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Yte=(t,e)=>t.has(TMe(e)),OMe=t=>{const e=t.constructor&&t.constructor.prototype;return Ws(e)&&e.hasOwnProperty("isPrototypeOf")},$I=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ra(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!($I&&(t instanceof Blob||r))&&(n||Ws(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!OMe(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=ra(t[i]));else return t;return e}var XE=t=>/^\w*$/.test(t),vs=t=>t===void 0,zI=t=>Array.isArray(t)?t.filter(Boolean):[],qI=t=>zI(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ut=(t,e,n)=>{if(!e||!Ws(t))return n;const r=(XE(e)?[e]:qI(e)).reduce((i,s)=>rl(i)?i:i[s],t);return vs(r)||r===t?vs(t[e])?n:t[e]:r},Tl=t=>typeof t=="boolean",ti=(t,e,n)=>{let r=-1;const i=XE(e)?[e]:qI(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let c=n;if(r!==o){const u=t[l];c=Ws(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const yS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},uu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},UI=ve.createContext(null);UI.displayName="HookFormContext";const QE=()=>ve.useContext(UI),PMe=t=>{const{children:e,...n}=t;return ve.createElement(UI.Provider,{value:n},e)};var Xte=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==uu.all&&(e._proxyFormState[o]=!r||uu.all),n&&(n[o]=!0),t[o]}});return i};const HI=typeof window<"u"?ve.useLayoutEffect:ve.useEffect;function MMe(t){const e=QE(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,l]=ve.useState(n._formState),c=ve.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return HI(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:u=>{!r&&l({...n._formState,...u})}}),[i,r,s]),ve.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),ve.useMemo(()=>Xte(o,n,c.current,!1),[o,n])}var Rl=t=>typeof t=="string",Qte=(t,e,n,r,i)=>Rl(t)?(r&&e.watch.add(t),Ut(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Ut(n,s))):(r&&(e.watchAll=!0),n),xR=t=>rl(t)||!Kte(t);function Nf(t,e,n=new WeakSet){if(xR(t)||xR(e))return t===e;if(km(t)&&km(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const l=e[s];if(km(o)&&km(l)||Ws(o)&&Ws(l)||Array.isArray(o)&&Array.isArray(l)?!Nf(o,l,n):o!==l)return!1}}return!0}function RMe(t){const e=QE(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:l}=t||{},c=ve.useRef(i),u=ve.useRef(l),d=ve.useRef(void 0);u.current=l;const f=ve.useMemo(()=>n._getWatch(r,c.current),[n,r]),[p,m]=ve.useState(u.current?u.current(f):f);return HI(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!s){const y=Qte(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const x=u.current(y);Nf(x,d.current)||(m(x),d.current=x)}else m(y)}}}),[n,s,r,o]),ve.useEffect(()=>n._removeUnmounted()),p}function DMe(t){const e=QE(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,l=Yte(i._names.array,n),c=ve.useMemo(()=>Ut(i._formValues,n,Ut(i._defaultValues,n,o)),[i,n,o]),u=RMe({control:i,name:n,defaultValue:c,exact:!0}),d=MMe({control:i,name:n,exact:!0}),f=ve.useRef(t),p=ve.useRef(void 0),m=ve.useRef(i.register(n,{...t.rules,value:u,...Tl(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const v=ve.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ut(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ut(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ut(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ut(d.validatingFields,n)},error:{enumerable:!0,get:()=>Ut(d.errors,n)}}),[d,n]),y=ve.useCallback(j=>m.current.onChange({target:{value:Gte(j),name:n},type:yS.CHANGE}),[n]),x=ve.useCallback(()=>m.current.onBlur({target:{value:Ut(i._formValues,n),name:n},type:yS.BLUR}),[n,i._formValues]),b=ve.useCallback(j=>{const E=Ut(i._fields,n);E&&j&&(E._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:A=>j.setCustomValidity(A),reportValidity:()=>j.reportValidity()})},[i._fields,n]),S=ve.useMemo(()=>({name:n,value:u,...Tl(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:y,onBlur:x,ref:b}),[n,r,d.disabled,y,x,b,u]);return ve.useEffect(()=>{const j=i._options.shouldUnregister||s,E=p.current;E&&E!==n&&!l&&i.unregister(E),i.register(n,{...f.current.rules,...Tl(f.current.disabled)?{disabled:f.current.disabled}:{}});const A=(P,O)=>{const k=Ut(i._fields,P);k&&k._f&&(k._f.mount=O)};if(A(n,!0),j){const P=ra(Ut(i._options.defaultValues,n,f.current.defaultValue));ti(i._defaultValues,n,P),vs(Ut(i._formValues,n))&&ti(i._formValues,n,P)}return!l&&i.register(n),p.current=n,()=>{(l?j&&!i._state.action:j)?i.unregister(n):A(n,!1)}},[n,i,l,s]),ve.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),ve.useMemo(()=>({field:S,formState:d,fieldState:v}),[S,d,v])}const IMe=t=>t.render(DMe(t));var Zte=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Lb=t=>Array.isArray(t)?t:[t],Zq=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function Jte(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Ws(i)&&s){const o=Jte(i,s);Ws(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var nl=t=>Ws(t)&&!Object.keys(t).length,VI=t=>t.type==="file",du=t=>typeof t=="function",xS=t=>{if(!$I)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ene=t=>t.type==="select-multiple",WI=t=>t.type==="radio",LMe=t=>WI(t)||M1(t),Q5=t=>xS(t)&&t.isConnected;function FMe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=vs(t)?r++:t[e[r++]];return t}function BMe(t){for(const e in t)if(t.hasOwnProperty(e)&&!vs(t[e]))return!1;return!0}function Bs(t,e){const n=Array.isArray(e)?e:XE(e)?[e]:qI(e),r=n.length===1?t:FMe(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Ws(r)&&nl(r)||Array.isArray(r)&&BMe(r))&&Bs(t,n.slice(0,-1)),t}var $Me=t=>{for(const e in t)if(du(t[e]))return!0;return!1};function tne(t){return Array.isArray(t)||Ws(t)&&!$Me(t)}function bR(t,e={}){for(const n in t)tne(t[n])?(e[n]=Array.isArray(t[n])?[]:{},bR(t[n],e[n])):vs(t[n])||(e[n]=!0);return e}function Nv(t,e,n){n||(n=bR(e));for(const r in t)tne(t[r])?vs(e)||xR(n[r])?n[r]=bR(t[r],Array.isArray(t[r])?[]:{}):Nv(t[r],rl(e)?{}:e[r],n[r]):n[r]=!Nf(t[r],e[r]);return n}const Jq={value:!1,isValid:!1},eU={value:!0,isValid:!0};var nne=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!vs(t[0].attributes.value)?vs(t[0].value)||t[0].value===""?eU:{value:t[0].value,isValid:!0}:eU:Jq}return Jq},rne=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>vs(t)?t:e?t===""?NaN:t&&+t:n&&Rl(t)?new Date(t):r?r(t):t;const tU={isValid:!1,value:null};var ine=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,tU):tU;function nU(t){const e=t.ref;return VI(e)?e.files:WI(e)?ine(t.refs).value:ene(e)?[...e.selectedOptions].map(({value:n})=>n):M1(e)?nne(t.refs).value:rne(vs(e.value)?t.ref.value:e.value,t)}var zMe=(t,e,n,r)=>{const i={};for(const s of t){const o=Ut(e,s);o&&ti(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},bS=t=>t instanceof RegExp,ab=t=>vs(t)?t:bS(t)?t.source:Ws(t)?bS(t.value)?t.value.source:t.value:t,rU=t=>({isOnSubmit:!t||t===uu.onSubmit,isOnBlur:t===uu.onBlur,isOnChange:t===uu.onChange,isOnAll:t===uu.all,isOnTouch:t===uu.onTouched});const iU="AsyncFunction";var qMe=t=>!!t&&!!t.validate&&!!(du(t.validate)&&t.validate.constructor.name===iU||Ws(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===iU)),UMe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),sU=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Fb=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Ut(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Fb(l,e))break}else if(Ws(l)&&Fb(l,e))break}}};function aU(t,e,n){const r=Ut(t,n);if(r||XE(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Ut(e,s),l=Ut(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};i.pop()}return{name:n}}var HMe=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return nl(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||uu.all))},VMe=(t,e,n)=>!t||!e||t===e||Lb(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),WMe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,KMe=(t,e)=>!zI(Ut(t,e)).length&&Bs(t,e),GMe=(t,e,n)=>{const r=Lb(Ut(t,n));return ti(r,"root",e[n]),ti(t,n,r),t};function oU(t,e,n="validate"){if(Rl(t)||Array.isArray(t)&&t.every(Rl)||Tl(t)&&!t)return{type:n,message:Rl(t)?t:"",ref:e}}var cv=t=>Ws(t)&&!bS(t)?t:{value:t,message:""},lU=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:p,pattern:m,validate:v,name:y,valueAsNumber:x,mount:b}=t._f,S=Ut(n,y);if(!b||e.has(y))return{};const j=l?l[0]:o,E=D=>{i&&j.reportValidity&&(j.setCustomValidity(Tl(D)?"":D||""),j.reportValidity())},A={},P=WI(o),O=M1(o),k=P||O,C=(x||VI(o))&&vs(o.value)&&vs(S)||xS(o)&&o.value===""||S===""||Array.isArray(S)&&!S.length,I=Zte.bind(null,y,r,A),R=(D,L,z,W=cf.maxLength,X=cf.minLength)=>{const q=D?L:z;A[y]={type:D?W:X,message:q,ref:o,...I(D?W:X,q)}};if(s?!Array.isArray(S)||!S.length:c&&(!k&&(C||rl(S))||Tl(S)&&!S||O&&!nne(l).isValid||P&&!ine(l).isValid)){const{value:D,message:L}=Rl(c)?{value:!!c,message:c}:cv(c);if(D&&(A[y]={type:cf.required,message:L,ref:j,...I(cf.required,L)},!r))return E(L),A}if(!C&&(!rl(f)||!rl(p))){let D,L;const z=cv(p),W=cv(f);if(!rl(S)&&!isNaN(S)){const X=o.valueAsNumber||S&&+S;rl(z.value)||(D=X>z.value),rl(W.value)||(L=X<W.value)}else{const X=o.valueAsDate||new Date(S),q=re=>new Date(new Date().toDateString()+" "+re),V=o.type=="time",Y=o.type=="week";Rl(z.value)&&S&&(D=V?q(S)>q(z.value):Y?S>z.value:X>new Date(z.value)),Rl(W.value)&&S&&(L=V?q(S)<q(W.value):Y?S<W.value:X<new Date(W.value))}if((D||L)&&(R(!!D,z.message,W.message,cf.max,cf.min),!r))return E(A[y].message),A}if((u||d)&&!C&&(Rl(S)||s&&Array.isArray(S))){const D=cv(u),L=cv(d),z=!rl(D.value)&&S.length>+D.value,W=!rl(L.value)&&S.length<+L.value;if((z||W)&&(R(z,D.message,L.message),!r))return E(A[y].message),A}if(m&&!C&&Rl(S)){const{value:D,message:L}=cv(m);if(bS(D)&&!S.match(D)&&(A[y]={type:cf.pattern,message:L,ref:o,...I(cf.pattern,L)},!r))return E(L),A}if(v){if(du(v)){const D=await v(S,n),L=oU(D,j);if(L&&(A[y]={...L,...I(cf.validate,L.message)},!r))return E(L.message),A}else if(Ws(v)){let D={};for(const L in v){if(!nl(D)&&!r)break;const z=oU(await v[L](S,n),j,L);z&&(D={...z,...I(L,z.message)},E(z.message),r&&(A[y]=D))}if(!nl(D)&&(A[y]={ref:j,...D},!r))return A}}return E(!0),A};const YMe={mode:uu.onSubmit,reValidateMode:uu.onChange,shouldFocusError:!0};function XMe(t={}){let e={...YMe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:du(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Ws(e.defaultValues)||Ws(e.values)?ra(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:ra(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const p={array:Zq(),state:Zq()},m=e.criteriaMode===uu.all,v=ge=>Se=>{clearTimeout(u),u=setTimeout(ge,Se)},y=async ge=>{if(!e.disabled&&(d.isValid||f.isValid||ge)){const Se=e.resolver?nl((await O()).errors):await C(r,!0);Se!==n.isValid&&p.state.next({isValid:Se})}},x=(ge,Se)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ge||Array.from(l.mount)).forEach(ke=>{ke&&(Se?ti(n.validatingFields,ke,Se):Bs(n.validatingFields,ke))}),p.state.next({validatingFields:n.validatingFields,isValidating:!nl(n.validatingFields)}))},b=(ge,Se=[],ke,We,Ke=!0,qe=!0)=>{if(We&&ke&&!e.disabled){if(o.action=!0,qe&&Array.isArray(Ut(r,ge))){const nt=ke(Ut(r,ge),We.argA,We.argB);Ke&&ti(r,ge,nt)}if(qe&&Array.isArray(Ut(n.errors,ge))){const nt=ke(Ut(n.errors,ge),We.argA,We.argB);Ke&&ti(n.errors,ge,nt),KMe(n.errors,ge)}if((d.touchedFields||f.touchedFields)&&qe&&Array.isArray(Ut(n.touchedFields,ge))){const nt=ke(Ut(n.touchedFields,ge),We.argA,We.argB);Ke&&ti(n.touchedFields,ge,nt)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Nv(i,s)),p.state.next({name:ge,isDirty:R(ge,Se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ti(s,ge,Se)},S=(ge,Se)=>{ti(n.errors,ge,Se),p.state.next({errors:n.errors})},j=ge=>{n.errors=ge,p.state.next({errors:n.errors,isValid:!1})},E=(ge,Se,ke,We)=>{const Ke=Ut(r,ge);if(Ke){const qe=Ut(s,ge,vs(ke)?Ut(i,ge):ke);vs(qe)||We&&We.defaultChecked||Se?ti(s,ge,Se?qe:nU(Ke._f)):z(ge,qe),o.mount&&y()}},A=(ge,Se,ke,We,Ke)=>{let qe=!1,nt=!1;const _t={name:ge};if(!e.disabled){if(!ke||We){(d.isDirty||f.isDirty)&&(nt=n.isDirty,n.isDirty=_t.isDirty=R(),qe=nt!==_t.isDirty);const xt=Nf(Ut(i,ge),Se);nt=!!Ut(n.dirtyFields,ge),xt?Bs(n.dirtyFields,ge):ti(n.dirtyFields,ge,!0),_t.dirtyFields=n.dirtyFields,qe=qe||(d.dirtyFields||f.dirtyFields)&&nt!==!xt}if(ke){const xt=Ut(n.touchedFields,ge);xt||(ti(n.touchedFields,ge,ke),_t.touchedFields=n.touchedFields,qe=qe||(d.touchedFields||f.touchedFields)&&xt!==ke)}qe&&Ke&&p.state.next(_t)}return qe?_t:{}},P=(ge,Se,ke,We)=>{const Ke=Ut(n.errors,ge),qe=(d.isValid||f.isValid)&&Tl(Se)&&n.isValid!==Se;if(e.delayError&&ke?(c=v(()=>S(ge,ke)),c(e.delayError)):(clearTimeout(u),c=null,ke?ti(n.errors,ge,ke):Bs(n.errors,ge)),(ke?!Nf(Ke,ke):Ke)||!nl(We)||qe){const nt={...We,...qe&&Tl(Se)?{isValid:Se}:{},errors:n.errors,name:ge};n={...n,...nt},p.state.next(nt)}},O=async ge=>{x(ge,!0);const Se=await e.resolver(s,e.context,zMe(ge||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(ge),Se},k=async ge=>{const{errors:Se}=await O(ge);if(ge)for(const ke of ge){const We=Ut(Se,ke);We?ti(n.errors,ke,We):Bs(n.errors,ke)}else n.errors=Se;return Se},C=async(ge,Se,ke={valid:!0})=>{for(const We in ge){const Ke=ge[We];if(Ke){const{_f:qe,...nt}=Ke;if(qe){const _t=l.array.has(qe.name),xt=Ke._f&&qMe(Ke._f);xt&&d.validatingFields&&x([qe.name],!0);const Ot=await lU(Ke,l.disabled,s,m,e.shouldUseNativeValidation&&!Se,_t);if(xt&&d.validatingFields&&x([qe.name]),Ot[qe.name]&&(ke.valid=!1,Se))break;!Se&&(Ut(Ot,qe.name)?_t?GMe(n.errors,Ot,qe.name):ti(n.errors,qe.name,Ot[qe.name]):Bs(n.errors,qe.name))}!nl(nt)&&await C(nt,Se,ke)}}return ke.valid},I=()=>{for(const ge of l.unMount){const Se=Ut(r,ge);Se&&(Se._f.refs?Se._f.refs.every(ke=>!Q5(ke)):!Q5(Se._f.ref))&&me(ge)}l.unMount=new Set},R=(ge,Se)=>!e.disabled&&(ge&&Se&&ti(s,ge,Se),!Nf(re(),i)),D=(ge,Se,ke)=>Qte(ge,l,{...o.mount?s:vs(Se)?i:Rl(ge)?{[ge]:Se}:Se},ke,Se),L=ge=>zI(Ut(o.mount?s:i,ge,e.shouldUnregister?Ut(i,ge,[]):[])),z=(ge,Se,ke={})=>{const We=Ut(r,ge);let Ke=Se;if(We){const qe=We._f;qe&&(!qe.disabled&&ti(s,ge,rne(Se,qe)),Ke=xS(qe.ref)&&rl(Se)?"":Se,ene(qe.ref)?[...qe.ref.options].forEach(nt=>nt.selected=Ke.includes(nt.value)):qe.refs?M1(qe.ref)?qe.refs.forEach(nt=>{(!nt.defaultChecked||!nt.disabled)&&(Array.isArray(Ke)?nt.checked=!!Ke.find(_t=>_t===nt.value):nt.checked=Ke===nt.value||!!Ke)}):qe.refs.forEach(nt=>nt.checked=nt.value===Ke):VI(qe.ref)?qe.ref.value="":(qe.ref.value=Ke,qe.ref.type||p.state.next({name:ge,values:ra(s)})))}(ke.shouldDirty||ke.shouldTouch)&&A(ge,Ke,ke.shouldTouch,ke.shouldDirty,!0),ke.shouldValidate&&Y(ge)},W=(ge,Se,ke)=>{for(const We in Se){if(!Se.hasOwnProperty(We))return;const Ke=Se[We],qe=ge+"."+We,nt=Ut(r,qe);(l.array.has(ge)||Ws(Ke)||nt&&!nt._f)&&!km(Ke)?W(qe,Ke,ke):z(qe,Ke,ke)}},X=(ge,Se,ke={})=>{const We=Ut(r,ge),Ke=l.array.has(ge),qe=ra(Se);ti(s,ge,qe),Ke?(p.array.next({name:ge,values:ra(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ke.shouldDirty&&p.state.next({name:ge,dirtyFields:Nv(i,s),isDirty:R(ge,qe)})):We&&!We._f&&!rl(qe)?W(ge,qe,ke):z(ge,qe,ke),sU(ge,l)&&p.state.next({...n,name:ge}),p.state.next({name:o.mount?ge:void 0,values:ra(s)})},q=async ge=>{o.mount=!0;const Se=ge.target;let ke=Se.name,We=!0;const Ke=Ut(r,ke),qe=xt=>{We=Number.isNaN(xt)||km(xt)&&isNaN(xt.getTime())||Nf(xt,Ut(s,ke,xt))},nt=rU(e.mode),_t=rU(e.reValidateMode);if(Ke){let xt,Ot;const Yt=Se.type?nU(Ke._f):Gte(ge),Ct=ge.type===yS.BLUR||ge.type===yS.FOCUS_OUT,$n=!UMe(Ke._f)&&!e.resolver&&!Ut(n.errors,ke)&&!Ke._f.deps||WMe(Ct,Ut(n.touchedFields,ke),n.isSubmitted,_t,nt),Pn=sU(ke,l,Ct);ti(s,ke,Yt),Ct?(!Se||!Se.readOnly)&&(Ke._f.onBlur&&Ke._f.onBlur(ge),c&&c(0)):Ke._f.onChange&&Ke._f.onChange(ge);const Ht=A(ke,Yt,Ct),xn=!nl(Ht)||Pn;if(!Ct&&p.state.next({name:ke,type:ge.type,values:ra(s)}),$n)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?Ct&&y():Ct||y()),xn&&p.state.next({name:ke,...Pn?{}:Ht});if(!Ct&&Pn&&p.state.next({...n}),e.resolver){const{errors:ir}=await O([ke]);if(qe(Yt),We){const on=aU(n.errors,r,ke),Cn=aU(ir,r,on.name||ke);xt=Cn.error,ke=Cn.name,Ot=nl(ir)}}else x([ke],!0),xt=(await lU(Ke,l.disabled,s,m,e.shouldUseNativeValidation))[ke],x([ke]),qe(Yt),We&&(xt?Ot=!1:(d.isValid||f.isValid)&&(Ot=await C(r,!0)));We&&(Ke._f.deps&&(!Array.isArray(Ke._f.deps)||Ke._f.deps.length>0)&&Y(Ke._f.deps),P(ke,Ot,xt,Ht))}},V=(ge,Se)=>{if(Ut(n.errors,Se)&&ge.focus)return ge.focus(),1},Y=async(ge,Se={})=>{let ke,We;const Ke=Lb(ge);if(e.resolver){const qe=await k(vs(ge)?ge:Ke);ke=nl(qe),We=ge?!Ke.some(nt=>Ut(qe,nt)):ke}else ge?(We=(await Promise.all(Ke.map(async qe=>{const nt=Ut(r,qe);return await C(nt&&nt._f?{[qe]:nt}:nt)}))).every(Boolean),!(!We&&!n.isValid)&&y()):We=ke=await C(r);return p.state.next({...!Rl(ge)||(d.isValid||f.isValid)&&ke!==n.isValid?{}:{name:ge},...e.resolver||!ge?{isValid:ke}:{},errors:n.errors}),Se.shouldFocus&&!We&&Fb(r,V,ge?Ke:l.mount),We},re=(ge,Se)=>{let ke={...o.mount?s:i};return Se&&(ke=Jte(Se.dirtyFields?n.dirtyFields:n.touchedFields,ke)),vs(ge)?ke:Rl(ge)?Ut(ke,ge):ge.map(We=>Ut(ke,We))},Q=(ge,Se)=>({invalid:!!Ut((Se||n).errors,ge),isDirty:!!Ut((Se||n).dirtyFields,ge),error:Ut((Se||n).errors,ge),isValidating:!!Ut(n.validatingFields,ge),isTouched:!!Ut((Se||n).touchedFields,ge)}),F=ge=>{ge&&Lb(ge).forEach(Se=>Bs(n.errors,Se)),p.state.next({errors:ge?n.errors:{}})},G=(ge,Se,ke)=>{const We=(Ut(r,ge,{_f:{}})._f||{}).ref,Ke=Ut(n.errors,ge)||{},{ref:qe,message:nt,type:_t,...xt}=Ke;ti(n.errors,ge,{...xt,...Se,ref:We}),p.state.next({name:ge,errors:n.errors,isValid:!1}),ke&&ke.shouldFocus&&We&&We.focus&&We.focus()},te=(ge,Se)=>du(ge)?p.state.subscribe({next:ke=>"values"in ke&&ge(D(void 0,Se),ke)}):D(ge,Se,!0),le=ge=>p.state.subscribe({next:Se=>{VMe(ge.name,Se.name,ge.exact)&&HMe(Se,ge.formState||d,dt,ge.reRenderRoot)&&ge.callback({values:{...s},...n,...Se,defaultValues:i})}}).unsubscribe,he=ge=>(o.mount=!0,f={...f,...ge.formState},le({...ge,formState:f})),me=(ge,Se={})=>{for(const ke of ge?Lb(ge):l.mount)l.mount.delete(ke),l.array.delete(ke),Se.keepValue||(Bs(r,ke),Bs(s,ke)),!Se.keepError&&Bs(n.errors,ke),!Se.keepDirty&&Bs(n.dirtyFields,ke),!Se.keepTouched&&Bs(n.touchedFields,ke),!Se.keepIsValidating&&Bs(n.validatingFields,ke),!e.shouldUnregister&&!Se.keepDefaultValue&&Bs(i,ke);p.state.next({values:ra(s)}),p.state.next({...n,...Se.keepDirty?{isDirty:R()}:{}}),!Se.keepIsValid&&y()},xe=({disabled:ge,name:Se})=>{(Tl(ge)&&o.mount||ge||l.disabled.has(Se))&&(ge?l.disabled.add(Se):l.disabled.delete(Se))},de=(ge,Se={})=>{let ke=Ut(r,ge);const We=Tl(Se.disabled)||Tl(e.disabled);return ti(r,ge,{...ke||{},_f:{...ke&&ke._f?ke._f:{ref:{name:ge}},name:ge,mount:!0,...Se}}),l.mount.add(ge),ke?xe({disabled:Tl(Se.disabled)?Se.disabled:e.disabled,name:ge}):E(ge,!0,Se.value),{...We?{disabled:Se.disabled||e.disabled}:{},...e.progressive?{required:!!Se.required,min:ab(Se.min),max:ab(Se.max),minLength:ab(Se.minLength),maxLength:ab(Se.maxLength),pattern:ab(Se.pattern)}:{},name:ge,onChange:q,onBlur:q,ref:Ke=>{if(Ke){de(ge,Se),ke=Ut(r,ge);const qe=vs(Ke.value)&&Ke.querySelectorAll&&Ke.querySelectorAll("input,select,textarea")[0]||Ke,nt=LMe(qe),_t=ke._f.refs||[];if(nt?_t.find(xt=>xt===qe):qe===ke._f.ref)return;ti(r,ge,{_f:{...ke._f,...nt?{refs:[..._t.filter(Q5),qe,...Array.isArray(Ut(i,ge))?[{}]:[]],ref:{type:qe.type,name:ge}}:{ref:qe}}}),E(ge,!1,void 0,qe)}else ke=Ut(r,ge,{}),ke._f&&(ke._f.mount=!1),(e.shouldUnregister||Se.shouldUnregister)&&!(Yte(l.array,ge)&&o.action)&&l.unMount.add(ge)}}},Ne=()=>e.shouldFocusError&&Fb(r,V,l.mount),Ce=ge=>{Tl(ge)&&(p.state.next({disabled:ge}),Fb(r,(Se,ke)=>{const We=Ut(r,ke);We&&(Se.disabled=We._f.disabled||ge,Array.isArray(We._f.refs)&&We._f.refs.forEach(Ke=>{Ke.disabled=We._f.disabled||ge}))},0,!1))},ae=(ge,Se)=>async ke=>{let We;ke&&(ke.preventDefault&&ke.preventDefault(),ke.persist&&ke.persist());let Ke=ra(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:qe,values:nt}=await O();n.errors=qe,Ke=ra(nt)}else await C(r);if(l.disabled.size)for(const qe of l.disabled)Bs(Ke,qe);if(Bs(n.errors,"root"),nl(n.errors)){p.state.next({errors:{}});try{await ge(Ke,ke)}catch(qe){We=qe}}else Se&&await Se({...n.errors},ke),Ne(),setTimeout(Ne);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:nl(n.errors)&&!We,submitCount:n.submitCount+1,errors:n.errors}),We)throw We},Pe=(ge,Se={})=>{Ut(r,ge)&&(vs(Se.defaultValue)?X(ge,ra(Ut(i,ge))):(X(ge,Se.defaultValue),ti(i,ge,ra(Se.defaultValue))),Se.keepTouched||Bs(n.touchedFields,ge),Se.keepDirty||(Bs(n.dirtyFields,ge),n.isDirty=Se.defaultValue?R(ge,ra(Ut(i,ge))):R()),Se.keepError||(Bs(n.errors,ge),d.isValid&&y()),p.state.next({...n}))},J=(ge,Se={})=>{const ke=ge?ra(ge):i,We=ra(ke),Ke=nl(ge),qe=Ke?i:We;if(Se.keepDefaultValues||(i=ke),!Se.keepValues){if(Se.keepDirtyValues){const nt=new Set([...l.mount,...Object.keys(Nv(i,s))]);for(const _t of Array.from(nt))Ut(n.dirtyFields,_t)?ti(qe,_t,Ut(s,_t)):X(_t,Ut(qe,_t))}else{if($I&&vs(ge))for(const nt of l.mount){const _t=Ut(r,nt);if(_t&&_t._f){const xt=Array.isArray(_t._f.refs)?_t._f.refs[0]:_t._f.ref;if(xS(xt)){const Ot=xt.closest("form");if(Ot){Ot.reset();break}}}}if(Se.keepFieldsRef)for(const nt of l.mount)X(nt,Ut(qe,nt));else r={}}s=e.shouldUnregister?Se.keepDefaultValues?ra(i):{}:ra(qe),p.array.next({values:{...qe}}),p.state.next({values:{...qe}})}l={mount:Se.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Se.keepIsValid||!!Se.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:Se.keepSubmitCount?n.submitCount:0,isDirty:Ke?!1:Se.keepDirty?n.isDirty:!!(Se.keepDefaultValues&&!Nf(ge,i)),isSubmitted:Se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ke?{}:Se.keepDirtyValues?Se.keepDefaultValues&&s?Nv(i,s):n.dirtyFields:Se.keepDefaultValues&&ge?Nv(i,ge):Se.keepDirty?n.dirtyFields:{},touchedFields:Se.keepTouched?n.touchedFields:{},errors:Se.keepErrors?n.errors:{},isSubmitSuccessful:Se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},ne=(ge,Se)=>J(du(ge)?ge(s):ge,Se),Re=(ge,Se={})=>{const ke=Ut(r,ge),We=ke&&ke._f;if(We){const Ke=We.refs?We.refs[0]:We.ref;Ke.focus&&(Ke.focus(),Se.shouldSelect&&du(Ke.select)&&Ke.select())}},dt=ge=>{n={...n,...ge}},Ve={control:{register:de,unregister:me,getFieldState:Q,handleSubmit:ae,setError:G,_subscribe:le,_runSchema:O,_focusError:Ne,_getWatch:D,_getDirty:R,_setValid:y,_setFieldArray:b,_setDisabledField:xe,_setErrors:j,_getFieldArray:L,_reset:J,_resetDefaultValues:()=>du(e.defaultValues)&&e.defaultValues().then(ge=>{ne(ge,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:Ce,_subjects:p,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(ge){o=ge},get _defaultValues(){return i},get _names(){return l},set _names(ge){l=ge},get _formState(){return n},get _options(){return e},set _options(ge){e={...e,...ge}}},subscribe:he,trigger:Y,register:de,handleSubmit:ae,watch:te,setValue:X,getValues:re,reset:ne,resetField:Pe,clearErrors:F,unregister:me,setError:G,setFocus:Re,getFieldState:Q};return{...Ve,formControl:Ve}}function KI(t={}){const e=ve.useRef(void 0),n=ve.useRef(void 0),[r,i]=ve.useState({isDirty:!1,isValidating:!1,isLoading:du(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:du(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!du(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=XMe(t);e.current={...l,formState:r}}const s=e.current.control;return s._options=t,HI(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),ve.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),ve.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),ve.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),ve.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),ve.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),ve.useEffect(()=>{t.values&&!Nf(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),ve.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=Xte(r,s),e.current}const cU=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ut(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},sne=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?cU(r.ref,n,t):r.refs&&r.refs.forEach(i=>cU(i,n,t))}},QMe=(t,e)=>{e.shouldUseNativeValidation&&sne(t,e);const n={};for(const r in t){const i=Ut(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(ZMe(e.names||Object.keys(t),r)){const o=Object.assign({},Ut(n,r));ti(o,"root",s),ti(n,r,o)}else ti(n,r,s)}return n},ZMe=(t,e)=>t.some(n=>n.startsWith(e+"."));var JMe=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=Zte(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},eRe=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve((function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&sne({},s),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:QMe(JMe(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},Fr;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Fr||(Fr={}));var uU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(uU||(uU={}));const un=Fr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fh=t=>{switch(typeof t){case"undefined":return un.undefined;case"string":return un.string;case"number":return Number.isNaN(t)?un.nan:un.number;case"boolean":return un.boolean;case"function":return un.function;case"bigint":return un.bigint;case"symbol":return un.symbol;case"object":return Array.isArray(t)?un.array:t===null?un.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?un.promise:typeof Map<"u"&&t instanceof Map?un.map:typeof Set<"u"&&t instanceof Set?un.set:typeof Date<"u"&&t instanceof Date?un.date:un.object;default:return un.unknown}},Tt=Fr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Uf extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Uf))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Fr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Uf.create=t=>new Uf(t);const wR=(t,e)=>{let n;switch(t.code){case Tt.invalid_type:t.received===un.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Tt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Fr.jsonStringifyReplacer)}`;break;case Tt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Fr.joinValues(t.keys,", ")}`;break;case Tt.invalid_union:n="Invalid input";break;case Tt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Fr.joinValues(t.options)}`;break;case Tt.invalid_enum_value:n=`Invalid enum value. Expected ${Fr.joinValues(t.options)}, received '${t.received}'`;break;case Tt.invalid_arguments:n="Invalid function arguments";break;case Tt.invalid_return_type:n="Invalid function return type";break;case Tt.invalid_date:n="Invalid date";break;case Tt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Fr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Tt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Tt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Tt.custom:n="Invalid input";break;case Tt.invalid_intersection_types:n="Intersection results could not be merged";break;case Tt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Tt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Fr.assertNever(t)}return{message:n}};let tRe=wR;function nRe(){return tRe}const rRe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}};function Gt(t,e){const n=nRe(),r=rRe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===wR?void 0:wR].filter(i=>!!i)});t.common.issues.push(r)}class $l{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Zn;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return $l.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Zn;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Zn=Object.freeze({status:"aborted"}),xb=t=>({status:"dirty",value:t}),Oc=t=>({status:"valid",value:t}),dU=t=>t.status==="aborted",fU=t=>t.status==="dirty",My=t=>t.status==="valid",wS=t=>typeof Promise<"u"&&t instanceof Promise;var pn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pn||(pn={}));class xp{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hU=(t,e)=>{if(My(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Uf(t.common.issues);return this._error=n,this._error}}};function gr(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class Ir{get description(){return this._def.description}_getType(e){return Fh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $l,ctx:{common:e.parent.common,data:e.data,parsedType:Fh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wS(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fh(e)},i=this._parseSync({data:e,path:r.path,parent:r});return hU(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fh(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return My(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>My(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fh(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(wS(i)?i:Promise.resolve(i));return hU(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:Tt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Dy({schema:this,typeName:er.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return lp.create(this,this._def)}nullable(){return Iy.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xd.create(this)}promise(){return ES.create(this,this._def)}or(e){return SS.create([this,e],this._def)}and(e){return jS.create(this,e,this._def)}transform(e){return new Dy({...gr(this._def),schema:this,typeName:er.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new jR({...gr(this._def),innerType:this,defaultValue:n,typeName:er.ZodDefault})}brand(){return new _Re({typeName:er.ZodBranded,type:this,...gr(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ER({...gr(this._def),innerType:this,catchValue:n,typeName:er.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return GI.create(this,e)}readonly(){return _R.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const iRe=/^c[^\s-]{8,}$/i,sRe=/^[0-9a-z]+$/,aRe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oRe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lRe=/^[a-z0-9_-]{21}$/i,cRe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,uRe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dRe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fRe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Z5;const hRe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pRe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mRe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,gRe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vRe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yRe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ane="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xRe=new RegExp(`^${ane}$`);function one(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function bRe(t){return new RegExp(`^${one(t)}$`)}function wRe(t){let e=`${ane}T${one(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function NRe(t,e){return!!((e==="v4"||!e)&&hRe.test(t)||(e==="v6"||!e)&&mRe.test(t))}function SRe(t,e){if(!cRe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function jRe(t,e){return!!((e==="v4"||!e)&&pRe.test(t)||(e==="v6"||!e)&&gRe.test(t))}class Qh extends Ir{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==un.string){const s=this._getOrReturnCtx(e);return Gt(s,{code:Tt.invalid_type,expected:un.string,received:s.parsedType}),Zn}const r=new $l;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Gt(i,{code:Tt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Gt(i,{code:Tt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")dRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"email",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Z5||(Z5=new RegExp(fRe,"u")),Z5.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"emoji",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")oRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"uuid",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")lRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"nanoid",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")iRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"cuid",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")sRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"cuid2",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")aRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"ulid",code:Tt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Gt(i,{validation:"url",code:Tt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"regex",code:Tt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?wRe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?xRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?bRe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?uRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"duration",code:Tt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?NRe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"ip",code:Tt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?SRe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"jwt",code:Tt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?jRe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"cidr",code:Tt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?vRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"base64",code:Tt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?yRe.test(e.data)||(i=this._getOrReturnCtx(e,i),Gt(i,{validation:"base64url",code:Tt.invalid_string,message:s.message}),r.dirty()):Fr.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Tt.invalid_string,...pn.errToObj(r)})}_addCheck(e){return new Qh({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pn.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...pn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...pn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...pn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...pn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...pn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...pn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...pn.errToObj(n)})}nonempty(e){return this.min(1,pn.errToObj(e))}trim(){return new Qh({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qh({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qh({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Qh.create=t=>new Qh({checks:[],typeName:er.ZodString,coerce:t?.coerce??!1,...gr(t)});function ERe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class W0 extends Ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==un.number){const s=this._getOrReturnCtx(e);return Gt(s,{code:Tt.invalid_type,expected:un.number,received:s.parsedType}),Zn}let r;const i=new $l;for(const s of this._def.checks)s.kind==="int"?Fr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?ERe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.not_finite,message:s.message}),i.dirty()):Fr.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,pn.toString(n))}setLimit(e,n,r,i){return new W0({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:pn.toString(i)}]})}_addCheck(e){return new W0({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:pn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:pn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Fr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}W0.create=t=>new W0({checks:[],typeName:er.ZodNumber,coerce:t?.coerce||!1,...gr(t)});class K0 extends Ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==un.bigint)return this._getInvalidInput(e);let r;const i=new $l;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Gt(r,{code:Tt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Fr.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Gt(n,{code:Tt.invalid_type,expected:un.bigint,received:n.parsedType}),Zn}gte(e,n){return this.setLimit("min",e,!0,pn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,pn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,pn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,pn.toString(n))}setLimit(e,n,r,i){return new K0({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:pn.toString(i)}]})}_addCheck(e){return new K0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:pn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}K0.create=t=>new K0({checks:[],typeName:er.ZodBigInt,coerce:t?.coerce??!1,...gr(t)});class NR extends Ir{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==un.boolean){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.boolean,received:r.parsedType}),Zn}return Oc(e.data)}}NR.create=t=>new NR({typeName:er.ZodBoolean,coerce:t?.coerce||!1,...gr(t)});class NS extends Ir{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==un.date){const s=this._getOrReturnCtx(e);return Gt(s,{code:Tt.invalid_type,expected:un.date,received:s.parsedType}),Zn}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Gt(s,{code:Tt.invalid_date}),Zn}const r=new $l;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Gt(i,{code:Tt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Fr.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new NS({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:pn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:pn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}NS.create=t=>new NS({checks:[],coerce:t?.coerce||!1,typeName:er.ZodDate,...gr(t)});class pU extends Ir{_parse(e){if(this._getType(e)!==un.symbol){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.symbol,received:r.parsedType}),Zn}return Oc(e.data)}}pU.create=t=>new pU({typeName:er.ZodSymbol,...gr(t)});class mU extends Ir{_parse(e){if(this._getType(e)!==un.undefined){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.undefined,received:r.parsedType}),Zn}return Oc(e.data)}}mU.create=t=>new mU({typeName:er.ZodUndefined,...gr(t)});class gU extends Ir{_parse(e){if(this._getType(e)!==un.null){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.null,received:r.parsedType}),Zn}return Oc(e.data)}}gU.create=t=>new gU({typeName:er.ZodNull,...gr(t)});class vU extends Ir{constructor(){super(...arguments),this._any=!0}_parse(e){return Oc(e.data)}}vU.create=t=>new vU({typeName:er.ZodAny,...gr(t)});class yU extends Ir{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Oc(e.data)}}yU.create=t=>new yU({typeName:er.ZodUnknown,...gr(t)});class bp extends Ir{_parse(e){const n=this._getOrReturnCtx(e);return Gt(n,{code:Tt.invalid_type,expected:un.never,received:n.parsedType}),Zn}}bp.create=t=>new bp({typeName:er.ZodNever,...gr(t)});class xU extends Ir{_parse(e){if(this._getType(e)!==un.undefined){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.void,received:r.parsedType}),Zn}return Oc(e.data)}}xU.create=t=>new xU({typeName:er.ZodVoid,...gr(t)});class xd extends Ir{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==un.array)return Gt(n,{code:Tt.invalid_type,expected:un.array,received:n.parsedType}),Zn;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Gt(n,{code:o?Tt.too_big:Tt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Gt(n,{code:Tt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Gt(n,{code:Tt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new xp(n,o,n.path,l)))).then(o=>$l.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new xp(n,o,n.path,l)));return $l.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new xd({...this._def,minLength:{value:e,message:pn.toString(n)}})}max(e,n){return new xd({...this._def,maxLength:{value:e,message:pn.toString(n)}})}length(e,n){return new xd({...this._def,exactLength:{value:e,message:pn.toString(n)}})}nonempty(e){return this.min(1,e)}}xd.create=(t,e)=>new xd({type:t,minLength:null,maxLength:null,exactLength:null,typeName:er.ZodArray,...gr(e)});function Sv(t){if(t instanceof zs){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=lp.create(Sv(r))}return new zs({...t._def,shape:()=>e})}else return t instanceof xd?new xd({...t._def,type:Sv(t.element)}):t instanceof lp?lp.create(Sv(t.unwrap())):t instanceof Iy?Iy.create(Sv(t.unwrap())):t instanceof ag?ag.create(t.items.map(e=>Sv(e))):t}class zs extends Ir{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Fr.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==un.object){const u=this._getOrReturnCtx(e);return Gt(u,{code:Tt.invalid_type,expected:un.object,received:u.parsedType}),Zn}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof bp&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new xp(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof bp){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(Gt(i,{code:Tt.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new xp(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,p=await d.value;u.push({key:f,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>$l.mergeObjectSync(r,u)):$l.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return pn.errToObj,new zs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:pn.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new zs({...this._def,unknownKeys:"strip"})}passthrough(){return new zs({...this._def,unknownKeys:"passthrough"})}extend(e){return new zs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:er.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zs({...this._def,catchall:e})}pick(e){const n={};for(const r of Fr.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new zs({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Fr.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new zs({...this._def,shape:()=>n})}deepPartial(){return Sv(this)}partial(e){const n={};for(const r of Fr.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new zs({...this._def,shape:()=>n})}required(e){const n={};for(const r of Fr.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof lp;)s=s._def.innerType;n[r]=s}return new zs({...this._def,shape:()=>n})}keyof(){return lne(Fr.objectKeys(this.shape))}}zs.create=(t,e)=>new zs({shape:()=>t,unknownKeys:"strip",catchall:bp.create(),typeName:er.ZodObject,...gr(e)});zs.strictCreate=(t,e)=>new zs({shape:()=>t,unknownKeys:"strict",catchall:bp.create(),typeName:er.ZodObject,...gr(e)});zs.lazycreate=(t,e)=>new zs({shape:t,unknownKeys:"strip",catchall:bp.create(),typeName:er.ZodObject,...gr(e)});class SS extends Ir{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Uf(l.ctx.common.issues));return Gt(n,{code:Tt.invalid_union,unionErrors:o}),Zn}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new Uf(c));return Gt(n,{code:Tt.invalid_union,unionErrors:l}),Zn}}get options(){return this._def.options}}SS.create=(t,e)=>new SS({options:t,typeName:er.ZodUnion,...gr(e)});function SR(t,e){const n=Fh(t),r=Fh(e);if(t===e)return{valid:!0,data:t};if(n===un.object&&r===un.object){const i=Fr.objectKeys(e),s=Fr.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const c=SR(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===un.array&&r===un.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],c=SR(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===un.date&&r===un.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jS extends Ir{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(dU(s)||dU(o))return Zn;const l=SR(s.value,o.value);return l.valid?((fU(s)||fU(o))&&n.dirty(),{status:n.value,value:l.data}):(Gt(r,{code:Tt.invalid_intersection_types}),Zn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}jS.create=(t,e,n)=>new jS({left:t,right:e,typeName:er.ZodIntersection,...gr(n)});class ag extends Ir{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==un.array)return Gt(r,{code:Tt.invalid_type,expected:un.array,received:r.parsedType}),Zn;if(r.data.length<this._def.items.length)return Gt(r,{code:Tt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Zn;!this._def.rest&&r.data.length>this._def.items.length&&(Gt(r,{code:Tt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new xp(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>$l.mergeArray(n,o)):$l.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ag({...this._def,rest:e})}}ag.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ag({items:t,typeName:er.ZodTuple,rest:null,...gr(e)})};class bU extends Ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==un.map)return Gt(r,{code:Tt.invalid_type,expected:un.map,received:r.parsedType}),Zn;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new xp(r,l,r.path,[u,"key"])),value:s._parse(new xp(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Zn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Zn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}bU.create=(t,e,n)=>new bU({valueType:e,keyType:t,typeName:er.ZodMap,...gr(n)});class G0 extends Ir{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==un.set)return Gt(r,{code:Tt.invalid_type,expected:un.set,received:r.parsedType}),Zn;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Gt(r,{code:Tt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Gt(r,{code:Tt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Zn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>s._parse(new xp(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new G0({...this._def,minSize:{value:e,message:pn.toString(n)}})}max(e,n){return new G0({...this._def,maxSize:{value:e,message:pn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}G0.create=(t,e)=>new G0({valueType:t,minSize:null,maxSize:null,typeName:er.ZodSet,...gr(e)});class wU extends Ir{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}wU.create=(t,e)=>new wU({getter:t,typeName:er.ZodLazy,...gr(e)});class NU extends Ir{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Gt(n,{received:n.data,code:Tt.invalid_literal,expected:this._def.value}),Zn}return{status:"valid",value:e.data}}get value(){return this._def.value}}NU.create=(t,e)=>new NU({value:t,typeName:er.ZodLiteral,...gr(e)});function lne(t,e){return new Ry({values:t,typeName:er.ZodEnum,...gr(e)})}class Ry extends Ir{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Gt(n,{expected:Fr.joinValues(r),received:n.parsedType,code:Tt.invalid_type}),Zn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Gt(n,{received:n.data,code:Tt.invalid_enum_value,options:r}),Zn}return Oc(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Ry.create(e,{...this._def,...n})}exclude(e,n=this._def){return Ry.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ry.create=lne;class SU extends Ir{_parse(e){const n=Fr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==un.string&&r.parsedType!==un.number){const i=Fr.objectValues(n);return Gt(r,{expected:Fr.joinValues(i),received:r.parsedType,code:Tt.invalid_type}),Zn}if(this._cache||(this._cache=new Set(Fr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Fr.objectValues(n);return Gt(r,{received:r.data,code:Tt.invalid_enum_value,options:i}),Zn}return Oc(e.data)}get enum(){return this._def.values}}SU.create=(t,e)=>new SU({values:t,typeName:er.ZodNativeEnum,...gr(e)});class ES extends Ir{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==un.promise&&n.common.async===!1)return Gt(n,{code:Tt.invalid_type,expected:un.promise,received:n.parsedType}),Zn;const r=n.parsedType===un.promise?n.data:Promise.resolve(n.data);return Oc(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ES.create=(t,e)=>new ES({type:t,typeName:er.ZodPromise,...gr(e)});class Dy extends Ir{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===er.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Gt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Zn;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Zn:c.status==="dirty"||n.value==="dirty"?xb(c.value):c});{if(n.value==="aborted")return Zn;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Zn:l.status==="dirty"||n.value==="dirty"?xb(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Zn:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Zn:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!My(o))return Zn;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>My(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):Zn);Fr.assertNever(i)}}Dy.create=(t,e,n)=>new Dy({schema:t,typeName:er.ZodEffects,effect:e,...gr(n)});Dy.createWithPreprocess=(t,e,n)=>new Dy({schema:e,effect:{type:"preprocess",transform:t},typeName:er.ZodEffects,...gr(n)});class lp extends Ir{_parse(e){return this._getType(e)===un.undefined?Oc(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lp.create=(t,e)=>new lp({innerType:t,typeName:er.ZodOptional,...gr(e)});class Iy extends Ir{_parse(e){return this._getType(e)===un.null?Oc(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Iy.create=(t,e)=>new Iy({innerType:t,typeName:er.ZodNullable,...gr(e)});class jR extends Ir{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===un.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}jR.create=(t,e)=>new jR({innerType:t,typeName:er.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...gr(e)});class ER extends Ir{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wS(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Uf(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Uf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ER.create=(t,e)=>new ER({innerType:t,typeName:er.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...gr(e)});class jU extends Ir{_parse(e){if(this._getType(e)!==un.nan){const r=this._getOrReturnCtx(e);return Gt(r,{code:Tt.invalid_type,expected:un.nan,received:r.parsedType}),Zn}return{status:"valid",value:e.data}}}jU.create=t=>new jU({typeName:er.ZodNaN,...gr(t)});class _Re extends Ir{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class GI extends Ir{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Zn:s.status==="dirty"?(n.dirty(),xb(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Zn:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new GI({in:e,out:n,typeName:er.ZodPipeline})}}class _R extends Ir{_parse(e){const n=this._def.innerType._parse(e),r=i=>(My(i)&&(i.value=Object.freeze(i.value)),i);return wS(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}_R.create=(t,e)=>new _R({innerType:t,typeName:er.ZodReadonly,...gr(e)});var er;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(er||(er={}));const ob=Qh.create,CRe=NR.create;bp.create;xd.create;const ARe=zs.create;SS.create;jS.create;ag.create;Ry.create;ES.create;lp.create;Iy.create;const kRe=PMe,cne=N.createContext({}),uv=({...t})=>a.jsx(cne.Provider,{value:{name:t.name},children:a.jsx(IMe,{...t})}),ZE=()=>{const t=N.useContext(cne),e=N.useContext(une),{getFieldState:n,formState:r}=QE(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},une=N.createContext({}),gm=N.forwardRef(({className:t,...e},n)=>{const r=N.useId();return a.jsx(une.Provider,{value:{id:r},children:a.jsx("div",{ref:n,className:ft("space-y-2",t),...e})})});gm.displayName="FormItem";const vm=N.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=ZE();return a.jsx(_e,{ref:n,className:ft(r&&"text-destructive",t),htmlFor:i,...e})});vm.displayName="FormLabel";const bb=N.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=ZE();return a.jsx(Ij,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});bb.displayName="FormControl";const TRe=N.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=ZE();return a.jsx("p",{ref:n,id:r,className:ft("text-sm text-muted-foreground",t),...e})});TRe.displayName="FormDescription";const jv=N.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=ZE(),o=i?String(i?.message??""):e;return o?a.jsx("p",{ref:r,id:s,className:ft("text-sm font-medium text-destructive",t),...n,children:o}):null});jv.displayName="FormMessage";const dne={100:{allowedTypes:["AUTONOMO","PARTICULAR"],allowedPeriods:["ANUAL"]},200:{allowedTypes:["EMPRESA"],allowedPeriods:["ANUAL"]},202:{allowedTypes:["EMPRESA"],allowedPeriods:["ESPECIAL_FRACCIONADO"],labels:["Abril","Octubre","Diciembre"]},130:{allowedTypes:["AUTONOMO"],allowedPeriods:["TRIMESTRAL"]},131:{allowedTypes:["AUTONOMO"],allowedPeriods:["TRIMESTRAL"]},303:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]},390:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},347:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},349:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]},720:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},190:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},180:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},111:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]}},JE={100:{name:"IRPF - Declaracin de la Renta"},111:{name:"Retenciones - Modelo 111"},130:{name:"IRPF - Pago fraccionado (actividades econmicas)"},131:{name:"IRPF - Pago fraccionado (estimacin directa)"},180:{name:"Retenciones - Alquileres"},190:{name:"Retenciones - Resumen anual"},200:{name:"Impuesto sobre Sociedades"},202:{name:"Pagos fraccionados IS"},303:{name:"IVA - Autoliquidacin"},347:{name:"Operaciones con terceras personas"},349:{name:"Operaciones intracomunitarias"},390:{name:"IVA - Resumen anual"},720:{name:"Bienes en el extranjero"}};function ORe(t){return dne[t]?.allowedPeriods??[]}function PRe(t){return t.endDate?!1:!!t.activeFlag}function MRe(t,e){return e.length===0?Object.entries(dne).filter(([,n])=>n.allowedTypes.includes(t)).map(([n,r])=>({code:n,name:`Modelo ${n}`,allowedTypes:r.allowedTypes,allowedPeriods:r.allowedPeriods,labels:r.labels??null,isActive:!0,createdAt:"",updatedAt:""})):e.filter(n=>n.allowedTypes.some(r=>r===t))}function RRe(t,e){const n=e.find(r=>r.code===t);return n?n.name:`Modelo ${t}`}function e2(t,e){const n=e.find(r=>r.code===t);return n?n.allowedPeriods:ORe(t)}function DRe(t){return PRe({endDate:t.endDate,activeFlag:t.activeFlag})}const IRe=ARe({taxModelCode:ob().min(1,"Selecciona un modelo"),periodicity:ob().min(1,"Selecciona la periodicidad"),startDate:ob().min(1,"La fecha de alta es obligatoria").refine(t=>!Number.isNaN(Date.parse(t)),"Fecha de alta invlida"),endDate:ob().optional().refine(t=>!t||!Number.isNaN(Date.parse(t)),"Fecha de baja invlida"),activeFlag:CRe(),notes:ob().max(1e3,"Mximo 1000 caracteres").optional()}).superRefine((t,e)=>{if(t.endDate){const n=Date.parse(t.startDate);Date.parse(t.endDate)<n&&e.addIssue({path:["endDate"],code:Tt.custom,message:"La fecha de baja debe ser posterior a la fecha de alta"})}});function lb(t){if(!t)return"";const e=typeof t=="string"?new Date(t):t;if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`}const LRe={ANUAL:"Anual",TRIMESTRAL:"Trimestral",MENSUAL:"Mensual",ESPECIAL_FRACCIONADO:"Pagos fraccionados (Abr/Oct/Dic)"};function FRe({open:t,mode:e,clientType:n,assignedCodes:r,taxModelsConfig:i,assignment:s,onClose:o,onSubmit:l,isSubmitting:c}){const u=KI({resolver:eRe(IRe),defaultValues:{taxModelCode:s?.taxModelCode??"",periodicity:s?.periodicity??"",startDate:lb(s?.startDate)||"",endDate:lb(s?.endDate)||"",activeFlag:s?s.activeFlag&&!s.endDate:!0,notes:s?.notes??""}}),d=N.useMemo(()=>e==="edit"&&s?r.filter(E=>E!==s.taxModelCode):r,[r,s,e]),f=N.useMemo(()=>MRe(n,i).filter(E=>!d.includes(E.code)),[n,i,d]),p=u.watch("taxModelCode"),m=e2(p,i),v=u.watch("periodicity"),y=u.watch("endDate"),x=u.watch("activeFlag");N.useEffect(()=>{if(!t){u.reset({taxModelCode:s?.taxModelCode??"",periodicity:s?.periodicity??"",startDate:lb(s?.startDate)||"",endDate:lb(s?.endDate)||"",activeFlag:s?s.activeFlag&&!s.endDate:!0,notes:s?.notes??""});return}if(!s&&f.length>0){u.setValue("taxModelCode",f[0].code);const E=e2(f[0].code,i);E.length>0&&u.setValue("periodicity",E[0]),u.getValues("startDate")||u.setValue("startDate",lb(new Date))}},[t,s,f,i,u]),N.useEffect(()=>{if(p){const E=e2(p,i);E.length>0&&!E.includes(v)&&u.setValue("periodicity",E[0])}},[p,v,u,i]),N.useEffect(()=>{y&&x&&u.setValue("activeFlag",!1)},[y,x,u]);const b=N.useMemo(()=>{const E=e2(p,i),A=i.find(P=>P.code===p)?.labels;return{periods:E,labels:A}},[p,i]),S=u.handleSubmit(async E=>{const A={taxModelCode:E.taxModelCode,periodicity:E.periodicity,startDate:E.startDate,endDate:E.endDate?E.endDate:null,activeFlag:E.endDate?!1:E.activeFlag,notes:E.notes?.trim()?E.notes.trim():null};await l(A,s?.id),o()}),j=p?RRe(p,i):null;return a.jsx(xr,{open:t,onOpenChange:E=>!c&&!E?o():void 0,children:a.jsxs(vr,{className:"sm:max-w-lg",children:[a.jsxs(br,{children:[a.jsx(wr,{children:e==="create"?"Aadir impuesto":`Editar modelo ${p||""}`}),a.jsx(_r,{children:"Gestiona los modelos fiscales asignados a este cliente."})]}),a.jsx(kRe,{...u,children:a.jsxs("form",{className:"space-y-4",onSubmit:S,children:[a.jsx(uv,{control:u.control,name:"taxModelCode",render:({field:E})=>a.jsxs(gm,{children:[a.jsx(vm,{children:"Modelo"}),a.jsxs(Fn,{disabled:c||f.length===0,value:E.value,onValueChange:A=>E.onChange(A.toUpperCase()),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona un modelo"})}),a.jsx(Dn,{children:f.map(A=>a.jsxs(lt,{value:A.code,children:[A.code,"  ",A.name]},A.code))})]}),a.jsx(jv,{})]})}),a.jsx(uv,{control:u.control,name:"periodicity",render:({field:E})=>a.jsxs(gm,{children:[a.jsx(vm,{children:"Periodicidad"}),a.jsxs(Fn,{disabled:c||m.length===0,value:E.value,onValueChange:A=>E.onChange(A.toUpperCase()),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona periodicidad"})}),a.jsx(Dn,{children:m.map(A=>a.jsx(lt,{value:A,children:LRe[A]},A))})]}),b.labels&&b.labels.length>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Presentaciones en: ",b.labels.join(", ")]}),v&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[v==="MENSUAL"&&"Se generarn periodos M01..M12 cada ao.",v==="TRIMESTRAL"&&"Se generarn 1T, 2T, 3T y 4T cada ao.",v==="ANUAL"&&"Una presentacin anual por ejercicio."]}),a.jsx(jv,{})]})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(uv,{control:u.control,name:"startDate",render:({field:E})=>a.jsxs(gm,{children:[a.jsx(vm,{children:"Fecha de alta"}),a.jsx(bb,{children:a.jsx(Ye,{type:"date",...E,disabled:c})}),a.jsx(jv,{})]})}),a.jsx(uv,{control:u.control,name:"endDate",render:({field:E})=>a.jsxs(gm,{children:[a.jsx(vm,{children:"Fecha de baja"}),a.jsx(bb,{children:a.jsx(Ye,{type:"date",value:E.value??"",onChange:A=>E.onChange(A.target.value||""),disabled:c})}),a.jsx(jv,{})]})})]}),a.jsx(uv,{control:u.control,name:"activeFlag",render:({field:E})=>a.jsxs(gm,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(vm,{className:"text-base",children:"Activo"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"El impuesto permanecer activo mientras no tenga fecha de baja."})]}),a.jsx(bb,{children:a.jsx(Va,{checked:E.value,onCheckedChange:E.onChange,disabled:!!y||c})})]})}),a.jsx(uv,{control:u.control,name:"notes",render:({field:E})=>a.jsxs(gm,{children:[a.jsx(vm,{children:"Notas"}),a.jsx(bb,{children:a.jsx(Do,{placeholder:j?`Notas internas sobre el modelo ${j}`:"Notas internas",...E,disabled:c})}),a.jsx(jv,{})]})}),a.jsxs(ss,{children:[a.jsx(pe,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancelar"}),a.jsx(pe,{type:"submit",disabled:c||f.length===0,children:c?"Guardando...":"Guardar"})]})]})})]})})}const BRe={ANUAL:"default",TRIMESTRAL:"secondary",MENSUAL:"outline",ESPECIAL_FRACCIONADO:"destructive"},$Re={ANUAL:"Anual",TRIMESTRAL:"Trimestral",MENSUAL:"Mensual",ESPECIAL_FRACCIONADO:"Especial fraccionado"};function EU(t){if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}function zRe({assignment:t,onEdit:e,onDelete:n,onToggleActive:r,disabled:i,selectable:s,selected:o,onSelectChange:l}){const c=DRe(t),u=t.periodicity,d=BRe[u]??"default",f=$Re[u]??u,p=!!t.endDate;return a.jsxs(gn,{children:[a.jsx(He,{className:"w-10",children:s?a.jsx(ki,{checked:o,onCheckedChange:m=>l?.(!!m,t)}):null}),a.jsx(He,{className:"font-medium",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:`${t.taxModelCode}`}),t.taxModel?.name&&a.jsx("span",{className:"text-xs text-muted-foreground",children:t.taxModel.name})]})}),a.jsx(He,{children:a.jsx(ct,{variant:d,children:f})}),a.jsx(He,{children:EU(t.startDate)}),a.jsx(He,{children:EU(t.endDate)}),a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Va,{checked:c,disabled:i||p,onCheckedChange:m=>r(t,m)}),a.jsx("span",{className:"text-sm text-muted-foreground",children:c?"Activo":p?"Baja":"Inactivo"})]})}),a.jsx(He,{className:"max-w-sm truncate text-sm text-muted-foreground",children:t.notes||""}),a.jsxs(He,{className:"flex items-center gap-2",children:[a.jsx(pe,{variant:"secondary",size:"icon",onClick:()=>e(t),disabled:i,children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"destructive",size:"icon",onClick:()=>n(t),disabled:i,children:a.jsx(Wi,{className:"h-4 w-4"})})]})]})}function qRe(t){return Rt("GET",`/api/clients/${t}`)}function URe(){return Rt("GET","/api/tax-models-config")}function HRe(t){return Rt("POST","/api/clients",t)}function VRe(t,e){return Rt("PATCH",`/api/clients/${t}`,e)}function WRe(t,e){return Rt("POST",`/api/clients/${t}/tax-assignments`,e)}function KRe(t,e){return Rt("PATCH",`/api/tax-assignments/${t}`,e)}function GRe(t,e){return Rt("DELETE",`/api/tax-assignments/${t}${e?"?hard=1":""}`)}function _U(t,e){const n={codes:e?.codes,assignmentIds:e?.assignmentIds,hard:e?.hard??!0};return Rt("POST",`/api/clients/${t}/tax-assignments/delete`,n)}function J5(t){return[...t].sort((e,n)=>{const r=new Date(n.startDate).getTime()-new Date(e.startDate).getTime();return r!==0?r:e.taxModelCode.localeCompare(n.taxModelCode)})}function YRe({clientId:t,clientType:e,assignments:n,taxModelsConfig:r,onAssignmentsChange:i,disabled:s}){const{toast:o}=Dr(),[l,c]=N.useState(!1),[u,d]=N.useState("create"),[f,p]=N.useState(null),[m,v]=N.useState(null),[y,x]=N.useState(new Set),[b,S]=N.useState(!0),j=N.useMemo(()=>n.map(L=>L.taxModelCode),[n]),E=$t({mutationFn:async L=>{if(!t)throw new Error("El cliente debe guardarse antes de aadir impuestos");return await WRe(t,L)},onSuccess:L=>{i(z=>J5([...z,L])),t&&cn.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Impuesto asignado",description:`El modelo ${L.taxModelCode} se asign correctamente.`})},onError:L=>{o({title:"No se pudo asignar el impuesto",description:L?.message??"Intenta de nuevo ms tarde",variant:"destructive"})}}),A=$t({mutationFn:async({assignmentId:L,payload:z})=>await KRe(L,z),onSuccess:L=>{i(z=>J5(z.map(W=>W.id===L.id?L:W))),t&&cn.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Asignacin actualizada",description:`Modelo ${L.taxModelCode} actualizado correctamente.`})},onError:L=>{o({title:"No se pudo actualizar el impuesto",description:L?.message??"Intenta de nuevo ms tarde",variant:"destructive"})}}),P=$t({mutationFn:async L=>await GRe(L,b),onSuccess:L=>{L.softDeleted?(i(z=>J5(z.map(W=>W.id===L.assignment.id?L.assignment:W))),t&&cn.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Asignacin desactivada",description:L.message})):(i(z=>z.filter(W=>W.id!==L.assignment.id)),o({title:"Asignacin eliminada",description:L.message}))},onError:L=>{o({title:"No se pudo eliminar el impuesto",description:L?.message??"Intenta de nuevo ms tarde",variant:"destructive"})}}),O=()=>{d("create"),p(null),c(!0)},k=L=>{d("edit"),p(L),c(!0)},C=L=>{v(L)},I=(L,z)=>{A.mutate({assignmentId:L.id,payload:{activeFlag:z}})},R=E.isPending||A.isPending,D=(L,z)=>{x(W=>{const X=new Set(W);return L?X.add(z.id):X.delete(z.id),X})};return a.jsxs(Xe,{children:[a.jsxs(ht,{className:"flex flex-row items-center justify-between",children:[a.jsx(gt,{children:"Asignaciones fiscales"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pe,{onClick:O,disabled:!t||s,children:"Aadir impuesto"}),a.jsxs("div",{className:"flex items-center gap-2 pl-2 border-l",children:[a.jsx(Va,{id:"hard-delete",checked:b,onCheckedChange:S}),a.jsx(_e,{htmlFor:"hard-delete",className:"text-xs text-muted-foreground",children:"Borrado definitivo"})]}),a.jsx(pe,{variant:"outline",disabled:!t||s||n.length===0,onClick:async()=>{if(!(!t||!window.confirm("Eliminar todas las asignaciones fiscales de este cliente? Los modelos con histrico se desactivarn.")))try{const z=await _U(t,{hard:b});Array.isArray(z.assignments)?i(()=>z.assignments):i(()=>[]),cn.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Limpieza completada",description:`${z.deleted} eliminadas, ${z.deactivated} desactivadas`})}catch(z){o({title:"Error",description:z?.message??"No se pudo limpiar",variant:"destructive"})}},children:"Borrar modelos"}),a.jsx(pe,{variant:"destructive",disabled:!t||s||y.size===0,onClick:async()=>{if(!t)return;const L=Array.from(y);if(window.confirm(`Eliminar/desactivar modelos seleccionados? (${L.length} registros)`))try{const W=await _U(t,{assignmentIds:L,hard:b});x(new Set),Array.isArray(W.assignments)?i(()=>W.assignments):cn.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Seleccin procesada",description:`${W.deleted} eliminadas, ${W.deactivated} desactivadas`})}catch(W){o({title:"Error",description:W?.message??"No se pudo procesar la seleccin",variant:"destructive"})}},children:"Borrar seleccionados"})]})]}),a.jsx(Qe,{children:t?n.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay impuestos asignados. Aade un modelo fiscal para empezar a controlar sus obligaciones."}):a.jsx("div",{className:"overflow-x-auto rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{className:"w-10"}),a.jsx(Ze,{children:"Modelo"}),a.jsx(Ze,{children:"Periodicidad"}),a.jsx(Ze,{children:"Alta"}),a.jsx(Ze,{children:"Baja"}),a.jsx(Ze,{children:"Activo"}),a.jsx(Ze,{children:"Notas"}),a.jsx(Ze,{className:"w-[120px] text-right",children:"Acciones"})]})}),a.jsx(is,{children:n.map(L=>a.jsx(zRe,{assignment:L,onEdit:k,onDelete:C,onToggleActive:I,selectable:!0,selected:y.has(L.id),onSelectChange:D,disabled:s||A.isPending||P.isPending},L.id))})]})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Guarda los datos del cliente para gestionar sus modelos fiscales."})}),a.jsx(FRe,{open:l,mode:u,clientType:e,assignedCodes:j,taxModelsConfig:r,assignment:f,onClose:()=>c(!1),onSubmit:async(L,z)=>{u==="create"?await E.mutateAsync(L):z&&await A.mutateAsync({assignmentId:z,payload:L})},isSubmitting:R}),a.jsx(Td,{open:!!m,onOpenChange:L=>!L&&v(null),children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Eliminar asignacin fiscal?"}),a.jsxs(Tu,{children:["Esta accin eliminar la asignacin del modelo"," ",a.jsx("strong",{children:m?.taxModelCode}),". Si existen histricos, se dar de baja automticamente."]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Borrado definitivo"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Si est activado, se eliminar tambin el histrico asociado a este modelo."})]}),a.jsx(Va,{checked:b,onCheckedChange:S})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{disabled:P.isPending,onClick:()=>v(null),children:"Cancelar"}),a.jsx(Ou,{onClick:()=>m&&P.mutate(m.id),disabled:P.isPending,children:P.isPending?"Eliminando...":"Eliminar"})]})]})})]})}const XRe=yg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Pf=N.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:ft(XRe({variant:e}),t),...n}));Pf.displayName="Alert";const QRe=N.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:ft("mb-1 font-medium leading-none tracking-tight",t),...e}));QRe.displayName="AlertTitle";const Mf=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ft("text-sm [&_p]:leading-relaxed",t),...e}));Mf.displayName="AlertDescription";var YI="Progress",XI=100,[ZRe]=Gs(YI),[JRe,e4e]=ZRe(YI),fne=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=t4e,...o}=t;(i||i===0)&&!CU(i)&&console.error(n4e(`${i}`,"Progress"));const l=CU(i)?i:XI;r!==null&&!AU(r,l)&&console.error(r4e(`${r}`,"Progress"));const c=AU(r,l)?r:null,u=_S(c)?s(c,l):void 0;return a.jsx(JRe,{scope:n,value:c,max:l,children:a.jsx(Lt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":_S(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":mne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});fne.displayName=YI;var hne="ProgressIndicator",pne=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=e4e(hne,n);return a.jsx(Lt.div,{"data-state":mne(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});pne.displayName=hne;function t4e(t,e){return`${Math.round(t/e*100)}%`}function mne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function _S(t){return typeof t=="number"}function CU(t){return _S(t)&&!isNaN(t)&&t>0}function AU(t,e){return _S(t)&&!isNaN(t)&&t<=e&&t>=0}function n4e(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${XI}\`.`}function r4e(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${XI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gne=fne,i4e=pne;const Ly=N.forwardRef(({className:t,value:e,...n},r)=>a.jsx(gne,{ref:r,className:ft("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(i4e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ly.displayName=gne.displayName;function s4e({open:t,onOpenChange:e}){const{toast:n}=Dr(),r=mo(),[i,s]=N.useState(null),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,f]=N.useState(!1),p=async()=>{try{const S=localStorage.getItem("token");if(console.log(" Token disponible:",S?"S":"No"),!S)throw new Error("No hay sesin activa. Por favor, inicia sesin nuevamente.");const j=await fetch("/api/clients/import-template",{headers:{Authorization:`Bearer ${S}`},credentials:"include"});if(console.log(" Respuesta del servidor:",j.status,j.statusText),!j.ok){const O=await j.json().catch(()=>({error:"Error desconocido"}));throw console.error(" Error del servidor:",O),new Error(O.error||"Error al descargar la plantilla")}const E=await j.blob(),A=window.URL.createObjectURL(E),P=document.createElement("a");P.href=A,P.download="plantilla-importacion-clientes.xlsx",document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(A),document.body.removeChild(P),n({title:"Plantilla descargada",description:"El archivo Excel se ha descargado correctamente"})}catch(S){n({title:"Error al descargar",description:S?.message||"No se pudo descargar la plantilla",variant:"destructive"})}},m=S=>{S.target.files&&S.target.files[0]&&(s(S.target.files[0]),u(null))},v=N.useCallback(S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?f(!0):S.type==="dragleave"&&f(!1)},[]),y=N.useCallback(S=>{if(S.preventDefault(),S.stopPropagation(),f(!1),S.dataTransfer.files&&S.dataTransfer.files[0]){const j=S.dataTransfer.files[0];j.name.endsWith(".xlsx")||j.name.endsWith(".xls")?(s(j),u(null)):n({title:"Archivo no vlido",description:"Por favor selecciona un archivo Excel (.xlsx o .xls)",variant:"destructive"})}},[n]),x=async()=>{if(!i){n({title:"Sin archivo",description:"Por favor selecciona un archivo Excel",variant:"destructive"});return}l(!0),u(null);try{const S=new FormData;S.append("file",i);const j=await fetch("/api/clients/import-excel",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:S}),E=await j.json();if(!j.ok)throw E.result&&u(E.result),new Error(E.error||"Error en la importacin");u(E.result),r.invalidateQueries({queryKey:["/api/clients"]}),n({title:"Importacin exitosa",description:`${E.result.imported} clientes nuevos, ${E.result.updated} actualizados`})}catch(S){n({title:"Error en la importacin",description:S?.message||"No se pudo importar el archivo",variant:"destructive"})}finally{l(!1)}},b=()=>{s(null),u(null),l(!1),e(!1)};return a.jsx(xr,{open:t,onOpenChange:b,children:a.jsxs(vr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsxs(wr,{className:"flex items-center gap-2",children:[a.jsx(i0,{className:"h-5 w-5"}),"Importar Clientes desde Excel"]}),a.jsx(_r,{children:"Descarga la plantilla, compltala con los datos de tus clientes y sube el archivo para importarlos."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"1. Descargar plantilla Excel"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Plantilla con instrucciones y ejemplos incluidos"})]}),a.jsxs(pe,{onClick:p,variant:"outline",className:"gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"Descargar"]})]}),a.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 transition-colors ${d?"border-primary bg-primary/5":"border-muted-foreground/25"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:y,children:[a.jsx("input",{type:"file",id:"file-upload",accept:".xlsx,.xls",onChange:m,className:"hidden"}),a.jsxs("div",{className:"text-center",children:[a.jsx(Oo,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"2. Subir archivo completado"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Arrastra el archivo aqu o haz clic para seleccionarlo"}),a.jsx("label",{htmlFor:"file-upload",children:a.jsx(pe,{variant:"outline",type:"button",className:"cursor-pointer",asChild:!0,children:a.jsx("span",{children:"Seleccionar archivo"})})})]}),i&&a.jsxs("div",{className:"mt-4 p-3 bg-primary/10 rounded-md flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i0,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium",children:i.name}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(i.size/1024).toFixed(1)," KB)"]})]}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>s(null),className:"h-8 w-8 p-0",children:a.jsx(Gm,{className:"h-4 w-4"})})]})]}),o&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Importando clientes..."}),a.jsx("span",{children:"Por favor espera"})]}),a.jsx(Ly,{value:void 0,className:"h-2"})]}),c&&a.jsxs("div",{className:"space-y-3",children:[c.success?a.jsxs(Pf,{className:"border-green-200 bg-green-50",children:[a.jsx(gu,{className:"h-4 w-4 text-green-600"}),a.jsxs(Mf,{className:"text-green-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Importacin completada exitosamente"}),a.jsxs("ul",{className:"text-sm space-y-1",children:[a.jsxs("li",{children:[" ",c.imported," clientes nuevos importados"]}),a.jsxs("li",{children:[" ",c.updated," clientes actualizados"]})]})]})]}):a.jsxs(Pf,{variant:"destructive",children:[a.jsx(Ec,{className:"h-4 w-4"}),a.jsxs(Mf,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Importacin con errores"}),a.jsxs("p",{className:"text-sm",children:["Registros importados: ",c.imported+c.updated]})]})]}),c.errors&&c.errors.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-sm font-medium text-destructive",children:["Errores encontrados (",c.errors.length,"):"]}),a.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-md p-3 bg-destructive/5",children:a.jsx("ul",{className:"space-y-1 text-sm",children:c.errors.map((S,j)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-destructive",children:""}),a.jsx("span",{className:"flex-1",children:S})]},j))})})]})]}),a.jsx(Pf,{children:a.jsxs(Mf,{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-2",children:" Informacin importante:"}),a.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[a.jsx("li",{children:" Los clientes existentes (mismo NIF/CIF) sern actualizados"}),a.jsx("li",{children:" Los modelos fiscales se asignarn automticamente"}),a.jsx("li",{children:" Los campos obligatorios deben estar completos"}),a.jsx("li",{children:' Revisa la hoja "Instrucciones" en la plantilla para ms detalles'})]})]})})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:b,children:"Cerrar"}),a.jsx(pe,{onClick:x,disabled:!i||o,className:"gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Oo,{className:"h-4 w-4"}),"Importar Clientes"]})})]})]})})}const kU=[{value:"AUTONOMO",label:"Autnomo"},{value:"EMPRESA",label:"Empresa"},{value:"PARTICULAR",label:"Particular"}],Iv="__none__";function gf(t){if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`}function wb(){return gf(new Date().toISOString())}const TU={razonSocial:"",nifCif:"",tipo:"AUTONOMO",email:"",telefono:"",direccion:"",responsableAsignado:Iv,fechaAlta:wb(),fechaBaja:"",isActive:!0,notes:""};function a4e(t){return{razonSocial:t.razonSocial.trim(),nifCif:t.nifCif.trim(),tipo:t.tipo,email:t.email.trim()?t.email.trim():null,telefono:t.telefono.trim()?t.telefono.trim():null,direccion:t.direccion.trim()?t.direccion.trim():null,responsableAsignado:t.responsableAsignado===Iv?null:t.responsableAsignado,isActive:t.isActive,fechaAlta:t.fechaAlta||null,fechaBaja:t.fechaBaja||null,notes:t.notes.trim()?t.notes.trim():null}}function o4e(){const{toast:t}=Dr(),[e,n]=N.useState(""),[r,i]=N.useState("todos"),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState("general"),[f,p]=N.useState(null),[m,v]=N.useState(null),[y,x]=N.useState(null),[b,S]=N.useState([]),[j,E]=N.useState([]),[A,P]=N.useState(""),[O,k]=N.useState(TU),{data:C=[],isLoading:I}=Wt({queryKey:["/api/clients",{view:"list"}],queryFn:()=>Rt("GET","/api/clients?full=0"),staleTime:6e4}),{data:R=[]}=Wt({queryKey:["/api/users"],staleTime:5*6e4}),D=N.useMemo(()=>{const J=new Map;return(R||[]).forEach(ne=>J.set(ne.id,ne.username)),J},[R]),{data:L=[],isLoading:z,error:W}=Wt({queryKey:["tax-models-config"],queryFn:()=>URe()});console.log(" Tax Models Config:",L?.length,"modelos",L),console.log(" Loading:",z,"Error:",W);const{data:X,isFetching:q}=Wt({queryKey:["client-detail",y],queryFn:()=>qRe(y),enabled:!!(y&&s)});N.useEffect(()=>{if(!X)return;v(X),S(X.taxAssignments??[]),k({razonSocial:X.razonSocial??"",nifCif:X.nifCif??"",tipo:X.tipo||"AUTONOMO",email:X.email??"",telefono:X.telefono??"",direccion:X.direccion??"",responsableAsignado:X.responsableAsignado??Iv,fechaAlta:gf(X.fechaAlta)||wb(),fechaBaja:gf(X.fechaBaja),isActive:X.isActive??!0,notes:X.notes??""});const J=X.employees?.map(Re=>Re.userId)??[],ne=X.employees?.find(Re=>Re.isPrimary)?.userId??"";E(J),P(ne)},[X]);const V=$t({mutationFn:async J=>await HRe(J),onSuccess:J=>{cn.invalidateQueries({queryKey:["/api/clients"]}),p({...J,tipo:J.tipo,fechaAlta:J.fechaAlta,fechaBaja:J.fechaBaja}),v(J),k({razonSocial:J.razonSocial??"",nifCif:J.nifCif??"",tipo:J.tipo||"AUTONOMO",email:J.email??"",telefono:J.telefono??"",direccion:J.direccion??"",responsableAsignado:J.responsableAsignado??Iv,fechaAlta:gf(J.fechaAlta)||wb(),fechaBaja:gf(J.fechaBaja),isActive:J.isActive??!0,notes:J.notes??""}),x(J.id),S(J.taxAssignments??[]),d("fiscal"),t({title:"Cliente creado exitosamente"})},onError:J=>{t({title:"No se pudo crear el cliente",description:J?.message??"Intenta de nuevo",variant:"destructive"})}}),Y=$t({mutationFn:async({id:J,payload:ne})=>await VRe(J,ne),onSuccess:J=>{cn.invalidateQueries({queryKey:["/api/clients"]}),v(J),k({razonSocial:J.razonSocial??"",nifCif:J.nifCif??"",tipo:J.tipo||"AUTONOMO",email:J.email??"",telefono:J.telefono??"",direccion:J.direccion??"",responsableAsignado:J.responsableAsignado??Iv,fechaAlta:gf(J.fechaAlta)||wb(),fechaBaja:gf(J.fechaBaja),isActive:J.isActive??!0,notes:J.notes??""}),S(J.taxAssignments??[]),p(ne=>ne?{...ne,...J}:null),t({title:"Cliente actualizado exitosamente"})},onError:J=>{t({title:"No se pudo actualizar el cliente",description:J?.message??"Intenta de nuevo",variant:"destructive"})}}),re=$t({mutationFn:async J=>await Rt("DELETE",`/api/clients/${J}`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/clients"]}),t({title:"Cliente eliminado exitosamente"}),s&&te()}}),Q=$t({mutationFn:async J=>await Rt("PATCH",`/api/clients/${J}/toggle-active`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/clients"]}),t({title:"Estado del cliente actualizado"})},onError:()=>{t({title:"Error al cambiar el estado del cliente",variant:"destructive"})}}),F=$t({mutationFn:async({clientId:J,employeeIds:ne,primaryId:Re})=>await Rt("PUT",`/api/clients/${J}/employees`,{employeeIds:ne,primaryEmployeeId:Re}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/clients"]})}}),G=N.useMemo(()=>C.filter(J=>{const ne=J.razonSocial.toLowerCase().includes(e.toLowerCase())||J.nifCif.toLowerCase().includes(e.toLowerCase()),Re=r==="todos"||J.tipo.toUpperCase()===r.toUpperCase();return ne&&Re}),[C,e,r]),te=()=>{o(!1),setTimeout(()=>{le()},200)},le=()=>{k(TU),E([]),P(""),p(null),v(null),x(null),S([]),d("general")},he=()=>{le(),o(!0)},me=J=>{p(J),k({razonSocial:J.razonSocial,nifCif:J.nifCif,tipo:(J.tipo||"AUTONOMO").toUpperCase(),email:J.email??"",telefono:J.telefono??"",direccion:J.direccion??"",responsableAsignado:J.responsableAsignado??Iv,fechaAlta:gf(J.fechaAlta)||wb(),fechaBaja:gf(J.fechaBaja),isActive:J.isActive??!0,notes:J.notes??""});const ne=J.employees?.map(dt=>dt.userId)??[],Re=J.employees?.find(dt=>dt.isPrimary)?.userId??"";E(ne),P(Re),S(J.taxAssignments??[]),x(J.id),d("general"),o(!0)},xe=async J=>{J.preventDefault();const ne=a4e(O);try{let Re=f?.id||m?.id||y;Re?Re=(await Y.mutateAsync({id:Re,payload:ne})).id:Re=(await V.mutateAsync(ne)).id,Re&&await F.mutateAsync({clientId:Re,employeeIds:j,primaryId:j.length>0?A||j[0]:""})}catch(Re){t({title:"Error al guardar el cliente",description:Re?.message??"Intenta de nuevo ms tarde",variant:"destructive"})}},de=()=>{if(!C||C.length===0)return;const J=APe.unparse(C),ne=new Blob([J],{type:"text/csv"}),Re=window.URL.createObjectURL(ne),dt=document.createElement("a");dt.href=Re,dt.download=`clientes_${new Date().toISOString().split("T")[0]}.csv`,dt.click(),t({title:"Exportacin completada"})},Ne=J=>J&&D.get(J)||"Sin asignar",Ce=async J=>{await re.mutateAsync(J)},ae=V.isPending||Y.isPending||F.isPending,Pe=m?.id??f?.id??null;return I?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(pr,{className:"h-9 w-48"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(pr,{className:"h-10 flex-1"}),a.jsx(pr,{className:"h-10 w-32"}),a.jsx(pr,{className:"h-10 w-32"})]}),a.jsx(Xe,{children:a.jsx(Qe,{className:"p-6",children:[...Array(5)].map((J,ne)=>a.jsx(pr,{className:"h-12 w-full mb-2"},ne))})})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Clientes"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestin de clientes y contactos"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{variant:"outline",onClick:()=>c(!0),className:"gap-2",children:[a.jsx(i0,{className:"h-4 w-4"}),"Importar desde Excel"]}),a.jsxs(xr,{open:s,onOpenChange:J=>{J?o(!0):te()},children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:he,"data-testid":"button-add-client",children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Nuevo Cliente"]})}),a.jsxs(vr,{className:"max-w-4xl",children:[a.jsxs(br,{className:"space-y-1",children:[a.jsx(wr,{children:f?"Editar Cliente":"Nuevo Cliente"}),a.jsx(_r,{children:f?"Actualiza la informacin del cliente":"Completa la informacin para crear un nuevo cliente"})]}),a.jsxs("form",{id:"client-editor-form",onSubmit:xe,className:"space-y-6 mt-6",children:[a.jsxs(kc,{value:u,onValueChange:J=>d(J),children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs(ql,{children:[a.jsx(Wn,{value:"general",children:" Datos del cliente"}),a.jsxs(Wn,{value:"fiscal",disabled:!Pe,children:[" Datos fiscales y contables",!Pe&&a.jsx("span",{className:"ml-2 text-xs opacity-60",children:"(guarda primero)"})]})]}),a.jsx(pe,{type:"submit",disabled:ae,className:"shrink-0",children:ae?"Guardando...":"Guardar cambios"})]}),a.jsx(or,{value:"general",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"razonSocial",children:"Razn Social *"}),a.jsx(Ye,{id:"razonSocial",value:O.razonSocial,onChange:J=>k(ne=>({...ne,razonSocial:J.target.value})),required:!0,"data-testid":"input-razon-social"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nifCif",children:"NIF/CIF *"}),a.jsx(Ye,{id:"nifCif",value:O.nifCif,onChange:J=>k(ne=>({...ne,nifCif:J.target.value})),required:!0,"data-testid":"input-nif-cif"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"tipo",children:"Tipo *"}),a.jsxs(Fn,{value:O.tipo,onValueChange:J=>k(ne=>({...ne,tipo:J})),children:[a.jsx(Rn,{"data-testid":"select-tipo",children:a.jsx(Bn,{})}),a.jsx(Dn,{children:kU.map(J=>a.jsx(lt,{value:J.value,children:J.label},J.value))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"fechaAlta",children:"Fecha de alta"}),a.jsx(Ye,{id:"fechaAlta",type:"date",value:O.fechaAlta,onChange:J=>k(ne=>({...ne,fechaAlta:J.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"fechaBaja",children:"Fecha de baja"}),a.jsx(Ye,{id:"fechaBaja",type:"date",value:O.fechaBaja,onChange:J=>k(ne=>({...ne,fechaBaja:J.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"email",children:"Email"}),a.jsx(Ye,{id:"email",type:"email",value:O.email,onChange:J=>k(ne=>({...ne,email:J.target.value})),"data-testid":"input-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"telefono",children:"Telfono"}),a.jsx(Ye,{id:"telefono",value:O.telefono,onChange:J=>k(ne=>({...ne,telefono:J.target.value})),"data-testid":"input-telefono"})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsx(_e,{htmlFor:"direccion",children:"Direccin"}),a.jsx(Ye,{id:"direccion",value:O.direccion,onChange:J=>k(ne=>({...ne,direccion:J.target.value}))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsx(_e,{htmlFor:"notes",children:"Notas internas"}),a.jsx(Do,{id:"notes",value:O.notes,onChange:J=>k(ne=>({...ne,notes:J.target.value})),rows:3})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4",children:[a.jsxs("div",{children:[a.jsxs(_e,{className:"flex items-center gap-2 text-sm font-semibold",children:[a.jsx(cN,{className:"h-4 w-4"}),"Cliente activo"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Desactiva el cliente cuando ya no se gestione para mantener el histrico."})]}),a.jsx(Va,{checked:O.isActive,onCheckedChange:J=>k(ne=>({...ne,isActive:J}))})]})}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsxs("div",{children:[a.jsxs(_e,{className:"flex items-center gap-2 text-base font-semibold",children:[a.jsx(bfe,{className:"h-5 w-5"}),"Responsables del cliente"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Selecciona uno o varios empleados. El marcado como "Principal" ser el responsable principal del cliente.'})]}),a.jsx("div",{className:"border rounded-md p-4 space-y-3 max-h-64 overflow-y-auto",children:R.map(J=>{const ne=j.includes(J.id),Re=A===J.id;return a.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 rounded-md hover:bg-muted/40",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ki,{id:`employee-${J.id}`,checked:ne,onCheckedChange:dt=>{if(dt){const et=[...j,J.id];E(et),et.length===1&&P(J.id)}else E(et=>et.filter(Ve=>Ve!==J.id)),Re&&P(et=>j.filter(ge=>ge!==J.id)[0]||"")}}),a.jsxs(_e,{htmlFor:`employee-${J.id}`,className:"text-sm font-medium cursor-pointer flex items-center gap-2",children:[J.username,Re&&a.jsx(ct,{variant:"default",className:"text-xs bg-primary",children:" Principal"})]})]}),ne&&!Re&&a.jsx(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>P(J.id),className:"text-xs",children:"Marcar como principal"})]},J.id)})}),j.length===0&&a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:a.jsx("p",{className:"text-xs text-amber-800",children:" Selecciona al menos un responsable para asignar al cliente. El primero seleccionado ser el principal por defecto."})}),j.length>0&&!A&&a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:a.jsx("p",{className:"text-xs text-amber-800",children:" Marca un empleado como principal para establecer el responsable principal del cliente."})})]})]})}),a.jsxs(or,{value:"fiscal",children:[q&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(pr,{className:"h-8 w-48"}),a.jsx(pr,{className:"h-64 w-full"})]}),!q&&a.jsx(YRe,{clientId:Pe??void 0,clientType:O.tipo,assignments:b,taxModelsConfig:L,disabled:!Pe,onAssignmentsChange:J=>S(ne=>J(ne))})]})]}),a.jsx(ss,{className:"flex items-center justify-between",children:a.jsx(pe,{type:"button",variant:"outline",onClick:te,disabled:ae,children:"Cancelar"})})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Qy,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{placeholder:"Buscar por razn social o NIF/CIF",value:e,onChange:J=>n(J.target.value),className:"pl-8"})]}),a.jsxs(Fn,{value:r,onValueChange:i,children:[a.jsx(Rn,{className:"w-40",children:a.jsx(Bn,{placeholder:"Filtrar por tipo"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"todos",children:"Todos"}),kU.map(J=>a.jsx(lt,{value:J.value,children:J.label},J.value))]})]})]}),a.jsxs(pe,{variant:"outline",onClick:de,children:[a.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Exportar CSV"]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Listado de clientes"})}),a.jsx(Qe,{className:"p-0",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Cliente"}),a.jsx(Ze,{children:"Tipo"}),a.jsx(Ze,{children:"Responsable"}),a.jsx(Ze,{children:"Telfono"}),a.jsx(Ze,{children:"Email"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{className:"text-right w-[150px]",children:"Acciones"})]})}),a.jsxs(is,{children:[G.map(J=>a.jsxs(gn,{children:[a.jsx(He,{children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:J.razonSocial}),a.jsx("span",{className:"text-xs text-muted-foreground",children:J.nifCif})]})}),a.jsx(He,{children:J.tipo?.toUpperCase()}),a.jsx(He,{children:Ne(J.responsableAsignado)}),a.jsx(He,{children:J.telefono||""}),a.jsx(He,{children:J.email||""}),a.jsx(He,{children:a.jsx(ct,{variant:J.isActive?"default":"outline",children:J.isActive?"Activo":"Inactivo"})}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>me(J),children:a.jsx(fd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>Q.mutate(J.id),title:J.isActive?"Desactivar":"Activar",children:J.isActive?a.jsx(cN,{className:"h-4 w-4"}):a.jsx(Km,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"destructive",size:"icon",onClick:()=>Ce(J.id),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},J.id)),G.length===0&&a.jsx(gn,{children:a.jsx(He,{colSpan:7,className:"text-center text-muted-foreground py-6",children:"No se encontraron clientes con los filtros seleccionados."})})]})]})})]}),a.jsx(s4e,{open:l,onOpenChange:c})]})}var vne=["PageUp","PageDown"],yne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xne={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},px="Slider",[CR,l4e,c4e]=Yy(px),[bne]=Gs(px,[c4e]),[u4e,e_]=bne(px),wne=N.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:v,...y}=t,x=N.useRef(new Set),b=N.useRef(0),j=o==="horizontal"?d4e:f4e,[E=[],A]=Ro({prop:d,defaultProp:u,onChange:R=>{[...x.current][b.current]?.focus(),f(R)}}),P=N.useRef(E);function O(R){const D=v4e(E,R);I(R,D)}function k(R){I(R,b.current)}function C(){const R=P.current[b.current];E[b.current]!==R&&p(E)}function I(R,D,{commit:L}={commit:!1}){const z=w4e(s),W=N4e(Math.round((R-r)/s)*s+r,z),X=V0(W,[r,i]);A((q=[])=>{const V=m4e(q,X,D);if(b4e(V,c*s)){b.current=V.indexOf(X);const Y=String(V)!==String(q);return Y&&L&&p(V),Y?V:q}else return q})}return a.jsx(u4e,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:i,valueIndexToChangeRef:b,thumbs:x.current,values:E,orientation:o,form:v,children:a.jsx(CR.Provider,{scope:t.__scopeSlider,children:a.jsx(CR.Slot,{scope:t.__scopeSlider,children:a.jsx(j,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:e,onPointerDown:bt(y.onPointerDown,()=>{l||(P.current=E)}),min:r,max:i,inverted:m,onSlideStart:l?void 0:O,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&I(r,0,{commit:!0}),onEndKeyDown:()=>!l&&I(i,E.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:D})=>{if(!l){const W=vne.includes(R.key)||R.shiftKey&&yne.includes(R.key)?10:1,X=b.current,q=E[X],V=s*W*D;I(q+V,X,{commit:!0})}}})})})})});wne.displayName=px;var[Nne,Sne]=bne(px,{startEdge:"left",endEdge:"right",size:"width",direction:1}),d4e=N.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[f,p]=N.useState(null),m=_n(e,j=>p(j)),v=N.useRef(void 0),y=bg(i),x=y==="ltr",b=x&&!s||!x&&s;function S(j){const E=v.current||f.getBoundingClientRect(),A=[0,E.width],O=QI(A,b?[n,r]:[r,n]);return v.current=E,O(j-E.left)}return a.jsx(Nne,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:a.jsx(jne,{dir:y,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const E=S(j.clientX);o?.(E)},onSlideMove:j=>{const E=S(j.clientX);l?.(E)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:j=>{const A=xne[b?"from-left":"from-right"].includes(j.key);u?.({event:j,direction:A?-1:1})}})})}),f4e=N.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=N.useRef(null),f=_n(e,d),p=N.useRef(void 0),m=!i;function v(y){const x=p.current||d.current.getBoundingClientRect(),b=[0,x.height],j=QI(b,m?[r,n]:[n,r]);return p.current=x,j(y-x.top)}return a.jsx(Nne,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:a.jsx(jne,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const x=v(y.clientY);s?.(x)},onSlideMove:y=>{const x=v(y.clientY);o?.(x)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:y=>{const b=xne[m?"from-bottom":"from-top"].includes(y.key);c?.({event:y,direction:b?-1:1})}})})}),jne=N.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=e_(px,n);return a.jsx(Lt.span,{...u,ref:e,onKeyDown:bt(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):vne.concat(yne).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:bt(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():r(f)}),onPointerMove:bt(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:bt(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),s(f))})})}),Ene="SliderTrack",_ne=N.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=e_(Ene,n);return a.jsx(Lt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});_ne.displayName=Ene;var AR="SliderRange",Cne=N.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=e_(AR,n),s=Sne(AR,n),o=N.useRef(null),l=_n(e,o),c=i.values.length,u=i.values.map(p=>Tne(p,i.min,i.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return a.jsx(Lt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:l,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:f+"%"}})});Cne.displayName=AR;var kR="SliderThumb",Ane=N.forwardRef((t,e)=>{const n=l4e(t.__scopeSlider),[r,i]=N.useState(null),s=_n(e,l=>i(l)),o=N.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return a.jsx(h4e,{...t,ref:s,index:o})}),h4e=N.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=e_(kR,n),l=Sne(kR,n),[c,u]=N.useState(null),d=_n(e,S=>u(S)),f=c?o.form||!!c.closest("form"):!0,p=Wj(c),m=o.values[r],v=m===void 0?0:Tne(m,o.min,o.max),y=g4e(r,o.values.length),x=p?.[l.size],b=x?y4e(x,v,l.direction):0;return N.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${b}px)`},children:[a.jsx(CR.ItemSlot,{scope:t.__scopeSlider,children:a.jsx(Lt.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:d,style:m===void 0?{display:"none"}:t.style,onFocus:bt(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&a.jsx(kne,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},r)]})});Ane.displayName=kR;var p4e="RadioBubbleInput",kne=N.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=N.useRef(null),s=_n(i,r),o=HE(e);return N.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("input",{bubbles:!0});d.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(Lt.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});kne.displayName=p4e;function m4e(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function Tne(t,e,n){const s=100/(n-e)*(t-e);return V0(s,[0,100])}function g4e(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function v4e(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function y4e(t,e,n){const r=t/2,s=QI([0,50],[0,r]);return(r-s(e)*n)*n}function x4e(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function b4e(t,e){if(e>0){const n=x4e(t);return Math.min(...n)>=e}return!0}function QI(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function w4e(t){return(String(t).split(".")[1]||"").length}function N4e(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var One=wne,S4e=_ne,j4e=Cne,E4e=Ane;const Pne=N.forwardRef(({className:t,...e},n)=>a.jsxs(One,{ref:n,className:ft("relative flex w-full touch-none select-none items-center",t),...e,children:[a.jsx(S4e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(j4e,{className:"absolute h-full bg-primary"})}),a.jsx(E4e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Pne.displayName=One.displayName;function Rr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function zl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function To(t,e){const n=Rr(t);return isNaN(e)?zl(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function wu(t,e){const n=Rr(t);if(isNaN(e))return zl(t,NaN);if(!e)return n;const r=n.getDate(),i=zl(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const ZI=6048e5,_4e=864e5;let C4e={};function R1(){return C4e}function Sd(t,e){const n=R1(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Rr(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function og(t){return Sd(t,{weekStartsOn:1})}function Mne(t){const e=Rr(t),n=e.getFullYear(),r=zl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=og(r),s=zl(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=og(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Fy(t){const e=Rr(t);return e.setHours(0,0,0,0),e}function CS(t){const e=Rr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ud(t,e){const n=Fy(t),r=Fy(e),i=+n-CS(n),s=+r-CS(r);return Math.round((i-s)/_4e)}function A4e(t){const e=Mne(t),n=zl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),og(n)}function TR(t,e){const n=e*7;return To(t,n)}function k4e(t,e){return wu(t,e*12)}function T4e(t){let e;return t.forEach(function(n){const r=Rr(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function O4e(t){let e;return t.forEach(n=>{const r=Rr(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function ol(t,e){const n=Fy(t),r=Fy(e);return+n==+r}function JI(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function P4e(t){if(!JI(t)&&typeof t!="number")return!1;const e=Rr(t);return!isNaN(Number(e))}function Y0(t,e){const n=Rr(t),r=Rr(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function M4e(t,e,n){const r=Sd(t,n),i=Sd(e,n),s=+r-CS(r),o=+i-CS(i);return Math.round((s-o)/ZI)}function eL(t){const e=Rr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function cl(t){const e=Rr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Rne(t){const e=Rr(t),n=zl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function tL(t,e){const n=R1(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Rr(t),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Dne(t){return tL(t,{weekStartsOn:1})}const R4e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D4e=(t,e,n)=>{let r;const i=R4e[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Xv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const I4e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},L4e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},F4e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B4e={date:Xv({formats:I4e,defaultWidth:"full"}),time:Xv({formats:L4e,defaultWidth:"full"}),dateTime:Xv({formats:F4e,defaultWidth:"full"})},$4e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},z4e=(t,e,n,r)=>$4e[t];function sd(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const q4e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U4e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},H4e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},V4e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},K4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G4e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Y4e={ordinalNumber:G4e,era:sd({values:q4e,defaultWidth:"wide"}),quarter:sd({values:U4e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sd({values:H4e,defaultWidth:"wide"}),day:sd({values:V4e,defaultWidth:"wide"}),dayPeriod:sd({values:W4e,defaultWidth:"wide",formattingValues:K4e,defaultFormattingWidth:"wide"})};function ad(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Q4e(l,f=>f.test(o)):X4e(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function X4e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Q4e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ine(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const Z4e=/^(\d+)(th|st|nd|rd)?/i,J4e=/\d+/i,eDe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tDe={any:[/^b/i,/^(a|c)/i]},nDe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rDe={any:[/1/i,/2/i,/3/i,/4/i]},iDe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sDe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},aDe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oDe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uDe={ordinalNumber:Ine({matchPattern:Z4e,parsePattern:J4e,valueCallback:t=>parseInt(t,10)}),era:ad({matchPatterns:eDe,defaultMatchWidth:"wide",parsePatterns:tDe,defaultParseWidth:"any"}),quarter:ad({matchPatterns:nDe,defaultMatchWidth:"wide",parsePatterns:rDe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ad({matchPatterns:iDe,defaultMatchWidth:"wide",parsePatterns:sDe,defaultParseWidth:"any"}),day:ad({matchPatterns:aDe,defaultMatchWidth:"wide",parsePatterns:oDe,defaultParseWidth:"any"}),dayPeriod:ad({matchPatterns:lDe,defaultMatchWidth:"any",parsePatterns:cDe,defaultParseWidth:"any"})},Lne={code:"en-US",formatDistance:D4e,formatLong:B4e,formatRelative:z4e,localize:Y4e,match:uDe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dDe(t){const e=Rr(t);return ud(e,Rne(e))+1}function Fne(t){const e=Rr(t),n=+og(e)-+A4e(e);return Math.round(n/ZI)+1}function Bne(t,e){const n=Rr(t),r=n.getFullYear(),i=R1(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=zl(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Sd(o,e),c=zl(t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Sd(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function fDe(t,e){const n=R1(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Bne(t,e),s=zl(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Sd(s,e)}function $ne(t,e){const n=Rr(t),r=+Sd(n,e)-+fDe(n,e);return Math.round(r/ZI)+1}function ni(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const kh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ni(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ni(n+1,2)},d(t,e){return ni(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ni(t.getHours()%12||12,e.length)},H(t,e){return ni(t.getHours(),e.length)},m(t,e){return ni(t.getMinutes(),e.length)},s(t,e){return ni(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ni(i,e.length)}},dv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},OU={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return kh.y(t,e)},Y:function(t,e,n,r){const i=Bne(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ni(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ni(s,e.length)},R:function(t,e){const n=Mne(t);return ni(n,e.length)},u:function(t,e){const n=t.getFullYear();return ni(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ni(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ni(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return kh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ni(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=$ne(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ni(i,e.length)},I:function(t,e,n){const r=Fne(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ni(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):kh.d(t,e)},D:function(t,e,n){const r=dDe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ni(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ni(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ni(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ni(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=dv.noon:r===0?i=dv.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=dv.evening:r>=12?i=dv.afternoon:r>=4?i=dv.morning:i=dv.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return kh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):kh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ni(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ni(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):kh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):kh.s(t,e)},S:function(t,e){return kh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return MU(r);case"XXXX":case"XX":return ym(r);case"XXXXX":case"XXX":default:return ym(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return MU(r);case"xxxx":case"xx":return ym(r);case"xxxxx":case"xxx":default:return ym(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+PU(r,":");case"OOOO":default:return"GMT"+ym(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+PU(r,":");case"zzzz":default:return"GMT"+ym(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ni(r,e.length)},T:function(t,e,n){const r=t.getTime();return ni(r,e.length)}};function PU(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ni(s,2)}function MU(t,e){return t%60===0?(t>0?"-":"+")+ni(Math.abs(t)/60,2):ym(t,e)}function ym(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ni(Math.trunc(r/60),2),s=ni(r%60,2);return n+i+e+s}const RU=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},hDe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return RU(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",RU(r,e)).replace("{{time}}",zne(i,e))},pDe={p:zne,P:hDe},mDe=/^D+$/,gDe=/^Y+$/,vDe=["D","DD","YY","YYYY"];function yDe(t){return mDe.test(t)}function xDe(t){return gDe.test(t)}function bDe(t,e,n){const r=wDe(t,e,n);if(console.warn(r),vDe.includes(t))throw new RangeError(r)}function wDe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NDe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SDe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jDe=/^'([^]*?)'?$/,EDe=/''/g,_De=/[a-zA-Z]/;function qa(t,e,n){const r=R1(),i=n?.locale??r.locale??Lne,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=Rr(t);if(!P4e(l))throw new RangeError("Invalid time value");let c=e.match(SDe).map(d=>{const f=d[0];if(f==="p"||f==="P"){const p=pDe[f];return p(d,i.formatLong)}return d}).join("").match(NDe).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:CDe(d)};if(OU[f])return{isToken:!0,value:d};if(f.match(_De))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!n?.useAdditionalWeekYearTokens&&xDe(f)||!n?.useAdditionalDayOfYearTokens&&yDe(f))&&bDe(f,e,String(t));const p=OU[f[0]];return p(l,f,i.localize,u)}).join("")}function CDe(t){const e=t.match(jDe);return e?e[1].replace(EDe,"'"):t}function ADe(t){const e=Rr(t),n=e.getFullYear(),r=e.getMonth(),i=zl(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function kDe(t){return Math.trunc(+Rr(t)/1e3)}function TDe(t){const e=Rr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function ODe(t,e){return M4e(TDe(t),cl(t),e)+1}function OR(t,e){const n=Rr(t),r=Rr(e);return n.getTime()>r.getTime()}function qne(t,e){const n=Rr(t),r=Rr(e);return+n<+r}function nL(t,e){const n=Rr(t),r=Rr(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function PDe(t,e){const n=Rr(t),r=Rr(e);return n.getFullYear()===r.getFullYear()}function eO(t,e){return To(t,-e)}function tO(t,e){const n=Rr(t),r=n.getFullYear(),i=n.getDate(),s=zl(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=ADe(s);return n.setMonth(e,Math.min(i,o)),n}function DU(t,e){const n=Rr(t);return isNaN(+n)?zl(t,NaN):(n.setFullYear(e),n)}const MDe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},RDe=(t,e,n)=>{let r;const i=MDe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},DDe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},IDe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},LDe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FDe={date:Xv({formats:DDe,defaultWidth:"full"}),time:Xv({formats:IDe,defaultWidth:"full"}),dateTime:Xv({formats:LDe,defaultWidth:"full"})},BDe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},$De={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},zDe=(t,e,n,r)=>e.getHours()!==1?$De[t]:BDe[t],qDe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},UDe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},HDe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},VDe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},WDe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},KDe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},GDe=(t,e)=>Number(t)+"",YDe={ordinalNumber:GDe,era:sd({values:qDe,defaultWidth:"wide"}),quarter:sd({values:UDe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:sd({values:HDe,defaultWidth:"wide"}),day:sd({values:VDe,defaultWidth:"wide"}),dayPeriod:sd({values:WDe,defaultWidth:"wide",formattingValues:KDe,defaultFormattingWidth:"wide"})},XDe=/^(\d+)()?/i,QDe=/\d+/i,ZDe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},JDe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},eIe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},tIe={any:[/1/i,/2/i,/3/i,/4/i]},nIe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},rIe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},iIe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},sIe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},aIe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},oIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},lIe={ordinalNumber:Ine({matchPattern:XDe,parsePattern:QDe,valueCallback:function(t){return parseInt(t,10)}}),era:ad({matchPatterns:ZDe,defaultMatchWidth:"wide",parsePatterns:JDe,defaultParseWidth:"any"}),quarter:ad({matchPatterns:eIe,defaultMatchWidth:"wide",parsePatterns:tIe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ad({matchPatterns:nIe,defaultMatchWidth:"wide",parsePatterns:rIe,defaultParseWidth:"any"}),day:ad({matchPatterns:iIe,defaultMatchWidth:"wide",parsePatterns:sIe,defaultParseWidth:"any"}),dayPeriod:ad({matchPatterns:aIe,defaultMatchWidth:"any",parsePatterns:oIe,defaultParseWidth:"any"})},vc={code:"es",formatDistance:RDe,formatLong:FDe,formatRelative:zDe,localize:YDe,match:lIe,options:{weekStartsOn:1,firstWeekContainsDate:1}};var Un=function(){return Un=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Un.apply(this,arguments)};function cIe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Une(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function D1(t){return t.mode==="multiple"}function I1(t){return t.mode==="range"}function t_(t){return t.mode==="single"}var uIe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dIe(t,e){return qa(t,"LLLL y",e)}function fIe(t,e){return qa(t,"d",e)}function hIe(t,e){return qa(t,"LLLL",e)}function pIe(t){return"".concat(t)}function mIe(t,e){return qa(t,"cccccc",e)}function gIe(t,e){return qa(t,"yyyy",e)}var vIe=Object.freeze({__proto__:null,formatCaption:dIe,formatDay:fIe,formatMonthCaption:hIe,formatWeekNumber:pIe,formatWeekdayName:mIe,formatYearCaption:gIe}),yIe=function(t,e,n){return qa(t,"do MMMM (EEEE)",n)},xIe=function(){return"Month: "},bIe=function(){return"Go to next month"},wIe=function(){return"Go to previous month"},NIe=function(t,e){return qa(t,"cccc",e)},SIe=function(t){return"Week n. ".concat(t)},jIe=function(){return"Year: "},EIe=Object.freeze({__proto__:null,labelDay:yIe,labelMonthDropdown:xIe,labelNext:bIe,labelPrevious:wIe,labelWeekNumber:SIe,labelWeekday:NIe,labelYearDropdown:jIe});function _Ie(){var t="buttons",e=uIe,n=Lne,r={},i={},s=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:vIe,labels:EIe,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:o,today:l,mode:"default"}}function CIe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,s=t.fromDate,o=t.toDate;return r?s=cl(r):e&&(s=new Date(e,0,1)),i?o=eL(i):n&&(o=new Date(n,11,31)),{fromDate:s?Fy(s):void 0,toDate:o?Fy(o):void 0}}var Hne=N.createContext(void 0);function AIe(t){var e,n=t.initialProps,r=_Ie(),i=CIe(n),s=i.fromDate,o=i.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(t_(n)||D1(n)||I1(n))&&(c=n.onSelect);var u=Un(Un(Un({},r),n),{captionLayout:l,classNames:Un(Un({},r.classNames),n.classNames),components:Un({},n.components),formatters:Un(Un({},r.formatters),n.formatters),fromDate:s,labels:Un(Un({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Un(Un({},r.modifiers),n.modifiers),modifiersClassNames:Un(Un({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Un(Un({},r.styles),n.styles),toDate:o});return a.jsx(Hne.Provider,{value:u,children:t.children})}function Si(){var t=N.useContext(Hne);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function Vne(t){var e=Si(),n=e.locale,r=e.classNames,i=e.styles,s=e.formatters.formatCaption;return a.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:n})})}function kIe(t){return a.jsx("svg",Un({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Wne(t){var e,n,r=t.onChange,i=t.value,s=t.children,o=t.caption,l=t.className,c=t.style,u=Si(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:kIe;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:s}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function TIe(t){var e,n=Si(),r=n.fromDate,i=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});var f=[];if(PDe(r,i))for(var p=cl(r),m=r.getMonth();m<=i.getMonth();m++)f.push(tO(p,m));else for(var p=cl(new Date),m=0;m<=11;m++)f.push(tO(p,m));var v=function(x){var b=Number(x.target.value),S=tO(cl(t.displayMonth),b);t.onChange(S)},y=(e=u?.Dropdown)!==null&&e!==void 0?e:Wne;return a.jsx(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:f.map(function(x){return a.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function OIe(t){var e,n=t.displayMonth,r=Si(),i=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!i)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});for(var m=i.getFullYear(),v=s.getFullYear(),y=m;y<=v;y++)p.push(DU(Rne(new Date),y));var x=function(S){var j=DU(cl(n),Number(S.target.value));t.onChange(j)},b=(e=u?.Dropdown)!==null&&e!==void 0?e:Wne;return a.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:d(n,{locale:o}),children:p.map(function(S){return a.jsx("option",{value:S.getFullYear(),children:d(S,{locale:o})},S.getFullYear())})})}function PIe(t,e){var n=N.useState(t),r=n[0],i=n[1],s=e===void 0?r:e;return[s,i]}function MIe(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,s=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(s&&Y0(s,i)<0){var u=-1*(c-1);i=wu(s,u)}return o&&Y0(i,o)<0&&(i=o),cl(i)}function RIe(){var t=Si(),e=MIe(t),n=PIe(e,t.month),r=n[0],i=n[1],s=function(o){var l;if(!t.disableNavigation){var c=cl(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,s]}function DIe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=cl(t),s=cl(wu(i,r)),o=Y0(s,i),l=[],c=0;c<o;c++){var u=wu(i,c);l.push(u)}return n&&(l=l.reverse()),l}function IIe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,l=cl(t);if(!n)return wu(l,o);var c=Y0(n,t);if(!(c<s))return wu(l,o)}}function LIe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,l=cl(t);if(!n)return wu(l,-o);var c=Y0(l,n);if(!(c<=0))return wu(l,-o)}}var Kne=N.createContext(void 0);function FIe(t){var e=Si(),n=RIe(),r=n[0],i=n[1],s=DIe(r,e),o=IIe(r,e),l=LIe(r,e),c=function(f){return s.some(function(p){return nL(f,p)})},u=function(f,p){c(f)||(p&&qne(f,p)?i(wu(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(Kne.Provider,{value:d,children:t.children})}function L1(){var t=N.useContext(Kne);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function IU(t){var e,n=Si(),r=n.classNames,i=n.styles,s=n.components,o=L1().goToMonth,l=function(d){o(wu(d,t.displayIndex?-t.displayIndex:0))},c=(e=s?.CaptionLabel)!==null&&e!==void 0?e:Vne,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[a.jsx("div",{className:r.vhidden,children:u}),a.jsx(TIe,{onChange:l,displayMonth:t.displayMonth}),a.jsx(OIe,{onChange:l,displayMonth:t.displayMonth})]})}function BIe(t){return a.jsx("svg",Un({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function $Ie(t){return a.jsx("svg",Un({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var AS=N.forwardRef(function(t,e){var n=Si(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];t.className&&s.push(t.className);var o=s.join(" "),l=Un(Un({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),a.jsx("button",Un({},t,{ref:e,type:"button",className:o,style:l}))});function zIe(t){var e,n,r=Si(),i=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var p=u(t.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),v=d(t.nextMonth,{locale:s}),y=[o.nav_button,o.nav_button_next].join(" "),x=(e=f?.IconRight)!==null&&e!==void 0?e:$Ie,b=(n=f?.IconLeft)!==null&&n!==void 0?n:BIe;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(AS,{name:"previous-month","aria-label":p,className:m,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?a.jsx(x,{className:o.nav_icon,style:l.nav_icon}):a.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(AS,{name:"next-month","aria-label":v,className:y,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?a.jsx(b,{className:o.nav_icon,style:l.nav_icon}):a.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function LU(t){var e=Si().numberOfMonths,n=L1(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(v){return nL(t.displayMonth,v)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),p=function(){r&&s(r)},m=function(){i&&s(i)};return a.jsx(zIe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:p,onNextClick:m})}function qIe(t){var e,n=Si(),r=n.classNames,i=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(e=l?.CaptionLabel)!==null&&e!==void 0?e:Vne,u;return i?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=a.jsx(IU,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(IU,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(LU,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(LU,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:r.caption,style:s.caption,children:u})}function UIe(t){var e=Si(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?a.jsx("tfoot",{className:i,style:r.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function HIe(t,e,n){for(var r=n?og(new Date):Sd(new Date,{locale:t,weekStartsOn:e}),i=[],s=0;s<7;s++){var o=To(r,s);i.push(o)}return i}function VIe(){var t=Si(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,s=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=HIe(i,s,o);return a.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&a.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return a.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},f)})]})}function WIe(){var t,e=Si(),n=e.classNames,r=e.styles,i=e.components,s=(t=i?.HeadRow)!==null&&t!==void 0?t:VIe;return a.jsx("thead",{style:r.head,className:n.head,children:a.jsx(s,{})})}function KIe(t){var e=Si(),n=e.locale,r=e.formatters.formatDay;return a.jsx(a.Fragment,{children:r(t.date,{locale:n})})}var rL=N.createContext(void 0);function GIe(t){if(!D1(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(rL.Provider,{value:e,children:t.children})}return a.jsx(YIe,{initialProps:t.initialProps,children:t.children})}function YIe(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,s=e.max,o=function(u,d,f){var p,m;(p=e.onDayClick)===null||p===void 0||p.call(e,u,d,f);var v=!!(d.selected&&i&&r?.length===i);if(!v){var y=!!(!d.selected&&s&&r?.length===s);if(!y){var x=r?Une([],r):[];if(d.selected){var b=x.findIndex(function(S){return ol(u,S)});x.splice(b,1)}else x.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,x,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=s&&r.length>s-1,f=r.some(function(p){return ol(p,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return a.jsx(rL.Provider,{value:c,children:n})}function iL(){var t=N.useContext(rL);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function XIe(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?ol(i,t)&&ol(r,t)?void 0:ol(i,t)?{from:i,to:void 0}:ol(r,t)?void 0:OR(r,t)?{from:t,to:i}:{from:r,to:t}:i?OR(t,i)?{from:i,to:t}:{from:t,to:i}:r?qne(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var sL=N.createContext(void 0);function QIe(t){if(!I1(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(sL.Provider,{value:e,children:t.children})}return a.jsx(ZIe,{initialProps:t.initialProps,children:t.children})}function ZIe(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},s=i.from,o=i.to,l=e.min,c=e.max,u=function(m,v,y){var x,b;(x=e.onDayClick)===null||x===void 0||x.call(e,m,v,y);var S=XIe(m,r);(b=e.onSelect)===null||b===void 0||b.call(e,S,m,v,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],ol(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:eO(s,l-1),before:To(s,l-1)}),s&&o&&d.disabled.push({after:s,before:To(s,l-1)}),!s&&o&&d.disabled.push({after:eO(o,l-1),before:To(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:To(s,-c+1)}),d.disabled.push({after:To(s,c-1)})),s&&o){var f=ud(o,s)+1,p=c-f;d.disabled.push({before:eO(s,p)}),d.disabled.push({after:To(o,p)})}!s&&o&&(d.disabled.push({before:To(o,-c+1)}),d.disabled.push({after:To(o,c-1)}))}return a.jsx(sL.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function aL(){var t=N.useContext(sL);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function V2(t){return Array.isArray(t)?Une([],t):t!==void 0?[t]:[]}function JIe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=V2(i)}),e}var Nu;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Nu||(Nu={}));var eLe=Nu.Selected,uf=Nu.Disabled,tLe=Nu.Hidden,nLe=Nu.Today,nO=Nu.RangeEnd,rO=Nu.RangeMiddle,iO=Nu.RangeStart,rLe=Nu.Outside;function iLe(t,e,n){var r,i=(r={},r[eLe]=V2(t.selected),r[uf]=V2(t.disabled),r[tLe]=V2(t.hidden),r[nLe]=[t.today],r[nO]=[],r[rO]=[],r[iO]=[],r[rLe]=[],r);return t.fromDate&&i[uf].push({before:t.fromDate}),t.toDate&&i[uf].push({after:t.toDate}),D1(t)?i[uf]=i[uf].concat(e.modifiers[uf]):I1(t)&&(i[uf]=i[uf].concat(n.modifiers[uf]),i[iO]=n.modifiers[iO],i[rO]=n.modifiers[rO],i[nO]=n.modifiers[nO]),i}var Gne=N.createContext(void 0);function sLe(t){var e=Si(),n=iL(),r=aL(),i=iLe(e,n,r),s=JIe(e.modifiers),o=Un(Un({},i),s);return a.jsx(Gne.Provider,{value:o,children:t.children})}function Yne(){var t=N.useContext(Gne);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function aLe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function oLe(t){return!!(t&&typeof t=="object"&&"from"in t)}function lLe(t){return!!(t&&typeof t=="object"&&"after"in t)}function cLe(t){return!!(t&&typeof t=="object"&&"before"in t)}function uLe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function dLe(t,e){var n,r=e.from,i=e.to;if(r&&i){var s=ud(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var o=ud(t,r)>=0&&ud(i,t)>=0;return o}return i?ol(i,t):r?ol(r,t):!1}function fLe(t){return JI(t)}function hLe(t){return Array.isArray(t)&&t.every(JI)}function pLe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(fLe(n))return ol(t,n);if(hLe(n))return n.includes(t);if(oLe(n))return dLe(t,n);if(uLe(n))return n.dayOfWeek.includes(t.getDay());if(aLe(n)){var r=ud(n.before,t),i=ud(n.after,t),s=r>0,o=i<0,l=OR(n.before,n.after);return l?o&&s:s||o}return lLe(n)?ud(t,n.after)>0:cLe(n)?ud(n.before,t)>0:typeof n=="function"?n(t):!1})}function oL(t,e,n){var r=Object.keys(e).reduce(function(s,o){var l=e[o];return pLe(t,l)&&s.push(o),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!nL(t,n)&&(i.outside=!0),i}function mLe(t,e){for(var n=cl(t[0]),r=eL(t[t.length-1]),i,s,o=n;o<=r;){var l=oL(o,e),c=!l.disabled&&!l.hidden;if(!c){o=To(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),i||(i=o),o=To(o,1)}return s||i}var gLe=365;function Xne(t,e){var n=e.moveBy,r=e.direction,i=e.context,s=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,p={day:To,week:TR,month:wu,year:k4e,startOfWeek:function(x){return i.ISOWeek?og(x):Sd(x,{locale:f,weekStartsOn:c})},endOfWeek:function(x){return i.ISOWeek?Dne(x):tL(x,{locale:f,weekStartsOn:c})}},m=p[n](t,r==="after"?1:-1);r==="before"&&u?m=T4e([u,m]):r==="after"&&d&&(m=O4e([d,m]));var v=!0;if(s){var y=oL(m,s);v=!y.disabled&&!y.hidden}return v?m:l.count>gLe?l.lastFocused:Xne(m,{moveBy:n,direction:r,context:i,modifiers:s,retry:Un(Un({},l),{count:l.count+1})})}var Qne=N.createContext(void 0);function vLe(t){var e=L1(),n=Yne(),r=N.useState(),i=r[0],s=r[1],o=N.useState(),l=o[0],c=o[1],u=mLe(e.displayMonths,n),d=i??(l&&e.isDateDisplayed(l))?l:u,f=function(){c(i),s(void 0)},p=function(x){s(x)},m=Si(),v=function(x,b){if(i){var S=Xne(i,{moveBy:x,direction:b,context:m,modifiers:n});ol(i,S)||(e.goToDate(S,i),p(S))}},y={focusedDay:i,focusTarget:d,blur:f,focus:p,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return a.jsx(Qne.Provider,{value:y,children:t.children})}function lL(){var t=N.useContext(Qne);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function yLe(t,e){var n=Yne(),r=oL(t,n,e);return r}var cL=N.createContext(void 0);function xLe(t){if(!t_(t.initialProps)){var e={selected:void 0};return a.jsx(cL.Provider,{value:e,children:t.children})}return a.jsx(bLe,{initialProps:t.initialProps,children:t.children})}function bLe(t){var e=t.initialProps,n=t.children,r=function(s,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,o,l)},i={selected:e.selected,onDayClick:r};return a.jsx(cL.Provider,{value:i,children:n})}function Zne(){var t=N.useContext(cL);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function wLe(t,e){var n=Si(),r=Zne(),i=iL(),s=aL(),o=lL(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,p=o.focus,m=o.focusMonthBefore,v=o.focusMonthAfter,y=o.focusYearBefore,x=o.focusYearAfter,b=o.focusStartOfWeek,S=o.focusEndOfWeek,j=function(q){var V,Y,re,Q;t_(n)?(V=r.onDayClick)===null||V===void 0||V.call(r,t,e,q):D1(n)?(Y=i.onDayClick)===null||Y===void 0||Y.call(i,t,e,q):I1(n)?(re=s.onDayClick)===null||re===void 0||re.call(s,t,e,q):(Q=n.onDayClick)===null||Q===void 0||Q.call(n,t,e,q)},E=function(q){var V;p(t),(V=n.onDayFocus)===null||V===void 0||V.call(n,t,e,q)},A=function(q){var V;f(),(V=n.onDayBlur)===null||V===void 0||V.call(n,t,e,q)},P=function(q){var V;(V=n.onDayMouseEnter)===null||V===void 0||V.call(n,t,e,q)},O=function(q){var V;(V=n.onDayMouseLeave)===null||V===void 0||V.call(n,t,e,q)},k=function(q){var V;(V=n.onDayPointerEnter)===null||V===void 0||V.call(n,t,e,q)},C=function(q){var V;(V=n.onDayPointerLeave)===null||V===void 0||V.call(n,t,e,q)},I=function(q){var V;(V=n.onDayTouchCancel)===null||V===void 0||V.call(n,t,e,q)},R=function(q){var V;(V=n.onDayTouchEnd)===null||V===void 0||V.call(n,t,e,q)},D=function(q){var V;(V=n.onDayTouchMove)===null||V===void 0||V.call(n,t,e,q)},L=function(q){var V;(V=n.onDayTouchStart)===null||V===void 0||V.call(n,t,e,q)},z=function(q){var V;(V=n.onDayKeyUp)===null||V===void 0||V.call(n,t,e,q)},W=function(q){var V;switch(q.key){case"ArrowLeft":q.preventDefault(),q.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":q.preventDefault(),q.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":q.preventDefault(),q.stopPropagation(),u();break;case"ArrowUp":q.preventDefault(),q.stopPropagation(),d();break;case"PageUp":q.preventDefault(),q.stopPropagation(),q.shiftKey?y():m();break;case"PageDown":q.preventDefault(),q.stopPropagation(),q.shiftKey?x():v();break;case"Home":q.preventDefault(),q.stopPropagation(),b();break;case"End":q.preventDefault(),q.stopPropagation(),S();break}(V=n.onDayKeyDown)===null||V===void 0||V.call(n,t,e,q)},X={onClick:j,onFocus:E,onBlur:A,onKeyDown:W,onKeyUp:z,onMouseEnter:P,onMouseLeave:O,onPointerEnter:k,onPointerLeave:C,onTouchCancel:I,onTouchEnd:R,onTouchMove:D,onTouchStart:L};return X}function NLe(){var t=Si(),e=Zne(),n=iL(),r=aL(),i=t_(t)?e.selected:D1(t)?n.selected:I1(t)?r.selected:void 0;return i}function SLe(t){return Object.values(Nu).includes(t)}function jLe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(SLe(r)){var s=t.classNames["day_".concat(r)];s&&n.push(s)}}),n}function ELe(t,e){var n=Un({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=Un(Un({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function _Le(t,e,n){var r,i,s,o=Si(),l=lL(),c=yLe(t,e),u=wLe(t,c),d=NLe(),f=!!(o.onDayClick||o.mode!=="default");N.useEffect(function(){var P;c.outside||l.focusedDay&&f&&ol(l.focusedDay,t)&&((P=n.current)===null||P===void 0||P.focus())},[l.focusedDay,t,n,f,c.outside]);var p=jLe(o,c).join(" "),m=ELe(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(s=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:KIe,x=a.jsx(y,{date:t,displayMonth:e,activeModifiers:c}),b={style:m,className:p,children:x,role:"gridcell"},S=l.focusTarget&&ol(l.focusTarget,t)&&!c.outside,j=l.focusedDay&&ol(l.focusedDay,t),E=Un(Un(Un({},b),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=j||S?0:-1,r)),u),A={isButton:f,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:b};return A}function CLe(t){var e=N.useRef(null),n=_Le(t.date,t.displayMonth,e);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(AS,Un({name:"day",ref:e},n.buttonProps)):a.jsx("div",Un({},n.divProps))}function ALe(t){var e=t.number,n=t.dates,r=Si(),i=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return a.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var f=c(Number(e),{locale:l}),p=function(m){i(e,n,m)};return a.jsx(AS,{name:"week-number","aria-label":f,className:o.weeknumber,style:s.weeknumber,onClick:p,children:d})}function kLe(t){var e,n,r=Si(),i=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l?.Day)!==null&&e!==void 0?e:CLe,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:ALe,d;return o&&(d=a.jsx("td",{className:s.cell,style:i.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:s.row,style:i.row,children:[d,t.dates.map(function(f){return a.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:f})},kDe(f))})]})}function FU(t,e,n){for(var r=n?.ISOWeek?Dne(e):tL(e,n),i=n?.ISOWeek?og(t):Sd(t,n),s=ud(r,i),o=[],l=0;l<=s;l++)o.push(To(i,l));var c=o.reduce(function(u,d){var f=n?.ISOWeek?Fne(d):$ne(d,n),p=u.find(function(m){return m.weekNumber===f});return p?(p.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function TLe(t,e){var n=FU(cl(t),eL(t),e);if(e?.useFixedWeeks){var r=ODe(t,e);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],o=TR(s,6-r),l=FU(TR(s,1),o,e);n.push.apply(n,l)}}return n}function OLe(t){var e,n,r,i=Si(),s=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,p=i.firstWeekContainsDate,m=i.ISOWeek,v=TLe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:f,firstWeekContainsDate:p}),y=(e=d?.Head)!==null&&e!==void 0?e:WIe,x=(n=d?.Row)!==null&&n!==void 0?n:kLe,b=(r=d?.Footer)!==null&&r!==void 0?r:UIe;return a.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(y,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(S){return a.jsx(x,{displayMonth:t.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),a.jsx(b,{displayMonth:t.displayMonth})]})}function PLe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var MLe=PLe()?N.useLayoutEffect:N.useEffect,sO=!1,RLe=0;function BU(){return"react-day-picker-".concat(++RLe)}function DLe(t){var e,n=t??(sO?BU():null),r=N.useState(n),i=r[0],s=r[1];return MLe(function(){i===null&&s(BU())},[]),N.useEffect(function(){sO===!1&&(sO=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function ILe(t){var e,n,r=Si(),i=r.dir,s=r.classNames,o=r.styles,l=r.components,c=L1().displayMonths,u=DLe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[s.month],p=o.month,m=t.displayIndex===0,v=t.displayIndex===c.length-1,y=!m&&!v;i==="rtl"&&(e=[m,v],v=e[0],m=e[1]),m&&(f.push(s.caption_start),p=Un(Un({},p),o.caption_start)),v&&(f.push(s.caption_end),p=Un(Un({},p),o.caption_end)),y&&(f.push(s.caption_between),p=Un(Un({},p),o.caption_between));var x=(n=l?.Caption)!==null&&n!==void 0?n:qIe;return a.jsxs("div",{className:f.join(" "),style:p,children:[a.jsx(x,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(OLe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function LLe(t){var e=Si(),n=e.classNames,r=e.styles;return a.jsx("div",{className:n.months,style:r.months,children:t.children})}function FLe(t){var e,n,r=t.initialProps,i=Si(),s=lL(),o=L1(),l=N.useState(!1),c=l[0],u=l[1];N.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=Un(Un({},i.styles.root),i.style),p=Object.keys(r).filter(function(v){return v.startsWith("data-")}).reduce(function(v,y){var x;return Un(Un({},v),(x={},x[y]=r[y],x))},{}),m=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:LLe;return a.jsx("div",Un({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:a.jsx(m,{children:o.displayMonths.map(function(v,y){return a.jsx(ILe,{displayIndex:y,displayMonth:v},y)})})}))}function BLe(t){var e=t.children,n=cIe(t,["children"]);return a.jsx(AIe,{initialProps:n,children:a.jsx(FIe,{children:a.jsx(xLe,{initialProps:n,children:a.jsx(GIe,{initialProps:n,children:a.jsx(QIe,{initialProps:n,children:a.jsx(sLe,{children:a.jsx(vLe,{children:e})})})})})})})}function $Le(t){return a.jsx(BLe,Un({},t,{children:a.jsx(FLe,{initialProps:t})}))}function PR({className:t,classNames:e,showOutsideDays:n=!0,...r}){return a.jsx($Le,{showOutsideDays:n,className:ft("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ft(l0({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ft(l0({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:i,...s})=>a.jsx(yfe,{className:ft("h-4 w-4",i),...s}),IconRight:({className:i,...s})=>a.jsx(SG,{className:ft("h-4 w-4",i),...s})},...r})}PR.displayName="Calendar";var n_="Popover",[Jne]=Gs(n_,[Ep]),F1=Ep(),[zLe,Dp]=Jne(n_),ere=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,l=F1(e),c=N.useRef(null),[u,d]=N.useState(!1),[f,p]=Ro({prop:r,defaultProp:i??!1,onChange:s,caller:n_});return a.jsx(Kj,{...l,children:a.jsx(zLe,{scope:e,contentId:Hs(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:u,onCustomAnchorAdd:N.useCallback(()=>d(!0),[]),onCustomAnchorRemove:N.useCallback(()=>d(!1),[]),modal:o,children:n})})};ere.displayName=n_;var tre="PopoverAnchor",qLe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Dp(tre,n),s=F1(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return N.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(b1,{...s,...r,ref:e})});qLe.displayName=tre;var nre="PopoverTrigger",rre=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Dp(nre,n),s=F1(n),o=_n(e,i.triggerRef),l=a.jsx(Lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lre(i.open),...r,ref:o,onClick:bt(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:a.jsx(b1,{asChild:!0,...s,children:l})});rre.displayName=nre;var uL="PopoverPortal",[ULe,HLe]=Jne(uL,{forceMount:void 0}),ire=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Dp(uL,e);return a.jsx(ULe,{scope:e,forceMount:n,children:a.jsx(ua,{present:n||s.open,children:a.jsx(Xy,{asChild:!0,container:i,children:r})})})};ire.displayName=uL;var By="PopoverContent",sre=N.forwardRef((t,e)=>{const n=HLe(By,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Dp(By,t.__scopePopover);return a.jsx(ua,{present:r||s.open,children:s.modal?a.jsx(WLe,{...i,ref:e}):a.jsx(KLe,{...i,ref:e})})});sre.displayName=By;var VLe=hp("PopoverContent.RemoveScroll"),WLe=N.forwardRef((t,e)=>{const n=Dp(By,t.__scopePopover),r=N.useRef(null),i=_n(e,r),s=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return rE(o)},[]),a.jsx(N1,{as:VLe,allowPinchZoom:!0,children:a.jsx(are,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(t.onCloseAutoFocus,o=>{o.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:bt(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:bt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),KLe=N.forwardRef((t,e)=>{const n=Dp(By,t.__scopePopover),r=N.useRef(!1),i=N.useRef(!1);return a.jsx(are,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),are=N.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,p=Dp(By,n),m=F1(n);return tE(),a.jsx(w1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(vg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:a.jsx(Gj,{"data-state":lre(p.open),role:"dialog",id:p.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ore="PopoverClose",GLe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Dp(ore,n);return a.jsx(Lt.button,{type:"button",...r,ref:e,onClick:bt(t.onClick,()=>i.onOpenChange(!1))})});GLe.displayName=ore;var YLe="PopoverArrow",XLe=N.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=F1(n);return a.jsx(Yj,{...i,...r,ref:e})});XLe.displayName=YLe;function lre(t){return t?"open":"closed"}var QLe=ere,ZLe=rre,JLe=ire,cre=sre;const Lv=QLe,Fv=ZLe,Tm=N.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>a.jsx(JLe,{children:a.jsx(cre,{ref:i,align:e,sideOffset:n,className:ft("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));Tm.displayName=cre.displayName;function e3e({taskId:t,currentUser:e}){const{toast:n}=Dr(),[r,i]=N.useState(""),[s,o]=N.useState(null),[l,c]=N.useState(""),[u,d]=N.useState(null),[f,p]=N.useState(!1),{data:m,isLoading:v}=Wt({queryKey:[`/api/tasks/${t}/comments`],enabled:!!t}),y=$t({mutationFn:async O=>await Rt("POST",`/api/tasks/${t}/comments`,{contenido:O}),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario agregado exitosamente"}),i(""),p(!1)},onError:()=>{n({title:"Error al agregar comentario",variant:"destructive"}),p(!1)}}),x=$t({mutationFn:async({id:O,content:k})=>await Rt("PATCH",`/api/tasks/${t}/comments/${O}`,{contenido:k}),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario actualizado exitosamente"}),o(null),c("")},onError:()=>{n({title:"Error al actualizar comentario",variant:"destructive"})}}),b=$t({mutationFn:async O=>await Rt("DELETE",`/api/tasks/${t}/comments/${O}`),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario eliminado exitosamente"}),d(null)},onError:()=>{n({title:"Error al eliminar comentario",variant:"destructive"})}}),S=()=>{if(!r.trim()){n({title:"El comentario no puede estar vaco",variant:"destructive"});return}p(!0),y.mutate(r)},j=O=>{if(!l.trim()){n({title:"El comentario no puede estar vaco",variant:"destructive"});return}x.mutate({id:O,content:l})},E=O=>{b.mutate(O)},A=(O,k)=>{o(O),c(k)},P=()=>{o(null),c("")};return v?a.jsx("div",{className:"space-y-4",children:[...Array(3)].map((O,k)=>a.jsxs("div",{className:"flex gap-3 animate-pulse",children:[a.jsx("div",{className:"w-10 h-10 bg-secondary rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary rounded w-1/4"}),a.jsx("div",{className:"h-12 bg-secondary rounded"})]})]},k))}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[a.jsxs("div",{className:"flex gap-3 mb-3",children:[a.jsx(vN,{className:"h-10 w-10",children:a.jsx(yN,{children:e?.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:e?.username||"Annimo"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ahora"})]})]}),a.jsx(Do,{value:r,onChange:O=>i(O.target.value),placeholder:"Escribe un comentario...",rows:3,className:"resize-none"}),a.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[a.jsx(pe,{onClick:()=>i(""),variant:"outline",size:"sm",children:"Cancelar"}),a.jsxs(pe,{onClick:S,size:"sm",disabled:!r.trim()||f,children:[f&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),a.jsx(y1,{className:"w-4 h-4 mr-2"}),"Comentar"]})]})]}),a.jsx("div",{className:"space-y-4",children:m&&m.length>0?m.map(O=>a.jsxs("div",{className:"border rounded-lg p-4 bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(vN,{className:"h-10 w-10",children:a.jsx(yN,{children:O.usuario?.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium",children:O.usuario?.username||"Annimo"}),e?.id===O.usuarioId&&a.jsx(ct,{variant:"secondary",className:"text-xs",children:"T"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[qa(new Date(O.createdAt),"PPpp",{locale:vc}),new Date(O.updatedAt).getTime()>new Date(O.createdAt).getTime()&&a.jsx("span",{className:"ml-2",children:"(editado)"})]})]}),e?.id===O.usuarioId&&a.jsx("div",{className:"flex gap-1",children:s===O.id?a.jsxs(a.Fragment,{children:[a.jsxs(pe,{onClick:()=>j(O.id),size:"sm",variant:"ghost",disabled:x.isPending,children:[x.isPending&&a.jsx(rp,{className:"w-4 h-4 animate-spin"}),!x.isPending&&"Guardar"]}),a.jsx(pe,{onClick:P,size:"sm",variant:"ghost",children:"Cancelar"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pe,{onClick:()=>A(O.id,O.contenido),size:"sm",variant:"ghost",children:a.jsx(Kfe,{className:"w-4 h-4"})}),a.jsx(pe,{onClick:()=>d(O.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",children:a.jsx(Wi,{className:"w-4 h-4"})})]})})]}),s===O.id?a.jsx(Do,{value:l,onChange:k=>c(k.target.value),rows:3,className:"resize-none"}):a.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:O.contenido})]},O.id)):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("p",{children:"No hay comentarios an"}),a.jsx("p",{className:"text-xs",children:"S el primero en comentar"})]})}),a.jsx(Td,{open:!!u,onOpenChange:()=>d(null),children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Eliminar comentario"}),a.jsx(Tu,{children:"Ests seguro de que deseas eliminar este comentario? Esta accin no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:()=>u&&E(u),className:"bg-destructive hover:bg-destructive/90",disabled:b.isPending,children:[b.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const t3e=t=>t.startsWith("image/")?a.jsx(rD,{className:"w-4 h-4"}):t.startsWith("audio/")?a.jsx(Hfe,{className:"w-4 h-4"}):t.startsWith("video/")?a.jsx(ihe,{className:"w-4 h-4"}):t.includes("pdf")||t.includes("word")||t.includes("spreadsheet")?a.jsx(Vi,{className:"w-4 h-4"}):t.includes("zip")||t.includes("compressed")||t.includes("archive")?a.jsx(pfe,{className:"w-4 h-4"}):a.jsx(kG,{className:"w-4 h-4"}),n3e=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]};function r3e({taskId:t}){const{toast:e}=Dr(),n=N.useRef(null),[r,i]=N.useState(null),[s,o]=N.useState(!1),{data:l,isLoading:c}=Wt({queryKey:[`/api/tasks/${t}/attachments`],enabled:!!t}),u=$t({mutationFn:async x=>{const b=new FormData;b.append("file",x);const S=await fetch(`/api/tasks/${t}/attachments`,{method:"POST",body:b,headers:{}});if(!S.ok)throw new Error("Upload failed");return S.json()},onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/attachments`]}),e({title:"Archivo cargado exitosamente"}),n.current&&(n.current.value="")},onError:()=>{e({title:"Error al cargar archivo",variant:"destructive"})}}),d=$t({mutationFn:async x=>await Rt("DELETE",`/api/tasks/${t}/attachments/${x}`),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/attachments`]}),e({title:"Archivo eliminado exitosamente"}),i(null)},onError:()=>{e({title:"Error al eliminar archivo",variant:"destructive"})}}),f=x=>{if(x.size>10485760){e({title:"Archivo demasiado grande",description:"El archivo no puede superar 10MB",variant:"destructive"});return}u.mutate(x)},p=x=>{const b=x.target.files?.[0];b&&f(b)},m=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?o(!0):x.type==="dragleave"&&o(!1)},v=x=>{x.preventDefault(),x.stopPropagation(),o(!1);const b=x.dataTransfer.files?.[0];b&&f(b)},y=x=>{const b=document.createElement("a");b.href=x.filePath,b.download=x.originalName,document.body.appendChild(b),b.click(),document.body.removeChild(b)};return c?a.jsx("div",{className:"space-y-4",children:[...Array(2)].map((x,b)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-secondary rounded-lg animate-pulse",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-primary rounded w-1/3"}),a.jsx("div",{className:"h-3 bg-primary rounded w-1/4"})]})]},b))}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:v,className:`border-2 border-dashed rounded-lg p-6 text-center transition-all ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[a.jsx("input",{ref:n,type:"file",onChange:p,className:"hidden",disabled:u.isPending}),a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Oo,{className:"w-8 h-8 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Arrastra archivos aqu o haz clic para seleccionar"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Mximo 10MB por archivo"})]}),a.jsxs(pe,{onClick:()=>n.current?.click(),size:"sm",className:"mt-2",disabled:u.isPending,children:[u.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),u.isPending?"Cargando...":"Seleccionar archivo"]})]})]}),a.jsx("div",{className:"space-y-2",children:l&&l.length>0?l.map(x=>a.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 text-muted-foreground",children:t3e(x.fileType)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:x.originalName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:n3e(x.fileSize)})]}),a.jsx(ct,{variant:"secondary",className:"text-xs flex-shrink-0",children:x.fileType.split("/")[1]?.toUpperCase()||"FILE"}),a.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[a.jsx(pe,{onClick:()=>y(x),size:"sm",variant:"ghost",title:"Descargar",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsx(pe,{onClick:()=>i(x.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",title:"Eliminar",children:a.jsx(Wi,{className:"w-4 h-4"})})]})]},x.id)):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(kG,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay archivos adjuntos"}),a.jsx("p",{className:"text-xs",children:"Carga tu primer archivo"})]})}),a.jsx(Td,{open:!!r,onOpenChange:()=>i(null),children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Eliminar archivo"}),a.jsx(Tu,{children:"Ests seguro de que deseas eliminar este archivo? Esta accin no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:()=>r&&d.mutate(r),className:"bg-destructive hover:bg-destructive/90",disabled:d.isPending,children:[d.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const t2=t=>{const e=Math.floor(t/60),n=t%60;return`${e}h ${n}m`};function i3e({taskId:t,estimatedMinutes:e=null}){const{toast:n}=Dr(),[r,i]=N.useState(!1),[s,o]=N.useState(0),[l,c]=N.useState(!1),[u,d]=N.useState(""),[f,p]=N.useState(""),[m,v]=N.useState(null),{data:y,isLoading:x}=Wt({queryKey:[`/api/tasks/${t}/time-entries`],enabled:!!t});N.useEffect(()=>{let I;return r&&(I=setInterval(()=>{o(R=>R+1)},1e3)),()=>clearInterval(I)},[r]);const b=$t({mutationFn:async I=>await Rt("POST",`/api/tasks/${t}/time-entries`,I),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/time-entries`]}),n({title:"Tiempo registrado exitosamente"}),P()},onError:()=>{n({title:"Error al registrar tiempo",variant:"destructive"})}}),S=$t({mutationFn:async I=>await Rt("DELETE",`/api/tasks/${t}/time-entries/${I}`),onSuccess:()=>{cn.invalidateQueries({queryKey:[`/api/tasks/${t}/time-entries`]}),n({title:"Tiempo eliminado exitosamente"}),v(null)},onError:()=>{n({title:"Error al eliminar tiempo",variant:"destructive"})}}),j=()=>{i(!r)},E=()=>{if(s===0){n({title:"El temporizador est en cero",variant:"destructive"});return}const I=Math.round(s/60);b.mutate({duration:I,description:"Tiempo registrado desde el temporizador"}),i(!1),o(0)},A=()=>{if(!u||parseInt(u)<=0){n({title:"Ingresa una cantidad vlida de minutos",variant:"destructive"});return}b.mutate({duration:parseInt(u),description:f||"Tiempo registrado manualmente"})},P=()=>{d(""),p(""),c(!1)},O=(y||[]).reduce((I,R)=>I+R.duration,0),k=e&&e>0?Math.round(O/e*100):0,C=e&&O>e;return x?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-32 bg-secondary rounded-lg animate-pulse"}),a.jsx("div",{className:"h-48 bg-secondary rounded-lg animate-pulse"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Temporizador"})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"text-6xl font-mono font-bold",children:[String(Math.floor(s/3600)).padStart(2,"0"),":",String(Math.floor(s%3600/60)).padStart(2,"0"),":",String(s%60).padStart(2,"0")]})}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx(pe,{onClick:j,size:"sm",variant:r?"destructive":"default",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Wfe,{className:"w-4 h-4 mr-2"}),"Pausar"]}):a.jsxs(a.Fragment,{children:[a.jsx(DG,{className:"w-4 h-4 mr-2"}),"Iniciar"]})}),a.jsxs(pe,{onClick:E,size:"sm",variant:"outline",disabled:s===0||b.isPending,children:[b.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),a.jsx(Qfe,{className:"w-4 h-4 mr-2"}),"Registrar"]})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{className:"text-lg",children:"Resumen"})}),a.jsxs(Qe,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tiempo Total:"}),a.jsx("span",{className:"text-2xl font-bold",children:t2(O)})]}),e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tiempo Estimado:"}),a.jsx("span",{className:"text-lg font-semibold",children:t2(e)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Progreso:"}),a.jsxs(ct,{variant:C?"destructive":"default",className:"text-xs",children:[k,"%",C&&" (+exceso)"]})]}),a.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all ${C?"bg-destructive":"bg-primary"}`,style:{width:`${Math.min(k,100)}%`}})}),C&&a.jsxs("p",{className:"text-xs text-destructive",children:["Has excedido el tiempo estimado por"," ",t2(O-e)]})]})]})]}),a.jsxs(xr,{open:l,onOpenChange:c,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{variant:"outline",className:"w-full",children:[a.jsx(Ri,{className:"w-4 h-4 mr-2"}),"Agregar Tiempo Manualmente"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Agregar Tiempo Manualmente"}),a.jsx(_r,{children:"Registra tiempo que hayas trabajado fuera del temporizador"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"minutes",children:"Minutos"}),a.jsx(Ye,{id:"minutes",type:"number",value:u,onChange:I=>d(I.target.value),placeholder:"0",min:"1"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"description",children:"Descripcin (opcional)"}),a.jsx(Ye,{id:"description",value:f,onChange:I=>p(I.target.value),placeholder:"Describe qu hiciste..."})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(pe,{variant:"outline",onClick:()=>P(),children:"Cancelar"}),a.jsxs(pe,{onClick:A,disabled:b.isPending,children:[b.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),"Agregar"]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{className:"text-lg flex items-center gap-2",children:[a.jsx(_c,{className:"w-4 h-4"}),"Historial de Tiempo"]})}),a.jsx(Qe,{children:y&&y.length>0?a.jsx("div",{className:"space-y-2",children:y.map(I=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:t2(I.duration)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:I.description}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:qa(new Date(I.createdAt),"PPp",{locale:vc})})]}),a.jsx(pe,{onClick:()=>v(I.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",children:a.jsx(Wi,{className:"w-4 h-4"})})]},I.id))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(_c,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay registros de tiempo"})]})})]}),a.jsx(Td,{open:!!m,onOpenChange:()=>v(null),children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Eliminar registro de tiempo"}),a.jsx(Tu,{children:"Ests seguro de que deseas eliminar este registro? Esta accin no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:()=>m&&S.mutate(m),className:"bg-destructive hover:bg-destructive/90",disabled:S.isPending,children:[S.isPending&&a.jsx(rp,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const $U={BAJA:"#94a3b8",MEDIA:"#f59e0b",ALTA:"#ef4444"},zU={PENDIENTE:"#64748b",EN_PROGRESO:"#3b82f6",COMPLETADA:"#10b981",CANCELADA:"#ef4444"},s3e=["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#06b6d4","#64748b"];function a3e({task:t,isOpen:e,onClose:n,clients:r=[],users:i=[]}){const{toast:s}=Dr(),[o,l]=N.useState("details"),[c,u]=N.useState(!1),[d,f]=N.useState({titulo:t?.titulo||"",descripcion:t?.descripcion||"",clienteId:t?.clienteId||"",asignadoA:t?.asignadoA||"",prioridad:t?.prioridad||"MEDIA",estado:t?.estado||"PENDIENTE",visibilidad:t?.visibilidad||"GENERAL",fechaVencimiento:t?.fechaVencimiento||"",progreso:t?.progreso||0,color:t?.color||null,etiquetas:t?.etiquetas||[],estimatedMinutes:t?.estimatedMinutes||null}),[p,m]=N.useState(t?.fechaInicio?new Date(t.fechaInicio):void 0),[v,y]=N.useState(t?.fechaVencimiento?new Date(t.fechaVencimiento):void 0),x=$t({mutationFn:async j=>{if(!t?.id)throw new Error("No task ID");return await Rt("PATCH",`/api/tasks/${t.id}`,j)},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/tasks"]}),s({title:"Tarea actualizada exitosamente"}),u(!1)},onError:()=>{s({title:"Error al actualizar tarea",variant:"destructive"})}}),b=()=>{const j={...d,fechaInicio:p?.toISOString(),fechaVencimiento:v?.toISOString()};x.mutate(j)},S=()=>{t&&(f({titulo:t.titulo,descripcion:t.descripcion||"",clienteId:t.clienteId||"",asignadoA:t.asignadoA||"",prioridad:t.prioridad,estado:t.estado,visibilidad:t.visibilidad,fechaVencimiento:t.fechaVencimiento||"",progreso:t.progreso||0,color:t.color||null,etiquetas:t.etiquetas||[],estimatedMinutes:t.estimatedMinutes||null}),m(t.fechaInicio?new Date(t.fechaInicio):void 0),y(t.fechaVencimiento?new Date(t.fechaVencimiento):void 0)),u(!1)};return t?a.jsx(xr,{open:e,onOpenChange:n,children:a.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(br,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[c?a.jsx(Ye,{value:d.titulo,onChange:j=>f({...d,titulo:j.target.value}),className:"text-xl font-semibold",placeholder:"Ttulo de la tarea"}):a.jsx(wr,{className:"text-2xl",children:t.titulo}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs(ct,{variant:"outline",children:["#",t.id.slice(0,8)]}),a.jsx(ct,{style:{backgroundColor:zU[t.estado]+"20",color:zU[t.estado]},children:t.estado.replace("_"," ")}),a.jsx(ct,{style:{backgroundColor:$U[t.prioridad]+"20",color:$U[t.prioridad]},children:t.prioridad})]})]}),a.jsx("div",{className:"flex gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsxs(pe,{onClick:b,size:"sm",children:[a.jsx($j,{className:"w-4 h-4 mr-2"}),"Guardar"]}),a.jsxs(pe,{onClick:S,variant:"outline",size:"sm",children:[a.jsx(Gm,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]}):a.jsx(pe,{onClick:()=>u(!0),size:"sm",children:"Editar"})})]})}),a.jsxs(kc,{value:o,onValueChange:l,className:"mt-4",children:[a.jsxs(ql,{className:"grid w-full grid-cols-6",children:[a.jsxs(Wn,{value:"details",children:[a.jsx(zv,{className:"w-4 h-4 mr-2"}),"Detalles"]}),a.jsxs(Wn,{value:"subtasks",children:[a.jsx(zv,{className:"w-4 h-4 mr-2"}),"Subtareas"]}),a.jsxs(Wn,{value:"comments",children:[a.jsx(EF,{className:"w-4 h-4 mr-2"}),"Comentarios"]}),a.jsxs(Wn,{value:"attachments",children:[a.jsx(pp,{className:"w-4 h-4 mr-2"}),"Adjuntos"]}),a.jsxs(Wn,{value:"time",children:[a.jsx(_c,{className:"w-4 h-4 mr-2"}),"Tiempo"]}),a.jsxs(Wn,{value:"activity",children:[a.jsx(Wm,{className:"w-4 h-4 mr-2"}),"Historial"]})]}),a.jsx(or,{value:"details",className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(_e,{children:"Descripcin"}),c?a.jsx(Do,{value:d.descripcion,onChange:j=>f({...d,descripcion:j.target.value}),rows:4,placeholder:"Descripcin de la tarea..."}):a.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:t.descripcion||"Sin descripcin"})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Cliente"}),c?a.jsxs(Fn,{value:d.clienteId,onValueChange:j=>f({...d,clienteId:j}),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar cliente"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"",children:"Sin cliente"}),r.map(j=>a.jsx(lt,{value:j.id,children:j.razonSocial},j.id))]})]}):a.jsx("p",{className:"text-sm mt-1",children:r.find(j=>j.id===t.clienteId)?.razonSocial||"Sin cliente"})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Asignado a"}),c?a.jsxs(Fn,{value:d.asignadoA,onValueChange:j=>f({...d,asignadoA:j}),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar usuario"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"",children:"Sin asignar"}),i.map(j=>a.jsx(lt,{value:j.id,children:j.username},j.id))]})]}):a.jsx("p",{className:"text-sm mt-1",children:i.find(j=>j.id===t.asignadoA)?.username||"Sin asignar"})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Prioridad"}),c?a.jsxs(Fn,{value:d.prioridad,onValueChange:j=>f({...d,prioridad:j}),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"BAJA",children:"Baja"}),a.jsx(lt,{value:"MEDIA",children:"Media"}),a.jsx(lt,{value:"ALTA",children:"Alta"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.prioridad})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Estado"}),c?a.jsxs(Fn,{value:d.estado,onValueChange:j=>f({...d,estado:j}),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(lt,{value:"EN_PROGRESO",children:"En Progreso"}),a.jsx(lt,{value:"COMPLETADA",children:"Completada"}),a.jsx(lt,{value:"CANCELADA",children:"Cancelada"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.estado.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Fecha de Inicio"}),c?a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsxs(pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[a.jsx(uN,{className:"mr-2 h-4 w-4"}),p?qa(p,"PPP",{locale:vc}):a.jsx("span",{children:"Seleccionar fecha"})]})}),a.jsx(Tm,{className:"w-auto p-0",children:a.jsx(PR,{mode:"single",selected:p,onSelect:m,locale:vc,initialFocus:!0})})]}):a.jsx("p",{className:"text-sm mt-1",children:t.fechaInicio?qa(new Date(t.fechaInicio),"PPP",{locale:vc}):"Sin fecha"})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Fecha de Vencimiento"}),c?a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsxs(pe,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[a.jsx(uN,{className:"mr-2 h-4 w-4"}),v?qa(v,"PPP",{locale:vc}):a.jsx("span",{children:"Seleccionar fecha"})]})}),a.jsx(Tm,{className:"w-auto p-0",children:a.jsx(PR,{mode:"single",selected:v,onSelect:y,locale:vc,initialFocus:!0})})]}):a.jsx("p",{className:"text-sm mt-1",children:t.fechaVencimiento?qa(new Date(t.fechaVencimiento),"PPP",{locale:vc}):"Sin fecha"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs(_e,{children:["Progreso: ",d.progreso,"%"]}),c?a.jsx(Pne,{value:[d.progreso],onValueChange:j=>f({...d,progreso:j[0]}),max:100,step:5,className:"mt-2"}):a.jsx("div",{className:"w-full bg-secondary h-2 rounded-full mt-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${t.progreso||0}%`}})})]}),c&&a.jsxs("div",{className:"col-span-2",children:[a.jsxs(_e,{className:"flex items-center gap-2",children:[a.jsx(cD,{className:"w-4 h-4"}),"Color de la Tarea"]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[s3e.map(j=>a.jsx("button",{onClick:()=>f({...d,color:j}),className:"w-8 h-8 rounded-full border-2 transition-all hover:scale-110",style:{backgroundColor:j,borderColor:d.color===j?"#000":"transparent"}},j)),a.jsx("button",{onClick:()=>f({...d,color:null}),className:"w-8 h-8 rounded-full border-2 bg-white transition-all hover:scale-110",style:{borderColor:d.color?"#e5e7eb":"#000"},children:a.jsx(Gm,{className:"w-4 h-4 mx-auto text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Tiempo Estimado (minutos)"}),c?a.jsx(Ye,{type:"number",value:d.estimatedMinutes||"",onChange:j=>f({...d,estimatedMinutes:j.target.value?parseInt(j.target.value):null}),placeholder:"0"}):a.jsx("p",{className:"text-sm mt-1",children:t.estimatedMinutes?`${t.estimatedMinutes} min`:"No estimado"})]}),a.jsxs("div",{children:[a.jsx(_e,{children:"Visibilidad"}),c?a.jsxs(Fn,{value:d.visibilidad,onValueChange:j=>f({...d,visibilidad:j}),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"GENERAL",children:"General"}),a.jsx(lt,{value:"PERSONAL",children:"Personal"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.visibilidad})]})]})}),a.jsx(or,{value:"subtasks",children:a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(zv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Funcin de subtareas prximamente"})]})}),a.jsx(or,{value:"comments",children:t?.id?a.jsx(e3e,{taskId:t.id,currentUser:i?.[0]}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(EF,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(or,{value:"attachments",children:t?.id?a.jsx(r3e,{taskId:t.id}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(pp,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(or,{value:"time",children:t?.id?a.jsx(i3e,{taskId:t.id,estimatedMinutes:t.estimatedMinutes}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(_c,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(or,{value:"activity",children:a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Wm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Funcin de historial prximamente"})]})})]})]})}):null}function o3e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const r_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mx(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function dL(t){return"nodeType"in t}function hl(t){var e,n;return t?mx(t)?t:dL(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function fL(t){const{Document:e}=hl(t);return t instanceof e}function B1(t){return mx(t)?!1:t instanceof hl(t).HTMLElement}function ure(t){return t instanceof hl(t).SVGElement}function gx(t){return t?mx(t)?t.document:dL(t)?fL(t)?t:B1(t)||ure(t)?t.ownerDocument:document:document:document}const jd=r_?N.useLayoutEffect:N.useEffect;function hL(t){const e=N.useRef(t);return jd(()=>{e.current=t}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function l3e(){const t=N.useRef(null),e=N.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=N.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function X0(t,e){e===void 0&&(e=[t]);const n=N.useRef(t);return jd(()=>{n.current!==t&&(n.current=t)},e),n}function $1(t,e){const n=N.useRef();return N.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function kS(t){const e=hL(t),n=N.useRef(null),r=N.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function MR(t){const e=N.useRef();return N.useEffect(()=>{e.current=t},[t]),e.current}let aO={};function z1(t,e){return N.useMemo(()=>{if(e)return e;const n=aO[t]==null?0:aO[t]+1;return aO[t]=n,t+"-"+n},[t,e])}function dre(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=s[c];d!=null&&(s[c]=d+t*u)}return s},{...e})}}const Qv=dre(1),Q0=dre(-1);function c3e(t){return"clientX"in t&&"clientY"in t}function pL(t){if(!t)return!1;const{KeyboardEvent:e}=hl(t.target);return e&&t instanceof e}function u3e(t){if(!t)return!1;const{TouchEvent:e}=hl(t.target);return e&&t instanceof e}function RR(t){if(u3e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return c3e(t)?{x:t.clientX,y:t.clientY}:null}const $y=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[$y.Translate.toString(t),$y.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),qU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function d3e(t){return t.matches(qU)?t:t.querySelector(qU)}const f3e={display:"none"};function h3e(t){let{id:e,value:n}=t;return ve.createElement("div",{id:e,style:f3e},n)}function p3e(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function m3e(){const[t,e]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const fre=N.createContext(null);function g3e(t){const e=N.useContext(fre);N.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function v3e(){const[t]=N.useState(()=>new Set),e=N.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[N.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const y3e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x3e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function b3e(t){let{announcements:e=x3e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=y3e}=t;const{announce:s,announcement:o}=m3e(),l=z1("DndLiveRegion"),[c,u]=N.useState(!1);if(N.useEffect(()=>{u(!0)},[]),g3e(N.useMemo(()=>({onDragStart(f){let{active:p}=f;s(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:m}=f;e.onDragMove&&s(e.onDragMove({active:p,over:m}))},onDragOver(f){let{active:p,over:m}=f;s(e.onDragOver({active:p,over:m}))},onDragEnd(f){let{active:p,over:m}=f;s(e.onDragEnd({active:p,over:m}))},onDragCancel(f){let{active:p,over:m}=f;s(e.onDragCancel({active:p,over:m}))}}),[s,e])),!c)return null;const d=ve.createElement(ve.Fragment,null,ve.createElement(h3e,{id:r,value:i.draggable}),ve.createElement(p3e,{id:l,announcement:o}));return n?hu.createPortal(d,n):d}var ia;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ia||(ia={}));function TS(){}function zy(t,e){return N.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function mL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return N.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Su=Object.freeze({x:0,y:0});function hre(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pre(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function w3e(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function UU(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function mre(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function HU(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const gre=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=HU(e,e.left,e.top),s=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=hre(HU(c),i);s.push({id:l,data:{droppableContainer:o,value:u}})}}return s.sort(pre)},vre=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=UU(e),s=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=UU(c),d=i.reduce((p,m,v)=>p+hre(u[v],m),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:o,value:f}})}}return s.sort(pre)};function N3e(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const c=e.width*e.height,u=t.width*t.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const S3e=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const c=N3e(l,e);c>0&&i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort(w3e)};function j3e(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function yre(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Su}function E3e(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const _3e=E3e(1);function C3e(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function A3e(t,e,n){const r=C3e(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,c=t.left-o-(1-i)*parseFloat(n),u=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const k3e={ignoreTransform:!1};function vx(t,e){e===void 0&&(e=k3e);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=hl(t).getComputedStyle(t);u&&(n=A3e(n,u,d))}const{top:r,left:i,width:s,height:o,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:c}}function VU(t){return vx(t,{ignoreTransform:!0})}function T3e(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function O3e(t,e){return e===void 0&&(e=hl(t).getComputedStyle(t)),e.position==="fixed"}function P3e(t,e){e===void 0&&(e=hl(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function i_(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(fL(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!B1(i)||ure(i)||n.includes(i))return n;const s=hl(t).getComputedStyle(i);return i!==t&&P3e(i,s)&&n.push(i),O3e(i,s)?n:r(i.parentNode)}return t?r(t):n}function xre(t){const[e]=i_(t,1);return e??null}function oO(t){return!r_||!t?null:mx(t)?t:dL(t)?fL(t)||t===gx(t).scrollingElement?window:B1(t)?t:null:null}function bre(t){return mx(t)?t.scrollX:t.scrollLeft}function wre(t){return mx(t)?t.scrollY:t.scrollTop}function DR(t){return{x:bre(t),y:wre(t)}}var Sa;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Sa||(Sa={}));function Nre(t){return!r_||!t?!1:t===document.scrollingElement}function Sre(t){const e={x:0,y:0},n=Nre(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const M3e={x:.2,y:.2};function R3e(t,e,n,r,i){let{top:s,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=M3e);const{isTop:u,isBottom:d,isLeft:f,isRight:p}=Sre(t),m={x:0,y:0},v={x:0,y:0},y={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+y.height?(m.y=Sa.Backward,v.y=r*Math.abs((e.top+y.height-s)/y.height)):!d&&c>=e.bottom-y.height&&(m.y=Sa.Forward,v.y=r*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(m.x=Sa.Forward,v.x=r*Math.abs((e.right-y.width-l)/y.width)):!f&&o<=e.left+y.width&&(m.x=Sa.Backward,v.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:m,speed:v}}function D3e(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function jre(t){return t.reduce((e,n)=>Qv(e,DR(n)),Su)}function I3e(t){return t.reduce((e,n)=>e+bre(n),0)}function L3e(t){return t.reduce((e,n)=>e+wre(n),0)}function F3e(t,e){if(e===void 0&&(e=vx),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);xre(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const B3e=[["x",["left","right"],I3e],["y",["top","bottom"],L3e]];class gL{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=i_(n),i=jre(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of B3e)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),d=i[s]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bb{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function $3e(t){const{EventTarget:e}=hl(t);return t instanceof e?t:gx(t)}function lO(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var pc;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(pc||(pc={}));function WU(t){t.preventDefault()}function z3e(t){t.stopPropagation()}var jr;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(jr||(jr={}));const Ere={start:[jr.Space,jr.Enter],cancel:[jr.Esc],end:[jr.Space,jr.Enter,jr.Tab]},q3e=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case jr.Right:return{...n,x:n.x+25};case jr.Left:return{...n,x:n.x-25};case jr.Down:return{...n,y:n.y+25};case jr.Up:return{...n,y:n.y-25}}};class s_{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Bb(gx(n)),this.windowListeners=new Bb(hl(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(pc.Resize,this.handleCancel),this.windowListeners.add(pc.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(pc.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&F3e(r),n(Su)}handleKeyDown(e){if(pL(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=Ere,coordinateGetter:o=q3e,scrollBehavior:l="smooth"}=i,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Su;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(e,{active:n,context:r.current,currentCoordinates:d});if(f){const p=Q0(f,d),m={x:0,y:0},{scrollableAncestors:v}=r.current;for(const y of v){const x=e.code,{isTop:b,isRight:S,isLeft:j,isBottom:E,maxScroll:A,minScroll:P}=Sre(y),O=D3e(y),k={x:Math.min(x===jr.Right?O.right-O.width/2:O.right,Math.max(x===jr.Right?O.left:O.left+O.width/2,f.x)),y:Math.min(x===jr.Down?O.bottom-O.height/2:O.bottom,Math.max(x===jr.Down?O.top:O.top+O.height/2,f.y))},C=x===jr.Right&&!S||x===jr.Left&&!j,I=x===jr.Down&&!E||x===jr.Up&&!b;if(C&&k.x!==f.x){const R=y.scrollLeft+p.x,D=x===jr.Right&&R<=A.x||x===jr.Left&&R>=P.x;if(D&&!p.y){y.scrollTo({left:R,behavior:l});return}D?m.x=y.scrollLeft-R:m.x=x===jr.Right?y.scrollLeft-A.x:y.scrollLeft-P.x,m.x&&y.scrollBy({left:-m.x,behavior:l});break}else if(I&&k.y!==f.y){const R=y.scrollTop+p.y,D=x===jr.Down&&R<=A.y||x===jr.Up&&R>=P.y;if(D&&!p.x){y.scrollTo({top:R,behavior:l});return}D?m.y=y.scrollTop-R:m.y=x===jr.Down?y.scrollTop-A.y:y.scrollTop-P.y,m.y&&y.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(e,Qv(Q0(f,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}s_.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Ere,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function KU(t){return!!(t&&"distance"in t)}function GU(t){return!!(t&&"delay"in t)}class vL{constructor(e,n,r){var i;r===void 0&&(r=$3e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=gx(o),this.documentListeners=new Bb(this.document),this.listeners=new Bb(r),this.windowListeners=new Bb(hl(o)),this.initialCoordinates=(i=RR(s))!=null?i:Su,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(pc.Resize,this.handleCancel),this.windowListeners.add(pc.DragStart,WU),this.windowListeners.add(pc.VisibilityChange,this.handleCancel),this.windowListeners.add(pc.ContextMenu,WU),this.documentListeners.add(pc.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(GU(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(KU(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(pc.Click,z3e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(pc.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=RR(e))!=null?n:Su,u=Q0(i,c);if(!r&&l){if(KU(l)){if(l.tolerance!=null&&lO(u,l.tolerance))return this.handleCancel();if(lO(u,l.distance))return this.handleStart()}if(GU(l)&&lO(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===jr.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const U3e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class a_ extends vL{constructor(e){const{event:n}=e,r=gx(n.target);super(e,U3e,r)}}a_.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const H3e={move:{name:"mousemove"},end:{name:"mouseup"}};var IR;(function(t){t[t.RightClick=2]="RightClick"})(IR||(IR={}));class _re extends vL{constructor(e){super(e,H3e,gx(e.event.target))}}_re.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===IR.RightClick?!1:(r?.({event:n}),!0)}}];const cO={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Cre extends vL{constructor(e){super(e,cO)}static setup(){return window.addEventListener(cO.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(cO.move.name,e)};function e(){}}}Cre.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var $b;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})($b||($b={}));var OS;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(OS||(OS={}));function V3e(t){let{acceleration:e,activator:n=$b.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=OS.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=t;const m=K3e({delta:f,disabled:!s}),[v,y]=l3e(),x=N.useRef({x:0,y:0}),b=N.useRef({x:0,y:0}),S=N.useMemo(()=>{switch(n){case $b.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case $b.DraggableRect:return i}},[n,i,c]),j=N.useRef(null),E=N.useCallback(()=>{const P=j.current;if(!P)return;const O=x.current.x*b.current.x,k=x.current.y*b.current.y;P.scrollBy(O,k)},[]),A=N.useMemo(()=>l===OS.TreeOrder?[...u].reverse():u,[l,u]);N.useEffect(()=>{if(!s||!u.length||!S){y();return}for(const P of A){if(r?.(P)===!1)continue;const O=u.indexOf(P),k=d[O];if(!k)continue;const{direction:C,speed:I}=R3e(P,k,S,e,p);for(const R of["x","y"])m[R][C[R]]||(I[R]=0,C[R]=0);if(I.x>0||I.y>0){y(),j.current=P,v(E,o),x.current=I,b.current=C;return}}x.current={x:0,y:0},b.current={x:0,y:0},y()},[e,E,r,y,s,o,JSON.stringify(S),JSON.stringify(m),v,u,A,d,JSON.stringify(p)])}const W3e={x:{[Sa.Backward]:!1,[Sa.Forward]:!1},y:{[Sa.Backward]:!1,[Sa.Forward]:!1}};function K3e(t){let{delta:e,disabled:n}=t;const r=MR(e);return $1(i=>{if(n||!r||!i)return W3e;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Sa.Backward]:i.x[Sa.Backward]||s.x===-1,[Sa.Forward]:i.x[Sa.Forward]||s.x===1},y:{[Sa.Backward]:i.y[Sa.Backward]||s.y===-1,[Sa.Forward]:i.y[Sa.Forward]||s.y===1}}},[n,e,r])}function G3e(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return $1(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function Y3e(t,e){return N.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Z0;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Z0||(Z0={}));var LR;(function(t){t.Optimized="optimized"})(LR||(LR={}));const YU=new Map;function X3e(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=N.useState(null),{frequency:l,measure:c,strategy:u}=i,d=N.useRef(t),f=x(),p=X0(f),m=N.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(S=>S===null?b:S.concat(b.filter(j=>!S.includes(j))))},[p]),v=N.useRef(null),y=$1(b=>{if(f&&!n)return YU;if(!b||b===YU||d.current!==t||s!=null){const S=new Map;for(let j of t){if(!j)continue;if(s&&s.length>0&&!s.includes(j.id)&&j.rect.current){S.set(j.id,j.rect.current);continue}const E=j.node.current,A=E?new gL(c(E),E):null;j.rect.current=A,A&&S.set(j.id,A)}return S}return b},[t,s,n,f,c]);return N.useEffect(()=>{d.current=t},[t]),N.useEffect(()=>{f||m()},[n,f]),N.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),N.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,f,m,...r]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:s!=null};function x(){switch(u){case Z0.Always:return!1;case Z0.BeforeDragging:return n;default:return!n}}}function Are(t,e){return $1(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Q3e(t,e){return Are(t,e)}function Z3e(t){let{callback:e,disabled:n}=t;const r=hL(e),i=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return N.useEffect(()=>()=>i?.disconnect(),[i]),i}function o_(t){let{callback:e,disabled:n}=t;const r=hL(e),i=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return N.useEffect(()=>()=>i?.disconnect(),[i]),i}function J3e(t){return new gL(vx(t),t)}function XU(t,e,n){e===void 0&&(e=J3e);const[r,i]=N.useState(null);function s(){i(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=e(t);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Z3e({callback(c){if(t)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){s();break}}}}),l=o_({callback:s});return jd(()=>{s(),t?(l?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[t]),r}function e6e(t){const e=Are(t);return yre(t,e)}const QU=[];function t6e(t){const e=N.useRef(t),n=$1(r=>t?r&&r!==QU&&t&&e.current&&t.parentNode===e.current.parentNode?r:i_(t):QU,[t]);return N.useEffect(()=>{e.current=t},[t]),n}function n6e(t){const[e,n]=N.useState(null),r=N.useRef(t),i=N.useCallback(s=>{const o=oO(s.target);o&&n(l=>l?(l.set(o,DR(o)),new Map(l)):null)},[]);return N.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(c=>{const u=oO(c);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,DR(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(c=>{const u=oO(c);u?.removeEventListener("scroll",i)})}},[i,t]),N.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Qv(s,o),Su):jre(t):Su,[t,e])}function ZU(t,e){e===void 0&&(e=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},e),N.useEffect(()=>{const r=t!==Su;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Q0(t,n.current):Su}function r6e(t){N.useEffect(()=>{if(!r_)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function i6e(t,e){return N.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function kre(t){return N.useMemo(()=>t?T3e(t):null,[t])}const JU=[];function s6e(t,e){e===void 0&&(e=vx);const[n]=t,r=kre(n?hl(n):null),[i,s]=N.useState(JU);function o(){s(()=>t.length?t.map(c=>Nre(c)?r:new gL(e(c),c)):JU)}const l=o_({callback:o});return jd(()=>{l?.disconnect(),o(),t.forEach(c=>l?.observe(c))},[t]),i}function a6e(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return B1(e)?e:t}function o6e(t){let{measure:e}=t;const[n,r]=N.useState(null),i=N.useCallback(u=>{for(const{target:d}of u)if(B1(d)){r(f=>{const p=e(d);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),s=o_({callback:i}),o=N.useCallback(u=>{const d=a6e(u);s?.disconnect(),d&&s?.observe(d),r(d?e(d):null)},[e,s]),[l,c]=kS(o);return N.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const l6e=[{sensor:a_,options:{}},{sensor:s_,options:{}}],c6e={current:{}},W2={draggable:{measure:VU},droppable:{measure:VU,strategy:Z0.WhileDragging,frequency:LR.Optimized},dragOverlay:{measure:vx}};class zb extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const u6e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zb,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:TS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:W2,measureDroppableContainers:TS,windowRect:null,measuringScheduled:!1},d6e={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:TS,draggableNodes:new Map,over:null,measureDroppableContainers:TS},l_=N.createContext(d6e),Tre=N.createContext(u6e);function f6e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zb}}}function h6e(t,e){switch(e.type){case ia.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ia.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ia.DragEnd:case ia.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ia.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new zb(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case ia.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new zb(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case ia.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new zb(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function p6e(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=N.useContext(l_),s=MR(r),o=MR(n?.id);return N.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!pL(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=d3e(d);if(f){f.focus();break}}})}},[r,e,i,o,s]),null}function m6e(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function g6e(t){return N.useMemo(()=>({draggable:{...W2.draggable,...t?.draggable},droppable:{...W2.droppable,...t?.droppable},dragOverlay:{...W2.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function v6e(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=N.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;jd(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const u=e?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=yre(d,r);if(o||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=xre(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Ore=N.createContext({...Su,scaleX:1,scaleY:1});var Bh;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Bh||(Bh={}));const yL=N.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=l6e,collisionDetection:f=S3e,measuring:p,modifiers:m,...v}=e;const y=N.useReducer(h6e,void 0,f6e),[x,b]=y,[S,j]=v3e(),[E,A]=N.useState(Bh.Uninitialized),P=E===Bh.Initialized,{draggable:{active:O,nodes:k,translate:C},droppable:{containers:I}}=x,R=O!=null?k.get(O):null,D=N.useRef({initial:null,translated:null}),L=N.useMemo(()=>{var vn;return O!=null?{id:O,data:(vn=R?.data)!=null?vn:c6e,rect:D}:null},[O,R]),z=N.useRef(null),[W,X]=N.useState(null),[q,V]=N.useState(null),Y=X0(v,Object.values(v)),re=z1("DndDescribedBy",o),Q=N.useMemo(()=>I.getEnabled(),[I]),F=g6e(p),{droppableRects:G,measureDroppableContainers:te,measuringScheduled:le}=X3e(Q,{dragging:P,dependencies:[C.x,C.y],config:F.droppable}),he=G3e(k,O),me=N.useMemo(()=>q?RR(q):null,[q]),xe=ur(),de=Q3e(he,F.draggable.measure);v6e({activeNode:O!=null?k.get(O):null,config:xe.layoutShiftCompensation,initialRect:de,measure:F.draggable.measure});const Ne=XU(he,F.draggable.measure,de),Ce=XU(he?he.parentElement:null),ae=N.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=I.getNodeFor((n=ae.current.over)==null?void 0:n.id),J=o6e({measure:F.dragOverlay.measure}),ne=(r=J.nodeRef.current)!=null?r:he,Re=P?(i=J.rect)!=null?i:Ne:null,dt=!!(J.nodeRef.current&&J.rect),et=e6e(dt?null:Ne),Ve=kre(ne?hl(ne):null),ge=t6e(P?Pe??he:null),Se=s6e(ge),ke=m6e(m,{transform:{x:C.x-et.x,y:C.y-et.y,scaleX:1,scaleY:1},activatorEvent:q,active:L,activeNodeRect:Ne,containerNodeRect:Ce,draggingNodeRect:Re,over:ae.current.over,overlayNodeRect:J.rect,scrollableAncestors:ge,scrollableAncestorRects:Se,windowRect:Ve}),We=me?Qv(me,C):null,Ke=n6e(ge),qe=ZU(Ke),nt=ZU(Ke,[Ne]),_t=Qv(ke,qe),xt=Re?_3e(Re,ke):null,Ot=L&&xt?f({active:L,collisionRect:xt,droppableRects:G,droppableContainers:Q,pointerCoordinates:We}):null,Yt=mre(Ot,"id"),[Ct,$n]=N.useState(null),Pn=dt?ke:Qv(ke,nt),Ht=j3e(Pn,(s=Ct?.rect)!=null?s:null,Ne),xn=N.useRef(null),ir=N.useCallback((vn,zt)=>{let{sensor:je,options:se}=zt;if(z.current==null)return;const Le=k.get(z.current);if(!Le)return;const St=vn.nativeEvent,Tn=new je({active:z.current,activeNode:Le,event:St,options:se,context:ae,onAbort(wt){if(!k.get(wt))return;const{onDragAbort:Bt}=Y.current,On={id:wt};Bt?.(On),S({type:"onDragAbort",event:On})},onPending(wt,At,Bt,On){if(!k.get(wt))return;const{onDragPending:sr}=Y.current,Nr={id:wt,constraint:At,initialCoordinates:Bt,offset:On};sr?.(Nr),S({type:"onDragPending",event:Nr})},onStart(wt){const At=z.current;if(At==null)return;const Bt=k.get(At);if(!Bt)return;const{onDragStart:On}=Y.current,en={activatorEvent:St,active:{id:At,data:Bt.data,rect:D}};hu.unstable_batchedUpdates(()=>{On?.(en),A(Bh.Initializing),b({type:ia.DragStart,initialCoordinates:wt,active:At}),S({type:"onDragStart",event:en}),X(xn.current),V(St)})},onMove(wt){b({type:ia.DragMove,coordinates:wt})},onEnd:Dt(ia.DragEnd),onCancel:Dt(ia.DragCancel)});xn.current=Tn;function Dt(wt){return async function(){const{active:Bt,collisions:On,over:en,scrollAdjustedTranslate:sr}=ae.current;let Nr=null;if(Bt&&sr){const{cancelDrop:Ii}=Y.current;Nr={activatorEvent:St,active:Bt,collisions:On,delta:sr,over:en},wt===ia.DragEnd&&typeof Ii=="function"&&await Promise.resolve(Ii(Nr))&&(wt=ia.DragCancel)}z.current=null,hu.unstable_batchedUpdates(()=>{b({type:wt}),A(Bh.Uninitialized),$n(null),X(null),V(null),xn.current=null;const Ii=wt===ia.DragEnd?"onDragEnd":"onDragCancel";if(Nr){const Ys=Y.current[Ii];Ys?.(Nr),S({type:Ii,event:Nr})}})}}},[k]),on=N.useCallback((vn,zt)=>(je,se)=>{const Le=je.nativeEvent,St=k.get(se);if(z.current!==null||!St||Le.dndKit||Le.defaultPrevented)return;const Tn={active:St};vn(je,zt.options,Tn)===!0&&(Le.dndKit={capturedBy:zt.sensor},z.current=se,ir(je,zt))},[k,ir]),Cn=Y3e(d,on);r6e(d),jd(()=>{Ne&&E===Bh.Initializing&&A(Bh.Initialized)},[Ne,E]),N.useEffect(()=>{const{onDragMove:vn}=Y.current,{active:zt,activatorEvent:je,collisions:se,over:Le}=ae.current;if(!zt||!je)return;const St={active:zt,activatorEvent:je,collisions:se,delta:{x:_t.x,y:_t.y},over:Le};hu.unstable_batchedUpdates(()=>{vn?.(St),S({type:"onDragMove",event:St})})},[_t.x,_t.y]),N.useEffect(()=>{const{active:vn,activatorEvent:zt,collisions:je,droppableContainers:se,scrollAdjustedTranslate:Le}=ae.current;if(!vn||z.current==null||!zt||!Le)return;const{onDragOver:St}=Y.current,Tn=se.get(Yt),Dt=Tn&&Tn.rect.current?{id:Tn.id,rect:Tn.rect.current,data:Tn.data,disabled:Tn.disabled}:null,wt={active:vn,activatorEvent:zt,collisions:je,delta:{x:Le.x,y:Le.y},over:Dt};hu.unstable_batchedUpdates(()=>{$n(Dt),St?.(wt),S({type:"onDragOver",event:wt})})},[Yt]),jd(()=>{ae.current={activatorEvent:q,active:L,activeNode:he,collisionRect:xt,collisions:Ot,droppableRects:G,draggableNodes:k,draggingNode:ne,draggingNodeRect:Re,droppableContainers:I,over:Ct,scrollableAncestors:ge,scrollAdjustedTranslate:_t},D.current={initial:Re,translated:xt}},[L,he,Ot,xt,k,ne,Re,G,I,Ct,ge,_t]),V3e({...xe,delta:C,draggingRect:xt,pointerCoordinates:We,scrollableAncestors:ge,scrollableAncestorRects:Se});const bn=N.useMemo(()=>({active:L,activeNode:he,activeNodeRect:Ne,activatorEvent:q,collisions:Ot,containerNodeRect:Ce,dragOverlay:J,draggableNodes:k,droppableContainers:I,droppableRects:G,over:Ct,measureDroppableContainers:te,scrollableAncestors:ge,scrollableAncestorRects:Se,measuringConfiguration:F,measuringScheduled:le,windowRect:Ve}),[L,he,Ne,q,Ot,Ce,J,k,I,G,Ct,te,ge,Se,F,le,Ve]),Cr=N.useMemo(()=>({activatorEvent:q,activators:Cn,active:L,activeNodeRect:Ne,ariaDescribedById:{draggable:re},dispatch:b,draggableNodes:k,over:Ct,measureDroppableContainers:te}),[q,Cn,L,Ne,b,re,k,Ct,te]);return ve.createElement(fre.Provider,{value:j},ve.createElement(l_.Provider,{value:Cr},ve.createElement(Tre.Provider,{value:bn},ve.createElement(Ore.Provider,{value:Ht},u)),ve.createElement(p6e,{disabled:l?.restoreFocus===!1})),ve.createElement(b3e,{...l,hiddenTextDescribedById:re}));function ur(){const vn=W?.autoScrollEnabled===!1,zt=typeof c=="object"?c.enabled===!1:c===!1,je=P&&!vn&&!zt;return typeof c=="object"?{...c,enabled:je}:{enabled:je}}}),y6e=N.createContext(null),eH="button",x6e="Draggable";function Pre(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=z1(x6e),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=N.useContext(l_),{role:m=eH,roleDescription:v="draggable",tabIndex:y=0}=i??{},x=c?.id===e,b=N.useContext(x?Ore:y6e),[S,j]=kS(),[E,A]=kS(),P=i6e(o,e),O=X0(n);jd(()=>(f.set(e,{id:e,key:s,node:S,activatorNode:E,data:O}),()=>{const C=f.get(e);C&&C.key===s&&f.delete(e)}),[f,e]);const k=N.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":r,"aria-pressed":x&&m===eH?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,m,y,x,v,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:k,isDragging:x,listeners:r?void 0:P,node:S,over:p,setNodeRef:j,setActivatorNodeRef:A,transform:b}}function b6e(){return N.useContext(Tre)}const w6e="Droppable",N6e={timeout:25};function Mre(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=z1(w6e),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=N.useContext(l_),d=N.useRef({disabled:n}),f=N.useRef(!1),p=N.useRef(null),m=N.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:x}={...N6e,...i},b=X0(y??r),S=N.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),m.current=null},x)},[x]),j=o_({callback:S,disabled:v||!o}),E=N.useCallback((k,C)=>{j&&(C&&(j.unobserve(C),f.current=!1),k&&j.observe(k))},[j]),[A,P]=kS(E),O=X0(e);return N.useEffect(()=>{!j||!A.current||(j.disconnect(),f.current=!1,j.observe(A.current))},[A,j]),N.useEffect(()=>(l({type:ia.RegisterDroppable,element:{id:r,key:s,disabled:n,node:A,rect:p,data:O}}),()=>l({type:ia.UnregisterDroppable,key:s,id:r})),[r]),N.useEffect(()=>{n!==d.current.disabled&&(l({type:ia.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,l]),{active:o,rect:p,isOver:c?.id===r,node:A,over:c,setNodeRef:P}}function xL(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function S6e(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function n2(t){return t!==null&&t>=0}function j6e(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function E6e(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Rre=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=xL(e,r,n),o=e[i],l=s[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},r2={scaleX:1,scaleY:1},Dre=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const l=(e=s[n])!=null?e:r;if(!l)return null;if(i===n){const u=s[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...r2}:null}const c=_6e(s,i,n);return i>n&&i<=o?{x:0,y:-l.height-c,...r2}:i<n&&i>=o?{x:0,y:l.height+c,...r2}:{x:0,y:0,...r2}};function _6e(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Ire="Sortable",Lre=ve.createContext({activeIndex:-1,containerId:Ire,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Rre,disabled:{draggable:!1,droppable:!1}});function Fre(t){let{children:e,id:n,items:r,strategy:i=Rre,disabled:s=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=b6e(),f=z1(Ire,n),p=l.rect!==null,m=N.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),v=o!=null,y=o?m.indexOf(o.id):-1,x=u?m.indexOf(u.id):-1,b=N.useRef(m),S=!j6e(m,b.current),j=x!==-1&&y===-1||S,E=E6e(s);jd(()=>{S&&v&&d(m)},[S,m,v,d]),N.useEffect(()=>{b.current=m},[m]);const A=N.useMemo(()=>({activeIndex:y,containerId:f,disabled:E,disableTransforms:j,items:m,overIndex:x,useDragOverlay:p,sortedRects:S6e(m,c),strategy:i}),[y,f,E.draggable,E.droppable,j,m,x,c,p,i]);return ve.createElement(Lre.Provider,{value:A},e)}const C6e=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return xL(n,r,i).indexOf(e)},A6e=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==s&&i===o?!1:n?!0:o!==i&&e===c},k6e={duration:200,easing:"ease"},Bre="transform",T6e=$y.Transition.toString({property:Bre,duration:0,easing:"linear"}),O6e={roleDescription:"sortable"};function P6e(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=N.useState(null),l=N.useRef(n);return jd(()=>{if(!e&&n!==l.current&&r.current){const c=i.current;if(c){const u=vx(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[e,n,r,i]),N.useEffect(()=>{s&&o(null)},[s]),s}function $re(t){let{animateLayoutChanges:e=A6e,attributes:n,disabled:r,data:i,getNewIndex:s=C6e,id:o,strategy:l,resizeObserverConfig:c,transition:u=k6e}=t;const{items:d,containerId:f,activeIndex:p,disabled:m,disableTransforms:v,sortedRects:y,overIndex:x,useDragOverlay:b,strategy:S}=N.useContext(Lre),j=M6e(r,m),E=d.indexOf(o),A=N.useMemo(()=>({sortable:{containerId:f,index:E,items:d},...i}),[f,i,E,d]),P=N.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:O,node:k,isOver:C,setNodeRef:I}=Mre({id:o,data:A,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...c}}),{active:R,activatorEvent:D,activeNodeRect:L,attributes:z,setNodeRef:W,listeners:X,isDragging:q,over:V,setActivatorNodeRef:Y,transform:re}=Pre({id:o,data:A,attributes:{...O6e,...n},disabled:j.draggable}),Q=o3e(I,W),F=!!R,G=F&&!v&&n2(p)&&n2(x),te=!b&&q,le=te&&G?re:null,me=G?le??(l??S)({rects:y,activeNodeRect:L,activeIndex:p,overIndex:x,index:E}):null,xe=n2(p)&&n2(x)?s({id:o,items:d,activeIndex:p,overIndex:x}):E,de=R?.id,Ne=N.useRef({activeId:de,items:d,newIndex:xe,containerId:f}),Ce=d!==Ne.current.items,ae=e({active:R,containerId:f,isDragging:q,isSorting:F,id:o,index:E,items:d,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:u,wasDragging:Ne.current.activeId!=null}),Pe=P6e({disabled:!ae,index:E,node:k,rect:O});return N.useEffect(()=>{F&&Ne.current.newIndex!==xe&&(Ne.current.newIndex=xe),f!==Ne.current.containerId&&(Ne.current.containerId=f),d!==Ne.current.items&&(Ne.current.items=d)},[F,xe,f,d]),N.useEffect(()=>{if(de===Ne.current.activeId)return;if(de!=null&&Ne.current.activeId==null){Ne.current.activeId=de;return}const ne=setTimeout(()=>{Ne.current.activeId=de},50);return()=>clearTimeout(ne)},[de]),{active:R,activeIndex:p,attributes:z,data:A,rect:O,index:E,newIndex:xe,items:d,isOver:C,isSorting:F,isDragging:q,listeners:X,node:k,overIndex:x,over:V,setNodeRef:Q,setActivatorNodeRef:Y,setDroppableNodeRef:I,setDraggableNodeRef:W,transform:Pe??me,transition:J()};function J(){if(Pe||Ce&&Ne.current.newIndex===E)return T6e;if(!(te&&!pL(D)||!u)&&(F||ae))return $y.Transition.toString({...u,property:Bre})}}function M6e(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(r=t?.droppable)!=null?r:e.droppable}}function PS(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const R6e=[jr.Down,jr.Right,jr.Up,jr.Left],zre=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:l}}=e;if(R6e.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=i.get(f.id);if(p)switch(t.code){case jr.Down:r.top<p.top&&c.push(f);break;case jr.Up:r.top>p.top&&c.push(f);break;case jr.Left:r.left>p.left&&c.push(f);break;case jr.Right:r.left<p.left&&c.push(f);break}});const u=vre({collisionRect:r,droppableRects:i,droppableContainers:c});let d=mre(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const f=s.get(n.id),p=s.get(d),m=p?i.get(p.id):null,v=p?.node.current;if(v&&m&&f&&p){const x=i_(v).some((P,O)=>l[O]!==P),b=qre(f,p),S=D6e(f,p),j=x||!b?{x:0,y:0}:{x:S?r.width-m.width:0,y:S?r.height-m.height:0},E={x:m.left,y:m.top};return j.x&&j.y?E:Q0(E,j)}}}};function qre(t,e){return!PS(t)||!PS(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function D6e(t,e){return!PS(t)||!PS(e)||!qre(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const tH={PENDIENTE:{label:"Pendiente",color:"bg-slate-100",icon:Ec},EN_PROGRESO:{label:"En Progreso",color:"bg-blue-100",icon:_c},COMPLETADA:{label:"Completada",color:"bg-green-100",icon:gu},CANCELADA:{label:"Cancelada",color:"bg-red-100",icon:Ec}};function I6e({task:t,onTaskClick:e,users:n}){const{attributes:r,listeners:i,setNodeRef:s,transform:o,transition:l,isDragging:c}=$re({id:t.id}),u={transform:$y.Transform.toString(o),transition:l,opacity:c?.5:1},d={BAJA:"text-slate-500",MEDIA:"text-amber-500",ALTA:"text-red-500"},f=n?.find(m=>m.id===t.asignadoA),p=t.fechaVencimiento&&new Date(t.fechaVencimiento)<new Date;return a.jsx("div",{ref:s,style:u,...r,...i,className:"mb-3 cursor-grab active:cursor-grabbing",children:a.jsx(Xe,{className:`border-l-4 hover:shadow-md transition-all ${c?"shadow-lg":""}`,style:{borderLeftColor:t.color||"#cbd5e1",backgroundColor:t.color?`${t.color}15`:void 0},onClick:()=>e?.(t),children:a.jsxs(Qe,{className:"p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-medium text-sm flex-1 break-words",children:t.titulo}),t.progreso!==void 0&&t.progreso>0&&a.jsxs(ct,{variant:"outline",className:"text-xs flex-shrink-0",children:[t.progreso,"%"]})]}),t.descripcion&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:t.descripcion}),a.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[a.jsx(ct,{variant:"secondary",className:`text-xs ${d[t.prioridad]}`,children:t.prioridad}),p&&a.jsx(ct,{variant:"destructive",className:"text-xs",children:"Vencida"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[t.fechaVencimiento&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(uN,{className:"w-3 h-3"}),a.jsx("span",{children:qa(new Date(t.fechaVencimiento),"dd MMM",{locale:vc})})]}),f&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:f.username[0]})]}),t.progreso!==void 0&&a.jsx("div",{className:"w-full bg-secondary h-1 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-primary h-full transition-all",style:{width:`${t.progreso}%`}})})]})})})}function L6e({onTaskClick:t,clients:e=[],users:n=[]}){const{toast:r}=Dr(),[i,s]=N.useState([]),{isLoading:o,data:l}=Wt({queryKey:["/api/tasks"]});N.useEffect(()=>{l&&s(l)},[l]);const c=$t({mutationFn:async({taskId:p,estado:m})=>await Rt("PATCH",`/api/tasks/${p}`,{estado:m}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/tasks"]})},onError:()=>{r({title:"Error al actualizar tarea",variant:"destructive"}),cn.invalidateQueries({queryKey:["/api/tasks"]})}}),u=mL(zy(a_),zy(s_,{coordinateGetter:zre})),d=N.useMemo(()=>({PENDIENTE:i.filter(p=>p.estado==="PENDIENTE"),EN_PROGRESO:i.filter(p=>p.estado==="EN_PROGRESO"),COMPLETADA:i.filter(p=>p.estado==="COMPLETADA")}),[i]),f=p=>{const{active:m,over:v}=p;if(!v)return;const y=i.find(b=>b.id===m.id),x=v.id;!y||!Object.keys(tH).includes(x)||y.estado!==x&&(s(b=>b.map(S=>S.id===y.id?{...S,estado:x}:S)),c.mutate({taskId:y.id,estado:x}))};return o?a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(p=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-8 bg-secondary rounded-lg animate-pulse"}),[1,2,3].map(m=>a.jsx("div",{className:"h-24 bg-secondary rounded-lg animate-pulse"},m))]},p))}):a.jsx(yL,{sensors:u,collisionDetection:gre,onDragEnd:f,children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(tH).map(([p,m])=>{const v=d[p]||[],y=m.icon;return a.jsxs(Xe,{className:`${m.color} min-h-96`,children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(y,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:m.label})]}),a.jsx(ct,{variant:"secondary",className:"text-xs",children:v.length})]})}),a.jsx(Qe,{children:a.jsx(Fre,{items:v.map(x=>x.id),strategy:Dre,children:a.jsx("div",{className:"space-y-2",children:v.length>0?v.map(x=>a.jsx(I6e,{task:x,onTaskClick:t,users:n},x.id)):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{className:"text-xs",children:"Sin tareas"})})})})})]},p)})})})}function F6e(){const{toast:t}=Dr(),{user:e}=xg(),[n,r]=N.useState("table"),[i,s]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState({titulo:"",descripcion:"",clienteId:"",asignadoA:"",prioridad:"MEDIA",estado:"PENDIENTE",visibilidad:"GENERAL",fechaVencimiento:""}),{data:p,isLoading:m}=Wt({queryKey:["/api/tasks"]}),{data:v}=Wt({queryKey:["/api/clients"]}),{data:y}=Wt({queryKey:["/api/users"]}),x=$t({mutationFn:async k=>await Rt("POST","/api/tasks",k),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/tasks"]}),t({title:"Tarea creada exitosamente"}),s(!1),j()}}),b=$t({mutationFn:async({id:k,estado:C})=>await Rt("PATCH",`/api/tasks/${k}`,{estado:C}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/tasks"]})}}),S=p?.filter(k=>k.visibilidad==="GENERAL"?!0:k.visibilidad==="PERSONAL"?e?.role==="ADMIN"||k.asignadoA===e?.id:!1)||[],j=()=>{f({titulo:"",descripcion:"",clienteId:"",asignadoA:"",prioridad:"MEDIA",estado:"PENDIENTE",visibilidad:"GENERAL",fechaVencimiento:""})},E=k=>{k.preventDefault(),x.mutate(d)},A=k=>{l(k),u(!0)},P=k=>{const C={BAJA:"text-muted-foreground bg-muted",MEDIA:"text-chart-2 bg-chart-2/10",ALTA:"text-destructive bg-destructive/10"};return a.jsx(ct,{variant:"outline",className:C[k],children:k})},O=k=>{const C={PENDIENTE:{color:"text-muted-foreground bg-muted",icon:_c},EN_PROGRESO:{color:"text-chart-2 bg-chart-2/10",icon:mp},COMPLETADA:{color:"text-chart-3 bg-chart-3/10",icon:gu}},I=C[k]||C.PENDIENTE,R=I.icon;return a.jsxs(ct,{variant:"outline",className:I.color,children:[a.jsx(R,{className:"h-3 w-3 mr-1"}),k.replace("_"," ")]})};return m?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(pr,{className:"h-9 w-48"}),a.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((k,C)=>a.jsx(pr,{className:"h-64"},C))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Tareas"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestin de tareas generales y personales"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(kc,{value:n,onValueChange:k=>r(k),children:a.jsxs(ql,{children:[a.jsxs(Wn,{value:"table","data-testid":"button-view-table",children:[a.jsx(Dfe,{className:"h-4 w-4 mr-2"}),"Tabla"]}),a.jsxs(Wn,{value:"kanban","data-testid":"button-view-kanban",children:[a.jsx(Rfe,{className:"h-4 w-4 mr-2"}),"Tablero"]})]})}),a.jsxs(xr,{open:i,onOpenChange:s,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:j,"data-testid":"button-add-task",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nueva Tarea"]})}),a.jsxs(vr,{className:"max-w-2xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Nueva Tarea"}),a.jsx(_r,{children:"Crea una nueva tarea general o personal"})]}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(_e,{htmlFor:"titulo",children:"Ttulo *"}),a.jsx(Ye,{id:"titulo",value:d.titulo,onChange:k=>f({...d,titulo:k.target.value}),required:!0,"data-testid":"input-titulo"})]}),a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(_e,{htmlFor:"descripcion",children:"Descripcin"}),a.jsx(Do,{id:"descripcion",value:d.descripcion,onChange:k=>f({...d,descripcion:k.target.value}),"data-testid":"textarea-descripcion"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"cliente",children:"Cliente"}),a.jsxs(Fn,{value:d.clienteId||"none",onValueChange:k=>f({...d,clienteId:k==="none"?"":k}),children:[a.jsx(Rn,{"data-testid":"select-cliente",children:a.jsx(Bn,{placeholder:"Sin cliente"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"none",children:"Sin cliente"}),v?.map(k=>a.jsx(lt,{value:k.id,children:k.razonSocial},k.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"asignado",children:"Asignado a"}),a.jsxs(Fn,{value:d.asignadoA||"none",onValueChange:k=>f({...d,asignadoA:k==="none"?"":k}),children:[a.jsx(Rn,{"data-testid":"select-asignado",children:a.jsx(Bn,{placeholder:"Sin asignar"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"none",children:"Sin asignar"}),y?.map(k=>a.jsx(lt,{value:k.id,children:k.username},k.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"prioridad",children:"Prioridad"}),a.jsxs(Fn,{value:d.prioridad,onValueChange:k=>f({...d,prioridad:k}),children:[a.jsx(Rn,{"data-testid":"select-prioridad",children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"BAJA",children:"Baja"}),a.jsx(lt,{value:"MEDIA",children:"Media"}),a.jsx(lt,{value:"ALTA",children:"Alta"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"visibilidad",children:"Visibilidad"}),a.jsxs(Fn,{value:d.visibilidad,onValueChange:k=>f({...d,visibilidad:k}),children:[a.jsx(Rn,{"data-testid":"select-visibilidad",children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"GENERAL",children:"General"}),a.jsx(lt,{value:"PERSONAL",children:"Personal"})]})]})]}),a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(_e,{htmlFor:"fechaVencimiento",children:"Fecha de Vencimiento"}),a.jsx(Ye,{id:"fechaVencimiento",type:"date",value:d.fechaVencimiento,onChange:k=>f({...d,fechaVencimiento:k.target.value}),"data-testid":"input-fecha-vencimiento"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{s(!1),j()},children:"Cancelar"}),a.jsx(pe,{type:"submit","data-testid":"button-submit-task",children:"Crear Tarea"})]})]})]})]})]})]}),n==="table"?a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{children:["Lista de Tareas (",S.length,")"]})}),a.jsx(Qe,{children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Ttulo"}),a.jsx(Ze,{children:"Cliente"}),a.jsx(Ze,{children:"Asignado"}),a.jsx(Ze,{children:"Prioridad"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Vencimiento"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:S.length===0?a.jsx(gn,{children:a.jsx(He,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No hay tareas registradas"})}):S.map(k=>a.jsxs(gn,{"data-testid":`row-task-${k.id}`,className:"cursor-pointer hover:bg-muted/50",onClick:()=>A(k),children:[a.jsx(He,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[k.visibilidad==="PERSONAL"&&a.jsx(aD,{className:"h-3 w-3 text-muted-foreground"}),k.titulo]})}),a.jsx(He,{children:k.client?.razonSocial||"-"}),a.jsx(He,{children:k.assignedUser?.username||"-"}),a.jsx(He,{children:P(k.prioridad)}),a.jsx(He,{children:O(k.estado)}),a.jsx(He,{children:k.fechaVencimiento?new Date(k.fechaVencimiento).toLocaleDateString():"-"}),a.jsx(He,{className:"text-right",onClick:C=>C.stopPropagation(),children:a.jsxs(Fn,{value:k.estado,onValueChange:C=>b.mutate({id:k.id,estado:C}),children:[a.jsx(Rn,{className:"w-[140px]","data-testid":`select-estado-${k.id}`,children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(lt,{value:"EN_PROGRESO",children:"En Progreso"}),a.jsx(lt,{value:"COMPLETADA",children:"Completada"})]})]})})]},k.id))})]})})]}):a.jsx(L6e,{onTaskClick:A,clients:v,users:y}),a.jsx(a3e,{task:o,isOpen:c,onClose:()=>{u(!1),l(null)},clients:v,users:y})]})}function B6e(){Dr();const{user:t}=xg(),[,e]=ca(),[n,r]=N.useState(""),[i,s]=N.useState(null),{data:o,isLoading:l}=Wt({queryKey:["/api/manuals"]}),c=t?.permissions||[],u=Array.isArray(c)&&c.includes("manuals:create"),d=Array.isArray(c)&&c.includes("manuals:update"),f=u||d,p=o?.filter(m=>m.titulo.toLowerCase().includes(n.toLowerCase())||m.categoria?.toLowerCase().includes(n.toLowerCase()))||[];return l?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(pr,{className:"h-9 w-48"}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((m,v)=>a.jsx(pr,{className:"h-48"},v))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Manuales"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Base de conocimientos y documentacin interna"})]}),f&&a.jsxs(pe,{onClick:()=>e("/manuales/nuevo"),"data-testid":"button-nuevo-manual",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nuevo Manual"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{placeholder:"Buscar manuales...",value:n,onChange:m=>r(m.target.value),className:"pl-10","data-testid":"input-search-manuals"})]}),p.length===0?a.jsx(Xe,{children:a.jsxs(Qe,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx(Vi,{className:"h-16 w-16 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay manuales disponibles"}),a.jsx("p",{className:"text-muted-foreground text-center mb-4",children:f?"Comienza creando tu primer manual":"An no se han publicado manuales"})]})}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(m=>a.jsxs(Xe,{className:"hover-elevate cursor-pointer",onClick:()=>e(`/manuales/${m.id}`),"data-testid":`card-manual-${m.id}`,children:[a.jsxs(ht,{children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Vi,{className:"h-8 w-8 text-primary"}),m.publicado?a.jsx(ct,{variant:"outline",className:"text-chart-3 bg-chart-3/10",children:"Publicado"}):a.jsx(ct,{variant:"outline",className:"text-muted-foreground bg-muted",children:"Borrador"})]}),a.jsx(gt,{className:"mt-4",children:m.titulo}),a.jsx(jn,{children:m.categoria||"Sin categora"})]}),a.jsxs(Qe,{children:[m.etiquetas&&m.etiquetas.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:m.etiquetas.slice(0,3).map(v=>a.jsx(ct,{variant:"secondary",className:"text-xs",children:v},v))}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsx("span",{children:new Date(m.fechaCreacion).toLocaleDateString()}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:v=>{v.stopPropagation(),e(`/manuales/${m.id}`)},"data-testid":`button-view-${m.id}`,children:a.jsx(Cf,{className:"h-4 w-4"})}),f&&a.jsxs(a.Fragment,{children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:v=>{v.stopPropagation(),e(`/manuales/${m.id}/editar`)},"data-testid":`button-edit-${m.id}`,children:a.jsx(fd,{className:"h-4 w-4"})}),d&&a.jsx(pe,{variant:"ghost",size:"icon",onClick:async v=>{if(v.stopPropagation(),!!window.confirm(`Eliminar el manual "${m.titulo}"?`))try{s(m.id),await Rt("DELETE",`/api/manuals/${encodeURIComponent(m.id)}`),cn.setQueryData(["/api/manuals"],x=>Array.isArray(x)?x.filter(b=>b.id!==m.id):x),await cn.invalidateQueries({queryKey:["/api/manuals"],exact:!0})}catch(x){cn.invalidateQueries({queryKey:["/api/manuals"],exact:!0});const b=x?.message||"No se pudo eliminar";alert(b)}finally{s(null)}},disabled:i===m.id,"data-testid":`button-delete-${m.id}`,title:"Eliminar",children:a.jsx(Wi,{className:"h-4 w-4"})})]})]})]})]})]},m.id))})]})}var FR=["Enter"," "],$6e=["ArrowDown","PageUp","Home"],Ure=["ArrowUp","PageDown","End"],z6e=[...$6e,...Ure],q6e={ltr:[...FR,"ArrowRight"],rtl:[...FR,"ArrowLeft"]},U6e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},q1="Menu",[J0,H6e,V6e]=Yy(q1),[Cg,Hre]=Gs(q1,[V6e,Ep,cE]),c_=Ep(),Vre=cE(),[W6e,Ag]=Cg(q1),[K6e,U1]=Cg(q1),Wre=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,l=c_(e),[c,u]=N.useState(null),d=N.useRef(!1),f=bs(s),p=bg(i);return N.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),a.jsx(Kj,{...l,children:a.jsx(W6e,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(K6e,{scope:e,onClose:N.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:o,children:r})})})};Wre.displayName=q1;var G6e="MenuAnchor",bL=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=c_(n);return a.jsx(b1,{...i,...r,ref:e})});bL.displayName=G6e;var wL="MenuPortal",[Y6e,Kre]=Cg(wL,{forceMount:void 0}),Gre=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Ag(wL,e);return a.jsx(Y6e,{scope:e,forceMount:n,children:a.jsx(ua,{present:n||s.open,children:a.jsx(Xy,{asChild:!0,container:i,children:r})})})};Gre.displayName=wL;var Nc="MenuContent",[X6e,NL]=Cg(Nc),Yre=N.forwardRef((t,e)=>{const n=Kre(Nc,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ag(Nc,t.__scopeMenu),o=U1(Nc,t.__scopeMenu);return a.jsx(J0.Provider,{scope:t.__scopeMenu,children:a.jsx(ua,{present:r||s.open,children:a.jsx(J0.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(Q6e,{...i,ref:e}):a.jsx(Z6e,{...i,ref:e})})})})}),Q6e=N.forwardRef((t,e)=>{const n=Ag(Nc,t.__scopeMenu),r=N.useRef(null),i=_n(e,r);return N.useEffect(()=>{const s=r.current;if(s)return rE(s)},[]),a.jsx(SL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:bt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Z6e=N.forwardRef((t,e)=>{const n=Ag(Nc,t.__scopeMenu);return a.jsx(SL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),J6e=hp("MenuContent.ScrollLock"),SL=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:v,...y}=t,x=Ag(Nc,n),b=U1(Nc,n),S=c_(n),j=Vre(n),E=H6e(n),[A,P]=N.useState(null),O=N.useRef(null),k=_n(e,O,x.onContentChange),C=N.useRef(0),I=N.useRef(""),R=N.useRef(0),D=N.useRef(null),L=N.useRef("right"),z=N.useRef(0),W=v?N1:N.Fragment,X=v?{as:J6e,allowPinchZoom:!0}:void 0,q=Y=>{const re=I.current+Y,Q=E().filter(me=>!me.disabled),F=document.activeElement,G=Q.find(me=>me.ref.current===F)?.textValue,te=Q.map(me=>me.textValue),le=dFe(te,re,G),he=Q.find(me=>me.textValue===le)?.ref.current;(function me(xe){I.current=xe,window.clearTimeout(C.current),xe!==""&&(C.current=window.setTimeout(()=>me(""),1e3))})(re),he&&setTimeout(()=>he.focus())};N.useEffect(()=>()=>window.clearTimeout(C.current),[]),tE();const V=N.useCallback(Y=>L.current===D.current?.side&&hFe(Y,D.current?.area),[]);return a.jsx(X6e,{scope:n,searchRef:I,onItemEnter:N.useCallback(Y=>{V(Y)&&Y.preventDefault()},[V]),onItemLeave:N.useCallback(Y=>{V(Y)||(O.current?.focus(),P(null))},[V]),onTriggerLeave:N.useCallback(Y=>{V(Y)&&Y.preventDefault()},[V]),pointerGraceTimerRef:R,onPointerGraceIntentChange:N.useCallback(Y=>{D.current=Y},[]),children:a.jsx(W,{...X,children:a.jsx(w1,{asChild:!0,trapped:i,onMountAutoFocus:bt(s,Y=>{Y.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(vg,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:a.jsx(nQ,{asChild:!0,...j,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:P,onEntryFocus:bt(c,Y=>{b.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(Gj,{role:"menu","aria-orientation":"vertical","data-state":die(x.open),"data-radix-menu-content":"",dir:b.dir,...S,...y,ref:k,style:{outline:"none",...y.style},onKeyDown:bt(y.onKeyDown,Y=>{const Q=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,F=Y.ctrlKey||Y.altKey||Y.metaKey,G=Y.key.length===1;Q&&(Y.key==="Tab"&&Y.preventDefault(),!F&&G&&q(Y.key));const te=O.current;if(Y.target!==te||!z6e.includes(Y.key))return;Y.preventDefault();const he=E().filter(me=>!me.disabled).map(me=>me.ref.current);Ure.includes(Y.key)&&he.reverse(),cFe(he)}),onBlur:bt(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(C.current),I.current="")}),onPointerMove:bt(t.onPointerMove,e1(Y=>{const re=Y.target,Q=z.current!==Y.clientX;if(Y.currentTarget.contains(re)&&Q){const F=Y.clientX>z.current?"right":"left";L.current=F,z.current=Y.clientX}}))})})})})})})});Yre.displayName=Nc;var eFe="MenuGroup",jL=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Lt.div,{role:"group",...r,ref:e})});jL.displayName=eFe;var tFe="MenuLabel",Xre=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Lt.div,{...r,ref:e})});Xre.displayName=tFe;var MS="MenuItem",nH="menu.itemSelect",u_=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=N.useRef(null),o=U1(MS,t.__scopeMenu),l=NL(MS,t.__scopeMenu),c=_n(e,s),u=N.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const p=new CustomEvent(nH,{bubbles:!0,cancelable:!0});f.addEventListener(nH,m=>r?.(m),{once:!0}),X4(f,p),p.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(Qre,{...i,ref:c,disabled:n,onClick:bt(t.onClick,d),onPointerDown:f=>{t.onPointerDown?.(f),u.current=!0},onPointerUp:bt(t.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:bt(t.onKeyDown,f=>{const p=l.searchRef.current!=="";n||p&&f.key===" "||FR.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});u_.displayName=MS;var Qre=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=NL(MS,n),l=Vre(n),c=N.useRef(null),u=_n(e,c),[d,f]=N.useState(!1),[p,m]=N.useState("");return N.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[s.children]),a.jsx(J0.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:a.jsx(rQ,{asChild:!0,...l,focusable:!r,children:a.jsx(Lt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:bt(t.onPointerMove,e1(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:bt(t.onPointerLeave,e1(v=>o.onItemLeave(v))),onFocus:bt(t.onFocus,()=>f(!0)),onBlur:bt(t.onBlur,()=>f(!1))})})})}),nFe="MenuCheckboxItem",Zre=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return a.jsx(rie,{scope:t.__scopeMenu,checked:n,children:a.jsx(u_,{role:"menuitemcheckbox","aria-checked":RS(n)?"mixed":n,...i,ref:e,"data-state":_L(n),onSelect:bt(i.onSelect,()=>r?.(RS(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Zre.displayName=nFe;var Jre="MenuRadioGroup",[rFe,iFe]=Cg(Jre,{value:void 0,onValueChange:()=>{}}),eie=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=bs(r);return a.jsx(rFe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:a.jsx(jL,{...i,ref:e})})});eie.displayName=Jre;var tie="MenuRadioItem",nie=N.forwardRef((t,e)=>{const{value:n,...r}=t,i=iFe(tie,t.__scopeMenu),s=n===i.value;return a.jsx(rie,{scope:t.__scopeMenu,checked:s,children:a.jsx(u_,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":_L(s),onSelect:bt(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});nie.displayName=tie;var EL="MenuItemIndicator",[rie,sFe]=Cg(EL,{checked:!1}),iie=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=sFe(EL,n);return a.jsx(ua,{present:r||RS(s.checked)||s.checked===!0,children:a.jsx(Lt.span,{...i,ref:e,"data-state":_L(s.checked)})})});iie.displayName=EL;var aFe="MenuSeparator",sie=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Lt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});sie.displayName=aFe;var oFe="MenuArrow",aie=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=c_(n);return a.jsx(Yj,{...i,...r,ref:e})});aie.displayName=oFe;var lFe="MenuSub",[AQe,oie]=Cg(lFe),Nb="MenuSubTrigger",lie=N.forwardRef((t,e)=>{const n=Ag(Nb,t.__scopeMenu),r=U1(Nb,t.__scopeMenu),i=oie(Nb,t.__scopeMenu),s=NL(Nb,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:t.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(bL,{asChild:!0,...u,children:a.jsx(Qre,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":die(n.open),...t,ref:If(e,i.onTriggerChange),onClick:f=>{t.onClick?.(f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:bt(t.onPointerMove,e1(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:bt(t.onPointerLeave,e1(f=>{d();const p=n.content?.getBoundingClientRect();if(p){const m=n.content?.dataset.side,v=m==="right",y=v?-5:5,x=p[v?"left":"right"],b=p[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x,y:p.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:bt(t.onKeyDown,f=>{const p=s.searchRef.current!=="";t.disabled||p&&f.key===" "||q6e[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});lie.displayName=Nb;var cie="MenuSubContent",uie=N.forwardRef((t,e)=>{const n=Kre(Nc,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Ag(Nc,t.__scopeMenu),o=U1(Nc,t.__scopeMenu),l=oie(cie,t.__scopeMenu),c=N.useRef(null),u=_n(e,c);return a.jsx(J0.Provider,{scope:t.__scopeMenu,children:a.jsx(ua,{present:r||s.open,children:a.jsx(J0.Slot,{scope:t.__scopeMenu,children:a.jsx(SL,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{o.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:bt(t.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:bt(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:bt(t.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),p=U6e[o.dir].includes(d.key);f&&p&&(s.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});uie.displayName=cie;function die(t){return t?"open":"closed"}function RS(t){return t==="indeterminate"}function _L(t){return RS(t)?"indeterminate":t?"checked":"unchecked"}function cFe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function uFe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function dFe(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=uFe(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function fFe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,f=c.x,p=c.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function hFe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return fFe(n,e)}function e1(t){return e=>e.pointerType==="mouse"?t(e):void 0}var pFe=Wre,mFe=bL,gFe=Gre,vFe=Yre,yFe=jL,xFe=Xre,bFe=u_,wFe=Zre,NFe=eie,SFe=nie,jFe=iie,EFe=sie,_Fe=aie,CFe=lie,AFe=uie,d_="DropdownMenu",[kFe]=Gs(d_,[Hre]),Bo=Hre(),[TFe,fie]=kFe(d_),hie=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=t,c=Bo(e),u=N.useRef(null),[d,f]=Ro({prop:i,defaultProp:s??!1,onChange:o,caller:d_});return a.jsx(TFe,{scope:e,triggerId:Hs(),triggerRef:u,contentId:Hs(),open:d,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(p=>!p),[f]),modal:l,children:a.jsx(pFe,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};hie.displayName=d_;var pie="DropdownMenuTrigger",mie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=fie(pie,n),o=Bo(n);return a.jsx(mFe,{asChild:!0,...o,children:a.jsx(Lt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:If(e,s.triggerRef),onPointerDown:bt(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:bt(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});mie.displayName=pie;var OFe="DropdownMenuPortal",gie=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Bo(e);return a.jsx(gFe,{...r,...n})};gie.displayName=OFe;var vie="DropdownMenuContent",yie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fie(vie,n),s=Bo(n),o=N.useRef(!1);return a.jsx(vFe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:bt(t.onCloseAutoFocus,l=>{o.current||i.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:bt(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yie.displayName=vie;var PFe="DropdownMenuGroup",MFe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(yFe,{...i,...r,ref:e})});MFe.displayName=PFe;var RFe="DropdownMenuLabel",xie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(xFe,{...i,...r,ref:e})});xie.displayName=RFe;var DFe="DropdownMenuItem",bie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(bFe,{...i,...r,ref:e})});bie.displayName=DFe;var IFe="DropdownMenuCheckboxItem",wie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(wFe,{...i,...r,ref:e})});wie.displayName=IFe;var LFe="DropdownMenuRadioGroup",FFe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(NFe,{...i,...r,ref:e})});FFe.displayName=LFe;var BFe="DropdownMenuRadioItem",Nie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(SFe,{...i,...r,ref:e})});Nie.displayName=BFe;var $Fe="DropdownMenuItemIndicator",Sie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(jFe,{...i,...r,ref:e})});Sie.displayName=$Fe;var zFe="DropdownMenuSeparator",jie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(EFe,{...i,...r,ref:e})});jie.displayName=zFe;var qFe="DropdownMenuArrow",UFe=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(_Fe,{...i,...r,ref:e})});UFe.displayName=qFe;var HFe="DropdownMenuSubTrigger",Eie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(CFe,{...i,...r,ref:e})});Eie.displayName=HFe;var VFe="DropdownMenuSubContent",_ie=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Bo(n);return a.jsx(AFe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_ie.displayName=VFe;var WFe=hie,KFe=mie,GFe=gie,Cie=yie,Aie=xie,kie=bie,Tie=wie,Oie=Nie,Pie=Sie,Mie=jie,Rie=Eie,Die=_ie;const BR=WFe,$R=KFe,YFe=N.forwardRef(({className:t,inset:e,children:n,...r},i)=>a.jsxs(Rie,{ref:i,className:ft("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,a.jsx(SG,{className:"ml-auto"})]}));YFe.displayName=Rie.displayName;const XFe=N.forwardRef(({className:t,...e},n)=>a.jsx(Die,{ref:n,className:ft("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));XFe.displayName=Die.displayName;const DS=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(GFe,{children:a.jsx(Cie,{ref:r,sideOffset:e,className:ft("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));DS.displayName=Cie.displayName;const Ol=N.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(kie,{ref:r,className:ft("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));Ol.displayName=kie.displayName;const QFe=N.forwardRef(({className:t,children:e,checked:n,...r},i)=>a.jsxs(Tie,{ref:i,className:ft("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Pie,{children:a.jsx(eD,{className:"h-4 w-4"})})}),e]}));QFe.displayName=Tie.displayName;const ZFe=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Oie,{ref:r,className:ft("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Pie,{children:a.jsx(wfe,{className:"h-2 w-2 fill-current"})})}),e]}));ZFe.displayName=Oie.displayName;const JFe=N.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(Aie,{ref:r,className:ft("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));JFe.displayName=Aie.displayName;const IS=N.forwardRef(({className:t,...e},n)=>a.jsx(Mie,{ref:n,className:ft("-mx-1 my-1 h-px bg-muted",t),...e}));IS.displayName=Mie.displayName;function e8e({open:t,filingData:e,onConfirm:n,onCancel:r}){const{toast:i}=Dr(),[s,o]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState([]),[u,d]=N.useState(!1),[f,p]=N.useState({}),m=S=>{const j=Array.from(S.target.files||[]);if(j.filter(P=>P.type!=="application/pdf").length>0){i({title:"Archivos invlidos",description:"Solo se permiten archivos PDF",variant:"destructive"});return}if(j.filter(P=>P.size>10*1024*1024).length>0){i({title:"Archivos muy grandes",description:"El tamao mximo por archivo es 10MB",variant:"destructive"});return}c(P=>[...P,...j]),p(P=>({...P,files:void 0}))},v=S=>{c(j=>j.filter((E,A)=>A!==S))},y=()=>{const S={};if(!s)S.date="La fecha de presentacin es obligatoria";else{const j=new Date(s),E=new Date;E.setHours(23,59,59,999),j>E&&(S.date="La fecha de presentacin no puede ser futura")}return p(S),Object.keys(S).length===0},x=async()=>{if(y()){d(!0);try{await n(s,l),o(new Date().toISOString().split("T")[0]),c([]),p({})}catch(S){i({title:"Error al presentar",description:S?.message||"No se pudo completar la presentacin",variant:"destructive"})}finally{d(!1)}}},b=()=>{o(new Date().toISOString().split("T")[0]),c([]),p({}),r()};return e?a.jsx(xr,{open:t,onOpenChange:S=>!S&&!u&&b(),children:a.jsxs(vr,{className:"max-w-2xl",onInteractOutside:S=>S.preventDefault(),children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Marcar como Presentado"}),a.jsx(_r,{children:"Complete la informacin de presentacin del modelo fiscal. Todos los campos son obligatorios."})]}),a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsx("div",{className:"rounded-lg border p-4 bg-muted/50",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Cliente:"}),a.jsx("p",{className:"font-medium",children:e.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Modelo:"}),a.jsx("p",{className:"font-medium",children:e.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Periodo:"}),a.jsx("p",{className:"font-medium",children:e.periodLabel})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Ao:"}),a.jsx("p",{className:"font-medium",children:e.year})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"presented-date",className:"text-sm font-medium",children:"Fecha de presentacin *"}),a.jsx(Ye,{id:"presented-date",type:"date",value:s,onChange:S=>{o(S.target.value),p(j=>({...j,date:void 0}))},max:new Date().toISOString().split("T")[0],className:f.date?"border-destructive":""}),f.date&&a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[a.jsx(Ec,{className:"h-3 w-3"}),f.date]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Documentos de presentacin (opcional)"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Adjunte los justificantes de presentacin si ya los tiene disponibles (solo archivos PDF, mximo 10MB cada uno). Podr aadirlos ms tarde si an no los tiene."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"file-upload",accept:".pdf,application/pdf",multiple:!0,onChange:m,className:"hidden"}),a.jsxs(pe,{type:"button",variant:"outline",onClick:()=>document.getElementById("file-upload")?.click(),className:"w-full",disabled:u,children:[a.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Seleccionar archivos PDF"]})]}),l.length>0&&a.jsx("div",{className:"space-y-2",children:l.map((S,j)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx(Vi,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:S.name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[(S.size/1024).toFixed(1)," KB"]})]})]}),a.jsx(pe,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(j),disabled:u,className:"h-8 w-8 flex-shrink-0",children:a.jsx(Gm,{className:"h-4 w-4"})})]},j))}),l.length===0&&a.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(Ec,{className:"h-3 w-3"}),"Sin documentos adjuntos. Podr aadirlos ms tarde desde la tarjeta."]})]})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:b,disabled:u,children:"Cancelar"}),a.jsx(pe,{onClick:x,disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):l.length===0?"Presentar sin documentos":`Presentar con ${l.length} documento(s)`})]})]})}):null}function t8e({open:t,filingData:e,onClose:n}){const{toast:r}=Dr(),[i,s]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(!1);N.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{if(e){u(!0);try{const j=await fetch(`/api/documents?clientId=${e.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(j.ok){const A=(await j.json()).filter(P=>{try{return JSON.parse(P.description||"{}").filingId===e.id}catch{return!1}});s(A.map(P=>({id:P.id,name:P.name,fileName:P.file_name||"documento.pdf",fileSize:P.file_size||0,createdAt:P.created_at})))}if(e.notes)try{const E=JSON.parse(e.notes);E.history&&Array.isArray(E.history)&&l(E.history)}catch{l([])}}catch{r({title:"Error",description:"No se pudieron cargar los detalles",variant:"destructive"})}finally{u(!1)}}},f=async(j,E)=>{try{const A=await fetch(`/api/documents/${j}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!A.ok)throw new Error("Error al descargar");const P=await A.blob(),O=window.URL.createObjectURL(P),k=document.createElement("a");k.href=O,k.download=E,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(O),document.body.removeChild(k),r({title:"Descarga iniciada",description:`Descargando ${E}`})}catch{r({title:"Error",description:"No se pudo descargar el documento",variant:"destructive"})}},p=async()=>{for(const j of i)await f(j.id,j.fileName),await new Promise(E=>setTimeout(E,500))},m=async j=>{if(confirm("Ests seguro de que quieres eliminar este documento?"))try{if(!(await fetch(`/api/documents/${j}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw new Error("Error al eliminar");r({title:"Documento eliminado",description:"El documento ha sido eliminado correctamente"}),await d()}catch{r({title:"Error",description:"No se pudo eliminar el documento",variant:"destructive"})}},v=async()=>{const j=document.createElement("input");j.type="file",j.multiple=!0,j.accept=".pdf,.jpg,.jpeg,.png,.doc,.docx",j.onchange=async E=>{const A=Array.from(E.target.files||[]);if(A.length!==0){u(!0);try{const P={filingId:e.id,clientId:e.clientId,taxModelCode:e.taxModelCode,periodId:e.periodId,periodLabel:e.periodLabel||"",year:new Date().getFullYear(),filingStatus:e.status,linkedAt:new Date().toISOString()};for(const O of A){const k=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({name:O.name,file_name:O.name,type:"tax_filing_document",description:JSON.stringify(P),clientId:e.clientId,category:"TAX_FILING"})});if(!k.ok)throw new Error(`Error al crear documento: ${O.name}`);const C=await k.json(),I=new FormData;if(I.append("file",O),!(await fetch(`/api/documents/${C.id}/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:I})).ok)throw new Error(`Error al subir archivo: ${O.name}`)}r({title:"Documentos subidos",description:`${A.length} documento(s) subido(s) correctamente`}),await d()}catch(P){r({title:"Error",description:P.message||"No se pudieron subir los documentos",variant:"destructive"})}finally{u(!1)}}},j.click()},y=j=>({NOT_STARTED:"PENDIENTE",IN_PROGRESS:"CALCULADO",PRESENTED:"PRESENTADO"})[j]||j,x=j=>{const E={NOT_STARTED:"bg-red-100 text-red-700",IN_PROGRESS:"bg-amber-100 text-amber-700",PRESENTED:"bg-green-100 text-green-700"};return a.jsx(ct,{className:E[j]||"bg-gray-100 text-gray-700",children:y(j)})},b=j=>new Date(j).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),S=j=>j<1024?`${j} B`:j<1024*1024?`${(j/1024).toFixed(1)} KB`:`${(j/(1024*1024)).toFixed(1)} MB`;return e?a.jsx(xr,{open:t,onOpenChange:n,children:a.jsxs(vr,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[a.jsx(br,{children:a.jsx(wr,{children:"Detalles de Presentacin Fiscal"})}),c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs(kc,{defaultValue:"info",className:"space-y-4",children:[a.jsxs(ql,{className:"grid w-full grid-cols-3",children:[a.jsxs(Wn,{value:"info",children:[a.jsx(iD,{className:"h-4 w-4 mr-2"}),"Informacin"]}),a.jsxs(Wn,{value:"documents",children:[a.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Documentos (",i.length,")"]}),a.jsxs(Wn,{value:"history",children:[a.jsx(Wm,{className:"h-4 w-4 mr-2"}),"Historial"]})]}),a.jsxs(or,{value:"info",className:"space-y-4",children:[a.jsx("div",{className:"rounded-lg border p-4 space-y-3",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliente"}),a.jsx("p",{className:"font-medium",children:e.clientName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Modelo"}),a.jsx("p",{className:"font-medium",children:e.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Periodo"}),a.jsx("p",{className:"font-medium",children:e.periodLabel})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ao"}),a.jsx("p",{className:"font-medium",children:e.year})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Estado actual"}),a.jsx("div",{className:"mt-1",children:x(e.status)})]}),e.presentedAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha de presentacin"}),a.jsx("p",{className:"font-medium",children:new Date(e.presentedAt).toLocaleDateString("es-ES")})]})]})}),a.jsxs("div",{className:"rounded-lg border p-4",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Resumen"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("p",{children:[" ",i.length," documento(s) adjunto(s)"]}),a.jsxs("p",{children:[" ",o.length," cambio(s) de estado registrado(s)"]}),e.presentedAt&&a.jsxs("p",{children:[" Presentado hace ",Math.floor((Date.now()-new Date(e.presentedAt).getTime())/(1e3*60*60*24))," da(s)"]})]})]})]}),a.jsxs(or,{value:"documents",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs(pe,{variant:"default",size:"sm",onClick:v,disabled:c,children:[a.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Subir documentos"]}),i.length>0&&a.jsxs(pe,{variant:"outline",size:"sm",onClick:p,children:[a.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Descargar todos"]})]}),i.length===0?a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(Vi,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay documentos adjuntos"})]}):a.jsx("div",{className:"space-y-2",children:i.map(j=>a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/50 transition",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Vi,{className:"h-10 w-10 text-red-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:j.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.fileName,"  ",S(j.fileSize)]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Subido el ",b(j.createdAt)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>f(j.id,j.fileName),title:"Descargar documento",children:a.jsx(Ha,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>m(j.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Eliminar documento",children:a.jsx(Wi,{className:"h-4 w-4"})})]})]},j.id))})]}),a.jsx(or,{value:"history",className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(Wm,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay historial de cambios disponible"})]}):a.jsx("div",{className:"space-y-3",children:o.map((j,E)=>a.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-card",children:[a.jsx("div",{className:"mt-1",children:x(j.status)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-medium",children:["Cambio a ",y(j.status)]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:b(j.timestamp)}),j.userName&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["por ",j.userName]})]})]},E))})})]})]})}):null}function f_(){const[t,e]=ca(),n=t?.startsWith("/impuestos/calendario")?"calendar":t?.startsWith("/impuestos/modelos")?"models":t?.startsWith("/impuestos/reportes")?"reports":"control",r=i=>{if(i==="control")return e("/impuestos/control");if(i==="calendar")return e("/impuestos/calendario");if(i==="models")return e("/impuestos/modelos");if(i==="reports")return e("/impuestos/reportes")};return a.jsx(kc,{value:n,onValueChange:r,className:"space-y-6",children:a.jsxs(ql,{className:"h-auto grid grid-cols-2 md:grid-cols-4 gap-1 p-1",children:[a.jsxs(Wn,{value:"control",children:[a.jsx(Ffe,{className:"h-4 w-4 mr-2"}),"Control de impuestos"]}),a.jsxs(Wn,{value:"calendar",children:[a.jsx(uN,{className:"h-4 w-4 mr-2"}),"Calendario fiscal"]}),a.jsxs(Wn,{value:"models",children:[a.jsx(nD,{className:"h-4 w-4 mr-2"}),"Modelos"]}),a.jsxs(Wn,{value:"reports",children:[a.jsx(vfe,{className:"h-4 w-4 mr-2"}),"Reportes"]})]})})}async function h_(){const t=localStorage.getItem("token"),e=await fetch("/api/tax-models",{method:"GET",headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:"Error al obtener modelos"}));throw new Error(n.error||"No se pudieron obtener los modelos")}return e.json()}async function n8e(t){const e=localStorage.getItem("token"),n=await fetch("/api/tax-models",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({error:"Error al crear modelo"}));throw new Error(r.error||"No se pudo crear el modelo")}return n.json()}async function r8e(t,e){const n=localStorage.getItem("token"),r=await fetch(`/api/tax-models/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},credentials:"include",body:JSON.stringify(e)});if(!r.ok){const i=await r.json().catch(()=>({error:"Error al actualizar modelo"}));throw new Error(i.error||"No se pudo actualizar el modelo")}return r.json()}async function i8e(t){const e=localStorage.getItem("token"),n=await fetch(`/api/tax-models/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!n.ok){const r=await n.json().catch(()=>({error:"Error al eliminar modelo"}));throw new Error(r.error||"No se pudo eliminar el modelo")}}const s8e=[{value:"ALL",label:"Todas"},{value:"MONTHLY",label:"Mensual"},{value:"QUARTERLY",label:"Trimestral"},{value:"ANNUAL",label:"Anual"},{value:"SPECIAL",label:"Especial 202"}];function a8e(){const{toast:t}=Dr(),[e,n]=N.useState(new Date().getFullYear()),[r,i]=N.useState("all"),[s,o]=N.useState("all"),[l,c]=N.useState(""),[u,d]=N.useState(""),[f,p]=N.useState(""),[m,v]=N.useState(""),[y,x]=N.useState("ALL"),[b,S]=N.useState(!1),[j,E]=N.useState(null),[A,P]=N.useState(null),O=mL(zy(_re,{activationConstraint:{distance:6}}),zy(Cre,{activationConstraint:{delay:120,tolerance:8}}));N.useEffect(()=>(window.openFilingDetails=re=>{P({id:re.id,clientId:re.clientId,clientName:re.clientName,taxModelCode:re.taxModelCode,periodLabel:re.periodLabel||"",year:e,status:re.status,presentedAt:void 0,notes:void 0})},window.replaceFilingDocuments=re=>{E({filingId:re.id,clientId:re.clientId,clientName:re.clientName,taxModelCode:re.taxModelCode,periodId:re.periodId,periodLabel:re.periodLabel||"",year:e,previousStatus:re.status})},()=>{delete window.openFilingDetails,delete window.replaceFilingDocuments}),[e]);const k=Wt({queryKey:["/api/clients"],staleTime:6e4}),C=Wt({queryKey:["/api/tax/filings",e,r,s,u,f,m,l,b],queryFn:async()=>{const re=new URLSearchParams;re.set("year",String(e)),r&&r!=="all"&&re.set("clientId",r),s!=="all"&&re.set("status",s),u&&u!=="ALL"&&re.set("model",u),f&&re.set("gestorId",f),m&&re.set("periodId",m),l&&re.set("q",l.trim()),b&&re.set("includeClosedPeriods","true");const Q=`/api/tax/filings${re.toString()?`?${re.toString()}`:""}`,F=await fetch(Q,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!F.ok)throw new Error("No se pudieron cargar los datos");return F.json()},staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),I=Wt({queryKey:["/api/tax/periods",e],queryFn:async()=>{const re=await fetch(`/api/tax/periods?year=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!re.ok)throw new Error("No se pudieron cargar periodos");return re.json()},staleTime:6e4});N.useEffect(()=>{if(!m)return;(I.data??[]).some(F=>F.id===m&&(y==="ALL"||F.kind===y))||v("")},[y,m,I.data]);const R=$t({mutationFn:async({id:re,status:Q,presentedAt:F})=>Rt("PATCH",`/api/tax/filings/${re}`,{status:Q,presentedAt:F??null}),onError:re=>{t({title:"Error",description:re?.message??"No se pudo actualizar el estado",variant:"destructive"}),C.refetch()},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1})}}),D=C.data??[],L=re=>{const Q=(re||"").toUpperCase();return Q==="PRESENTADO"?"PRESENTADO":Q==="CALCULADO"||Q==="IN_PROGRESS"||Q==="COMPLETADO"||Q==="COMPLETED"?"CALCULADO":"PENDIENTE"},{data:z=[]}=Wt({queryKey:["/api/tax-models"],queryFn:h_}),W=N.useMemo(()=>{const re=z.map(G=>({code:G.code,name:G.name})),Q=Object.entries(JE).map(([G,te])=>({code:G,name:te.name})),F=new Map;return Q.forEach(G=>F.set(G.code,G)),re.forEach(G=>F.set(G.code,G)),Array.from(F.values()).sort((G,te)=>G.code.localeCompare(te.code))},[z]),X=N.useMemo(()=>{const re={PENDIENTE:[],CALCULADO:[],PRESENTADO:[]};return D.forEach(Q=>{const F=String(Q.periodKind??"").toUpperCase();if(y!=="ALL"&&F!==y)return;const G=L(Q.status);if(s==="all"||G===s){const te=G in re?G:"PENDIENTE";re[te].push({...Q,status:te})}}),re},[D,s,y]),q=re=>{const Q=String(re.active.id),F=re.over?.id;if(!F)return;const G=D.find(te=>te.id===Q);if(!(!G||G.status===F)){if(F==="PRESENTADO"){E({filingId:G.id,clientId:G.clientId,clientName:G.clientName,taxModelCode:G.taxModelCode,periodId:G.periodId,periodLabel:G.periodLabel||"",year:e,previousStatus:G.status});return}if(cn.setQueriesData({queryKey:["/api/tax/filings"],exact:!1},te=>Array.isArray(te)?te.map(le=>le.id===G.id?{...le,status:F}:le):te),G.status==="PRESENTADO"){window.prompt("Motivo del cambio de estado (salir de Presentado)"),R.mutate({id:G.id,status:F,presentedAt:null});return}R.mutate({id:G.id,status:F})}},V=async(re,Q)=>{if(!j)return;const F=j.previousStatus==="PRESENTADO";try{if(F){const he=await fetch(`/api/documents?clientId=${j.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(he.ok){const xe=(await he.json()).filter(de=>{try{return JSON.parse(de.description||"{}").filingId===j.filingId}catch{return!1}});for(const de of xe)await fetch(`/api/documents/${de.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({status:"archived"})})}}const G=[];for(const he of Q){const me={filingId:j.filingId,clientId:j.clientId,taxModelCode:j.taxModelCode,periodId:j.periodId,periodLabel:j.periodLabel,year:j.year,filingStatus:"PRESENTED",linkedAt:new Date().toISOString()},xe=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({type:"tax_filing_document",name:`${j.taxModelCode} - ${j.periodLabel} - ${he.name}`,description:JSON.stringify(me),clientId:j.clientId})});if(!xe.ok)throw new Error("Error al crear documento");const de=await xe.json();G.push(de.id);const Ne=new FormData;if(Ne.append("file",he),!(await fetch(`/api/documents/${de.id}/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:Ne})).ok)throw new Error("Error al subir archivo")}const le={history:[{status:"PRESENTED",timestamp:new Date().toISOString()}],documentIds:G};await Rt("PATCH",`/api/tax/filings/${j.filingId}`,{status:"PRESENTED",presentedAt:re,notes:JSON.stringify(le)}),cn.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1}),t({title:F?"Documentos reemplazados":"Presentacin registrada",description:F?`Documentos del modelo ${j.taxModelCode} reemplazados correctamente (${Q.length} nuevo(s))`:`Modelo ${j.taxModelCode} marcado como presentado con ${Q.length} documento(s)`}),E(null)}catch(G){throw t({title:"Error",description:G?.message||"No se pudo completar la presentacin",variant:"destructive"}),G}},Y=()=>{E(null)};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificacin fiscal con la misma experiencia consistente que Administracin."})]}),a.jsx(f_,{}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Impuestos 360"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tablero de presentaciones fiscales"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Ye,{placeholder:"Buscar cliente, NIF o modelo...",value:l,onChange:re=>c(re.target.value),className:"w-64"}),a.jsx(pe,{variant:"ghost",onClick:()=>c(""),children:"Limpiar"}),a.jsx(Ye,{type:"number",value:e,onChange:re=>n(Number(re.target.value)),className:"w-24"}),a.jsxs(Fn,{value:y,onValueChange:re=>x(re),children:[a.jsx(Rn,{className:"w-40",children:a.jsx(Bn,{placeholder:"Periodicidad"})}),a.jsx(Dn,{children:s8e.map(re=>a.jsx(lt,{value:re.value,children:re.label},re.value))})]}),a.jsxs(Fn,{value:m,onValueChange:v,children:[a.jsx(Rn,{className:"w-64",children:a.jsx(Bn,{placeholder:"Periodo"})}),a.jsx(Dn,{children:(I.data??[]).filter(re=>y==="ALL"?!0:re.kind===y).map(re=>a.jsxs(lt,{value:re.id,children:[re.label," / ",re.year]},re.id))})]}),a.jsxs(Fn,{value:s,onValueChange:re=>o(re),children:[a.jsx(Rn,{className:"w-40",children:a.jsx(Bn,{placeholder:"Estado"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todos"}),a.jsx(lt,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(lt,{value:"CALCULADO",children:"Calculado"}),a.jsx(lt,{value:"PRESENTADO",children:"Presentado"})]})]}),a.jsxs(Fn,{value:r,onValueChange:i,children:[a.jsx(Rn,{className:"w-64",children:a.jsx(Bn,{placeholder:"Cliente"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todos"}),(k.data??[]).map(re=>a.jsx(lt,{value:re.id,children:re.razonSocial},re.id))]})]}),a.jsxs(Fn,{value:u||"ALL",onValueChange:re=>d(re),children:[a.jsx(Rn,{className:"w-56",children:a.jsx(Bn,{placeholder:"Modelo"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ALL",children:"Todos"}),W.map(re=>a.jsxs(lt,{value:re.code,children:[re.code,"  ",re.name]},re.code))]})]}),a.jsx(Ye,{placeholder:"Gestor (ID)",value:f,onChange:re=>p(re.target.value),className:"w-40"}),a.jsx(pe,{variant:"outline",onClick:async()=>{if((I.data??[]).length===0&&window.confirm("No hay periodos para este ao. Crear ao fiscal ahora?")){const F=await fetch("/api/tax/periods/create-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:e})});if(F.ok)await I.refetch(),t({title:"Ao fiscal creado",description:`Se han creado periodos base para ${e}`});else{try{const G=await F.json();t({title:"Error",description:G?.error||"No se pudo crear el ao fiscal",variant:"destructive"})}catch{t({title:"Error",description:"No se pudo crear el ao fiscal",variant:"destructive"})}return}}const re=await fetch("/api/tax/filings/ensure-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:e})});if(re.ok){try{const Q=await re.json();t({title:"Tarjetas generadas",description:`Ao ${e}`})}catch{}C.refetch()}else try{const Q=await re.json();t({title:"Error",description:Q?.error||"No se pudieron generar las tarjetas",variant:"destructive"})}catch{t({title:"Error",description:"No se pudieron generar las tarjetas",variant:"destructive"})}},children:"Generar tarjetas"}),a.jsxs("div",{className:"flex items-center gap-2 border-l pl-2",children:[a.jsx("input",{type:"checkbox",id:"includeClosedPeriods",checked:b,onChange:re=>S(re.target.checked),className:"h-4 w-4 rounded border-gray-300"}),a.jsx("label",{htmlFor:"includeClosedPeriods",className:"text-sm font-medium cursor-pointer",children:"Incluir periodos cerrados"})]})]})]}),C.isLoading?a.jsxs("div",{className:"space-y-4",children:[a.jsx(pr,{className:"h-12 w-full"}),a.jsx(pr,{className:"h-[420px] w-full"})]}):D.length===0?a.jsxs("div",{className:"rounded-xl border p-12 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"No hay tarjetas para este ao."}),a.jsxs("p",{className:"mt-1",children:["Usa el botn ",a.jsx("span",{className:"font-semibold",children:"Generar tarjetas"})," para crearlas a partir de las asignaciones activas."]})]}):a.jsx(yL,{sensors:O,collisionDetection:vre,onDragEnd:q,children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(uO,{title:"Pendiente",accent:"bg-red-50 border-red-200",badge:"bg-red-100 text-red-700",items:X.PENDIENTE}),a.jsx(uO,{title:"Calculado",accent:"bg-amber-50 border-amber-200",badge:"bg-amber-100 text-amber-700",items:X.CALCULADO}),a.jsx(uO,{title:"Presentado",accent:"bg-emerald-50 border-emerald-200",badge:"bg-emerald-100 text-emerald-700",items:X.PRESENTADO})]})}),a.jsx(e8e,{open:!!j,filingData:j,onConfirm:V,onCancel:Y}),a.jsx(t8e,{open:!!A,filingData:A,onClose:()=>P(null)})]})}function uO({title:t,accent:e,badge:n,items:r}){const i=t.toUpperCase(),{setNodeRef:s,isOver:o}=Mre({id:i});return a.jsxs("div",{ref:s,id:i,className:`relative flex h-full min-h-[320px] flex-col gap-3 rounded-xl border p-4 ${e} ${o?"ring-2 ring-primary/40":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:t}),a.jsx(ct,{variant:"secondary",className:"bg-background text-muted-foreground",children:r.length})]}),a.jsx(l8e,{items:r,renderItem:l=>a.jsx(o8e,{item:l,badgeClass:n},l.id)})]})}function o8e({item:t,badgeClass:e}){const n=t.calendarStatus==="CERRADO",{attributes:r,listeners:i,setNodeRef:s,transform:o,isDragging:l}=Pre({id:t.id,disabled:n}),c=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:void 0,[u,d]=N.useState(!1),[f,p]=N.useState(0),[m,v]=N.useState(!1),{toast:y}=Dr();N.useEffect(()=>{t.status==="PRESENTADO"&&x()},[t.id,t.status]);const x=async()=>{try{const P=await fetch(`/api/documents?clientId=${t.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(P.ok){const k=(await P.json()).filter(C=>{try{return JSON.parse(C.description||"{}").filingId===t.id}catch{return!1}});p(k.length)}}catch{}},b=async()=>{v(!0);try{const P=await fetch(`/api/documents?clientId=${t.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(P.ok){const k=(await P.json()).filter(C=>{try{return JSON.parse(C.description||"{}").filingId===t.id}catch{return!1}});if(k.length===0){y({title:"Sin documentos",description:"No hay documentos adjuntos para descargar",variant:"destructive"});return}for(const C of k){const I=await fetch(`/api/documents/${C.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(I.ok){const R=await I.blob(),D=window.URL.createObjectURL(R),L=document.createElement("a");L.href=D,L.download=C.file_name||`documento-${C.id}.pdf`,document.body.appendChild(L),L.click(),window.URL.revokeObjectURL(D),document.body.removeChild(L)}await new Promise(R=>setTimeout(R,300))}y({title:"Descarga completada",description:`${k.length} documento(s) descargado(s)`})}}catch{y({title:"Error",description:"No se pudieron descargar los documentos",variant:"destructive"})}finally{v(!1)}},S=()=>{typeof window.openFilingDetails=="function"&&window.openFilingDetails(t)},j=()=>{typeof window.replaceFilingDocuments=="function"&&window.replaceFilingDocuments(t)},E=async P=>{try{if(P==="PRESENTADO"){const O=window.prompt("Fecha de presentacin (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!O)return;await Rt("PATCH",`/api/tax/filings/${t.id}`,{status:P,presentedAt:O}),y({title:"Actualizado",description:`Marcado como PRESENTADO (${O})`})}else await Rt("PATCH",`/api/tax/filings/${t.id}`,{status:P,presentedAt:null}),y({title:"Actualizado",description:`Estado cambiado a ${P}`});cn.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1})}catch(O){y({title:"Error",description:O?.message||"No se pudo actualizar",variant:"destructive"})}},A=JE[t.taxModelCode];return a.jsxs("div",{ref:s,id:t.id,...n?{}:i,...n?{}:r,style:c,className:`rounded-lg border transition-all duration-200 ${n?"bg-gray-50 border-gray-300 opacity-60 cursor-not-allowed":l?"bg-white opacity-80 ring-2 ring-primary/50 shadow-lg":"bg-white shadow-sm hover:shadow-md"} ${u?"p-4 shadow-xl":"p-3"}`,children:[a.jsxs("div",{className:"cursor-pointer select-none",onClick:P=>{l||(P.stopPropagation(),d(!u))},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:t.clientName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(ct,{variant:"outline",className:`text-xs font-mono ${e}`,children:t.taxModelCode}),a.jsx("span",{className:"text-xs text-muted-foreground",children:t.periodLabel||"Sin periodo"})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx(ct,{variant:t.status==="PRESENTADO"?"default":"secondary",className:"text-xs whitespace-nowrap",children:t.status}),n&&a.jsx(ct,{variant:"outline",className:"text-xs bg-gray-200 text-gray-700",children:"CERRADO"}),t.status==="PRESENTADO"&&f>0&&a.jsxs(ct,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200 flex items-center gap-1",children:[a.jsx(pp,{className:"h-3 w-3"}),f]}),t.status==="PRESENTADO"&&f===0&&a.jsxs(ct,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200 flex items-center gap-1",children:[a.jsx(Oo,{className:"h-3 w-3"}),"Sin docs"]}),u&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Click para cerrar"})]})]}),t.status==="PRESENTADO"&&f===0&&!u&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),j()},className:"w-full text-xs bg-amber-50 border-amber-300 hover:bg-amber-100 text-amber-900 flex items-center justify-center gap-2",children:[a.jsx(Oo,{className:"h-3 w-3"}),"Subir documentos ahora"]})]}),t.status==="PRESENTADO"&&!u&&a.jsx("div",{className:"absolute top-2 right-2",onClick:P=>P.stopPropagation(),children:a.jsxs(BR,{children:[a.jsx($R,{asChild:!0,children:a.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-70 hover:opacity-100",disabled:m,children:a.jsx(CG,{className:"h-4 w-4"})})}),a.jsxs(DS,{align:"end",className:"w-56",children:[a.jsxs(Ol,{onClick:S,className:"gap-2",children:[a.jsx(Cf,{className:"h-4 w-4"}),"Ver detalles e historial"]}),f>0&&a.jsxs(a.Fragment,{children:[a.jsxs(Ol,{onClick:b,className:"gap-2",disabled:m,children:[a.jsx(Ha,{className:"h-4 w-4"}),"Descargar documentos (",f,")"]}),a.jsx(IS,{}),a.jsxs(Ol,{onClick:j,className:"gap-2",children:[a.jsx(xf,{className:"h-4 w-4"}),"Reemplazar documentos"]})]}),f===0&&a.jsxs(a.Fragment,{children:[a.jsx(Ol,{disabled:!0,className:"text-xs text-muted-foreground italic",children:"Sin documentos adjuntos"}),a.jsx(IS,{}),a.jsxs(Ol,{onClick:j,className:"gap-2 text-blue-600",children:[a.jsx(Oo,{className:"h-4 w-4"}),"Subir documentos ahora"]})]})]})]})})]}),u&&a.jsxs("div",{className:"mt-4 space-y-3 border-t pt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Informacin del Modelo"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Modelo:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Nombre:"}),a.jsx("span",{className:"ml-1 font-medium",children:A?.name||"N/A"})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Datos del Cliente"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Razn Social:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"NIF/CIF:"}),a.jsx("span",{className:"ml-1 font-mono font-medium",children:t.nifCif})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"ID Cliente:"}),a.jsx("span",{className:"ml-1 font-mono text-muted-foreground",children:t.clientId})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Periodo Fiscal"}),a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Periodo:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.periodLabel||"Sin asignar"})]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"ID Periodo:"}),a.jsx("span",{className:"ml-1 font-mono text-muted-foreground",children:t.periodId})]})]}),t.status==="PRESENTADO"&&a.jsxs("div",{className:"space-y-2 border-t pt-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Documentos Adjuntos"}),f>0&&a.jsxs(ct,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[f," archivo(s)"]})]}),f===0?a.jsxs("div",{className:"text-xs text-muted-foreground italic bg-amber-50 border border-amber-200 rounded p-3",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(Oo,{className:"h-3 w-3"}),"No hay documentos adjuntos todava"]}),a.jsxs(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),j()},className:"mt-2 w-full text-xs bg-white hover:bg-amber-100",children:[a.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Subir documentos"]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-xs text-green-700 bg-green-50 border border-green-200 rounded p-2 flex items-center gap-2",children:[a.jsx(pp,{className:"h-3 w-3"}),f," documento(s) adjunto(s)"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),b()},disabled:m,className:"flex-1 text-xs",children:[a.jsx(Ha,{className:"h-3 w-3 mr-1"}),"Descargar"]}),a.jsxs(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),S()},className:"flex-1 text-xs",children:[a.jsx(Cf,{className:"h-3 w-3 mr-1"}),"Ver detalles"]})]})]})]}),a.jsxs("div",{className:"space-y-2 border-t pt-3",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Cambiar Estado"}),n?a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Este periodo est cerrado. No se pueden realizar cambios."}):a.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.status!=="PENDIENTE"&&a.jsx(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),E("PENDIENTE")},className:"flex-1 text-xs",children:" Pendiente"}),t.status!=="CALCULADO"&&a.jsx(pe,{size:"sm",variant:"outline",onClick:P=>{P.stopPropagation(),E("CALCULADO")},className:"flex-1 text-xs",children:" Calculado"}),t.status!=="PRESENTADO"&&a.jsx(pe,{size:"sm",onClick:P=>{P.stopPropagation(),E("PRESENTADO")},className:"flex-1 text-xs",children:" Presentado"})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground border-t pt-2",children:a.jsxs("span",{className:"font-mono",children:["ID: ",t.id]})})]})]})}function l8e({items:t,renderItem:e}){const n=N.useRef(null);return t.length===0?a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"mt-6 text-center text-xs text-muted-foreground",children:"Sin asignaciones."})}):a.jsx("div",{ref:n,className:"flex-1 overflow-auto space-y-3",children:t.map(r=>a.jsx("div",{children:e(r)},r.id))})}async function c8e(){const t=localStorage.getItem("token"),e=await fetch("/api/tax/calendar/download-template",{method:"GET",headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(!e.ok){const s=await e.json().catch(()=>({error:"Error al descargar la plantilla"}));throw new Error(s.error||"No se pudo descargar la plantilla")}const n=await e.blob(),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="plantilla-calendario-fiscal.xlsx",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),document.body.removeChild(i)}async function u8e(t){const e=localStorage.getItem("token"),n=new FormData;n.append("file",t);const r=await fetch("/api/tax/calendar/import-excel",{method:"POST",headers:{Authorization:`Bearer ${e}`},credentials:"include",body:n}),i=await r.json();if(!r.ok){if(i.result)return i.result;throw new Error(i.error||"Error al importar el archivo")}return i.result}function d8e({open:t,onClose:e,onImportSuccess:n}){const{toast:r}=Dr(),[i,s]=N.useState(null),[o,l]=N.useState(!1),[c,u]=N.useState(null),d=m=>{const v=m.target.files?.[0];if(v){if(!(v.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||v.name.endsWith(".xlsx"))){r({title:"Archivo invlido",description:"Por favor selecciona un archivo Excel (.xlsx)",variant:"destructive"});return}s(v),u(null)}},f=async()=>{if(!i){r({title:"No hay archivo",description:"Por favor selecciona un archivo Excel para importar",variant:"destructive"});return}l(!0);try{const m=await u8e(i);u(m),m.success?(r({title:"Importacin exitosa",description:`Se importaron ${m.imported} periodos correctamente`}),n()):r({title:"Importacin con errores",description:"Revisa el detalle de errores a continuacin",variant:"destructive"})}catch(m){r({title:"Error en la importacin",description:m?.message||"No se pudo procesar el archivo",variant:"destructive"}),u({imported:0,errors:[m?.message||"Error desconocido"],duplicates:[],success:!1})}finally{l(!1)}},p=()=>{s(null),u(null),e()};return a.jsx(xr,{open:t,onOpenChange:p,children:a.jsxs(vr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Importar Calendario Fiscal desde Excel"}),a.jsx(_r,{children:"Sube un archivo Excel con los periodos fiscales a importar. Descarga primero la plantilla para conocer el formato correcto."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-md border p-4 bg-muted/50",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Formato del archivo Excel:"}),a.jsxs("ul",{className:"text-sm space-y-1 ml-4 list-disc",children:[a.jsxs("li",{children:[a.jsx("strong",{children:'Hoja "Periodos"'})," con las columnas:"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"modelCode*"})," - Cdigo del modelo (ej: 303, 111, 130)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"period*"})," - Periodo (ej: 1T, 2T, M01, ANUAL)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"year*"})," - Ao (ej: 2025)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"startDate*"})," - Fecha inicio (DD/MM/YYYY o YYYY-MM-DD)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"endDate*"})," - Fecha fin (DD/MM/YYYY o YYYY-MM-DD)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"active"})," - SI o NO (por defecto: SI)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"locked"})," - SI o NO (por defecto: NO)"]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Los campos marcados con ",a.jsx("code",{children:"*"})," son obligatorios."]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"excel-file",className:"block text-sm font-medium text-foreground",children:"Seleccionar archivo Excel"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"excel-file",type:"file",accept:".xlsx",onChange:d,disabled:o,className:"block w-full text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 disabled:opacity-50"}),i&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(i0,{className:"h-4 w-4"}),i.name]})]})]}),c&&a.jsxs("div",{className:"rounded-md border p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[c.success?a.jsx(gu,{className:"h-5 w-5 text-green-600"}):a.jsx(vu,{className:"h-5 w-5 text-destructive"}),a.jsx("h4",{className:"font-semibold",children:c.success?"Importacin completada":"Importacin con errores"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Registros importados:"})," ",c.imported]}),c.duplicates.length>0&&a.jsxs("div",{children:[a.jsxs("strong",{className:"text-yellow-600",children:["Duplicados omitidos (",c.duplicates.length,"):"]}),a.jsx("ul",{className:"ml-4 mt-1 space-y-1 max-h-32 overflow-y-auto",children:c.duplicates.map((m,v)=>a.jsx("li",{className:"text-yellow-700",children:m},v))})]}),c.errors.length>0&&a.jsxs("div",{children:[a.jsxs("strong",{className:"text-destructive",children:["Errores (",c.errors.length,"):"]}),a.jsx("ul",{className:"ml-4 mt-1 space-y-1 max-h-32 overflow-y-auto",children:c.errors.map((m,v)=>a.jsx("li",{className:"text-destructive",children:m},v))})]})]})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:p,disabled:o,children:c?.success?"Cerrar":"Cancelar"}),!c?.success&&a.jsx(pe,{onClick:f,disabled:!i||o,children:o?a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Oo,{className:"mr-2 h-4 w-4"}),"Importar"]})})]})]})})}function f8e(){const{toast:t}=Dr(),e=mo(),n=new Date().getFullYear(),[r,i]=N.useState(n),[s,o]=N.useState("TODAS"),[l,c]=N.useState("ALL"),[u,d]=N.useState("TODOS"),[f,p]=N.useState(""),[m,v]=N.useState(!1),[y,x]=N.useState({modelCode:"",period:"",startDate:"",endDate:""}),[b,S]=N.useState({}),[j,E]=N.useState("end"),[A,P]=N.useState("asc"),[O,k]=N.useState("calendar"),[C,I]=N.useState(!1),{data:R=[],refetch:D}=Wt({queryKey:["/api/tax/calendar",r,s,l,u],queryFn:async()=>{const ae=new URLSearchParams;ae.set("year",String(r)),l&&l!=="ALL"&&ae.set("model",l),s==="MENSUAL"&&ae.set("periodicity","monthly"),s==="TRIMESTRAL"&&ae.set("periodicity","quarterly"),s==="ANUAL"&&ae.set("periodicity","annual"),s==="ESPECIAL"&&ae.set("periodicity","special"),u!=="TODOS"&&ae.set("status",u);const Pe=await fetch(`/api/tax/calendar?${ae.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!Pe.ok)throw new Error("No se pudo cargar el calendario");return Pe.json()},staleTime:3e4}),L=$t({mutationFn:async ae=>fetch("/api/tax/calendar/create-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:ae})}).then(Pe=>{if(!Pe.ok)throw new Error("No se pudo crear el ao");return Pe.json()}),onSuccess:()=>{D(),t({title:"Ao fiscal creado",description:`Se ha creado el ao ${r}`})}}),z=$t({mutationFn:async ae=>{const Pe=await fetch("/api/tax/calendar/generate-aeat-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:ae})});if(!Pe.ok){const J=await Pe.json();throw new Error(J.error||"No se pudo generar el calendario")}return Pe.json()},onSuccess:ae=>{D(),t({title:"Calendario AEAT generado",description:ae.message||"Se han generado todos los periodos fiscales"})},onError:ae=>{t({title:"Error",description:ae.message||"No se pudo generar el calendario",variant:"destructive"})}}),W=$t({mutationFn:async ae=>{if(!(await fetch(`/api/tax/calendar/${ae}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw new Error("No se pudo eliminar el periodo")},onSuccess:()=>{D(),t({title:"Periodo eliminado",description:"El periodo se ha eliminado correctamente"})},onError:ae=>{t({title:"Error",description:ae.message,variant:"destructive"})}}),X=()=>{window.open(`/api/tax/calendar/${r}.ics`,"_blank")},q=async()=>{try{await c8e(),t({title:"Plantilla descargada",description:"El archivo Excel se ha descargado correctamente"})}catch(ae){t({title:"Error al descargar",description:ae?.message||"No se pudo descargar la plantilla",variant:"destructive"})}},V=ae=>{if(ae.status==="PENDIENTE"||ae.status==="ABIERTO"||ae.status==="CERRADO")return ae.status;const Pe=new Date,J=new Date(ae.startDate),ne=new Date(ae.endDate);return Pe>ne?"CERRADO":Pe>=J?"ABIERTO":"PENDIENTE"},Y=N.useMemo(()=>{const ae={PENDIENTE:0,ABIERTO:0,CERRADO:0};for(const Pe of R){const J=V(Pe);ae[J]+=1}return ae},[R]),re=N.useMemo(()=>{let ae=[...R];if(u!=="TODOS"&&(ae=ae.filter(J=>V(J)===u)),ae.sort((J,ne)=>{let Re=0;return j==="end"&&(Re=new Date(J.endDate).getTime()-new Date(ne.endDate).getTime()),j==="start"&&(Re=new Date(J.startDate).getTime()-new Date(ne.startDate).getTime()),j==="model"&&(Re=J.modelCode.localeCompare(ne.modelCode)),j==="period"&&(Re=J.period.localeCompare(ne.period)),A==="asc"?Re:-Re}),!f)return ae;const Pe=f.toLowerCase();return ae.filter(J=>`${J.modelCode}`.toLowerCase().includes(Pe)||`${J.period}`.toLowerCase().includes(Pe))},[R,f,u]),Q=ae=>{const Pe=V(ae);return Pe==="PENDIENTE"?a.jsx(ct,{className:"bg-red-100 text-red-700",children:"PENDIENTE"}):Pe==="ABIERTO"?a.jsx(ct,{className:"bg-amber-100 text-amber-700",children:"ABIERTO"}):a.jsx(ct,{className:"bg-gray-200 text-gray-700",children:"CERRADO"})},F=ae=>{const Pe=new Date,J=new Date(ae.startDate),ne=new Date(ae.endDate);if(Pe>=J&&Pe<=ne)return a.jsxs(ct,{className:"bg-emerald-600 text-white inline-flex items-center",children:[a.jsx(Jfe,{className:"h-3 w-3 mr-1"})," En curso"]});const Re=ae.daysToStart;if(Re==null)return"";const dt=Re<=3?"bg-red-600 text-white":Re<=7?"bg-orange-500 text-white":"bg-primary text-primary-foreground",et=Re<=3?iy:Re<=7?SF:Nfe;return a.jsxs(ct,{className:`${dt} inline-flex items-center`,children:[a.jsx(et,{className:"h-3 w-3 mr-1"})," ",le(Re)]})},G=ae=>{const Pe=new Date,J=new Date(ae.endDate);if(Pe>J)return a.jsxs(ct,{className:"bg-gray-500 text-white inline-flex items-center",children:[a.jsx(vu,{className:"h-3 w-3 mr-1"})," Vencido"]});const ne=ae.daysToEnd;if(ne==null)return"";const Re=ne<=1?"bg-red-700 text-white":ne<=3?"bg-red-600 text-white":ne<=7?"bg-amber-500 text-white":"bg-emerald-600 text-white",dt=ne<=3?iy:ne<=7?SF:gu;return a.jsxs(ct,{className:`${Re} inline-flex items-center`,children:[a.jsx(dt,{className:"h-3 w-3 mr-1"})," ",le(ne)]})},te=(ae,Pe)=>a.jsxs("button",{type:"button",onClick:()=>{j===Pe?P(J=>J==="asc"?"desc":"asc"):(E(Pe),P("asc"))},className:"text-left hover:underline inline-flex items-center gap-1",children:[a.jsx("span",{children:ae}),j===Pe?a.jsx("span",{className:"text-xs",children:A==="asc"?"":""}):null]}),le=ae=>ae===null?"":`${ae} da${Math.abs(ae)===1?"":"s"}`,{data:he=[]}=Wt({queryKey:["/api/tax-models"],queryFn:h_}),me=N.useMemo(()=>{const ae=he.map(ne=>({code:ne.code,name:ne.name})),Pe=Object.entries(JE).map(([ne,Re])=>({code:ne,name:Re.name})),J=new Map;return Pe.forEach(ne=>J.set(ne.code,ne)),ae.forEach(ne=>J.set(ne.code,ne)),Array.from(J.values()).sort((ne,Re)=>ne.code.localeCompare(Re.code))},[he]),xe=ae=>{try{const Pe=new Date(ae),J=Pe.getFullYear(),ne=String(Pe.getMonth()+1).padStart(2,"0"),Re=String(Pe.getDate()).padStart(2,"0");return`${J}-${ne}-${Re}`}catch{return""}},de=async ae=>{const Pe=b[ae];if(!Pe)return;const J={};if(Pe.startDate&&(J.startDate=Pe.startDate),Pe.endDate&&(J.endDate=Pe.endDate),!Object.keys(J).length)return;if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(ae)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify(J)})).ok)throw new Error("No se pudo actualizar");S(Re=>{const dt={...Re};return delete dt[ae],dt}),D()},Ne=async()=>{try{if(!y.modelCode||!y.period||!y.startDate||!y.endDate)throw new Error("Completa todos los campos");const ae={modelCode:y.modelCode.toUpperCase(),period:y.period.toUpperCase(),year:r,startDate:y.startDate,endDate:y.endDate},Pe=await fetch("/api/tax/calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify(ae)});if(!Pe.ok){let Re="";try{Re=(await Pe.json())?.error||""}catch{}throw new Error(Re||(Pe.status===409?"Periodo duplicado (Modelo/Periodo/Ao)":"No se pudo crear el periodo"))}v(!1),x({modelCode:"",period:"",startDate:"",endDate:""});const J=ae.period,ne=ae.modelCode;J==="ANUAL"?o("ANUAL"):/^[1234]T$/.test(J)?o("TRIMESTRAL"):/^M(04|10|12)$/.test(J)?o("ESPECIAL"):/^M\d{2}$/.test(J)?o("MENSUAL"):o("TODAS"),c(ne),d("TODOS"),t({title:"Periodo creado",description:`${ne} ${Ce(J)}/${r}`}),await e.invalidateQueries({queryKey:["/api/tax/calendar"]}),await D()}catch(ae){t({title:"Error",description:ae?.message??"",variant:"destructive"})}},Ce=ae=>{const Pe={M01:"Enero",M02:"Febrero",M03:"Marzo",M04:"Abril",M05:"Mayo",M06:"Junio",M07:"Julio",M08:"Agosto",M09:"Septiembre",M10:"Octubre",M11:"Noviembre",M12:"Diciembre"},J={"1T":"1. trimestre","2T":"2. trimestre","3T":"3. trimestre","4T":"4. trimestre"};return Pe[ae]?Pe[ae]:J[ae]?J[ae]:ae==="ANUAL"?"Anual":ae};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificacin fiscal con la misma experiencia consistente que Administracin."})]}),a.jsx(f_,{}),a.jsxs(Xe,{className:"shadow-sm",children:[a.jsx(ht,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gfe,{className:"h-5 w-5 text-muted-foreground"}),a.jsx(gt,{className:"text-xl",children:"Calendario fiscal AEAT"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona los modelos oficiales con sus fechas de apertura y cierre."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(pe,{onClick:()=>v(!0),className:"gap-2",children:[a.jsx(Ri,{className:"h-4 w-4"})," Aadir periodo"]}),a.jsxs(BR,{children:[a.jsx($R,{asChild:!0,children:a.jsxs(pe,{variant:"outline",className:"gap-2",children:["Acciones ",a.jsx(Bj,{className:"h-4 w-4"})]})}),a.jsxs(DS,{align:"end",className:"w-56",children:[a.jsxs(Ol,{onClick:()=>{window.confirm(`Generar calendario AEAT completo para ${r}?

Esto crear 26 periodos fiscales (trimestres, meses, anuales y especiales) con las fechas oficiales de la Agencia Tributaria.`)&&z.mutate(r)},disabled:z.isPending,className:"gap-2",children:[a.jsx(Xfe,{className:"h-4 w-4"}),z.isPending?"Generando...":"Generar Calendario AEAT"]}),a.jsxs(Ol,{onClick:()=>L.mutate(r),className:"gap-2",children:[a.jsx(FG,{className:"h-4 w-4"}),"Nuevo ao fiscal"]}),a.jsx(IS,{}),a.jsxs(Ol,{onClick:X,className:"gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"Exportar .ICS"]}),a.jsxs(Ol,{onClick:q,className:"gap-2",children:[a.jsx(i0,{className:"h-4 w-4"}),"Descargar Plantilla"]}),a.jsxs(Ol,{onClick:()=>I(!0),className:"gap-2",children:[a.jsx(Oo,{className:"h-4 w-4"}),"Importar Excel"]})]})]})]})]})}),a.jsxs(Qe,{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Ao"}),a.jsx(Ye,{type:"number",value:r,onChange:ae=>i(Number(ae.target.value)),className:"w-24 h-9"})]}),a.jsxs(Fn,{value:s,onValueChange:ae=>o(ae),children:[a.jsx(Rn,{className:"w-40 h-9",children:a.jsx(Bn,{placeholder:"Periodicidad"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"TODAS",children:"Todas"}),a.jsx(lt,{value:"MENSUAL",children:"Mensual"}),a.jsx(lt,{value:"TRIMESTRAL",children:"Trimestral"}),a.jsx(lt,{value:"ANUAL",children:"Anual"}),a.jsx(lt,{value:"ESPECIAL",children:"Especial 202"})]})]}),a.jsxs(Fn,{value:u,onValueChange:ae=>d(ae),children:[a.jsx(Rn,{className:"w-40 h-9",children:a.jsx(Bn,{placeholder:"Estado"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"TODOS",children:"Todos"}),a.jsx(lt,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(lt,{value:"ABIERTO",children:"Abierto"}),a.jsx(lt,{value:"CERRADO",children:"Cerrado"})]})]}),a.jsxs(Fn,{value:l,onValueChange:c,children:[a.jsx(Rn,{className:"w-60 h-9",children:a.jsx(Bn,{placeholder:"Filtrar por modelo (ej. 303)"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ALL",children:"Todos los modelos"}),me.map(ae=>a.jsxs(lt,{value:ae.code,children:[ae.code,"  ",ae.name]},ae.code))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Qy,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{className:"pl-8 w-64 h-9",placeholder:"Buscar modelo o periodo",value:f,onChange:ae=>p(ae.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[a.jsxs(ct,{className:"bg-red-100 text-red-700",children:["Pendiente ",Y.PENDIENTE]}),a.jsxs(ct,{className:"bg-amber-100 text-amber-700",children:["Abierto ",Y.ABIERTO]}),a.jsxs(ct,{className:"bg-gray-200 text-gray-700",children:["Cerrado ",Y.CERRADO]})]})]}),re.length>0?a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("div",{className:"grid grid-cols-10 text-xs text-muted-foreground px-2",children:[a.jsx("div",{children:te("Modelo","model")}),a.jsx("div",{children:te("Periodo","period")}),a.jsx("div",{children:"Estado"}),a.jsx("div",{children:te("Fecha inicio","start")}),a.jsx("div",{children:"Inicio en"}),a.jsx("div",{children:te("Fecha fin","end")}),a.jsx("div",{children:"Finaliza en"}),a.jsx("div",{children:"Activo"}),a.jsx("div",{children:"Bloqueado"}),a.jsx("div",{className:"text-center"})]}),re.map(ae=>{const Pe=b[ae.id]||{},J=Pe.startDate??xe(ae.startDate),ne=Pe.endDate??xe(ae.endDate),Re=V(ae),dt=Re==="PENDIENTE"?"border-l-4 border-l-red-400":Re==="ABIERTO"?"border-l-4 border-l-amber-400":"border-l-4 border-l-gray-400",et=Re==="CERRADO",Ve=!!ae.locked,ge=et||Ve;return a.jsxs("div",{className:`grid grid-cols-10 items-center rounded-lg border p-3 bg-card/50 hover:bg-card transition group ${dt}`,children:[a.jsx("div",{className:"font-medium flex items-center gap-2",children:a.jsx(ct,{variant:"outline",className:"bg-muted",children:ae.modelCode})}),a.jsxs("div",{children:[Ce(ae.period)," / ",ae.year]}),a.jsx("div",{children:Q(ae)}),a.jsx("div",{children:a.jsx(Ye,{type:"date",value:J,onChange:Se=>S(ke=>({...ke,[ae.id]:{...ke[ae.id],startDate:Se.target.value}})),onBlur:()=>de(ae.id),className:"h-8",disabled:ge})}),a.jsx("div",{children:F(ae)}),a.jsx("div",{children:a.jsx(Ye,{type:"date",value:ne,onChange:Se=>S(ke=>({...ke,[ae.id]:{...ke[ae.id],endDate:Se.target.value}})),onBlur:()=>de(ae.id),className:"h-8",disabled:ge})}),a.jsx("div",{children:G(ae)}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(Va,{checked:!!ae.active,onCheckedChange:async Se=>{try{if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(ae.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({active:Se})})).ok)throw new Error("No se pudo actualizar");D()}catch(ke){t({title:"Error",description:ke?.message??"",variant:"destructive"})}}})}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(pe,{variant:ge?"default":"ghost",size:"icon",className:`h-8 w-8 ${et?"bg-amber-600 hover:bg-amber-700":""}`,onClick:async()=>{const Se=!Ve;try{if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(ae.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({locked:Se})})).ok)throw new Error("No se pudo actualizar");D(),t({title:et?Se?"Periodo bloqueado manualmente":"Auto-bloqueo desactivado temporalmente":Se?"Periodo bloqueado":"Periodo desbloqueado",description:et?Se?"El periodo CERRADO permanece bloqueado":"Puedes editar el periodo CERRADO temporalmente":Se?"Las fechas ya no se pueden editar":"Ahora puedes editar las fechas"})}catch(ke){t({title:"Error",description:ke?.message??"",variant:"destructive"})}},title:et?Ve?"Auto-bloqueado + Manual - Click para desbloquear":"Auto-bloqueado - Click para bloquear tambin manualmente":Ve?"Bloqueado manualmente - Click para desbloquear":"Desbloqueado - Click para bloquear",children:ge?a.jsx(aD,{className:"h-4 w-4"}):a.jsx(Bfe,{className:"h-4 w-4"})})}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs(BR,{children:[a.jsx($R,{asChild:!0,children:a.jsx(pe,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:a.jsx(CG,{className:"h-4 w-4"})})}),a.jsxs(DS,{align:"end",children:[a.jsxs(Ol,{onClick:()=>{if(ge){t({title:"Periodo bloqueado",description:"Debe desbloquear el periodo primero para editarlo",variant:"destructive"});return}x({modelCode:ae.modelCode,period:ae.period,startDate:xe(ae.startDate),endDate:xe(ae.endDate)}),v(!0)},className:"gap-2",children:[a.jsx(Cd,{className:"h-4 w-4"}),"Editar"]}),a.jsxs(Ol,{onClick:async()=>{if(ge){t({title:"Periodo bloqueado",description:"Debe desbloquear el periodo primero para eliminarlo",variant:"destructive"});return}window.confirm("Eliminar este periodo?")&&W.mutate(ae.id)},className:"gap-2 text-destructive focus:text-destructive",children:[a.jsx(Wi,{className:"h-4 w-4"}),"Eliminar"]})]})]})})]},ae.id)})]}):a.jsxs("div",{className:"py-16 text-center text-sm text-muted-foreground border rounded-xl",children:[a.jsx("p",{children:"No hay periodos configurados para este ao."}),a.jsxs("p",{className:"mt-1",children:["Utiliza el botn ",a.jsx("span",{className:"font-medium",children:"Aadir periodo"})," para empezar."]})]})]})]}),a.jsx(xr,{open:m,onOpenChange:v,children:a.jsxs(vr,{children:[a.jsx(br,{children:a.jsx(wr,{children:"Crear periodo"})}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Modelo"}),a.jsxs(Fn,{value:y.modelCode||void 0,onValueChange:ae=>x({...y,modelCode:ae}),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona"})}),a.jsx(Dn,{children:me.map(ae=>a.jsxs(lt,{value:ae.code,children:[ae.code,"  ",ae.name]},ae.code))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Periodo"}),a.jsxs(Fn,{value:y.period||void 0,onValueChange:ae=>x({...y,period:ae}),children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ANUAL",children:"Anual"}),Array.from({length:12},(ae,Pe)=>`M${String(Pe+1).padStart(2,"0")}`).map(ae=>a.jsx(lt,{value:ae,children:Ce(ae)},ae)),["1T","2T","3T","4T"].map(ae=>a.jsx(lt,{value:ae,children:ae},ae))]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Fecha inicio"}),a.jsx(Ye,{type:"date",value:y.startDate,onChange:ae=>x({...y,startDate:ae.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Fecha fin"}),a.jsx(Ye,{type:"date",value:y.endDate,onChange:ae=>x({...y,endDate:ae.target.value})})]})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>v(!1),children:"Cancelar"}),a.jsx(pe,{onClick:Ne,children:"Guardar"})]})]})}),a.jsx(d8e,{open:C,onClose:()=>I(!1),onImportSuccess:()=>{D(),I(!1)}})]})}const rH=[{value:"AUTONOMO",label:"Autnomo"},{value:"EMPRESA",label:"Empresa"},{value:"PARTICULAR",label:"Particular"}],iH=[{value:"MENSUAL",label:"Mensual"},{value:"TRIMESTRAL",label:"Trimestral"},{value:"ANUAL",label:"Anual"},{value:"ESPECIAL_FRACCIONADO",label:"Especial Fraccionado"}];function h8e(){const{toast:t}=Dr(),[e,n]=N.useState([]),[r,i]=N.useState(!0),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[f,p]=N.useState(null),[m,v]=N.useState(!1),[y,x]=N.useState({code:"",name:"",allowedTypes:[],allowedPeriods:[]});N.useEffect(()=>{b()},[]);const b=async()=>{try{i(!0);const k=await h_();n(k)}catch(k){t({title:"Error al cargar modelos",description:k.message,variant:"destructive"})}finally{i(!1)}},S=k=>{k?(d(k),x({code:k.code,name:k.name,allowedTypes:k.allowedTypes,allowedPeriods:k.allowedPeriods})):(d(null),x({code:"",name:"",allowedTypes:[],allowedPeriods:[]})),o(!0)},j=()=>{o(!1),d(null),x({code:"",name:"",allowedTypes:[],allowedPeriods:[]})},E=async()=>{try{if(!y.code||!y.name){t({title:"Campos requeridos",description:"El cdigo y el nombre son obligatorios",variant:"destructive"});return}v(!0),u?(await r8e(u.code,{name:y.name,allowedTypes:y.allowedTypes,allowedPeriods:y.allowedPeriods}),t({title:"Modelo actualizado",description:`El modelo ${y.code} se actualiz correctamente`})):(await n8e(y),t({title:"Modelo creado",description:`El modelo ${y.code} se cre correctamente`})),j(),b()}catch(k){t({title:"Error al guardar",description:k.message,variant:"destructive"})}finally{v(!1)}},A=async()=>{if(f)try{await i8e(f.code),t({title:"Modelo eliminado",description:`El modelo ${f.code} se elimin correctamente`}),c(!1),p(null),b()}catch(k){t({title:"Error al eliminar",description:k.message,variant:"destructive"})}},P=k=>{x(C=>({...C,allowedTypes:C.allowedTypes.includes(k)?C.allowedTypes.filter(I=>I!==k):[...C.allowedTypes,k]}))},O=k=>{x(C=>({...C,allowedPeriods:C.allowedPeriods.includes(k)?C.allowedPeriods.filter(I=>I!==k):[...C.allowedPeriods,k]}))};return r?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificacin fiscal con la misma experiencia consistente que Administracin."})]}),a.jsx(f_,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Modelos Fiscales"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestiona los modelos fiscales disponibles para asignar a clientes"})]}),a.jsxs(pe,{onClick:()=>S(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Nuevo Modelo"]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{className:"w-[100px]",children:"Cdigo"}),a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Tipos de Cliente"}),a.jsx(Ze,{children:"Periodicidades"}),a.jsx(Ze,{className:"w-[100px]",children:"Estado"}),a.jsx(Ze,{className:"w-[100px] text-right",children:"Acciones"})]})}),a.jsx(is,{children:e.length===0?a.jsx(gn,{children:a.jsxs(He,{colSpan:6,className:"text-center text-muted-foreground py-8",children:[a.jsx(Vi,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),"No hay modelos fiscales registrados"]})}):e.map(k=>a.jsxs(gn,{children:[a.jsx(He,{className:"font-mono font-semibold",children:k.code}),a.jsx(He,{children:k.name}),a.jsx(He,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:k.allowedTypes.map(C=>a.jsx(ct,{variant:"outline",className:"text-xs",children:rH.find(I=>I.value===C)?.label||C},C))})}),a.jsx(He,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:k.allowedPeriods.map(C=>a.jsx(ct,{variant:"secondary",className:"text-xs",children:iH.find(I=>I.value===C)?.label||C},C))})}),a.jsx(He,{children:k.isActive?a.jsx(ct,{variant:"default",className:"bg-green-600",children:"Activo"}):a.jsx(ct,{variant:"secondary",children:"Inactivo"})}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>S(k),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{p(k),c(!0)},children:a.jsx(Wi,{className:"h-4 w-4 text-destructive"})})]})})]},k.code))})]})}),a.jsx(xr,{open:s,onOpenChange:o,children:a.jsxs(vr,{className:"max-w-2xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:u?"Editar Modelo Fiscal":"Nuevo Modelo Fiscal"}),a.jsx(_r,{children:u?"Modifica los datos del modelo fiscal":"Completa los datos del nuevo modelo fiscal"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"code",children:"Cdigo del Modelo*"}),a.jsx(Ye,{id:"code",placeholder:"Ej: 303, 111, 130",value:y.code,onChange:k=>x({...y,code:k.target.value.toUpperCase()}),disabled:!!u,maxLength:20}),a.jsx("p",{className:"text-xs text-muted-foreground",children:u?"No se puede modificar el cdigo":"Cdigo nico del modelo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"name",children:"Nombre del Modelo*"}),a.jsx(Ye,{id:"name",placeholder:"Ej: IVA - Autoliquidacin",value:y.name,onChange:k=>x({...y,name:k.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Tipos de Cliente Permitidos"}),a.jsx("div",{className:"flex flex-col gap-2",children:rH.map(k=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:k.value,checked:y.allowedTypes.includes(k.value),onCheckedChange:()=>P(k.value)}),a.jsx("label",{htmlFor:k.value,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:k.label})]},k.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Periodicidades Permitidas"}),a.jsx("div",{className:"flex flex-col gap-2",children:iH.map(k=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:k.value,checked:y.allowedPeriods.includes(k.value),onCheckedChange:()=>O(k.value)}),a.jsx("label",{htmlFor:k.value,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:k.label})]},k.value))})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:j,disabled:m,children:"Cancelar"}),a.jsx(pe,{onClick:E,disabled:m,children:m?a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})}),a.jsx(Td,{open:l,onOpenChange:c,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsxs(Tu,{children:["Esta accin eliminar permanentemente el modelo"," ",a.jsx("strong",{children:f?.code})," - ",f?.name,".",a.jsx("br",{}),a.jsx("br",{}),"No se podr eliminar si tiene asignaciones activas a clientes."]})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsx(Ou,{onClick:A,className:"bg-destructive",children:"Eliminar"})]})]})})]})}const Od=t=>{const e=new URLSearchParams;return t.year&&e.set("year",String(t.year)),t.periodId&&e.set("periodId",t.periodId),t.model&&e.set("model",t.model),t.assigneeId&&e.set("assigneeId",t.assigneeId),t.clientId&&e.set("clientId",t.clientId),t.status&&e.set("status",t.status),t.page&&e.set("page",String(t.page)),t.size&&e.set("size",String(t.size)),t.granularity&&e.set("granularity",t.granularity),e};function p8e(t){return Wt({queryKey:["/api/tax/reports/kpis",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/kpis?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar KPIs");return n.json()},staleTime:3e4})}function Iie(t){return Wt({queryKey:["/api/tax/reports/summary/model",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/summary/model?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por modelo");return n.json()},staleTime:3e4})}function m8e(t){return Wt({queryKey:["/api/tax/reports/trends",t],queryFn:async()=>{const e=Od(t);t.granularity&&e.set("granularity",t.granularity);const n=await fetch(`/api/tax/reports/trends?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar tendencias");return n.json()},staleTime:3e4})}function Lie(t){return Wt({queryKey:["/api/tax/reports/summary/assignee",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/summary/assignee?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por gestor");return n.json()},staleTime:3e4})}function g8e(t){return Wt({queryKey:["/api/tax/reports/summary/client",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/summary/client?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por cliente");return n.json()},staleTime:3e4})}function v8e(t){return Wt({queryKey:["/api/tax/reports/exceptions",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/exceptions?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar alertas");return n.json()},staleTime:3e4})}function y8e(t){return Wt({queryKey:["/api/tax/reports/filings",t],queryFn:async()=>{const e=Od(t);e.set("page",String(t.page??1)),e.set("size",String(t.size??50));const n=await fetch(`/api/tax/reports/filings?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar detalle");return n.json()},staleTime:3e4})}function x8e(t,e,n){return Wt({queryKey:["/api/tax/reports/year-comparison",t,e,n],queryFn:async()=>{const r=new URLSearchParams;r.set("year1",String(t)),r.set("year2",String(e)),n.model&&r.set("model",n.model),n.assigneeId&&r.set("assigneeId",n.assigneeId),n.clientId&&r.set("clientId",n.clientId);const i=await fetch(`/api/tax/reports/year-comparison?${r.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok)throw new Error("No se pudo cargar comparativa");return i.json()},staleTime:3e4})}function b8e(t){return Wt({queryKey:["/api/tax/reports/productivity",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/productivity?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar anlisis de productividad");return n.json()},staleTime:3e4})}function w8e(t){return Wt({queryKey:["/api/tax/reports/predictions",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/predictions?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar predicciones");return n.json()},staleTime:3e4})}function N8e(t){return Wt({queryKey:["/api/tax/reports/temporal-performance",t],queryFn:async()=>{const e=Od(t),n=await fetch(`/api/tax/reports/temporal-performance?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar rendimiento temporal");return n.json()},staleTime:3e4})}function S8e(t){const e=String(t).toUpperCase();return e==="PENDIENTE"||e==="NOT_STARTED"?"bg-red-100 text-red-700":e==="IN_PROGRESS"||e==="CALCULADO"?"bg-amber-100 text-amber-700":e==="PRESENTED"||e==="PRESENTADO"?"bg-emerald-100 text-emerald-700":"bg-muted"}function qb(t){if(!t)return"";const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"":e.toLocaleDateString("es-ES")}function j8e({filters:t}){const[e,n]=N.useState(1),r=50,{data:i,isLoading:s}=y8e({...t,page:e,size:r}),o=i?.total??0,l=i?.items??[],c=Math.max(1,Math.ceil(o/r));return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:[o," resultados"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{variant:"outline",size:"sm",disabled:e<=1,onClick:()=>n(u=>Math.max(1,u-1)),children:"Anterior"}),a.jsxs("div",{className:"text-sm",children:[e,"/",c]}),a.jsx(pe,{variant:"outline",size:"sm",disabled:e>=c,onClick:()=>n(u=>Math.min(c,u+1)),children:"Siguiente"})]})]}),a.jsx("div",{className:"rounded-md border overflow-auto",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Modelo"}),a.jsx(Ze,{children:"Periodo"}),a.jsx(Ze,{children:"Gestor"}),a.jsx(Ze,{children:"Cliente"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Fecha clculo"}),a.jsx(Ze,{children:"Fecha presentacin"}),a.jsx(Ze,{children:"Das ciclo"})]})}),a.jsx(is,{children:s?a.jsx(gn,{children:a.jsx(He,{colSpan:8,className:"text-center text-muted-foreground",children:"Cargando"})}):l.length===0?a.jsx(gn,{children:a.jsx(He,{colSpan:8,className:"text-center text-muted-foreground",children:"Sin resultados"})}):l.map(u=>a.jsxs(gn,{className:"cursor-pointer hover:bg-muted/40",onClick:()=>window.location.href="/impuestos/calendario",children:[a.jsx(He,{className:"font-medium",children:u.modelCode}),a.jsx(He,{children:u.periodLabel}),a.jsx(He,{children:u.gestor||""}),a.jsx(He,{children:u.cliente||""}),a.jsx(He,{children:a.jsx(ct,{className:S8e(u.status),children:String(u.status).toUpperCase()})}),a.jsx(He,{children:qb(void 0)}),a.jsx(He,{children:qb(u.presentedAt)}),a.jsx(He,{children:u.cycleDays??""})]},u.id))})]})})]})}function E8e({filters:t}){const e=Iie(t),n=m8e({year:t.year,model:t.model,granularity:"month"}),r=Lie(t),[i,s]=N.useState(null),[o,l]=N.useState(null),c=N.useMemo(()=>(e.data??[]).map(m=>({model:m.modelCode,pendiente:m.pending,calculado:m.inProgress,presentado:m.presented,total:m.total})),[e.data]),u=N.useMemo(()=>(n.data?.series??[]).map(m=>({x:m.x,presentados:m.presented,lead:m.leadTimeAvg})),[n.data]),d=N.useMemo(()=>(r.data??[]).map(m=>({name:m.assigneeName,avance:m.advancePct,total:m.assigned,completed:m.presented})).sort((m,v)=>v.avance-m.avance),[r.data]),f=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899"],p=({active:m,payload:v,label:y})=>m&&v&&v.length?a.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-semibold mb-2",children:y}),v.map((x,b)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:x.color}}),a.jsxs("span",{children:[x.name,": ",x.value]})]},b))]}):null;return a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Xe,{className:"md:col-span-2",children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Progreso por modelo (Interactivo)"}),a.jsx(jn,{children:"Haz clic en una barra para ver detalles"}),i&&a.jsxs(ct,{className:"mt-2",onClick:()=>s(null),children:["Filtrando: ",i," "]})]}),a.jsxs(Qe,{className:"h-80",children:[a.jsx(kb,{width:"100%",height:"100%",children:a.jsxs(hR,{data:c,onClick:m=>{m&&m.activeLabel&&s(m.activeLabel===i?null:m.activeLabel)},children:[a.jsx(Gv,{strokeDasharray:"3 3"}),a.jsx(yd,{dataKey:"model"}),a.jsx(bc,{}),a.jsx(il,{content:a.jsx(p,{})}),a.jsx(Tf,{}),a.jsx(Mo,{dataKey:"pendiente",stackId:"a",fill:"#EF4444",name:"Pendientes",cursor:"pointer",children:c.map((m,v)=>a.jsx(Kh,{opacity:i===null||i===m.model?1:.3},`cell-${v}`))}),a.jsx(Mo,{dataKey:"calculado",stackId:"a",fill:"#EAB308",name:"Calculados",cursor:"pointer",children:c.map((m,v)=>a.jsx(Kh,{opacity:i===null||i===m.model?1:.3},`cell-${v}`))}),a.jsx(Mo,{dataKey:"presentado",stackId:"a",fill:"#22C55E",name:"Presentados",cursor:"pointer",children:c.map((m,v)=>a.jsx(Kh,{opacity:i===null||i===m.model?1:.3},`cell-${v}`))})]})}),i&&a.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-md text-sm",children:[a.jsxs("div",{className:"font-semibold mb-1",children:[" Detalle de ",i]}),c.filter(m=>m.model===i).map(m=>a.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[a.jsxs("div",{children:["Total: ",a.jsx("strong",{children:m.total})]}),a.jsxs("div",{children:["Presentados: ",a.jsx("strong",{className:"text-emerald-600",children:m.presentado})]}),a.jsxs("div",{children:["Calculados: ",a.jsx("strong",{className:"text-amber-600",children:m.calculado})]}),a.jsxs("div",{children:["Pendientes: ",a.jsx("strong",{className:"text-rose-600",children:m.pendiente})]})]},m.model))]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Tendencia mensual"}),a.jsx(jn,{children:"Presentaciones y lead time"})]}),a.jsx(Qe,{className:"h-80",children:a.jsx(kb,{width:"100%",height:"100%",children:a.jsxs(NPe,{data:u,children:[a.jsx(Gv,{strokeDasharray:"3 3"}),a.jsx(yd,{dataKey:"x",angle:-45,textAnchor:"end",height:60}),a.jsx(bc,{yAxisId:"left"}),a.jsx(bc,{yAxisId:"right",orientation:"right"}),a.jsx(il,{content:a.jsx(p,{})}),a.jsx(Tf,{}),a.jsx(qf,{type:"monotone",dataKey:"presentados",stroke:"#2563EB",yAxisId:"left",strokeWidth:2,dot:{r:4},name:"Presentadas"}),a.jsx(qf,{type:"monotone",dataKey:"lead",stroke:"#9333EA",yAxisId:"right",strokeWidth:2,dot:{r:4},strokeDasharray:"5 5",name:"Lead Time (das)"})]})})})]}),a.jsxs(Xe,{className:"md:col-span-3",children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Ranking de gestores (Interactivo)"}),a.jsx(jn,{children:"Haz clic en una barra para destacar un gestor"}),o&&a.jsxs(ct,{className:"mt-2",onClick:()=>l(null),children:["Filtrando: ",o," "]})]}),a.jsxs(Qe,{className:"h-80",children:[a.jsx(kb,{width:"100%",height:"100%",children:a.jsxs(hR,{data:d,layout:"vertical",onClick:m=>{m&&m.activeLabel&&l(m.activeLabel===o?null:m.activeLabel)},children:[a.jsx(Gv,{strokeDasharray:"3 3"}),a.jsx(yd,{type:"number",domain:[0,100]}),a.jsx(bc,{type:"category",dataKey:"name",width:150}),a.jsx(il,{content:a.jsx(p,{})}),a.jsx(Mo,{dataKey:"avance",name:"% Avance",cursor:"pointer",children:d.map((m,v)=>a.jsx(Kh,{fill:f[v%f.length],opacity:o===null||o===m.name?1:.3},`cell-${v}`))})]})}),o&&a.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded-md text-sm",children:[a.jsxs("div",{className:"font-semibold mb-1",children:[" Detalle de ",o]}),d.filter(m=>m.name===o).map(m=>a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:["Total asignado: ",a.jsx("strong",{children:m.total})]}),a.jsxs("div",{children:["Completadas: ",a.jsx("strong",{className:"text-emerald-600",children:m.completed})]}),a.jsxs("div",{children:["% Avance: ",a.jsxs("strong",{className:"text-blue-600",children:[m.avance.toFixed(1),"%"]})]})]},m.name))]})]})]})]})}function _8e({data:t,isLoading:e}){const n=t?.duplicateFilings??[],r=t?.latePresented??[],i=t?.overdueFilings??[];return a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Alertas y excepciones"})}),a.jsx(Qe,{className:"space-y-4 text-sm text-muted-foreground",children:e?a.jsx("div",{children:"Cargando alertas"}):a.jsxs(a.Fragment,{children:[a.jsx(dO,{title:"Vencidas sin presentar",emptyLabel:"Sin vencidos",badgeClass:"bg-destructive/10 text-destructive",items:i.map(s=>({id:`${s.clientId}-${s.taxModelCode}-${s.periodId}`,title:`${s.clientName}`,description:`${s.taxModelCode}  Venci ${qb(s.dueDate)}`}))}),a.jsx(dO,{title:"Presentadas fuera de plazo",emptyLabel:"Sin retrasos",badgeClass:"bg-amber-100 text-amber-700",items:r.map(s=>({id:`${s.clientId}-${s.taxModelCode}-${s.periodId}`,title:`${s.clientName}`,description:`${s.taxModelCode}  entregada ${qb(s.presentedAt)} (lmite ${qb(s.dueDate)})`}))}),a.jsx(dO,{title:"Duplicados detectados",emptyLabel:"Sin duplicados",badgeClass:"bg-blue-100 text-blue-700",items:n.map(s=>({id:s.key,title:s.key,description:`${s.count} registros`}))})]})})]})}function dO({title:t,items:e,emptyLabel:n,badgeClass:r}){return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-foreground",children:t}),a.jsx(ct,{className:r,children:e.length})]}),e.length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-2 text-xs",children:n}):a.jsxs("div",{className:"space-y-1",children:[e.slice(0,6).map(i=>a.jsxs("div",{className:"rounded-md border px-3 py-2",children:[a.jsx("div",{className:"font-medium text-foreground",children:i.title}),a.jsx("div",{className:"text-xs",children:i.description})]},i.id)),e.length>6&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.length-6," registros adicionales"]})]})]})}function C8e({filters:t}){const{data:e,isLoading:n}=b8e(t);if(n)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Anlisis de Productividad por Gestor"}),a.jsx(jn,{children:"Rendimiento individual y mtricas de eficiencia"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando anlisis..."})})]});const r=e??[];return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Anlisis de Productividad por Gestor"}),a.jsx(jn,{children:"Rendimiento individual y mtricas de eficiencia"})]}),a.jsx(Qe,{className:"space-y-4",children:r.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"Sin datos para mostrar"}):r.map(i=>a.jsxs("div",{className:"rounded-lg border p-4 space-y-3 bg-white hover:shadow-sm transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-base",children:i.gestorName}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[i.total," declaraciones asignadas"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-2xl font-bold ${i.efficiencyScore>=80?"text-emerald-600":i.efficiencyScore>=60?"text-amber-600":"text-rose-600"}`,children:i.efficiencyScore}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Score eficiencia"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Completadas"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-lg font-semibold text-emerald-600",children:i.completed}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",i.total]})]}),a.jsx(Ly,{value:i.completionRate,className:"h-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"A tiempo"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-lg font-semibold text-blue-600",children:i.onTime}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.onTimeRate,"%)"]})]}),a.jsx(Ly,{value:i.onTimeRate,className:"h-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"En progreso"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-semibold text-amber-600",children:i.inProgress})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pendientes"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-semibold text-slate-600",children:i.pending})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[a.jsxs(ct,{variant:"outline",className:"text-xs",children:[" Proc: ",i.avgProcessingTime,"d"]}),a.jsxs(ct,{variant:"outline",className:"text-xs",children:[" Lead: ",i.avgLeadTime,"d"]}),i.overdue>0&&a.jsxs(ct,{className:"bg-rose-100 text-rose-700 text-xs",children:[" ",i.overdue," atrasadas"]}),i.late>0&&a.jsxs(ct,{className:"bg-orange-100 text-orange-700 text-xs",children:[" ",i.late," tarde"]}),i.workloadScore>10&&a.jsxs(ct,{className:"bg-purple-100 text-purple-700 text-xs",children:[" Carga: ",i.workloadScore]})]})]},i.gestorId??"none"))})]})}function A8e({filters:t}){const{data:e,isLoading:n}=w8e(t);if(n)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Alertas Inteligentes y Predicciones"}),a.jsx(jn,{children:"Sistema de deteccin temprana de riesgos"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Analizando riesgos..."})})]});const r=e??{atRiskCount:0,criticalCount:0,alerts:[],riskLevel:"low"},i={high:{color:"bg-rose-50 border-rose-200",textColor:"text-rose-900",icon:iy,label:"Riesgo Alto",badgeClass:"bg-rose-100 text-rose-700"},medium:{color:"bg-amber-50 border-amber-200",textColor:"text-amber-900",icon:Ec,label:"Riesgo Medio",badgeClass:"bg-amber-100 text-amber-700"},low:{color:"bg-emerald-50 border-emerald-200",textColor:"text-emerald-900",icon:iD,label:"Riesgo Bajo",badgeClass:"bg-emerald-100 text-emerald-700"}},s=i[r.riskLevel]||i.low,o=s.icon;return a.jsxs(Xe,{className:s.color,children:[a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(o,{className:"h-5 w-5"}),"Alertas Inteligentes y Predicciones"]}),a.jsx(jn,{children:"Sistema de deteccin temprana de riesgos"})]}),a.jsx(ct,{className:s.badgeClass,children:s.label})]})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Situaciones crticas"}),a.jsx("div",{className:"text-3xl font-bold text-rose-600 mt-1",children:r.criticalCount}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Requieren atencin inmediata"})]}),a.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"En riesgo"}),a.jsx("div",{className:"text-3xl font-bold text-amber-600 mt-1",children:r.atRiskCount}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Necesitan seguimiento"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Alertas detectadas"}),r.alerts.length===0?a.jsx("div",{className:"rounded-md border border-dashed bg-white px-4 py-8 text-center text-sm text-muted-foreground",children:" No se detectaron alertas crticas. Todo en orden."}):a.jsxs("div",{className:"space-y-2",children:[r.alerts.map((l,c)=>a.jsx(Pf,{className:`${l.type==="critical"?"bg-rose-50 border-rose-200":"bg-amber-50 border-amber-200"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5",children:l.type==="critical"?"":""}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Mf,{className:"text-sm",children:l.message}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(ct,{variant:"outline",className:"text-xs",children:l.status}),l.daysRemaining!==void 0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:l.daysRemaining>=0?`${l.daysRemaining} das restantes`:`${Math.abs(l.daysRemaining)} das de retraso`})]})]})]})},c)),r.alerts.length>=10&&a.jsx("div",{className:"text-xs text-center text-muted-foreground",children:"Mostrando las 10 alertas ms crticas"})]})]}),r.riskLevel==="high"&&a.jsxs(Pf,{className:"bg-rose-50 border-rose-200",children:[a.jsx(iy,{className:"h-4 w-4 text-rose-600"}),a.jsxs(Mf,{className:"text-sm text-rose-900",children:[a.jsx("strong",{children:"Accin requerida:"})," Se detectaron mltiples situaciones crticas. Recomendamos priorizar las declaraciones con vencimiento inmediato y redistribuir la carga de trabajo si es necesario."]})]}),r.riskLevel==="medium"&&a.jsxs(Pf,{className:"bg-amber-50 border-amber-200",children:[a.jsx(Ec,{className:"h-4 w-4 text-amber-600"}),a.jsxs(Mf,{className:"text-sm text-amber-900",children:[a.jsx("strong",{children:"Seguimiento recomendado:"})," Hay declaraciones que requieren atencin. Mantn un seguimiento cercano para evitar retrasos."]})]})]})]})}function k8e({currentYear:t,filters:e}){const[n,r]=N.useState(t-1),[i,s]=N.useState(t),{data:o,isLoading:l}=x8e(n,i,e),c=Array.from({length:10},(m,v)=>t-v);if(l)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Comparativa Temporal"}),a.jsx(jn,{children:"Anlisis ao contra ao"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando comparativa..."})})]});const u=o?.comparison??{},d=o?.year1??{},f=o?.year2??{},p=({label:m,value1:v,value2:y,change:x,changePct:b,format:S=""})=>{const j=x>0,E=x<0,A=x===0,O=m.includes("Lead")||m.includes("Atrasados")?E:j;return a.jsxs("div",{className:"rounded-lg border p-4 bg-white",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:m}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:n}),a.jsxs("div",{className:"text-2xl font-bold text-slate-700",children:[v,S]})]}),a.jsx("div",{className:"flex items-center",children:A?a.jsx(kP,{className:"h-5 w-5 text-slate-400"}):O?a.jsx(mp,{className:"h-5 w-5 text-emerald-500"}):a.jsx(ehe,{className:"h-5 w-5 text-rose-500"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:i}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[y,S]})]})]}),a.jsx("div",{className:"mt-2 pt-2 border-t",children:a.jsxs(ct,{className:`text-xs ${A?"bg-slate-100 text-slate-700":O?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:[j&&"+",x,S," (",j&&"+",b,"%)"]})})]})};return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Comparativa Temporal"}),a.jsx(jn,{children:"Anlisis ao contra ao de rendimiento"}),a.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[a.jsxs(Fn,{value:String(n),onValueChange:m=>r(Number(m)),children:[a.jsx(Rn,{className:"w-32",children:a.jsx(Bn,{})}),a.jsx(Dn,{children:c.map(m=>a.jsx(lt,{value:String(m),children:m},m))})]}),a.jsx("span",{className:"text-muted-foreground",children:"vs"}),a.jsxs(Fn,{value:String(i),onValueChange:m=>s(Number(m)),children:[a.jsx(Rn,{className:"w-32",children:a.jsx(Bn,{})}),a.jsx(Dn,{children:c.map(m=>a.jsx(lt,{value:String(m),children:m},m))})]})]})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(p,{label:"Total de declaraciones",value1:d.total,value2:f.total,change:u.totalChange,changePct:u.totalChangePct}),a.jsx(p,{label:"Presentadas",value1:d.presented,value2:f.presented,change:u.presentedChange,changePct:u.presentedChangePct}),a.jsx(p,{label:"Eficiencia",value1:d.efficiencyScore,value2:f.efficiencyScore,change:u.efficiencyChange,changePct:0,format:"%"}),a.jsx(p,{label:"Lead Time promedio",value1:d.leadTimeAvg,value2:f.leadTimeAvg,change:u.leadTimeChange,changePct:0,format:"d"}),a.jsx(p,{label:"Cumplimiento (a tiempo)",value1:d.onTimePct,value2:f.onTimePct,change:u.onTimeChange,changePct:0,format:"%"}),a.jsx(p,{label:"Atrasados",value1:d.overdue,value2:f.overdue,change:f.overdue-d.overdue,changePct:0})]}),a.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:" Resumen de cambios"}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("div",{children:[u.totalChangePct>0?"":u.totalChangePct<0?"":""," ","Volumen de trabajo: ",u.totalChangePct>0?"increment":u.totalChangePct<0?"disminuy":"se mantuvo"," ",Math.abs(u.totalChangePct),"%"]}),a.jsxs("div",{children:[u.efficiencyChange>0?"":u.efficiencyChange<0?"":""," ","Eficiencia: ",u.efficiencyChange>0?"mejor":u.efficiencyChange<0?"empeor":"se mantuvo"," ",Math.abs(u.efficiencyChange).toFixed(1)," puntos"]}),a.jsxs("div",{children:[u.leadTimeChange<0?"":u.leadTimeChange>0?"":""," ","Lead time: ",u.leadTimeChange<0?"mejor":u.leadTimeChange>0?"empeor":"se mantuvo"," (",Math.abs(u.leadTimeChange).toFixed(1)," das)"]})]})]})]})]})}function T8e({filters:t}){const{data:e,isLoading:n}=N8e(t);if(n)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Rendimiento Temporal"}),a.jsx(jn,{children:"Evolucin mensual de mtricas clave"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando datos temporales..."})})]});const r=e?.series??[];if(r.length===0)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Rendimiento Temporal"}),a.jsx(jn,{children:"Evolucin mensual de mtricas clave"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"No hay suficientes datos para mostrar tendencias"})})]});const i=r.reduce((f,p)=>f+p.presented,0)/r.length,s=r.reduce((f,p)=>f+p.onTimeRate,0)/r.length,o=r.reduce((f,p)=>f+p.avgLeadTime,0)/r.length,l=r[r.length-1],c=r[r.length-2],u=c?((l.presented-c.presented)/c.presented*100).toFixed(1):0,d=c?(l.onTimeRate-c.onTimeRate).toFixed(1):0;return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Rendimiento Temporal"}),a.jsx(jn,{children:"Evolucin mensual de mtricas clave"})]}),a.jsxs(Qe,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"rounded-lg border bg-blue-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Promedio mensual"}),a.jsx("div",{className:"text-2xl font-bold text-blue-700",children:i.toFixed(0)}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"declaraciones"})]}),a.jsxs("div",{className:"rounded-lg border bg-emerald-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Cumplimiento promedio"}),a.jsxs("div",{className:"text-2xl font-bold text-emerald-700",children:[s.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"entregas a tiempo"})]}),a.jsxs("div",{className:"rounded-lg border bg-purple-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead time promedio"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[o.toFixed(1),"d"]}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"das de ciclo"})]})]}),c&&a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-slate-50 border text-sm",children:[a.jsx("div",{className:"flex-1",children:a.jsx("span",{className:"font-medium",children:"ltimo mes vs anterior:"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Presentadas:"}),a.jsxs("span",{className:`font-semibold ${Number(u)>=0?"text-emerald-600":"text-rose-600"}`,children:[Number(u)>=0?"+":"",u,"%"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Cumplimiento:"}),a.jsxs("span",{className:`font-semibold ${Number(d)>=0?"text-emerald-600":"text-rose-600"}`,children:[Number(d)>=0?"+":"",d,"%"]})]})]}),a.jsx("div",{className:"h-80",children:a.jsx(kb,{width:"100%",height:"100%",children:a.jsxs(SPe,{data:r,children:[a.jsx(Gv,{strokeDasharray:"3 3"}),a.jsx(yd,{dataKey:"month",angle:-45,textAnchor:"end",height:80}),a.jsx(bc,{yAxisId:"left"}),a.jsx(bc,{yAxisId:"right",orientation:"right"}),a.jsx(il,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"},labelStyle:{fontWeight:"bold"}}),a.jsx(Tf,{}),a.jsx(Mo,{yAxisId:"left",dataKey:"presented",fill:"#3B82F6",name:"Presentadas"}),a.jsx(Mo,{yAxisId:"left",dataKey:"onTime",fill:"#10B981",name:"A tiempo",stackId:"status"}),a.jsx(Mo,{yAxisId:"left",dataKey:"late",fill:"#F59E0B",name:"Tarde",stackId:"status"}),a.jsx(qf,{yAxisId:"right",type:"monotone",dataKey:"avgLeadTime",stroke:"#9333EA",strokeWidth:2,name:"Lead Time (das)",dot:{r:4}}),a.jsx(qf,{yAxisId:"right",type:"monotone",dataKey:"onTimeRate",stroke:"#059669",strokeWidth:2,strokeDasharray:"5 5",name:"% Cumplimiento",dot:{r:4}})]})})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:" Mejor mes"}),(()=>{const f=r.reduce((p,m)=>m.onTimeRate>p.onTimeRate?m:p,r[0]);return a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("div",{className:"font-medium text-foreground",children:f.month}),a.jsxs("div",{children:[f.presented," declaraciones"]}),a.jsxs("div",{className:"text-emerald-600",children:[f.onTimeRate,"% a tiempo"]})]})})()]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:" Mes con ms desafos"}),(()=>{const f=r.reduce((p,m)=>m.onTimeRate<p.onTimeRate?m:p,r[0]);return a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("div",{className:"font-medium text-foreground",children:f.month}),a.jsxs("div",{children:[f.presented," declaraciones"]}),a.jsxs("div",{className:"text-amber-600",children:[f.onTimeRate,"% a tiempo"]})]})})()]})]})]})]})}function O8e(t){return Wt({queryKey:["/api/tax/reports/goals",t],queryFn:async()=>{const e=new URLSearchParams;t.year&&e.set("year",String(t.year)),t.model&&e.set("model",t.model),t.assigneeId&&e.set("assigneeId",t.assigneeId);const n=await fetch(`/api/tax/reports/goals?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar las metas");return n.json()},staleTime:3e4})}function P8e({filters:t}){const{data:e,isLoading:n}=O8e(t);if(n)return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(CF,{className:"h-5 w-5"}),"Metas y Objetivos"]}),a.jsx(jn,{children:"Seguimiento de objetivos del periodo"})]}),a.jsx(Qe,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando metas..."})})]});const r=e??[],i=r.filter(d=>d.achieved).length,s=r.length,o=s>0?i/s*100:0,l={achieved:{icon:gu,color:"text-emerald-600",bg:"bg-emerald-50",badge:"bg-emerald-100 text-emerald-700",label:"Lograda"},"on-track":{icon:mp,color:"text-blue-600",bg:"bg-blue-50",badge:"bg-blue-100 text-blue-700",label:"En camino"},"at-risk":{icon:iy,color:"text-amber-600",bg:"bg-amber-50",badge:"bg-amber-100 text-amber-700",label:"En riesgo"},"off-track":{icon:vu,color:"text-rose-600",bg:"bg-rose-50",badge:"bg-rose-100 text-rose-700",label:"Fuera de meta"}},c=d=>({efficiency:"Eficiencia",completion:"Completitud",onTime:"Cumplimiento",leadTime:"Lead Time",volume:"Volumen"})[d]||d,u=d=>({efficiency:"%",completion:"%",onTime:"%",leadTime:"d",volume:""})[d]||"";return a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(CF,{className:"h-5 w-5"}),"Metas y Objetivos"]}),a.jsx(jn,{children:"Seguimiento de objetivos del periodo"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[i,"/",s]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Metas logradas"})]})]})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border p-4 bg-slate-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Logro General"}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[o.toFixed(0),"%"]})]}),a.jsx(Ly,{value:o,className:"h-3"})]}),r.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"No hay metas definidas para este periodo"}):a.jsx("div",{className:"space-y-3",children:r.map((d,f)=>{const p=l[d.status]||l["off-track"],m=p.icon,v=d.type==="leadTime";return a.jsxs("div",{className:`rounded-lg border p-4 ${p.bg} transition-all hover:shadow-sm`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(m,{className:`h-5 w-5 mt-0.5 ${p.color}`}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-foreground",children:c(d.type)}),d.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:d.description})]})]}),a.jsx(ct,{className:p.badge,children:p.label})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Actual"}),a.jsxs("div",{className:"text-lg font-bold",children:[d.currentValue,u(d.type)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Meta"}),a.jsxs("div",{className:"text-lg font-bold",children:[v?"":""," ",d.targetValue,u(d.type)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Progreso"}),a.jsxs("div",{className:"text-lg font-bold",children:[d.progress,"%"]})]})]}),a.jsx(Ly,{value:d.progress,className:"h-2"}),a.jsx("div",{className:"mt-3 text-xs text-muted-foreground",children:d.achieved?a.jsx("span",{className:"text-emerald-700 font-medium",children:" Meta alcanzada exitosamente"}):d.status==="on-track"?a.jsxs("span",{className:"text-blue-700 font-medium",children:[" Vas bien, faltan ",v?`${(d.currentValue-d.targetValue).toFixed(1)}${u(d.type)} por reducir`:`${(d.targetValue-d.currentValue).toFixed(1)}${u(d.type)} para alcanzar la meta`]}):d.status==="at-risk"?a.jsx("span",{className:"text-amber-700 font-medium",children:" Requiere atencin para alcanzar la meta"}):a.jsx("span",{className:"text-rose-700 font-medium",children:" Lejos de la meta, se requiere accin correctiva"})})]},f)})}),r.length>0&&a.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-4 border-t",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:r.filter(d=>d.status==="achieved").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Logradas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.filter(d=>d.status==="on-track").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"En camino"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:r.filter(d=>d.status==="at-risk").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"En riesgo"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-rose-600",children:r.filter(d=>d.status==="off-track").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fuera meta"})]})]})]})]})}function M8e(){const t=new Date().getFullYear(),[e,n]=N.useState({year:t});N.useEffect(()=>{const p=localStorage.getItem("reports.filters");if(p)try{const m=JSON.parse(p);m?.year&&n(m)}catch{}},[]),N.useEffect(()=>{localStorage.setItem("reports.filters",JSON.stringify(e))},[e]);const r=p8e(e),i=Iie(e),s=g8e(e),o=Lie(e),l=v8e(e),{data:c=[]}=Wt({queryKey:["/api/tax-models"],queryFn:h_}),u=N.useMemo(()=>{const p=c.map(y=>({code:y.code,name:y.name})),m=Object.entries(JE).map(([y,x])=>({code:y,name:x.name})),v=new Map;return m.forEach(y=>v.set(y.code,y)),p.forEach(y=>v.set(y.code,y)),Array.from(v.values()).sort((y,x)=>y.code.localeCompare(x.code))},[c]),d=N.useMemo(()=>(o.data??[]).filter(m=>m.assigneeId||m.assigneeName).map(m=>({id:m.assigneeId??"none",name:m.assigneeName??"Sin asignar"})),[o.data]),f=N.useMemo(()=>{const p=new URLSearchParams;return p.set("year",String(e.year)),e.model&&p.set("model",e.model),e.status&&p.set("status",e.status),e.assigneeId&&p.set("assigneeId",e.assigneeId),`/api/tax/reports/export?${p.toString()}`},[e]);return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Reportes de Impuestos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Analiza el avance y los riesgos fiscales"})]}),a.jsx(f_,{}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{className:"text-base",children:"Filtros"}),a.jsx(jn,{children:"Define el alcance del informe"})]}),a.jsxs(Qe,{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Ao"}),a.jsx(Ye,{className:"w-24 h-9",type:"number",min:2e3,value:e.year,onChange:p=>n(m=>({...m,year:Number(p.target.value)}))})]}),a.jsxs(Fn,{value:e.model??"ALL",onValueChange:p=>n(m=>({...m,model:p==="ALL"?void 0:p})),children:[a.jsx(Rn,{className:"w-56 h-9",children:a.jsx(Bn,{placeholder:"Modelo"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ALL",children:"Todos"}),u.map(p=>a.jsxs(lt,{value:p.code,children:[p.code,"  ",p.name]},p.code))]})]}),a.jsxs(Fn,{value:e.status??"ALL",onValueChange:p=>n(m=>({...m,status:p==="ALL"?void 0:p})),children:[a.jsx(Rn,{className:"w-44 h-9",children:a.jsx(Bn,{placeholder:"Estado"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ALL",children:"Todos"}),a.jsx(lt,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(lt,{value:"IN_PROGRESS",children:"Calculado"}),a.jsx(lt,{value:"PRESENTED",children:"Presentado"})]})]}),a.jsxs(Fn,{value:e.assigneeId??"ALL",onValueChange:p=>n(m=>({...m,assigneeId:p==="ALL"?void 0:p})),children:[a.jsx(Rn,{className:"w-56 h-9",children:a.jsx(Bn,{placeholder:"Gestor"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ALL",children:"Todos los gestores"}),d.map(p=>a.jsx(lt,{value:p.id,children:p.name},p.id))]})]}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsx(pe,{variant:"outline",onClick:()=>n({year:t}),children:"Limpiar"}),a.jsx(pe,{variant:"outline",onClick:()=>window.open(f,"_blank"),children:" CSV"}),a.jsx(pe,{variant:"default",onClick:()=>{const p=new URLSearchParams;p.set("year",String(e.year)),e.model&&p.set("model",e.model),e.status&&p.set("status",e.status),e.assigneeId&&p.set("assigneeId",e.assigneeId),window.open(`/api/tax/reports/export-excel?${p.toString()}`,"_blank")},children:" Excel Avanzado"})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsx(Xe,{className:"bg-gradient-to-br from-red-50 to-red-100",children:a.jsx(Qe,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pendientes"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.pending??0})]}),a.jsx("div",{className:"text-red-500 text-4xl",children:""})]})})}),a.jsx(Xe,{className:"bg-gradient-to-br from-amber-50 to-amber-100",children:a.jsx(Qe,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Calculados"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.inProgress??0})]}),a.jsx("div",{className:"text-amber-500 text-4xl",children:""})]})})}),a.jsx(Xe,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100",children:a.jsx(Qe,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Presentados"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.presented??0})]}),a.jsx("div",{className:"text-emerald-500 text-4xl",children:""})]})})}),a.jsx(Xe,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsx(Qe,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.total??0})]}),a.jsx("div",{className:"text-slate-500 text-4xl",children:""})]})})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 xl:grid-cols-6",children:[a.jsx(fv,{title:"% Completado",value:`${r.data?.completionRate??0}%`,color:"bg-blue-50",subtitle:`${r.data?.workload??0} en curso`}),a.jsx(fv,{title:"Score de Eficiencia",value:`${r.data?.efficiencyScore??0}%`,color:"bg-purple-50",subtitle:"Calidad global"}),a.jsx(fv,{title:"Cumplimiento",value:`${r.data?.onTimePct??0}%`,color:"bg-green-50",subtitle:`${r.data?.onTimeFilings??0} a tiempo`}),a.jsx(fv,{title:"Lead Time",value:`${r.data?.leadTimeAvg??0}d`,color:"bg-indigo-50",subtitle:"Tiempo medio"}),a.jsx(fv,{title:"Procesamiento",value:`${r.data?.processingTimeAvg??0}d`,color:"bg-cyan-50",subtitle:"Tiempo medio"}),a.jsx(fv,{title:"Atrasadas",value:r.data?.lateFilings??0,color:"bg-orange-50",subtitle:"Fuera de plazo"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(Xe,{className:"bg-rose-50 border-rose-200",children:a.jsx(Qe,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-rose-700",children:" Atrasados"}),a.jsx("div",{className:"text-2xl font-bold text-rose-900",children:r.data?.overdue??0})]})})})}),a.jsx(Xe,{className:"bg-orange-50 border-orange-200",children:a.jsx(Qe,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-orange-700",children:" Vencen en 3 das"}),a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:r.data?.dueIn3??0})]})})})}),a.jsx(Xe,{className:"bg-amber-50 border-amber-200",children:a.jsx(Qe,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-amber-700",children:" Vencen en 7 das"}),a.jsx("div",{className:"text-2xl font-bold text-amber-900",children:r.data?.dueIn7??0})]})})})})]}),a.jsx(E8e,{filters:e}),a.jsx(P8e,{filters:e}),a.jsx(A8e,{filters:e}),a.jsx(C8e,{filters:e}),a.jsx(k8e,{currentYear:t,filters:{model:e.model,assigneeId:e.assigneeId}}),a.jsx(T8e,{filters:e}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-3",children:[a.jsx(R8e,{data:s.data??[],isLoading:s.isLoading}),a.jsxs(Xe,{className:"xl:col-span-2",children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Desglose por modelo"}),a.jsx(jn,{children:"Seguimiento del estado por modelo AEAT"})]}),a.jsx(Qe,{className:"space-y-2 text-sm",children:(i.data??[]).length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-6 text-center text-muted-foreground",children:"Sin datos para los filtros seleccionados"}):(i.data??[]).map(p=>a.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-foreground",children:p.modelCode}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total ",p.total]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsxs(ct,{className:"bg-red-100 text-red-700",children:["P ",p.pending]}),a.jsxs(ct,{className:"bg-amber-100 text-amber-700",children:["C ",p.inProgress]}),a.jsxs(ct,{className:"bg-emerald-100 text-emerald-700",children:["PR ",p.presented]}),a.jsxs(ct,{className:"bg-orange-100 text-orange-700",children:["AT ",p.overdue]}),a.jsxs("span",{className:"text-muted-foreground",children:["Avance ",p.advancePct,"%"]})]})]},p.modelCode))})]})]}),a.jsx(_8e,{data:l.data,isLoading:l.isLoading}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Detalle de presentaciones"}),a.jsx(jn,{children:"Listado paginado de declaraciones"})]}),a.jsx(Qe,{children:a.jsx(j8e,{filters:e})})]})]})}function fv({title:t,value:e,color:n,subtitle:r}){return a.jsx(Xe,{className:`${n}`,children:a.jsxs(Qe,{className:"py-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:t}),a.jsx("div",{className:"text-2xl font-display font-bold",children:e}),r&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r})]})})}function R8e({data:t,isLoading:e}){return a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Clientes prioritarios"}),a.jsx(jn,{children:"Clientes con ms modelos activos"})]}),a.jsx(Qe,{className:"space-y-2 text-sm",children:e?a.jsx("div",{children:"Cargando"}):t.length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-4 text-center text-muted-foreground",children:"Sin clientes en los filtros actuales"}):t.slice().sort((n,r)=>(r.overdue??0)-(n.overdue??0)||r.modelsActive-n.modelsActive).slice(0,6).map(n=>a.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-foreground",children:n.clientName}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.modelsActive," modelo(s)  avance ",Math.round(n.advancePct??0),"%"]})]}),a.jsxs(ct,{className:n.overdue?"bg-destructive/10 text-destructive":"bg-emerald-100 text-emerald-700",children:[n.overdue??0," atrasos"]})]},n.clientId))})]})}function D8e(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var CL="ScrollArea",[Fie]=Gs(CL),[I8e,Pc]=Fie(CL),Bie=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[l,c]=N.useState(null),[u,d]=N.useState(null),[f,p]=N.useState(null),[m,v]=N.useState(null),[y,x]=N.useState(null),[b,S]=N.useState(0),[j,E]=N.useState(0),[A,P]=N.useState(!1),[O,k]=N.useState(!1),C=_n(e,R=>c(R)),I=bg(i);return a.jsx(I8e,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:P,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:O,onScrollbarYEnabledChange:k,onCornerWidthChange:S,onCornerHeightChange:E,children:a.jsx(Lt.div,{dir:I,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});Bie.displayName=CL;var $ie="ScrollAreaViewport",zie=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=Pc($ie,n),l=N.useRef(null),c=_n(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),a.jsx(Lt.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});zie.displayName=$ie;var Pd="ScrollAreaScrollbar",AL=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Pc(Pd,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return N.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?a.jsx(L8e,{...r,ref:e,forceMount:n}):i.type==="scroll"?a.jsx(F8e,{...r,ref:e,forceMount:n}):i.type==="auto"?a.jsx(qie,{...r,ref:e,forceMount:n}):i.type==="always"?a.jsx(kL,{...r,ref:e}):null});AL.displayName=Pd;var L8e=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Pc(Pd,t.__scopeScrollArea),[s,o]=N.useState(!1);return N.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),a.jsx(ua,{present:n||s,children:a.jsx(qie,{"data-state":s?"visible":"hidden",...r,ref:e})})}),F8e=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Pc(Pd,t.__scopeScrollArea),s=t.orientation==="horizontal",o=m_(()=>c("SCROLL_END"),100),[l,c]=D8e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),N.useEffect(()=>{const u=i.viewport,d=s?"scrollLeft":"scrollTop";if(u){let f=u[d];const p=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[i.viewport,s,c,o]),a.jsx(ua,{present:n||l!=="hidden",children:a.jsx(kL,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:bt(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:bt(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),qie=N.forwardRef((t,e)=>{const n=Pc(Pd,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=N.useState(!1),l=t.orientation==="horizontal",c=m_(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return qy(n.viewport,c),qy(n.content,c),a.jsx(ua,{present:r||s,children:a.jsx(kL,{"data-state":s?"visible":"hidden",...i,ref:e})})}),kL=N.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=Pc(Pd,t.__scopeScrollArea),s=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Kie(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,m){return H8e(p,o.current,l,m)}return n==="horizontal"?a.jsx(B8e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,m=sH(p,l,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=f(p,i.dir))}}):n==="vertical"?a.jsx($8e,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,m=sH(p,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=f(p))}}):null}),B8e=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Pc(Pd,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=_n(e,c,s.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Hie,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":p_(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),Yie(p,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:FS(o.paddingLeft),paddingEnd:FS(o.paddingRight)}})}})}),$8e=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Pc(Pd,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=_n(e,c,s.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Hie,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":p_(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),Yie(p,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:FS(o.paddingTop),paddingEnd:FS(o.paddingBottom)}})}})}),[z8e,Uie]=Fie(Pd),Hie=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...p}=t,m=Pc(Pd,n),[v,y]=N.useState(null),x=_n(e,C=>y(C)),b=N.useRef(null),S=N.useRef(""),j=m.viewport,E=r.content-r.viewport,A=bs(d),P=bs(c),O=m_(f,10);function k(C){if(b.current){const I=C.clientX-b.current.left,R=C.clientY-b.current.top;u({x:I,y:R})}}return N.useEffect(()=>{const C=I=>{const R=I.target;v?.contains(R)&&A(I,E)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[j,v,E,A]),N.useEffect(P,[r,P]),qy(v,O),qy(m.content,O),a.jsx(z8e,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:bs(s),onThumbPointerUp:bs(o),onThumbPositionChange:P,onThumbPointerDown:bs(l),children:a.jsx(Lt.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:bt(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),b.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(C))}),onPointerMove:bt(t.onPointerMove,k),onPointerUp:bt(t.onPointerUp,C=>{const I=C.target;I.hasPointerCapture(C.pointerId)&&I.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=S.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),LS="ScrollAreaThumb",Vie=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Uie(LS,t.__scopeScrollArea);return a.jsx(ua,{present:n||i.hasThumb,children:a.jsx(q8e,{ref:e,...r})})}),q8e=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=Pc(LS,n),o=Uie(LS,n),{onThumbPositionChange:l}=o,c=_n(e,f=>o.onThumbChange(f)),u=N.useRef(void 0),d=m_(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const f=s.viewport;if(f){const p=()=>{if(d(),!u.current){const m=V8e(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[s.viewport,d,l]),a.jsx(Lt.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:bt(t.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),v=f.clientX-m.left,y=f.clientY-m.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:bt(t.onPointerUp,o.onThumbPointerUp)})});Vie.displayName=LS;var TL="ScrollAreaCorner",Wie=N.forwardRef((t,e)=>{const n=Pc(TL,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(U8e,{...t,ref:e}):null});Wie.displayName=TL;var U8e=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=Pc(TL,n),[s,o]=N.useState(0),[l,c]=N.useState(0),u=!!(s&&l);return qy(i.scrollbarX,()=>{const d=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(d),c(d)}),qy(i.scrollbarY,()=>{const d=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(d),o(d)}),u?a.jsx(Lt.div,{...r,ref:e,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function FS(t){return t?parseInt(t,10):0}function Kie(t,e){const n=t/e;return isNaN(n)?0:n}function p_(t){const e=Kie(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function H8e(t,e,n,r="ltr"){const i=p_(n),s=i/2,o=e||s,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return Gie([c,u],f)(t)}function sH(t,e,n="ltr"){const r=p_(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=V0(t,c);return Gie([0,o],[0,l])(u)}function Gie(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Yie(t,e){return t>0&&t<e}var V8e=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&e(),n=s,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function m_(t,e){const n=bs(t),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function qy(t,e){const n=bs(e);ws(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var Xie=Bie,W8e=zie,K8e=Wie;const OL=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Xie,{ref:r,className:ft("relative overflow-hidden",t),...n,children:[a.jsx(W8e,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(Qie,{}),a.jsx(K8e,{})]}));OL.displayName=Xie.displayName;const Qie=N.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(AL,{ref:r,orientation:e,className:ft("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(Vie,{className:"relative flex-1 rounded-full bg-border"})}));Qie.displayName=AL.displayName;function G8e({htmlContent:t}){const[e,n]=N.useState([]),[r,i]=N.useState("");N.useEffect(()=>{const c=new DOMParser().parseFromString(t,"text/html").querySelectorAll("h1, h2, h3, h4, h5, h6"),u=[];c.forEach((f,p)=>{const m=parseInt(f.tagName.substring(1)),v=f.textContent||"";let y=f.id;y||(y=`heading-${p}-${v.toLowerCase().replace(/\s+/g,"-").slice(0,30)}`,f.id=y),u.push({id:y,text:v,level:m})}),n(u);const d=new IntersectionObserver(f=>{f.forEach(p=>{p.isIntersecting&&i(p.target.id)})},{rootMargin:"-20% 0px -35% 0px"});return c.forEach(f=>d.observe(f)),()=>d.disconnect()},[t]);const s=o=>{const l=document.getElementById(o);l&&l.scrollIntoView({behavior:"smooth",block:"start"})};return e.length===0?null:a.jsxs(Xe,{className:"sticky top-4",children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(sD,{className:"h-4 w-4"}),"Tabla de Contenidos"]})}),a.jsx(Qe,{children:a.jsx(OL,{className:"h-[400px] pr-4",children:a.jsx("div",{className:"space-y-1",children:e.map(o=>a.jsx("button",{onClick:()=>s(o.id),className:`
                  w-full text-left text-sm py-1 px-2 rounded transition-colors
                  ${o.level===1?"font-semibold":""}
                  ${o.level===2?"pl-4":""}
                  ${o.level===3?"pl-8":""}
                  ${o.level>=4?"pl-12":""}
                  ${r===o.id?"bg-primary text-primary-foreground":"hover-elevate text-muted-foreground hover:text-foreground"}
                `,"data-testid":`toc-item-${o.id}`,children:o.text},o.id))})})})]})}const Y8e="modulepreload",X8e=function(t){return"/"+t},aH={},fO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=c(n.map(u=>{if(u=X8e(u),u in aH)return;aH[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Y8e,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function ri(t){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(t)}var ju=Uint8Array,Ll=Uint16Array,PL=Int32Array,ML=new ju([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),RL=new ju([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),oH=new ju([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Zie=function(t,e){for(var n=new Ll(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new PL(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},Jie=Zie(ML,2),Q8e=Jie.b,zR=Jie.r;Q8e[28]=258,zR[258]=28;var Z8e=Zie(RL,0),lH=Z8e.r,qR=new Ll(32768);for(var Pi=0;Pi<32768;++Pi){var Th=(Pi&43690)>>1|(Pi&21845)<<1;Th=(Th&52428)>>2|(Th&13107)<<2,Th=(Th&61680)>>4|(Th&3855)<<4,qR[Pi]=((Th&65280)>>8|(Th&255)<<8)>>1}var Ub=(function(t,e,n){for(var r=t.length,i=0,s=new Ll(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Ll(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(n){l=new Ll(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],f=o[t[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)l[qR[f]>>c]=u}else for(l=new Ll(r),i=0;i<r;++i)t[i]&&(l[i]=qR[o[t[i]-1]++]>>15-t[i]);return l}),lg=new ju(288);for(var Pi=0;Pi<144;++Pi)lg[Pi]=8;for(var Pi=144;Pi<256;++Pi)lg[Pi]=9;for(var Pi=256;Pi<280;++Pi)lg[Pi]=7;for(var Pi=280;Pi<288;++Pi)lg[Pi]=8;var BS=new ju(32);for(var Pi=0;Pi<32;++Pi)BS[Pi]=5;var J8e=Ub(lg,9,0),eBe=Ub(BS,5,0),ese=function(t){return(t+7)/8|0},tBe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ju(t.subarray(e,n))},df=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},cb=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},hO=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:nse,l:0};if(i==1){var o=new ju(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(A,P){return A.f-P.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=n[n[u].f<n[f].f?u++:f++],c=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:l.f+c.f,l,r:c};for(var p=s[0].s,r=1;r<i;++r)s[r].s>p&&(p=s[r].s);var m=new Ll(p+1),v=UR(n[d-1],m,0);if(v>e){var r=0,y=0,x=v-e,b=1<<x;for(s.sort(function(P,O){return m[O.s]-m[P.s]||P.f-O.f});r<i;++r){var S=s[r].s;if(m[S]>e)y+=b-(1<<v-m[S]),m[S]=e;else break}for(y>>=x;y>0;){var j=s[r].s;m[j]<e?y-=1<<e-m[j]++-1:++r}for(;r>=0&&y;--r){var E=s[r].s;m[E]==e&&(--m[E],++y)}v=e}return{t:new ju(m),l:v}},UR=function(t,e,n){return t.s==-1?Math.max(UR(t.l,e,n+1),UR(t.r,e,n+1)):e[t.s]=n},cH=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ll(++e),r=0,i=t[0],s=1,o=function(c){n[r++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[l]}return{c:n.subarray(0,r),n:e}},ub=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},tse=function(t,e,n){var r=n.length,i=ese(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},uH=function(t,e,n,r,i,s,o,l,c,u,d){df(e,d++,n),++i[256];for(var f=hO(i,15),p=f.t,m=f.l,v=hO(s,15),y=v.t,x=v.l,b=cH(p),S=b.c,j=b.n,E=cH(y),A=E.c,P=E.n,O=new Ll(19),k=0;k<S.length;++k)++O[S[k]&31];for(var k=0;k<A.length;++k)++O[A[k]&31];for(var C=hO(O,7),I=C.t,R=C.l,D=19;D>4&&!I[oH[D-1]];--D);var L=u+5<<3,z=ub(i,lg)+ub(s,BS)+o,W=ub(i,p)+ub(s,y)+o+14+3*D+ub(O,I)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&L<=z&&L<=W)return tse(e,d,t.subarray(c,c+u));var X,q,V,Y;if(df(e,d,1+(W<z)),d+=2,W<z){X=Ub(p,m,0),q=p,V=Ub(y,x,0),Y=y;var re=Ub(I,R,0);df(e,d,j-257),df(e,d+5,P-1),df(e,d+10,D-4),d+=14;for(var k=0;k<D;++k)df(e,d+3*k,I[oH[k]]);d+=3*D;for(var Q=[S,A],F=0;F<2;++F)for(var G=Q[F],k=0;k<G.length;++k){var te=G[k]&31;df(e,d,re[te]),d+=I[te],te>15&&(df(e,d,G[k]>>5&127),d+=G[k]>>12)}}else X=J8e,q=lg,V=eBe,Y=BS;for(var k=0;k<l;++k){var le=r[k];if(le>255){var te=le>>18&31;cb(e,d,X[te+257]),d+=q[te+257],te>7&&(df(e,d,le>>23&31),d+=ML[te]);var he=le&31;cb(e,d,V[he]),d+=Y[he],he>3&&(cb(e,d,le>>5&8191),d+=RL[he])}else cb(e,d,X[le]),d+=q[le]}return cb(e,d,X[256]),d+q[256]},nBe=new PL([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nse=new ju(0),rBe=function(t,e,n,r,i,s){var o=s.z||t.length,l=new ju(r+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(r,l.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=nBe[e-1],p=f>>13,m=f&8191,v=(1<<n)-1,y=s.p||new Ll(32768),x=s.h||new Ll(v+1),b=Math.ceil(n/3),S=2*b,j=function(J){return(t[J]^t[J+1]<<b^t[J+2]<<S)&v},E=new PL(25e3),A=new Ll(288),P=new Ll(32),O=0,k=0,C=s.i||0,I=0,R=s.w||0,D=0;C+2<o;++C){var L=j(C),z=C&32767,W=x[L];if(y[z]=W,x[L]=z,R<=C){var X=o-C;if((O>7e3||I>24576)&&(X>423||!u)){d=uH(t,c,0,E,A,P,k,I,D,C-D,d),I=O=k=0,D=C;for(var q=0;q<286;++q)A[q]=0;for(var q=0;q<30;++q)P[q]=0}var V=2,Y=0,re=m,Q=z-W&32767;if(X>2&&L==j(C-Q))for(var F=Math.min(p,X)-1,G=Math.min(32767,C),te=Math.min(258,X);Q<=G&&--re&&z!=W;){if(t[C+V]==t[C+V-Q]){for(var le=0;le<te&&t[C+le]==t[C+le-Q];++le);if(le>V){if(V=le,Y=Q,le>F)break;for(var he=Math.min(Q,le-2),me=0,q=0;q<he;++q){var xe=C-Q+q&32767,de=y[xe],Ne=xe-de&32767;Ne>me&&(me=Ne,W=xe)}}}z=W,W=y[z],Q+=z-W&32767}if(Y){E[I++]=268435456|zR[V]<<18|lH[Y];var Ce=zR[V]&31,ae=lH[Y]&31;k+=ML[Ce]+RL[ae],++A[257+Ce],++P[ae],R=C+V,++O}else E[I++]=t[C],++A[t[C]]}}for(C=Math.max(C,R);C<o;++C)E[I++]=t[C],++A[t[C]];d=uH(t,c,u,E,A,P,k,I,D,C-D,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=x,s.p=y,s.i=C,s.w=R)}else{for(var C=s.w||0;C<o+u;C+=65535){var Pe=C+65535;Pe>=o&&(c[d/8|0]=u,Pe=o),d=tse(c,d+1,t.subarray(C,Pe))}s.i=o}return tBe(l,0,r+ese(d)+i)},rse=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},iBe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ju(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return rBe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},ise=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},sBe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=rse();i.p(e.dictionary),ise(t,2,i.d())}};function HR(t,e){e||(e={});var n=rse();n.p(t);var r=iBe(t,e,e.dictionary?6:2,4);return sBe(r,e),ise(r,r.length-4,n.d()),r}var aBe=typeof TextDecoder<"u"&&new TextDecoder,oBe=0;try{aBe.decode(nse,{stream:!0}),oBe=1}catch{}function lBe(t){if(Array.isArray(t))return t}function cBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function dH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function uBe(t,e){if(t){if(typeof t=="string")return dH(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dH(t,e):void 0}}function dBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fH(t,e){return lBe(t)||cBe(t,e)||uBe(t,e)||dBe()}function hH(t,e="utf8"){return new TextDecoder(e).decode(t)}const fBe=new TextEncoder;function hBe(t){return fBe.encode(t)}const pBe=1024*8,mBe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),pO={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class DL{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=pBe,n={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof DL)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=pO[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===mBe&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+r));l.reverse();const c=new pO[n](l.buffer);return this.offset+=r,c.reverse(),c}const o=new pO[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return hH(this.readBytes(e))}decodeText(e=1,n="utf8"){return hH(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(hBe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yx(t){let e=t.length;for(;--e>=0;)t[e]=0}const gBe=3,vBe=258,sse=29,yBe=256,xBe=yBe+1+sse,ase=30,bBe=512,wBe=new Array((xBe+2)*2);yx(wBe);const NBe=new Array(ase*2);yx(NBe);const SBe=new Array(bBe);yx(SBe);const jBe=new Array(vBe-gBe+1);yx(jBe);const EBe=new Array(sse);yx(EBe);const _Be=new Array(ase);yx(_Be);const CBe=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var VR=CBe;const ABe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},kBe=new Uint32Array(ABe()),TBe=(t,e,n,r)=>{const i=kBe,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Ju=TBe,WR={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ose={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const OBe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var PBe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)OBe(n,r)&&(t[r]=n[r])}}return t},MBe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},lse={assign:PBe,flattenChunks:MBe};let cse=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cse=!1}const t1=new Uint8Array(256);for(let t=0;t<256;t++)t1[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;t1[254]=t1[254]=1;var RBe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,l=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const DBe=(t,e)=>{if(e<65534&&t.subarray&&cse)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var IBe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let l=t1[o];if(l>4){s[i++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|t[r++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return DBe(s,i)},LBe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+t1[t[n]]>e?n:e},KR={string2buf:RBe,buf2string:IBe,utf8border:LBe};function FBe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BBe=FBe;const i2=16209,$Be=16191;var zBe=function(e,n){let r,i,s,o,l,c,u,d,f,p,m,v,y,x,b,S,j,E,A,P,O,k,C,I;const R=e.state;r=e.next_in,C=e.input,i=r+(e.avail_in-5),s=e.next_out,I=e.output,o=s-(n-e.avail_out),l=s+(e.avail_out-257),c=R.dmax,u=R.wsize,d=R.whave,f=R.wnext,p=R.window,m=R.hold,v=R.bits,y=R.lencode,x=R.distcode,b=(1<<R.lenbits)-1,S=(1<<R.distbits)-1;e:do{v<15&&(m+=C[r++]<<v,v+=8,m+=C[r++]<<v,v+=8),j=y[m&b];t:for(;;){if(E=j>>>24,m>>>=E,v-=E,E=j>>>16&255,E===0)I[s++]=j&65535;else if(E&16){A=j&65535,E&=15,E&&(v<E&&(m+=C[r++]<<v,v+=8),A+=m&(1<<E)-1,m>>>=E,v-=E),v<15&&(m+=C[r++]<<v,v+=8,m+=C[r++]<<v,v+=8),j=x[m&S];n:for(;;){if(E=j>>>24,m>>>=E,v-=E,E=j>>>16&255,E&16){if(P=j&65535,E&=15,v<E&&(m+=C[r++]<<v,v+=8,v<E&&(m+=C[r++]<<v,v+=8)),P+=m&(1<<E)-1,P>c){e.msg="invalid distance too far back",R.mode=i2;break e}if(m>>>=E,v-=E,E=s-o,P>E){if(E=P-E,E>d&&R.sane){e.msg="invalid distance too far back",R.mode=i2;break e}if(O=0,k=p,f===0){if(O+=u-E,E<A){A-=E;do I[s++]=p[O++];while(--E);O=s-P,k=I}}else if(f<E){if(O+=u+f-E,E-=f,E<A){A-=E;do I[s++]=p[O++];while(--E);if(O=0,f<A){E=f,A-=E;do I[s++]=p[O++];while(--E);O=s-P,k=I}}}else if(O+=f-E,E<A){A-=E;do I[s++]=p[O++];while(--E);O=s-P,k=I}for(;A>2;)I[s++]=k[O++],I[s++]=k[O++],I[s++]=k[O++],A-=3;A&&(I[s++]=k[O++],A>1&&(I[s++]=k[O++]))}else{O=s-P;do I[s++]=I[O++],I[s++]=I[O++],I[s++]=I[O++],A-=3;while(A>2);A&&(I[s++]=I[O++],A>1&&(I[s++]=I[O++]))}}else if((E&64)===0){j=x[(j&65535)+(m&(1<<E)-1)];continue n}else{e.msg="invalid distance code",R.mode=i2;break e}break}}else if((E&64)===0){j=y[(j&65535)+(m&(1<<E)-1)];continue t}else if(E&32){R.mode=$Be;break e}else{e.msg="invalid literal/length code",R.mode=i2;break e}break}}while(r<i&&s<l);A=v>>3,r-=A,v-=A<<3,m&=(1<<v)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<l?257+(l-s):257-(s-l),R.hold=m,R.bits=v};const hv=15,pH=852,mH=592,gH=0,mO=1,vH=2,qBe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),UBe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),HBe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),VBe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WBe=(t,e,n,r,i,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,p=0,m=0,v=0,y=0,x=0,b=0,S=0,j,E,A,P,O,k=null,C;const I=new Uint16Array(hv+1),R=new Uint16Array(hv+1);let D=null,L,z,W;for(u=0;u<=hv;u++)I[u]=0;for(d=0;d<r;d++)I[e[n+d]]++;for(m=c,p=hv;p>=1&&I[p]===0;p--);if(m>p&&(m=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<p&&I[f]===0;f++);for(m<f&&(m=f),x=1,u=1;u<=hv;u++)if(x<<=1,x-=I[u],x<0)return-1;if(x>0&&(t===gH||p!==1))return-1;for(R[1]=0,u=1;u<hv;u++)R[u+1]=R[u]+I[u];for(d=0;d<r;d++)e[n+d]!==0&&(o[R[e[n+d]]++]=d);if(t===gH?(k=D=o,C=20):t===mO?(k=qBe,D=UBe,C=257):(k=HBe,D=VBe,C=0),S=0,d=0,u=f,O=s,v=m,y=0,A=-1,b=1<<m,P=b-1,t===mO&&b>pH||t===vH&&b>mH)return 1;for(;;){L=u-y,o[d]+1<C?(z=0,W=o[d]):o[d]>=C?(z=D[o[d]-C],W=k[o[d]-C]):(z=96,W=0),j=1<<u-y,E=1<<v,f=E;do E-=j,i[O+(S>>y)+E]=L<<24|z<<16|W|0;while(E!==0);for(j=1<<u-1;S&j;)j>>=1;if(j!==0?(S&=j-1,S+=j):S=0,d++,--I[u]===0){if(u===p)break;u=e[n+o[d]]}if(u>m&&(S&P)!==A){for(y===0&&(y=m),O+=f,v=u-y,x=1<<v;v+y<p&&(x-=I[v+y],!(x<=0));)v++,x<<=1;if(b+=1<<v,t===mO&&b>pH||t===vH&&b>mH)return 1;A=S&P,i[A]=m<<24|v<<16|O-s|0}}return S!==0&&(i[O+S]=u-y<<24|64<<16|0),l.bits=m,0};var Hb=WBe;const KBe=0,use=1,dse=2,{Z_FINISH:yH,Z_BLOCK:GBe,Z_TREES:s2,Z_OK:cg,Z_STREAM_END:YBe,Z_NEED_DICT:XBe,Z_STREAM_ERROR:Ac,Z_DATA_ERROR:fse,Z_MEM_ERROR:hse,Z_BUF_ERROR:QBe,Z_DEFLATED:xH}=ose,g_=16180,bH=16181,wH=16182,NH=16183,SH=16184,jH=16185,EH=16186,_H=16187,CH=16188,AH=16189,$S=16190,ff=16191,gO=16192,kH=16193,vO=16194,TH=16195,OH=16196,PH=16197,MH=16198,a2=16199,o2=16200,RH=16201,DH=16202,IH=16203,LH=16204,FH=16205,yO=16206,BH=16207,$H=16208,Ui=16209,pse=16210,mse=16211,ZBe=852,JBe=592,e$e=15,t$e=e$e,zH=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function n$e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<g_||e.mode>mse?1:0},gse=t=>{if(kg(t))return Ac;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=g_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ZBe),e.distcode=e.distdyn=new Int32Array(JBe),e.sane=1,e.back=-1,cg},vse=t=>{if(kg(t))return Ac;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,gse(t)},yse=(t,e)=>{let n;if(kg(t))return Ac;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ac:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,vse(t))},xse=(t,e)=>{if(!t)return Ac;const n=new n$e;t.state=n,n.strm=t,n.window=null,n.mode=g_;const r=yse(t,e);return r!==cg&&(t.state=null),r},r$e=t=>xse(t,t$e);let qH=!0,xO,bO;const i$e=t=>{if(qH){xO=new Int32Array(512),bO=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Hb(use,t.lens,0,288,xO,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Hb(dse,t.lens,0,32,bO,0,t.work,{bits:5}),qH=!1}t.lencode=xO,t.lenbits=9,t.distcode=bO,t.distbits=5},bse=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},s$e=(t,e)=>{let n,r,i,s,o,l,c,u,d,f,p,m,v,y,x=0,b,S,j,E,A,P,O,k;const C=new Uint8Array(4);let I,R;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kg(t)||!t.output||!t.input&&t.avail_in!==0)return Ac;n=t.state,n.mode===ff&&(n.mode=gO),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,f=l,p=c,k=cg;e:for(;;)switch(n.mode){case g_:if(n.wrap===0){n.mode=gO;break}for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,C[0]=u&255,C[1]=u>>>8&255,n.check=Ju(n.check,C,2,0),u=0,d=0,n.mode=bH;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Ui;break}if((u&15)!==xH){t.msg="unknown compression method",n.mode=Ui;break}if(u>>>=4,d-=4,O=(u&15)+8,n.wbits===0&&(n.wbits=O),O>15||O>n.wbits){t.msg="invalid window size",n.mode=Ui;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?AH:ff,u=0,d=0;break;case bH:for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==xH){t.msg="unknown compression method",n.mode=Ui;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ui;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,n.check=Ju(n.check,C,2,0)),u=0,d=0,n.mode=wH;case wH:for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,n.check=Ju(n.check,C,4,0)),u=0,d=0,n.mode=NH;case NH:for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,n.check=Ju(n.check,C,2,0)),u=0,d=0,n.mode=SH;case SH:if(n.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,n.check=Ju(n.check,C,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=jH;case jH:if(n.flags&1024&&(m=n.length,m>l&&(m=l),m&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+m),O)),n.flags&512&&n.wrap&4&&(n.check=Ju(n.check,r,m,s)),l-=m,s+=m,n.length-=m),n.length))break e;n.length=0,n.mode=EH;case EH:if(n.flags&2048){if(l===0)break e;m=0;do O=r[s+m++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O));while(O&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=Ju(n.check,r,m,s)),l-=m,s+=m,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=_H;case _H:if(n.flags&4096){if(l===0)break e;m=0;do O=r[s+m++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O));while(O&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=Ju(n.check,r,m,s)),l-=m,s+=m,O)break e}else n.head&&(n.head.comment=null);n.mode=CH;case CH:if(n.flags&512){for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ui;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ff;break;case AH:for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}t.adler=n.check=zH(u),u=0,d=0,n.mode=$S;case $S:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,XBe;t.adler=n.check=1,n.mode=ff;case ff:if(e===GBe||e===s2)break e;case gO:if(n.last){u>>>=d&7,d-=d&7,n.mode=yO;break}for(;d<3;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=kH;break;case 1:if(i$e(n),n.mode=a2,e===s2){u>>>=2,d-=2;break e}break;case 2:n.mode=OH;break;case 3:t.msg="invalid block type",n.mode=Ui}u>>>=2,d-=2;break;case kH:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ui;break}if(n.length=u&65535,u=0,d=0,n.mode=vO,e===s2)break e;case vO:n.mode=TH;case TH:if(m=n.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;i.set(r.subarray(s,s+m),o),l-=m,s+=m,c-=m,o+=m,n.length-=m;break}n.mode=ff;break;case OH:for(;d<14;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ui;break}n.have=0,n.mode=PH;case PH:for(;n.have<n.ncode;){for(;d<3;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.lens[D[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},k=Hb(KBe,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,k){t.msg="invalid code lengths set",n.mode=Ui;break}n.have=0,n.mode=MH;case MH:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[u&(1<<n.lenbits)-1],b=x>>>24,S=x>>>16&255,j=x&65535,!(b<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(j<16)u>>>=b,d-=b,n.lens[n.have++]=j;else{if(j===16){for(R=b+2;d<R;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(u>>>=b,d-=b,n.have===0){t.msg="invalid bit length repeat",n.mode=Ui;break}O=n.lens[n.have-1],m=3+(u&3),u>>>=2,d-=2}else if(j===17){for(R=b+3;d<R;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=b,d-=b,O=0,m=3+(u&7),u>>>=3,d-=3}else{for(R=b+7;d<R;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=b,d-=b,O=0,m=11+(u&127),u>>>=7,d-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ui;break}for(;m--;)n.lens[n.have++]=O}}if(n.mode===Ui)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ui;break}if(n.lenbits=9,I={bits:n.lenbits},k=Hb(use,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,k){t.msg="invalid literal/lengths set",n.mode=Ui;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},k=Hb(dse,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,k){t.msg="invalid distances set",n.mode=Ui;break}if(n.mode=a2,e===s2)break e;case a2:n.mode=o2;case o2:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,zBe(t,p),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,n.mode===ff&&(n.back=-1);break}for(n.back=0;x=n.lencode[u&(1<<n.lenbits)-1],b=x>>>24,S=x>>>16&255,j=x&65535,!(b<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(S&&(S&240)===0){for(E=b,A=S,P=j;x=n.lencode[P+((u&(1<<E+A)-1)>>E)],b=x>>>24,S=x>>>16&255,j=x&65535,!(E+b<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=E,d-=E,n.back+=E}if(u>>>=b,d-=b,n.back+=b,n.length=j,S===0){n.mode=FH;break}if(S&32){n.back=-1,n.mode=ff;break}if(S&64){t.msg="invalid literal/length code",n.mode=Ui;break}n.extra=S&15,n.mode=RH;case RH:if(n.extra){for(R=n.extra;d<R;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DH;case DH:for(;x=n.distcode[u&(1<<n.distbits)-1],b=x>>>24,S=x>>>16&255,j=x&65535,!(b<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if((S&240)===0){for(E=b,A=S,P=j;x=n.distcode[P+((u&(1<<E+A)-1)>>E)],b=x>>>24,S=x>>>16&255,j=x&65535,!(E+b<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=E,d-=E,n.back+=E}if(u>>>=b,d-=b,n.back+=b,S&64){t.msg="invalid distance code",n.mode=Ui;break}n.offset=j,n.extra=S&15,n.mode=IH;case IH:if(n.extra){for(R=n.extra;d<R;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ui;break}n.mode=LH;case LH:if(c===0)break e;if(m=p-c,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ui;break}m>n.wnext?(m-=n.wnext,v=n.wsize-m):v=n.wnext-m,m>n.length&&(m=n.length),y=n.window}else y=i,v=o-n.offset,m=n.length;m>c&&(m=c),c-=m,n.length-=m;do i[o++]=y[v++];while(--m);n.length===0&&(n.mode=o2);break;case FH:if(c===0)break e;i[o++]=n.length,c--,n.mode=o2;break;case yO:if(n.wrap){for(;d<32;){if(l===0)break e;l--,u|=r[s++]<<d,d+=8}if(p-=c,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Ju(n.check,i,p,o-p):VR(n.check,i,p,o-p)),p=c,n.wrap&4&&(n.flags?u:zH(u))!==n.check){t.msg="incorrect data check",n.mode=Ui;break}u=0,d=0}n.mode=BH;case BH:if(n.wrap&&n.flags){for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ui;break}u=0,d=0}n.mode=$H;case $H:k=YBe;break e;case Ui:k=fse;break e;case pse:return hse;case mse:default:return Ac}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,(n.wsize||p!==t.avail_out&&n.mode<Ui&&(n.mode<yO||e!==yH))&&bse(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Ju(n.check,i,p,t.next_out-p):VR(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ff?128:0)+(n.mode===a2||n.mode===vO?256:0),(f===0&&p===0||e===yH)&&k===cg&&(k=QBe),k},a$e=t=>{if(kg(t))return Ac;let e=t.state;return e.window&&(e.window=null),t.state=null,cg},o$e=(t,e)=>{if(kg(t))return Ac;const n=t.state;return(n.wrap&2)===0?Ac:(n.head=e,e.done=!1,cg)},l$e=(t,e)=>{const n=e.length;let r,i,s;return kg(t)||(r=t.state,r.wrap!==0&&r.mode!==$S)?Ac:r.mode===$S&&(i=1,i=VR(i,e,n,0),i!==r.check)?fse:(s=bse(t,e,n,n),s?(r.mode=pse,hse):(r.havedict=1,cg))};var c$e=vse,u$e=yse,d$e=gse,f$e=r$e,h$e=xse,p$e=s$e,m$e=a$e,g$e=o$e,v$e=l$e,y$e="pako inflate (from Nodeca project)",wf={inflateReset:c$e,inflateReset2:u$e,inflateResetKeep:d$e,inflateInit:f$e,inflateInit2:h$e,inflate:p$e,inflateEnd:m$e,inflateGetHeader:g$e,inflateSetDictionary:v$e,inflateInfo:y$e};function x$e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var b$e=x$e;const wse=Object.prototype.toString,{Z_NO_FLUSH:w$e,Z_FINISH:N$e,Z_OK:n1,Z_STREAM_END:wO,Z_NEED_DICT:NO,Z_STREAM_ERROR:S$e,Z_DATA_ERROR:UH,Z_MEM_ERROR:j$e}=ose;function H1(t){this.options=lse.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BBe,this.strm.avail_out=0;let n=wf.inflateInit2(this.strm,e.windowBits);if(n!==n1)throw new Error(WR[n]);if(this.header=new b$e,wf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=KR.string2buf(e.dictionary):wse.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=wf.inflateSetDictionary(this.strm,e.dictionary),n!==n1)))throw new Error(WR[n])}H1.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?N$e:w$e,wse.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=wf.inflate(n,o),s===NO&&i&&(s=wf.inflateSetDictionary(n,i),s===n1?s=wf.inflate(n,o):s===UH&&(s=NO));n.avail_in>0&&s===wO&&n.state.wrap>0&&t[n.next_in]!==0;)wf.inflateReset(n),s=wf.inflate(n,o);switch(s){case S$e:case UH:case NO:case j$e:return this.onEnd(s),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||s===wO))if(this.options.to==="string"){let c=KR.utf8border(n.output,n.next_out),u=n.next_out-c,d=KR.buf2string(n.output,c);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(c,c+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===n1&&l===0)){if(s===wO)return s=wf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};H1.prototype.onData=function(t){this.chunks.push(t)};H1.prototype.onEnd=function(t){t===n1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=lse.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function E$e(t,e){const n=new H1(e);if(n.push(t),n.err)throw n.msg||WR[n.err];return n.result}var _$e=H1,C$e=E$e,A$e={Inflate:_$e,inflate:C$e};const{Inflate:k$e,inflate:T$e}=A$e;var HH=k$e,O$e=T$e;const Nse=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;Nse[t]=e}const VH=4294967295;function P$e(t,e,n){let r=t;for(let i=0;i<n;i++)r=Nse[(r^e[i])&255]^r>>>8;return r}function M$e(t,e){return(P$e(VH,t,e)^VH)>>>0}function WH(t,e,n){const r=t.readUint32(),i=M$e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function Sse(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function jse(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function Ese(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function _se(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function Cse(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+R$e(e[s-i],n[s],n[s-i])&255}}function R$e(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function D$e(t,e,n,r,i,s){switch(t){case 0:Sse(e,n,i);break;case 1:jse(e,n,i,s);break;case 2:Ese(e,n,r,i);break;case 3:_se(e,n,r,i,s);break;case 4:Cse(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const I$e=new Uint16Array([255]),L$e=new Uint8Array(I$e.buffer),F$e=L$e[0]===255;function B$e(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(r*n*l);let u=0;for(let d=0;d<7;d++){const f=o[d],p=Math.ceil((n-f.x)/f.xStep),m=Math.ceil((r-f.y)/f.yStep);if(p<=0||m<=0)continue;const v=p*l,y=new Uint8Array(v);for(let x=0;x<m;x++){const b=e[u++],S=e.subarray(u,u+v);u+=v;const j=new Uint8Array(v);D$e(b,S,j,y,v,l),y.set(j);for(let E=0;E<p;E++){const A=f.x+E*f.xStep,P=f.y+x*f.yStep;if(!(A>=n||P>=r))for(let O=0;O<l;O++)c[(P*n+A)*l+O]=j[E*l+O]}}}if(s===16){const d=new Uint16Array(c.buffer);if(F$e)for(let f=0;f<d.length;f++)d[f]=$$e(d[f]);return d}else return c}function $$e(t){return(t&255)<<8|t>>8&255}const z$e=new Uint16Array([255]),q$e=new Uint8Array(z$e.buffer),U$e=q$e[0]===255,H$e=new Uint8Array(0);function KH(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*n),c=new Uint8Array(r*l);let u=H$e,d=0,f,p;for(let m=0;m<r;m++){switch(f=e.subarray(d+1,d+1+l),p=c.subarray(m*l,(m+1)*l),e[d]){case 0:Sse(f,p,l);break;case 1:jse(f,p,l,o);break;case 2:Ese(f,p,u,l);break;case 3:_se(f,p,u,l,o);break;case 4:Cse(f,p,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=l+1}if(s===16){const m=new Uint16Array(c.buffer);if(U$e)for(let v=0;v<m.length;v++)m[v]=V$e(m[v]);return m}else return c}function V$e(t){return(t&255)<<8|t>>8&255}const K2=Uint8Array.of(137,80,78,71,13,10,26,10);function GH(t){if(!W$e(t.readBytes(K2.length)))throw new Error("wrong PNG signature")}function W$e(t){if(t.length<K2.length)return!1;for(let e=0;e<K2.length;e++)if(t[e]!==K2[e])return!1;return!0}const K$e="tEXt",G$e=0,Ase=new TextDecoder("latin1");function Y$e(t){if(Q$e(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const X$e=/^[\u0000-\u00FF]*$/;function Q$e(t){if(!X$e.test(t))throw new Error("invalid latin1 text")}function Z$e(t,e,n){const r=kse(e);t[r]=J$e(e,n-r.length-1)}function kse(t){for(t.mark();t.readByte()!==G$e;);const e=t.offset;t.reset();const n=Ase.decode(t.readBytes(e-t.offset-1));return t.skip(1),Y$e(n),n}function J$e(t,e){return Ase.decode(t.readBytes(e))}const _l={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},SO={UNKNOWN:-1,DEFLATE:0},YH={UNKNOWN:-1,ADAPTIVE:0},jO={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},l2={NONE:0,BACKGROUND:1,PREVIOUS:2},EO={SOURCE:0,OVER:1};class e7e extends DL{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new HH,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=SO.UNKNOWN,this._filterMethod=YH.UNKNOWN,this._interlaceMethod=jO.UNKNOWN,this._colorType=_l.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(GH(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(GH(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case K$e:Z$e(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?WH(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const r=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?WH(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=t7e(this.readUint8());const n=this.readUint8();this._colorType=n;let r;switch(n){case _l.GREYSCALE:r=1;break;case _l.TRUECOLOUR:r=3;break;case _l.INDEXED_COLOUR:r=1;break;case _l.GREYSCALE_ALPHA:r=2;break;case _l.TRUECOLOUR_ALPHA:r=4;break;case _l.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==SO.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,r=this.offset+this.byteOffset;if(r+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,r,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case _l.GREYSCALE:case _l.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case _l.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case _l.UNKNOWN:case _l.GREYSCALE_ALPHA:case _l.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=kse(this),r=this.readUint8();if(r!==SO.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:O$e(i)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:n,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=KH({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)n.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,n),this.addFrameDataToCanvas(n,r)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,r){switch(e.disposeOp){case l2.NONE:break;case l2.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const o=(i*e.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)r.data[o+l]=0}break;case l2.PREVIOUS:r.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const r=1<<this._png.depth,i=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case EO.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=i(s,o);for(let u=0;u<this._png.channels;u++)e.data[l+u]=n.data[c+u]}break;case EO.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=i(s,o);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/r,f=u%(this._png.channels-1)===0?1:n.data[c+u],p=Math.floor(d*f+(1-d)*e.data[l+u]);e.data[l+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==YH.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===jO.NO_INTERLACE)this._png.data=KH({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===jO.ADAM7)this._png.data=B$e({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:l2.NONE,blendOp:EO.SOURCE,data:e}),this._inflator=new HH,this._writingDataChunks=!1}}function t7e(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var XH;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(XH||(XH={}));function n7e(t,e){return new e7e(t,e).decode()}var Vn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function _O(){Vn.console&&typeof Vn.console.log=="function"&&Vn.console.log.apply(Vn.console,arguments)}var di={log:_O,warn:function(t){Vn.console&&(typeof Vn.console.warn=="function"?Vn.console.warn.apply(Vn.console,arguments):_O.call(null,arguments))},error:function(t){Vn.console&&(typeof Vn.console.error=="function"?Vn.console.error.apply(Vn.console,arguments):_O(t))}};function CO(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){xm(r.response,e,n)},r.onerror=function(){di.error("could not download file")},r.send()}function QH(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var xm=Vn.saveAs||((typeof window>"u"?"undefined":ri(window))!=="object"||window!==Vn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Vn.URL||Vn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?QH(i.href)?CO(t,e,n):c2(i,i.target="_blank"):c2(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){c2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(QH(t))CO(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){c2(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:ri(s)!=="object"&&(di.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return CO(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Vn.HTMLElement)||Vn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":ri(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},l.readAsDataURL(t)}else{var c=Vn.URL||Vn.webkitURL,u=c.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tse(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var G2=Vn.atob.bind(Vn),ZH=Vn.btoa.bind(Vn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function AO(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=io(n,r,i,s,e[0],7,-680876936),s=io(s,n,r,i,e[1],12,-389564586),i=io(i,s,n,r,e[2],17,606105819),r=io(r,i,s,n,e[3],22,-1044525330),n=io(n,r,i,s,e[4],7,-176418897),s=io(s,n,r,i,e[5],12,1200080426),i=io(i,s,n,r,e[6],17,-1473231341),r=io(r,i,s,n,e[7],22,-45705983),n=io(n,r,i,s,e[8],7,1770035416),s=io(s,n,r,i,e[9],12,-1958414417),i=io(i,s,n,r,e[10],17,-42063),r=io(r,i,s,n,e[11],22,-1990404162),n=io(n,r,i,s,e[12],7,1804603682),s=io(s,n,r,i,e[13],12,-40341101),i=io(i,s,n,r,e[14],17,-1502002290),n=so(n,r=io(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=so(s,n,r,i,e[6],9,-1069501632),i=so(i,s,n,r,e[11],14,643717713),r=so(r,i,s,n,e[0],20,-373897302),n=so(n,r,i,s,e[5],5,-701558691),s=so(s,n,r,i,e[10],9,38016083),i=so(i,s,n,r,e[15],14,-660478335),r=so(r,i,s,n,e[4],20,-405537848),n=so(n,r,i,s,e[9],5,568446438),s=so(s,n,r,i,e[14],9,-1019803690),i=so(i,s,n,r,e[3],14,-187363961),r=so(r,i,s,n,e[8],20,1163531501),n=so(n,r,i,s,e[13],5,-1444681467),s=so(s,n,r,i,e[2],9,-51403784),i=so(i,s,n,r,e[7],14,1735328473),n=ao(n,r=so(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ao(s,n,r,i,e[8],11,-2022574463),i=ao(i,s,n,r,e[11],16,1839030562),r=ao(r,i,s,n,e[14],23,-35309556),n=ao(n,r,i,s,e[1],4,-1530992060),s=ao(s,n,r,i,e[4],11,1272893353),i=ao(i,s,n,r,e[7],16,-155497632),r=ao(r,i,s,n,e[10],23,-1094730640),n=ao(n,r,i,s,e[13],4,681279174),s=ao(s,n,r,i,e[0],11,-358537222),i=ao(i,s,n,r,e[3],16,-722521979),r=ao(r,i,s,n,e[6],23,76029189),n=ao(n,r,i,s,e[9],4,-640364487),s=ao(s,n,r,i,e[12],11,-421815835),i=ao(i,s,n,r,e[15],16,530742520),n=oo(n,r=ao(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=oo(s,n,r,i,e[7],10,1126891415),i=oo(i,s,n,r,e[14],15,-1416354905),r=oo(r,i,s,n,e[5],21,-57434055),n=oo(n,r,i,s,e[12],6,1700485571),s=oo(s,n,r,i,e[3],10,-1894986606),i=oo(i,s,n,r,e[10],15,-1051523),r=oo(r,i,s,n,e[1],21,-2054922799),n=oo(n,r,i,s,e[8],6,1873313359),s=oo(s,n,r,i,e[15],10,-30611744),i=oo(i,s,n,r,e[6],15,-1560198380),r=oo(r,i,s,n,e[13],21,1309151649),n=oo(n,r,i,s,e[4],6,-145523070),s=oo(s,n,r,i,e[11],10,-1120210379),i=oo(i,s,n,r,e[2],15,718787259),r=oo(r,i,s,n,e[9],21,-343485551),t[0]=Zh(n,t[0]),t[1]=Zh(r,t[1]),t[2]=Zh(i,t[2]),t[3]=Zh(s,t[3])}function v_(t,e,n,r,i,s){return e=Zh(Zh(e,t),Zh(r,s)),Zh(e<<i|e>>>32-i,n)}function io(t,e,n,r,i,s,o){return v_(e&n|~e&r,t,e,i,s,o)}function so(t,e,n,r,i,s,o){return v_(e&r|n&~r,t,e,i,s,o)}function ao(t,e,n,r,i,s,o){return v_(e^n^r,t,e,i,s,o)}function oo(t,e,n,r,i,s,o){return v_(n^(e|~r),t,e,i,s,o)}function Ose(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)AO(r,r7e(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(AO(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,AO(r,i),r}function r7e(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var JH="0123456789abcdef".split("");function i7e(t){for(var e="",n=0;n<4;n++)e+=JH[t>>8*n+4&15]+JH[t>>8*n&15];return e}function s7e(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function GR(t){return Ose(t).map(s7e).join("")}var a7e=(function(t){for(var e=0;e<t.length;e++)t[e]=i7e(t[e]);return t.join("")})(Ose("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zh(t,e){if(a7e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function YR(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}n=t,r=l}else l=r;var f=e.length,p=0,m=0,v="";for(c=0;c<f;c++)m=(m+(d=l[p=(p+1)%256]))%256,l[p]=l[m],l[m]=d,o=l[(l[p]+l[m])%256],v+=String.fromCharCode(e.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var eV={print:4,modify:8,copy:16,"annot-forms":32};function Ev(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(eV.perm!==void 0)throw new Error("Invalid permission: "+l);i+=eV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=GR(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=YR(this.encryptionKey,this.padding)}function _v(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function tV(t){if(ri(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(l){Vn.console&&di.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function zS(t){if(!(this instanceof zS))return new zS(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Pse(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function bm(t,e,n,r,i){if(!(this instanceof bm))return new bm(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Pse.call(this,r,i)}function Bv(t,e,n,r,i){if(!(this instanceof Bv))return new Bv(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Pse.call(this,r,i)}function mn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;ri(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=tV;var v="1.3",y=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(B){v=B};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return x};var b=m.__private__.getPageFormat=function(B){return x[B]};i=i||"a4";var S="compat",j="advanced",E=S;function A(){this.saveGraphicsState(),ne(new Dt(Yt,0,0,-Yt,0,Wo()*Yt).toString()+" cm"),this.setFontSize(this.getFontSize()/Yt),u="n",E=j}function P(){this.restoreGraphicsState(),u="S",E=S}var O=m.__private__.combineFontStyleAndFontWeight=function(B,ee){if(B=="bold"&&ee=="normal"||B=="bold"&&ee==400||B=="normal"&&ee=="italic"||B=="bold"&&ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ee&&(B=ee==400||ee==="normal"?B==="italic"?"italic":"normal":ee!=700&&ee!=="bold"||B!=="normal"?(ee==700?"bold":ee)+""+B:"bold"),B};m.advancedAPI=function(B){var ee=E===S;return ee&&A.call(this),typeof B!="function"||(B(this),ee&&P.call(this)),this},m.compatAPI=function(B){var ee=E===j;return ee&&P.call(this),typeof B!="function"||(B(this),ee&&A.call(this)),this},m.isAdvancedAPI=function(){return E===j};var k,C=function(B){if(E!==j)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(B,ee){var we=e||ee;if(isNaN(B)||isNaN(we))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(we).replace(/0+$/,"")};k=m.hpf=m.__private__.hpf=typeof c=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,c)}:c==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,16)};var R=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return I(B,2)},D=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return I(B,3)},L=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return E===S?B*Yt:E===j?B:void 0},z=function(B){return L((function(ee){return E===S?Wo()-ee:E===j?ee:void 0})(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var W,X="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return X},V=m.__private__.setFileId=function(B){return X=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ji=new Ev(d.userPermissions,d.userPassword,d.ownerPassword,X)),X};m.setFileId=function(B){return V(B),this},m.getFileId=function(){return q()};var Y=m.__private__.convertDateToPDFDate=function(B){var ee=B.getTimezoneOffset(),we=ee<0?"+":"-",Ae=Math.floor(Math.abs(ee/60)),Ie=Math.abs(ee%60),it=[we,te(Ae),"'",te(Ie),"'"].join("");return["D:",B.getFullYear(),te(B.getMonth()+1),te(B.getDate()),te(B.getHours()),te(B.getMinutes()),te(B.getSeconds()),it].join("")},re=m.__private__.convertPDFDateToDate=function(B){var ee=parseInt(B.substr(2,4),10),we=parseInt(B.substr(6,2),10)-1,Ae=parseInt(B.substr(8,2),10),Ie=parseInt(B.substr(10,2),10),it=parseInt(B.substr(12,2),10),mt=parseInt(B.substr(14,2),10);return new Date(ee,we,Ae,Ie,it,mt,0)},Q=m.__private__.setCreationDate=function(B){var ee;if(B===void 0&&(B=new Date),B instanceof Date)ee=Y(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ee=B}return W=ee},F=m.__private__.getCreationDate=function(B){var ee=W;return B==="jsDate"&&(ee=re(W)),ee};m.setCreationDate=function(B){return Q(B),this},m.getCreationDate=function(B){return F(B)};var G,te=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},le=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},he=0,me=[],xe=[],de=0,Ne=[],Ce=[],ae=!1,Pe=xe;m.__private__.setCustomOutputDestination=function(B){ae=!0,Pe=B};var J=function(B){ae||(Pe=B)};m.__private__.resetCustomOutputDestination=function(){ae=!1,Pe=xe};var ne=m.__private__.out=function(B){return B=B.toString(),de+=B.length+1,Pe.push(B),Pe},Re=m.__private__.write=function(B){return ne(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},dt=m.__private__.getArrayBuffer=function(B){for(var ee=B.length,we=new ArrayBuffer(ee),Ae=new Uint8Array(we);ee--;)Ae[ee]=B.charCodeAt(ee);return we},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return et};var Ve=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return Ve=E===j?B/Yt:B,this};var ge,Se=m.__private__.getFontSize=m.getFontSize=function(){return E===S?Ve:Ve*Yt},ke=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return ke=B,this},m.__private__.getR2L=m.getR2L=function(){return ke};var We,Ke=m.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))ge=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');ge=B}else ge=parseInt(B,10)};m.__private__.getZoomMode=function(){return ge};var qe,nt=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');We=B};m.__private__.getPageMode=function(){return We};var _t=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');qe=B};m.__private__.getLayoutMode=function(){return qe},m.__private__.setDisplayMode=m.setDisplayMode=function(B,ee,we){return Ke(B),_t(ee),nt(we),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(xt).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[B]},m.__private__.getDocumentProperties=function(){return xt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var ee in xt)xt.hasOwnProperty(ee)&&B[ee]&&(xt[ee]=B[ee]);return this},m.__private__.setDocumentProperty=function(B,ee){if(Object.keys(xt).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[B]=ee};var Ot,Yt,Ct,$n,Pn,Ht={},xn={},ir=[],on={},Cn={},bn={},Cr={},ur=null,vn=0,zt=[],je=new tV(m),se=t.hotfixes||[],Le={},St={},Tn=[],Dt=function B(ee,we,Ae,Ie,it,mt){if(!(this instanceof B))return new B(ee,we,Ae,Ie,it,mt);isNaN(ee)&&(ee=1),isNaN(we)&&(we=0),isNaN(Ae)&&(Ae=0),isNaN(Ie)&&(Ie=1),isNaN(it)&&(it=0),isNaN(mt)&&(mt=0),this._matrix=[ee,we,Ae,Ie,it,mt]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(B)},Dt.prototype.multiply=function(B){var ee=B.sx*this.sx+B.shy*this.shx,we=B.sx*this.shy+B.shy*this.sy,Ae=B.shx*this.sx+B.sy*this.shx,Ie=B.shx*this.shy+B.sy*this.sy,it=B.tx*this.sx+B.ty*this.shx+this.tx,mt=B.tx*this.shy+B.ty*this.sy+this.ty;return new Dt(ee,we,Ae,Ie,it,mt)},Dt.prototype.decompose=function(){var B=this.sx,ee=this.shy,we=this.shx,Ae=this.sy,Ie=this.tx,it=this.ty,mt=Math.sqrt(B*B+ee*ee),tn=(B/=mt)*we+(ee/=mt)*Ae;we-=B*tn,Ae-=ee*tn;var dn=Math.sqrt(we*we+Ae*Ae);return tn/=dn,B*(Ae/=dn)<ee*(we/=dn)&&(B=-B,ee=-ee,tn=-tn,mt=-mt),{scale:new Dt(mt,0,0,dn,0,0),translate:new Dt(1,0,0,1,Ie,it),rotate:new Dt(B,ee,-ee,B,0,0),skew:new Dt(1,0,tn,1,0,0)}},Dt.prototype.toString=function(B){return this.join(" ")},Dt.prototype.inversed=function(){var B=this.sx,ee=this.shy,we=this.shx,Ae=this.sy,Ie=this.tx,it=this.ty,mt=1/(B*Ae-ee*we),tn=Ae*mt,dn=-ee*mt,zn=-we*mt,qn=B*mt;return new Dt(tn,dn,zn,qn,-tn*Ie-zn*it,-dn*Ie-qn*it)},Dt.prototype.applyToPoint=function(B){var ee=B.x*this.sx+B.y*this.shx+this.tx,we=B.x*this.shy+B.y*this.sy+this.ty;return new Gl(ee,we)},Dt.prototype.applyToRectangle=function(B){var ee=this.applyToPoint(B),we=this.applyToPoint(new Gl(B.x+B.w,B.y+B.h));return new Id(ee.x,ee.y,we.x-ee.x,we.y-ee.y)},Dt.prototype.clone=function(){var B=this.sx,ee=this.shy,we=this.shx,Ae=this.sy,Ie=this.tx,it=this.ty;return new Dt(B,ee,we,Ae,Ie,it)},m.Matrix=Dt;var wt=m.matrixMult=function(B,ee){return ee.multiply(B)},At=new Dt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=At;var Bt=function(B,ee){if(!Cn[B]){var we=(ee instanceof bm?"Sh":"P")+(Object.keys(on).length+1).toString(10);ee.id=we,Cn[B]=we,on[we]=ee,je.publish("addPattern",ee)}};m.ShadingPattern=bm,m.TilingPattern=Bv,m.addShadingPattern=function(B,ee){return C("addShadingPattern()"),Bt(B,ee),this},m.beginTilingPattern=function(B){C("beginTilingPattern()"),Uo(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,ee){C("endTilingPattern()"),ee.stream=Ce[G].join(`
`),Bt(B,ee),je.publish("endTilingPattern",ee),Tn.pop().restore()};var On,en=m.__private__.newObject=function(){var B=sr();return Nr(B,!0),B},sr=m.__private__.newObjectDeferred=function(){return he++,me[he]=function(){return de},he},Nr=function(B,ee){return ee=typeof ee=="boolean"&&ee,me[B]=de,ee&&ne(B+" 0 obj"),B},Ii=m.__private__.newAdditionalObject=function(){var B={objId:sr(),content:""};return Ne.push(B),B},Ys=sr(),Ta=sr(),$o=m.__private__.decodeColorString=function(B){var ee=B.split(" ");if(ee.length!==2||ee[1]!=="g"&&ee[1]!=="G")ee.length!==5||ee[4]!=="k"&&ee[4]!=="K"||(ee=[(1-ee[0])*(1-ee[3]),(1-ee[1])*(1-ee[3]),(1-ee[2])*(1-ee[3]),"r"]);else{var we=parseFloat(ee[0]);ee=[we,we,we,"r"]}for(var Ae="#",Ie=0;Ie<3;Ie++)Ae+=("0"+Math.floor(255*parseFloat(ee[Ie])).toString(16)).slice(-2);return Ae},Ss=m.__private__.encodeColorString=function(B){var ee;typeof B=="string"&&(B={ch1:B});var we=B.ch1,Ae=B.ch2,Ie=B.ch3,it=B.ch4,mt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof we=="string"&&we.charAt(0)!=="#"){var tn=new Tse(we);if(tn.ok)we=tn.toHex();else if(!/^\d*\.?\d*$/.test(we))throw new Error('Invalid color "'+we+'" passed to jsPDF.encodeColorString.')}if(typeof we=="string"&&/^#[0-9A-Fa-f]{3}$/.test(we)&&(we="#"+we[1]+we[1]+we[2]+we[2]+we[3]+we[3]),typeof we=="string"&&/^#[0-9A-Fa-f]{6}$/.test(we)){var dn=parseInt(we.substr(1),16);we=dn>>16&255,Ae=dn>>8&255,Ie=255&dn}if(Ae===void 0||it===void 0&&we===Ae&&Ae===Ie)ee=typeof we=="string"?we+" "+mt[0]:B.precision===2?R(we/255)+" "+mt[0]:D(we/255)+" "+mt[0];else if(it===void 0||ri(it)==="object"){if(it&&!isNaN(it.a)&&it.a===0)return["1.","1.","1.",mt[1]].join(" ");ee=typeof we=="string"?[we,Ae,Ie,mt[1]].join(" "):B.precision===2?[R(we/255),R(Ae/255),R(Ie/255),mt[1]].join(" "):[D(we/255),D(Ae/255),D(Ie/255),mt[1]].join(" ")}else ee=typeof we=="string"?[we,Ae,Ie,it,mt[2]].join(" "):B.precision===2?[R(we),R(Ae),R(Ie),R(it),mt[2]].join(" "):[D(we),D(Ae),D(Ie),D(it),mt[2]].join(" ");return ee},Wa=m.__private__.getFilters=function(){return o},fa=m.__private__.putStream=function(B){var ee=(B=B||{}).data||"",we=B.filters||Wa(),Ae=B.alreadyAppliedFilters||[],Ie=B.addLength1||!1,it=ee.length,mt=B.objectId,tn=function(js){return js};if(d!==null&&mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(tn=ji.encryptor(mt,0));var dn={};we===!0&&(we=["FlateEncode"]);var zn=B.additionalKeyValues||[],qn=(dn=mn.API.processDataByFilters!==void 0?mn.API.processDataByFilters(ee,we):{data:ee,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(dn.data.length!==0&&(zn.push({key:"Length",value:dn.data.length}),Ie===!0&&zn.push({key:"Length1",value:it})),qn.length!=0)if(qn.split("/").length-1==1)zn.push({key:"Filter",value:qn});else{zn.push({key:"Filter",value:"["+qn+"]"});for(var kr=0;kr<zn.length;kr+=1)if(zn[kr].key==="DecodeParms"){for(var _i=[],ls=0;ls<dn.reverseChain.split("/").length-1;ls+=1)_i.push("null");_i.push(zn[kr].value),zn[kr].value="["+_i.join(" ")+"]"}}ne("<<");for(var ii=0;ii<zn.length;ii++)ne("/"+zn[ii].key+" "+zn[ii].value);ne(">>"),dn.data.length!==0&&(ne("stream"),ne(tn(dn.data)),ne("endstream"))},zo=m.__private__.putPage=function(B){var ee=B.number,we=B.data,Ae=B.objId,Ie=B.contentsObjId;Nr(Ae,!0),ne("<</Type /Page"),ne("/Parent "+B.rootDictionaryObjId+" 0 R"),ne("/Resources "+B.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(k(B.mediaBox.bottomLeftX))+" "+parseFloat(k(B.mediaBox.bottomLeftY))+" "+k(B.mediaBox.topRightX)+" "+k(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ne("/CropBox ["+k(B.cropBox.bottomLeftX)+" "+k(B.cropBox.bottomLeftY)+" "+k(B.cropBox.topRightX)+" "+k(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ne("/BleedBox ["+k(B.bleedBox.bottomLeftX)+" "+k(B.bleedBox.bottomLeftY)+" "+k(B.bleedBox.topRightX)+" "+k(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ne("/TrimBox ["+k(B.trimBox.bottomLeftX)+" "+k(B.trimBox.bottomLeftY)+" "+k(B.trimBox.topRightX)+" "+k(B.trimBox.topRightY)+"]"),B.artBox!==null&&ne("/ArtBox ["+k(B.artBox.bottomLeftX)+" "+k(B.artBox.bottomLeftY)+" "+k(B.artBox.topRightX)+" "+k(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ne("/UserUnit "+B.userUnit),je.publish("putPage",{objId:Ae,pageContext:zt[ee],pageNumber:ee,page:we}),ne("/Contents "+Ie+" 0 R"),ne(">>"),ne("endobj");var it=we.join(`
`);return E===j&&(it+=`
Q`),Nr(Ie,!0),fa({data:it,filters:Wa(),objectId:Ie}),ne("endobj"),Ae},vo=m.__private__.putPages=function(){var B,ee,we=[];for(B=1;B<=vn;B++)zt[B].objId=sr(),zt[B].contentsObjId=sr();for(B=1;B<=vn;B++)we.push(zo({number:B,data:Ce[B],objId:zt[B].objId,contentsObjId:zt[B].contentsObjId,mediaBox:zt[B].mediaBox,cropBox:zt[B].cropBox,bleedBox:zt[B].bleedBox,trimBox:zt[B].trimBox,artBox:zt[B].artBox,userUnit:zt[B].userUnit,rootDictionaryObjId:Ys,resourceDictionaryObjId:Ta}));Nr(Ys,!0),ne("<</Type /Pages");var Ae="/Kids [";for(ee=0;ee<vn;ee++)Ae+=we[ee]+" 0 R ";ne(Ae+"]"),ne("/Count "+vn),ne(">>"),ne("endobj"),je.publish("postPutPages")},Ul=function(B){je.publish("putFont",{font:B,out:ne,newObject:en,putStream:fa}),B.isAlreadyPutted!==!0&&(B.objectNumber=en(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+_v(B.postScriptName)),ne("/Subtype /Type1"),typeof B.encoding=="string"&&ne("/Encoding /"+B.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Rc=function(B){B.objectNumber=en();var ee=[];ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Form"}),ee.push({key:"BBox",value:"["+[k(B.x),k(B.y),k(B.x+B.width),k(B.y+B.height)].join(" ")+"]"}),ee.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var we=B.pages[1].join(`
`);fa({data:we,additionalKeyValues:ee,objectId:B.objectNumber}),ne("endobj")},ha=function(B,ee){ee||(ee=21);var we=en(),Ae=(function(mt,tn){var dn,zn=[],qn=1/(tn-1);for(dn=0;dn<1;dn+=qn)zn.push(dn);if(zn.push(1),mt[0].offset!=0){var kr={offset:0,color:mt[0].color};mt.unshift(kr)}if(mt[mt.length-1].offset!=1){var _i={offset:1,color:mt[mt.length-1].color};mt.push(_i)}for(var ls="",ii=0,js=0;js<zn.length;js++){for(dn=zn[js];dn>mt[ii+1].offset;)ii++;var Gi=mt[ii].offset,Qs=(dn-Gi)/(mt[ii+1].offset-Gi),Ko=mt[ii].color,Ya=mt[ii+1].color;ls+=le(Math.round((1-Qs)*Ko[0]+Qs*Ya[0]).toString(16))+le(Math.round((1-Qs)*Ko[1]+Qs*Ya[1]).toString(16))+le(Math.round((1-Qs)*Ko[2]+Qs*Ya[2]).toString(16))}return ls.trim()})(B.colors,ee),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+ee+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fa({data:Ae,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:we}),ne("endobj"),B.objectNumber=en(),ne("<< /ShadingType "+B.type),ne("/ColorSpace /DeviceRGB");var it="/Coords ["+k(parseFloat(B.coords[0]))+" "+k(parseFloat(B.coords[1]))+" ";B.type===2?it+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3])):it+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3]))+" "+k(parseFloat(B.coords[4]))+" "+k(parseFloat(B.coords[5])),ne(it+="]"),B.matrix&&ne("/Matrix ["+B.matrix.toString()+"]"),ne("/Function "+we+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Dc=function(B,ee){var we=sr(),Ae=en();ee.push({resourcesOid:we,objectOid:Ae}),B.objectNumber=Ae;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+B.boundingBox.map(k).join(" ")+"]"}),Ie.push({key:"XStep",value:k(B.xStep)}),Ie.push({key:"YStep",value:k(B.yStep)}),Ie.push({key:"Resources",value:we+" 0 R"}),B.matrix&&Ie.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),fa({data:B.stream,additionalKeyValues:Ie,objectId:B.objectNumber}),ne("endobj")},Qf=function(B){for(var ee in B.objectNumber=en(),ne("<<"),B)switch(ee){case"opacity":ne("/ca "+R(B[ee]));break;case"stroke-opacity":ne("/CA "+R(B[ee]))}ne(">>"),ne("endobj")},Xr=function(B){Nr(B.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ee in ne("/Font <<"),Ht)Ht.hasOwnProperty(ee)&&(f===!1||f===!0&&p.hasOwnProperty(ee))&&ne("/"+ee+" "+Ht[ee].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(on).length>0){for(var ee in ne("/Shading <<"),on)on.hasOwnProperty(ee)&&on[ee]instanceof bm&&on[ee].objectNumber>=0&&ne("/"+ee+" "+on[ee].objectNumber+" 0 R");je.publish("putShadingPatternDict"),ne(">>")}})(),(function(ee){if(Object.keys(on).length>0){for(var we in ne("/Pattern <<"),on)on.hasOwnProperty(we)&&on[we]instanceof m.TilingPattern&&on[we].objectNumber>=0&&on[we].objectNumber<ee&&ne("/"+we+" "+on[we].objectNumber+" 0 R");je.publish("putTilingPatternDict"),ne(">>")}})(B.objectOid),(function(){if(Object.keys(bn).length>0){var ee;for(ee in ne("/ExtGState <<"),bn)bn.hasOwnProperty(ee)&&bn[ee].objectNumber>=0&&ne("/"+ee+" "+bn[ee].objectNumber+" 0 R");je.publish("putGStateDict"),ne(">>")}})(),(function(){for(var ee in ne("/XObject <<"),Le)Le.hasOwnProperty(ee)&&Le[ee].objectNumber>=0&&ne("/"+ee+" "+Le[ee].objectNumber+" 0 R");je.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},Zf=function(B){xn[B.fontName]=xn[B.fontName]||{},xn[B.fontName][B.fontStyle]=B.id},Lu=function(B,ee,we,Ae,Ie){var it={id:"F"+(Object.keys(Ht).length+1).toString(10),postScriptName:B,fontName:ee,fontStyle:we,encoding:Ae,isStandardFont:Ie||!1,metadata:{}};return je.publish("addFont",{font:it,instance:this}),Ht[it.id]=it,Zf(it),it.id},Ps=m.__private__.pdfEscape=m.pdfEscape=function(B,ee){return(function(we,Ae){var Ie,it,mt,tn,dn,zn,qn,kr,_i;if(mt=(Ae=Ae||{}).sourceEncoding||"Unicode",dn=Ae.outputEncoding,(Ae.autoencode||dn)&&Ht[Ot].metadata&&Ht[Ot].metadata[mt]&&Ht[Ot].metadata[mt].encoding&&(tn=Ht[Ot].metadata[mt].encoding,!dn&&Ht[Ot].encoding&&(dn=Ht[Ot].encoding),!dn&&tn.codePages&&(dn=tn.codePages[0]),typeof dn=="string"&&(dn=tn[dn]),dn)){for(qn=!1,zn=[],Ie=0,it=we.length;Ie<it;Ie++)(kr=dn[we.charCodeAt(Ie)])?zn.push(String.fromCharCode(kr)):zn.push(we[Ie]),zn[Ie].charCodeAt(0)>>8&&(qn=!0);we=zn.join("")}for(Ie=we.length;qn===void 0&&Ie!==0;)we.charCodeAt(Ie-1)>>8&&(qn=!0),Ie--;if(!qn)return we;for(zn=Ae.noBOM?[]:[254,255],Ie=0,it=we.length;Ie<it;Ie++){if((_i=(kr=we.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+we+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zn.push(_i),zn.push(kr-(_i<<8))}return String.fromCharCode.apply(void 0,zn)})(B,ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hl=m.__private__.beginPage=function(B){Ce[++vn]=[],zt[vn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},Kn(vn),J(Ce[G])},jt=function(B,ee){var we,Ae,Ie;switch(n=ee||n,typeof B=="string"&&(we=b(B.toLowerCase()),Array.isArray(we)&&(Ae=we[0],Ie=we[1])),Array.isArray(B)&&(Ae=B[0]*Yt,Ie=B[1]*Yt),isNaN(Ae)&&(Ae=i[0],Ie=i[1]),(Ae>14400||Ie>14400)&&(di.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),Ie=Math.min(14400,Ie)),i=[Ae,Ie],n.substr(0,1)){case"l":Ie>Ae&&(i=[Ie,Ae]);break;case"p":Ae>Ie&&(i=[Ie,Ae])}Hl(i),vi(Sn),ne(Dd),zp!==0&&ne(zp+" J"),qp!==0&&ne(qp+" j"),je.publish("addPage",{pageNumber:vn})},an=function(B){B>0&&B<=vn&&(Ce.splice(B,1),zt.splice(B,1),vn--,G>vn&&(G=vn),this.setPage(G))},Kn=function(B){B>0&&B<=vn&&(G=B)},nr=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ce.length-1},gi=function(B,ee,we){var Ae,Ie=void 0;return we=we||{},B=B!==void 0?B:Ht[Ot].fontName,ee=ee!==void 0?ee:Ht[Ot].fontStyle,Ae=B.toLowerCase(),xn[Ae]!==void 0&&xn[Ae][ee]!==void 0?Ie=xn[Ae][ee]:xn[B]!==void 0&&xn[B][ee]!==void 0?Ie=xn[B][ee]:we.disableWarning===!1&&di.warn("Unable to look up font label for font '"+B+"', '"+ee+"'. Refer to getFontList() for available fonts."),Ie||we.noFallback||(Ie=xn.times[ee])==null&&(Ie=xn.times.normal),Ie},Ur=m.__private__.putInfo=function(){var B=en(),ee=function(Ae){return Ae};for(var we in d!==null&&(ee=ji.encryptor(B,0)),ne("<<"),ne("/Producer ("+Ps(ee("jsPDF "+mn.version))+")"),xt)xt.hasOwnProperty(we)&&xt[we]&&ne("/"+we.substr(0,1).toUpperCase()+we.substr(1)+" ("+Ps(ee(xt[we]))+")");ne("/CreationDate ("+Ps(ee(W))+")"),ne(">>"),ne("endobj")},qo=m.__private__.putCatalog=function(B){var ee=(B=B||{}).rootDictionaryObjId||Ys;switch(en(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+ee+" 0 R"),ge||(ge="fullwidth"),ge){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var we=""+ge;we.substr(we.length-1)==="%"&&(ge=parseInt(ge)/100),typeof ge=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+R(ge)+"]")}switch(qe||(qe="continuous"),qe){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}We&&ne("/PageMode /"+We),je.publish("putCatalog"),ne(">>"),ne("endobj")},ci=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(he+1)),ne("/Root "+he+" 0 R"),ne("/Info "+(he-1)+" 0 R"),d!==null&&ne("/Encrypt "+ji.oid+" 0 R"),ne("/ID [ <"+X+"> <"+X+"> ]"),ne(">>")},Ms=m.__private__.putHeader=function(){ne("%PDF-"+v),ne("%")},Rs=m.__private__.putXRef=function(){var B="0000000000";ne("xref"),ne("0 "+(he+1)),ne("0000000000 65535 f ");for(var ee=1;ee<=he;ee++)typeof me[ee]=="function"?ne((B+me[ee]()).slice(-10)+" 00000 n "):me[ee]!==void 0?ne((B+me[ee]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Oa=m.__private__.buildDocument=function(){var B;he=0,de=0,xe=[],me=[],Ne=[],Ys=sr(),Ta=sr(),J(xe),je.publish("buildDocument"),Ms(),vo(),(function(){je.publish("putAdditionalObjects");for(var we=0;we<Ne.length;we++){var Ae=Ne[we];Nr(Ae.objId,!0),ne(Ae.content),ne("endobj")}je.publish("postPutAdditionalObjects")})(),B=[],(function(){for(var we in Ht)Ht.hasOwnProperty(we)&&(f===!1||f===!0&&p.hasOwnProperty(we))&&Ul(Ht[we])})(),(function(){var we;for(we in bn)bn.hasOwnProperty(we)&&Qf(bn[we])})(),(function(){for(var we in Le)Le.hasOwnProperty(we)&&Rc(Le[we])})(),(function(we){var Ae;for(Ae in on)on.hasOwnProperty(Ae)&&(on[Ae]instanceof bm?ha(on[Ae]):on[Ae]instanceof Bv&&Dc(on[Ae],we))})(B),je.publish("putResources"),B.forEach(Xr),Xr({resourcesOid:Ta,objectOid:Number.MAX_SAFE_INTEGER}),je.publish("postPutResources"),d!==null&&(ji.oid=en(),ne("<<"),ne("/Filter /Standard"),ne("/V "+ji.v),ne("/R "+ji.r),ne("/U <"+ji.toHexString(ji.U)+">"),ne("/O <"+ji.toHexString(ji.O)+">"),ne("/P "+ji.P),ne(">>"),ne("endobj")),Ur(),qo();var ee=de;return Rs(),ci(),ne("startxref"),ne(""+ee),ne("%%EOF"),J(Ce[G]),xe.join(`
`)},Ka=m.__private__.getBlob=function(B){return new Blob([dt(B)],{type:"application/pdf"})},Xs=m.output=m.__private__.output=(On=function(B,ee){switch(typeof(ee=ee||{})=="string"?ee={filename:ee}:ee.filename=ee.filename||"generated.pdf",B){case void 0:return Oa();case"save":m.save(ee.filename);break;case"arraybuffer":return dt(Oa());case"blob":return Ka(Oa());case"bloburi":case"bloburl":if(Vn.URL!==void 0&&typeof Vn.URL.createObjectURL=="function")return Vn.URL&&Vn.URL.createObjectURL(Ka(Oa()))||void 0;di.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var we="",Ae=Oa();try{we=ZH(Ae)}catch{we=ZH(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+ee.filename+";base64,"+we;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vn)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",it=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ee.pdfObjectUrl&&(Ie=ee.pdfObjectUrl,it="");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+it+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ee)+");<\/script></body></html>",tn=Vn.open();return tn!==null&&tn.document.write(mt),tn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vn)==="[object Window]"){var dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ee.filename+'" width="500px" height="400px" /></body></html>',zn=Vn.open();if(zn!==null){zn.document.write(dn);var qn=this;zn.document.documentElement.querySelector("#pdfViewer").onload=function(){zn.document.title=ee.filename,zn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qn.output("bloburl"))}}return zn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ee)+'"></iframe></body></html>',_i=Vn.open();if(_i!==null&&(_i.document.write(kr),_i.document.title=ee.filename),_i||typeof safari>"u")return _i;break;case"datauri":case"dataurl":return Vn.document.location.href=this.output("datauristring",ee);default:return null}},On.foo=function(){try{return On.apply(this,arguments)}catch(we){var B=we.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ee="Error in function "+B.split(`
`)[0].split("<")[0]+": "+we.message;if(!Vn.console)throw new Error(ee);Vn.console.error(ee,we),Vn.alert&&alert(ee)}},On.foo.bar=On,On.foo),Ic=function(B){return Array.isArray(se)===!0&&se.indexOf(B)>-1};switch(r){case"pt":Yt=1;break;case"mm":Yt=72/25.4;break;case"cm":Yt=72/2.54;break;case"in":Yt=72;break;case"px":Yt=Ic("px_scaling")==1?.75:96/72;break;case"pc":case"em":Yt=12;break;case"ex":Yt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Yt=r}var ji=null;Q(),V();var Lc=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zt[B].objId,pageNumber:B,pageContext:zt[B]}},Jf=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ee in zt)if(zt[ee].objId===B)break;return Lc(ee)},Vl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:zt[G].objId,pageNumber:G,pageContext:zt[G]}};m.addPage=function(){return jt.apply(this,arguments),this},m.setPage=function(){return Kn.apply(this,arguments),J.call(this,Ce[G]),this},m.insertPage=function(B){return this.addPage(),this.movePage(G,B),this},m.movePage=function(B,ee){var we,Ae;if(B>ee){we=Ce[B],Ae=zt[B];for(var Ie=B;Ie>ee;Ie--)Ce[Ie]=Ce[Ie-1],zt[Ie]=zt[Ie-1];Ce[ee]=we,zt[ee]=Ae,this.setPage(ee)}else if(B<ee){we=Ce[B],Ae=zt[B];for(var it=B;it<ee;it++)Ce[it]=Ce[it+1],zt[it]=zt[it+1];Ce[ee]=we,zt[ee]=Ae,this.setPage(ee)}return this},m.deletePage=function(){return an.apply(this,arguments),this},m.__private__.text=m.text=function(B,ee,we,Ae,Ie){var it,mt,tn,dn,zn,qn,kr,_i,ls,ii=(Ae=Ae||{}).scope||this;if(typeof B=="number"&&typeof ee=="number"&&(typeof we=="string"||Array.isArray(we))){var js=we;we=ee,ee=B,B=js}if(arguments[3]instanceof Dt==0?(tn=arguments[4],dn=arguments[5],ri(kr=arguments[3])==="object"&&kr!==null||(typeof tn=="string"&&(dn=tn,tn=null),typeof kr=="string"&&(dn=kr,kr=null),typeof kr=="number"&&(tn=kr,kr=null),Ae={flags:kr,angle:tn,align:dn})):(C("The transform parameter of text() with a Matrix value"),ls=Ie),isNaN(ee)||isNaN(we)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return ii;var Gi,Qs="",Ko=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:Vt,Ya=ii.internal.scaleFactor;function Mg(Tr){return Tr=Tr.split("	").join(Array(Ae.TabLen||9).join(" ")),Ps(Tr,kr)}function Bu(Tr){for(var Hr,Bi=Tr.concat(),cs=[],xl=Bi.length;xl--;)typeof(Hr=Bi.shift())=="string"?cs.push(Hr):Array.isArray(Tr)&&(Hr.length===1||Hr[1]===void 0&&Hr[2]===void 0)?cs.push(Hr[0]):cs.push([Hr[0],Hr[1],Hr[2]]);return cs}function Bd(Tr,Hr){var Bi;if(typeof Tr=="string")Bi=Hr(Tr)[0];else if(Array.isArray(Tr)){for(var cs,xl,Kp=Tr.concat(),lh=[],Kc=Kp.length;Kc--;)typeof(cs=Kp.shift())=="string"?lh.push(Hr(cs)[0]):Array.isArray(cs)&&typeof cs[0]=="string"&&(xl=Hr(cs[0],cs[1],cs[2]),lh.push([xl[0],xl[1],xl[2]]));Bi=lh}return Bi}var $u=!1,$d=!0;if(typeof B=="string")$u=!0;else if(Array.isArray(B)){var zu=B.concat();mt=[];for(var zd,ma=zu.length;ma--;)(typeof(zd=zu.shift())!="string"||Array.isArray(zd)&&typeof zd[0]!="string")&&($d=!1);$u=$d}if($u===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var qd=Ve/ii.internal.scaleFactor,Ud=qd*(Ko-1);switch(Ae.baseline){case"bottom":we-=Ud;break;case"top":we+=qd-Ud;break;case"hanging":we+=qd-2*Ud;break;case"middle":we+=qd/2-Ud}if((qn=Ae.maxWidth||0)>0&&(typeof B=="string"?B=ii.splitTextToSize(B,qn):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(Tr,Hr){return Tr.concat(ii.splitTextToSize(Hr,qn))},[]))),it={text:B,x:ee,y:we,options:Ae,mutex:{pdfEscape:Ps,activeFontKey:Ot,fonts:Ht,activeFontSize:Ve}},je.publish("preProcessText",it),B=it.text,tn=(Ae=it.options).angle,ls instanceof Dt==0&&tn&&typeof tn=="number"){tn*=Math.PI/180,Ae.rotationDirection===0&&(tn=-tn),E===j&&(tn=-tn);var Vp=Math.cos(tn),Wp=Math.sin(tn);ls=new Dt(Vp,Wp,-Wp,Vp,0,0)}else tn&&tn instanceof Dt&&(ls=tn);E!==j||ls||(ls=At),(zn=Ae.charSpace||gl)!==void 0&&(Qs+=k(L(zn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_i=Ae.horizontalScale)!==void 0&&(Qs+=k(100*_i)+` Tz
`),Ae.lang;var Li=-1,vl=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,Yl=ii.internal.getCurrentPageInfo().pageContext;switch(vl){case 0:case!1:case"fill":Li=0;break;case 1:case!0:case"stroke":Li=1;break;case 2:case"fillThenStroke":Li=2;break;case 3:case"invisible":Li=3;break;case 4:case"fillAndAddForClipping":Li=4;break;case 5:case"strokeAndAddPathForClipping":Li=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Li=6;break;case 7:case"addToPathForClipping":Li=7}var Rg=Yl.usedRenderingMode!==void 0?Yl.usedRenderingMode:-1;Li!==-1?Qs+=Li+` Tr
`:Rg!==-1&&(Qs+=`0 Tr
`),Li!==-1&&(Yl.usedRenderingMode=Li),dn=Ae.align||"left";var bo,qu=Ve*Ko,ih=ii.internal.pageSize.getWidth(),sh=Ht[Ot];zn=Ae.charSpace||gl,qn=Ae.maxWidth||0,kr=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var Uc=[],Go=function(Tr){return ii.getStringUnitWidth(Tr,{font:sh,charSpace:zn,fontSize:Ve,doKerning:!1})*Ve/Ya};if(Object.prototype.toString.call(B)==="[object Array]"){var wo;mt=Bu(B),dn!=="left"&&(bo=mt.map(Go));var No,Uu=0;if(dn==="right"){ee-=bo[0],B=[],ma=mt.length;for(var Xl=0;Xl<ma;Xl++)Xl===0?(No=xo(ee),wo=$c(we)):(No=L(Uu-bo[Xl]),wo=-qu),B.push([mt[Xl],No,wo]),Uu=bo[Xl]}else if(dn==="center"){ee-=bo[0]/2,B=[],ma=mt.length;for(var Hc=0;Hc<ma;Hc++)Hc===0?(No=xo(ee),wo=$c(we)):(No=L((Uu-bo[Hc])/2),wo=-qu),B.push([mt[Hc],No,wo]),Uu=bo[Hc]}else if(dn==="left"){B=[],ma=mt.length;for(var Vc=0;Vc<ma;Vc++)B.push(mt[Vc])}else if(dn==="justify"&&sh.encoding==="Identity-H"){B=[],ma=mt.length,qn=qn!==0?qn:ih;for(var Ql=0,Yi=0;Yi<ma;Yi++)if(wo=Yi===0?$c(we):-qu,No=Yi===0?xo(ee):Ql,Yi<ma-1){var Hd=L((qn-bo[Yi])/(mt[Yi].split(" ").length-1)),Zl=mt[Yi].split(" ");B.push([Zl[0]+" ",No,wo]),Ql=0;for(var yl=1;yl<Zl.length;yl++){var Vd=(Go(Zl[yl-1]+" "+Zl[yl])-Go(Zl[yl]))*Ya+Hd;yl==Zl.length-1?B.push([Zl[yl],Vd,0]):B.push([Zl[yl]+" ",Vd,0]),Ql-=Vd}}else B.push([mt[Yi],No,wo]);B.push(["",Ql,0])}else{if(dn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ma=mt.length,qn=qn!==0?qn:ih,Yi=0;Yi<ma;Yi++){wo=Yi===0?$c(we):-qu,No=Yi===0?xo(ee):0;var Wd=mt[Yi].split(" ").length-1,ah=Wd>0?(qn-bo[Yi])/Wd:0;Yi<ma-1?Uc.push(k(L(ah))):Uc.push(0),B.push([mt[Yi],No,wo])}}}(typeof Ae.R2L=="boolean"?Ae.R2L:ke)===!0&&(B=Bd(B,function(Tr,Hr,Bi){return[Tr.split("").reverse().join(""),Hr,Bi]})),it={text:B,x:ee,y:we,options:Ae,mutex:{pdfEscape:Ps,activeFontKey:Ot,fonts:Ht,activeFontSize:Ve}},je.publish("postProcessText",it),B=it.text,Gi=it.mutex.isHex||!1;var oh=Ht[Ot].encoding;oh!=="WinAnsiEncoding"&&oh!=="StandardEncoding"||(B=Bd(B,function(Tr,Hr,Bi){return[Mg(Tr),Hr,Bi]})),mt=Bu(B),B=[];for(var Wc,Hu,Vu,Kd=Array.isArray(mt[0])?1:0,Wu="",Gd=function(Tr,Hr,Bi){var cs="";return Bi instanceof Dt?(Bi=typeof Ae.angle=="number"?wt(Bi,new Dt(1,0,0,1,Tr,Hr)):wt(new Dt(1,0,0,1,Tr,Hr),Bi),E===j&&(Bi=wt(new Dt(1,0,0,-1,0,0),Bi)),cs=Bi.join(" ")+` Tm
`):cs=k(Tr)+" "+k(Hr)+` Td
`,cs},Fi=0;Fi<mt.length;Fi++){switch(Wu="",Kd){case 1:Vu=(Gi?"<":"(")+mt[Fi][0]+(Gi?">":")"),Wc=parseFloat(mt[Fi][1]),Hu=parseFloat(mt[Fi][2]);break;case 0:Vu=(Gi?"<":"(")+mt[Fi]+(Gi?">":")"),Wc=xo(ee),Hu=$c(we)}Uc!==void 0&&Uc[Fi]!==void 0&&(Wu=Uc[Fi]+` Tw
`),Fi===0?B.push(Wu+Gd(Wc,Hu,ls)+Vu):Kd===0?B.push(Wu+Vu):Kd===1&&B.push(Wu+Gd(Wc,Hu,ls)+Vu)}B=Kd===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Xa=`BT
/`;return Xa+=Ot+" "+Ve+` Tf
`,Xa+=k(Ve*Ko)+` TL
`,Xa+=ml+`
`,Xa+=Qs,Xa+=B,ne(Xa+="ET"),p[Ot]=!0,ii};var Wl=m.__private__.clip=m.clip=function(B){return ne(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Wl("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var Ki=m.__private__.isValidStyle=function(B){var ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ee=!0),ee};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return Ki(B)&&(u=B),this};var Fu=m.__private__.getStyle=m.getStyle=function(B){var ee=u;switch(B){case"D":case"S":ee="S";break;case"F":ee="f";break;case"FD":case"DF":ee="B";break;case"f":case"f*":case"B":case"B*":ee=B}return ee},dr=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(B){return wn("f",B),this},m.fillEvenOdd=function(B){return wn("f*",B),this},m.fillStroke=function(B){return wn("B",B),this},m.fillStrokeEvenOdd=function(B){return wn("B*",B),this};var wn=function(B,ee){ri(ee)==="object"?Ar(ee,B):ne(B)},Fc=function(B){B===null||E===j&&B===void 0||(B=Fu(B),ne(B))};function Ei(B,ee,we,Ae,Ie){var it=new Bv(ee||this.boundingBox,we||this.xStep,Ae||this.yStep,this.gState,Ie||this.matrix);it.stream=this.stream;var mt=B+"$$"+this.cloneIndex+++"$$";return Bt(mt,it),it}var Ar=function(B,ee){var we=Cn[B.key],Ae=on[we];if(Ae instanceof bm)ne("q"),ne(Bc(ee)),Ae.gState&&m.setGState(Ae.gState),ne(B.matrix.toString()+" cm"),ne("/"+we+" sh"),ne("Q");else if(Ae instanceof Bv){var Ie=new Dt(1,0,0,-1,0,Wo());B.matrix&&(Ie=Ie.multiply(B.matrix||At),we=Ei.call(Ae,B.key,B.boundingBox,B.xStep,B.yStep,Ie).id),ne("q"),ne("/Pattern cs"),ne("/"+we+" scn"),Ae.gState&&m.setGState(Ae.gState),ne(ee),ne("Q")}},Bc=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ga=m.moveTo=function(B,ee){return ne(k(L(B))+" "+k(z(ee))+" m"),this},yo=m.lineTo=function(B,ee){return ne(k(L(B))+" "+k(z(ee))+" l"),this},Pa=m.curveTo=function(B,ee,we,Ae,Ie,it){return ne([k(L(B)),k(z(ee)),k(L(we)),k(z(Ae)),k(L(Ie)),k(z(it)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,ee,we,Ae,Ie){if(isNaN(B)||isNaN(ee)||isNaN(we)||isNaN(Ae)||!Ki(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return E===S?this.lines([[we-B,Ae-ee]],B,ee,[1,1],Ie||"S"):this.lines([[we-B,Ae-ee]],B,ee,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,ee,we,Ae,Ie,it){var mt,tn,dn,zn,qn,kr,_i,ls,ii,js,Gi,Qs;if(typeof B=="number"&&(Qs=we,we=ee,ee=B,B=Qs),Ae=Ae||[1,1],it=it||!1,isNaN(ee)||isNaN(we)||!Array.isArray(B)||!Array.isArray(Ae)||!Ki(Ie)||typeof it!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ga(ee,we),mt=Ae[0],tn=Ae[1],zn=B.length,js=ee,Gi=we,dn=0;dn<zn;dn++)(qn=B[dn]).length===2?(js=qn[0]*mt+js,Gi=qn[1]*tn+Gi,yo(js,Gi)):(kr=qn[0]*mt+js,_i=qn[1]*tn+Gi,ls=qn[2]*mt+js,ii=qn[3]*tn+Gi,js=qn[4]*mt+js,Gi=qn[5]*tn+Gi,Pa(kr,_i,ls,ii,js,Gi));return it&&dr(),Fc(Ie),this},m.path=function(B){for(var ee=0;ee<B.length;ee++){var we=B[ee],Ae=we.c;switch(we.op){case"m":Ga(Ae[0],Ae[1]);break;case"l":yo(Ae[0],Ae[1]);break;case"c":Pa.apply(this,Ae);break;case"h":dr()}}return this},m.__private__.rect=m.rect=function(B,ee,we,Ae,Ie){if(isNaN(B)||isNaN(ee)||isNaN(we)||isNaN(Ae)||!Ki(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return E===S&&(Ae=-Ae),ne([k(L(B)),k(z(ee)),k(L(we)),k(L(Ae)),"re"].join(" ")),Fc(Ie),this},m.__private__.triangle=m.triangle=function(B,ee,we,Ae,Ie,it,mt){if(isNaN(B)||isNaN(ee)||isNaN(we)||isNaN(Ae)||isNaN(Ie)||isNaN(it)||!Ki(mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[we-B,Ae-ee],[Ie-we,it-Ae],[B-Ie,ee-it]],B,ee,[1,1],mt,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,ee,we,Ae,Ie,it,mt){if(isNaN(B)||isNaN(ee)||isNaN(we)||isNaN(Ae)||isNaN(Ie)||isNaN(it)||!Ki(mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tn=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*we),it=Math.min(it,.5*Ae),this.lines([[we-2*Ie,0],[Ie*tn,0,Ie,it-it*tn,Ie,it],[0,Ae-2*it],[0,it*tn,-Ie*tn,it,-Ie,it],[2*Ie-we,0],[-Ie*tn,0,-Ie,-it*tn,-Ie,-it],[0,2*it-Ae],[0,-it*tn,Ie*tn,-it,Ie,-it]],B+Ie,ee,[1,1],mt,!0),this},m.__private__.ellipse=m.ellipse=function(B,ee,we,Ae,Ie){if(isNaN(B)||isNaN(ee)||isNaN(we)||isNaN(Ae)||!Ki(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var it=4/3*(Math.SQRT2-1)*we,mt=4/3*(Math.SQRT2-1)*Ae;return Ga(B+we,ee),Pa(B+we,ee-mt,B+it,ee-Ae,B,ee-Ae),Pa(B-it,ee-Ae,B-we,ee-mt,B-we,ee),Pa(B-we,ee+mt,B-it,ee+Ae,B,ee+Ae),Pa(B+it,ee+Ae,B+we,ee+mt,B+we,ee),Fc(Ie),this},m.__private__.circle=m.circle=function(B,ee,we,Ae){if(isNaN(B)||isNaN(ee)||isNaN(we)||!Ki(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ee,we,we,Ae)},m.setFont=function(B,ee,we){return we&&(ee=O(ee,we)),Ot=gi(B,ee,{disableWarning:!1}),this};var Mt=m.__private__.getFont=m.getFont=function(){return Ht[gi.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,ee,we={};for(B in xn)if(xn.hasOwnProperty(B))for(ee in we[B]=[],xn[B])xn[B].hasOwnProperty(ee)&&we[B].push(ee);return we},m.addFont=function(B,ee,we,Ae,Ie){var it=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&it.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&it.indexOf(arguments[3])==-1&&(we=O(we,Ae)),Lu.call(this,B,ee,we,Ie=Ie||"Identity-H")};var Vt,Sn=t.lineWidth||.200025,Ft=m.__private__.getLineWidth=m.getLineWidth=function(){return Sn},vi=m.__private__.setLineWidth=m.setLineWidth=function(B){return Sn=B,ne(k(L(B))+" w"),this};m.__private__.setLineDash=mn.API.setLineDash=mn.API.setLineDashPattern=function(B,ee){if(B=B||[],ee=ee||0,isNaN(ee)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(we){return k(L(we))}).join(" "),ee=k(L(ee)),ne("["+B+"] "+ee+" d"),this};var as=m.__private__.getLineHeight=m.getLineHeight=function(){return Ve*Vt};m.__private__.getLineHeight=m.getLineHeight=function(){return Ve*Vt};var Bp=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Vt=B),this},eh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Vt};Bp(t.lineHeight);var xo=m.__private__.getHorizontalCoordinate=function(B){return L(B)},$c=m.__private__.getVerticalCoordinate=function(B){return E===j?B:zt[G].mediaBox.topRightY-zt[G].mediaBox.bottomLeftY-L(B)},Pg=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return k(xo(B))},th=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return k($c(B))},Dd=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return $o(Dd)},m.__private__.setStrokeColor=m.setDrawColor=function(B,ee,we,Ae){return Dd=Ss({ch1:B,ch2:ee,ch3:we,ch4:Ae,pdfColorType:"draw",precision:2}),ne(Dd),this};var $p=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return $o($p)},m.__private__.setFillColor=m.setFillColor=function(B,ee,we,Ae){return $p=Ss({ch1:B,ch2:ee,ch3:we,ch4:Ae,pdfColorType:"fill",precision:2}),ne($p),this};var ml=t.textColor||"0 g",Kl=m.__private__.getTextColor=m.getTextColor=function(){return $o(ml)};m.__private__.setTextColor=m.setTextColor=function(B,ee,we,Ae){return ml=Ss({ch1:B,ch2:ee,ch3:we,ch4:Ae,pdfColorType:"text",precision:3}),this};var gl=t.charSpace,nh=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(gl||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return gl=B,this};var zp=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var ee=m.CapJoinStyles[B];if(ee===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zp=ee,ne(ee+" J"),this};var qp=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var ee=m.CapJoinStyles[B];if(ee===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qp=ee,ne(ee+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(k(L(B))+" M"),this},m.GState=zS,m.setGState=function(B){(B=typeof B=="string"?bn[Cr[B]]:zc(null,B)).equals(ur)||(ne("/"+B.id+" gs"),ur=B)};var zc=function(B,ee){if(!B||!Cr[B]){var we=!1;for(var Ae in bn)if(bn.hasOwnProperty(Ae)&&bn[Ae].equals(ee)){we=!0;break}if(we)ee=bn[Ae];else{var Ie="GS"+(Object.keys(bn).length+1).toString(10);bn[Ie]=ee,ee.id=Ie}return B&&(Cr[B]=ee.id),je.publish("addGState",ee),ee}};m.addGState=function(B,ee){return zc(B,ee),this},m.saveGraphicsState=function(){return ne("q"),ir.push({key:Ot,size:Ve,color:ml}),this},m.restoreGraphicsState=function(){ne("Q");var B=ir.pop();return Ot=B.key,Ve=B.size,ml=B.color,ur=null,this},m.setCurrentTransformationMatrix=function(B){return ne(B.toString()+" cm"),this},m.comment=function(B){return ne("#"+B),this};var Gl=function(B,ee){var we=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return we},set:function(it){isNaN(it)||(we=parseFloat(it))}});var Ae=ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(it){isNaN(it)||(Ae=parseFloat(it))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(it){Ie=it.toString()}}),this},Id=function(B,ee,we,Ae){Gl.call(this,B,ee),this.type="rect";var Ie=we||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(mt){isNaN(mt)||(Ie=parseFloat(mt))}});var it=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return it},set:function(mt){isNaN(mt)||(it=parseFloat(mt))}}),this},Ld=function(){this.page=vn,this.currentPage=G,this.pages=Ce.slice(0),this.pagesContext=zt.slice(0),this.x=Ct,this.y=$n,this.matrix=Pn,this.width=Fd(G),this.height=Ho(G),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Ld.prototype.restore=function(){vn=this.page,G=this.currentPage,zt=this.pagesContext,Ce=this.pages,Ct=this.x,$n=this.y,Pn=this.matrix,Up(G,this.width),Vo(G,this.height),Pe=this.outputDestination};var Uo=function(B,ee,we,Ae,Ie){Tn.push(new Ld),vn=G=0,Ce=[],Ct=B,$n=ee,Pn=Ie,Hl([we,Ae])};for(var qc in m.beginFormObject=function(B,ee,we,Ae,Ie){return Uo(B,ee,we,Ae,Ie),this},m.endFormObject=function(B){return(function(ee){if(St[ee])Tn.pop().restore();else{var we=new Ld,Ae="Xo"+(Object.keys(Le).length+1).toString(10);we.id=Ae,St[ee]=Ae,Le[Ae]=we,je.publish("addFormObject",we),Tn.pop().restore()}})(B),this},m.doFormObject=function(B,ee){var we=Le[St[B]];return ne("q"),ne(ee.toString()+" cm"),ne("/"+we.id+" Do"),ne("Q"),this},m.getFormObject=function(B){var ee=Le[St[B]];return{x:ee.x,y:ee.y,width:ee.width,height:ee.height,matrix:ee.matrix}},m.save=function(B,ee){return B=B||"generated.pdf",(ee=ee||{}).returnPromise=ee.returnPromise||!1,ee.returnPromise===!1?(xm(Ka(Oa()),B),typeof xm.unload=="function"&&Vn.setTimeout&&setTimeout(xm.unload,911),this):new Promise(function(we,Ae){try{var Ie=xm(Ka(Oa()),B);typeof xm.unload=="function"&&Vn.setTimeout&&setTimeout(xm.unload,911),we(Ie)}catch(it){Ae(it.message)}})},mn.API)mn.API.hasOwnProperty(qc)&&(qc==="events"&&mn.API.events.length?(function(B,ee){var we,Ae,Ie;for(Ie=ee.length-1;Ie!==-1;Ie--)we=ee[Ie][0],Ae=ee[Ie][1],B.subscribe.apply(B,[we].concat(typeof Ae=="function"?[Ae]:Ae))})(je,mn.API.events):m[qc]=mn.API[qc]);function Fd(B){return zt[B].mediaBox.topRightX-zt[B].mediaBox.bottomLeftX}function Up(B,ee){zt[B].mediaBox.topRightX=ee+zt[B].mediaBox.bottomLeftX}function Ho(B){return zt[B].mediaBox.topRightY-zt[B].mediaBox.bottomLeftY}function Vo(B,ee){zt[B].mediaBox.topRightY=ee+zt[B].mediaBox.bottomLeftY}var Hp=m.getPageWidth=function(B){return Fd(B=B||G)/Yt},pa=m.setPageWidth=function(B,ee){Up(B,ee*Yt)},Wo=m.getPageHeight=function(B){return Ho(B=B||G)/Yt},rh=m.setPageHeight=function(B,ee){Vo(B,ee*Yt)};return m.internal={pdfEscape:Ps,getStyle:Fu,getFont:Mt,getFontSize:Se,getCharSpace:nh,getTextColor:Kl,getLineHeight:as,getLineHeightFactor:eh,getLineWidth:Ft,write:Re,getHorizontalCoordinate:xo,getVerticalCoordinate:$c,getCoordinateString:Pg,getVerticalCoordinateString:th,collections:{},newObject:en,newAdditionalObject:Ii,newObjectDeferred:sr,newObjectDeferredBegin:Nr,getFilters:Wa,putStream:fa,events:je,scaleFactor:Yt,pageSize:{getWidth:function(){return Hp(G)},setWidth:function(B){pa(G,B)},getHeight:function(){return Wo(G)},setHeight:function(B){rh(G,B)}},encryptionOptions:d,encryption:ji,getEncryptor:function(B){return d!==null?ji.encryptor(B,0):function(ee){return ee}},output:Xs,getNumberOfPages:nr,pages:Ce,out:ne,f2:R,f3:D,getPageInfo:Lc,getPageInfoByObjId:Jf,getCurrentPageInfo:Vl,getPDFVersion:y,Point:Gl,Rectangle:Id,Matrix:Dt,hasHotfix:Ic},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Hp(G)},set:function(B){pa(G,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Wo(G)},set:function(B){rh(G,B)},enumerable:!0,configurable:!0}),(function(B){for(var ee=0,we=et.length;ee<we;ee++){var Ae=Lu.call(this,B[ee][0],B[ee][1],B[ee][2],et[ee][3],!0);f===!1&&(p[Ae]=!0);var Ie=B[ee][0].split("-");Zf({id:Ae,fontName:Ie[0],fontStyle:Ie[1]||""})}je.publish("addFonts",{fonts:Ht,dictionary:xn})}).call(m,et),Ot="F1",jt(i,n),je.publish("initialized"),m}Ev.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ev.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ev.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ev.prototype.processOwnerPassword=function(t,e){return YR(GR(e).substr(0,5),t)},Ev.prototype.encryptor=function(t,e){var n=GR(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return YR(n,r)}},zS.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||ri(t)!==ri(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},mn.API={events:[]},mn.version="3.0.3";var ms=mn.API,IL=1,Tg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pv=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qn=function(t){return t.toFixed(2)},Oh=function(t){return t.toFixed(5)};ms.__acroform__={};var pl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},nV=function(t){return t*IL},ed=function(t){var e=new Rse,n=sn.internal.getHeight(t)||0,r=sn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Qn(r)),Number(Qn(n))],e},o7e=ms.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},l7e=ms.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},c7e=ms.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ks=ms.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return c7e(t,e-1)},Ts=ms.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return o7e(t,e-1)},Os=ms.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return l7e(t,e-1)},u7e=ms.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(s)||0,[Number(Qn(c.lowerLeft_X)),Number(Qn(c.lowerLeft_Y)),Number(Qn(c.upperRight_X)),Number(Qn(c.upperRight_Y))]},d7e=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=XR(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Qn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ed(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},XR=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,o=sn.internal.getHeight(t)||0;o=o<0?-o:o;var l=sn.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(R,D,L){if(R+1<i.length){var z=D+" "+i[R+1][0];return u2(z,t,L).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=u2("3",t,s).height,p=t.multiline?o-s:(o-f)/2,m=p+=2,v=0,y=0,x=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+u2(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",S=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var E=!1;if(i[j].length!==1&&x!==i[j].length-1){if((f+2)*(S+2)+2>o)continue e;b+=i[j][x],E=!0,y=j,j--}else{b=(b+=i[j][x]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var A=parseInt(j),P=c(A,b,s),O=j>=i.length-1;if(P&&!O){b+=" ",x=0;continue}if(P||O){if(O)y=A;else if(t.multiline&&(f+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(S+2)+2>o)continue e;y=A}}for(var k="",C=v;C<=y;C++){var I=i[C];if(t.multiline){if(C===y){k+=I[x]+" ",x=(x+1)%I.length;continue}if(C===v){k+=I[I.length-1]+" ";continue}}k+=I[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,d=u2(k,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=Qn(u)+" "+Qn(m)+` Td
`,e+="("+Tg(k)+`) Tj
`,e+=-Qn(u)+` 0 Td
`,m=-(s+2),d=0,v=E?y:y+1,S++,b=""}break}return r.text=e,r.fontSize=s,r},u2=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},f7e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},h7e=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},p7e=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Mu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(f7e)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");IL=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Dse,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&h7e(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=u7e(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=sn.createDefaultAppearanceStream(l),ri(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=d7e(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var m=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var v=m[o];typeof v=="function"&&(v=v.call(i,l)),f+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(i,l)),f+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&(function(y,x){for(var b in y)if(y.hasOwnProperty(b)){var S=b,j=y[b];x.internal.newObjectDeferredBegin(j.objId,!0),ri(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete y[S]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Mse=ms.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),ri(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Tg(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kO=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Tg(r(t))+")"},dd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dd.prototype.toString=function(){return this.objId+" 0 R"},dd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},dd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Mse(i,this.objId,this.scope)}):i instanceof dd?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Rse=function(){dd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};pl(Rse,dd);var Dse=function(){dd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Tg(n(t))+")"}},set:function(n){t=n}})};pl(Dse,dd);var Mu=function t(){dd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ks(e,3)},set:function(b){b?this.F=Ts(e,3):this.F=Os(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof qS)return;s="FieldObject"+t.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Tg(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/IL:u},set:function(b){u=b}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(b){d=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof qS||this instanceof Fm))return kO(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ja==0?kO(p,this.objId,this.scope):p},set:function(b){b=b.toString(),p=this instanceof ja==0?b.substr(0,1)==="("?pv(b.substr(1,b.length-2)):pv(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja==1?pv(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof ja==1?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ja==0?kO(m,this.objId,this.scope):m},set:function(b){b=b.toString(),m=this instanceof ja==0?b.substr(0,1)==="("?pv(b.substr(1,b.length-2)):pv(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja==1?pv(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof ja==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b=!!b,y=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(b){v=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,1)},set:function(b){b?this.Ff=Ts(this.Ff,1):this.Ff=Os(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,2)},set:function(b){b?this.Ff=Ts(this.Ff,2):this.Ff=Os(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,3)},set:function(b){b?this.Ff=Ts(this.Ff,3):this.Ff=Os(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');x=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(x){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};pl(Mu,dd);var Zv=function(){Mu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Mse(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,18)},set:function(n){n?this.Ff=Ts(this.Ff,18):this.Ff=Os(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ts(this.Ff,19):this.Ff=Os(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,20)},set:function(n){n?(this.Ff=Ts(this.Ff,20),e.sort()):this.Ff=Os(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,22)},set:function(n){n?this.Ff=Ts(this.Ff,22):this.Ff=Os(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,23)},set:function(n){n?this.Ff=Ts(this.Ff,23):this.Ff=Os(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,27)},set:function(n){n?this.Ff=Ts(this.Ff,27):this.Ff=Os(this.Ff,27)}}),this.hasAppearanceStream=!1};pl(Zv,Mu);var Jv=function(){Zv.call(this),this.fontName="helvetica",this.combo=!1};pl(Jv,Zv);var ey=function(){Jv.call(this),this.combo=!0};pl(ey,Jv);var Y2=function(){ey.call(this),this.edit=!0};pl(Y2,ey);var ja=function(){Mu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,15)},set:function(n){n?this.Ff=Ts(this.Ff,15):this.Ff=Os(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,16)},set:function(n){n?this.Ff=Ts(this.Ff,16):this.Ff=Os(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,17)},set:function(n){n?this.Ff=Ts(this.Ff,17):this.Ff=Os(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,26)},set:function(n){n?this.Ff=Ts(this.Ff,26):this.Ff=Os(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Tg(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){ri(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};pl(ja,Mu);var X2=function(){ja.call(this),this.pushButton=!0};pl(X2,ja);var ty=function(){ja.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};pl(ty,ja);var qS=function(){var t,e;Mu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Tg(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ri(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pl(qS,Mu),ty.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ty.prototype.createOption=function(t){var e=new qS;return e.Parent=this,e.optionName=t,this.Kids.push(e),m7e.call(this.scope,e),e};var Q2=function(){ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sn.CheckBox.createAppearanceStream()};pl(Q2,ja);var Fm=function(){Mu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,13)},set:function(e){e?this.Ff=Ts(this.Ff,13):this.Ff=Os(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,21)},set:function(e){e?this.Ff=Ts(this.Ff,21):this.Ff=Os(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,23)},set:function(e){e?this.Ff=Ts(this.Ff,23):this.Ff=Os(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,24)},set:function(e){e?this.Ff=Ts(this.Ff,24):this.Ff=Os(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,25)},set:function(e){e?this.Ff=Ts(this.Ff,25):this.Ff=Os(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,26)},set:function(e){e?this.Ff=Ts(this.Ff,26):this.Ff=Os(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pl(Fm,Mu);var Z2=function(){Fm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ks(this.Ff,14)},set:function(t){t?this.Ff=Ts(this.Ff,14):this.Ff=Os(this.Ff,14)}}),this.password=!0};pl(Z2,Fm);var sn={CheckBox:{createAppearanceStream:function(){return{N:{On:sn.CheckBox.YesNormal},D:{On:sn.CheckBox.YesPushDown,Off:sn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=XR(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Qn(sn.internal.getWidth(t))+" "+Qn(sn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Qn(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=sn.internal.getHeight(t),o=sn.internal.getWidth(t),l=XR(t,t.caption);return i.push("1 g"),i.push("0 0 "+Qn(o)+" "+Qn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Qn(o-1)+" "+Qn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Qn(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qn(sn.internal.getWidth(t))+" "+Qn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Circle.YesNormal,e.D[t]=sn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=sn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Oh(sn.internal.getWidth(t)/2)+" "+Oh(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*sn.internal.Bezier_C).toFixed(5)),o=Number((r*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Oh(sn.internal.getWidth(t)/2)+" "+Oh(sn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Oh(sn.internal.getWidth(t)/2)+" "+Oh(sn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=[],r=sn.internal.getWidth(t)<=sn.internal.getHeight(t)?sn.internal.getWidth(t)/4:sn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*sn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Oh(sn.internal.getWidth(t)/2)+" "+Oh(sn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:sn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=sn.RadioButton.Cross.YesNormal,e.D[t]=sn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ed(t);e.scope=t.scope;var n=[],r=sn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Qn(sn.internal.getWidth(t)-2)+" "+Qn(sn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Qn(r.x1.x)+" "+Qn(r.x1.y)+" m"),n.push(Qn(r.x2.x)+" "+Qn(r.x2.y)+" l"),n.push(Qn(r.x4.x)+" "+Qn(r.x4.y)+" m"),n.push(Qn(r.x3.x)+" "+Qn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=sn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Qn(sn.internal.getWidth(t))+" "+Qn(sn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Qn(sn.internal.getWidth(t)-2)+" "+Qn(sn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Qn(n.x1.x)+" "+Qn(n.x1.y)+" m"),r.push(Qn(n.x2.x)+" "+Qn(n.x2.y)+" l"),r.push(Qn(n.x4.x)+" "+Qn(n.x4.y)+" m"),r.push(Qn(n.x3.x)+" "+Qn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ed(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qn(sn.internal.getWidth(t))+" "+Qn(sn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};sn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=sn.internal.getWidth(t),n=sn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},sn.internal.getWidth=function(t){var e=0;return ri(t)==="object"&&(e=nV(t.Rect[2])),e},sn.internal.getHeight=function(t){var e=0;return ri(t)==="object"&&(e=nV(t.Rect[3])),e};var m7e=ms.addField=function(t){if(p7e(this,t),!(t instanceof Mu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ms.AcroFormChoiceField=Zv,ms.AcroFormListBox=Jv,ms.AcroFormComboBox=ey,ms.AcroFormEditBox=Y2,ms.AcroFormButton=ja,ms.AcroFormPushButton=X2,ms.AcroFormRadioButton=ty,ms.AcroFormCheckBox=Q2,ms.AcroFormTextField=Fm,ms.AcroFormPasswordField=Z2,ms.AcroFormAppearance=sn,ms.AcroForm={ChoiceField:Zv,ListBox:Jv,ComboBox:ey,EditBox:Y2,Button:ja,PushButton:X2,RadioButton:ty,CheckBox:Q2,TextField:Fm,PasswordField:Z2,Appearance:sn},mn.AcroForm={ChoiceField:Zv,ListBox:Jv,ComboBox:ey,EditBox:Y2,Button:ja,PushButton:X2,RadioButton:ty,CheckBox:Q2,TextField:Fm,PasswordField:Z2,Appearance:sn};mn.AcroForm;function Ise(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(R,D){var L,z,W,X,q,V=n;if((D=D||n)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(P(R))for(q in r)for(W=r[q],L=0;L<W.length;L+=1){for(X=!0,z=0;z<W[L].length;z+=1)if(W[L][z]!==void 0&&W[L][z]!==R[z]){X=!1;break}if(X===!0){V=q;break}}else for(q in r)for(W=r[q],L=0;L<W.length;L+=1){for(X=!0,z=0;z<W[L].length;z+=1)if(W[L][z]!==void 0&&W[L][z]!==R.charCodeAt(z)){X=!1;break}if(X===!0){V=q;break}}return V===n&&D!==n&&(V=D),V},s=function R(D){for(var L=this.internal.write,z=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:D.width}),X.push({key:"Height",value:D.height}),D.colorSpace===b.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===b.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)&&D.transparency.length>0){for(var q="",V=0,Y=D.transparency.length;V<Y;V++)q+=D.transparency[V]+" "+D.transparency[V]+" ";X.push({key:"Mask",value:"["+q+"]"})}D.sMask!==void 0&&X.push({key:"SMask",value:D.objectId+1+" 0 R"});var re=D.filter!==void 0?["/"+D.filter]:void 0;if(z({data:D.data,additionalKeyValues:X,alreadyAppliedFilters:re,objectId:D.objectId}),L("endobj"),"sMask"in D&&D.sMask!==void 0){var Q,F=(Q=D.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:D.bitsPerComponent,G={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:D.sMask};"filter"in D&&(G.decodeParameters="/Predictor ".concat(D.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(D.width),G.filter=D.filter),R.call(this,G)}if(D.colorSpace===b.INDEXED){var te=this.internal.newObject();z({data:k(new Uint8Array(D.palette)),objectId:te}),L("endobj")}},o=function(){var R=this.internal.collections[e+"images"];for(var D in R)s.call(this,R[D])},l=function(){var R,D=this.internal.collections[e+"images"],L=this.internal.write;for(var z in D)L("/I"+(R=D[z]).index,R.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var R=this.internal.collections[e+"images"];return c.call(this),R},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(R){return typeof t["process"+R.toUpperCase()]=="function"},p=function(R){return ri(R)==="object"&&R.nodeType===1},m=function(R,D){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var L=""+R.getAttribute("src");if(L.indexOf("data:image/")===0)return G2(unescape(L).split("base64,").pop());var z=t.loadFile(L,!0);if(z!==void 0)return z}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var W;switch(D){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;default:W="image/jpeg"}return G2(R.toDataURL(W,1).split("base64,").pop())}},v=function(R){var D=this.internal.collections[e+"images"];if(D){for(var L in D)if(R===D[L].alias)return D[L]}},y=function(R,D,L){return R||D||(R=-96,D=-96),R<0&&(R=-1*L.width*72/R/this.internal.scaleFactor),D<0&&(D=-1*L.height*72/D/this.internal.scaleFactor),R===0&&(R=D*L.width/L.height),D===0&&(D=R*L.height/L.width),[R,D]},x=function(R,D,L,z,W,X){var q=y.call(this,L,z,W),V=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,re=u.call(this);if(L=q[0],z=q[1],re[W.index]=W,X){X*=Math.PI/180;var Q=Math.cos(X),F=Math.sin(X),G=function(le){return le.toFixed(4)},te=[G(Q),G(F),G(-1*F),G(Q),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,V(R),Y(D+z),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([V(L),"0","0",V(z),"0","0","cm"].join(" "))):this.internal.write([V(L),"0","0",V(z),V(R),Y(D+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(R){var D,L,z=0;if(typeof R=="string")for(L=R.length,D=0;D<L;D++)z=(z<<5)-z+R.charCodeAt(D),z|=0;else if(P(R))for(L=R.byteLength/2,D=0;D<L;D++)z=(z<<5)-z+R[D],z|=0;return z},E=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var D=!0;return R.length===0&&(D=!1),R.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(D=!1),D},A=t.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var D=R.indexOf(",");return D<0?null:R.substring(0,D).trim().endsWith("base64")?R.substring(D+1):null};t.__addimage__.isArrayBuffer=function(R){return R instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(R){return R instanceof Int8Array||R instanceof Uint8Array||R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array},O=t.__addimage__.binaryStringToUint8Array=function(R){for(var D=R.length,L=new Uint8Array(D),z=0;z<D;z++)L[z]=R.charCodeAt(z);return L},k=t.__addimage__.arrayBufferToBinaryString=function(R){for(var D="",L=P(R)?R:new Uint8Array(R),z=0;z<L.length;z+=8192)D+=String.fromCharCode.apply(null,L.subarray(z,z+8192));return D};t.addImage=function(){var R,D,L,z,W,X,q,V,Y;if(typeof arguments[1]=="number"?(D=n,L=arguments[1],z=arguments[2],W=arguments[3],X=arguments[4],q=arguments[5],V=arguments[6],Y=arguments[7]):(D=arguments[1],L=arguments[2],z=arguments[3],W=arguments[4],X=arguments[5],q=arguments[6],V=arguments[7],Y=arguments[8]),ri(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var re=R;R=re.imageData,D=re.format||D||n,L=re.x||L||0,z=re.y||z||0,W=re.w||re.width||W,X=re.h||re.height||X,q=re.alias||q,V=re.compression||V,Y=re.rotation||re.angle||Y}var Q=this.internal.getFilters();if(V===void 0&&Q.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(L)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=C.call(this,R,D,q,V);return x.call(this,L,z,W,X,F,Y),this};var C=function(R,D,L,z){var W,X,q;if(typeof R=="string"&&i(R)===n){R=unescape(R);var V=I(R,!1);(V!==""||(V=t.loadFile(R,!0))!==void 0)&&(R=V)}if(p(R)&&(R=m(R,D)),D=i(R,D),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((q=L)==null||q.length===0)&&(L=(function(Y){return typeof Y=="string"||P(Y)?j(Y):P(Y.data)?j(Y.data):null})(R)),(W=v.call(this,L))||(R instanceof Uint8Array||D==="RGBA"||(X=R,R=O(R)),W=this["process"+D.toUpperCase()](R,d.call(this),L,(function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:S.NONE})(z),X)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},I=t.__addimage__.convertBase64ToBinaryString=function(R,D){D=typeof D!="boolean"||D;var L,z="";if(typeof R=="string"){var W;L=(W=A(R))!==null&&W!==void 0?W:R;try{z=G2(L)}catch(X){if(D)throw E(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(R){var D,L,z="";if(p(R)&&(R=m(R)),typeof R=="string"&&i(R)===n&&((z=I(R,!1))===""&&(z=t.loadFile(R)||""),R=z),L=i(R),!f(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(R instanceof Uint8Array||(R=O(R)),!(D=this["process"+L.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=L,D}})(mn.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};mn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(y.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(b(r.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(b(S))+") >>",y.content=s;var j=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var A=this.annotations._nameMap[r.options.name];r.options.pageNumber=A.page,r.options.top=A.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var P=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:u(r),w:c(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,l,c=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(n,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,l,o,s),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(mn.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=t.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(y){var x=0,b=n,S="",j=0;for(x=0;x<y.length;x+=1)b[y.charCodeAt(x)]!==void 0?(j++,typeof(b=b[y.charCodeAt(x)])=="number"&&(S+=String.fromCharCode(b),b=n,j=0),x===y.length-1&&(b=n,S+=y.charAt(x-(j-1)),x-=j-1,j=0)):(b=n,S+=y.charAt(x-j),x-=j,j=0);return S};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,x,b){return o(y)?s(y)===!1?-1:!u(y)||!o(x)&&!o(b)||!o(b)&&l(x)||l(y)&&!o(x)||l(y)&&c(x)||l(y)&&l(x)?0:d(y)&&o(x)&&!l(x)&&o(b)&&u(b)?3:l(y)||!o(b)?1:2:-1},m=function(y){var x=0,b=0,S=0,j="",E="",A="",P=(y=y||"").split("\\s+"),O=[];for(x=0;x<P.length;x+=1){for(O.push(""),b=0;b<P[x].length;b+=1)j=P[x][b],E=P[x][b-1],A=P[x][b+1],o(j)?(S=p(j,E,A),O[x]+=S!==-1?String.fromCharCode(e[j.charCodeAt(0)][S]):j):O[x]+=j;O[x]=f(O[x])}return O.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(x)){var S=0;for(b=[],S=0;S<x.length;S+=1)Array.isArray(x[S])?b.push([m(x[S][0]),x[S][1],x[S][2]]):b.push([m(x[S])]);y=b}else y=m(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])})(mn.API),mn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(mn.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,m=0,v=0,y=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,E){return j.concat(x.splitTextToSize(E,b))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)m<(y=this.getStringUnitWidth(c[S],{font:f})*d)&&(m=y);return m!==0&&(v=c.length),{w:m/=p,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,v,y,x,b=[],S=[],j=[],E={},A={},P=[],O=[],k=(p=p||{}).autoSize||!1,C=p.printHeaders!==!1,I=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,R=p.margins||Object.assign({width:this.getPageWidth()},e),D=typeof p.padding=="number"?p.padding:3,L=p.headerBackgroundColor||"#c8c8c8",z=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=z,this.setFontSize(I),f==null)S=b=Object.keys(d[0]),j=b.map(function(){return"left"});else if(Array.isArray(f)&&ri(f[0])==="object")for(b=f.map(function(re){return re.name}),S=f.map(function(re){return re.prompt||re.name||""}),j=f.map(function(re){return re.align||"left"}),m=0;m<f.length;m+=1)A[f[m].name]=.7499990551181103*f[m].width;else Array.isArray(f)&&typeof f[0]=="string"&&(S=b=f,j=b.map(function(){return"left"}));if(k||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<b.length;m+=1){for(E[x=b[m]]=d.map(function(re){return re[x]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(S[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=E[x],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)P.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[x]=Math.max.apply(null,P)+D+D,P=[]}if(C){var W={};for(m=0;m<b.length;m+=1)W[b[m]]={},W[b[m]].text=S[m],W[b[m]].align=j[m];var X=l.call(this,W,A);O=b.map(function(re){return new s(c,u,A[re],X,W[re].text,void 0,W[re].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var q=f.reduce(function(re,Q){return re[Q.name]=Q.align,re},{});for(m=0;m<d.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:d[m]},this);var V=l.call(this,d[m],A);for(y=0;y<b.length;y+=1){var Y=d[m][b[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:y,data:Y},this),o.call(this,new s(c,u,A[b[y]],V,Y,m+2,q[b[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(m){var v=c[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/p+d+d},this).reduce(function(m,v){return Math.max(m,v)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}})(mn.API);var Lse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fse=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],QR=Ise(Fse),Bse=[100,200,300,400,500,600,700,800,900],g7e=Ise(Bse);function TO(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(s){return Lse[s=s||"normal"]?s:"normal"})(t.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof QR[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function rV(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var v7e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},iV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function aV(t){return t.trimLeft()}function y7e(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function x7e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var d2,oV,lV,mv,f2,cV,uV,dV,OO=["times"];function fV(t,e,n,r,i){var s=4,o=pV;switch(i){case mn.API.image_compression.FAST:s=1,o=hV;break;case mn.API.image_compression.MEDIUM:s=6,o=mV;break;case mn.API.image_compression.SLOW:s=9,o=gV}t=(function(c,u,d,f){for(var p,m=c.length/u,v=new Uint8Array(c.length+m),y=[b7e,hV,pV,mV,gV],x=0;x<m;x+=1){var b=x*u,S=c.subarray(b,b+u);if(f)v.set(f(S,d,p),b+x);else{for(var j=y.length,E=[],A=0;A<j;A+=1)E[A]=y[A](S,d,p);var P=N7e(E.concat());v.set(E[P],b+x)}p=S}return v})(t,e,Math.ceil(n*r/8),o);var l=HR(t,{level:s});return mn.API.__addimage__.arrayBufferToBinaryString(l)}function b7e(t){var e=Array.apply([],t);return e.unshift(0),e}function hV(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function pV(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function mV(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,l=n&&n[s]||0;i[s+1]=t[s]+256-(o+l>>>1)&255}return i}function gV(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=w7e(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function w7e(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function N7e(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function PO(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return $se(t,i)>>s&o}function vV(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),l=(1<<r)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(t,s,$se(t,s)&~(l<<o)&65535|c)}function $se(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function S7e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,p=null,m=0,v=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),m=y>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var x=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,E=t[e++],A=E>>6&1,P=1<<1+(7&E),O=l,k=c,C=!1;E>>7&&(C=!0,O=e,k=P,e+=3*P);var I=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x,y:b,width:S,height:j,has_local_palette:C,palette_offset:O,palette_size:k,data_offset:I,data_length:e-I,transparent_index:p,interlaced:!!A,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(D){if(D<0||D>=d.length)throw new Error("Frame index out of range.");return d[D]},this.decodeAndBlitFrameBGRA=function(D,L){var z=this.frameInfo(D),W=z.width*z.height,X=new Uint8Array(W);yV(t,z.data_offset,X,W);var q=z.palette_offset,V=z.transparent_index;V===null&&(V=256);var Y=z.width,re=n-Y,Q=Y,F=4*(z.y*n+z.x),G=4*((z.y+z.height)*n+z.x),te=F,le=4*re;z.interlaced===!0&&(le+=4*n*7);for(var he=8,me=0,xe=X.length;me<xe;++me){var de=X[me];if(Q===0&&(Q=Y,(te+=le)>=G&&(le=4*re+4*n*(he-1),te=F+(Y+re)*(he<<1),he>>=1)),de===V)te+=4;else{var Ne=t[q+3*de],Ce=t[q+3*de+1],ae=t[q+3*de+2];L[te++]=ae,L[te++]=Ce,L[te++]=Ne,L[te++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(D,L){var z=this.frameInfo(D),W=z.width*z.height,X=new Uint8Array(W);yV(t,z.data_offset,X,W);var q=z.palette_offset,V=z.transparent_index;V===null&&(V=256);var Y=z.width,re=n-Y,Q=Y,F=4*(z.y*n+z.x),G=4*((z.y+z.height)*n+z.x),te=F,le=4*re;z.interlaced===!0&&(le+=4*n*7);for(var he=8,me=0,xe=X.length;me<xe;++me){var de=X[me];if(Q===0&&(Q=Y,(te+=le)>=G&&(le=4*re+4*n*(he-1),te=F+(Y+re)*(he<<1),he>>=1)),de===V)te+=4;else{var Ne=t[q+3*de],Ce=t[q+3*de+1],ae=t[q+3*de+2];L[te++]=Ne,L[te++]=Ce,L[te++]=ae,L[te++]=255}--Q}}}function yV(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,f=0,p=0,m=t[e++],v=new Int32Array(4096),y=null;;){for(;d<16&&m!==0;)f|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==s){if(x===o)break;for(var b=x<l?x:y,S=0,j=b;j>s;)j=v[j]>>8,++S;var E=j;if(p+S+(b!==x?1:0)>r)return void di.log("Warning, gif stream longer than expected.");n[p++]=E;var A=p+=S;for(b!==x&&(n[p++]=E),j=b;S--;)j=v[j],n[--A]=255&j,j>>=8;y!==null&&l<4096&&(v[l++]=y<<8|E,l>=u+1&&c<12&&(++c,u=u<<1|1)),y=x}else l=o+1,u=(1<<(c=i+1))-1,y=null}return p!==r&&di.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function MO(t){var e,n,r,i,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),v=new Array(64),y=[],x=0,b=7,S=new Array(64),j=new Array(64),E=new Array(64),A=new Array(256),P=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(F,G){for(var te=0,le=0,he=new Array,me=1;me<=16;me++){for(var xe=1;xe<=F[me];xe++)he[G[le]]=[],he[G[le]][0]=te,he[G[le]][1]=me,le++,te++;te*=2}return he}function q(F){for(var G=F[0],te=F[1]-1;te>=0;)G&1<<te&&(x|=1<<b),te--,--b<0&&(x==255?(V(255),V(0)):V(x),b=7,x=0)}function V(F){y.push(F)}function Y(F){V(F>>8&255),V(255&F)}function re(F,G,te,le,he){for(var me,xe=he[0],de=he[240],Ne=(function(Ve,ge){var Se,ke,We,Ke,qe,nt,_t,xt,Ot,Yt,Ct=0;for(Ot=0;Ot<8;++Ot){Se=Ve[Ct],ke=Ve[Ct+1],We=Ve[Ct+2],Ke=Ve[Ct+3],qe=Ve[Ct+4],nt=Ve[Ct+5],_t=Ve[Ct+6];var $n=Se+(xt=Ve[Ct+7]),Pn=Se-xt,Ht=ke+_t,xn=ke-_t,ir=We+nt,on=We-nt,Cn=Ke+qe,bn=Ke-qe,Cr=$n+Cn,ur=$n-Cn,vn=Ht+ir,zt=Ht-ir;Ve[Ct]=Cr+vn,Ve[Ct+4]=Cr-vn;var je=.707106781*(zt+ur);Ve[Ct+2]=ur+je,Ve[Ct+6]=ur-je;var se=.382683433*((Cr=bn+on)-(zt=xn+Pn)),Le=.5411961*Cr+se,St=1.306562965*zt+se,Tn=.707106781*(vn=on+xn),Dt=Pn+Tn,wt=Pn-Tn;Ve[Ct+5]=wt+Le,Ve[Ct+3]=wt-Le,Ve[Ct+1]=Dt+St,Ve[Ct+7]=Dt-St,Ct+=8}for(Ct=0,Ot=0;Ot<8;++Ot){Se=Ve[Ct],ke=Ve[Ct+8],We=Ve[Ct+16],Ke=Ve[Ct+24],qe=Ve[Ct+32],nt=Ve[Ct+40],_t=Ve[Ct+48];var At=Se+(xt=Ve[Ct+56]),Bt=Se-xt,On=ke+_t,en=ke-_t,sr=We+nt,Nr=We-nt,Ii=Ke+qe,Ys=Ke-qe,Ta=At+Ii,$o=At-Ii,Ss=On+sr,Wa=On-sr;Ve[Ct]=Ta+Ss,Ve[Ct+32]=Ta-Ss;var fa=.707106781*(Wa+$o);Ve[Ct+16]=$o+fa,Ve[Ct+48]=$o-fa;var zo=.382683433*((Ta=Ys+Nr)-(Wa=en+Bt)),vo=.5411961*Ta+zo,Ul=1.306562965*Wa+zo,Rc=.707106781*(Ss=Nr+en),ha=Bt+Rc,Dc=Bt-Rc;Ve[Ct+40]=Dc+vo,Ve[Ct+24]=Dc-vo,Ve[Ct+8]=ha+Ul,Ve[Ct+56]=ha-Ul,Ct++}for(Ot=0;Ot<64;++Ot)Yt=Ve[Ot]*ge[Ot],m[Ot]=Yt>0?Yt+.5|0:Yt-.5|0;return m})(F,G),Ce=0;Ce<64;++Ce)v[O[Ce]]=Ne[Ce];var ae=v[0]-te;te=v[0],ae==0?q(le[0]):(q(le[p[me=32767+ae]]),q(f[me]));for(var Pe=63;Pe>0&&v[Pe]==0;)Pe--;if(Pe==0)return q(xe),te;for(var J,ne=1;ne<=Pe;){for(var Re=ne;v[ne]==0&&ne<=Pe;)++ne;var dt=ne-Re;if(dt>=16){J=dt>>4;for(var et=1;et<=J;++et)q(de);dt&=15}me=32767+v[ne],q(he[(dt<<4)+p[me]]),q(f[me]),ne++}return Pe!=63&&q(xe),te}function Q(F){F=Math.min(Math.max(F,1),100),s!=F&&((function(G){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var he=o((te[le]*G+50)/100);he=Math.min(Math.max(he,1),255),l[O[le]]=he}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var de=o((me[xe]*G+50)/100);de=Math.min(Math.max(de,1),255),c[O[xe]]=de}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,ae=0;ae<8;ae++)for(var Pe=0;Pe<8;Pe++)u[Ce]=1/(l[O[Ce]]*Ne[ae]*Ne[Pe]*8),d[Ce]=1/(c[O[Ce]]*Ne[ae]*Ne[Pe]*8),Ce++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,G){G&&Q(G),y=new Array,x=0,b=7,Y(65496),Y(65504),Y(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),Y(1),Y(1),V(0),V(0),(function(){Y(65499),Y(132),V(0);for(var ke=0;ke<64;ke++)V(l[ke]);V(1);for(var We=0;We<64;We++)V(c[We])})(),(function(ke,We){Y(65472),Y(17),V(8),Y(We),Y(ke),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)})(F.width,F.height),(function(){Y(65476),Y(418),V(0);for(var ke=0;ke<16;ke++)V(k[ke+1]);for(var We=0;We<=11;We++)V(C[We]);V(16);for(var Ke=0;Ke<16;Ke++)V(I[Ke+1]);for(var qe=0;qe<=161;qe++)V(R[qe]);V(1);for(var nt=0;nt<16;nt++)V(D[nt+1]);for(var _t=0;_t<=11;_t++)V(L[_t]);V(17);for(var xt=0;xt<16;xt++)V(z[xt+1]);for(var Ot=0;Ot<=161;Ot++)V(W[Ot])})(),Y(65498),Y(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var te=0,le=0,he=0;x=0,b=7,this.encode.displayName="_encode_";for(var me,xe,de,Ne,Ce,ae,Pe,J,ne,Re=F.data,dt=F.width,et=F.height,Ve=4*dt,ge=0;ge<et;){for(me=0;me<Ve;){for(Ce=Ve*ge+me,Pe=-1,J=0,ne=0;ne<64;ne++)ae=Ce+(J=ne>>3)*Ve+(Pe=4*(7&ne)),ge+J>=et&&(ae-=Ve*(ge+1+J-et)),me+Pe>=Ve&&(ae-=me+Pe-Ve+4),xe=Re[ae++],de=Re[ae++],Ne=Re[ae++],S[ne]=(P[xe]+P[de+256|0]+P[Ne+512|0]>>16)-128,j[ne]=(P[xe+768|0]+P[de+1024|0]+P[Ne+1280|0]>>16)-128,E[ne]=(P[xe+1280|0]+P[de+1536|0]+P[Ne+1792|0]>>16)-128;te=re(S,u,te,e,r),le=re(j,d,le,n,i),he=re(E,d,he,n,i),me+=32}ge+=8}if(b>=0){var Se=[];Se[1]=b+1,Se[0]=(1<<b+1)-1,q(Se)}return Y(65497),new Uint8Array(y)},t=t||50,(function(){for(var F=String.fromCharCode,G=0;G<256;G++)A[G]=F(G)})(),e=X(k,C),n=X(D,L),r=X(I,R),i=X(z,W),(function(){for(var F=1,G=2,te=1;te<=15;te++){for(var le=F;le<G;le++)p[32767+le]=te,f[32767+le]=[],f[32767+le][1]=te,f[32767+le][0]=le;for(var he=-(G-1);he<=-F;he++)p[32767+he]=te,f[32767+he]=[],f[32767+he][1]=te,f[32767+he][0]=G-1+he;F<<=1,G<<=1}})(),(function(){for(var F=0;F<256;F++)P[F]=19595*F,P[F+256|0]=38470*F,P[F+512|0]=7471*F+32768,P[F+768|0]=-11059*F,P[F+1024|0]=-21709*F,P[F+1280|0]=32768*F+8421375,P[F+1536|0]=-27439*F,P[F+1792|0]=-5329*F})(),Q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function iu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xV(t){function e(C){if(!C)throw Error("assert :P")}function n(C,I,R){for(var D=0;4>D;D++)if(C[I+D]!=R.charCodeAt(D))return!0;return!1}function r(C,I,R,D,L){for(var z=0;z<L;z++)C[I+z]=R[D+z]}function i(C,I,R,D){for(var L=0;L<D;L++)C[I+L]=R}function s(C){return new Int32Array(C)}function o(C,I){for(var R=[],D=0;D<C;D++)R.push(new I);return R}function l(C,I){var R=[];return(function D(L,z,W){for(var X=W[z],q=0;q<X&&(L.push(W.length>z+1?[]:new I),!(W.length<z+1));q++)D(L[q],z+1,W)})(R,0,C),R}var c=function(){var C=this;function I(_,M){for(var U=1<<M-1>>>0;_&U;)U>>>=1;return U?(_&U-1)+U:_}function R(_,M,U,K,Z){e(!(K%U));do _[M+(K-=U)]=Z;while(0<K)}function D(_,M,U,K,Z){if(e(2328>=Z),512>=Z)var oe=s(512);else if((oe=s(Z))==null)return 0;return(function(ce,ue,fe,ye,Te,Be){var be,Me,Fe=ue,rt=1<<fe,ze=s(16),Je=s(16);for(e(Te!=0),e(ye!=null),e(ce!=null),e(0<fe),Me=0;Me<Te;++Me){if(15<ye[Me])return 0;++ze[ye[Me]]}if(ze[0]==Te)return 0;for(Je[1]=0,be=1;15>be;++be){if(ze[be]>1<<be)return 0;Je[be+1]=Je[be]+ze[be]}for(Me=0;Me<Te;++Me)be=ye[Me],0<ye[Me]&&(Be[Je[be]++]=Me);if(Je[15]==1)return(ye=new L).g=0,ye.value=Be[0],R(ce,Fe,1,rt,ye),rt;var tt,ot=-1,ut=rt-1,fn=0,Xt=1,Gn=1,nn=1<<fe;for(Me=0,be=1,Te=2;be<=fe;++be,Te<<=1){if(Xt+=Gn<<=1,0>(Gn-=ze[be]))return 0;for(;0<ze[be];--ze[be])(ye=new L).g=be,ye.value=Be[Me++],R(ce,Fe+fn,Te,nn,ye),fn=I(fn,be)}for(be=fe+1,Te=2;15>=be;++be,Te<<=1){if(Xt+=Gn<<=1,0>(Gn-=ze[be]))return 0;for(;0<ze[be];--ze[be]){if(ye=new L,(fn&ut)!=ot){for(Fe+=nn,tt=1<<(ot=be)-fe;15>ot&&!(0>=(tt-=ze[ot]));)++ot,tt<<=1;rt+=nn=1<<(tt=ot-fe),ce[ue+(ot=fn&ut)].g=tt+fe,ce[ue+ot].value=Fe-ue-ot}ye.g=be-fe,ye.value=Be[Me++],R(ce,Fe+(fn>>fe),Te,nn,ye),fn=I(fn,be)}}return Xt!=2*Je[15]-1?0:rt})(_,M,U,K,Z,oe)}function L(){this.value=this.g=0}function z(){this.value=this.g=0}function W(){this.G=o(5,L),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Go,z)}function X(_,M,U,K){e(_!=null),e(M!=null),e(2147483648>K),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=M,_.pa=U,_.Jd=M,_.Yc=U+K,_.Zc=4<=K?U+K-4+1:U,xe(_)}function q(_,M){for(var U=0;0<M--;)U|=Ne(_,128)<<M;return U}function V(_,M){var U=q(_,M);return de(_)?-U:U}function Y(_,M,U,K){var Z,oe=0;for(e(_!=null),e(M!=null),e(4294967288>K),_.Sb=K,_.Ra=0,_.u=0,_.h=0,4<K&&(K=4),Z=0;Z<K;++Z)oe+=M[U+Z]<<8*Z;_.Ra=oe,_.bb=K,_.oa=M,_.pa=U}function re(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Uu-8>>>0,++_.bb,_.u-=8;le(_)&&(_.h=1,_.u=0)}function Q(_,M){if(e(0<=M),!_.h&&M<=No){var U=te(_)&wo[M];return _.u+=M,re(_),U}return _.h=1,_.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(_){return _.Ra>>>(_.u&Uu-1)>>>0}function le(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Uu}function he(_,M){_.u=M,_.h=le(_)}function me(_){_.u>=Xl&&(e(_.u>=Xl),re(_))}function xe(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function de(_){return q(_,1)}function Ne(_,M){var U=_.Ca;0>_.b&&xe(_);var K=_.b,Z=U*M>>>8,oe=(_.I>>>K>Z)+0;for(oe?(U-=Z,_.I-=Z+1<<K>>>0):U=Z+1,K=U,Z=0;256<=K;)Z+=8,K>>=8;return K=7^Z+Hc[K],_.b-=K,_.Ca=(U<<K)-1,oe}function Ce(_,M,U){_[M+0]=U>>24&255,_[M+1]=U>>16&255,_[M+2]=U>>8&255,_[M+3]=255&U}function ae(_,M){return _[M+0]|_[M+1]<<8}function Pe(_,M){return ae(_,M)|_[M+2]<<16}function J(_,M){return ae(_,M)|ae(_,M+2)<<16}function ne(_,M){var U=1<<M;return e(_!=null),e(0<M),_.X=s(U),_.X==null?0:(_.Mb=32-M,_.Xa=M,1)}function Re(_,M){e(_!=null),e(M!=null),e(_.Xa==M.Xa),r(M.X,0,_.X,0,1<<M.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function et(_,M,U,K){e(U!=null),e(K!=null);var Z=U[0],oe=K[0];return Z==0&&(Z=(_*oe+M/2)/M),oe==0&&(oe=(M*Z+_/2)/_),0>=Z||0>=oe?0:(U[0]=Z,K[0]=oe,1)}function Ve(_,M){return _+(1<<M)-1>>>M}function ge(_,M){return((4278255360&_)+(4278255360&M)>>>0&4278255360)+((16711935&_)+(16711935&M)>>>0&16711935)>>>0}function Se(_,M){C[M]=function(U,K,Z,oe,ce,ue,fe){var ye;for(ye=0;ye<ce;++ye){var Te=C[_](ue[fe+ye-1],Z,oe+ye);ue[fe+ye]=ge(U[K+ye],Te)}}}function ke(){this.ud=this.hd=this.jd=0}function We(_,M){return((4278124286&(_^M))>>>1)+(_&M)>>>0}function Ke(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function qe(_,M){return Ke(_+(_-M+.5>>1))}function nt(_,M,U){return Math.abs(M-U)-Math.abs(_-U)}function _t(_,M,U,K,Z,oe,ce){for(K=oe[ce-1],U=0;U<Z;++U)oe[ce+U]=K=ge(_[M+U],K)}function xt(_,M,U,K,Z){var oe;for(oe=0;oe<U;++oe){var ce=_[M+oe],ue=ce>>8&255,fe=16711935&(fe=(fe=16711935&ce)+((ue<<16)+ue));K[Z+oe]=(4278255360&ce)+fe>>>0}}function Ot(_,M){M.jd=255&_,M.hd=_>>8&255,M.ud=_>>16&255}function Yt(_,M,U,K,Z,oe){var ce;for(ce=0;ce<K;++ce){var ue=M[U+ce],fe=ue>>>8,ye=ue,Te=255&(Te=(Te=ue>>>16)+((_.jd<<24>>24)*(fe<<24>>24)>>>5));ye=255&(ye=(ye+=(_.hd<<24>>24)*(fe<<24>>24)>>>5)+((_.ud<<24>>24)*(Te<<24>>24)>>>5)),Z[oe+ce]=(4278255360&ue)+(Te<<16)+ye}}function Ct(_,M,U,K,Z){C[M]=function(oe,ce,ue,fe,ye,Te,Be,be,Me){for(fe=Be;fe<be;++fe)for(Be=0;Be<Me;++Be)ye[Te++]=Z(ue[K(oe[ce++])])},C[_]=function(oe,ce,ue,fe,ye,Te,Be){var be=8>>oe.b,Me=oe.Ea,Fe=oe.K[0],rt=oe.w;if(8>be)for(oe=(1<<oe.b)-1,rt=(1<<be)-1;ce<ue;++ce){var ze,Je=0;for(ze=0;ze<Me;++ze)ze&oe||(Je=K(fe[ye++])),Te[Be++]=Z(Fe[Je&rt]),Je>>=be}else C["VP8LMapColor"+U](fe,ye,Fe,rt,Te,Be,ce,ue,Me)}}function $n(_,M,U,K,Z){for(U=M+U;M<U;){var oe=_[M++];K[Z++]=oe>>16&255,K[Z++]=oe>>8&255,K[Z++]=255&oe}}function Pn(_,M,U,K,Z){for(U=M+U;M<U;){var oe=_[M++];K[Z++]=oe>>16&255,K[Z++]=oe>>8&255,K[Z++]=255&oe,K[Z++]=oe>>24&255}}function Ht(_,M,U,K,Z){for(U=M+U;M<U;){var oe=(ce=_[M++])>>16&240|ce>>12&15,ce=240&ce|ce>>28&15;K[Z++]=oe,K[Z++]=ce}}function xn(_,M,U,K,Z){for(U=M+U;M<U;){var oe=(ce=_[M++])>>16&248|ce>>13&7,ce=ce>>5&224|ce>>3&31;K[Z++]=oe,K[Z++]=ce}}function ir(_,M,U,K,Z){for(U=M+U;M<U;){var oe=_[M++];K[Z++]=255&oe,K[Z++]=oe>>8&255,K[Z++]=oe>>16&255}}function on(_,M,U,K,Z,oe){if(oe==0)for(U=M+U;M<U;)Ce(K,((oe=_[M++])[0]>>24|oe[1]>>8&65280|oe[2]<<8&16711680|oe[3]<<24)>>>0),Z+=32;else r(K,Z,_,M,U)}function Cn(_,M){C[M][0]=C[_+"0"],C[M][1]=C[_+"1"],C[M][2]=C[_+"2"],C[M][3]=C[_+"3"],C[M][4]=C[_+"4"],C[M][5]=C[_+"5"],C[M][6]=C[_+"6"],C[M][7]=C[_+"7"],C[M][8]=C[_+"8"],C[M][9]=C[_+"9"],C[M][10]=C[_+"10"],C[M][11]=C[_+"11"],C[M][12]=C[_+"12"],C[M][13]=C[_+"13"],C[M][14]=C[_+"0"],C[M][15]=C[_+"0"]}function bn(_){return _==dh||_==Qd||_==Zp||_==Jp}function Cr(){this.eb=[],this.size=this.A=this.fb=0}function ur(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cr,this.f.kb=new ur,this.sd=null}function zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function je(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function se(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Le(_,M){var U=_.T,K=M.ba.f.RGBA,Z=K.eb,oe=K.fb+_.ka*K.A,ce=Za[M.ba.S],ue=_.y,fe=_.O,ye=_.f,Te=_.N,Be=_.ea,be=_.W,Me=M.cc,Fe=M.dc,rt=M.Mc,ze=M.Nc,Je=_.ka,tt=_.ka+_.T,ot=_.U,ut=ot+1>>1;for(Je==0?ce(ue,fe,null,null,ye,Te,Be,be,ye,Te,Be,be,Z,oe,null,null,ot):(ce(M.ec,M.fc,ue,fe,Me,Fe,rt,ze,ye,Te,Be,be,Z,oe-K.A,Z,oe,ot),++U);Je+2<tt;Je+=2)Me=ye,Fe=Te,rt=Be,ze=be,Te+=_.Rc,be+=_.Rc,oe+=2*K.A,ce(ue,(fe+=2*_.fa)-_.fa,ue,fe,Me,Fe,rt,ze,ye,Te,Be,be,Z,oe-K.A,Z,oe,ot);return fe+=_.fa,_.j+tt<_.o?(r(M.ec,M.fc,ue,fe,ot),r(M.cc,M.dc,ye,Te,ut),r(M.Mc,M.Nc,Be,be,ut),U--):1&tt||ce(ue,fe,null,null,ye,Te,Be,be,ye,Te,Be,be,Z,oe+K.A,null,null,ot),U}function St(_,M,U){var K=_.F,Z=[_.J];if(K!=null){var oe=_.U,ce=M.ba.S,ue=ce==Qp||ce==Zp;M=M.ba.f.RGBA;var fe=[0],ye=_.ka;fe[0]=_.T,_.Kb&&(ye==0?--fe[0]:(--ye,Z[0]-=_.width),_.j+_.ka+_.T==_.o&&(fe[0]=_.o-_.j-ye));var Te=M.eb;ye=M.fb+ye*M.A,_=Yp(K,Z[0],_.width,oe,fe,Te,ye+(ue?0:3),M.A),e(U==fe),_&&bn(ce)&&Xd(Te,ye,ue,oe,fe,M.A)}return 0}function Tn(_){var M=_.ma,U=M.ba.S,K=11>U,Z=U==Ku||U==Xp||U==Qp||U==Qr||U==12||bn(U);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!ih(M.Oa,_,Z?11:12))return 0;if(Z&&bn(U)&&Mg(),_.da)alert("todo:use_scaling");else{if(K){if(M.Ib=se,_.Kb){if(U=_.U+1>>1,M.memory=s(_.U+2*U),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+_.U,M.Mc=M.cc,M.Nc=M.dc+U,M.Ib=Le,Mg()}}else alert("todo:EmitYUV");Z&&(M.Jb=St,K&&Ko())}if(K&&!Zs){for(_=0;256>_;++_)Ja[_]=89858*(_-128)+bl>>Gc,eo[_]=-22014*(_-128)+bl,mh[_]=-45773*(_-128),tf[_]=113618*(_-128)+bl>>Gc;for(_=$r;_<Vr;++_)M=76283*(_-16)+bl>>Gc,zg[_-$r]=Li(M,255),ew[_-$r]=Li(M+8>>4,15);Zs=1}return 1}function Dt(_){var M=_.ma,U=_.U,K=_.T;return e(!(1&_.ka)),0>=U||0>=K?0:(U=M.Ib(_,M),M.Jb!=null&&M.Jb(_,M,U),M.Dc+=U,1)}function wt(_){_.ma.memory=null}function At(_,M,U,K){return Q(_,8)!=47?0:(M[0]=Q(_,14)+1,U[0]=Q(_,14)+1,K[0]=Q(_,1),Q(_,3)!=0?0:!_.h)}function Bt(_,M){if(4>_)return _+1;var U=_-2>>1;return(2+(1&_)<<U)+Q(M,U)+1}function On(_,M){return 120<M?M-120:1<=(U=((U=F_[M-1])>>4)*_+(8-(15&U)))?U:1;var U}function en(_,M,U){var K=te(U),Z=_[M+=255&K].g-8;return 0<Z&&(he(U,U.u+8),K=te(U),M+=_[M].value,M+=K&(1<<Z)-1),he(U,U.u+_[M].g),_[M].value}function sr(_,M,U){return U.g+=_.g,U.value+=_.value<<M>>>0,e(8>=U.g),_.g}function Nr(_,M,U){var K=_.xc;return e((M=K==0?0:_.vc[_.md*(U>>K)+(M>>K)])<_.Wb),_.Ya[M]}function Ii(_,M,U,K){var Z=_.ab,oe=_.c*M,ce=_.C;M=ce+M;var ue=U,fe=K;for(K=_.Ta,U=_.Ua;0<Z--;){var ye=_.gc[Z],Te=ce,Be=M,be=ue,Me=fe,Fe=(fe=K,ue=U,ye.Ea);switch(e(Te<Be),e(Be<=ye.nc),ye.hc){case 2:Yi(be,Me,(Be-Te)*Fe,fe,ue);break;case 0:var rt=Te,ze=Be,Je=fe,tt=ue,ot=(nn=ye).Ea;rt==0&&(Vc(be,Me,null,null,1,Je,tt),_t(be,Me+1,0,0,ot-1,Je,tt+1),Me+=ot,tt+=ot,++rt);for(var ut=1<<nn.b,fn=ut-1,Xt=Ve(ot,nn.b),Gn=nn.K,nn=nn.w+(rt>>nn.b)*Xt;rt<ze;){var fr=Gn,$i=nn,Xn=1;for(Ql(be,Me,Je,tt-ot,1,Je,tt);Xn<ot;){var Qt=(Xn&~fn)+ut;Qt>ot&&(Qt=ot),(0,Wd[fr[$i++]>>8&15])(be,Me+ +Xn,Je,tt+Xn-ot,Qt-Xn,Je,tt+Xn),Xn=Qt}Me+=ot,tt+=ot,++rt&fn||(nn+=Xt)}Be!=ye.nc&&r(fe,ue-Fe,fe,ue+(Be-Te-1)*Fe,Fe);break;case 1:for(Fe=be,ze=Me,ot=(be=ye.Ea)-(tt=be&~(Je=(Me=1<<ye.b)-1)),rt=Ve(be,ye.b),ut=ye.K,ye=ye.w+(Te>>ye.b)*rt;Te<Be;){for(fn=ut,Xt=ye,Gn=new ke,nn=ze+tt,fr=ze+be;ze<nn;)Ot(fn[Xt++],Gn),ah(Gn,Fe,ze,Me,fe,ue),ze+=Me,ue+=Me;ze<fr&&(Ot(fn[Xt++],Gn),ah(Gn,Fe,ze,ot,fe,ue),ze+=ot,ue+=ot),++Te&Je||(ye+=rt)}break;case 3:if(be==fe&&Me==ue&&0<ye.b){for(ze=fe,be=Fe=ue+(Be-Te)*Fe-(tt=(Be-Te)*Ve(ye.Ea,ye.b)),Me=fe,Je=ue,rt=[],tt=(ot=tt)-1;0<=tt;--tt)rt[tt]=Me[Je+tt];for(tt=ot-1;0<=tt;--tt)ze[be+tt]=rt[tt];Hd(ye,Te,Be,fe,Fe,fe,ue)}else Hd(ye,Te,Be,be,Me,fe,ue)}ue=K,fe=U}fe!=U&&r(K,U,ue,fe,oe)}function Ys(_,M){var U=_.V,K=_.Ba+_.c*_.C,Z=M-_.C;if(e(M<=_.l.o),e(16>=Z),0<Z){var oe=_.l,ce=_.Ta,ue=_.Ua,fe=oe.width;if(Ii(_,Z,U,K),Z=ue=[ue],e((U=_.C)<(K=M)),e(oe.v<oe.va),K>oe.o&&(K=oe.o),U<oe.j){var ye=oe.j-U;U=oe.j,Z[0]+=ye*fe}if(U>=K?U=0:(Z[0]+=4*oe.v,oe.ka=U-oe.j,oe.U=oe.va-oe.v,oe.T=K-U,U=1),U){if(ue=ue[0],11>(U=_.ca).S){var Te=U.f.RGBA,Be=(K=U.S,Z=oe.U,oe=oe.T,ye=Te.eb,Te.A),be=oe;for(Te=Te.fb+_.Ma*Te.A;0<be--;){var Me=ce,Fe=ue,rt=Z,ze=ye,Je=Te;switch(K){case Lg:oh(Me,Fe,rt,ze,Je);break;case Ku:Wc(Me,Fe,rt,ze,Je);break;case dh:Wc(Me,Fe,rt,ze,Je),Xd(ze,Je,0,rt,1,0);break;case Y1:Kd(Me,Fe,rt,ze,Je);break;case Xp:on(Me,Fe,rt,ze,Je,1);break;case Qd:on(Me,Fe,rt,ze,Je,1),Xd(ze,Je,0,rt,1,0);break;case Qp:on(Me,Fe,rt,ze,Je,0);break;case Zp:on(Me,Fe,rt,ze,Je,0),Xd(ze,Je,1,rt,1,0);break;case Qr:Hu(Me,Fe,rt,ze,Je);break;case Jp:Hu(Me,Fe,rt,ze,Je),Nx(ze,Je,rt,1,0);break;case Fg:Vu(Me,Fe,rt,ze,Je);break;default:e(0)}ue+=fe,Te+=Be}_.Ma+=oe}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=U.height)}}_.C=M,e(_.C<=_.i)}function Ta(_){var M;if(0<_.ua)return 0;for(M=0;M<_.Wb;++M){var U=_.Ya[M].G,K=_.Ya[M].H;if(0<U[1][K[1]+0].g||0<U[2][K[2]+0].g||0<U[3][K[3]+0].g)return 0}return 1}function $o(_,M,U,K,Z,oe){if(_.Z!=0){var ce=_.qd,ue=_.rd;for(e(ga[_.Z]!=null);M<U;++M)ga[_.Z](ce,ue,K,Z,K,Z,oe),ce=K,ue=Z,Z+=oe;_.qd=ce,_.rd=ue}}function Ss(_,M){var U=_.l.ma,K=U.Z==0||U.Z==1?_.l.j:_.C;if(K=_.C<K?K:_.C,e(M<=_.l.o),M>K){var Z=_.l.width,oe=U.ca,ce=U.tb+Z*K,ue=_.V,fe=_.Ba+_.c*K,ye=_.gc;e(_.ab==1),e(ye[0].hc==3),yl(ye[0],K,M,ue,fe,oe,ce),$o(U,K,M,oe,ce,Z)}_.C=_.Ma=M}function Wa(_,M,U,K,Z,oe,ce){var ue=_.$/K,fe=_.$%K,ye=_.m,Te=_.s,Be=U+_.$,be=Be;Z=U+K*Z;var Me=U+K*oe,Fe=280+Te.ua,rt=_.Pb?ue:16777216,ze=0<Te.ua?Te.Wa:null,Je=Te.wc,tt=Be<Me?Nr(Te,fe,ue):null;e(_.C<oe),e(Me<=Z);var ot=!1;e:for(;;){for(;ot||Be<Me;){var ut=0;if(ue>=rt){var fn=Be-U;e((rt=_).Pb),rt.wd=rt.m,rt.xd=fn,0<rt.s.ua&&Re(rt.s.Wa,rt.s.vb),rt=ue+$g}if(fe&Je||(tt=Nr(Te,fe,ue)),e(tt!=null),tt.Qb&&(M[Be]=tt.qb,ot=!0),!ot)if(me(ye),tt.jc){ut=ye,fn=M;var Xt=Be,Gn=tt.pd[te(ut)&Go-1];e(tt.jc),256>Gn.g?(he(ut,ut.u+Gn.g),fn[Xt]=Gn.value,ut=0):(he(ut,ut.u+Gn.g-256),e(256<=Gn.value),ut=Gn.value),ut==0&&(ot=!0)}else ut=en(tt.G[0],tt.H[0],ye);if(ye.h)break;if(ot||256>ut){if(!ot)if(tt.nd)M[Be]=(tt.qb|ut<<8)>>>0;else{if(me(ye),ot=en(tt.G[1],tt.H[1],ye),me(ye),fn=en(tt.G[2],tt.H[2],ye),Xt=en(tt.G[3],tt.H[3],ye),ye.h)break;M[Be]=(Xt<<24|ot<<16|ut<<8|fn)>>>0}if(ot=!1,++Be,++fe>=K&&(fe=0,++ue,ce!=null&&ue<=oe&&!(ue%16)&&ce(_,ue),ze!=null))for(;be<Be;)ut=M[be++],ze.X[(506832829*ut&4294967295)>>>ze.Mb]=ut}else if(280>ut){if(ut=Bt(ut-256,ye),fn=en(tt.G[4],tt.H[4],ye),me(ye),fn=On(K,fn=Bt(fn,ye)),ye.h)break;if(Be-U<fn||Z-Be<ut)break e;for(Xt=0;Xt<ut;++Xt)M[Be+Xt]=M[Be+Xt-fn];for(Be+=ut,fe+=ut;fe>=K;)fe-=K,++ue,ce!=null&&ue<=oe&&!(ue%16)&&ce(_,ue);if(e(Be<=Z),fe&Je&&(tt=Nr(Te,fe,ue)),ze!=null)for(;be<Be;)ut=M[be++],ze.X[(506832829*ut&4294967295)>>>ze.Mb]=ut}else{if(!(ut<Fe))break e;for(ot=ut-280,e(ze!=null);be<Be;)ut=M[be++],ze.X[(506832829*ut&4294967295)>>>ze.Mb]=ut;ut=Be,e(!(ot>>>(fn=ze).Xa)),M[ut]=fn.X[ot],ot=!0}ot||e(ye.h==le(ye))}if(_.Pb&&ye.h&&Be<Z)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Re(_.s.vb,_.s.Wa);else{if(ye.h)break e;ce?.(_,ue>oe?oe:ue),_.a=0,_.$=Be-U}return 1}return _.a=3,0}function fa(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var M=_.Wa;M!=null&&(M.X=null),_.vb=null,e(_!=null)}function zo(){var _=new dn;return _==null?null:(_.a=0,_.xb=hh,Cn("Predictor","VP8LPredictors"),Cn("Predictor","VP8LPredictors_C"),Cn("PredictorAdd","VP8LPredictorsAdd"),Cn("PredictorAdd","VP8LPredictorsAdd_C"),Yi=xt,ah=Yt,oh=$n,Wc=Pn,Hu=Ht,Vu=xn,Kd=ir,C.VP8LMapColor32b=Zl,C.VP8LMapColor8b=Vd,_)}function vo(_,M,U,K,Z){var oe=1,ce=[_],ue=[M],fe=K.m,ye=K.s,Te=null,Be=0;e:for(;;){if(U)for(;oe&&Q(fe,1);){var be=ce,Me=ue,Fe=K,rt=1,ze=Fe.m,Je=Fe.gc[Fe.ab],tt=Q(ze,2);if(Fe.Oc&1<<tt)oe=0;else{switch(Fe.Oc|=1<<tt,Je.hc=tt,Je.Ea=be[0],Je.nc=Me[0],Je.K=[null],++Fe.ab,e(4>=Fe.ab),tt){case 0:case 1:Je.b=Q(ze,3)+2,rt=vo(Ve(Je.Ea,Je.b),Ve(Je.nc,Je.b),0,Fe,Je.K),Je.K=Je.K[0];break;case 3:var ot,ut=Q(ze,8)+1,fn=16<ut?0:4<ut?1:2<ut?2:3;if(be[0]=Ve(Je.Ea,fn),Je.b=fn,ot=rt=vo(ut,1,0,Fe,Je.K)){var Xt,Gn=ut,nn=Je,fr=1<<(8>>nn.b),$i=s(fr);if($i==null)ot=0;else{var Xn=nn.K[0],Qt=nn.w;for($i[0]=nn.K[0][0],Xt=1;Xt<1*Gn;++Xt)$i[Xt]=ge(Xn[Qt+Xt],$i[Xt-1]);for(;Xt<4*fr;++Xt)$i[Xt]=0;nn.K[0]=null,nn.K[0]=$i,ot=1}}rt=ot;break;case 2:break;default:e(0)}oe=rt}}if(ce=ce[0],ue=ue[0],oe&&Q(fe,1)&&!(oe=1<=(Be=Q(fe,4))&&11>=Be)){K.a=3;break e}var It;if(It=oe)t:{var Xi,In,cr,si=K,Ds=ce,us=ue,Ci=Be,Es=U,Is=si.m,yi=si.s,yr=[null],Or=1,xi=0,Pr=Q1[Ci];n:for(;;){if(Es&&Q(Is,1)){var zi=Q(Is,3)+2,qi=Ve(Ds,zi),Zr=Ve(us,zi),va=qi*Zr;if(!vo(qi,Zr,0,si,yr))break n;for(yr=yr[0],yi.xc=zi,Xi=0;Xi<va;++Xi){var Wr=yr[Xi]>>8&65535;yr[Xi]=Wr,Wr>=Or&&(Or=Wr+1)}}if(Is.h)break n;for(In=0;5>In;++In){var Jr=Zd[In];!In&&0<Ci&&(Jr+=1<<Ci),xi<Jr&&(xi=Jr)}var ds=o(Or*Pr,L),Js=Or,to=o(Js,W);if(to==null)var Qi=null;else e(65536>=Js),Qi=to;var Zi=s(xi);if(Qi==null||Zi==null||ds==null){si.a=1;break n}var ya=ds;for(Xi=cr=0;Xi<Or;++Xi){var ei=Qi[Xi],xa=ei.G,Qo=ei.H,wl=0,Ls=1,Ji=0;for(In=0;5>In;++In){Jr=Zd[In],xa[In]=ya,Qo[In]=cr,!In&&0<Ci&&(Jr+=1<<Ci);i:{var Xu,Xc=Jr,gh=si,tc=Zi,nw=ya,Rx=cr,ui=0,Nl=gh.m,Dx=Q(Nl,1);if(i(tc,0,0,Xc),Dx){var Ix=Q(Nl,1)+1,qg=Q(Nl,1),Ug=Q(Nl,qg==0?1:8);tc[Ug]=1,Ix==2&&(tc[Ug=Q(Nl,8)]=1);var nc=1}else{var bi=s(19),fs=Q(Nl,4)+4;if(19<fs){gh.a=3;var es=0;break i}for(Xu=0;Xu<fs;++Xu)bi[L_[Xu]]=Q(Nl,3);var vh=void 0,Qc=void 0,yh=gh,U_=bi,_s=Xc,Hg=tc,im=0,rc=yh.m,Sl=8,So=o(128,L);r:for(;D(So,0,7,U_,19);){if(Q(rc,1)){var sm=2+2*Q(rc,3);if((vh=2+Q(rc,sm))>_s)break r}else vh=_s;for(Qc=0;Qc<_s&&vh--;){me(rc);var Vg=So[0+(127&te(rc))];he(rc,rc.u+Vg.g);var Qu=Vg.value;if(16>Qu)Hg[Qc++]=Qu,Qu!=0&&(Sl=Qu);else{var rw=Qu==16,Lx=Qu-16,iw=Bg[Lx],Fx=Q(rc,em[Lx])+iw;if(Qc+Fx>_s)break r;for(var sw=rw?Sl:0;0<Fx--;)Hg[Qc++]=sw}}im=1;break r}im||(yh.a=3),nc=im}(nc=nc&&!Nl.h)&&(ui=D(nw,Rx,8,tc,Xc)),nc&&ui!=0?es=ui:(gh.a=3,es=0)}if(es==0)break n;if(Ls&&X1[In]==1&&(Ls=ya[cr].g==0),wl+=ya[cr].g,cr+=es,3>=In){var xh,Wg=Zi[0];for(xh=1;xh<Jr;++xh)Zi[xh]>Wg&&(Wg=Zi[xh]);Ji+=Wg}}if(ei.nd=Ls,ei.Qb=0,Ls&&(ei.qb=(xa[3][Qo[3]+0].value<<24|xa[1][Qo[1]+0].value<<16|xa[2][Qo[2]+0].value)>>>0,wl==0&&256>xa[0][Qo[0]+0].value&&(ei.Qb=1,ei.qb+=xa[0][Qo[0]+0].value<<8)),ei.jc=!ei.Qb&&6>Ji,ei.jc){var am,jo=ei;for(am=0;am<Go;++am){var Zc=am,jl=jo.pd[Zc],rf=jo.G[0][jo.H[0]+Zc];256<=rf.value?(jl.g=rf.g+256,jl.value=rf.value):(jl.g=0,jl.value=0,Zc>>=sr(rf,8,jl),Zc>>=sr(jo.G[1][jo.H[1]+Zc],16,jl),Zc>>=sr(jo.G[2][jo.H[2]+Zc],0,jl),sr(jo.G[3][jo.H[3]+Zc],24,jl))}}}yi.vc=yr,yi.Wb=Or,yi.Ya=Qi,yi.yc=ds,It=1;break t}It=0}if(!(oe=It)){K.a=3;break e}if(0<Be){if(ye.ua=1<<Be,!ne(ye.Wa,Be)){K.a=1,oe=0;break e}}else ye.ua=0;var Kg=K,Gg=ce,aw=ue,Yg=Kg.s,Xg=Yg.xc;if(Kg.c=Gg,Kg.i=aw,Yg.md=Ve(Gg,Xg),Yg.wc=Xg==0?-1:(1<<Xg)-1,U){K.xb=ec;break e}if((Te=s(ce*ue))==null){K.a=1,oe=0;break e}oe=(oe=Wa(K,Te,0,ce,ue,ue,null))&&!fe.h;break e}return oe?(Z!=null?Z[0]=Te:(e(Te==null),e(U)),K.$=0,U||fa(ye)):fa(ye),oe}function Ul(_,M){var U=_.c*_.i,K=U+M+16*M;return e(_.c<=M),_.V=s(K),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+U+M,1)}function Rc(_,M){var U=_.C,K=M-U,Z=_.V,oe=_.Ba+_.c*U;for(e(M<=_.l.o);0<K;){var ce=16<K?16:K,ue=_.l.ma,fe=_.l.width,ye=fe*ce,Te=ue.ca,Be=ue.tb+fe*U,be=_.Ta,Me=_.Ua;Ii(_,ce,Z,oe),Sx(be,Me,Te,Be,ye),$o(ue,U,U+ce,Te,Be,fe),K-=ce,Z+=ce*_.c,U+=ce}e(U==M),_.C=_.Ma=M}function ha(){this.ub=this.yd=this.td=this.Rb=0}function Dc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qf(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Xr(){this.Yb=(function(){var _=[];return(function M(U,K,Z){for(var oe=Z[K],ce=0;ce<oe&&(U.push(Z.length>K+1?[]:0),!(Z.length<K+1));ce++)M(U[ce],K+1,Z)})(_,0,[3,11]),_})()}function Zf(){this.jb=s(3),this.Wc=l([4,8],Xr),this.Xc=l([4,17],Xr)}function Lu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ps(){this.ld=this.La=this.dd=this.tc=0}function Hl(){this.Na=this.la=0}function jt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function an(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ps),this.Y=0,this.ya=Array(new an),this.aa=0,this.l=new Ur}function nr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function gi(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new ha,this.Kc=new Dc,this.ed=new Lu,this.Qa=new Qf,this.Ic=this.$c=this.Aa=0,this.D=new Kn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,F),this.ia=0,this.pb=o(4,jt),this.Pa=new Zf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nr),this.Hd=0,this.rb=Array(new Hl),this.sb=0,this.wa=Array(new Ps),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new an),this.L=this.aa=0,this.gd=l([4,2],Ps),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ur(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qo(){var _=new gi;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Jd||(Jd=Oa)),_}function ci(_,M,U){return _.a==0&&(_.a=M,_.sc=U,_.cb=0),0}function Ms(_,M,U){return 3<=U&&_[M+0]==157&&_[M+1]==1&&_[M+2]==42}function Rs(_,M){if(_==null)return 0;if(_.a=0,_.sc="OK",M==null)return ci(_,2,"null VP8Io passed to VP8GetHeaders()");var U=M.data,K=M.w,Z=M.ha;if(4>Z)return ci(_,7,"Truncated header.");var oe=U[K+0]|U[K+1]<<8|U[K+2]<<16,ce=_.Od;if(ce.Rb=!(1&oe),ce.td=oe>>1&7,ce.yd=oe>>4&1,ce.ub=oe>>5,3<ce.td)return ci(_,3,"Incorrect keyframe parameters.");if(!ce.yd)return ci(_,4,"Frame not displayable.");K+=3,Z-=3;var ue=_.Kc;if(ce.Rb){if(7>Z)return ci(_,7,"cannot parse picture header");if(!Ms(U,K,Z))return ci(_,3,"Bad code word");ue.c=16383&(U[K+4]<<8|U[K+3]),ue.Td=U[K+4]>>6,ue.i=16383&(U[K+6]<<8|U[K+5]),ue.Ud=U[K+6]>>6,K+=7,Z-=7,_.za=ue.c+15>>4,_.Ub=ue.i+15>>4,M.width=ue.c,M.height=ue.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((oe=_.Pa).jb,0,255,oe.jb.length),e((oe=_.Qa)!=null),oe.Cb=0,oe.Bb=0,oe.Fb=1,i(oe.Zb,0,0,oe.Zb.length),i(oe.Lb,0,0,oe.Lb)}if(ce.ub>Z)return ci(_,7,"bad partition length");X(oe=_.m,U,K,ce.ub),K+=ce.ub,Z-=ce.ub,ce.Rb&&(ue.Ld=de(oe),ue.Kd=de(oe)),ue=_.Qa;var fe,ye=_.Pa;if(e(oe!=null),e(ue!=null),ue.Cb=de(oe),ue.Cb){if(ue.Bb=de(oe),de(oe)){for(ue.Fb=de(oe),fe=0;4>fe;++fe)ue.Zb[fe]=de(oe)?V(oe,7):0;for(fe=0;4>fe;++fe)ue.Lb[fe]=de(oe)?V(oe,6):0}if(ue.Bb)for(fe=0;3>fe;++fe)ye.jb[fe]=de(oe)?q(oe,8):255}else ue.Bb=0;if(oe.Ka)return ci(_,3,"cannot parse segment header");if((ue=_.ed).zd=de(oe),ue.Tb=q(oe,6),ue.wb=q(oe,3),ue.Pc=de(oe),ue.Pc&&de(oe)){for(ye=0;4>ye;++ye)de(oe)&&(ue.vd[ye]=V(oe,6));for(ye=0;4>ye;++ye)de(oe)&&(ue.od[ye]=V(oe,6))}if(_.L=ue.Tb==0?0:ue.zd?1:2,oe.Ka)return ci(_,3,"cannot parse filter header");var Te=Z;if(Z=fe=K,K=fe+Te,ue=Te,_.Xb=(1<<q(_.m,2))-1,Te<3*(ye=_.Xb))U=7;else{for(fe+=3*ye,ue-=3*ye,Te=0;Te<ye;++Te){var Be=U[Z+0]|U[Z+1]<<8|U[Z+2]<<16;Be>ue&&(Be=ue),X(_.Jc[+Te],U,fe,Be),fe+=Be,ue-=Be,Z+=3}X(_.Jc[+ye],U,fe,ue),U=fe<K?0:5}if(U!=0)return ci(_,U,"cannot parse partitions");for(U=q(fe=_.m,7),Z=de(fe)?V(fe,4):0,K=de(fe)?V(fe,4):0,ue=de(fe)?V(fe,4):0,ye=de(fe)?V(fe,4):0,fe=de(fe)?V(fe,4):0,Te=_.Qa,Be=0;4>Be;++Be){if(Te.Cb){var be=Te.Zb[Be];Te.Fb||(be+=U)}else{if(0<Be){_.pb[Be]=_.pb[0];continue}be=U}var Me=_.pb[Be];Me.Sc[0]=fh[Li(be+Z,127)],Me.Sc[1]=tm[Li(be+0,127)],Me.Eb[0]=2*fh[Li(be+K,127)],Me.Eb[1]=101581*tm[Li(be+ue,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=fh[Li(be+ye,117)],Me.Qc[1]=tm[Li(be+fe,127)],Me.lc=be+fe}if(!ce.Rb)return ci(_,4,"Not a key frame.");for(de(oe),ce=_.Pa,U=0;4>U;++U){for(Z=0;8>Z;++Z)for(K=0;3>K;++K)for(ue=0;11>ue;++ue)ye=Ne(oe,$_[U][Z][K][ue])?q(oe,8):J1[U][Z][K][ue],ce.Wc[U][Z].Yb[K][ue]=ye;for(Z=0;17>Z;++Z)ce.Xc[U][Z]=ce.Wc[U][Ox[Z]]}return _.kc=de(oe),_.kc&&(_.Bd=q(oe,8)),_.cb=1}function Oa(_,M,U,K,Z,oe,ce){var ue=M[Z].Yb[U];for(U=0;16>Z;++Z){if(!Ne(_,ue[U+0]))return Z;for(;!Ne(_,ue[U+1]);)if(ue=M[++Z].Yb[0],U=0,Z==16)return 16;var fe=M[Z+1].Yb;if(Ne(_,ue[U+2])){var ye=_,Te=0;if(Ne(ye,(be=ue)[(Be=U)+3]))if(Ne(ye,be[Be+6])){for(ue=0,Be=2*(Te=Ne(ye,be[Be+8]))+(be=Ne(ye,be[Be+9+Te])),Te=0,be=kx[Be];be[ue];++ue)Te+=Te+Ne(ye,be[ue]);Te+=3+(8<<Be)}else Ne(ye,be[Be+7])?(Te=7+2*Ne(ye,165),Te+=Ne(ye,145)):Te=5+Ne(ye,159);else Te=Ne(ye,be[Be+4])?3+Ne(ye,be[Be+5]):2;ue=fe[2]}else Te=1,ue=fe[1];fe=ce+Tx[Z],0>(ye=_).b&&xe(ye);var Be,be=ye.b,Me=(Be=ye.Ca>>1)-(ye.I>>be)>>31;--ye.b,ye.Ca+=Me,ye.Ca|=1,ye.I-=(Be+1&Me)<<be,oe[fe]=((Te^Me)-Me)*K[(0<Z)+0]}return 16}function Ka(_){var M=_.rb[_.sb-1];M.la=0,M.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function Xs(_,M,U,K,Z){Z=_[M+U+32*K]+(Z>>3),_[M+U+32*K]=-256&Z?0>Z?0:255:Z}function Ic(_,M,U,K,Z,oe){Xs(_,M,0,U,K+Z),Xs(_,M,1,U,K+oe),Xs(_,M,2,U,K-oe),Xs(_,M,3,U,K-Z)}function ji(_){return(20091*_>>16)+_}function Lc(_,M,U,K){var Z,oe=0,ce=s(16);for(Z=0;4>Z;++Z){var ue=_[M+0]+_[M+8],fe=_[M+0]-_[M+8],ye=(35468*_[M+4]>>16)-ji(_[M+12]),Te=ji(_[M+4])+(35468*_[M+12]>>16);ce[oe+0]=ue+Te,ce[oe+1]=fe+ye,ce[oe+2]=fe-ye,ce[oe+3]=ue-Te,oe+=4,M++}for(Z=oe=0;4>Z;++Z)ue=(_=ce[oe+0]+4)+ce[oe+8],fe=_-ce[oe+8],ye=(35468*ce[oe+4]>>16)-ji(ce[oe+12]),Xs(U,K,0,0,ue+(Te=ji(ce[oe+4])+(35468*ce[oe+12]>>16))),Xs(U,K,1,0,fe+ye),Xs(U,K,2,0,fe-ye),Xs(U,K,3,0,ue-Te),oe++,K+=32}function Jf(_,M,U,K){var Z=_[M+0]+4,oe=35468*_[M+4]>>16,ce=ji(_[M+4]),ue=35468*_[M+1]>>16;Ic(U,K,0,Z+ce,_=ji(_[M+1]),ue),Ic(U,K,1,Z+oe,_,ue),Ic(U,K,2,Z-oe,_,ue),Ic(U,K,3,Z-ce,_,ue)}function Vl(_,M,U,K,Z){Lc(_,M,U,K),Z&&Lc(_,M+16,U,K+4)}function Wl(_,M,U,K){Gd(_,M+0,U,K,1),Gd(_,M+32,U,K+128,1)}function Ki(_,M,U,K){var Z;for(_=_[M+0]+4,Z=0;4>Z;++Z)for(M=0;4>M;++M)Xs(U,K,M,Z,_)}function Fu(_,M,U,K){_[M+0]&&Tr(_,M+0,U,K),_[M+16]&&Tr(_,M+16,U,K+4),_[M+32]&&Tr(_,M+32,U,K+128),_[M+48]&&Tr(_,M+48,U,K+128+4)}function dr(_,M,U,K){var Z,oe=s(16);for(Z=0;4>Z;++Z){var ce=_[M+0+Z]+_[M+12+Z],ue=_[M+4+Z]+_[M+8+Z],fe=_[M+4+Z]-_[M+8+Z],ye=_[M+0+Z]-_[M+12+Z];oe[0+Z]=ce+ue,oe[8+Z]=ce-ue,oe[4+Z]=ye+fe,oe[12+Z]=ye-fe}for(Z=0;4>Z;++Z)ce=(_=oe[0+4*Z]+3)+oe[3+4*Z],ue=oe[1+4*Z]+oe[2+4*Z],fe=oe[1+4*Z]-oe[2+4*Z],ye=_-oe[3+4*Z],U[K+0]=ce+ue>>3,U[K+16]=ye+fe>>3,U[K+32]=ce-ue>>3,U[K+48]=ye-fe>>3,K+=64}function wn(_,M,U){var K,Z=M-32,oe=Ma,ce=255-_[Z-1];for(K=0;K<U;++K){var ue,fe=oe,ye=ce+_[M-1];for(ue=0;ue<U;++ue)_[M+ue]=fe[ye+_[Z+ue]];M+=32}}function Fc(_,M){wn(_,M,4)}function Ei(_,M){wn(_,M,8)}function Ar(_,M){wn(_,M,16)}function Bc(_,M){var U;for(U=0;16>U;++U)r(_,M+32*U,_,M-32,16)}function Ga(_,M){var U;for(U=16;0<U;--U)i(_,M,_[M-1],16),M+=32}function yo(_,M,U){var K;for(K=0;16>K;++K)i(M,U+32*K,_,16)}function Pa(_,M){var U,K=16;for(U=0;16>U;++U)K+=_[M-1+32*U]+_[M+U-32];yo(K>>5,_,M)}function Mt(_,M){var U,K=8;for(U=0;16>U;++U)K+=_[M-1+32*U];yo(K>>4,_,M)}function Vt(_,M){var U,K=8;for(U=0;16>U;++U)K+=_[M+U-32];yo(K>>4,_,M)}function Sn(_,M){yo(128,_,M)}function Ft(_,M,U){return _+2*M+U+2>>2}function vi(_,M){var U,K=M-32;for(K=new Uint8Array([Ft(_[K-1],_[K+0],_[K+1]),Ft(_[K+0],_[K+1],_[K+2]),Ft(_[K+1],_[K+2],_[K+3]),Ft(_[K+2],_[K+3],_[K+4])]),U=0;4>U;++U)r(_,M+32*U,K,0,K.length)}function as(_,M){var U=_[M-1],K=_[M-1+32],Z=_[M-1+64],oe=_[M-1+96];Ce(_,M+0,16843009*Ft(_[M-1-32],U,K)),Ce(_,M+32,16843009*Ft(U,K,Z)),Ce(_,M+64,16843009*Ft(K,Z,oe)),Ce(_,M+96,16843009*Ft(Z,oe,oe))}function Bp(_,M){var U,K=4;for(U=0;4>U;++U)K+=_[M+U-32]+_[M-1+32*U];for(K>>=3,U=0;4>U;++U)i(_,M+32*U,K,4)}function eh(_,M){var U=_[M-1+0],K=_[M-1+32],Z=_[M-1+64],oe=_[M-1-32],ce=_[M+0-32],ue=_[M+1-32],fe=_[M+2-32],ye=_[M+3-32];_[M+0+96]=Ft(K,Z,_[M-1+96]),_[M+1+96]=_[M+0+64]=Ft(U,K,Z),_[M+2+96]=_[M+1+64]=_[M+0+32]=Ft(oe,U,K),_[M+3+96]=_[M+2+64]=_[M+1+32]=_[M+0+0]=Ft(ce,oe,U),_[M+3+64]=_[M+2+32]=_[M+1+0]=Ft(ue,ce,oe),_[M+3+32]=_[M+2+0]=Ft(fe,ue,ce),_[M+3+0]=Ft(ye,fe,ue)}function xo(_,M){var U=_[M+1-32],K=_[M+2-32],Z=_[M+3-32],oe=_[M+4-32],ce=_[M+5-32],ue=_[M+6-32],fe=_[M+7-32];_[M+0+0]=Ft(_[M+0-32],U,K),_[M+1+0]=_[M+0+32]=Ft(U,K,Z),_[M+2+0]=_[M+1+32]=_[M+0+64]=Ft(K,Z,oe),_[M+3+0]=_[M+2+32]=_[M+1+64]=_[M+0+96]=Ft(Z,oe,ce),_[M+3+32]=_[M+2+64]=_[M+1+96]=Ft(oe,ce,ue),_[M+3+64]=_[M+2+96]=Ft(ce,ue,fe),_[M+3+96]=Ft(ue,fe,fe)}function $c(_,M){var U=_[M-1+0],K=_[M-1+32],Z=_[M-1+64],oe=_[M-1-32],ce=_[M+0-32],ue=_[M+1-32],fe=_[M+2-32],ye=_[M+3-32];_[M+0+0]=_[M+1+64]=oe+ce+1>>1,_[M+1+0]=_[M+2+64]=ce+ue+1>>1,_[M+2+0]=_[M+3+64]=ue+fe+1>>1,_[M+3+0]=fe+ye+1>>1,_[M+0+96]=Ft(Z,K,U),_[M+0+64]=Ft(K,U,oe),_[M+0+32]=_[M+1+96]=Ft(U,oe,ce),_[M+1+32]=_[M+2+96]=Ft(oe,ce,ue),_[M+2+32]=_[M+3+96]=Ft(ce,ue,fe),_[M+3+32]=Ft(ue,fe,ye)}function Pg(_,M){var U=_[M+0-32],K=_[M+1-32],Z=_[M+2-32],oe=_[M+3-32],ce=_[M+4-32],ue=_[M+5-32],fe=_[M+6-32],ye=_[M+7-32];_[M+0+0]=U+K+1>>1,_[M+1+0]=_[M+0+64]=K+Z+1>>1,_[M+2+0]=_[M+1+64]=Z+oe+1>>1,_[M+3+0]=_[M+2+64]=oe+ce+1>>1,_[M+0+32]=Ft(U,K,Z),_[M+1+32]=_[M+0+96]=Ft(K,Z,oe),_[M+2+32]=_[M+1+96]=Ft(Z,oe,ce),_[M+3+32]=_[M+2+96]=Ft(oe,ce,ue),_[M+3+64]=Ft(ce,ue,fe),_[M+3+96]=Ft(ue,fe,ye)}function th(_,M){var U=_[M-1+0],K=_[M-1+32],Z=_[M-1+64],oe=_[M-1+96];_[M+0+0]=U+K+1>>1,_[M+2+0]=_[M+0+32]=K+Z+1>>1,_[M+2+32]=_[M+0+64]=Z+oe+1>>1,_[M+1+0]=Ft(U,K,Z),_[M+3+0]=_[M+1+32]=Ft(K,Z,oe),_[M+3+32]=_[M+1+64]=Ft(Z,oe,oe),_[M+3+64]=_[M+2+64]=_[M+0+96]=_[M+1+96]=_[M+2+96]=_[M+3+96]=oe}function Dd(_,M){var U=_[M-1+0],K=_[M-1+32],Z=_[M-1+64],oe=_[M-1+96],ce=_[M-1-32],ue=_[M+0-32],fe=_[M+1-32],ye=_[M+2-32];_[M+0+0]=_[M+2+32]=U+ce+1>>1,_[M+0+32]=_[M+2+64]=K+U+1>>1,_[M+0+64]=_[M+2+96]=Z+K+1>>1,_[M+0+96]=oe+Z+1>>1,_[M+3+0]=Ft(ue,fe,ye),_[M+2+0]=Ft(ce,ue,fe),_[M+1+0]=_[M+3+32]=Ft(U,ce,ue),_[M+1+32]=_[M+3+64]=Ft(K,U,ce),_[M+1+64]=_[M+3+96]=Ft(Z,K,U),_[M+1+96]=Ft(oe,Z,K)}function $p(_,M){var U;for(U=0;8>U;++U)r(_,M+32*U,_,M-32,8)}function ml(_,M){var U;for(U=0;8>U;++U)i(_,M,_[M-1],8),M+=32}function Kl(_,M,U){var K;for(K=0;8>K;++K)i(M,U+32*K,_,8)}function gl(_,M){var U,K=8;for(U=0;8>U;++U)K+=_[M+U-32]+_[M-1+32*U];Kl(K>>4,_,M)}function nh(_,M){var U,K=4;for(U=0;8>U;++U)K+=_[M+U-32];Kl(K>>3,_,M)}function zp(_,M){var U,K=4;for(U=0;8>U;++U)K+=_[M-1+32*U];Kl(K>>3,_,M)}function qp(_,M){Kl(128,_,M)}function zc(_,M,U){var K=_[M-U],Z=_[M+0],oe=3*(Z-K)+Jl[1020+_[M-2*U]-_[M+U]],ce=uh[112+(oe+4>>3)];_[M-U]=Ma[255+K+uh[112+(oe+3>>3)]],_[M+0]=Ma[255+Z-ce]}function Gl(_,M,U,K){var Z=_[M+0],oe=_[M+U];return Yo[255+_[M-2*U]-_[M-U]]>K||Yo[255+oe-Z]>K}function Id(_,M,U,K){return 4*Yo[255+_[M-U]-_[M+0]]+Yo[255+_[M-2*U]-_[M+U]]<=K}function Ld(_,M,U,K,Z){var oe=_[M-3*U],ce=_[M-2*U],ue=_[M-U],fe=_[M+0],ye=_[M+U],Te=_[M+2*U],Be=_[M+3*U];return 4*Yo[255+ue-fe]+Yo[255+ce-ye]>K?0:Yo[255+_[M-4*U]-oe]<=Z&&Yo[255+oe-ce]<=Z&&Yo[255+ce-ue]<=Z&&Yo[255+Be-Te]<=Z&&Yo[255+Te-ye]<=Z&&Yo[255+ye-fe]<=Z}function Uo(_,M,U,K){var Z=2*K+1;for(K=0;16>K;++K)Id(_,M+K,U,Z)&&zc(_,M+K,U)}function qc(_,M,U,K){var Z=2*K+1;for(K=0;16>K;++K)Id(_,M+K*U,1,Z)&&zc(_,M+K*U,1)}function Fd(_,M,U,K){var Z;for(Z=3;0<Z;--Z)Uo(_,M+=4*U,U,K)}function Up(_,M,U,K){var Z;for(Z=3;0<Z;--Z)qc(_,M+=4,U,K)}function Ho(_,M,U,K,Z,oe,ce,ue){for(oe=2*oe+1;0<Z--;){if(Ld(_,M,U,oe,ce))if(Gl(_,M,U,ue))zc(_,M,U);else{var fe=_,ye=M,Te=U,Be=fe[ye-2*Te],be=fe[ye-Te],Me=fe[ye+0],Fe=fe[ye+Te],rt=fe[ye+2*Te],ze=27*(tt=Jl[1020+3*(Me-be)+Jl[1020+Be-Fe]])+63>>7,Je=18*tt+63>>7,tt=9*tt+63>>7;fe[ye-3*Te]=Ma[255+fe[ye-3*Te]+tt],fe[ye-2*Te]=Ma[255+Be+Je],fe[ye-Te]=Ma[255+be+ze],fe[ye+0]=Ma[255+Me-ze],fe[ye+Te]=Ma[255+Fe-Je],fe[ye+2*Te]=Ma[255+rt-tt]}M+=K}}function Vo(_,M,U,K,Z,oe,ce,ue){for(oe=2*oe+1;0<Z--;){if(Ld(_,M,U,oe,ce))if(Gl(_,M,U,ue))zc(_,M,U);else{var fe=_,ye=M,Te=U,Be=fe[ye-Te],be=fe[ye+0],Me=fe[ye+Te],Fe=uh[112+(4+(rt=3*(be-Be))>>3)],rt=uh[112+(rt+3>>3)],ze=Fe+1>>1;fe[ye-2*Te]=Ma[255+fe[ye-2*Te]+ze],fe[ye-Te]=Ma[255+Be+rt],fe[ye+0]=Ma[255+be-Fe],fe[ye+Te]=Ma[255+Me-ze]}M+=K}}function Hp(_,M,U,K,Z,oe){Ho(_,M,U,1,16,K,Z,oe)}function pa(_,M,U,K,Z,oe){Ho(_,M,1,U,16,K,Z,oe)}function Wo(_,M,U,K,Z,oe){var ce;for(ce=3;0<ce;--ce)Vo(_,M+=4*U,U,1,16,K,Z,oe)}function rh(_,M,U,K,Z,oe){var ce;for(ce=3;0<ce;--ce)Vo(_,M+=4,1,U,16,K,Z,oe)}function B(_,M,U,K,Z,oe,ce,ue){Ho(_,M,Z,1,8,oe,ce,ue),Ho(U,K,Z,1,8,oe,ce,ue)}function ee(_,M,U,K,Z,oe,ce,ue){Ho(_,M,1,Z,8,oe,ce,ue),Ho(U,K,1,Z,8,oe,ce,ue)}function we(_,M,U,K,Z,oe,ce,ue){Vo(_,M+4*Z,Z,1,8,oe,ce,ue),Vo(U,K+4*Z,Z,1,8,oe,ce,ue)}function Ae(_,M,U,K,Z,oe,ce,ue){Vo(_,M+4,1,Z,8,oe,ce,ue),Vo(U,K+4,1,Z,8,oe,ce,ue)}function Ie(){this.ba=new vn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new je,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function it(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tn(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new L}function dn(){this.xb=this.a=0,this.l=new Ur,this.ca=new vn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tn,this.ab=0,this.gc=o(4,mt),this.Oc=0}function zn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ur,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qn(_,M,U,K,Z,oe,ce){for(_=_==null?0:_[M+0],M=0;M<ce;++M)Z[oe+M]=_+U[K+M]&255,_=Z[oe+M]}function kr(_,M,U,K,Z,oe,ce){var ue;if(_==null)qn(null,null,U,K,Z,oe,ce);else for(ue=0;ue<ce;++ue)Z[oe+ue]=_[M+ue]+U[K+ue]&255}function _i(_,M,U,K,Z,oe,ce){if(_==null)qn(null,null,U,K,Z,oe,ce);else{var ue,fe=_[M+0],ye=fe,Te=fe;for(ue=0;ue<ce;++ue)ye=Te+(fe=_[M+ue])-ye,Te=U[K+ue]+(-256&ye?0>ye?0:255:ye)&255,ye=fe,Z[oe+ue]=Te}}function ls(_,M,U,K){var Z=M.width,oe=M.o;if(e(_!=null&&M!=null),0>U||0>=K||U+K>oe)return null;if(!_.Cc){if(_.ga==null){var ce;if(_.ga=new zn,(ce=_.ga==null)||(ce=M.width*M.o,e(_.Gb.length==0),_.Gb=s(ce),_.Uc=0,_.Gb==null?ce=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ce=1),ce=!ce),!ce){ce=_.ga;var ue=_.Fa,fe=_.P,ye=_.qc,Te=_.mb,Be=_.nb,be=fe+1,Me=ye-1,Fe=ce.l;if(e(ue!=null&&Te!=null&&M!=null),ga[0]=null,ga[1]=qn,ga[2]=kr,ga[3]=_i,ce.ca=Te,ce.tb=Be,ce.c=M.width,ce.i=M.height,e(0<ce.c&&0<ce.i),1>=ye)M=0;else if(ce.$a=3&ue[fe+0],ce.Z=ue[fe+0]>>2&3,ce.Lc=ue[fe+0]>>4&3,fe=ue[fe+0]>>6&3,0>ce.$a||1<ce.$a||4<=ce.Z||1<ce.Lc||fe)M=0;else if(Fe.put=Dt,Fe.ac=Tn,Fe.bc=wt,Fe.ma=ce,Fe.width=M.width,Fe.height=M.height,Fe.Da=M.Da,Fe.v=M.v,Fe.va=M.va,Fe.j=M.j,Fe.o=M.o,ce.$a)e:{e(ce.$a==1),M=zo();t:for(;;){if(M==null){M=0;break e}if(e(ce!=null),ce.mc=M,M.c=ce.c,M.i=ce.i,M.l=ce.l,M.l.ma=ce,M.l.width=ce.c,M.l.height=ce.i,M.a=0,Y(M.m,ue,be,Me),!vo(ce.c,ce.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Ta(M.s)?(ce.ic=1,ue=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(ue),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(ce.ic=0,M=Ul(M,ce.c)),!M))break t;M=1;break e}ce.mc=null,M=0}else M=Me>=ce.c*ce.i;ce=!M}if(ce)return null;_.ga.Lc!=1?_.Ga=0:K=oe-U}e(_.ga!=null),e(U+K<=oe);e:{if(M=(ue=_.ga).c,oe=ue.l.o,ue.$a==0){if(be=_.rc,Me=_.Vc,Fe=_.Fa,fe=_.P+1+U*M,ye=_.mb,Te=_.nb+U*M,e(fe<=_.P+_.qc),ue.Z!=0)for(e(ga[ue.Z]!=null),ce=0;ce<K;++ce)ga[ue.Z](be,Me,Fe,fe,ye,Te,M),be=ye,Me=Te,Te+=M,fe+=M;else for(ce=0;ce<K;++ce)r(ye,Te,Fe,fe,M),be=ye,Me=Te,Te+=M,fe+=M;_.rc=be,_.Vc=Me}else{if(e(ue.mc!=null),M=U+K,e((ce=ue.mc)!=null),e(M<=ce.i),ce.C>=M)M=1;else if(ue.ic||Ko(),ue.ic){ue=ce.V,be=ce.Ba,Me=ce.c;var rt=ce.i,ze=(Fe=1,fe=ce.$/Me,ye=ce.$%Me,Te=ce.m,Be=ce.s,ce.$),Je=Me*rt,tt=Me*M,ot=Be.wc,ut=ze<tt?Nr(Be,ye,fe):null;e(ze<=Je),e(M<=rt),e(Ta(Be));t:for(;;){for(;!Te.h&&ze<tt;){if(ye&ot||(ut=Nr(Be,ye,fe)),e(ut!=null),me(Te),256>(rt=en(ut.G[0],ut.H[0],Te)))ue[be+ze]=rt,++ze,++ye>=Me&&(ye=0,++fe<=M&&!(fe%16)&&Ss(ce,fe));else{if(!(280>rt)){Fe=0;break t}rt=Bt(rt-256,Te);var fn,Xt=en(ut.G[4],ut.H[4],Te);if(me(Te),!(ze>=(Xt=On(Me,Xt=Bt(Xt,Te)))&&Je-ze>=rt)){Fe=0;break t}for(fn=0;fn<rt;++fn)ue[be+ze+fn]=ue[be+ze+fn-Xt];for(ze+=rt,ye+=rt;ye>=Me;)ye-=Me,++fe<=M&&!(fe%16)&&Ss(ce,fe);ze<tt&&ye&ot&&(ut=Nr(Be,ye,fe))}e(Te.h==le(Te))}Ss(ce,fe>M?M:fe);break t}!Fe||Te.h&&ze<Je?(Fe=0,ce.a=Te.h?5:3):ce.$=ze,M=Fe}else M=Wa(ce,ce.V,ce.Ba,ce.c,ce.i,M,Rc);if(!M){K=0;break e}}U+K>=oe&&(_.Cc=1),K=1}if(!K)return null;if(_.Cc&&((K=_.ga)!=null&&(K.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+U*Z}function ii(_,M,U,K,Z,oe){for(;0<Z--;){var ce,ue=_,fe=M+(U?1:0),ye=_,Te=M+(U?0:3);for(ce=0;ce<K;++ce){var Be=ye[Te+4*ce];Be!=255&&(Be*=32897,ue[fe+4*ce+0]=ue[fe+4*ce+0]*Be>>23,ue[fe+4*ce+1]=ue[fe+4*ce+1]*Be>>23,ue[fe+4*ce+2]=ue[fe+4*ce+2]*Be>>23)}M+=oe}}function js(_,M,U,K,Z){for(;0<K--;){var oe;for(oe=0;oe<U;++oe){var ce=_[M+2*oe+0],ue=15&(ye=_[M+2*oe+1]),fe=4369*ue,ye=(240&ye|ye>>4)*fe>>16;_[M+2*oe+0]=(240&ce|ce>>4)*fe>>16&240|(15&ce|ce<<4)*fe>>16>>4&15,_[M+2*oe+1]=240&ye|ue}M+=Z}}function Gi(_,M,U,K,Z,oe,ce,ue){var fe,ye,Te=255;for(ye=0;ye<Z;++ye){for(fe=0;fe<K;++fe){var Be=_[M+fe];oe[ce+4*fe]=Be,Te&=Be}M+=U,ce+=ue}return Te!=255}function Qs(_,M,U,K,Z){var oe;for(oe=0;oe<Z;++oe)U[K+oe]=_[M+oe]>>8}function Ko(){Xd=ii,Nx=js,Yp=Gi,Sx=Qs}function Ya(_,M,U){C[_]=function(K,Z,oe,ce,ue,fe,ye,Te,Be,be,Me,Fe,rt,ze,Je,tt,ot){var ut,fn=ot-1>>1,Xt=ue[fe+0]|ye[Te+0]<<16,Gn=Be[be+0]|Me[Fe+0]<<16;e(K!=null);var nn=3*Xt+Gn+131074>>2;for(M(K[Z+0],255&nn,nn>>16,rt,ze),oe!=null&&(nn=3*Gn+Xt+131074>>2,M(oe[ce+0],255&nn,nn>>16,Je,tt)),ut=1;ut<=fn;++ut){var fr=ue[fe+ut]|ye[Te+ut]<<16,$i=Be[be+ut]|Me[Fe+ut]<<16,Xn=Xt+fr+Gn+$i+524296,Qt=Xn+2*(fr+Gn)>>3;nn=Qt+Xt>>1,Xt=(Xn=Xn+2*(Xt+$i)>>3)+fr>>1,M(K[Z+2*ut-1],255&nn,nn>>16,rt,ze+(2*ut-1)*U),M(K[Z+2*ut-0],255&Xt,Xt>>16,rt,ze+(2*ut-0)*U),oe!=null&&(nn=Xn+Gn>>1,Xt=Qt+$i>>1,M(oe[ce+2*ut-1],255&nn,nn>>16,Je,tt+(2*ut-1)*U),M(oe[ce+2*ut+0],255&Xt,Xt>>16,Je,tt+(2*ut+0)*U)),Xt=fr,Gn=$i}1&ot||(nn=3*Xt+Gn+131074>>2,M(K[Z+ot-1],255&nn,nn>>16,rt,ze+(ot-1)*U),oe!=null&&(nn=3*Gn+Xt+131074>>2,M(oe[ce+ot-1],255&nn,nn>>16,Je,tt+(ot-1)*U)))}}function Mg(){Za[Lg]=z_,Za[Ku]=Gu,Za[Y1]=q_,Za[Xp]=ph,Za[Qp]=ef,Za[Qr]=nm,Za[Fg]=Px,Za[dh]=Gu,Za[Qd]=ph,Za[Zp]=ef,Za[Jp]=nm}function Bu(_){return _&-16384?0>_?0:255:_>>Yu}function Bd(_,M){return Bu((19077*_>>8)+(26149*M>>8)-14234)}function $u(_,M,U){return Bu((19077*_>>8)-(6419*M>>8)-(13320*U>>8)+8708)}function $d(_,M){return Bu((19077*_>>8)+(33050*M>>8)-17685)}function zu(_,M,U,K,Z){K[Z+0]=Bd(_,U),K[Z+1]=$u(_,M,U),K[Z+2]=$d(_,M)}function zd(_,M,U,K,Z){K[Z+0]=$d(_,M),K[Z+1]=$u(_,M,U),K[Z+2]=Bd(_,U)}function ma(_,M,U,K,Z){var oe=$u(_,M,U);M=oe<<3&224|$d(_,M)>>3,K[Z+0]=248&Bd(_,U)|oe>>5,K[Z+1]=M}function qd(_,M,U,K,Z){var oe=240&$d(_,M)|15;K[Z+0]=240&Bd(_,U)|$u(_,M,U)>>4,K[Z+1]=oe}function Ud(_,M,U,K,Z){K[Z+0]=255,zu(_,M,U,K,Z+1)}function Vp(_,M,U,K,Z){zd(_,M,U,K,Z),K[Z+3]=255}function Wp(_,M,U,K,Z){zu(_,M,U,K,Z),K[Z+3]=255}function Li(_,M){return 0>_?0:_>M?M:_}function vl(_,M,U){C[_]=function(K,Z,oe,ce,ue,fe,ye,Te,Be){for(var be=Te+(-2&Be)*U;Te!=be;)M(K[Z+0],oe[ce+0],ue[fe+0],ye,Te),M(K[Z+1],oe[ce+0],ue[fe+0],ye,Te+U),Z+=2,++ce,++fe,Te+=2*U;1&Be&&M(K[Z+0],oe[ce+0],ue[fe+0],ye,Te)}}function Yl(_,M,U){return U==0?_==0?M==0?6:5:M==0?4:0:U}function Rg(_,M,U,K,Z){switch(_>>>30){case 3:Gd(M,U,K,Z,0);break;case 2:Fi(M,U,K,Z);break;case 1:Tr(M,U,K,Z)}}function bo(_,M){var U,K,Z=M.M,oe=M.Nb,ce=_.oc,ue=_.pc+40,fe=_.oc,ye=_.pc+584,Te=_.oc,Be=_.pc+600;for(U=0;16>U;++U)ce[ue+32*U-1]=129;for(U=0;8>U;++U)fe[ye+32*U-1]=129,Te[Be+32*U-1]=129;for(0<Z?ce[ue-1-32]=fe[ye-1-32]=Te[Be-1-32]=129:(i(ce,ue-32-1,127,21),i(fe,ye-32-1,127,9),i(Te,Be-32-1,127,9)),K=0;K<_.za;++K){var be=M.ya[M.aa+K];if(0<K){for(U=-1;16>U;++U)r(ce,ue+32*U-4,ce,ue+32*U+12,4);for(U=-1;8>U;++U)r(fe,ye+32*U-4,fe,ye+32*U+4,4),r(Te,Be+32*U-4,Te,Be+32*U+4,4)}var Me=_.Gd,Fe=_.Hd+K,rt=be.ad,ze=be.Hc;if(0<Z&&(r(ce,ue-32,Me[Fe].y,0,16),r(fe,ye-32,Me[Fe].f,0,8),r(Te,Be-32,Me[Fe].ea,0,8)),be.Za){var Je=ce,tt=ue-32+16;for(0<Z&&(K>=_.za-1?i(Je,tt,Me[Fe].y[15],4):r(Je,tt,Me[Fe+1].y,0,4)),U=0;4>U;U++)Je[tt+128+U]=Je[tt+256+U]=Je[tt+384+U]=Je[tt+0+U];for(U=0;16>U;++U,ze<<=2)Je=ce,tt=ue+Mx[U],Xo[be.Ob[U]](Je,tt),Rg(ze,rt,16*+U,Je,tt)}else if(Je=Yl(K,Z,be.Ob[0]),Ra[Je](ce,ue),ze!=0)for(U=0;16>U;++U,ze<<=2)Rg(ze,rt,16*+U,ce,ue+Mx[U]);for(U=be.Gc,Je=Yl(K,Z,be.Dd),Qa[Je](fe,ye),Qa[Je](Te,Be),ze=rt,Je=fe,tt=ye,255&(be=0|U)&&(170&be?Xa(ze,256,Je,tt):Hr(ze,256,Je,tt)),be=Te,ze=Be,255&(U>>=8)&&(170&U?Xa(rt,320,be,ze):Hr(rt,320,be,ze)),Z<_.Ub-1&&(r(Me[Fe].y,0,ce,ue+480,16),r(Me[Fe].f,0,fe,ye+224,8),r(Me[Fe].ea,0,Te,Be+224,8)),U=8*oe*_.B,Me=_.sa,Fe=_.ta+16*K+16*oe*_.R,rt=_.qa,be=_.ra+8*K+U,ze=_.Ha,Je=_.Ia+8*K+U,U=0;16>U;++U)r(Me,Fe+U*_.R,ce,ue+32*U,16);for(U=0;8>U;++U)r(rt,be+U*_.B,fe,ye+32*U,8),r(ze,Je+U*_.B,Te,Be+32*U,8)}}function qu(_,M,U,K,Z,oe,ce,ue,fe){var ye=[0],Te=[0],Be=0,be=fe!=null?fe.kd:0,Me=fe??new it;if(_==null||12>U)return 7;Me.data=_,Me.w=M,Me.ha=U,M=[M],U=[U],Me.gb=[Me.gb];e:{var Fe=M,rt=U,ze=Me.gb;if(e(_!=null),e(rt!=null),e(ze!=null),ze[0]=0,12<=rt[0]&&!n(_,Fe[0],"RIFF")){if(n(_,Fe[0]+8,"WEBP")){ze=3;break e}var Je=J(_,Fe[0]+4);if(12>Je||4294967286<Je){ze=3;break e}if(be&&Je>rt[0]-8){ze=7;break e}ze[0]=Je,Fe[0]+=12,rt[0]-=12}ze=0}if(ze!=0)return ze;for(Je=0<Me.gb[0],U=U[0];;){e:{var tt=_;rt=M,ze=U;var ot=ye,ut=Te,fn=Fe=[0];if((nn=Be=[Be])[0]=0,8>ze[0])ze=7;else{if(!n(tt,rt[0],"VP8X")){if(J(tt,rt[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var Xt=J(tt,rt[0]+8),Gn=1+Pe(tt,rt[0]+12);if(2147483648<=Gn*(tt=1+Pe(tt,rt[0]+15))){ze=3;break e}fn!=null&&(fn[0]=Xt),ot!=null&&(ot[0]=Gn),ut!=null&&(ut[0]=tt),rt[0]+=18,ze[0]-=18,nn[0]=1}ze=0}}if(Be=Be[0],Fe=Fe[0],ze!=0)return ze;if(rt=!!(2&Fe),!Je&&Be)return 3;if(oe!=null&&(oe[0]=!!(16&Fe)),ce!=null&&(ce[0]=rt),ue!=null&&(ue[0]=0),ce=ye[0],Fe=Te[0],Be&&rt&&fe==null){ze=0;break}if(4>U){ze=7;break}if(Je&&Be||!Je&&!Be&&!n(_,M[0],"ALPH")){U=[U],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{Xt=_,ze=M,Je=U;var nn=Me.gb;ot=Me.na,ut=Me.P,fn=Me.Sa,Gn=22,e(Xt!=null),e(Je!=null),tt=ze[0];var fr=Je[0];for(e(ot!=null),e(fn!=null),ot[0]=null,ut[0]=null,fn[0]=0;;){if(ze[0]=tt,Je[0]=fr,8>fr){ze=7;break e}var $i=J(Xt,tt+4);if(4294967286<$i){ze=3;break e}var Xn=8+$i+1&-2;if(Gn+=Xn,0<nn&&Gn>nn){ze=3;break e}if(!n(Xt,tt,"VP8 ")||!n(Xt,tt,"VP8L")){ze=0;break e}if(fr[0]<Xn){ze=7;break e}n(Xt,tt,"ALPH")||(ot[0]=Xt,ut[0]=tt+8,fn[0]=$i),tt+=Xn,fr-=Xn}}if(U=U[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],ze!=0)break}U=[U],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(nn=_,ze=M,Je=U,ot=Me.gb[0],ut=Me.Ja,fn=Me.xa,Xt=ze[0],tt=!n(nn,Xt,"VP8 "),Gn=!n(nn,Xt,"VP8L"),e(nn!=null),e(Je!=null),e(ut!=null),e(fn!=null),8>Je[0])ze=7;else{if(tt||Gn){if(nn=J(nn,Xt+4),12<=ot&&nn>ot-12){ze=3;break e}if(be&&nn>Je[0]-8){ze=7;break e}ut[0]=nn,ze[0]+=8,Je[0]-=8,fn[0]=Gn}else fn[0]=5<=Je[0]&&nn[Xt+0]==47&&!(nn[Xt+4]>>5),ut[0]=Je[0];ze=0}if(U=U[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],M=M[0],ze!=0)break;if(4294967286<Me.Ja)return 3;if(ue==null||rt||(ue[0]=Me.xa?2:1),ce=[ce],Fe=[Fe],Me.xa){if(5>U){ze=7;break}ue=ce,be=Fe,rt=oe,_==null||5>U?_=0:5<=U&&_[M+0]==47&&!(_[M+4]>>5)?(Je=[0],nn=[0],ot=[0],Y(ut=new G,_,M,U),At(ut,Je,nn,ot)?(ue!=null&&(ue[0]=Je[0]),be!=null&&(be[0]=nn[0]),rt!=null&&(rt[0]=ot[0]),_=1):_=0):_=0}else{if(10>U){ze=7;break}ue=Fe,_==null||10>U||!Ms(_,M+3,U-3)?_=0:(be=_[M+0]|_[M+1]<<8|_[M+2]<<16,rt=16383&(_[M+7]<<8|_[M+6]),_=16383&(_[M+9]<<8|_[M+8]),1&be||3<(be>>1&7)||!(be>>4&1)||be>>5>=Me.Ja||!rt||!_?_=0:(ce&&(ce[0]=rt),ue&&(ue[0]=_),_=1))}if(!_||(ce=ce[0],Fe=Fe[0],Be&&(ye[0]!=ce||Te[0]!=Fe)))return 3;fe!=null&&(fe[0]=Me,fe.offset=M-fe.w,e(4294967286>M-fe.w),e(fe.offset==fe.ha-U));break}return ze==0||ze==7&&Be&&fe==null?(oe!=null&&(oe[0]|=Me.na!=null&&0<Me.na.length),K!=null&&(K[0]=ce),Z!=null&&(Z[0]=Fe),0):ze}function ih(_,M,U){var K=M.width,Z=M.height,oe=0,ce=0,ue=K,fe=Z;if(M.Da=_!=null&&0<_.Da,M.Da&&(ue=_.cd,fe=_.bd,oe=_.v,ce=_.j,11>U||(oe&=-2,ce&=-2),0>oe||0>ce||0>=ue||0>=fe||oe+ue>K||ce+fe>Z))return 0;if(M.v=oe,M.j=ce,M.va=oe+ue,M.o=ce+fe,M.U=ue,M.T=fe,M.da=_!=null&&0<_.da,M.da){if(!et(ue,fe,U=[_.ib],oe=[_.hb]))return 0;M.ib=U[0],M.hb=oe[0]}return M.ob=_!=null&&_.ob,M.Kb=_==null||!_.Sd,M.da&&(M.ob=M.ib<3*K/4&&M.hb<3*Z/4,M.Kb=0),1}function sh(_){if(_==null)return 2;if(11>_.S){var M=_.f.RGBA;M.fb+=(_.height-1)*M.A,M.A=-M.A}else M=_.f.kb,_=_.height,M.O+=(_-1)*M.fa,M.fa=-M.fa,M.N+=(_-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(_-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(_-1)*M.lb,M.lb=-M.lb);return 0}function Uc(_,M,U,K){if(K==null||0>=_||0>=M)return 2;if(U!=null){if(U.Da){var Z=U.cd,oe=U.bd,ce=-2&U.v,ue=-2&U.j;if(0>ce||0>ue||0>=Z||0>=oe||ce+Z>_||ue+oe>M)return 2;_=Z,M=oe}if(U.da){if(!et(_,M,Z=[U.ib],oe=[U.hb]))return 2;_=Z[0],M=oe[0]}}K.width=_,K.height=M;e:{var fe=K.width,ye=K.height;if(_=K.S,0>=fe||0>=ye||!(_>=Lg&&13>_))_=2;else{if(0>=K.Rd&&K.sd==null){ce=oe=Z=M=0;var Te=(ue=fe*rm[_])*ye;if(11>_||(oe=(ye+1)/2*(M=(fe+1)/2),_==12&&(ce=(Z=fe)*ye)),(ye=s(Te+2*oe+ce))==null){_=1;break e}K.sd=ye,11>_?((fe=K.f.RGBA).eb=ye,fe.fb=0,fe.A=ue,fe.size=Te):((fe=K.f.kb).y=ye,fe.O=0,fe.fa=ue,fe.Fd=Te,fe.f=ye,fe.N=0+Te,fe.Ab=M,fe.Cd=oe,fe.ea=ye,fe.W=0+Te+oe,fe.Db=M,fe.Ed=oe,_==12&&(fe.F=ye,fe.J=0+Te+2*oe),fe.Tc=ce,fe.lb=Z)}if(M=1,Z=K.S,oe=K.width,ce=K.height,Z>=Lg&&13>Z)if(11>Z)_=K.f.RGBA,M&=(ue=Math.abs(_.A))*(ce-1)+oe<=_.size,M&=ue>=oe*rm[Z],M&=_.eb!=null;else{_=K.f.kb,ue=(oe+1)/2,Te=(ce+1)/2,fe=Math.abs(_.fa),ye=Math.abs(_.Ab);var Be=Math.abs(_.Db),be=Math.abs(_.lb),Me=be*(ce-1)+oe;M&=fe*(ce-1)+oe<=_.Fd,M&=ye*(Te-1)+ue<=_.Cd,M=(M&=Be*(Te-1)+ue<=_.Ed)&fe>=oe&ye>=ue&Be>=ue,M&=_.y!=null,M&=_.f!=null,M&=_.ea!=null,Z==12&&(M&=be>=oe,M&=Me<=_.Tc,M&=_.F!=null)}else M=0;_=M?0:2}}return _!=0||U!=null&&U.fd&&(_=sh(K)),_}var Go=64,wo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],No=24,Uu=32,Xl=8,Hc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Se("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(_){return _},C.Predictor2=function(_,M,U){return M[U+0]},C.Predictor3=function(_,M,U){return M[U+1]},C.Predictor4=function(_,M,U){return M[U-1]},C.Predictor5=function(_,M,U){return We(We(_,M[U+1]),M[U+0])},C.Predictor6=function(_,M,U){return We(_,M[U-1])},C.Predictor7=function(_,M,U){return We(_,M[U+0])},C.Predictor8=function(_,M,U){return We(M[U-1],M[U+0])},C.Predictor9=function(_,M,U){return We(M[U+0],M[U+1])},C.Predictor10=function(_,M,U){return We(We(_,M[U-1]),We(M[U+0],M[U+1]))},C.Predictor11=function(_,M,U){var K=M[U+0];return 0>=nt(K>>24&255,_>>24&255,(M=M[U-1])>>24&255)+nt(K>>16&255,_>>16&255,M>>16&255)+nt(K>>8&255,_>>8&255,M>>8&255)+nt(255&K,255&_,255&M)?K:_},C.Predictor12=function(_,M,U){var K=M[U+0];return(Ke((_>>24&255)+(K>>24&255)-((M=M[U-1])>>24&255))<<24|Ke((_>>16&255)+(K>>16&255)-(M>>16&255))<<16|Ke((_>>8&255)+(K>>8&255)-(M>>8&255))<<8|Ke((255&_)+(255&K)-(255&M)))>>>0},C.Predictor13=function(_,M,U){var K=M[U-1];return(qe((_=We(_,M[U+0]))>>24&255,K>>24&255)<<24|qe(_>>16&255,K>>16&255)<<16|qe(_>>8&255,K>>8&255)<<8|qe(255&_,255&K))>>>0};var Vc=C.PredictorAdd0;C.PredictorAdd1=_t,Se("Predictor2","PredictorAdd2"),Se("Predictor3","PredictorAdd3"),Se("Predictor4","PredictorAdd4"),Se("Predictor5","PredictorAdd5"),Se("Predictor6","PredictorAdd6"),Se("Predictor7","PredictorAdd7"),Se("Predictor8","PredictorAdd8"),Se("Predictor9","PredictorAdd9"),Se("Predictor10","PredictorAdd10"),Se("Predictor11","PredictorAdd11"),Se("Predictor12","PredictorAdd12"),Se("Predictor13","PredictorAdd13");var Ql=C.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Yi,Hd=C.ColorIndexInverseTransform,Zl=C.MapARGB,yl=C.VP8LColorIndexInverseTransformAlpha,Vd=C.MapAlpha,Wd=C.VP8LPredictorsAdd=[];Wd.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var ah,oh,Wc,Hu,Vu,Kd,Wu,Gd,Fi,Xa,Tr,Hr,Bi,cs,xl,Kp,lh,Kc,Dg,ch,Ig,wx,Gp,Yd,Xd,Nx,Yp,Sx,jx=s(511),Ex=s(2041),_x=s(225),Cx=s(767),Ax=0,Jl=Ex,uh=_x,Ma=Cx,Yo=jx,Lg=0,Ku=1,Y1=2,Xp=3,Qp=4,Qr=5,Fg=6,dh=7,Qd=8,Zp=9,Jp=10,em=[2,3,7],Bg=[3,3,11],Zd=[280,256,256,256,40],X1=[0,1,1,1,0],L_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],F_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Q1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$g=8,fh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jd=null,kx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Tx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Z1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],J1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],B_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ox=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ra=[],Xo=[],Qa=[],ec=1,hh=2,ga=[],Za=[];Ya("UpsampleRgbLinePair",zu,3),Ya("UpsampleBgrLinePair",zd,3),Ya("UpsampleRgbaLinePair",Wp,4),Ya("UpsampleBgraLinePair",Vp,4),Ya("UpsampleArgbLinePair",Ud,4),Ya("UpsampleRgba4444LinePair",qd,2),Ya("UpsampleRgb565LinePair",ma,2);var z_=C.UpsampleRgbLinePair,q_=C.UpsampleBgrLinePair,Gu=C.UpsampleRgbaLinePair,ph=C.UpsampleBgraLinePair,ef=C.UpsampleArgbLinePair,nm=C.UpsampleRgba4444LinePair,Px=C.UpsampleRgb565LinePair,Gc=16,bl=1<<Gc-1,$r=-227,Vr=482,Yu=6,Zs=0,Ja=s(256),tf=s(256),mh=s(256),eo=s(256),zg=s(Vr-$r),ew=s(Vr-$r);vl("YuvToRgbRow",zu,3),vl("YuvToBgrRow",zd,3),vl("YuvToRgbaRow",Wp,4),vl("YuvToBgraRow",Vp,4),vl("YuvToArgbRow",Ud,4),vl("YuvToRgba4444Row",qd,2),vl("YuvToRgb565Row",ma,2);var Mx=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nf=[0,2,8],tw=[8,7,6,4,4,2,2,2,1,1,1,1],Yc=1;this.WebPDecodeRGBA=function(_,M,U,K,Z){var oe=Ku,ce=new Ie,ue=new vn;ce.ba=ue,ue.S=oe,ue.width=[ue.width],ue.height=[ue.height];var fe=ue.width,ye=ue.height,Te=new zt;if(Te==null||_==null)var Be=2;else e(Te!=null),Be=qu(_,M,U,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if(Be!=0?fe=0:(fe!=null&&(fe[0]=Te.width[0]),ye!=null&&(ye[0]=Te.height[0]),fe=1),fe){ue.width=ue.width[0],ue.height=ue.height[0],K!=null&&(K[0]=ue.width),Z!=null&&(Z[0]=ue.height);e:{if(K=new Ur,(Z=new it).data=_,Z.w=M,Z.ha=U,Z.kd=1,M=[0],e(Z!=null),((_=qu(Z.data,Z.w,Z.ha,null,null,null,M,null,Z))==0||_==7)&&M[0]&&(_=4),(M=_)==0){if(e(ce!=null),K.data=Z.data,K.w=Z.w+Z.offset,K.ha=Z.ha-Z.offset,K.put=Dt,K.ac=Tn,K.bc=wt,K.ma=ce,Z.xa){if((_=zo())==null){ce=1;break e}if((function(be,Me){var Fe=[0],rt=[0],ze=[0];t:for(;;){if(be==null)return 0;if(Me==null)return be.a=2,0;if(be.l=Me,be.a=0,Y(be.m,Me.data,Me.w,Me.ha),!At(be.m,Fe,rt,ze)){be.a=3;break t}if(be.xb=hh,Me.width=Fe[0],Me.height=rt[0],!vo(Fe[0],rt[0],1,be,null))break t;return 1}return e(be.a!=0),0})(_,K)){if(K=(M=Uc(K.width,K.height,ce.Oa,ce.ba))==0){t:{K=_;n:for(;;){if(K==null){K=0;break t}if(e(K.s.yc!=null),e(K.s.Ya!=null),e(0<K.s.Wb),e((U=K.l)!=null),e((Z=U.ma)!=null),K.xb!=0){if(K.ca=Z.ba,K.tb=Z.tb,e(K.ca!=null),!ih(Z.Oa,U,Xp)){K.a=2;break n}if(!Ul(K,U.width)||U.da)break n;if((U.da||bn(K.ca.S))&&Ko(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&Ko()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ne(K.s.vb,K.s.Wa.Xa)){K.a=1;break n}K.xb=0}if(!Wa(K,K.V,K.Ba,K.c,K.i,U.o,Ys))break n;Z.Dc=K.Ma,K=1;break t}e(K.a!=0),K=0}K=!K}K&&(M=_.a)}else M=_.a}else{if((_=new qo)==null){ce=1;break e}if(_.Fa=Z.na,_.P=Z.P,_.qc=Z.Sa,Rs(_,K)){if((M=Uc(K.width,K.height,ce.Oa,ce.ba))==0){if(_.Aa=0,U=ce.Oa,e((Z=_)!=null),U!=null){if(0<(fe=0>(fe=U.Md)?0:100<fe?255:255*fe/100)){for(ye=Te=0;4>ye;++ye)12>(Be=Z.pb[ye]).lc&&(Be.ia=fe*tw[0>Be.lc?0:Be.lc]>>3),Te|=Be.ia;Te&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=U.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}(function(be,Me){if(be==null)return 0;if(Me==null)return ci(be,2,"NULL VP8Io parameter in VP8Decode().");if(!be.cb&&!Rs(be,Me))return 0;if(e(be.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(be.L=0);var Fe=nf[be.L];if(be.L==2?(be.yb=0,be.zb=0):(be.yb=Me.v-Fe>>4,be.zb=Me.j-Fe>>4,0>be.yb&&(be.yb=0),0>be.zb&&(be.zb=0)),be.Va=Me.o+15+Fe>>4,be.Hb=Me.va+15+Fe>>4,be.Hb>be.za&&(be.Hb=be.za),be.Va>be.Ub&&(be.Va=be.Ub),0<be.L){var rt=be.ed;for(Fe=0;4>Fe;++Fe){var ze;if(be.Qa.Cb){var Je=be.Qa.Lb[Fe];be.Qa.Fb||(Je+=rt.Tb)}else Je=rt.Tb;for(ze=0;1>=ze;++ze){var tt=be.gd[Fe][ze],ot=Je;if(rt.Pc&&(ot+=rt.vd[0],ze&&(ot+=rt.od[0])),0<(ot=0>ot?0:63<ot?63:ot)){var ut=ot;0<rt.wb&&(ut=4<rt.wb?ut>>2:ut>>1)>9-rt.wb&&(ut=9-rt.wb),1>ut&&(ut=1),tt.dd=ut,tt.tc=2*ot+ut,tt.ld=40<=ot?2:15<=ot?1:0}else tt.tc=0;tt.La=ze}}}Fe=0}else ci(be,6,"Frame setup failed"),Fe=be.a;if(Fe=Fe==0){if(Fe){be.$c=0,0<be.Aa||(be.Ic=Yc);t:{Fe=be.Ic,rt=4*(ut=be.za);var fn=32*ut,Xt=ut+1,Gn=0<be.L?ut*(0<be.Aa?2:1):0,nn=(be.Aa==2?2:1)*ut;if((tt=rt+832+(ze=3*(16*Fe+nf[be.L])/2*fn)+(Je=be.Fa!=null&&0<be.Fa.length?be.Kc.c*be.Kc.i:0))!=tt)Fe=0;else{if(tt>be.Vb){if(be.Vb=0,be.Ec=s(tt),be.Fc=0,be.Ec==null){Fe=ci(be,1,"no memory during frame initialization.");break t}be.Vb=tt}tt=be.Ec,ot=be.Fc,be.Ac=tt,be.Bc=ot,ot+=rt,be.Gd=o(fn,nr),be.Hd=0,be.rb=o(Xt+1,Hl),be.sb=1,be.wa=Gn?o(Gn,Ps):null,be.Y=0,be.D.Nb=0,be.D.wa=be.wa,be.D.Y=be.Y,0<be.Aa&&(be.D.Y+=ut),e(!0),be.oc=tt,be.pc=ot,ot+=832,be.ya=o(nn,an),be.aa=0,be.D.ya=be.ya,be.D.aa=be.aa,be.Aa==2&&(be.D.aa+=ut),be.R=16*ut,be.B=8*ut,ut=(fn=nf[be.L])*be.R,fn=fn/2*be.B,be.sa=tt,be.ta=ot+ut,be.qa=be.sa,be.ra=be.ta+16*Fe*be.R+fn,be.Ha=be.qa,be.Ia=be.ra+8*Fe*be.B+fn,be.$c=0,ot+=ze,be.mb=Je?tt:null,be.nb=Je?ot:null,e(ot+Je<=be.Fc+be.Vb),Ka(be),i(be.Ac,be.Bc,0,rt),Fe=1}}if(Fe){if(Me.ka=0,Me.y=be.sa,Me.O=be.ta,Me.f=be.qa,Me.N=be.ra,Me.ea=be.Ha,Me.Vd=be.Ia,Me.fa=be.R,Me.Rc=be.B,Me.F=null,Me.J=0,!Ax){for(Fe=-255;255>=Fe;++Fe)jx[255+Fe]=0>Fe?-Fe:Fe;for(Fe=-1020;1020>=Fe;++Fe)Ex[1020+Fe]=-128>Fe?-128:127<Fe?127:Fe;for(Fe=-112;112>=Fe;++Fe)_x[112+Fe]=-16>Fe?-16:15<Fe?15:Fe;for(Fe=-255;510>=Fe;++Fe)Cx[255+Fe]=0>Fe?0:255<Fe?255:Fe;Ax=1}Wu=dr,Gd=Vl,Xa=Wl,Tr=Ki,Hr=Fu,Fi=Jf,Bi=Hp,cs=pa,xl=B,Kp=ee,lh=Wo,Kc=rh,Dg=we,ch=Ae,Ig=Uo,wx=qc,Gp=Fd,Yd=Up,Xo[0]=Bp,Xo[1]=Fc,Xo[2]=vi,Xo[3]=as,Xo[4]=eh,Xo[5]=$c,Xo[6]=xo,Xo[7]=Pg,Xo[8]=Dd,Xo[9]=th,Ra[0]=Pa,Ra[1]=Ar,Ra[2]=Bc,Ra[3]=Ga,Ra[4]=Mt,Ra[5]=Vt,Ra[6]=Sn,Qa[0]=gl,Qa[1]=Ei,Qa[2]=$p,Qa[3]=ml,Qa[4]=zp,Qa[5]=nh,Qa[6]=qp,Fe=1}else Fe=0}Fe&&(Fe=(function(fr,$i){for(fr.M=0;fr.M<fr.Va;++fr.M){var Xn,Qt=fr.Jc[fr.M&fr.Xb],It=fr.m,Xi=fr;for(Xn=0;Xn<Xi.za;++Xn){var In=It,cr=Xi,si=cr.Ac,Ds=cr.Bc+4*Xn,us=cr.zc,Ci=cr.ya[cr.aa+Xn];if(cr.Qa.Bb?Ci.$b=Ne(In,cr.Pa.jb[0])?2+Ne(In,cr.Pa.jb[2]):Ne(In,cr.Pa.jb[1]):Ci.$b=0,cr.kc&&(Ci.Ad=Ne(In,cr.Bd)),Ci.Za=!Ne(In,145)+0,Ci.Za){var Es=Ci.Ob,Is=0;for(cr=0;4>cr;++cr){var yi,yr=us[0+cr];for(yi=0;4>yi;++yi){yr=B_[si[Ds+yi]][yr];for(var Or=Z1[Ne(In,yr[0])];0<Or;)Or=Z1[2*Or+Ne(In,yr[Or])];yr=-Or,si[Ds+yi]=yr}r(Es,Is,si,Ds,4),Is+=4,us[0+cr]=yr}}else yr=Ne(In,156)?Ne(In,128)?1:3:Ne(In,163)?2:0,Ci.Ob[0]=yr,i(si,Ds,yr,4),i(us,0,yr,4);Ci.Dd=Ne(In,142)?Ne(In,114)?Ne(In,183)?1:3:2:0}if(Xi.m.Ka)return ci(fr,7,"Premature end-of-partition0 encountered.");for(;fr.ja<fr.za;++fr.ja){if(Xi=Qt,In=(It=fr).rb[It.sb-1],si=It.rb[It.sb+It.ja],Xn=It.ya[It.aa+It.ja],Ds=It.kc?Xn.Ad:0)In.la=si.la=0,Xn.Za||(In.Na=si.Na=0),Xn.Hc=0,Xn.Gc=0,Xn.ia=0;else{var xi,Pr;if(In=si,si=Xi,Ds=It.Pa.Xc,us=It.ya[It.aa+It.ja],Ci=It.pb[us.$b],cr=us.ad,Es=0,Is=It.rb[It.sb-1],yr=yi=0,i(cr,Es,0,384),us.Za)var zi=0,qi=Ds[3];else{Or=s(16);var Zr=In.Na+Is.Na;if(Zr=Jd(si,Ds[1],Zr,Ci.Eb,0,Or,0),In.Na=Is.Na=(0<Zr)+0,1<Zr)Wu(Or,0,cr,Es);else{var va=Or[0]+3>>3;for(Or=0;256>Or;Or+=16)cr[Es+Or]=va}zi=1,qi=Ds[0]}var Wr=15&In.la,Jr=15&Is.la;for(Or=0;4>Or;++Or){var ds=1&Jr;for(va=Pr=0;4>va;++va)Wr=Wr>>1|(ds=(Zr=Jd(si,qi,Zr=ds+(1&Wr),Ci.Sc,zi,cr,Es))>zi)<<7,Pr=Pr<<2|(3<Zr?3:1<Zr?2:cr[Es+0]!=0),Es+=16;Wr>>=4,Jr=Jr>>1|ds<<7,yi=(yi<<8|Pr)>>>0}for(qi=Wr,zi=Jr>>4,xi=0;4>xi;xi+=2){for(Pr=0,Wr=In.la>>4+xi,Jr=Is.la>>4+xi,Or=0;2>Or;++Or){for(ds=1&Jr,va=0;2>va;++va)Zr=ds+(1&Wr),Wr=Wr>>1|(ds=0<(Zr=Jd(si,Ds[2],Zr,Ci.Qc,0,cr,Es)))<<3,Pr=Pr<<2|(3<Zr?3:1<Zr?2:cr[Es+0]!=0),Es+=16;Wr>>=2,Jr=Jr>>1|ds<<5}yr|=Pr<<4*xi,qi|=Wr<<4<<xi,zi|=(240&Jr)<<xi}In.la=qi,Is.la=zi,us.Hc=yi,us.Gc=yr,us.ia=43690&yr?0:Ci.ia,Ds=!(yi|yr)}if(0<It.L&&(It.wa[It.Y+It.ja]=It.gd[Xn.$b][Xn.Za],It.wa[It.Y+It.ja].La|=!Ds),Xi.Ka)return ci(fr,7,"Premature end-of-file encountered.")}if(Ka(fr),It=$i,Xi=1,Xn=(Qt=fr).D,In=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(Xn.M=Qt.M,Xn.uc=In,bo(Qt,Xn),Xi=1,Xn=(Pr=Qt.D).Nb,In=(yr=nf[Qt.L])*Qt.R,si=yr/2*Qt.B,Or=16*Xn*Qt.R,va=8*Xn*Qt.B,Ds=Qt.sa,us=Qt.ta-In+Or,Ci=Qt.qa,cr=Qt.ra-si+va,Es=Qt.Ha,Is=Qt.Ia-si+va,Jr=(Wr=Pr.M)==0,yi=Wr>=Qt.Va-1,Qt.Aa==2&&bo(Qt,Pr),Pr.uc)for(ds=(Zr=Qt).D.M,e(Zr.D.uc),Pr=Zr.yb;Pr<Zr.Hb;++Pr){zi=Pr,qi=ds;var Js=(to=(Ji=Zr).D).Nb;xi=Ji.R;var to=to.wa[to.Y+zi],Qi=Ji.sa,Zi=Ji.ta+16*Js*xi+16*zi,ya=to.dd,ei=to.tc;if(ei!=0)if(e(3<=ei),Ji.L==1)0<zi&&wx(Qi,Zi,xi,ei+4),to.La&&Yd(Qi,Zi,xi,ei),0<qi&&Ig(Qi,Zi,xi,ei+4),to.La&&Gp(Qi,Zi,xi,ei);else{var xa=Ji.B,Qo=Ji.qa,wl=Ji.ra+8*Js*xa+8*zi,Ls=Ji.Ha,Ji=Ji.Ia+8*Js*xa+8*zi;Js=to.ld,0<zi&&(cs(Qi,Zi,xi,ei+4,ya,Js),Kp(Qo,wl,Ls,Ji,xa,ei+4,ya,Js)),to.La&&(Kc(Qi,Zi,xi,ei,ya,Js),ch(Qo,wl,Ls,Ji,xa,ei,ya,Js)),0<qi&&(Bi(Qi,Zi,xi,ei+4,ya,Js),xl(Qo,wl,Ls,Ji,xa,ei+4,ya,Js)),to.La&&(lh(Qi,Zi,xi,ei,ya,Js),Dg(Qo,wl,Ls,Ji,xa,ei,ya,Js))}}if(Qt.ia&&alert("todo:DitherRow"),It.put!=null){if(Pr=16*Wr,Wr=16*(Wr+1),Jr?(It.y=Qt.sa,It.O=Qt.ta+Or,It.f=Qt.qa,It.N=Qt.ra+va,It.ea=Qt.Ha,It.W=Qt.Ia+va):(Pr-=yr,It.y=Ds,It.O=us,It.f=Ci,It.N=cr,It.ea=Es,It.W=Is),yi||(Wr-=yr),Wr>It.o&&(Wr=It.o),It.F=null,It.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&Pr<Wr&&(It.J=ls(Qt,It,Pr,Wr-Pr),It.F=Qt.mb,It.F==null&&It.F.length==0)){Xi=ci(Qt,3,"Could not decode alpha data.");break t}Pr<It.j&&(yr=It.j-Pr,Pr=It.j,e(!(1&yr)),It.O+=Qt.R*yr,It.N+=Qt.B*(yr>>1),It.W+=Qt.B*(yr>>1),It.F!=null&&(It.J+=It.width*yr)),Pr<Wr&&(It.O+=It.v,It.N+=It.v>>1,It.W+=It.v>>1,It.F!=null&&(It.J+=It.v),It.ka=Pr-It.j,It.U=It.va-It.v,It.T=Wr-Pr,Xi=It.put(It))}Xn+1!=Qt.Ic||yi||(r(Qt.sa,Qt.ta-In,Ds,us+16*Qt.R,In),r(Qt.qa,Qt.ra-si,Ci,cr+8*Qt.B,si),r(Qt.Ha,Qt.Ia-si,Es,Is+8*Qt.B,si))}if(!Xi)return ci(fr,6,"Output aborted.")}return 1})(be,Me)),Me.bc!=null&&Me.bc(Me),Fe&=1}return Fe?(be.cb=0,Fe):0})(_,K)||(M=_.a)}}else M=_.a}M==0&&ce.Oa!=null&&ce.Oa.fd&&(M=sh(ce.ba))}ce=M}oe=ce!=0?null:11>oe?ue.f.RGBA.eb:ue.f.kb.y}else oe=null;return oe};var rm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,I){for(var R="",D=0;D<4;D++)R+=String.fromCharCode(C[I++]);return R}function d(C,I){return C[I+0]|C[I+1]<<8}function f(C,I){return(C[I+0]|C[I+1]<<8|C[I+2]<<16)>>>0}function p(C,I){return(C[I+0]|C[I+1]<<8|C[I+2]<<16|C[I+3]<<24)>>>0}new c;var m=[0],v=[0],y=[],x=new c,b=t,S=(function(C,I){var R={},D=0,L=!1,z=0,W=0;if(R.frames=[],!(function(F,G){for(var te=0;te<4;te++)if(F[G+te]!="RIFF".charCodeAt(te))return!0;return!1})(C,I)){for(p(C,I+=4),I+=8;I<C.length;){var X=u(C,I),q=p(C,I+=4);I+=4;var V=q+(1&q);switch(X){case"VP8 ":case"VP8L":R.frames[D]===void 0&&(R.frames[D]={}),(Q=R.frames[D]).src_off=L?W:I-8,Q.src_size=z+q+8,D++,L&&(L=!1,z=0,W=0);break;case"VP8X":(Q=R.header={}).feature_flags=C[I];var Y=I+4;Q.canvas_width=1+f(C,Y),Y+=3,Q.canvas_height=1+f(C,Y),Y+=3;break;case"ALPH":L=!0,z=V+8,W=I-8;break;case"ANIM":(Q=R.header).bgcolor=p(C,I),Y=I+4,Q.loop_count=d(C,Y),Y+=2;break;case"ANMF":var re,Q;(Q=R.frames[D]={}).offset_x=2*f(C,I),I+=3,Q.offset_y=2*f(C,I),I+=3,Q.width=1+f(C,I),I+=3,Q.height=1+f(C,I),I+=3,Q.duration=f(C,I),I+=3,re=C[I++],Q.dispose=1&re,Q.blend=re>>1&1}X!="ANMF"&&(I+=V)}return R}})(b,0);S.response=b,S.rgbaoutput=!0,S.dataurl=!1;var j=S.header?S.header:null,E=S.frames?S.frames:null;if(j){j.loop_counter=j.loop_count,m=[j.canvas_height],v=[j.canvas_width];for(var A=0;A<E.length&&E[A].blend!=0;A++);}var P=E[0],O=x.WebPDecodeRGBA(b,P.src_off,P.src_size,v,m);P.rgba=O,P.imgwidth=v[0],P.imgheight=m[0];for(var k=0;k<v[0]*m[0]*4;k++)y[k]=O[k];return this.width=v,this.height=m,this.data=y,this}(function(t){var e,n,r,i,s,o,l,c,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=F;Object.defineProperty(this,"pdf",{get:function(){return G}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(J){te=!!J}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(J){le=!!J}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(J){isNaN(J)||(he=J)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(J){isNaN(J)||(me=J)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(J){var ne;typeof J=="number"?ne=[J,J,J,J]:((ne=new Array(4))[0]=J[0],ne[1]=J.length>=2?J[1]:ne[0],ne[2]=J.length>=3?J[2]:ne[0],ne[3]=J.length>=4?J[3]:ne[1]),u.margin=ne}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(J){xe=J}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(J){de=J}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(J){Ne=J}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(J){J instanceof d&&(u=J)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(J){u.path=J}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(J){Ce=J}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(J){var ne;ne=p(J),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(J){var ne=p(J);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(J){["butt","round","square"].indexOf(J)!==-1&&(this.ctx.lineCap=J,this.pdf.setLineCap(J))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(J){isNaN(J)||(this.ctx.lineWidth=J,this.pdf.setLineWidth(J))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(J){["bevel","round","miter"].indexOf(J)!==-1&&(this.ctx.lineJoin=J,this.pdf.setLineJoin(J))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(J){isNaN(J)||(this.ctx.miterLimit=J,this.pdf.setMiterLimit(J))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(J){this.ctx.textBaseline=J}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(J){["right","end","center","left","start"].indexOf(J)!==-1&&(this.ctx.textAlign=J)}});var ae=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(J){ae=null,Pe=J}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(J){var ne;if(this.ctx.font=J,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(J))!==null){var Re=ne[1];ne[2];var dt=ne[3],et=ne[4];ne[5];var Ve=ne[6],ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(ge==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:ge==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var Se=(function(Yt){var Ct,$n,Pn=[],Ht=Yt.trim();if(Ht==="")return OO;if(Ht in iV)return[iV[Ht]];for(;Ht!=="";){switch($n=null,Ct=(Ht=aV(Ht)).charAt(0)){case'"':case"'":$n=y7e(Ht.substring(1),Ct);break;default:$n=x7e(Ht)}if($n===null||(Pn.push($n[0]),(Ht=aV($n[1]))!==""&&Ht.charAt(0)!==","))return OO;Ht=Ht.replace(/^,/,"")}return Pn})(Ve);if(this.fontFaces){var ke=(function(Yt,Ct){if(ae===null){var $n=(function(Pn){var Ht=[];return Object.keys(Pn).forEach(function(xn){Pn[xn].forEach(function(ir){var on=null;switch(ir){case"bold":on={family:xn,weight:"bold"};break;case"italic":on={family:xn,style:"italic"};break;case"bolditalic":on={family:xn,weight:"bold",style:"italic"};break;case"":case"normal":on={family:xn}}on!==null&&(on.ref={name:xn,style:ir},Ht.push(on))})}),Ht})(Yt.getFontList());ae=(function(Pn){for(var Ht={},xn=0;xn<Pn.length;++xn){var ir=TO(Pn[xn]),on=ir.family,Cn=ir.stretch,bn=ir.style,Cr=ir.weight;Ht[on]=Ht[on]||{},Ht[on][Cn]=Ht[on][Cn]||{},Ht[on][Cn][bn]=Ht[on][Cn][bn]||{},Ht[on][Cn][bn][Cr]=ir}return Ht})($n.concat(Ct))}return ae})(this.pdf,this.fontFaces),We=Se.map(function(Yt){return{family:Yt,stretch:"normal",weight:dt,style:Re}}),Ke=(function(Yt,Ct,$n){for(var Pn=($n=$n||{}).defaultFontFamily||"times",Ht=Object.assign({},v7e,$n.genericFontFamilies||{}),xn=null,ir=null,on=0;on<Ct.length;++on)if(Ht[(xn=TO(Ct[on])).family]&&(xn.family=Ht[xn.family]),Yt.hasOwnProperty(xn.family)){ir=Yt[xn.family];break}if(!(ir=ir||Yt[Pn]))throw new Error("Could not find a font-family for the rule '"+sV(xn)+"' and default family '"+Pn+"'.");if(ir=(function(Cn,bn){if(bn[Cn])return bn[Cn];var Cr=QR[Cn],ur=Cr<=QR.normal?-1:1,vn=rV(bn,Fse,Cr,ur);if(!vn)throw new Error("Could not find a matching font-stretch value for "+Cn);return vn})(xn.stretch,ir),ir=(function(Cn,bn){if(bn[Cn])return bn[Cn];for(var Cr=Lse[Cn],ur=0;ur<Cr.length;++ur)if(bn[Cr[ur]])return bn[Cr[ur]];throw new Error("Could not find a matching font-style for "+Cn)})(xn.style,ir),!(ir=(function(Cn,bn){if(bn[Cn])return bn[Cn];if(Cn===400&&bn[500])return bn[500];if(Cn===500&&bn[400])return bn[400];var Cr=g7e[Cn],ur=rV(bn,Bse,Cr,Cn<400?-1:1);if(!ur)throw new Error("Could not find a matching font-weight for value "+Cn);return ur})(xn.weight,ir)))throw new Error("Failed to resolve a font for the rule '"+sV(xn)+"'.");return ir})(ke,We);this.pdf.setFont(Ke.ref.name,Ke.ref.style)}else{var qe="";(dt==="bold"||parseInt(dt,10)>=700||Re==="bold")&&(qe="bold"),Re==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var nt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<Se.length;xt++){if(this.pdf.internal.getFont(Se[xt],qe,{noFallback:!0,disableWarning:!0})!==void 0){nt=Se[xt];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(Se[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=Se[xt],qe="bold";else if(this.pdf.internal.getFont(Se[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=Se[xt],qe="normal";break}}if(nt===""){for(var Ot=0;Ot<Se.length;Ot++)if(_t[Se[Ot]]){nt=_t[Se[Ot]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(J){this.ctx.globalCompositeOperation=J}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(J){this.ctx.globalAlpha=J}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(J){this.ctx.lineDashOffset=J,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(J){this.ctx.lineDash=J,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(J){this.ctx.ignoreClearRect=!!J}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){E.call(this,"fill",!1)},f.prototype.stroke=function(){E.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,G){if(isNaN(F)||isNaN(G))throw di.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(F,G)},f.prototype.closePath=function(){var F=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&ri(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){F=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},f.prototype.lineTo=function(F,G){if(isNaN(F)||isNaN(G))throw di.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,G,te,le){if(isNaN(te)||isNaN(le)||isNaN(F)||isNaN(G))throw di.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(te,le)),me=this.ctx.transform.applyToPoint(new o(F,G));this.path.push({type:"qct",x1:me.x,y1:me.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},f.prototype.bezierCurveTo=function(F,G,te,le,he,me){if(isNaN(he)||isNaN(me)||isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le))throw di.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(he,me)),de=this.ctx.transform.applyToPoint(new o(F,G)),Ne=this.ctx.transform.applyToPoint(new o(te,le));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:Ne.x,y2:Ne.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},f.prototype.arc=function(F,G,te,le,he,me){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le)||isNaN(he))throw di.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(F,G));F=xe.x,G=xe.y;var de=this.ctx.transform.applyToPoint(new o(0,te)),Ne=this.ctx.transform.applyToPoint(new o(0,0));te=Math.sqrt(Math.pow(de.x-Ne.x,2)+Math.pow(de.y-Ne.y,2))}Math.abs(he-le)>=2*Math.PI&&(le=0,he=2*Math.PI),this.path.push({type:"arc",x:F,y:G,radius:te,startAngle:le,endAngle:he,counterclockwise:me})},f.prototype.arcTo=function(F,G,te,le,he){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,G,te,le){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le))throw di.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,G),this.lineTo(F+te,G),this.lineTo(F+te,G+le),this.lineTo(F,G+le),this.lineTo(F,G),this.lineTo(F+te,G),this.lineTo(F,G)},f.prototype.fillRect=function(F,G,te,le){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le))throw di.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,G,te,le),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},f.prototype.strokeRect=function(F,G,te,le){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le))throw di.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(F,G,te,le),this.stroke())},f.prototype.clearRect=function(F,G,te,le){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le))throw di.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,G,te,le))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(G),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(F){var G,te,le,he;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))G=0,te=0,le=0,he=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(me!==null)G=parseInt(me[1]),te=parseInt(me[2]),le=parseInt(me[3]),he=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)G=parseInt(me[1]),te=parseInt(me[2]),le=parseInt(me[3]),he=parseFloat(me[4]);else{if(he=1,typeof F=="string"&&F.charAt(0)!=="#"){var xe=new Tse(F);F=xe.ok?xe.toHex():"#000000"}F.length===4?(G=F.substring(1,2),G+=G,te=F.substring(2,3),te+=te,le=F.substring(3,4),le+=le):(G=F.substring(1,3),te=F.substring(3,5),le=F.substring(5,7)),G=parseInt(G,16),te=parseInt(te,16),le=parseInt(le,16)}}return{r:G,g:te,b:le,a:he,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,G,te,le){if(isNaN(G)||isNaN(te)||typeof F!="string")throw di.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!m.call(this)){var he=V(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:F,x:G,y:te,scale:me,angle:he,align:this.textAlign,maxWidth:le})}},f.prototype.strokeText=function(F,G,te,le){if(isNaN(G)||isNaN(te)||typeof F!="string")throw di.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){le=isNaN(le)?void 0:le;var he=V(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:F,x:G,y:te,scale:me,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:le})}},f.prototype.measureText=function(F){if(typeof F!="string")throw di.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,te=this.pdf.internal.scaleFactor,le=G.internal.getFontSize(),he=G.getStringUnitWidth(F)*le/G.internal.scaleFactor;return new function(me){var xe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:he*=Math.round(96*te/72*1e4)/1e4})},f.prototype.scale=function(F,G){if(isNaN(F)||isNaN(G))throw di.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new c(F,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.rotate=function(F){if(isNaN(F))throw di.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(F,G){if(isNaN(F)||isNaN(G))throw di.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new c(1,0,0,1,F,G);this.ctx.transform=this.ctx.transform.multiply(te)},f.prototype.transform=function(F,G,te,le,he,me){if(isNaN(F)||isNaN(G)||isNaN(te)||isNaN(le)||isNaN(he)||isNaN(me))throw di.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(F,G,te,le,he,me);this.ctx.transform=this.ctx.transform.multiply(xe)},f.prototype.setTransform=function(F,G,te,le,he,me){F=isNaN(F)?1:F,G=isNaN(G)?0:G,te=isNaN(te)?0:te,le=isNaN(le)?1:le,he=isNaN(he)?0:he,me=isNaN(me)?0:me,this.ctx.transform=new c(F,G,te,le,he,me)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,G,te,le,he,me,xe,de,Ne){var Ce=this.pdf.getImageProperties(F),ae=1,Pe=1,J=1,ne=1;le!==void 0&&de!==void 0&&(J=de/le,ne=Ne/he,ae=Ce.width/le*de/le,Pe=Ce.height/he*Ne/he),me===void 0&&(me=G,xe=te,G=0,te=0),le!==void 0&&de===void 0&&(de=le,Ne=he),le===void 0&&de===void 0&&(de=Ce.width,Ne=Ce.height);for(var Re,dt=this.ctx.transform.decompose(),et=V(dt.rotate.shx),Ve=new c,ge=(Ve=(Ve=(Ve=Ve.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new l(me-G*J,xe-te*ne,le*ae,he*Pe)),Se=x.call(this,ge),ke=[],We=0;We<Se.length;We+=1)ke.indexOf(Se[We])===-1&&ke.push(Se[We]);if(j(ke),this.autoPaging)for(var Ke=ke[0],qe=ke[ke.length-1],nt=Ke;nt<qe+1;nt++){this.pdf.setPage(nt);var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=nt===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=nt===1?0:Ot+(nt-2)*Yt;if(this.ctx.clip_path.length!==0){var $n=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Re,this.posX+this.margin[3],-Ct+xt+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=$n}var Pn=JSON.parse(JSON.stringify(ge));Pn=S([Pn],this.posX+this.margin[3],-Ct+xt+this.ctx.prevPageLastElemOffset)[0];var Ht=(nt>Ke||nt<qe)&&y.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Yt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Pn.x,Pn.y,Pn.w,Pn.h,null,null,et),Ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,et)};var x=function(F,G,te){var le=[];G=G||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":le.push(Math.floor((F.y+he)/te)+1);break;case"arc":le.push(Math.floor((F.y+he-F.radius)/te)+1),le.push(Math.floor((F.y+he+F.radius)/te)+1);break;case"qct":var me=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);le.push(Math.floor((me.y+he)/te)+1),le.push(Math.floor((me.y+me.h+he)/te)+1);break;case"bct":var xe=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);le.push(Math.floor((xe.y+he)/te)+1),le.push(Math.floor((xe.y+xe.h+he)/te)+1);break;case"rect":le.push(Math.floor((F.y+he)/te)+1),le.push(Math.floor((F.y+F.h+he)/te)+1)}for(var de=0;de<le.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<le[de];)b.call(this);return le},b=function(){var F=this.fillStyle,G=this.strokeStyle,te=this.font,le=this.lineCap,he=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=G,this.font=te,this.lineCap=le,this.lineWidth=he,this.lineJoin=me},S=function(F,G,te){for(var le=0;le<F.length;le++)switch(F[le].type){case"bct":F[le].x2+=G,F[le].y2+=te;case"qct":F[le].x1+=G,F[le].y1+=te;default:F[le].x+=G,F[le].y+=te}return F},j=function(F){return F.sort(function(G,te){return G-te})},E=function(F,G){for(var te,le,he=this.fillStyle,me=this.strokeStyle,xe=this.lineCap,de=this.lineWidth,Ne=Math.abs(de*this.ctx.transform.scaleX),Ce=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),J=[],ne=0;ne<Pe.length;ne++)if(Pe[ne].x!==void 0)for(var Re=x.call(this,Pe[ne]),dt=0;dt<Re.length;dt+=1)J.indexOf(Re[dt])===-1&&J.push(Re[dt]);for(var et=0;et<J.length;et++)for(;this.pdf.internal.getNumberOfPages()<J[et];)b.call(this);if(j(J),this.autoPaging)for(var Ve=J[0],ge=J[J.length-1],Se=Ve;Se<ge+1;Se++){this.pdf.setPage(Se),this.fillStyle=he,this.strokeStyle=me,this.lineCap=xe,this.lineWidth=Ne,this.lineJoin=Ce;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=Se===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Se===1?0:Ke+(Se-2)*qe;if(this.ctx.clip_path.length!==0){var _t=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(te,this.posX+this.margin[3],-nt+We+this.ctx.prevPageLastElemOffset),A.call(this,F,!0),this.path=_t}if(le=JSON.parse(JSON.stringify(ae)),this.path=S(le,this.posX+this.margin[3],-nt+We+this.ctx.prevPageLastElemOffset),G===!1||Se===0){var xt=(Se>Ve||Se<ge)&&y.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,qe,null).clip().discardPath()),A.call(this,F,G),xt&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=Ne,A.call(this,F,G),this.lineWidth=de;this.path=ae},A=function(F,G){if((F!=="stroke"||G||!v.call(this))&&(F==="stroke"||G||!m.call(this))){for(var te,le,he=[],me=this.path,xe=0;xe<me.length;xe++){var de=me[xe];switch(de.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:de,deltas:[],abs:[]});break;case"lt":var Ne=he.length;if(me[xe-1]&&!isNaN(me[xe-1].x)&&(te=[de.x-me[xe-1].x,de.y-me[xe-1].y],Ne>0)){for(;Ne>=0;Ne--)if(he[Ne-1].close!==!0&&he[Ne-1].begin!==!0){he[Ne-1].deltas.push(te),he[Ne-1].abs.push(de);break}}break;case"bct":te=[de.x1-me[xe-1].x,de.y1-me[xe-1].y,de.x2-me[xe-1].x,de.y2-me[xe-1].y,de.x-me[xe-1].x,de.y-me[xe-1].y],he[he.length-1].deltas.push(te);break;case"qct":var Ce=me[xe-1].x+2/3*(de.x1-me[xe-1].x),ae=me[xe-1].y+2/3*(de.y1-me[xe-1].y),Pe=de.x+2/3*(de.x1-de.x),J=de.y+2/3*(de.y1-de.y),ne=de.x,Re=de.y;te=[Ce-me[xe-1].x,ae-me[xe-1].y,Pe-me[xe-1].x,J-me[xe-1].y,ne-me[xe-1].x,Re-me[xe-1].y],he[he.length-1].deltas.push(te);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(de)}}le=G?null:F==="stroke"?"stroke":"fill";for(var dt=!1,et=0;et<he.length;et++)if(he[et].arc)for(var Ve=he[et].abs,ge=0;ge<Ve.length;ge++){var Se=Ve[ge];Se.type==="arc"?k.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,G,!dt):L.call(this,Se.x,Se.y),dt=!0}else if(he[et].close===!0)this.pdf.internal.out("h"),dt=!1;else if(he[et].begin!==!0){var ke=he[et].start.x,We=he[et].start.y;z.call(this,he[et].deltas,ke,We),dt=!0}le&&C.call(this,le),G&&I.call(this)}},P=function(F){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-te;case"top":return F+G-te;case"hanging":return F+G-2*te;case"middle":return F+G/2-te;default:return F}},O=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(G,te){this.colorStops.push([G,te])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(F,G,te,le,he,me,xe,de,Ne){for(var Ce=X.call(this,te,le,he,me),ae=0;ae<Ce.length;ae++){var Pe=Ce[ae];ae===0&&(Ne?R.call(this,Pe.x1+F,Pe.y1+G):L.call(this,Pe.x1+F,Pe.y1+G)),W.call(this,F,G,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}de?I.call(this):C.call(this,xe)},C=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(F,G){this.pdf.internal.out(n(F)+" "+r(G)+" m")},D=function(F){var G;switch(F.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var te=this.pdf.getTextDimensions(F.text),le=P.call(this,F.y),he=O.call(this,le)-te.h,me=this.ctx.transform.applyToPoint(new o(F.x,le)),xe=this.ctx.transform.decompose(),de=new c;de=(de=(de=de.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Ne,Ce,ae,Pe=this.ctx.transform.applyToRectangle(new l(F.x,le,te.w,te.h)),J=de.applyToRectangle(new l(F.x,he,te.w,te.h)),ne=x.call(this,J),Re=[],dt=0;dt<ne.length;dt+=1)Re.indexOf(ne[dt])===-1&&Re.push(ne[dt]);if(j(Re),this.autoPaging)for(var et=Re[0],Ve=Re[Re.length-1],ge=et;ge<Ve+1;ge++){this.pdf.setPage(ge);var Se=ge===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],Ke=We-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],nt=qe-this.margin[3],_t=ge===1?0:ke+(ge-2)*Ke;if(this.ctx.clip_path.length!==0){var xt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ne,this.posX+this.margin[3],-1*_t+Se),A.call(this,"fill",!0),this.path=xt}var Ot=S([JSON.parse(JSON.stringify(J))],this.posX+this.margin[3],-_t+Se+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale);var Yt=this.autoPaging!=="text";if(Yt||Ot.y+Ot.h<=We){if(Yt||Ot.y>=Se&&Ot.x<=qe){var Ct=Yt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||qe-Ot.x)[0],$n=S([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-_t+Se+this.ctx.prevPageLastElemOffset)[0],Pn=Yt&&(ge>et||ge<Ve)&&y.call(this);Pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,Ke,null).clip().discardPath()),this.pdf.text(Ct,$n.x,$n.y,{angle:F.angle,align:G,renderingMode:F.renderingMode}),Pn&&this.pdf.restoreGraphicsState()}}else Ot.y<We&&(this.ctx.prevPageLastElemOffset+=We-Ot.y);F.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ae)}else F.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*F.scale),ae=this.lineWidth,this.lineWidth=ae*F.scale),this.pdf.text(F.text,me.x+this.posX,me.y+this.posY,{angle:F.angle,align:G,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=ae)},L=function(F,G,te,le){te=te||0,le=le||0,this.pdf.internal.out(n(F+te)+" "+r(G+le)+" l")},z=function(F,G,te){return this.pdf.lines(F,G,te,null,null)},W=function(F,G,te,le,he,me,xe,de){this.pdf.internal.out([e(i(te+F)),e(s(le+G)),e(i(he+F)),e(s(me+G)),e(i(xe+F)),e(s(de+G)),"c"].join(" "))},X=function(F,G,te,le){for(var he=2*Math.PI,me=Math.PI/2;G>te;)G-=he;var xe=Math.abs(te-G);xe<he&&le&&(xe=he-xe);for(var de=[],Ne=le?-1:1,Ce=G;xe>1e-5;){var ae=Ce+Ne*Math.min(xe,me);de.push(q.call(this,F,Ce,ae)),xe-=Math.abs(ae-Ce),Ce=ae}return de},q=function(F,G,te){var le=(te-G)/2,he=F*Math.cos(le),me=F*Math.sin(le),xe=he,de=-me,Ne=xe*xe+de*de,Ce=Ne+xe*he+de*me,ae=4/3*(Math.sqrt(2*Ne*Ce)-Ce)/(xe*me-de*he),Pe=xe-ae*de,J=de+ae*xe,ne=Pe,Re=-J,dt=le+G,et=Math.cos(dt),Ve=Math.sin(dt);return{x1:F*Math.cos(G),y1:F*Math.sin(G),x2:Pe*et-J*Ve,y2:Pe*Ve+J*et,x3:ne*et-Re*Ve,y3:ne*Ve+Re*et,x4:F*Math.cos(te),y4:F*Math.sin(te)}},V=function(F){return 180*F/Math.PI},Y=function(F,G,te,le,he,me){var xe=F+.5*(te-F),de=G+.5*(le-G),Ne=he+.5*(te-he),Ce=me+.5*(le-me),ae=Math.min(F,he,xe,Ne),Pe=Math.max(F,he,xe,Ne),J=Math.min(G,me,de,Ce),ne=Math.max(G,me,de,Ce);return new l(ae,J,Pe-ae,ne-J)},re=function(F,G,te,le,he,me,xe,de){var Ne,Ce,ae,Pe,J,ne,Re,dt,et,Ve,ge,Se,ke,We,Ke=te-F,qe=le-G,nt=he-te,_t=me-le,xt=xe-he,Ot=de-me;for(Ce=0;Ce<41;Ce++)et=(Re=(ae=F+(Ne=Ce/40)*Ke)+Ne*((J=te+Ne*nt)-ae))+Ne*(J+Ne*(he+Ne*xt-J)-Re),Ve=(dt=(Pe=G+Ne*qe)+Ne*((ne=le+Ne*_t)-Pe))+Ne*(ne+Ne*(me+Ne*Ot-ne)-dt),Ce==0?(ge=et,Se=Ve,ke=et,We=Ve):(ge=Math.min(ge,et),Se=Math.min(Se,Ve),ke=Math.max(ke,et),We=Math.max(We,Ve));return new l(Math.round(ge),Math.round(Se),Math.round(ke-ge),Math.round(We-Se))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,G,te=(F=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:G}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(mn.API),(function(t){var e=function(o){var l,c,u,d,f,p,m,v,y,x;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(x=f%85))/85)-(y=f%85))/85)-(v=f%85))/85)-(m=f%85))/85)%85,c.push(p+33,m+33,v+33,y+33,x+33)):c.push(122);return(function(b,S){for(var j=S;j>0;j--)b.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,u,d,f,p=String,m="length",v=255,y="charCodeAt",x="slice",b="replace";for(o[x](-2),o=o[x](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[x](o[m]%5||5))[m];f>d;d+=5)c=52200625*(o[y](d)-33)+614125*(o[y](d+1)-33)+7225*(o[y](d+2)-33)+85*(o[y](d+3)-33)+(o[y](d+4)-33),u.push(v&c>>24,v&c>>16,v&c>>8,v&c);return(function(S,j){for(var E=j;E>0;E--)S.pop()})(u,l[m]),p.fromCharCode.apply(p,u)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=HR(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}})(mn.API),(function(t){t.loadFile=function(e,n,r){return(function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,d){var f=new XMLHttpRequest,p=0,m=function(v){var y=v.length,x=[],b=String.fromCharCode;for(p=0;p<y;p+=1)x.push(b(255&v.charCodeAt(p)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)})(i,s,o)}catch{}return l})(e,n,r)},t.loadImageFile=t.loadFile})(mn.API),(function(t){function e(){return(Vn.html2canvas?Promise.resolve(Vn.html2canvas):fO(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Vn.DOMPurify?Promise.resolve(Vn.DOMPurify):fO(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=ri(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var v=d[m],y=v.src.find(function(x){return x.format==="truetype"});y&&u.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||mn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),p=u.call(f,l,c);return o.convert(p,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,mn.getPageSize=function(l,c,u){if(ri(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var v,y=0,x=0;if(m.hasOwnProperty(p))y=m[p][1]/f,x=m[p][0]/f;else try{y=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>y&&(v=x,x=y,y=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",y>x&&(v=x,x=y,y=v)}return{width:x,height:y,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(TO):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}})(mn.API),mn.API.addJS=function(t){return lV=t,this.internal.events.subscribe("postPutResources",function(){d2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(d2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),oV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){d2!==void 0&&oV!==void 0&&this.internal.out("/Names <</JavaScript "+d2+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(mn.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=(function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,y={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=m,e.indexOf(f.charCodeAt(x+1))!==-1){p=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),y={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:p,numcomponents:f.charCodeAt(x+9)};break}m=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return y})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}})(mn.API),mn.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=n7e(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;i=u&&c===1?(function(k){for(var C=k.width,I=k.height,R=k.data,D=k.palette,L=k.depth,z=!1,W=[],X=[],q=void 0,V=!1,Y=0,re=0;re<D.length;re++){var Q=fH(D[re],4),F=Q[0],G=Q[1],te=Q[2],le=Q[3];W.push(F,G,te),le!=null&&(le===0?(Y++,X.length<1&&X.push(re)):le<255&&(V=!0))}if(V||Y>1){z=!0,X=void 0;var he=C*I;q=new Uint8Array(he);for(var me=new DataView(R.buffer),xe=0;xe<he;xe++){var de=PO(me,xe,L),Ne=fH(D[de],4)[3];q[xe]=Ne}}else Y===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:z?8:void 0,colorBytes:R,alphaBytes:q,needSMask:z,palette:W,mask:X}})(s):c===2||c===4?(function(k){for(var C=k.data,I=k.width,R=k.height,D=k.channels,L=k.depth,z=D===2?"DeviceGray":"DeviceRGB",W=D-1,X=I*R,q=W,V=X*q,Y=1*X,re=Math.ceil(V*L/8),Q=Math.ceil(Y*L/8),F=new Uint8Array(re),G=new Uint8Array(Q),te=new DataView(C.buffer),le=new DataView(F.buffer),he=new DataView(G.buffer),me=!1,xe=0;xe<X;xe++){for(var de=xe*D,Ne=0;Ne<q;Ne++)vV(le,PO(te,de+Ne,L),xe*q+Ne,L);var Ce=PO(te,de+q,L);Ce<(1<<L)-1&&(me=!0),vV(he,Ce,1*xe,L)}return{colorSpace:z,colorsPerPixel:W,sMaskBitsPerComponent:me?L:void 0,colorBytes:F,alphaBytes:G,needSMask:me}})(s):(function(k){var C=k.data,I=k.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:I,colorsPerPixel:I==="DeviceGray"?1:3,colorBytes:C instanceof Uint16Array?(function(R){for(var D=R.length,L=new Uint8Array(2*D),z=new DataView(L.buffer,L.byteOffset,L.byteLength),W=0;W<D;W++)z.setUint16(2*W,R[W],!1);return L})(C):C,needSMask:!1}})(s);var f,p,m,v=i,y=v.colorSpace,x=v.colorsPerPixel,b=v.sMaskBitsPerComponent,S=v.colorBytes,j=v.alphaBytes,E=v.needSMask,A=v.palette,P=v.mask,O=null;return r!==mn.API.image_compression.NONE&&typeof HR=="function"?(O=(function(k){var C;switch(k){case mn.API.image_compression.FAST:C=11;break;case mn.API.image_compression.MEDIUM:C=13;break;case mn.API.image_compression.SLOW:C=14;break;default:C=12}return C})(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(O," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=fV(S,Math.ceil(o*x*d/8),x,d,r),E&&(m=fV(j,Math.ceil(o*b/8),1,b,r))):(f=void 0,p=void 0,t=S,E&&(m=j)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:t,index:e,filter:f,decodeParameters:p,transparency:P,palette:A,sMask:m,predictor:O,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:b,colorSpace:y}}},(function(t){t.processGIF89A=function(e,n,r,i){var s=new S7e(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new MO(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A})(mn.API),iu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},iu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){di.log("bit decode error:"+n)}},iu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},iu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},iu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},iu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},iu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},iu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},iu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},iu.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var s=new iu(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new MO(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}})(mn.API),xV.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var s=new xV(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new MO(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}})(mn.API),mn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=r[u],f=r[u+1],p=r[u+2],m=r[u+3];s[l++]=d,s[l++]=f,s[l++]=p,o[c++]=m}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},mn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mv=mn.API,f2=mv.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,m=t.length,v=0,y=l[0]||c,x=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(p=f&&ri(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/d:0,x.push((l[r]||y)/c+p)),v=r;return x},cV=mv.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return mv.processArabic&&(t=mv.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:f2.apply(this,arguments).reduce(function(s,o){return s+o},0)},uV=function(t,e,n,r){for(var i=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<n;)l+=e[s],s++;i.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>r&&(i.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},dV=function(t,e,n){n||(n={});var r,i,s,o,l,c,u,d=[],f=[d],p=n.textIndent||0,m=0,v=0,y=t.split(" "),x=f2.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var b=Array(c).join(" "),S=[];y.map(function(E){(E=E.split(/\s*\n/)).length>1?S=S.concat(E.map(function(A,P){return(P&&A.length?`
`:"")+A})):S.push(E[0])}),y=S,c=cV.apply(this,[b,n])}for(s=0,o=y.length;s<o;s++){var j=0;if(r=y[s],c&&r[0]==`
`&&(r=r.substr(1),j=1),p+m+(v=(i=f2.apply(this,[r,n])).reduce(function(E,A){return E+A},0))>e||j){if(v>e){for(l=uV.apply(this,[r,i,e-(p+m),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);v=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(E,A){return E+A},0)}else d=[r];f.push(d),p=v+c,m=x}else d.push(r),p+=m+v,m=x}return u=c?function(E,A){return(A?b:"")+E.join(" ")}:function(E){return E.join(" ")},f.map(u)},mv.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,u=[];for(l=0,c=r.length;l<c;l++)u=u.concat(dV.apply(this,[r[l],o,s]));return u},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=t.__fontmetrics__.compress=function(p){var m,v,y,x,b=["{"];for(var S in p){if(m=p[S],isNaN(parseInt(S,10))?v="'"+S+"'":(S=parseInt(S,10),v=(v=o(S).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof m=="number")m<0?(y=o(m).slice(3),x="-"):(y=o(m).slice(2),x=""),y=x+y.slice(0,-1)+i[y.slice(-1)];else{if(ri(m)!=="object")throw new Error("Don't know what to do with value type "+ri(m)+".");y=l(m)}b.push(v+y)}return b.push("}"),b.join("")},c=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,v,y,x,b={},S=1,j=b,E=[],A="",P="",O=p.length-1,k=1;k<O;k+=1)(x=p[k])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(E.push([j,y]),j={},y=void 0):x=="}"?((v=E.pop())[0][v[1]]=j,y=void 0,j=v[0]):x=="-"?S=-1:y===void 0?r.hasOwnProperty(x)?(A+=r[x],y=parseInt(A,16)*S,S=1,A=""):A+=x:r.hasOwnProperty(x)?(P+=r[x],j[y]=parseInt(P,16)*S,S=1,y=void 0,P=""):P+=x;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var m=p.font,v=f.Unicode[m.postScriptName];v&&(m.metadata.Unicode={},m.metadata.Unicode.widths=v.widths,m.metadata.Unicode.kerning=v.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(mn.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(G2(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])})(mn),mn.API.addSvgAsImage=function(t,e,n,r,i,s,o,l){if(isNaN(e)||isNaN(n))throw di.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw di.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Vn.canvg?Promise.resolve(Vn.canvg):fO(()=>import("./index.es-CRxRWm-n.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,n,r,i,o,l)})},mn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},mn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function p(v,y){var x,b=!1;for(x=0;x<v.length;x+=1)v[x]===y&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=l.length;for(f=0;f<m;f+=1)n[l[f]].value=n[l[f]].defaultValue,n[l[f]].explicitSet=!1}if(ri(t)==="object"){for(i in t)if(s=t[i],p(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&p(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?y.push("/"+v+" /"+n[v].value):y.push("/"+v+" "+n[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(mn.API),(function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=s.length;f<p;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},r=function(s){var o,l,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(s).sort(function(m,v){return m-v})).length;f<p;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",v=0;v<p.length;v++)m+=String.fromCharCode(p[v]);var y=u();d({data:m,addLength1:!0,objectId:y}),c("endobj");var x=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_v(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+_v(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+_v(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var v=u();d({data:p,addLength1:!0,objectId:v}),c("endobj");var y=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+_v(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+_v(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},p=f.pdfEscape,m=f.activeFontKey,v=f.fonts,y=m,x="",b=0,S="",j=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(S=l,y=m,Array.isArray(l)&&(S=l[0]),b=0;b<S.length;b+=1)v[y].metadata.hasOwnProperty("cmap")&&(o=v[y].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),o||S[b].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?x+=S[b]:x+="";var E="";return parseInt(y.slice(1))<14||j==="WinAnsiEncoding"?E=p(x,y).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(E=n(x,v[y])),f.isHex=!0,{text:E,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])})(mn),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(mn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,l,c,u,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,j=0;this.__bidiEngine__={};var E=function(R){var D=R.charCodeAt(),L=D>>8,z=y[L];return z!==void 0?f[256*z+(255&D)]:L===252||L===253?"AL":b.test(L)?"L":L===8?"R":"N"},A=function(R){for(var D,L=0;L<R.length;L++){if((D=E(R.charAt(L)))==="L")return!1;if(D==="R")return!0}return!1},P=function(R,D,L,z){var W,X,q,V,Y=D[z];switch(Y){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(Y="AN");break;case"AL":S=!0,Y="R";break;case"WS":case"BN":Y="N";break;case"CS":z<1||z+1>=D.length||(W=L[z-1])!=="EN"&&W!=="AN"||(X=D[z+1])!=="EN"&&X!=="AN"?Y="N":S&&(X="AN"),Y=X===W?X:"N";break;case"ES":Y=(W=z>0?L[z-1]:"B")==="EN"&&z+1<D.length&&D[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&L[z-1]==="EN"){Y="EN";break}if(S){Y="N";break}for(q=z+1,V=D.length;q<V&&D[q]==="ET";)q++;Y=q<V&&D[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(V=D.length,q=z+1;q<V&&D[q]==="NSM";)q++;if(q<V){var re=R[z],Q=re>=1425&&re<=2303||re===64286;if(W=D[q],Q&&(W==="R"||W==="AL")){Y="R";break}}}Y=z<1||(W=D[z-1])==="B"?"N":L[z-1];break;case"B":S=!1,i=!0,Y=j;break;case"S":s=!0,Y="N"}return Y},O=function(R,D,L){var z=R.split("");return L&&k(z,L,{hiLevel:j}),z.reverse(),D&&D.reverse(),z.join("")},k=function(R,D,L){var z,W,X,q,V,Y=-1,re=R.length,Q=0,F=[],G=j?m:p,te=[];for(S=!1,i=!1,s=!1,W=0;W<re;W++)te[W]=E(R[W]);for(X=0;X<re;X++){if(V=Q,F[X]=P(R,te,F,X),z=240&(Q=G[V][v[F[X]]]),Q&=15,D[X]=q=G[Q][5],z>0)if(z===16){for(W=Y;W<X;W++)D[W]=1;Y=-1}else Y=-1;if(G[Q][6])Y===-1&&(Y=X);else if(Y>-1){for(W=Y;W<X;W++)D[W]=q;Y=-1}te[X]==="B"&&(D[X]=0),L.hiLevel|=q}s&&(function(le,he,me){for(var xe=0;xe<me;xe++)if(le[xe]==="S"){he[xe]=j;for(var de=xe-1;de>=0&&le[de]==="WS";de--)he[de]=j}})(te,D,re)},C=function(R,D,L,z,W){if(!(W.hiLevel<R)){if(R===1&&j===1&&!i)return D.reverse(),void(L&&L.reverse());for(var X,q,V,Y,re=D.length,Q=0;Q<re;){if(z[Q]>=R){for(V=Q+1;V<re&&z[V]>=R;)V++;for(Y=Q,q=V-1;Y<q;Y++,q--)X=D[Y],D[Y]=D[q],D[q]=X,L&&(X=L[Y],L[Y]=L[q],L[q]=X);Q=V}Q++}}},I=function(R,D,L){var z=R.split(""),W={hiLevel:j};return L||(L=[]),k(z,L,W),(function(X,q,V){if(V.hiLevel!==0&&d)for(var Y,re=0;re<X.length;re++)q[re]===1&&(Y=x.indexOf(X[re]))>=0&&(X[re]=x[Y+1])})(z,L,W),C(2,z,D,L,W),C(1,z,D,L,W),z.join("")};return this.__bidiEngine__.doBidiReorder=function(R,D,L){if((function(W,X){if(X)for(var q=0;q<W.length;q++)X[q]=q;l===void 0&&(l=A(W)),u===void 0&&(u=A(W))})(R,D),o||!c||u)if(o&&c&&l^u)j=l?1:0,R=O(R,D,L);else if(!o&&c&&u)j=l?1:0,R=I(R,D,L),R=O(R,D);else if(!o||l||c||u){if(o&&!c&&l^u)R=O(R,D),l?(j=0,R=I(R,D,L)):(j=1,R=I(R,D,L),R=O(R,D));else if(o&&l&&!c&&u)j=1,R=I(R,D,L),R=O(R,D);else if(!o&&!c&&l^u){var z=d;l?(j=1,R=I(R,D,L),j=0,d=!1,R=I(R,D,L),d=z):(j=0,R=I(R,D,L),R=O(R,D),j=1,d=!1,R=I(R,D,L),d=z,R=O(R,D))}}else j=0,R=I(R,D,L);else j=l?1:0,R=I(R,D,L);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([n.doBidiReorder(i[l])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(mn),mn.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new wp(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new F7e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new j7e(this.contents),this.head=new _7e(this),this.name=new O7e(this),this.cmap=new zse(this),this.toUnicode={},this.hhea=new C7e(this),this.maxp=new P7e(this),this.hmtx=new M7e(this),this.post=new k7e(this),this.os2=new A7e(this),this.loca=new L7e(this),this.glyf=new R7e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var Ru,wp=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,l,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t})(),j7e=(function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,l,c,u,d,f,p,m,v,y;for(y in m=Object.keys(n).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),d=16*m-f,(i=new wp).writeInt(this.scalarType),i.writeShort(m),i.writeShort(f),i.writeShort(o),i.writeShort(d),s=16*m,u=i.pos+s,l=null,v=[],n)for(p=n[y],i.writeString(y),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),v=v.concat(p),y==="head"&&(l=u),u+=p.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=qse.call(n);n.length%4;)n.push(0);for(s=new wp(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),E7e={}.hasOwnProperty,Md=function(t,e){for(var n in e)E7e.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ru=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var _7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new wp).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),bV=(function(){function t(e,n){var r,i,s,o,l,c,u,d,f,p,m,v,y,x,b,S,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),p=m/2,e.pos+=6,s=(function(){var E,A;for(A=[],c=E=0;0<=p?E<p:E>p;c=0<=p?++E:--E)A.push(e.readUInt16());return A})(),e.pos+=2,y=(function(){var E,A;for(A=[],c=E=0;0<=p?E<p:E>p;c=0<=p?++E:--E)A.push(e.readUInt16());return A})(),u=(function(){var E,A;for(A=[],c=E=0;0<=p?E<p:E>p;c=0<=p?++E:--E)A.push(e.readUInt16());return A})(),d=(function(){var E,A;for(A=[],c=E=0;0<=p?E<p:E>p;c=0<=p?++E:--E)A.push(e.readUInt16());return A})(),i=(this.length-e.pos+this.offset)/2,l=(function(){var E,A;for(A=[],c=E=0;0<=i?E<i:E>i;c=0<=i?++E:--E)A.push(e.readUInt16());return A})(),c=b=0,j=s.length;b<j;c=++b)for(x=s[c],r=S=v=y[c];v<=x?S<=x:S>=x;r=v<=x?++S:--S)d[c]===0?o=r+u[c]:(o=l[d[c]/2+(r-v)-(p-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=f}return t.encode=function(e,n){var r,i,s,o,l,c,u,d,f,p,m,v,y,x,b,S,j,E,A,P,O,k,C,I,R,D,L,z,W,X,q,V,Y,re,Q,F,G,te,le,he,me,xe,de,Ne,Ce,ae;switch(z=new wp,o=Object.keys(e).sort(function(Pe,J){return Pe-J}),n){case"macroman":for(y=0,x=(function(){var Pe=[];for(v=0;v<256;++v)Pe.push(0);return Pe})(),S={0:0},s={},W=0,Y=o.length;W<Y;W++)S[de=e[i=o[W]]]==null&&(S[de]=++y),s[i]={old:e[i],new:S[e[i]]},x[i]=S[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(x),{charMap:s,subtable:z.data,maxGlyphID:y+1};case"unicode":for(D=[],f=[],j=0,S={},r={},b=u=null,X=0,re=o.length;X<re;X++)S[A=e[i=o[X]]]==null&&(S[A]=++j),r[i]={old:A,new:S[A]},l=S[A]-i,b!=null&&l===u||(b&&f.push(b),D.push(i),u=l),b=i;for(b&&f.push(b),f.push(65535),D.push(65535),I=2*(C=D.length),k=2*Math.pow(Math.log(C)/Math.LN2,2),p=Math.log(k/2)/Math.LN2,O=2*C-k,c=[],P=[],m=[],v=q=0,Q=D.length;q<Q;v=++q){if(R=D[v],d=f[v],R===65535){c.push(0),P.push(0);break}if(R-(L=r[R].new)>=32768)for(c.push(0),P.push(2*(m.length+C-v)),i=V=R;R<=d?V<=d:V>=d;i=R<=d?++V:--V)m.push(r[i].new);else c.push(L-R),P.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*C+2*m.length),z.writeUInt16(0),z.writeUInt16(I),z.writeUInt16(k),z.writeUInt16(p),z.writeUInt16(O),me=0,F=f.length;me<F;me++)i=f[me],z.writeUInt16(i);for(z.writeUInt16(0),xe=0,G=D.length;xe<G;xe++)i=D[xe],z.writeUInt16(i);for(Ne=0,te=c.length;Ne<te;Ne++)l=c[Ne],z.writeUInt16(l);for(Ce=0,le=P.length;Ce<le;Ce++)E=P[Ce],z.writeUInt16(E);for(ae=0,he=m.length;ae<he;ae++)y=m[ae],z.writeUInt16(y);return{charMap:r,subtable:z.data,maxGlyphID:j+1}}},t})(),zse=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new bV(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=bV.encode(e,n),(i=new wp).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),C7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),A7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),k7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t})(),T7e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},O7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,l,c,u,d,f,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),l=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=r.length;d<f;s=++d)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new T7e(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),P7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),M7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,d;for(d=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)d.push(e.readInt16());return d})(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],p.push(s.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(r));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),qse=[].slice,R7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(l=new wp(n.read(i))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new I7e(l,u,f,c,d):new D7e(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,l,c;for(o=[],s=[],l=0,c=n.length;l<c;l++)i=e[n[l]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t})(),D7e=(function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),I7e=(function(){function t(e,n,r,i,s){var o,l;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new wp(qse.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),L7e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Md(t,Ru),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t})(),F7e=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,l,c,u,d,f,p,m,v,y,x,b;for(i in r=zse.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},b=r.charMap)m[(c=b[i]).old]=c.new;for(v in p=r.maxGlyphID,o)v in m||(m[v]=p++);return d=(function(S){var j,E;for(j in E={},S)E[S[j]]=j;return E})(m),f=Object.keys(d).sort(function(S,j){return S-j}),y=(function(){var S,j,E;for(E=[],S=0,j=f.length;S<j;S++)l=f[S],E.push(d[l]);return E})(),s=this.font.glyf.encode(o,y,m),u=this.font.loca.encode(s.offsets,y),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t})();mn.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+(function(){var l,c,u;for(u=[],l=0,c=n.length;l<c;l++)r=n[l],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e})();function B7e(){const t=H4(),[,e]=ca(),{user:n}=xg(),{data:r,isLoading:i}=Wt({queryKey:["/api/manuals",t.id]}),{data:s=[]}=Wt({queryKey:["/api/manuals",t.id,"attachments"],enabled:!!t.id}),o=n?.roleName||n?.role,l=["Administrador","Gestor","ADMIN","GESTOR"].includes(String(o)),[c,u]=N.useState(!1),{toast:d}=Dr(),f=async()=>{if(!(!r||!window.confirm(`Eliminar el manual "${r.titulo}"? Esta accin no se puede deshacer.`)))try{await Rt("DELETE",`/api/manuals/${encodeURIComponent(r.id)}`),cn.setQueryData(["/api/manuals"],y=>Array.isArray(y)?y.filter(x=>x.id!==r.id):y),await cn.invalidateQueries({queryKey:["/api/manuals"],exact:!0}),d({title:"Manual eliminado"}),e("/manuales")}catch(y){d({title:"No se pudo eliminar",description:y?.message??"",variant:"destructive"})}},p=v=>v<1024?v+" B":v<1024*1024?(v/1024).toFixed(1)+" KB":(v/(1024*1024)).toFixed(1)+" MB",m=()=>{if(!r)return;const v=new mn;v.setFontSize(20),v.text(r.titulo,20,20),v.setFontSize(12);const y=r.contenidoHtml.replace(/<[^>]*>/g,""),x=v.splitTextToSize(y,170);v.text(x,20,40),v.save(`${r.titulo}.pdf`)};return i?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(pr,{className:"h-9 w-48"}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(pr,{className:"h-8 w-3/4"})}),a.jsx(Qe,{children:a.jsx(pr,{className:"h-64 w-full"})})]})]}):r?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>e("/manuales"),"data-testid":"button-back",children:a.jsx(Hf,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:r.titulo})}),a.jsxs(pe,{variant:"outline",onClick:m,"data-testid":"button-export-pdf",children:[a.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]}),l&&a.jsxs(a.Fragment,{children:[a.jsxs(pe,{variant:"outline",onClick:()=>u(v=>!v),"data-testid":"button-expand",children:[c?a.jsx(qfe,{className:"h-4 w-4 mr-2"}):a.jsx(zfe,{className:"h-4 w-4 mr-2"}),c?"Reducir":"Expandir"]}),a.jsxs(pe,{variant:"destructive",onClick:f,"data-testid":"button-delete",children:[a.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Eliminar"]}),a.jsxs(pe,{onClick:()=>e(`/manuales/${r.id}/editar`),"data-testid":"button-edit",children:[a.jsx(fd,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]}),a.jsxs("div",{className:c?"grid gap-6 grid-cols-1":"grid gap-6 xl:grid-cols-[minmax(0,1fr)_320px]",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Xe,{children:[a.jsxs(ht,{className:"px-6 pt-6 pb-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gt,{className:"text-2xl",children:r.titulo}),r.categoria&&a.jsx("p",{className:"text-muted-foreground",children:r.categoria})]}),r.publicado?a.jsx(ct,{variant:"outline",className:"text-chart-3 bg-chart-3/10",children:"Publicado"}):a.jsx(ct,{variant:"outline",className:"text-muted-foreground bg-muted",children:"Borrador"})]}),r.etiquetas&&r.etiquetas.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:r.etiquetas.map(v=>a.jsx(ct,{variant:"secondary",children:v},v))})]}),a.jsxs(Qe,{className:"p-0",children:[a.jsx("div",{className:"prose lg:prose-base max-w-none px-6 pb-6 md:px-8 md:pb-8 [&_.editor-table]:border-collapse [&_.editor-table]:w-full [&_.editor-table]:my-4 [&_.editor-table_th]:border-2 [&_.editor-table_th]:border-black [&_.editor-table_th]:p-2 [&_.editor-table_th]:bg-muted [&_.editor-table_th]:font-semibold [&_.editor-table_th]:text-left [&_.editor-table_td]:border-2 [&_.editor-table_td]:border-black [&_.editor-table_td]:p-2",dangerouslySetInnerHTML:{__html:r.contenidoHtml}}),a.jsxs("div",{className:"px-6 md:px-8 mt-4 pt-4 border-t text-sm text-muted-foreground",children:["Creado el ",new Date(r.fechaCreacion).toLocaleDateString(),r.fechaActualizacion!==r.fechaCreacion&&a.jsxs(a.Fragment,{children:["  Actualizado el ",new Date(r.fechaActualizacion).toLocaleDateString()]})]})]})]}),s.length>0&&a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{className:"text-lg flex items-center gap-2",children:[a.jsx(pp,{className:"h-4 w-4"}),"Adjuntos (",s.length,")"]})}),a.jsx(Qe,{children:a.jsx("div",{className:"space-y-2",children:s.map(v=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover-elevate cursor-pointer",onClick:()=>window.open(v.filePath,"_blank"),"data-testid":`attachment-${v.id}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pp,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:v.originalName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:p(v.fileSize)})]})]}),a.jsx(Ha,{className:"h-4 w-4 text-muted-foreground"})]},v.id))})})]})]}),a.jsx("div",{className:"lg:sticky lg:top-8 lg:h-fit",children:a.jsx(G8e,{htmlContent:r.contenidoHtml})})]})]}):a.jsx("div",{className:"p-8",children:a.jsx(Xe,{children:a.jsxs(Qe,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Manual no encontrado"}),a.jsx(pe,{onClick:()=>e("/manuales"),children:"Volver a Manuales"})]})})})}function Fa(t){this.content=t}Fa.prototype={constructor:Fa,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Fa(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Fa(n)},addToStart:function(t,e){return new Fa([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Fa(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Fa(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Fa.from(t),t.size?new Fa(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Fa.from(t),t.size?new Fa(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Fa.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Fa.from=function(t){if(t instanceof Fa)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Fa(e)};function Use(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Use(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Hse(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,d=Math.min(o.text.length,l.text.length);for(;u<d&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=Hse(o.content,l.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class pt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&r(c,i+l,s||null,o)!==!1&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,n-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new pt(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],c=o+l.nodeSize;c>e&&((o<e||c>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=c}return new pt(r,i)}cutByIndex(e,n){return e==n?pt.empty:e==0&&n==this.content.length?this:new pt(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new pt(i,s)}addToStart(e){return new pt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new pt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Use(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Hse(this,e,n,r)}findIndex(e){if(e==0)return h2(0,e);if(e==this.size)return h2(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?h2(n+1,s):h2(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return pt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return pt.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new pt(n||e,r)}static from(e){if(!e)return pt.empty;if(e instanceof pt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new pt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pt.empty=new pt([],0);const RO={index:0,offset:0};function h2(t,e){return RO.index=t,RO.offset=e,RO}function US(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!US(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!US(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let hi=class ZR{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&US(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ZR.none;if(e instanceof ZR)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};hi.none=[];class HS extends Error{}class qt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Wse(this.content,e+this.openStart,n);return r&&new qt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new qt(Vse(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return qt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new qt(pt.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new qt(e,r,i)}}qt.empty=new qt(pt.empty,0,0);function Vse(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Vse(s.content,e-i-1,n-i-1)))}function Wse(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Wse(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function $7e(t,e,n){if(n.openStart>t.depth)throw new HS("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new HS("Inconsistent open depths");return Kse(t,e,n,0)}function Kse(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Kse(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return $m(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=z7e(n,t);return $m(s,Yse(t,o,l,e,r))}else return $m(s,VS(t,e,r))}function Gse(t,e){if(!e.type.compatibleContent(t.type))throw new HS("Cannot join "+e.type.name+" onto "+t.type.name)}function JR(t,e,n){let r=t.node(n);return Gse(r,e.node(n)),r}function Bm(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Vb(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Bm(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Bm(i.child(l),r);e&&e.depth==n&&e.textOffset&&Bm(e.nodeBefore,r)}function $m(t,e){return t.type.checkContent(e),t.copy(e)}function Yse(t,e,n,r,i){let s=t.depth>i&&JR(t,e,i+1),o=r.depth>i&&JR(n,r,i+1),l=[];return Vb(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(Gse(s,o),Bm($m(s,Yse(t,e,n,r,i+1)),l)):(s&&Bm($m(s,VS(t,e,i+1)),l),Vb(e,n,i,l),o&&Bm($m(o,VS(n,r,i+1)),l)),Vb(r,null,i,l),new pt(l)}function VS(t,e,n){let r=[];if(Vb(null,t,n,r),t.depth>n){let i=JR(t,e,n+1);Bm($m(i,VS(t,e,n+1)),r)}return Vb(e,null,n,r),new pt(r)}function z7e(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(pt.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class r1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return hi.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new WS(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(s),u=s-c;if(r.push(o,l,i+c),!u||(o=o.child(l),o.isText))break;s=u-1,i+=c+1}return new r1(n,r,s)}static resolveCached(e,n){let r=wV.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else wV.set(e,r=new q7e);let i=r.elts[r.i]=r1.resolve(e,n);return r.i=(r.i+1)%U7e,i}}class q7e{constructor(){this.elts=[],this.i=0}}const U7e=12,wV=new WeakMap;class WS{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const H7e=Object.create(null);let cp=class e4{constructor(e,n,r,i=hi.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||pt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&US(this.attrs,n||e.defaultAttrs||H7e)&&hi.sameSet(this.marks,r||hi.none)}copy(e=null){return e==this.content?this:new e4(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new e4(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return qt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new qt(u,i.depth-o,s.depth-o)}replace(e,n,r){return $7e(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return r1.resolveCached(this,e)}resolveNoCache(e){return r1.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Xse(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=pt.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=hi.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!hi.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=pt.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};cp.prototype.text=void 0;class KS extends cp{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xse(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new KS(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new KS(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Xse(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ug{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new V7e(e,n);if(r.next==null)return ug.empty;let i=Qse(r);r.next&&r.err("Unexpected trailing text");let s=Z7e(Q7e(i));return J7e(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let c=o.matchFragment(e,r);if(c&&(!n||c.validEnd))return pt.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:f}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=s(f,l.concat(d));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ug.empty=new ug(!0);class V7e{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Qse(t){let e=[];do e.push(W7e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function W7e(t){let e=[];do e.push(K7e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function K7e(t){let e=X7e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=G7e(t,e);else break;return e}function NV(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function G7e(t,e){let n=NV(t),r=n;return t.eat(",")&&(t.next!="}"?r=NV(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Y7e(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function X7e(t){if(t.eat("(")){let e=Qse(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Y7e(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Q7e(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=s(o.exprs[c],l);if(c==o.exprs.length-1)return u;i(u,l=n())}else if(o.type=="star"){let c=n();return r(l,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return i(s(o.expr,l),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let d=n();i(s(o.expr,c),d),c=d}if(o.max==-1)i(s(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let d=n();r(c,d),i(s(o.expr,c),d),c=d}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Zse(t,e){return e-t}function SV(t,e){let n=[];return r(e),n.sort(Zse);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&n.indexOf(c)==-1&&r(c)}}}function Z7e(t){let e=Object.create(null);return n(SV(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let d=0;d<i.length;d++)i[d][0]==l&&(u=i[d][1]);SV(t,c).forEach(d=>{u||i.push([l,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[r.join(",")]=new ug(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(Zse);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function J7e(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Jse(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function eae(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function tae(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function nae(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new tze(t,r,e[r]);return n}let jV=class rae{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=nae(e,r.attrs),this.defaultAttrs=Jse(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ug.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:eae(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new cp(this,this.computeAttrs(e),pt.from(n),hi.setFrom(r))}createChecked(e=null,n,r){return n=pt.from(n),this.checkContent(n),new cp(this,this.computeAttrs(e),n,hi.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=pt.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(pt.empty,!0);return s?new cp(this,e,n.append(s),hi.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){tae(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:hi.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new rae(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function eze(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class tze{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?eze(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class y_{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=nae(e,i.attrs),this.excluded=null;let s=Jse(this.attrs);this.instance=s?new hi(this,s):null}create(e=null){return!e&&this.instance?this.instance:new hi(this,eae(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new y_(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){tae(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class iae{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Fa.from(e.nodes),n.marks=Fa.from(e.marks||{}),this.nodes=jV.compile(this.spec.nodes,this),this.marks=y_.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ug.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?EV(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:EV(this,o.split(" "))}this.nodeFromJSON=i=>cp.fromJSON(this,i),this.markFromJSON=i=>hi.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof jV){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new KS(r,r.defaultAttrs,e,hi.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function EV(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let c=t.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function nze(t){return t.tag!=null}function rze(t){return t.style!=null}let Wb=class t4{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(nze(i))this.tags.push(i);else if(rze(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new CV(this,n,!1);return r.addAll(e,hi.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new CV(this,n,!0);return r.addAll(e,hi.none,n.from,n.to),qt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(aze(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=AV(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=AV(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t4(e,t4.schemaRules(e)))}};const sae={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ize={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},aae={ol:!0,ul:!0},i1=1,n4=2,Kb=4;function _V(t,e,n){return e!=null?(e?i1:0)|(e==="full"?n4:0):t&&t.whitespace=="pre"?i1|n4:n&~Kb}class p2{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=hi.none,this.match=s||(o&Kb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pt.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&i1)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=pt.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(pt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!sae.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class CV{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=_V(null,n.preserveWhitespace,0)|(r?Kb:0);i?s=new p2(i.type,i.attrs,hi.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new p2(null,null,hi.none,!0,null,o):s=new p2(e.schema.topNodeType,null,hi.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&n4?"full":this.localPreserveWS||(i.options&i1)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;aae.hasOwnProperty(o)&&this.parser.normalizeLists&&sze(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(c?c.ignore:ize.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if(sae.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=c&&c.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],u=c.findWrapping(e);if(u&&(!i||i.length>u.length+l)&&(i=u,s=c,!u.length))break;if(c.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=hi.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):kV(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=_V(e,s,o.options);o.options&Kb&&o.content.length==0&&(l|=Kb);let c=hi.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):kV(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new p2(e,n,c,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=i1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function sze(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&aae.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function aze(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function AV(t){let e={};for(let n in t)e[n]=t[n];return e}function kV(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:d}=l.edge(c);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Og{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=DO(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],d=this.serializeMark(u,o.isInline,n);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=J2(DO(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&J2(DO(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return J2(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Og(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=TV(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return TV(e.marks)}}function TV(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function DO(t){return t.document||window.document}const OV=new WeakMap;function oze(t){let e=OV.get(t);return e===void 0&&OV.set(t,e=lze(t)),e}function lze(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function J2(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=oze(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,c=n?t.createElementNS(n,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let p=f.indexOf(" ");p>0?c.setAttributeNS(f.slice(0,p),f.slice(p+1),u[f]):f=="style"&&c.style?c.style.cssText=u[f]:c.setAttribute(f,u[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:v}=J2(t,p,n,r);if(c.appendChild(m),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:c,contentDOM:l}}const oae=65535,lae=Math.pow(2,16);function cze(t,e){return t+e*lae}function PV(t){return t&oae}function uze(t){return(t-(t&oae))/lae}const cae=1,uae=2,eN=4,dae=8;class r4{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&dae)>0}get deletedBefore(){return(this.delInfo&(cae|eN))>0}get deletedAfter(){return(this.delInfo&(uae|eN))>0}get deletedAcross(){return(this.delInfo&eN)>0}}class Dl{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Dl.empty)return Dl.empty}recover(e){let n=0,r=PV(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+uze(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],d=this.ranges[l+o],f=c+u;if(e<=f){let p=u?e==c?-1:e==f?1:n:n,m=c+i+(p<0?0:d);if(r)return m;let v=e==(n<0?c:f)?null:cze(l/3,e-c),y=e==c?uae:e==f?cae:eN;return(n<0?e!=c:e!=f)&&(y|=dae),new r4(m,y,v)}i+=d-u}return r?e+i:new r4(e+i,0,null)}touches(e,n){let r=0,i=PV(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+s],d=c+u;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),u=this.ranges[i+n],d=this.ranges[i+r];e(l,l+u,c,c+d),s+=d-u}}invert(){return new Dl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Dl.empty:new Dl(e<0?[0,-e,0]:[0,0,e])}}Dl.empty=new Dl([]);class s1{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new s1(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new s1;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new r4(e,i,null)}}const IO=Object.create(null);class go{getMap(){return Dl.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=IO[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in IO)throw new RangeError("Duplicate use of step JSON ID "+e);return IO[e]=n,n.prototype.jsonID=e,n}}class Us{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Us(e,null)}static fail(e){return new Us(null,e)}static fromReplace(e,n,r,i){try{return Us.ok(e.replace(n,r,i))}catch(s){if(s instanceof HS)return Us.fail(s.message);throw s}}}function LL(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(LL(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return pt.fromArray(r)}class Jh extends go{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new qt(LL(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Us.fromReplace(e,this.from,this.to,s)}invert(){return new mu(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Jh(n.pos,r.pos,this.mark)}merge(e){return e instanceof Jh&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jh(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Jh(n.from,n.to,e.markFromJSON(n.mark))}}go.jsonID("addMark",Jh);class mu extends go{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new qt(LL(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Us.fromReplace(e,this.from,this.to,r)}invert(){return new Jh(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mu(n.pos,r.pos,this.mark)}merge(e){return e instanceof mu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mu(n.from,n.to,e.markFromJSON(n.mark))}}go.jsonID("removeMark",mu);class ep extends go{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Us.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Us.fromReplace(e,this.pos,this.pos+1,new qt(pt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ep(this.pos,n.marks[i]);return new ep(this.pos,this.mark)}}return new dg(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ep(n.pos,e.markFromJSON(n.mark))}}go.jsonID("addNodeMark",ep);class dg extends go{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Us.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Us.fromReplace(e,this.pos,this.pos+1,new qt(pt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new dg(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new dg(n.pos,e.markFromJSON(n.mark))}}go.jsonID("removeNodeMark",dg);class Ea extends go{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&i4(e,this.from,this.to)?Us.fail("Structure replace would overwrite content"):Us.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Dl([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ea(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ea(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ea)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?qt.empty:new qt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ea(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?qt.empty:new qt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ea(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ea(n.from,n.to,qt.fromJSON(e,n.slice),!!n.structure)}}go.jsonID("replace",Ea);class _a extends go{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(i4(e,this.from,this.gapFrom)||i4(e,this.gapTo,this.to)))return Us.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Us.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Us.fromReplace(e,this.from,this.to,r):Us.fail("Content does not fit in gap")}getMap(){return new Dl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new _a(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new _a(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _a(n.from,n.to,n.gapFrom,n.gapTo,qt.fromJSON(e,n.slice),n.insert,!!n.structure)}}go.jsonID("replaceAround",_a);function i4(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function dze(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(c,u,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(u,e),m=Math.min(u+c.nodeSize,n),v=r.addToSet(f);for(let y=0;y<f.length;y++)f[y].isInSet(v)||(o&&o.to==p&&o.mark.eq(f[y])?o.to=m:i.push(o=new mu(p,m,f[y])));l&&l.to==p?l.to=m:s.push(l=new Jh(p,m,r))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function fze(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof y_){let u=o.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],p;for(let m=0;m<i.length;m++){let v=i[m];v.step==s-1&&f.eq(i[m].style)&&(p=v)}p?(p.to=u,p.step=s):i.push({style:f,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new mu(o.from,o.to,o.style)))}function FL(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),d=l+u.nodeSize,f=r.matchType(u.type);if(!f)o.push(new Ea(l,d,qt.empty));else{r=f;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||t.step(new mu(l,d,u.marks[p]));if(i&&u.isText&&n.whitespace!="pre"){let p,m=/\r?\n|\r/g,v;for(;p=m.exec(u.text);)v||(v=new qt(pt.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Ea(l+p.index,l+p.index+p[0].length,v))}}l=d}if(!r.validEnd){let c=r.fillBefore(pt.empty,!0);t.replace(l,l,new qt(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function hze(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function xx(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!hze(i,s,o))break}return null}function pze(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),c=o,u=l,d=pt.empty,f=0;for(let v=s,y=!1;v>n;v--)y||r.index(v)>0?(y=!0,d=pt.from(r.node(v).copy(d)),f++):c--;let p=pt.empty,m=0;for(let v=s,y=!1;v>n;v--)y||i.after(v+1)<i.end(v)?(y=!0,p=pt.from(i.node(v).copy(p)),m++):u++;t.step(new _a(c,u,o,l,new qt(d.append(p),f,m),d.size-f,!0))}function BL(t,e,n=null,r=t){let i=mze(t,e),s=i&&gze(r,e);return s?i.map(MV).concat({type:e,attrs:n}).concat(s.map(MV)):null}function MV(t){return{type:t,attrs:null}}function mze(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function gze(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:o}function vze(t,e,n){let r=pt.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pt.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new _a(i,s,i,s,new qt(r,0,0),n.length,!0))}function yze(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&xze(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!v?u=!1:!m&&v&&(u=!0)}u===!1&&hae(t,o,l,s),FL(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let d=t.mapping.slice(s),f=d.map(l,1),p=d.map(l+o.nodeSize,1);return t.step(new _a(f,p,f+1,p-1,new qt(pt.from(r.create(c,null,o.marks)),0,0),1,!0)),u===!0&&fae(t,o,l,s),!1}})}function fae(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function hae(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function xze(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function bze(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _a(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new qt(pt.from(o),0,0),1,!0))}function Rf(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>s;u--,d--){let f=i.node(u),p=i.index(u);if(f.type.spec.isolating)return!1;let m=f.content.cutByIndex(p,f.childCount),v=r&&r[d+1];v&&(m=m.replaceChild(0,v.type.create(v.attrs)));let y=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!y.type.validContent(m))return!1}let l=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function wze(t,e,n=1,r){let i=t.doc.resolve(e),s=pt.empty,o=pt.empty;for(let l=i.depth,c=i.depth-n,u=n-1;l>c;l--,u--){s=pt.from(i.node(l).copy(s));let d=r&&r[u];o=pt.from(d?d.type.create(d.attrs,o):i.node(l).copy(o))}t.step(new Ea(e,e,new qt(s.append(o),n,n),!0))}function Ip(t,e){let n=t.resolve(e),r=n.index();return pae(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Nze(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function pae(t,e){return!!(t&&e&&!t.isLeaf&&Nze(t,e))}function x_(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&pae(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Sze(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);hae(t,d.node(),d.before(),l)}o.inlineContent&&FL(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let c=t.mapping.slice(l),u=c.map(e-n);if(t.step(new Ea(u,c.map(e+n,-1),qt.empty,!0)),r===!0){let d=t.doc.resolve(u);fae(t,d.node(),d.before(),t.steps.length)}return t}function jze(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function mae(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),u=r.node(o),d=!1;if(s==1)d=u.canReplace(c,c,i);else{let f=u.contentMatchAt(c).findWrapping(i.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function b_(t,e,n=e,r=qt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return gae(i,s,r)?new Ea(e,n,r):new Eze(i,s,r).fit()}function gae(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Eze{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pt.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=pt.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new qt(s,o,l);return e>-1?new _a(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Ea(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=LO(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],d,f=null;if(n==1&&(o?u.matchType(o.type)||(f=u.fillBefore(pt.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(n==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=LO(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new qt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=LO(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new qt(Sb(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new qt(Sb(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-e,u=0,d=[],{match:f,type:p}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)d.push(i.child(y));f=f.matchFragment(i)}let m=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let y=l.child(u),x=f.matchType(y.type);if(!x)break;u++,(u>1||c==0||y.content.size)&&(f=x,d.push(vae(y.mark(p.allowedMarks(y.marks)),u==1?c:0,u==l.childCount?m:-1)))}let v=u==l.childCount;v||(m=-1),this.placed=jb(this.placed,n,pt.from(d)),this.frontier[n].match=f,v&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=l;y<m;y++){let b=x.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),x=b.content}this.unplaced=v?e==0?qt.empty:new qt(Sb(o.content,e-1,1),e-1,m<0?o.openEnd:e-1):new qt(Sb(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!FO(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=FO(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],d=FO(e,l,u,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=jb(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=jb(this.placed,this.depth,pt.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pt.empty,!0);n.childCount&&(this.placed=jb(this.placed,this.frontier.length,n))}}function Sb(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Sb(t.firstChild.content,e-1,n)))}function jb(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(jb(t.lastChild.content,e-1,n)))}function LO(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function vae(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,vae(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(pt.empty,!0)))),t.copy(r)}function FO(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!_ze(n,s.content,o)?l:null}function _ze(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Cze(t){return t.spec.defining||t.spec.definingForContent}function Aze(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(gae(i,s,r))return t.step(new Ea(e,n,r));let o=xae(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let v=i.node(p).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(p)>-1?l=p:i.before(p)==m&&o.splice(1,0,-p)}let c=o.indexOf(l),u=[],d=r.openStart;for(let p=r.content,m=0;;m++){let v=p.firstChild;if(u.push(v),m==r.openStart)break;p=v.content}for(let p=d-1;p>=0;p--){let m=u[p],v=Cze(m.type);if(v&&!m.sameMarkup(i.node(Math.abs(l)-1)))d=p;else if(v||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+d+1)%(r.openStart+1),v=u[m];if(v)for(let y=0;y<o.length;y++){let x=o[(y+c)%o.length],b=!0;x<0&&(b=!1,x=-x);let S=i.node(x-1),j=i.index(x-1);if(S.canReplaceWith(j,j,v.type,v.marks))return t.replace(i.before(x),b?s.after(x):n,new qt(yae(r.content,0,r.openStart,m),m,r.openEnd))}}let f=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let m=o[p];m<0||(e=i.before(m),n=s.after(m))}}function yae(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(yae(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(pt.empty,!0))}return t}function kze(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=jze(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new qt(pt.from(r),0,0))}function Tze(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=xae(r,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function xae(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ny extends go{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Us.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Us.fromReplace(e,this.pos,this.pos+1,new qt(pt.from(i),0,n.isLeaf?0:1))}getMap(){return Dl.empty}invert(e){return new ny(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ny(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ny(n.pos,n.attr,n.value)}}go.jsonID("attr",ny);class a1 extends go{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Us.ok(r)}getMap(){return Dl.empty}invert(e){return new a1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new a1(n.attr,n.value)}}go.jsonID("docAttr",a1);let Uy=class extends Error{};Uy=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Uy.prototype=Object.create(Error.prototype);Uy.prototype.constructor=Uy;Uy.prototype.name="TransformError";class $L{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new s1}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Uy(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=qt.empty){let i=b_(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new qt(pt.from(r),0,0))}delete(e,n){return this.replace(e,n,qt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Aze(this,e,n,r),this}replaceRangeWith(e,n,r){return kze(this,e,n,r),this}deleteRange(e,n){return Tze(this,e,n),this}lift(e,n){return pze(this,e,n),this}join(e,n=1){return Sze(this,e,n),this}wrap(e,n){return vze(this,e,n),this}setBlockType(e,n=e,r,i=null){return yze(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return bze(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ny(e,n,r)),this}setDocAttribute(e,n){return this.step(new a1(e,n)),this}addNodeMark(e,n){return this.step(new ep(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof hi)n.isInSet(r.marks)&&this.step(new dg(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new dg(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return wze(this,e,n,r),this}addMark(e,n,r){return dze(this,e,n,r),this}removeMark(e,n,r){return fze(this,e,n,r),this}clearIncompatible(e,n,r){return FL(this,e,n,r),this}}const BO=Object.create(null);class Ln{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new bae(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=qt.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(u.pos),l?qt.empty:n),l==0&&IV(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=e.mapping.slice(r),u=c.map(o.pos),d=c.map(l.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,n),IV(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new En(e):Cv(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Cv(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Cv(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Bl(e.node(0))}static atStart(e){return Cv(e,e,0,0,1)||new Bl(e)}static atEnd(e){return Cv(e,e,e.content.size,e.childCount,-1)||new Bl(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=BO[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in BO)throw new RangeError("Duplicate use of selection JSON ID "+e);return BO[e]=n,n.prototype.jsonID=e,n}getBookmark(){return En.between(this.$anchor,this.$head).getBookmark()}}Ln.prototype.visible=!0;class bae{constructor(e,n){this.$from=e,this.$to=n}}let RV=!1;function DV(t){!RV&&!t.parent.inlineContent&&(RV=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class En extends Ln{constructor(e,n=e){DV(e),DV(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ln.near(r);let i=e.resolve(n.map(this.anchor));return new En(i.parent.inlineContent?i:r,r)}replace(e,n=qt.empty){if(super.replace(e,n),n==qt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof En&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new w_(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new En(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ln.findFrom(n,r,!0)||Ln.findFrom(n,-r,!0);if(s)n=s.$head;else return Ln.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Ln.findFrom(e,-r,!0)||Ln.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new En(e,n)}}Ln.jsonID("text",En);class w_{constructor(e,n){this.anchor=e,this.head=n}map(e){return new w_(e.map(this.anchor),e.map(this.head))}resolve(e){return En.between(e.resolve(this.anchor),e.resolve(this.head))}}class Nn extends Ln{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Ln.near(s):new Nn(s)}content(){return new qt(pt.from(this.node),0,0)}eq(e){return e instanceof Nn&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zL(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Nn(e.resolve(n.anchor))}static create(e,n){return new Nn(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Nn.prototype.visible=!1;Ln.jsonID("node",Nn);class zL{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new w_(r,r):new zL(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Nn.isSelectable(r)?new Nn(n):Ln.near(n)}}class Bl extends Ln{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=qt.empty){if(n==qt.empty){e.delete(0,e.doc.content.size);let r=Ln.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Bl(e)}map(e){return new Bl(e)}eq(e){return e instanceof Bl}getBookmark(){return Oze}}Ln.jsonID("all",Bl);const Oze={map(){return this},resolve(t){return new Bl(t)}};function Cv(t,e,n,r,i,s=!1){if(e.inlineContent)return En.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&Nn.isSelectable(l))return Nn.create(t,n-(i<0?l.nodeSize:0))}else{let c=Cv(t,l,n+i,i<0?l.childCount:0,i,s);if(c)return c}n+=l.nodeSize*i}return null}function IV(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ea||i instanceof _a))return;let s=t.mapping.maps[r],o;s.forEach((l,c,u,d)=>{o==null&&(o=d)}),t.setSelection(Ln.near(t.doc.resolve(o),n))}const LV=1,m2=2,FV=4;class Pze extends $L{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|LV)&~m2,this.storedMarks=null,this}get selectionSet(){return(this.updated&LV)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=m2,this}ensureMarks(e){return hi.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&m2)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~m2,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||hi.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Ln.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=FV,this}get scrolledIntoView(){return(this.updated&FV)>0}}function BV(t,e){return!e||!t?t:t.bind(e)}class Eb{constructor(e,n,r){this.name=e,this.init=BV(n.init,r),this.apply=BV(n.apply,r)}}const Mze=[new Eb("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Eb("selection",{init(t,e){return t.selection||Ln.atStart(e.doc)},apply(t){return t.selection}}),new Eb("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Eb("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class $O{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Mze.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Eb(r.key,r.spec.state,r))})}}class $v{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,u=i?i[o].state:this,d=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,u,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $v(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Pze(this)}static create(e){let n=new $O(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $v(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new $O(this.schema,e.plugins),r=n.fields,i=new $v(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new $O(e.schema,e.plugins),s=new $v(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=cp.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Ln.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=u.fromJSON.call(c,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function wae(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=wae(i,e,{})),n[r]=i}return n}class Di{constructor(e){this.spec=e,this.props={},e.props&&wae(e.props,this,this.props),this.key=e.key?e.key.key:Nae("plugin")}getState(e){return e[this.key]}}const zO=Object.create(null);function Nae(t){return t in zO?t+"$"+ ++zO[t]:(zO[t]=0,t+"$")}class Ns{constructor(e="key"){this.key=Nae(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const qL=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Sae(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const jae=(t,e,n)=>{let r=Sae(t,n);if(!r)return!1;let i=UL(r);if(!i){let o=r.blockRange(),l=o&&xx(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(Mae(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Hy(s,"end")||Nn.isSelectable(s)))for(let o=r.depth;;o--){let l=b_(t.doc,r.before(o),r.after(o),qt.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Hy(s,"end")?Ln.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Nn.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Rze=(t,e,n)=>{let r=Sae(t,n);if(!r)return!1;let i=UL(r);return i?Eae(t,i,e):!1},Dze=(t,e,n)=>{let r=Cae(t,n);if(!r)return!1;let i=HL(r);return i?Eae(t,i,e):!1};function Eae(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let u=b_(t.doc,s,c,qt.empty);if(!u||u.from!=s||u instanceof Ea&&u.slice.size>=c-s)return!1;if(n){let d=t.tr.step(u);d.setSelection(En.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Hy(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const _ae=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=UL(r)}let o=s&&s.nodeBefore;return!o||!Nn.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Nn.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function UL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Cae(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Aae=(t,e,n)=>{let r=Cae(t,n);if(!r)return!1;let i=HL(r);if(!i)return!1;let s=i.nodeAfter;if(Mae(t,i,e,1))return!0;if(r.parent.content.size==0&&(Hy(s,"start")||Nn.isSelectable(s))){let o=b_(t.doc,r.before(),r.after(),qt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Hy(s,"start")?Ln.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Nn.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},kae=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=HL(r)}let o=s&&s.nodeAfter;return!o||!Nn.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Nn.create(t.doc,s.pos)).scrollIntoView()),!0)};function HL(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Ize=(t,e)=>{let n=t.selection,r=n instanceof Nn,i;if(r){if(n.node.isTextblock||!Ip(t.doc,n.from))return!1;i=n.from}else if(i=x_(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Nn.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Lze=(t,e)=>{let n=t.selection,r;if(n instanceof Nn){if(n.node.isTextblock||!Ip(t.doc,n.to))return!1;r=n.to}else if(r=x_(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Fze=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&xx(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Tae=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function VL(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Bze=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=VL(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Ln.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},Oae=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Bl||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=VL(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(En.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},Pae=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Rf(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&xx(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function $ze(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Nn&&e.selection.node.isBlock)return!r.parentOffset||!Rf(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,c=!1,u=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){c=r.end(m)==r.pos+(r.depth-m),u=r.start(m)==r.pos-(r.depth-m),l=VL(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),s.unshift(c&&l?{type:l}:null),o=m;break}else{if(m==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof En||e.selection instanceof Bl)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=Rf(d.doc,f,s.length,s);if(p||(s[0]=l?{type:l}:null,p=Rf(d.doc,f,s.length,s)),!p)return!1;if(d.split(f,s.length,s),!c&&u&&r.node(o).type!=l){let m=d.mapping.map(r.before(o)),v=d.doc.resolve(m);l&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,l)&&d.setNodeMarkup(d.mapping.map(r.before(o)),l)}return n&&n(d.scrollIntoView()),!0}}const zze=$ze(),qze=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Nn.create(t.doc,i))),!0)};function Uze(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ip(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Mae(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&Uze(t,e,n))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,v=pt.empty;for(let b=o.length-1;b>=0;b--)v=pt.from(o[b].create(null,v));v=pt.from(i.copy(v));let y=t.tr.step(new _a(e.pos-1,m,e.pos,m,new qt(v,1,0),o.length,!0)),x=y.doc.resolve(m+2*o.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Ip(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&c?null:Ln.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&xx(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&Hy(s,"start",!0)&&Hy(i,"end")){let m=i,v=[];for(;v.push(m),!m.isTextblock;)m=m.lastChild;let y=s,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(n){let b=pt.empty;for(let j=v.length-1;j>=0;j--)b=pt.from(v[j].copy(b));let S=t.tr.step(new _a(e.pos-v.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new qt(b,v.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function Rae(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(En.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Hze=Rae(-1),Vze=Rae(1);function Wze(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&BL(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function $V(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(u),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];s.setBlockType(l,c,t,e)}r(s.scrollIntoView())}return!0}}function WL(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}WL(qL,jae,_ae);WL(qL,Aae,kae);WL(Tae,Oae,Pae,zze);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Kze(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return Gze(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function Gze(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);s=new WS(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new WS(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=BL(s,n,r,e);return l?(t&&Yze(t,e,l,i,n),!0):!1}function Yze(t,e,n,r,i){let s=pt.empty;for(let d=n.length-1;d>=0;d--)s=pt.from(n[d].type.create(n[d].attrs,s));t.step(new _a(e.start-(r?2:0),e.end,e.start,e.end,new qt(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let l=n.length-o,c=e.start+n.length-(r?2:0),u=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&Rf(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(d).nodeSize;return t}function Xze(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Qze(e,n,t,s):Zze(e,n,s):!0:!1}}function Qze(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new _a(s-1,o,s,o,new qt(pt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new WS(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=xx(r);if(l==null)return!1;i.lift(r,l);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Ip(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function Zze(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,v=n.endIndex-1,y=n.startIndex;v>y;v--)m-=i.child(v).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(l?0:1),d+1,o.content.append(c?pt.empty:pt.from(i))))return!1;let f=s.pos,p=f+o.nodeSize;return r.step(new _a(f-(l?1:0),p+(c?1:0),f+1,p-1,new qt((l?pt.empty:pt.from(i.copy(pt.empty))).append(c?pt.empty:pt.from(i.copy(pt.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Jze(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=t)return!1;if(n){let u=c.lastChild&&c.lastChild.type==l.type,d=pt.from(u?t.create():null),f=new qt(pt.from(t.create(null,pt.from(l.type.create(null,d)))),u?3:1,0),p=s.start,m=s.end;n(e.tr.step(new _a(p-(u?3:1),m,p,m,f,1,!0)).scrollIntoView())}return!0}}const Ba=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Vy=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let s4=null;const bf=function(t,e,n){let r=s4||(s4=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},e9e=function(){s4=null},fg=function(t,e,n,r){return n&&(zV(t,e,n,r,-1)||zV(t,e,n,r,1))},t9e=/^(img|br|input|textarea|hr)$/i;function zV(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:yc(t))){let o=t.parentNode;if(!o||o.nodeType!=1||V1(t)||t9e.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ba(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?yc(t):0}else return!1}}function yc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function n9e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=yc(t)}else if(t.parentNode&&!V1(t))e=Ba(t),t=t.parentNode;else return null}}function r9e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!V1(t))e=Ba(t)+1,t=t.parentNode;else return null}}function i9e(t,e,n){for(let r=e==0,i=e==yc(t);r||i;){if(t==n)return!0;let s=Ba(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==yc(t)}}function V1(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const N_=function(t){return t.focusNode&&fg(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function wm(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function s9e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function a9e(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(yc(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(yc(r.startContainer),r.startOffset)}}}const Ed=typeof navigator<"u"?navigator:null,qV=typeof document<"u"?document:null,Lp=Ed&&Ed.userAgent||"",a4=/Edge\/(\d+)/.exec(Lp),Dae=/MSIE \d/.exec(Lp),o4=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Lp),ul=!!(Dae||o4||a4),up=Dae?document.documentMode:o4?+o4[1]:a4?+a4[1]:0,Sc=!ul&&/gecko\/(\d+)/i.test(Lp);Sc&&+(/Firefox\/(\d+)/.exec(Lp)||[0,0])[1];const l4=!ul&&/Chrome\/(\d+)/.exec(Lp),ho=!!l4,Iae=l4?+l4[1]:0,Io=!ul&&!!Ed&&/Apple Computer/.test(Ed.vendor),Wy=Io&&(/Mobile\/\w+/.test(Lp)||!!Ed&&Ed.maxTouchPoints>2),mc=Wy||(Ed?/Mac/.test(Ed.platform):!1),o9e=Ed?/Win/.test(Ed.platform):!1,_f=/Android \d/.test(Lp),W1=!!qV&&"webkitFontSmoothing"in qV.documentElement.style,l9e=W1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function c9e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function hf(t,e){return typeof t=="number"?t:t[e]}function u9e(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function UV(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Vy(o);continue}let l=o,c=l==s.body,u=c?c9e(s):u9e(l),d=0,f=0;if(e.top<u.top+hf(r,"top")?f=-(u.top-e.top+hf(i,"top")):e.bottom>u.bottom-hf(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+hf(i,"top")-u.top:e.bottom-u.bottom+hf(i,"bottom")),e.left<u.left+hf(r,"left")?d=-(u.left-e.left+hf(i,"left")):e.right>u.right-hf(r,"right")&&(d=e.right-u.right+hf(i,"right")),d||f)if(c)s.defaultView.scrollBy(d,f);else{let m=l.scrollLeft,v=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let y=l.scrollLeft-m,x=l.scrollTop-v;e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x}}let p=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:Vy(o)}}function d9e(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,i=c.top;break}}return{refDOM:r,refTop:i,stack:Lae(t.dom)}}function Lae(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Vy(r));return e}function f9e({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Fae(n,r==0?0:r-e)}function Fae(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let gv=null;function h9e(t){if(t.setActive)return t.setActive();if(gv)return t.focus(gv);let e=Lae(t);t.focus(gv==null?{get preventScroll(){return gv={preventScroll:!0},!0}}:void 0),gv||(gv=!1,Fae(e,0))}function Bae(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,c,u;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=bf(d).getClientRects();else continue;for(let m=0;m<p.length;m++){let v=p[m];if(v.top<=o&&v.bottom>=l){o=Math.max(v.bottom,o),l=Math.min(v.top,l);let y=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(y<r){n=d,r=y,i=y&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,d.nodeType==1&&y&&(s=f+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=d,u={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(s=f+1)}}return!n&&c&&(n=c,i=u,r=0),n&&n.nodeType==3?p9e(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Bae(n,i)}function p9e(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Ih(r,1);if(s.top!=s.bottom&&KL(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function KL(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function m9e(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function g9e(t,e,n){let{node:r,offset:i}=Bae(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function v9e(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?i=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function $ae(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(KL(e,u))return $ae(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function y9e(t,e){let n=t.dom.ownerDocument,r,i=0,s=a9e(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!KL(e,u)||(o=$ae(t.dom,e,u),!o))return null}if(Io)for(let u=o;r&&u;u=Vy(u))u.draggable&&(r=void 0);if(o=m9e(o,e),r){if(Sc&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;W1&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=v9e(t,r,i,e))}l==null&&(l=g9e(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function HV(t){return t.top<t.bottom||t.left<t.right}function Ih(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(HV(r))return r}return Array.prototype.find.call(n,HV)||t.getBoundingClientRect()}const x9e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zae(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=W1||Sc;if(r.nodeType==3)if(o&&(x9e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=Ih(bf(r,i,i),n);if(Sc&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Ih(bf(r,i-1,i-1),-1);if(u.top==c.top){let d=Ih(bf(r,i,i+1),-1);if(d.top!=c.top)return db(d,d.left<u.left)}}return c}else{let c=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:u++,db(Ih(bf(r,c,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==yc(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return qO(c.getBoundingClientRect(),!1)}if(s==null&&i<yc(r)){let c=r.childNodes[i];if(c.nodeType==1)return qO(c.getBoundingClientRect(),!0)}return qO(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==yc(r))){let c=r.childNodes[i-1],u=c.nodeType==3?bf(c,yc(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return db(Ih(u,1),!1)}if(s==null&&i<yc(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?bf(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return db(Ih(u,-1),!0)}return db(Ih(r.nodeType==3?bf(r):r,-n),n>=0)}function db(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function qO(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function qae(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function b9e(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return qae(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=zae(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=bf(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const w9e=/[\u0590-\u08ac]/;function N9e(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!w9e.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:qae(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:y}=t.domSelectionRange(),x=v&&!m.contains(v.nodeType==1?v:v.parentNode)||c==v&&u==y;try{l.collapse(d,f),c&&(c!=d||u!=f)&&l.extend&&l.extend(c,u)}catch{}return p!=null&&(l.caretBidiLevel=p),x}):r.pos==r.start()||r.pos==r.end()}let VV=null,WV=null,KV=!1;function S9e(t,e,n){return VV==e&&WV==n?KV:(VV=e,WV=n,KV=n=="up"||n=="down"?b9e(t,e,n):N9e(t,e,n))}const jc=0,GV=1,Om=2,_d=3;class K1{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=jc,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ba(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Hae){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Uae&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ba(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ba(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let c=this.children[l],u=o+c.size;if(i==-1&&e<=u){let d=o+c.border;if(e>=d&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=o;for(let f=l;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Ba(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Ba(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let m=0,v=0;m<this.children.length;m++){let y=this.children[m],x=v+y.size;if(s>v&&o<x)return y.setSelection(e-v-y.border,n-v-y.border,r,i);v=x}let l=this.domFromPos(e,e?-1:1),c=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((Sc||Io)&&e==n){let{node:m,offset:v}=l;if(m.nodeType==3){if(f=!!(v&&m.nodeValue[v-1]==`
`),f&&v==m.nodeValue.length)for(let y=m,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(l=c={node:x.parentNode,offset:Ba(x)+1});break}let b=y.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let y=m.childNodes[v-1];f=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Sc&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let m=d.focusNode.childNodes[d.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||f&&Io)&&fg(l.node,l.offset,d.anchorNode,d.anchorOffset)&&fg(c.node,c.offset,d.focusNode,d.focusOffset))return;let p=!1;if((u.extend||e==n)&&!(f&&Sc)){u.collapse(l.node,l.offset);try{e!=n&&u.extend(c.node,c.offset),p=!0}catch{}}if(!p){if(e>n){let v=l;l=c,c=v}let m=document.createRange();m.setEnd(c.node,c.offset),m.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,c=o-s.border;if(e>=l&&n<=c){this.dirty=e==r||n==o?Om:GV,e==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=_d:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Om:_d}r=o}this.dirty=Om}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Om:GV;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Uae extends K1{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==jc&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class j9e extends K1{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class hg extends K1{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Og.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new hg(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&_d||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_d&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=jc){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=jc}}slice(e,n,r){let i=hg.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=u4(s,n,o,r)),e>0&&(s=u4(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class dp extends K1{constructor(e,n,r,i,s,o,l,c,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],c,u=l&&l(n,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Og.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=Kae(d,r,n),u?c=new E9e(e,n,r,i,d,f||null,p,u,s,o+1):n.isText?new S_(e,n,r,i,d,p,s):new dp(e,n,r,i,d,f||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>pt.empty)}return e}matchesNode(e,n,r){return this.dirty==jc&&e.eq(this.node)&&GS(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new C9e(this,o&&o.node,e);T9e(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?hi.none:this.node.child(d).marks,r,e),c.placeWidget(u,e,i)},(u,d,f,p)=>{c.syncToMarks(u.marks,r,e);let m;c.findNodeMatch(u,d,f,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(m=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,d,f,m,e)||c.updateNextNode(u,d,f,e,p,i)||c.addNode(u,d,f,e,i),i+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Om)&&(o&&this.protectLocalComposition(e,o),Vae(this.contentDOM,this.children,e),Wy&&O9e(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof En)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=P9e(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new j9e(this,s,n,i);e.input.compositionNodes.push(o),this.children=u4(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==_d||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=jc}updateOuterDeco(e){if(GS(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Wae(this.dom,this.nodeDOM,c4(this.outerDeco,this.node,n),c4(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function YV(t,e,n,r,i){Kae(r,e,t);let s=new dp(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class S_ extends dp{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==_d||this.dirty!=jc&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=jc||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=jc,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new S_(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=_d)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Hae extends K1{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==jc&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class E9e extends dp{constructor(e,n,r,i,s,o,l,c,u,d){super(e,n,r,i,s,o,l,u,d),this.spec=c}update(e,n,r,i){if(this.dirty==_d)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Vae(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=XV(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof hg){let c=r?r.previousSibling:t.lastChild;Vae(o.contentDOM,o.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=XV(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Gb=function(t){t&&(this.nodeName=t)};Gb.prototype=Object.create(null);const Pm=[new Gb];function c4(t,e,n){if(t.length==0)return Pm;let r=n?Pm[0]:new Gb,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Gb(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&i.length==1&&i.push(r=new Gb(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return i}function Wae(t,e,n,r){if(n==Pm&&r==Pm)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=Pm[0]),i=c}_9e(i,l||Pm[0],o)}return i}function _9e(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Kae(t,e,n){return Wae(t,t,Pm,c4(e,n,t.nodeType!=1))}function GS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function XV(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class C9e{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=A9e(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=jc,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=hg.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==_d&&o.dom==o.contentDOM&&(o.dirty=Om),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof dp){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let d=c.dom,f,p=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=_d&&GS(n,c.outerDeco));if(!p&&c.update(e,n,r,i))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(c,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Om,f.updateChildren(i,o+1),f.dirty=jc),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!GS(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=dp.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=dp.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Uae(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof hg;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof S_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Io||ho)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Hae(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function A9e(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof hg)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function k9e(t,e){return t.type.side-e.type.side}function T9e(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);r(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let d,f;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(d?(f||(f=[d])).push(x):d=x)}if(d)if(f){f.sort(k9e);for(let x=0;x<f.length;x++)n(f[x],u,!!c)}else n(d,u,!!c);let p,m;if(c)m=-1,p=c,c=null;else if(u<t.childCount)m=u,p=t.child(u++);else break;for(let x=0;x<l.length;x++)l[x].to<=s&&l.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let v=s+p.nodeSize;if(p.isText){let x=v;o<i.length&&i[o].from<x&&(x=i[o].from);for(let b=0;b<l.length;b++)l[b].to<x&&(x=l[b].to);x<v&&(c=p.cut(x-s),p=p.cut(0,x-s),v=x,m=-1)}else for(;o<i.length&&i[o].to<v;)o++;let y=p.isInline&&!p.isLeaf?l.filter(x=>!x.inline):l.slice();r(p,y,e.forChild(s,p),m),s=v}}function O9e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function P9e(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=n){if(s>=r&&c.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?c.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&c.length>=r+e.length-l&&c.slice(r-l,r-l+e.length)==e)return r}}return-1}function u4(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],u=l,d=l+=c.size;u>=n||d<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,r)),i&&(s.push(i),i=void 0),d>n&&s.push(c.slice(n-u,c.size,r)))}return s}function GL(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,u;if(N_(n)){for(c=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Nn.isSelectable(f)&&i.parent&&!(f.isInline&&i9e(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;u=new Nn(o==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=o,p=o;for(let m=0;m<n.rangeCount;m++){let v=n.getRangeAt(m);f=Math.min(f,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(f<0)return null;[c,o]=p==t.state.selection.anchor?[p,f]:[f,p],l=r.resolve(o)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let f=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=YL(t,d,l,f)}return u}function Gae(t){return t.editable?t.hasFocus():Xae(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Df(t,e=!1){let n=t.state.selection;if(Yae(t,n),!!Gae(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ho){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&fg(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)R9e(t);else{let{anchor:r,head:i}=n,s,o;QV&&!(n instanceof En)&&(n.$from.parent.inlineContent||(s=ZV(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=ZV(t,n.to))),t.docView.setSelection(r,i,t,e),QV&&(s&&JV(s),o&&JV(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&M9e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const QV=Io||ho&&Iae<63;function ZV(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Io&&i&&i.contentEditable=="false")return UO(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return UO(i);if(s)return UO(s)}}function UO(t){return t.contentEditable="true",Io&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function JV(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function M9e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Gae(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function R9e(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ba(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&ul&&up<=11&&(n.disabled=!0,n.disabled=!1)}function Yae(t,e){if(e instanceof Nn){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(eW(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else eW(t)}function eW(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function YL(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||En.between(e,n,r)}function tW(t){return t.editable&&!t.hasFocus()?!1:Xae(t)}function Xae(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function D9e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return fg(e.node,e.offset,n.anchorNode,n.anchorOffset)}function d4(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ln.findFrom(s,e)}function $h(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nW(t,e,n){let r=t.state.selection;if(r instanceof En)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return $h(t,new En(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=d4(t.state,e);return i&&i instanceof Nn?$h(t,i):!1}else if(!(mc&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Nn.isSelectable(s)?$h(t,new Nn(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):W1?$h(t,new En(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Nn&&r.node.isInline)return $h(t,new En(e>0?r.$to:r.$from));{let i=d4(t.state,e);return i?$h(t,i):!1}}}function YS(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Yb(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function vv(t,e){return e<0?I9e(t):L9e(t)}function I9e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Sc&&n.nodeType==1&&r<YS(n)&&Yb(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Yb(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Qae(n))break;{let l=n.previousSibling;for(;l&&Yb(l,-1);)i=n.parentNode,s=Ba(l),l=l.previousSibling;if(l)n=l,r=YS(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?f4(t,n,r):i&&f4(t,i,s)}function L9e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=YS(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Yb(l,1))s=n,o=++r;else break}else{if(Qae(n))break;{let l=n.nextSibling;for(;l&&Yb(l,1);)s=l.parentNode,o=Ba(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=YS(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&f4(t,s,o)}function Qae(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function F9e(t,e){for(;t&&e==t.childNodes.length&&!V1(t);)e=Ba(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function B9e(t,e){for(;t&&!e&&!V1(t);)e=Ba(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function f4(t,e,n){if(e.nodeType!=3){let s,o;(o=F9e(e,n))?(e=o,n=0):(s=B9e(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(N_(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Df(t)},50)}function rW(t,e){let n=t.state.doc.resolve(e);if(!(ho||o9e)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function iW(t,e,n){let r=t.state.selection;if(r instanceof En&&!r.empty||n.indexOf("s")>-1||mc&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=d4(t.state,e);if(o&&o instanceof Nn)return $h(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Bl?Ln.near(o,e):Ln.findFrom(o,e);return l?$h(t,l):!1}return!1}function sW(t,e){if(!(t.state.selection instanceof En))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function aW(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function $9e(t){if(!Io||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;aW(t,r,"true"),setTimeout(()=>aW(t,r,"false"),20)}return!1}function z9e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function q9e(t,e){let n=e.keyCode,r=z9e(e);if(n==8||mc&&n==72&&r=="c")return sW(t,-1)||vv(t,-1);if(n==46&&!e.shiftKey||mc&&n==68&&r=="c")return sW(t,1)||vv(t,1);if(n==13||n==27)return!0;if(n==37||mc&&n==66&&r=="c"){let i=n==37?rW(t,t.state.selection.from)=="ltr"?-1:1:-1;return nW(t,i,r)||vv(t,i)}else if(n==39||mc&&n==70&&r=="c"){let i=n==39?rW(t,t.state.selection.from)=="ltr"?1:-1:1;return nW(t,i,r)||vv(t,i)}else{if(n==38||mc&&n==80&&r=="c")return iW(t,-1,r)||vv(t,-1);if(n==40||mc&&n==78&&r=="c")return $9e(t)||iW(t,1,r)||vv(t,1);if(r==(mc?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function XL(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let o=t.someProp("clipboardSerializer")||Og.fromSchema(t.state.schema),l=roe(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let u=c.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=noe[u.nodeName.toLowerCase()]);){for(let m=d.length-1;m>=0;m--){let v=l.createElement(d[m]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),f++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:p,slice:e}}function Zae(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let c=!!e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",p=>{e=p(e,s||r,t)}),s)return l=new qt(pt.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{l=p(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)l=f;else{let p=i.marks(),{schema:m}=t.state,v=Og.fromSchema(m);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=o.appendChild(document.createElement("p"));y&&x.appendChild(v.serializeNode(m.text(y,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=W9e(n),W1&&K9e(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Wb.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!U9e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)l=G9e(oW(l,+d[1],+d[2]),d[4]);else if(l=qt.maxOpen(H9e(l.content,i),!0),l.openStart||l.openEnd){let f=0,p=0;for(let m=l.content.firstChild;f<l.openStart&&!m.type.spec.isolating;f++,m=m.firstChild);for(let m=l.content.lastChild;p<l.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);l=oW(l,f,p)}return t.someProp("transformPasted",f=>{l=f(l,t,c)}),l}const U9e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function H9e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&s.length&&eoe(c,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=toe(o[o.length-1],s.length));let d=Jae(l,c);o.push(d),i=i.matchType(d.type),s=c}}),o)return pt.from(o)}return t}function Jae(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,pt.from(t));return t}function eoe(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=eoe(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(pt.from(Jae(n,t,i+1))))}}function toe(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,toe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(pt.empty,!0);return t.copy(n.append(r))}function h4(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=h4(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(pt.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function oW(t,e,n){return e<t.openStart&&(t=new qt(h4(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new qt(h4(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const noe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let lW=null;function roe(){return lW||(lW=document.implementation.createHTMLDocument("title"))}let HO=null;function V9e(t){let e=window.trustedTypes;return e?(HO||(HO=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),HO.createHTML(t)):t}function W9e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=roe().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&noe[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=V9e(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function K9e(t){let e=t.querySelectorAll(ho?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function G9e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=pt.from(c.create(r[l+1],i)),s++,o++}return new qt(i,s,o)}const Lo={},Fo={},Y9e={touchstart:!0,touchmove:!0};class X9e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Q9e(t){for(let e in Lo){let n=Lo[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{J9e(t,r)&&!QL(t,r)&&(t.editable||!(r.type in Fo))&&n(t,r)},Y9e[e]?{passive:!0}:void 0)}Io&&t.dom.addEventListener("input",()=>null),p4(t)}function tp(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Z9e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function p4(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>QL(t,r))})}function QL(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function J9e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function eqe(t,e){!QL(t,e)&&Lo[e.type]&&(t.editable||!(e.type in Fo))&&Lo[e.type](t,e)}Fo.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!soe(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(_f&&ho&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Wy&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,wm(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||q9e(t,n)?n.preventDefault():tp(t,"key")};Fo.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Fo.keypress=(t,e)=>{let n=e;if(soe(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||mc&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof En)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function j_(t){return{left:t.clientX,top:t.clientY}}function tqe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ZL(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ry(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function nqe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Nn.isSelectable(r)?(ry(t,new Nn(n)),!0):!1}function rqe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Nn&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Nn.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ry(t,Nn.create(t.state.doc,i)),!0):!1}function iqe(t,e,n,r,i){return ZL(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?rqe(t,n):nqe(t,n))}function sqe(t,e,n,r){return ZL(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function aqe(t,e,n,r){return ZL(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||oqe(t,n,r)}function oqe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ry(t,En.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ry(t,En.create(r,l+1,l+1+o.content.size));else if(Nn.isSelectable(o))ry(t,Nn.create(r,l));else continue;return!0}}function JL(t){return XS(t)}const ioe=mc?"metaKey":"ctrlKey";Lo.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=JL(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&tqe(n,t.input.lastClick)&&!n[ioe]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(j_(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new lqe(t,o,n,!!r)):(s=="doubleClick"?sqe:aqe)(t,o.pos,o.inside,n)?n.preventDefault():tp(t,"pointer"))};class lqe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ioe],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const l=i?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Nn&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Sc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),tp(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Df(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(j_(e))),this.updateAllowDefault(e),this.allowDefault||!n?tp(this.view,"pointer"):iqe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Io&&this.mightDrag&&!this.mightDrag.node.isAtom||ho&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ry(this.view,Ln.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):tp(this.view,"pointer")}move(e){this.updateAllowDefault(e),tp(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Lo.touchstart=t=>{t.input.lastTouch=Date.now(),JL(t),tp(t,"pointer")};Lo.touchmove=t=>{t.input.lastTouch=Date.now(),tp(t,"pointer")};Lo.contextmenu=t=>JL(t);function soe(t,e){return t.composing?!0:Io&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const cqe=_f?5e3:-1;Fo.compositionstart=Fo.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof En&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),XS(t,!0),t.markCursor=null;else if(XS(t,!e.selection.empty),Sc&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}aoe(t,cqe)};Fo.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,aoe(t,20))};function aoe(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>XS(t),e))}function ooe(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=dqe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function uqe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=n9e(e.focusNode,e.focusOffset),r=r9e(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function dqe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function XS(t,e=!1){if(!(_f&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ooe(t),e||t.docView&&t.docView.dirty){let n=GL(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function fqe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const o1=ul&&up<15||Wy&&l9e<604;Lo.copy=Fo.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=o1?null:n.clipboardData,o=r.content(),{dom:l,text:c}=XL(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):fqe(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hqe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function pqe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?l1(t,r.value,null,i,e):l1(t,r.textContent,r.innerHTML,i,e)},50)}function l1(t,e,n,r,i){let s=Zae(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||qt.empty)))return!0;if(!s)return!1;let o=hqe(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function loe(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Fo.paste=(t,e)=>{let n=e;if(t.composing&&!_f)return;let r=o1?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&l1(t,loe(r),r.getData("text/html"),i,n)?n.preventDefault():pqe(t,n)};class coe{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const mqe=mc?"altKey":"ctrlKey";function uoe(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[mqe]}Lo.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(j_(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Nn?i.to-1:i.to))){if(r&&r.mightDrag)o=Nn.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Nn.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:u,slice:d}=XL(t,l);(!n.dataTransfer.files.length||!ho||Iae>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(o1?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",o1||n.dataTransfer.setData("text/plain",u),t.dragging=new coe(d,uoe(t,n),o)};Lo.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Fo.dragover=Fo.dragenter=(t,e)=>e.preventDefault();Fo.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(j_(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",v=>{o=v(o,t,!1)}):o=Zae(t,loe(n.dataTransfer),o1?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&uoe(t,n));if(t.someProp("handleDrop",v=>v(t,n,o||qt.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let c=o?mae(t.state.doc,s.pos,o):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(l){let{node:v}=r;v?v.replace(u):u.deleteSelection()}let d=u.mapping.map(c),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=u.doc;if(f?u.replaceRangeWith(d,d,o.content.firstChild):u.replaceRange(d,d,o),u.doc.eq(p))return;let m=u.doc.resolve(d);if(f&&Nn.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new Nn(m));else{let v=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((y,x,b,S)=>v=S),u.setSelection(YL(t,m,u.doc.resolve(v)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Lo.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Df(t)},20))};Lo.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Lo.beforeinput=(t,e)=>{if(ho&&_f&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,wm(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Fo)Lo[t]=Fo[t];function c1(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class QS{constructor(e,n){this.toDOM=e,this.spec=n||zm,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new oa(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof QS&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&c1(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class fp{constructor(e,n){this.attrs=e,this.spec=n||zm}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new oa(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof fp&&c1(this.attrs,e.attrs)&&c1(this.spec,e.spec)}static is(e){return e.type instanceof fp}destroy(){}}class e3{constructor(e,n){this.attrs=e,this.spec=n||zm}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new oa(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof e3&&c1(this.attrs,e.attrs)&&c1(this.spec,e.spec)}destroy(){}}class oa{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new oa(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new oa(e,e,new QS(n,r))}static inline(e,n,r,i){return new oa(e,n,new fp(r,i))}static node(e,n,r,i){return new oa(e,n,new e3(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof fp}get widget(){return this.type instanceof QS}}const Av=[],zm={};class fi{constructor(e,n){this.local=e.length?e:Av,this.children=n.length?n:Av}static create(e,n){return n.length?ZS(n,e,0,zm):co}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==co||e.maps.length==0?this:this.mapInner(e,n,0,0,r||zm)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,r,i);c&&c.type.valid(n,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?gqe(this.children,o||[],e,n,r,i,s):o?new fi(o.sort(qm),Av):co}add(e,n){return n.length?this==co?fi.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,c)=>{let u=c+r,d;if(d=foe(n,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,d,u+1):i.splice(s,0,c,c+l.nodeSize,ZS(d,l,u+1,zm)),s+=3}});let o=doe(s?hoe(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new fi(o.length?this.local.concat(o).sort(qm):this.local,i||this.children)}remove(e){return e.length==0||this==co?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,c=r[s+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<c&&(e[d]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=co?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new fi(i,r):co}forChild(e,n){if(this==co)return this;if(n.isLeaf)return fi.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof fp){let u=Math.max(s,c.from)-s,d=Math.min(o,c.to)-s;u<d&&(i||(i=[])).push(c.copy(u,d))}}if(i){let l=new fi(i.sort(qm),Av);return r?new Hh([l,r]):l}return r||co}eq(e){if(this==e)return!0;if(!(e instanceof fi)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return t3(this.localsInner(e))}localsInner(e){if(this==co)return Av;if(e.inlineContent||!this.local.some(fp.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof fp||n.push(this.local[r]);return n}forEachSet(e){e(this)}}fi.empty=new fi([],[]);fi.removeOverlap=t3;const co=fi.empty;class Hh{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,zm));return Hh.from(r)}forChild(e,n){if(n.isLeaf)return fi.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=co&&(s instanceof Hh?r=r.concat(s.members):r.push(s))}return Hh.from(r)}eq(e){if(!(e instanceof Hh)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?t3(r?n:n.sort(qm)):Av}static from(e){switch(e.length){case 0:return co;case 1:return e[0];default:return new Hh(e.every(n=>n instanceof fi)?e:e.reduce((n,r)=>n.concat(r instanceof fi?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function gqe(t,e,n,r,i,s,o){let l=t.slice();for(let u=0,d=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((p,m,v,y)=>{let x=y-v-(m-p);for(let b=0;b<l.length;b+=3){let S=l[b+1];if(S<0||p>S+d-f)continue;let j=l[b]+d-f;m>=j?l[b+1]=p<=j?-2:-1:p>=d&&x&&(l[b]+=x,l[b+1]+=x)}f+=x}),d=n.maps[u].map(d,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let d=n.map(t[u]+s),f=d-i;if(f<0||f>=r.content.size){c=!0;continue}let p=n.map(t[u+1]+s,-1),m=p-i,{index:v,offset:y}=r.content.findIndex(f),x=r.maybeChild(v);if(x&&y==f&&y+x.nodeSize==m){let b=l[u+2].mapInner(n,x,d+1,t[u]+s+1,o);b!=co?(l[u]=f,l[u+1]=m,l[u+2]=b):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=vqe(l,t,e,n,i,s,o),d=ZS(u,r,0,o);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let m=d.children[f];for(;p<l.length&&l[p]<m;)p+=3;l.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new fi(e.sort(qm),l)}function doe(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new oa(i.from+e,i.to+e,i.type))}return n}function vqe(t,e,n,r,i,s,o){function l(c,u){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(r,i,u);f?n.push(f):o.onRemove&&o.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return n}function foe(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function hoe(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function ZS(t,e,n,r){let i=[],s=!1;e.forEach((l,c)=>{let u=foe(t,l,c+n);if(u){s=!0;let d=ZS(u,l,n+c+1,r);d!=co&&i.push(c,c+l.nodeSize,d)}});let o=doe(s?hoe(t):t,-n).sort(qm);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new fi(o,i):co}function qm(t,e){return t.from-e.from||t.to-e.to}function t3(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),cW(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),cW(e,i,r.copy(s.from,r.to)));break}}}return e}function cW(t,e,n){for(;e<t.length&&qm(n,t[e])>0;)e++;t.splice(e,0,n)}function VO(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=co&&e.push(r)}),t.cursorWrapper&&e.push(fi.create(t.state.doc,[t.cursorWrapper.deco])),Hh.from(e)}const yqe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xqe=ul&&up<=11;class bqe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class wqe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bqe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ul&&up<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),xqe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yqe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tW(this.view)){if(this.suppressingSelectionUpdates)return Df(this.view);if(ul&&up<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&fg(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Vy(s))n.add(s);for(let s=e.anchorNode;s;s=Vy(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tW(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],c);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(Sc&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let m=p.parentNode;m&&m.nodeName=="LI"&&(!f||jqe(e,f)!=m)&&p.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&N_(r)&&(u=GL(e))&&u.eq(Ln.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Df(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Nqe(e)),this.handleDOMChange(s,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Df(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(ul&&up<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?Ba(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?Ba(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let uW=new WeakMap,dW=!1;function Nqe(t){if(!uW.has(t)&&(uW.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Sc,dW)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),dW=!0}}function fW(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return fg(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Sqe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return fW(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?fW(t,n):null}function jqe(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Eqe(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],N_(c)||u.push({node:c.focusNode,offset:c.focusOffset})),ho&&t.input.lastKeyCode===8)for(let x=s;x>i;x--){let b=r.childNodes[x-1],S=b.pmViewDesc;if(b.nodeName=="BR"&&!S){s=x;break}if(!S||S.size)break}let f=t.state.doc,p=t.someProp("domParser")||Wb.fromSchema(t.state.schema),m=f.resolve(o),v=null,y=p.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:_qe,context:m});if(u&&u[0].pos!=null){let x=u[0].pos,b=u[1]&&u[1].pos;b==null&&(b=x),v={anchor:x+o,head:b+o}}return{doc:y,sel:v,from:o,to:l}}function _qe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Io&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Io&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Cqe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Aqe(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,k=GL(t,O);if(k&&!t.state.selection.eq(k)){if(ho&&_f&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",I=>I(t,wm(13,"Enter"))))return;let C=t.state.tr.setSelection(k);O=="pointer"?C.setMeta("pointer",!0):O=="key"&&C.scrollIntoView(),s&&C.setMeta("composition",s),t.dispatch(C)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c=t.state.selection,u=Eqe(t,e,n),d=t.state.doc,f=d.slice(u.from,u.to),p,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,m="end"):(p=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let v=Oqe(f.content,u.doc.content,u.from,p,m);if(v&&t.input.domChangeCount++,(Wy&&t.input.lastIOSEnter>Date.now()-225||_f)&&i.some(O=>O.nodeType==1&&!Cqe.test(O.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",O=>O(t,wm(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof En&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let O=hW(t,t.state.doc,u.sel);if(O&&!O.eq(t.state.selection)){let k=t.state.tr.setSelection(O);s&&k.setMeta("composition",s),t.dispatch(k)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof En&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),ul&&up<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>u.from&&u.doc.textBetween(v.start-u.from-1,v.start-u.from+1)==" "&&(v.start--,v.endA--,v.endB--);let y=u.doc.resolveNoCache(v.start-u.from),x=u.doc.resolveNoCache(v.endB-u.from),b=d.resolve(v.start),S=y.sameParent(x)&&y.parent.inlineContent&&b.end()>=v.endA;if((Wy&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!S&&y.pos<u.doc.content.size&&(!y.sameParent(x)||!y.parent.inlineContent)&&y.pos<x.pos&&!/\S/.test(u.doc.textBetween(y.pos,x.pos,"","")))&&t.someProp("handleKeyDown",O=>O(t,wm(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&Tqe(d,v.start,v.endA,y,x)&&t.someProp("handleKeyDown",O=>O(t,wm(8,"Backspace")))){_f&&ho&&t.domObserver.suppressSelectionUpdates();return}ho&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),_f&&!S&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==v.endA&&(v.endB-=2,x=u.doc.resolveNoCache(v.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,wm(13,"Enter"))})},20));let j=v.start,E=v.endA,A=O=>{let k=O||t.state.tr.replace(j,E,u.doc.slice(v.start-u.from,v.endB-u.from));if(u.sel){let C=hW(t,k.doc,u.sel);C&&!(ho&&t.composing&&C.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(C.head==j||C.head==k.mapping.map(E)-1)||ul&&C.empty&&C.head==j)&&k.setSelection(C)}return s&&k.setMeta("composition",s),k.scrollIntoView()},P;if(S)if(y.pos==x.pos){ul&&up<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Df(t),20));let O=A(t.state.tr.delete(j,E)),k=d.resolve(v.start).marksAcross(d.resolve(v.endA));k&&O.ensureMarks(k),t.dispatch(O)}else if(v.endA==v.endB&&(P=kqe(y.parent.content.cut(y.parentOffset,x.parentOffset),b.parent.content.cut(b.parentOffset,v.endA-b.start())))){let O=A(t.state.tr);P.type=="add"?O.addMark(j,E,P.mark):O.removeMark(j,E,P.mark),t.dispatch(O)}else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let O=y.parent.textBetween(y.parentOffset,x.parentOffset),k=()=>A(t.state.tr.insertText(O,j,E));t.someProp("handleTextInput",C=>C(t,j,E,O,k))||t.dispatch(k())}else t.dispatch(A());else t.dispatch(A())}function hW(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:YL(t,e.resolve(n.anchor),e.resolve(n.head))}function kqe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=d=>d.mark(l.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(pt.from(u).eq(t))return{mark:l,type:o}}function Tqe(t,e,n,r,i){if(n-e<=i.pos-r.pos||WO(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(WO(s,!0,!0));return!o.parent.isTextblock||o.pos>n||WO(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function WO(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Oqe(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));r-=o+c-s}if(o<s&&t.size<e.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&pW(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<t.size&&pW(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function pW(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class poe{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X9e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(xW),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vW(this),gW(this),this.nodeViews=yW(this),this.docView=YV(this.state.doc,mW(this),VO(this),this.dom,this),this.domObserver=new wqe(this,(r,i,s,o)=>Aqe(this,r,i,s,o)),this.domObserver.start(),Q9e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&p4(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(xW),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(ooe(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=yW(this);Mqe(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&p4(this),this.editable=vW(this),gW(this);let c=VO(this),u=mW(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,u,c);(f||!e.selection.eq(i.selection))&&(o=!0);let p=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&d9e(this);if(o){this.domObserver.stop();let m=f&&(ul||ho)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Pqe(i.selection,e.selection);if(f){let v=ho?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=uqe(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=YV(e.doc,u,c,this.dom,this)),v&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&D9e(this))?Df(this,m):(Yae(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&f9e(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Nn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&UV(this,n.getBoundingClientRect(),e)}else UV(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new coe(e.slice,e.move,i<0?void 0:Nn.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(ul){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&h9e(this.dom),Df(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return y9e(this,e)}coordsAtPos(e,n=1){return zae(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return S9e(this,n||this.state,e)}pasteHTML(e,n){return l1(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return l1(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return XL(this,e)}destroy(){this.docView&&(Z9e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],VO(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,e9e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return eqe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Io&&this.root.nodeType===11&&s9e(this.dom.ownerDocument)==this.dom&&Sqe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}poe.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function mW(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[oa.node(0,t.state.doc.content.size,e)]}function gW(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:oa.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function vW(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Pqe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function yW(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Mqe(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function xW(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Np={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},JS={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Rqe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Dqe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $a=0;$a<10;$a++)Np[48+$a]=Np[96+$a]=String($a);for(var $a=1;$a<=24;$a++)Np[$a+111]="F"+$a;for(var $a=65;$a<=90;$a++)Np[$a]=String.fromCharCode($a+32),JS[$a]=String.fromCharCode($a);for(var KO in Np)JS.hasOwnProperty(KO)||(JS[KO]=Np[KO]);function Iqe(t){var e=Rqe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Dqe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?JS:Np)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Lqe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Fqe=typeof navigator<"u"&&/Win/.test(navigator.platform);function Bqe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Lqe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function $qe(t){let e=Object.create(null);for(let n in t)e[Bqe(n)]=t[n];return e}function GO(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zqe(t){return new Di({props:{handleKeyDown:n3(t)}})}function n3(t){let e=$qe(t);return function(n,r){let i=Iqe(r),s,o=e[GO(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[GO(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Fqe&&r.ctrlKey&&r.altKey)&&(s=Np[r.keyCode])&&s!=i){let l=e[GO(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var qqe=Object.defineProperty,r3=(t,e)=>{for(var n in e)qqe(t,n,{get:e[n],enumerable:!0})};function E_(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var __=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>{const d=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!t,c=t||i.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,p])=>[f,(...v)=>{const y=this.buildProps(c,e),x=p(...v)(y);return o.push(x),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:E_({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)(o)]))}};return o}},moe={};r3(moe,{blur:()=>Uqe,clearContent:()=>Hqe,clearNodes:()=>Vqe,command:()=>Wqe,createParagraphNear:()=>Kqe,cut:()=>Gqe,deleteCurrentNode:()=>Yqe,deleteNode:()=>Xqe,deleteRange:()=>Qqe,deleteSelection:()=>Zqe,enter:()=>Jqe,exitCode:()=>eUe,extendMarkRange:()=>tUe,first:()=>nUe,focus:()=>iUe,forEach:()=>sUe,insertContent:()=>aUe,insertContentAt:()=>cUe,joinBackward:()=>fUe,joinDown:()=>dUe,joinForward:()=>hUe,joinItemBackward:()=>pUe,joinItemForward:()=>mUe,joinTextblockBackward:()=>gUe,joinTextblockForward:()=>vUe,joinUp:()=>uUe,keyboardShortcut:()=>xUe,lift:()=>bUe,liftEmptyBlock:()=>wUe,liftListItem:()=>NUe,newlineInCode:()=>SUe,resetAttributes:()=>jUe,scrollIntoView:()=>EUe,selectAll:()=>_Ue,selectNodeBackward:()=>CUe,selectNodeForward:()=>AUe,selectParentNode:()=>kUe,selectTextblockEnd:()=>TUe,selectTextblockStart:()=>OUe,setContent:()=>PUe,setMark:()=>YUe,setMeta:()=>XUe,setNode:()=>QUe,setNodeSelection:()=>ZUe,setTextSelection:()=>JUe,sinkListItem:()=>eHe,splitBlock:()=>tHe,splitListItem:()=>nHe,toggleList:()=>rHe,toggleMark:()=>iHe,toggleNode:()=>sHe,toggleWrap:()=>aHe,undoInputRule:()=>oHe,unsetAllMarks:()=>lHe,unsetMark:()=>cHe,updateAttributes:()=>uHe,wrapIn:()=>dHe,wrapInList:()=>fHe});var Uqe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),Hqe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Vqe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:d}=e,f=u.resolve(d.map(c)),p=u.resolve(d.map(c+l.nodeSize)),m=f.blockRange(p);if(!m)return;const v=xx(m);if(l.type.isTextblock){const{defaultType:y}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(m.start,y)}(v||v===0)&&e.lift(m,v)})}),!0},Wqe=t=>e=>t(e),Kqe=()=>({state:t,dispatch:e})=>Oae(t,e),Gqe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new En(r.doc.resolve(Math.max(o-1,0)))),!0},Yqe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1};function Ks(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Xqe=t=>({tr:e,state:n,dispatch:r})=>{const i=Ks(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),u=s.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},Qqe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Zqe=()=>({state:t,dispatch:e})=>qL(t,e),Jqe=()=>({commands:t})=>t.keyboardShortcut("Enter"),eUe=()=>({state:t,dispatch:e})=>Bze(t,e);function i3(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ej(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:i3(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function goe(t,e,n={}){return t.find(r=>r.type===e&&ej(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function bW(t,e,n={}){return!!goe(t,e,n)}function s3(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!goe([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,c=o+1,u=l+i.node.nodeSize;for(;o>0&&bW([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&bW([...t.parent.child(c).marks],e,n);)u+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function Yf(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var tUe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Yf(t,r.schema),{doc:o,selection:l}=n,{$from:c,from:u,to:d}=l;if(i){const f=s3(c,s,e);if(f&&f.from<=u&&f.to>=d){const p=En.create(o,f.from,f.to);n.setSelection(p)}}return!0},nUe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function voe(t){return t instanceof En}function Mm(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function yoe(t,e=null){if(!e)return null;const n=Ln.atStart(t),r=Ln.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?En.create(t,Mm(0,i,s),Mm(t.content.size,i,s)):En.create(t,Mm(e,i,s),Mm(e,i,s))}function rUe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function a3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var iUe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(a3()||rUe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!voe(n.state.selection))return o(),!0;const l=yoe(i.doc,t)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},sUe=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),aUe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),xoe=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&xoe(r)}return t};function g2(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return xoe(n)}function u1(t,e,n){if(t instanceof cp||t instanceof pt)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return pt.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),u1("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const c=new iae({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Wb.fromSchema(c).parseSlice(g2(t),n.parseOptions):Wb.fromSchema(c).parse(g2(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Wb.fromSchema(e);return n.slice?s.parseSlice(g2(t),n.parseOptions).content:s.parse(g2(t),n.parseOptions)}return u1("",e,n)}function oUe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ea||i instanceof _a))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,c,u,d)=>{o===0&&(o=d)}),t.setSelection(Ln.near(t.doc.resolve(o),n))}var lUe=t=>!("type"in t),cUe=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=x=>{s.emit("contentError",{editor:s,error:x,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{u1(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(x){c(x)}try{l=u1(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(x){return c(x),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,m=!0;if((lUe(l)?l:[l]).forEach(x=>{x.check(),p=p?x.isText&&x.marks.length===0:!1,m=m?x.isBlock:!1}),d===f&&m){const{parent:x}=r.doc.resolve(d);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(d-=1,f+=1)}let y;if(p){if(Array.isArray(e))y=e.map(x=>x.text||"").join("");else if(e instanceof pt){let x="";e.forEach(b=>{b.text&&(x+=b.text)}),y=x}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,d,f)}else{y=l;const x=r.doc.resolve(d),b=x.node(),S=x.parentOffset===0,j=b.isText||b.isTextblock,E=b.content.size>0;S&&j&&E&&(d=Math.max(0,d-1)),r.replaceWith(d,f,y)}n.updateSelection&&oUe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:y})}return!0},uUe=()=>({state:t,dispatch:e})=>Ize(t,e),dUe=()=>({state:t,dispatch:e})=>Lze(t,e),fUe=()=>({state:t,dispatch:e})=>jae(t,e),hUe=()=>({state:t,dispatch:e})=>Aae(t,e),pUe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=x_(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},mUe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=x_(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},gUe=()=>({state:t,dispatch:e})=>Rze(t,e),vUe=()=>({state:t,dispatch:e})=>Dze(t,e);function boe(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yUe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))a3()||boe()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var xUe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=yUe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return c?.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Sp(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Ks(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const m=Math.max(r,p),v=Math.min(i,p+f.nodeSize);l.push({node:f,from:m,to:v})});const c=i-r,u=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>ej(f.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((f,p)=>f+p.to-p.from,0)>=c}var bUe=(t,e={})=>({state:n,dispatch:r})=>{const i=Ks(t,n.schema);return Sp(n,i,e)?Fze(n,r):!1},wUe=()=>({state:t,dispatch:e})=>Pae(t,e),NUe=t=>({state:e,dispatch:n})=>{const r=Ks(t,e.schema);return Xze(r)(e,n)},SUe=()=>({state:t,dispatch:e})=>Tae(t,e);function C_(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function wW(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var jUe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=C_(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=Ks(t,r.schema)),l==="mark"&&(o=Yf(t,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,wW(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&n.addMark(d,d+u.nodeSize,o.create(wW(f.attrs,e)))})})}),!0):!1},EUe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),_Ue=()=>({tr:t,dispatch:e})=>{if(e){const n=new Bl(t.doc);t.setSelection(n)}return!0},CUe=()=>({state:t,dispatch:e})=>_ae(t,e),AUe=()=>({state:t,dispatch:e})=>kae(t,e),kUe=()=>({state:t,dispatch:e})=>qze(t,e),TUe=()=>({state:t,dispatch:e})=>Vze(t,e),OUe=()=>({state:t,dispatch:e})=>Hze(t,e);function m4(t,e,n={},r={}){return u1(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var PUe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const u=m4(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function woe(t,e){const n=Yf(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function Noe(t,e){const n=new $L(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function MUe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function g4(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function RUe(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Soe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function A_(t){return e=>Soe(e.$from,t)}function yn(t,e,n){return t.config[e]===void 0&&t.parent?yn(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?yn(t.parent,e,n):null}):t.config[e]}function o3(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=yn(e,"addExtensions",n);return r?[e,...o3(r())]:e}).flat(10)}function l3(t,e){const n=Og.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function joe(t){return typeof t=="function"}function Yr(t,e=void 0,...n){return joe(t)?e?t.bind(e)(...n):t(...n):t}function DUe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function d1(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Eoe(t){const e=[],{nodeExtensions:n,markExtensions:r}=d1(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},c=yn(o,"addGlobalAttributes",l);if(!c)return;c().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,m])=>{e.push({type:f,name:p,attribute:{...s,...m}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=yn(o,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([d,f])=>{const p={...s,...f};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,e.push({type:o.name,name:d,attribute:p})})}),e}function mi(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],u=l.filter(d=>!c.includes(d));r[i]=[...c,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());u.set(f,p)}),l.forEach(d=>{const[f,p]=d.split(":").map(m=>m.trim());u.set(f,p)}),r[i]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=s}),r},{})}function tj(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>mi(n,r),{})}function IUe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function NW(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):IUe(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function SW(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&DUe(n)?!1:n!=null))}function LUe(t,e){var n;const r=Eoe(t),{nodeExtensions:i,markExtensions:s}=d1(t),o=(n=i.find(u=>yn(u,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(u=>{const d=r.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((b,S)=>{const j=yn(S,"extendNodeSchema",f);return{...b,...j?j(u):{}}},{}),m=SW({...p,content:Yr(yn(u,"content",f)),marks:Yr(yn(u,"marks",f)),group:Yr(yn(u,"group",f)),inline:Yr(yn(u,"inline",f)),atom:Yr(yn(u,"atom",f)),selectable:Yr(yn(u,"selectable",f)),draggable:Yr(yn(u,"draggable",f)),code:Yr(yn(u,"code",f)),whitespace:Yr(yn(u,"whitespace",f)),linebreakReplacement:Yr(yn(u,"linebreakReplacement",f)),defining:Yr(yn(u,"defining",f)),isolating:Yr(yn(u,"isolating",f)),attrs:Object.fromEntries(d.map(b=>{var S,j;return[b.name,{default:(S=b?.attribute)==null?void 0:S.default,validate:(j=b?.attribute)==null?void 0:j.validate}]}))}),v=Yr(yn(u,"parseHTML",f));v&&(m.parseDOM=v.map(b=>NW(b,d)));const y=yn(u,"renderHTML",f);y&&(m.toDOM=b=>y({node:b,HTMLAttributes:tj(b,d)}));const x=yn(u,"renderText",f);return x&&(m.toText=x),[u.name,m]})),c=Object.fromEntries(s.map(u=>{const d=r.filter(x=>x.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((x,b)=>{const S=yn(b,"extendMarkSchema",f);return{...x,...S?S(u):{}}},{}),m=SW({...p,inclusive:Yr(yn(u,"inclusive",f)),excludes:Yr(yn(u,"excludes",f)),group:Yr(yn(u,"group",f)),spanning:Yr(yn(u,"spanning",f)),code:Yr(yn(u,"code",f)),attrs:Object.fromEntries(d.map(x=>{var b,S;return[x.name,{default:(b=x?.attribute)==null?void 0:b.default,validate:(S=x?.attribute)==null?void 0:S.validate}]}))}),v=Yr(yn(u,"parseHTML",f));v&&(m.parseDOM=v.map(x=>NW(x,d)));const y=yn(u,"renderHTML",f);return y&&(m.toDOM=x=>y({mark:x,HTMLAttributes:tj(x,d)})),[u.name,m]}));return new iae({topNode:o,nodes:l,marks:c})}function FUe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function c3(t){return t.sort((n,r)=>{const i=yn(n,"priority")||100,s=yn(r,"priority")||100;return i>s?-1:i<s?1:0})}function _oe(t){const e=c3(o3(t)),n=FUe(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Coe(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(c,u,d,f)=>{var p;c.isBlock&&u>r&&(l+=s);const m=o?.[c.type.name];if(m)return d&&(l+=m({node:c,pos:u,parent:d,index:f,range:e})),!1;c.isText&&(l+=(p=c?.text)==null?void 0:p.slice(Math.max(r,u)-u,i-u))}),l}function BUe(t,e){const n={from:0,to:t.content.size};return Coe(t,n,e)}function Aoe(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function $Ue(t,e){const n=Ks(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function koe(t,e){const n=C_(typeof e=="string"?e:e.name,t.schema);return n==="node"?$Ue(t,e):n==="mark"?woe(t,e):{}}function zUe(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function qUe(t){const e=zUe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Toe(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),d=e.slice(s).map(c),f=e.invert().map(u,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:u,to:d}})})}),qUe(r)}function u3(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=s3(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var UUe=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===e?o=l:s-=1}return[o,s]};function YO(t,e){return e.nodes[t]||e.marks[t]||null}function tN(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var HUe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var c,u;const d=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function v4(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Yf(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>ej(f.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:p})=>{const m=f.pos,v=p.pos;t.doc.nodesBetween(m,v,(y,x)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(m,x),S=Math.min(v,x+y.nodeSize),j=S-b;o+=j,l.push(...y.marks.map(E=>({mark:E,from:b,to:S})))})}),o===0)return!1;const c=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>ej(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),u=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,p)=>f+p.to-p.from,0);return(c>0?c+u:c)>=o}function VUe(t,e,n={}){if(!e)return Sp(t,null,n)||v4(t,null,n);const r=C_(e,t.schema);return r==="node"?Sp(t,e,n):r==="mark"?v4(t,e,n):!1}var WUe=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=A_(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},KUe=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function jW(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function EW(t,e){const{nodeExtensions:n}=d1(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Yr(yn(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function k_(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(k_(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Ooe(t){return t instanceof Nn}function GUe(t,e,n){var r;const{selection:i}=e;let s=null;if(voe(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(u=>u.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,c.pos,(d,f,p)=>{if(u)return!1;if(d.isInline){const m=!p||p.type.allowsMarkType(n),v=!!n.isInSet(d.marks)||!d.marks.some(y=>y.type.excludes(n));u=m&&v}return!u}),u})}var YUe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,c=Yf(t,r.schema);if(i)if(o){const u=woe(r,c);n.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(p,m)=>{const v=Math.max(m,d),y=Math.min(m+p.nodeSize,f);p.marks.find(b=>b.type===c)?p.marks.forEach(b=>{c===b.type&&n.addMark(v,y,c.create({...b.attrs,...e}))}):n.addMark(v,y,c.create(e))})});return GUe(r,n,c)},XUe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),QUe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Ks(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>$V(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>$V(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ZUe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Mm(t,0,r.content.size),s=Nn.create(r,i);e.setSelection(s)}return!0},JUe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=En.atStart(r).from,l=En.atEnd(r).to,c=Mm(i,o,l),u=Mm(s,o,l),d=En.create(r,c,u);e.setSelection(d)}return!0},eHe=t=>({state:e,dispatch:n})=>{const r=Ks(t,e.schema);return Jze(r)(e,n)};function _W(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var tHe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:c}=s,u=i.extensionManager.attributes,d=tN(u,l.node().type.name,l.node().attrs);if(s instanceof Nn&&s.node.isBlock)return!l.parentOffset||!Rf(o,l.pos)?!1:(r&&(t&&_W(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,p=l.depth===0?void 0:MUe(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=f&&p?[{type:p,attrs:d}]:void 0,v=Rf(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!v&&Rf(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(v=!0,m=p?[{type:p,attrs:d}]:void 0),r){if(v&&(s instanceof En&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),p&&!f&&!l.parentOffset&&l.parent.type!==p)){const y=e.mapping.map(l.before()),x=e.doc.resolve(y);l.node(-1).canReplaceWith(x.index(),x.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&_W(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},nHe=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Ks(t,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const f=c.node(-1);if(f.type!==l)return!1;const p=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let b=pt.empty;const S=c.index(-1)?1:c.index(-2)?2:3;for(let k=c.depth-S;k>=c.depth-3;k-=1)b=pt.from(c.node(k).copy(b));const j=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,E={...tN(p,c.node().type.name,c.node().attrs),...e},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(E))||void 0;b=b.append(pt.from(l.createAndFill(null,A)||void 0));const P=c.before(c.depth-(S-1));n.replace(P,c.after(-j),new qt(b,4-S,0));let O=-1;n.doc.nodesBetween(P,n.doc.content.size,(k,C)=>{if(O>-1)return!1;k.isTextblock&&k.content.size===0&&(O=C+1)}),O>-1&&n.setSelection(En.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const m=u.pos===c.end()?f.contentMatchAt(0).defaultType:null,v={...tN(p,f.type.name,f.attrs),...e},y={...tN(p,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,u.pos);const x=m?[{type:l,attrs:v},{type:m,attrs:y}]:[{type:l,attrs:v}];if(!Rf(n.doc,c.pos,2))return!1;if(i){const{selection:b,storedMarks:S}=r,{splittableMarks:j}=s.extensionManager,E=S||b.$to.parentOffset&&b.$from.marks();if(n.split(c.pos,2,x).scrollIntoView(),!E||!i)return!0;const A=E.filter(P=>j.includes(P.type.name));n.ensureMarks(A)}return!0},XO=(t,e)=>{const n=A_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Ip(t.doc,n.pos)&&t.join(n.pos),!0},QO=(t,e)=>{const n=A_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Ip(t.doc,r)&&t.join(r),!0},rHe=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:u,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,m=Ks(t,o.schema),v=Ks(e,o.schema),{selection:y,storedMarks:x}=o,{$from:b,$to:S}=y,j=b.blockRange(S),E=x||y.$to.parentOffset&&y.$from.marks();if(!j)return!1;const A=A_(P=>EW(P.type.name,f))(y);if(j.depth>=1&&A&&j.depth-A.depth<=1){if(A.node.type===m)return u.liftListItem(v);if(EW(A.node.type.name,f)&&m.validContent(A.node.content)&&l)return c().command(()=>(s.setNodeMarkup(A.pos,m),!0)).command(()=>XO(s,m)).command(()=>QO(s,m)).run()}return!n||!E||!l?c().command(()=>d().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>XO(s,m)).command(()=>QO(s,m)).run():c().command(()=>{const P=d().wrapInList(m,r),O=E.filter(k=>p.includes(k.type.name));return s.ensureMarks(O),P?!0:u.clearNodes()}).wrapInList(m,r).command(()=>XO(s,m)).command(()=>QO(s,m)).run()},iHe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Yf(t,r.schema);return v4(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},sHe=(t,e,n={})=>({state:r,commands:i})=>{const s=Ks(t,r.schema),o=Ks(e,r.schema),l=Sp(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...n})},aHe=(t,e={})=>({state:n,commands:r})=>{const i=Ks(t,n.schema);return Sp(n,i,e)?r.lift(i):r.wrapIn(i,e)},oHe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},lHe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},cHe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,c=Yf(t,r.schema),{$from:u,empty:d,ranges:f}=l;if(!i)return!0;if(d&&o){let{from:p,to:m}=l;const v=(s=u.marks().find(x=>x.type===c))==null?void 0:s.attrs,y=s3(u,c,v);y&&(p=y.from,m=y.to),n.removeMark(p,m,c)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0},uHe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=C_(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=Ks(t,r.schema)),l==="mark"&&(o=Yf(t,r.schema)),i&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,p,m,v;n.selection.empty?r.doc.nodesBetween(u,d,(y,x)=>{s&&s===y.type&&(m=Math.max(x,u),v=Math.min(x+y.nodeSize,d),f=x,p=y)}):r.doc.nodesBetween(u,d,(y,x)=>{x<u&&s&&s===y.type&&(m=Math.max(x,u),v=Math.min(x+y.nodeSize,d),f=x,p=y),x>=u&&x<=d&&(s&&s===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(b=>{if(o===b.type){const S=Math.max(x,u),j=Math.min(x+y.nodeSize,d);n.addMark(S,j,o.create({...b.attrs,...e}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&n.addMark(m,v,o.create({...y.attrs,...e}))}))}),!0):!1},dHe=(t,e={})=>({state:n,dispatch:r})=>{const i=Ks(t,n.schema);return Wze(i,e)(n,r)},fHe=(t,e={})=>({state:n,dispatch:r})=>{const i=Ks(t,n.schema);return Kze(i,e)(n,r)},hHe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},T_=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},pHe=(t,e)=>{if(i3(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function v2(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=HUe(u)+s;return o.forEach(p=>{if(d)return;const m=pHe(f,p.find);if(!m)return;const v=c.state.tr,y=E_({state:c.state,transaction:v}),x={from:r-(m[0].length-s.length),to:i},{commands:b,chain:S,can:j}=new __({editor:n,state:y});p.handler({state:y,range:x,match:m,commands:b,chain:S,can:j})===null||!v.steps.length||(p.undoable&&v.setMeta(l,{transform:v,from:r,to:i,text:s}),c.dispatch(v),d=!0)}),d}function mHe(t){const{editor:e,rules:n}=t,r=new Di({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=l3(pt.from(d),o.schema);const{from:f}=c,p=f+d.length;v2({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return v2({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&v2({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?v2({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function gHe(t){return Object.prototype.toString.call(t).slice(8,-1)}function y2(t){return gHe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Poe(t,e){const n={...t};return y2(t)&&y2(e)&&Object.keys(e).forEach(r=>{y2(e[r])&&y2(t[r])?n[r]=Poe(t[r],e[r]):n[r]=e[r]}),n}var d3=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Yr(yn(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Yr(yn(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Poe(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Xf=class Moe extends d3{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new Moe(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>u?.type.name===n.name))return!1;const c=o.find(u=>u?.type.name===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function vHe(t){return typeof t=="number"}var yHe=class{constructor(t){this.find=t.find,this.handler=t.handler}},xHe=(t,e,n)=>{if(i3(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function bHe(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:u,can:d}=new __({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(m,v)=>{var y,x,b,S,j;if((x=(y=m.type)==null?void 0:y.spec)!=null&&x.code||!(m.isText||m.isTextblock||m.isInline))return;const E=(j=(S=(b=m.content)==null?void 0:b.size)!=null?S:m.nodeSize)!=null?j:0,A=Math.max(r,v),P=Math.min(i,v+E);if(A>=P)return;const O=m.isText?m.text||"":m.textBetween(A-v,P-v,void 0,"");xHe(O,s.find,o).forEach(C=>{if(C.index===void 0)return;const I=A+C.index+1,R=I+C[0].length,D={from:n.tr.mapping.map(I),to:n.tr.mapping.map(R)},L=s.handler({state:n,range:D,match:C,commands:c,chain:u,can:d,pasteEvent:o,dropEvent:l});f.push(L)})}),f.every(m=>m!==null)}var x2=null,wHe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function NHe(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:d,from:f,to:p,rule:m,pasteEvt:v})=>{const y=d.tr,x=E_({state:d,transaction:y});if(!(!bHe({editor:e,state:x,from:Math.max(f-1,0),to:p.b-1,rule:m,pasteEvent:v,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(d=>new Di({view(f){const p=v=>{var y;r=(y=f.dom.parentElement)!=null&&y.contains(v.target)?f.dom.parentElement:null,r&&(x2=e)},m=()=>{x2&&(x2=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(s=r===f.dom.parentElement,l=p,!s){const m=x2;m?.isEditable&&setTimeout(()=>{const v=m.state.selection;v&&m.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(f,p)=>{var m;const v=(m=p.clipboardData)==null?void 0:m.getData("text/html");return o=p,i=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(f,p,m)=>{const v=f[0],y=v.getMeta("uiEvent")==="paste"&&!i,x=v.getMeta("uiEvent")==="drop"&&!s,b=v.getMeta("applyPasteRules"),S=!!b;if(!y&&!x&&!S)return;if(S){let{text:A}=b;typeof A=="string"?A=A:A=l3(pt.from(A),m.schema);const{from:P}=b,O=P+A.length,k=wHe(A);return c({rule:d,state:m,from:P,to:{b:O},pasteEvt:k})}const j=p.doc.content.findDiffStart(m.doc.content),E=p.doc.content.findDiffEnd(m.doc.content);if(!(!vHe(j)||!E||j===E.b))return c({rule:d,state:m,from:j,to:E,pasteEvt:o})}}))}var O_=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=_oe(t),this.schema=LUe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:YO(e.name,this.schema)},r=yn(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return c3([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:YO(r.name,this.schema)},s=[],o=yn(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&yn(r,"exitable",i)&&(l.ArrowRight=()=>Xf.handleExit({editor:t,mark:r})),o){const p=Object.fromEntries(Object.entries(o()).map(([m,v])=>[m,()=>v({editor:t})]));l={...l,...p}}const c=zqe(l);s.push(c);const u=yn(r,"addInputRules",i);if(jW(r,t.options.enableInputRules)&&u){const p=u();if(p&&p.length){const m=mHe({editor:t,rules:p}),v=Array.isArray(m)?m:[m];s.push(...v)}}const d=yn(r,"addPasteRules",i);if(jW(r,t.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const m=NHe({editor:t,rules:p});s.push(...m)}}const f=yn(r,"addProseMirrorPlugins",i);if(f){const p=f();s.push(...p)}return s})}get attributes(){return Eoe(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=d1(this.extensions);return Object.fromEntries(e.filter(n=>!!yn(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ks(n.name,this.schema)},s=yn(n,"addNodeView",i);if(!s)return[];const o=(l,c,u,d,f)=>{const p=tj(l,r);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=d1(this.extensions);return Object.fromEntries(e.filter(n=>!!yn(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Yf(n.name,this.schema)},s=yn(n,"addMarkView",i);if(!s)return[];const o=(l,c,u)=>{const d=tj(l,r);return s()({mark:l,view:c,inline:u,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{DHe(l,t,f)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:YO(e.name,this.schema)};e.type==="mark"&&((n=Yr(yn(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=yn(e,"onBeforeCreate",r),s=yn(e,"onCreate",r),o=yn(e,"onUpdate",r),l=yn(e,"onSelectionUpdate",r),c=yn(e,"onTransaction",r),u=yn(e,"onFocus",r),d=yn(e,"onBlur",r),f=yn(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};O_.resolve=_oe;O_.sort=c3;O_.flatten=o3;var SHe={};r3(SHe,{ClipboardTextSerializer:()=>Doe,Commands:()=>Ioe,Delete:()=>Loe,Drop:()=>Foe,Editable:()=>Boe,FocusEvents:()=>zoe,Keymap:()=>qoe,Paste:()=>Uoe,Tabindex:()=>Hoe,focusEventsPluginKey:()=>$oe});var li=class Roe extends d3{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Roe(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Doe=li.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Di({key:new Ns("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),l=Math.max(...s.map(d=>d.$to.pos)),c=Aoe(n);return Coe(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),Ioe=li.create({name:"commands",addCommands(){return{...moe}}}),Loe=li.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,l,c,u;if((u=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const d=Noe(t.before,[t,...e]);Toe(d).forEach(m=>{d.mapping.mapResult(m.oldRange.from).deletedAfter&&d.mapping.mapResult(m.oldRange.to).deletedBefore&&d.before.nodesBetween(m.oldRange.from,m.oldRange.to,(v,y)=>{const x=y+v.nodeSize-2,b=m.oldRange.from<=y&&x<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:y,to:x,newFrom:d.mapping.map(y),newTo:d.mapping.map(x),deletedRange:m.oldRange,newRange:m.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((m,v)=>{var y,x;if(m instanceof mu){const b=p.slice(v).map(m.from,-1),S=p.slice(v).map(m.to),j=p.invert().map(b,-1),E=p.invert().map(S),A=(y=d.doc.nodeAt(b-1))==null?void 0:y.marks.some(O=>O.eq(m.mark)),P=(x=d.doc.nodeAt(S))==null?void 0:x.marks.some(O=>O.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:j,to:E},newRange:{from:b,to:S},partial:!!(P||A),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),Foe=li.create({name:"drop",addProseMirrorPlugins(){return[new Di({key:new Ns("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Boe=li.create({name:"editable",addProseMirrorPlugins(){return[new Di({key:new Ns("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$oe=new Ns("focusEvents"),zoe=li.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Di({key:$oe,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),qoe=li.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:d,$anchor:f}=c,{pos:p,parent:m}=f,v=f.parent.isTextblock&&p>0?l.doc.resolve(p-1):f,y=v.parent.type.spec.isolating,x=f.pos-f.parentOffset,b=y&&v.parent.childCount===1?x===f.pos:Ln.atStart(u).from===p;return!d||!m.type.isTextblock||m.textContent.length||!b||b&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return a3()||boe()?s:i},addProseMirrorPlugins(){return[new Di({key:new Ns("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,c=Ln.atStart(e.doc).from,u=Ln.atEnd(e.doc).to;if(s||!(o===c&&l===u)||!k_(n.doc))return;const p=n.tr,m=E_({state:n,transaction:p}),{commands:v}=new __({editor:this.editor,state:m});if(v.clearNodes(),!!p.steps.length)return p}})]}}),Uoe=li.create({name:"paste",addProseMirrorPlugins(){return[new Di({key:new Ns("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Hoe=li.create({name:"tabindex",addProseMirrorPlugins(){return[new Di({key:new Ns("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),jHe=class kv{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new kv(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new kv(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new kv(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const c=new kv(l,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new kv(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(c=>n[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},EHe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function _He(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var CHe=class extends hHe{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=yoe(e,this.options.autofocus);this.editorState=$v.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=_He(EHe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=joe(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[Boe,Doe.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Ioe,zoe,qoe,Hoe,Foe,Uoe,Loe].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new O_(r,this)}createCommandManager(){this.commandManager=new __({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=m4(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=m4(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new poe(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o?.getMeta("focus"),c=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return koe(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return VUe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return l3(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return BUe(this.state.doc,{blockSeparator:e,textSerializers:{...Aoe(this.schema),...n}})}get isEmpty(){return k_(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new jHe(e,this)}get $doc(){return this.$pos(0)}};function pg(t){return new T_({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Yr(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),u=n.from+l.indexOf(o),d=u+o.length;if(u3(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u);const p=n.from+c+o.length;s.addMark(n.from+c,p,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function Voe(t){return new T_({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Yr(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const c=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=o+u;d>l?d=l:l=d+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(d,l,c)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:t.undoable})}function y4(t){return new T_({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Yr(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function Ky(t){return new T_({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Yr(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),u=c&&BL(c,t.type,s);if(!u)return null;if(o.wrap(c,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:m}=t.editor.extensionManager,v=p||f.$to.parentOffset&&f.$from.marks();if(v){const y=v.filter(x=>m.includes(x.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Ip(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)},undoable:t.undoable})}function AHe(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Nn){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var kHe={};r3(kHe,{createAtomBlockMarkdownSpec:()=>THe,createBlockMarkdownSpec:()=>OHe,createInlineMarkdownSpec:()=>RHe,parseAttributes:()=>f3,parseIndentedBlocks:()=>x4,renderNestedMarkdownContent:()=>p3,serializeAttributes:()=>h3});function f3(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,u,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),m=n[p];m&&(e[u]=m.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function h3(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function THe(t){const{nodeName:e,name:n,parseAttributes:r=f3,serializeAttributes:i=h3,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...s,...d.attributes};return f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${c}(?:\\s|$)`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){const m=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=d.match(m);if(!v)return;const y=v[1]||"",x=r(y);if(!o.find(S=>!(S in x)))return{type:e,raw:v[0],attributes:x}}},renderMarkdown:d=>{const f=u(d.attrs||{}),p=i(f),m=p?` {${p}}`:"";return`:::${c}${m} :::`}}}function OHe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=f3,serializeAttributes:s=h3,defaultAttributes:o={},content:l="block",allowedAttributes:c}=t,u=n||e,d=f=>{if(!c)return f;const p={};return c.forEach(m=>{m in f&&(p[m]=f[m])}),p};return{parseMarkdown:(f,p)=>{let m;if(r){const y=r(f);m=typeof y=="string"?[{type:"text",text:y}]:y}else l==="block"?m=p.parseChildren(f.tokens||[]):m=p.parseInline(f.tokens||[]);const v={...o,...f.attributes};return p.createNode(e,v,m)},markdownTokenizer:{name:e,level:"block",start(f){var p;const m=new RegExp(`^:::${u}`,"m"),v=(p=f.match(m))==null?void 0:p.index;return v!==void 0?v:-1},tokenize(f,p,m){var v;const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=f.match(y);if(!x)return;const[b,S=""]=x,j=i(S);let E=1;const A=b.length;let P="";const O=/^:::([\w-]*)(\s.*)?/gm,k=f.slice(A);for(O.lastIndex=0;;){const C=O.exec(k);if(C===null)break;const I=C.index,R=C[1];if(!((v=C[2])!=null&&v.endsWith(":::"))){if(R)E+=1;else if(E-=1,E===0){const D=k.slice(0,I);P=D.trim();const L=f.slice(0,A+I+C[0].length);let z=[];if(P)if(l==="block")for(z=m.blockTokens(D),z.forEach(W=>{W.text&&(!W.tokens||W.tokens.length===0)&&(W.tokens=m.inlineTokens(W.text))});z.length>0;){const W=z[z.length-1];if(W.type==="paragraph"&&(!W.text||W.text.trim()===""))z.pop();else break}else z=m.inlineTokens(P);return{type:e,raw:L,attributes:j,content:P,tokens:z}}}}}},renderMarkdown:(f,p)=>{const m=d(f.attrs||{}),v=s(m),y=v?` {${v}}`:"",x=p.renderChildren(f.content||[],`

`);return`:::${u}${y}

${x}

:::`}}}function PHe(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function MHe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function RHe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=PHe,serializeAttributes:s=MHe,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=t,u=n||e,d=p=>{if(!c)return p;const m={};return c.forEach(v=>{v in p&&(m[v]=p[v])}),m},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,m)=>{const v={...o,...p.attributes};if(l)return m.createNode(e,v);const y=r?r(p):p.content||"";return y?m.createNode(e,v,[m.createTextNode(y)]):m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(p){const m=l?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),v=p.match(m),y=v?.index;return y!==void 0?y:-1},tokenize(p,m,v){const y=l?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),x=p.match(y);if(!x)return;let b="",S="";if(l){const[,E]=x;S=E}else{const[,E,A]=x;S=E,b=A||""}const j=i(S.trim());return{type:e,raw:x[0],content:b.trim(),attributes:j}}},renderMarkdown:p=>{let m="";r?m=r(p):p.content&&p.content.length>0&&(m=p.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const v=d(p.attrs||{}),y=s(v),x=y?` ${y}`:"";return l?`[${u}${x}]`:`[${u}${x}]${m}[/${u}]`}}}function x4(t,e,n){var r,i,s,o;const l=t.split(`
`),c=[];let u="",d=0;const f=e.baseIndentSize||2;for(;d<l.length;){const p=l[d],m=p.match(e.itemPattern);if(!m){if(c.length>0)break;if(p.trim()===""){d+=1;continue}else return}const v=e.extractItemData(m),{indentLevel:y,mainContent:x}=v;u=`${u}${p}
`;const b=[x];for(d+=1;d<l.length;){const A=l[d];if(A.trim()===""){const O=l.slice(d+1).findIndex(I=>I.trim()!=="");if(O===-1)break;if((((i=(r=l[d+1+O].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>y){b.push(A),u=`${u}${A}
`,d+=1;continue}else break}if((((o=(s=A.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>y)b.push(A),u=`${u}${A}
`,d+=1;else break}let S;const j=b.slice(1);if(j.length>0){const A=j.map(P=>P.slice(y+f)).join(`
`);A.trim()&&(e.customNestedParser?S=e.customNestedParser(A):S=n.blockTokens(A))}const E=e.createToken(v,S);c.push(E)}if(c.length!==0)return{items:c,raw:u.trim()}}function p3(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,l=e.renderChildren([s]),c=[`${i}${l}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const f=d.split(`
`).map(p=>p?e.indent(p):"").join(`
`);c.push(f)}}),c.join(`
`)}function DHe(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((l,c)=>{const u=s.mapping.map(c),d=s.mapping.map(c)+l.nodeSize;let f=null;if(l.marks.forEach(m=>{if(m!==o)return!1;f=m}),!f)return;let p=!1;if(Object.keys(n).forEach(m=>{n[m]!==f.attrs[m]&&(p=!0)}),p){const m=t.type.create({...t.attrs,...n});s.removeMark(u,d,t.type),s.addMark(u,d,m)}}),s.docChanged&&e.view.dispatch(s)}var ka=class Woe extends d3{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new Woe(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function jp(t){return new yHe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Yr(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];let u=n.to;if(l){const d=c.search(/\S/),f=n.from+c.indexOf(l),p=f+l.length;if(u3(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(x=>x===t.type&&x!==v.mark.type)).filter(v=>v.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+d,f),u=n.from+d+l.length,o.addMark(n.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var ZO,CW;function IHe(){return CW||(CW=1,ZO=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),ZO}var LHe=IHe();const FHe=qr(LHe);var JO={exports:{}},eP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AW;function BHe(){if(AW)return eP;AW=1;var t=m1(),e=NK();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return eP.useSyncExternalStoreWithSelector=function(u,d,f,p,m){var v=s(null);if(v.current===null){var y={hasValue:!1,value:null};v.current=y}else y=v.current;v=l(function(){function b(P){if(!S){if(S=!0,j=P,P=p(P),m!==void 0&&y.hasValue){var O=y.value;if(m(O,P))return E=O}return E=P}if(O=E,r(j,P))return O;var k=p(P);return m!==void 0&&m(O,k)?(j=P,O):(j=P,E=k)}var S=!1,j,E,A=f===void 0?null:f;return[function(){return b(d())},A===null?void 0:function(){return b(A())}]},[d,f,p,m]);var x=i(u,v[0],v[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),c(x),x},eP}var kW;function $He(){return kW||(kW=1,JO.exports=BHe()),JO.exports}var zHe=$He(),qHe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},UHe=({contentComponent:t})=>{const e=Rj.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return a.jsx(a.Fragment,{children:Object.values(e)})};function HHe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:HK.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var VHe=class extends ve.Component{constructor(t){var e;super(t),this.editorContentRef=ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=HHe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:qHe(e,this.editorContentRef),...n}),t?.contentComponent&&a.jsx(UHe,{contentComponent:t.contentComponent})]})}},WHe=N.forwardRef((t,e)=>{const n=ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ve.createElement(VHe,{key:n,innerRef:e,...t})}),Koe=ve.memo(WHe),KHe=typeof window<"u"?N.useLayoutEffect:N.useEffect,GHe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function YHe(t){var e;const[n]=N.useState(()=>new GHe(t.editor)),r=zHe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:FHe);return KHe(()=>n.watch(t.editor),[t.editor,n]),N.useDebugValue(r),r}var XHe=!1,b4=typeof window>"u",QHe=b4||!!(typeof window<"u"&&window.next),ZHe=class Goe{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?b4||QHe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new CHe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Goe.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Yoe(t={},e=[]){const n=N.useRef(t);n.current=t;const[r]=N.useState(()=>new ZHe(n)),i=Rj.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(i),N.useEffect(r.onRender(e)),YHe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var JHe=N.createContext({editor:null});JHe.Consumer;var eVe=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),tVe=()=>N.useContext(eVe);ve.forwardRef((t,e)=>{const{onDragStart:n}=tVe(),r=t.as||"div";return a.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ve.createContext({markViewContentRef:()=>{}});var nj=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},nVe=/^\s*>\s$/,rVe=ka.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return nj("blockquote",{...mi(this.options.HTMLAttributes,t),children:nj("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=[];return t.content.forEach(i=>{const o=e.renderChildren(i).split(`
`).map(l=>`> ${l}`).join(`
`);n.push(o)}),n.flatMap(i=>[i,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ky({find:nVe,type:this.type})]}}),iVe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,sVe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,aVe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,oVe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,lVe=Xf.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return nj("strong",{...mi(this.options.HTMLAttributes,t),children:nj("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[pg({find:iVe,type:this.type}),pg({find:aVe,type:this.type})]},addPasteRules(){return[jp({find:sVe,type:this.type}),jp({find:oVe,type:this.type})]}}),cVe=/(^|[^`])`([^`]+)`(?!`)$/,uVe=/(^|[^`])`([^`]+)`(?!`)/g,dVe=Xf.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[pg({find:cVe,type:this.type})]},addPasteRules(){return[jp({find:uVe,type:this.type})]}}),tP=4,fVe=/^```([a-z]+)?[\s\n]$/,hVe=/^~~~([a-z]+)?[\s\n]$/,Xoe=ka.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:tP,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",mi(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:tP,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const l=" ".repeat(n);return o?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:u,to:d}=i,m=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(v=>l+v).join(`
`);return c.replaceWith(u,d,r.schema.text(m)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:tP,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:l})=>{var c;const{pos:u}=s,d=s.start(),f=s.end(),m=r.doc.textBetween(d,f,`
`,`
`).split(`
`);let v=0,y=0;const x=u-d;for(let P=0;P<m.length;P+=1){if(y+m[P].length>=x){v=P;break}y+=m[P].length+1}const S=((c=m[v].match(/^ */))==null?void 0:c[0])||"",j=Math.min(S.length,n);if(j===0)return!0;let E=d;for(let P=0;P<v;P+=1)E+=m[P].length+1;return l.delete(E,E+j),u-E<=j&&l.setSelection(En.create(l.doc,E)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:u}=i,p=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(m=>{var v;const y=((v=m.match(/^ */))==null?void 0:v[0])||"",x=Math.min(y.length,n);return m.slice(x)}).join(`
`);return l.replaceWith(c,u,r.schema.text(p)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(Ln.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[y4({find:fVe,type:this.type,getAttributes:t=>({language:t[1]})}),y4({find:hVe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Di({key:new Ns("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,c=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(En.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),pVe=Xoe,mVe=ka.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),gVe=ka.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",mi(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:(t,e)=>e.indent(`
`),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&o){const f=c.filter(p=>l.includes(p.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),vVe=ka.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,mi(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>y4({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),yVe=ka.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",mi(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!AHe(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return Ooe(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(En.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Nn.create(o.doc,c.pos)):o.setSelection(En.create(o.doc,c.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=d?.create();f&&(o.insert(u,f),o.setSelection(En.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Voe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),xVe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,bVe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,wVe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,NVe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,SVe=Xf.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",mi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[pg({find:xVe,type:this.type}),pg({find:wVe,type:this.type})]},addPasteRules(){return[jp({find:bVe,type:this.type}),jp({find:NVe,type:this.type})]}});const jVe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",EVe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",w4="numeric",N4="ascii",S4="alpha",Xb="asciinumeric",_b="alphanumeric",j4="domain",Qoe="emoji",_Ve="scheme",CVe="slashscheme",nP="whitespace";function AVe(t,e){return t in e||(e[t]=[]),e[t]}function Rm(t,e,n){e[w4]&&(e[Xb]=!0,e[_b]=!0),e[N4]&&(e[Xb]=!0,e[S4]=!0),e[Xb]&&(e[_b]=!0),e[S4]&&(e[_b]=!0),e[_b]&&(e[j4]=!0),e[Qoe]&&(e[j4]=!0);for(const r in e){const i=AVe(r,n);i.indexOf(t)<0&&i.push(t)}}function kVe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function sl(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}sl.groups={};sl.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||sl.groups;let i;return e&&e.j?i=e:(i=new sl(e),n&&r&&Rm(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||sl.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new sl,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new sl,s){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(kVe(o.t,r),n);Rm(s,c,r)}else n&&Rm(s,n,r);o.t=s}return i.j[t]=o,o}};const lr=(t,e,n,r,i)=>t.ta(e,n,r,i),ps=(t,e,n,r,i)=>t.tr(e,n,r,i),TW=(t,e,n,r,i)=>t.ts(e,n,r,i),Et=(t,e,n,r,i)=>t.tt(e,n,r,i),vf="WORD",E4="UWORD",Zoe="ASCIINUMERICAL",Joe="ALPHANUMERICAL",f1="LOCALHOST",_4="TLD",C4="UTLD",nN="SCHEME",Tv="SLASH_SCHEME",m3="NUM",A4="WS",g3="NL",Qb="OPENBRACE",Zb="CLOSEBRACE",rj="OPENBRACKET",ij="CLOSEBRACKET",sj="OPENPAREN",aj="CLOSEPAREN",oj="OPENANGLEBRACKET",lj="CLOSEANGLEBRACKET",cj="FULLWIDTHLEFTPAREN",uj="FULLWIDTHRIGHTPAREN",dj="LEFTCORNERBRACKET",fj="RIGHTCORNERBRACKET",hj="LEFTWHITECORNERBRACKET",pj="RIGHTWHITECORNERBRACKET",mj="FULLWIDTHLESSTHAN",gj="FULLWIDTHGREATERTHAN",vj="AMPERSAND",yj="APOSTROPHE",xj="ASTERISK",zh="AT",bj="BACKSLASH",wj="BACKTICK",Nj="CARET",Vh="COLON",v3="COMMA",Sj="DOLLAR",nd="DOT",jj="EQUALS",y3="EXCLAMATION",uc="HYPHEN",Jb="PERCENT",Ej="PIPE",_j="PLUS",Cj="POUND",e0="QUERY",x3="QUOTE",ele="FULLWIDTHMIDDLEDOT",b3="SEMI",rd="SLASH",t0="TILDE",Aj="UNDERSCORE",tle="EMOJI",kj="SYM";var nle=Object.freeze({__proto__:null,ALPHANUMERICAL:Joe,AMPERSAND:vj,APOSTROPHE:yj,ASCIINUMERICAL:Zoe,ASTERISK:xj,AT:zh,BACKSLASH:bj,BACKTICK:wj,CARET:Nj,CLOSEANGLEBRACKET:lj,CLOSEBRACE:Zb,CLOSEBRACKET:ij,CLOSEPAREN:aj,COLON:Vh,COMMA:v3,DOLLAR:Sj,DOT:nd,EMOJI:tle,EQUALS:jj,EXCLAMATION:y3,FULLWIDTHGREATERTHAN:gj,FULLWIDTHLEFTPAREN:cj,FULLWIDTHLESSTHAN:mj,FULLWIDTHMIDDLEDOT:ele,FULLWIDTHRIGHTPAREN:uj,HYPHEN:uc,LEFTCORNERBRACKET:dj,LEFTWHITECORNERBRACKET:hj,LOCALHOST:f1,NL:g3,NUM:m3,OPENANGLEBRACKET:oj,OPENBRACE:Qb,OPENBRACKET:rj,OPENPAREN:sj,PERCENT:Jb,PIPE:Ej,PLUS:_j,POUND:Cj,QUERY:e0,QUOTE:x3,RIGHTCORNERBRACKET:fj,RIGHTWHITECORNERBRACKET:pj,SCHEME:nN,SEMI:b3,SLASH:rd,SLASH_SCHEME:Tv,SYM:kj,TILDE:t0,TLD:_4,UNDERSCORE:Aj,UTLD:C4,UWORD:E4,WORD:vf,WS:A4});const pf=/[a-z]/,fb=new RegExp("\\p{L}","u"),rP=new RegExp("\\p{Emoji}","u"),mf=/\d/,iP=/\s/,OW="\r",sP=`
`,TVe="",OVe="",aP="";let b2=null,w2=null;function PVe(t=[]){const e={};sl.groups=e;const n=new sl;b2==null&&(b2=PW(jVe)),w2==null&&(w2=PW(EVe)),Et(n,"'",yj),Et(n,"{",Qb),Et(n,"}",Zb),Et(n,"[",rj),Et(n,"]",ij),Et(n,"(",sj),Et(n,")",aj),Et(n,"<",oj),Et(n,">",lj),Et(n,"",cj),Et(n,"",uj),Et(n,"",dj),Et(n,"",fj),Et(n,"",hj),Et(n,"",pj),Et(n,"",mj),Et(n,"",gj),Et(n,"&",vj),Et(n,"*",xj),Et(n,"@",zh),Et(n,"`",wj),Et(n,"^",Nj),Et(n,":",Vh),Et(n,",",v3),Et(n,"$",Sj),Et(n,".",nd),Et(n,"=",jj),Et(n,"!",y3),Et(n,"-",uc),Et(n,"%",Jb),Et(n,"|",Ej),Et(n,"+",_j),Et(n,"#",Cj),Et(n,"?",e0),Et(n,'"',x3),Et(n,"/",rd),Et(n,";",b3),Et(n,"~",t0),Et(n,"_",Aj),Et(n,"\\",bj),Et(n,"",ele);const r=ps(n,mf,m3,{[w4]:!0});ps(r,mf,r);const i=ps(r,pf,Zoe,{[Xb]:!0}),s=ps(r,fb,Joe,{[_b]:!0}),o=ps(n,pf,vf,{[N4]:!0});ps(o,mf,i),ps(o,pf,o),ps(i,mf,i),ps(i,pf,i);const l=ps(n,fb,E4,{[S4]:!0});ps(l,pf),ps(l,mf,s),ps(l,fb,l),ps(s,mf,s),ps(s,pf),ps(s,fb,s);const c=Et(n,sP,g3,{[nP]:!0}),u=Et(n,OW,A4,{[nP]:!0}),d=ps(n,iP,A4,{[nP]:!0});Et(n,aP,d),Et(u,sP,c),Et(u,aP,d),ps(u,iP,d),Et(d,OW),Et(d,sP),ps(d,iP,d),Et(d,aP,d);const f=ps(n,rP,tle,{[Qoe]:!0});Et(f,"#"),ps(f,rP,f),Et(f,TVe,f);const p=Et(f,OVe);Et(p,"#"),ps(p,rP,f);const m=[[pf,o],[mf,i]],v=[[pf,null],[fb,l],[mf,s]];for(let y=0;y<b2.length;y++)Ph(n,b2[y],_4,vf,m);for(let y=0;y<w2.length;y++)Ph(n,w2[y],C4,E4,v);Rm(_4,{tld:!0,ascii:!0},e),Rm(C4,{utld:!0,alpha:!0},e),Ph(n,"file",nN,vf,m),Ph(n,"mailto",nN,vf,m),Ph(n,"http",Tv,vf,m),Ph(n,"https",Tv,vf,m),Ph(n,"ftp",Tv,vf,m),Ph(n,"ftps",Tv,vf,m),Rm(nN,{scheme:!0,ascii:!0},e),Rm(Tv,{slashscheme:!0,ascii:!0},e),t=t.sort((y,x)=>y[0]>x[0]?1:-1);for(let y=0;y<t.length;y++){const x=t[y][0],S=t[y][1]?{[_Ve]:!0}:{[CVe]:!0};x.indexOf("-")>=0?S[j4]=!0:pf.test(x)?mf.test(x)?S[Xb]=!0:S[N4]=!0:S[w4]=!0,TW(n,x,x,S)}return TW(n,"localhost",f1,{ascii:!0}),n.jd=new sl(kj),{start:n,tokens:Object.assign({groups:e},nle)}}function rle(t,e){const n=MVe(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,c=null,u=0,d=null,f=-1,p=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(f=0,p=0,d=l):f>=0&&(f+=n[o].length,p++),u+=n[o].length,s+=n[o].length,o++;s-=f,o-=p,u-=f,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function MVe(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Ph(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new sl(r),s.jr=i.slice(),t.j[c]=s),t=s}return s=new sl(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function PW(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const h1={defaultProtocol:"http",events:null,format:MW,formatHref:MW,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function w3(t,e=null){let n=Object.assign({},h1);t&&(n=Object.assign(n,t instanceof w3?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}w3.prototype={o:h1,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:h1[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function MW(t){return t}function ile(t,e){this.t="token",this.v=t,this.tk=e}ile.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=h1.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),c=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:f}}};function P_(t,e){class n extends ile{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const RW=P_("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),DW=P_("text"),RVe=P_("nl"),N2=P_("url",{isLink:!0,toHref(t=h1.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==f1&&t[1].t===Vh}}),cc=t=>new sl(t);function DVe({groups:t}){const e=t.domain.concat([vj,xj,zh,bj,wj,Nj,Sj,jj,uc,m3,Jb,Ej,_j,Cj,rd,kj,t0,Aj]),n=[yj,Vh,v3,nd,y3,Jb,e0,x3,b3,oj,lj,Qb,Zb,ij,rj,sj,aj,cj,uj,dj,fj,hj,pj,mj,gj],r=[vj,yj,xj,bj,wj,Nj,Sj,jj,uc,Qb,Zb,Jb,Ej,_j,Cj,e0,rd,kj,t0,Aj],i=cc(),s=Et(i,t0);lr(s,r,s),lr(s,t.domain,s);const o=cc(),l=cc(),c=cc();lr(i,t.domain,o),lr(i,t.scheme,l),lr(i,t.slashscheme,c),lr(o,r,s),lr(o,t.domain,o);const u=Et(o,zh);Et(s,zh,u),Et(l,zh,u),Et(c,zh,u);const d=Et(s,nd);lr(d,r,s),lr(d,t.domain,s);const f=cc();lr(u,t.domain,f),lr(f,t.domain,f);const p=Et(f,nd);lr(p,t.domain,f);const m=cc(RW);lr(p,t.tld,m),lr(p,t.utld,m),Et(u,f1,m);const v=Et(f,uc);Et(v,uc,v),lr(v,t.domain,f),lr(m,t.domain,f),Et(m,nd,p),Et(m,uc,v);const y=Et(m,Vh);lr(y,t.numeric,RW);const x=Et(o,uc),b=Et(o,nd);Et(x,uc,x),lr(x,t.domain,o),lr(b,r,s),lr(b,t.domain,o);const S=cc(N2);lr(b,t.tld,S),lr(b,t.utld,S),lr(S,t.domain,o),lr(S,r,s),Et(S,nd,b),Et(S,uc,x),Et(S,zh,u);const j=Et(S,Vh),E=cc(N2);lr(j,t.numeric,E);const A=cc(N2),P=cc();lr(A,e,A),lr(A,n,P),lr(P,e,A),lr(P,n,P),Et(S,rd,A),Et(E,rd,A);const O=Et(l,Vh),k=Et(c,Vh),C=Et(k,rd),I=Et(C,rd);lr(l,t.domain,o),Et(l,nd,b),Et(l,uc,x),lr(c,t.domain,o),Et(c,nd,b),Et(c,uc,x),lr(O,t.domain,A),Et(O,rd,A),Et(O,e0,A),lr(I,t.domain,A),lr(I,e,A),Et(I,rd,A);const R=[[Qb,Zb],[rj,ij],[sj,aj],[oj,lj],[cj,uj],[dj,fj],[hj,pj],[mj,gj]];for(let D=0;D<R.length;D++){const[L,z]=R[D],W=Et(A,L);Et(P,L,W),Et(W,z,A);const X=cc(N2);lr(W,e,X);const q=cc();lr(W,n),lr(X,e,X),lr(X,n,q),lr(q,e,X),lr(q,n,q),Et(X,z,A),Et(q,z,A)}return Et(i,f1,S),Et(i,g3,RVe),{start:i,tokens:nle}}function IVe(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,c=null,u=null,d=0,f=null,p=-1;for(;i<r&&!(c=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=c||l.go(n[i].t));)c=null,l=u,l.accepts()?(p=0,f=l):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(oP(DW,e,o)),o=[]),i-=p,d-=p;const m=f.t,v=n.slice(i-d,i);s.push(oP(m,e,v))}}return o.length>0&&s.push(oP(DW,e,o)),s}function oP(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const LVe=typeof console<"u"&&console&&console.warn||(()=>{}),FVe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ti={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function BVe(){return sl.groups={},Ti.scanner=null,Ti.parser=null,Ti.tokenQueue=[],Ti.pluginQueue=[],Ti.customSchemes=[],Ti.initialized=!1,Ti}function IW(t,e=!1){if(Ti.initialized&&LVe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${FVe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ti.customSchemes.push([t,e])}function $Ve(){Ti.scanner=PVe(Ti.customSchemes);for(let t=0;t<Ti.tokenQueue.length;t++)Ti.tokenQueue[t][1]({scanner:Ti.scanner});Ti.parser=DVe(Ti.scanner.tokens);for(let t=0;t<Ti.pluginQueue.length;t++)Ti.pluginQueue[t][1]({scanner:Ti.scanner,parser:Ti.parser});return Ti.initialized=!0,Ti}function N3(t){return Ti.initialized||$Ve(),IVe(Ti.parser.start,t,rle(Ti.scanner.start,t))}N3.scan=rle;function sle(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new w3(n),i=N3(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var S3="[\0- -\u2029]",zVe=new RegExp(S3),qVe=new RegExp(`${S3}$`),UVe=new RegExp(S3,"g");function HVe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function VVe(t){return new Di({key:new Ns("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=Noe(n.doc,[...e]);if(Toe(l).forEach(({newRange:u})=>{const d=RUe(r.doc,u,m=>m.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const m=r.doc.textBetween(u.from,u.to," "," ");if(!qVe.test(m))return;f=d[0],p=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&p){const m=p.split(zVe).filter(Boolean);if(m.length<=0)return!1;const v=m[m.length-1],y=f.pos+p.lastIndexOf(v);if(!v)return!1;const x=N3(v).map(b=>b.toObject(t.defaultProtocol));if(!HVe(x))return!1;x.filter(b=>b.isLink).map(b=>({...b,from:y+b.start+1,to:y+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{u3(b.from,b.to,r.doc).some(S=>S.mark.type===t.type)||o.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function WVe(t){return new Di({key:new Ns("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;o=f.find(p=>p.nodeName==="A")}if(!o)return!1;const l=koe(e.state,t.type.name),c=(i=o?.href)!=null?i:l.href,u=(s=o?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&c?(window.open(c,u),!0):!1}}})}function KVe(t){return new Di({key:new Ns("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const u=sle(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!u||i!==void 0&&!i(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function hm(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(UVe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var j3=Xf.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){IW(t);return}IW(t.scheme,t.optionalSlashes)})},onDestroy(){BVe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!hm(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!hm(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!hm(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mi(this.options.HTMLAttributes,t),0]:["a",mi(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!hm(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!hm(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[jp({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=sle(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!hm(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(VVe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!hm(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(WVe({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(KVe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),GVe=j3,YVe=Object.defineProperty,XVe=(t,e)=>{for(var n in e)YVe(t,n,{get:e[n],enumerable:!0})},QVe="listItem",LW="textStyle",FW=/^\s*([-+*])\s$/,ale=ka.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(QVe,this.editor.getAttributes(LW)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ky({find:FW,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ky({find:FW,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(LW),editor:this.editor})),[t]}}),ole=ka.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),l=e.parseChildren(o);n.push(...l)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>p3(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ZVe={};XVe(ZVe,{findListItemPos:()=>G1,getNextListDepth:()=>E3,handleBackspace:()=>k4,handleDelete:()=>T4,hasListBefore:()=>lle,hasListItemAfter:()=>JVe,hasListItemBefore:()=>cle,listItemHasSubList:()=>ule,nextListIsDeeper:()=>dle,nextListIsHigher:()=>fle});var G1=(t,e)=>{const{$from:n}=e.selection,r=Ks(t,e.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},E3=(t,e)=>{const n=G1(t,e);if(!n)return!1;const[,r]=UUe(e,t,n.$pos.pos+4);return r},lle=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},cle=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},ule=(t,e,n)=>{if(!n)return!1;const r=Ks(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},k4=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Sp(t.state,e)&&lle(t.state,e,n)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),u=[];c.node().descendants((p,m)=>{p.type.name===e&&u.push({node:p,pos:m})});const d=u.at(-1);if(!d)return!1;const f=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!Sp(t.state,e)||!KUe(t.state))return!1;const r=G1(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=ule(e,t.state,s);return cle(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},dle=(t,e)=>{const n=E3(t,e),r=G1(t,e);return!r||!n?!1:n>r.depth},fle=(t,e)=>{const n=E3(t,e),r=G1(t,e);return!r||!n?!1:n<r.depth},T4=(t,e)=>{if(!Sp(t.state,e)||!WUe(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:dle(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():fle(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},JVe=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},hle=li.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&T4(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&T4(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&k4(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&k4(t,n,r)&&(e=!0)}),e}}}}),BW=/^(\s*)(\d+)\.\s+(.*)$/,eWe=/^\s/;function tWe(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(BW);if(!s)break;const[,o,l,c]=s,u=o.length;let d=c,f=n+1;const p=[i];for(;f<t.length;){const m=t[f];if(m.match(BW))break;if(m.trim()==="")p.push(m),d+=`
`,f+=1;else if(m.match(eWe))p.push(m),d+=`
${m.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(l,10),content:d.trim(),raw:p.join(`
`)}),r=f,n=f}return[e,r]}function ple(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const d=l.slice(1).join(`
`).trim();if(d){const m=n.blockTokens(d);u.push(...m)}let f=s+1;const p=[];for(;f<t.length&&t[f].indent>e;)p.push(t[f]),f+=1;if(p.length>0){const m=Math.min(...p.map(y=>y.indent)),v=ple(p,m,n);u.push({type:"list",ordered:!0,start:p[0].number,items:v,raw:p.map(y=>y.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=f}else s+=1}return i}function nWe(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var rWe="listItem",$W="textStyle",zW=/^(\d+)\.\s$/,mle=ka.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",mi(this.options.HTMLAttributes,n),0]:["ol",mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?nWe(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=tWe(i);if(s.length===0)return;const l=ple(s,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:l,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(rWe,this.editor.getAttributes($W)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ky({find:zW,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ky({find:zW,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes($W)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),iWe=/^\s*(\[([( |x])?\])\s$/,sWe=ka.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",mi(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return p3(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),u=d=>{var f,p;l.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,l.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",d=>d.preventDefault()),l.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=n();if(typeof m!="number")return!1;const v=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...v?.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,c),Object.entries(e).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:c,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,l.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[Ky({find:iWe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),aWe=ka.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",mi(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=x4(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=x4(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});li.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(ale.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(ole.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(hle.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(mle.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(sWe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(aWe.configure(this.options.taskList)),t}});var oWe=ka.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",mi(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),lWe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cWe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,uWe=Xf.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",mi(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[pg({find:lWe,type:this.type})]},addPasteRules(){return[jp({find:cWe,type:this.type})]}}),dWe=ka.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),gle=Xf.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",mi(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),fWe=gle;function hWe(t={}){return new Di({view(e){return new pWe(e,t)}})}class pWe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let m=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(m){let v=m.getBoundingClientRect(),y=f?v.bottom:v.top;f&&p&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*l;r={left:v.left,right:v.right,top:y-x,bottom:y+x}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),p=f.width/c.offsetWidth,m=f.height/c.offsetHeight;u=f.left-c.scrollLeft*p,d=f.top-c.scrollTop*m}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-d)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=mae(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class ys extends Ln{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ys.valid(r)?new ys(r):Ln.near(r)}content(){return qt.empty}eq(e){return e instanceof ys&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ys(e.resolve(n.pos))}getBookmark(){return new _3(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!mWe(e)||!gWe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ys.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let c=e.doc.resolve(i);if(ys.valid(c))return c}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Nn.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(ys.valid(l))return l}return null}}}ys.prototype.visible=!1;ys.findFrom=ys.findGapCursorFrom;Ln.jsonID("gapcursor",ys);class _3{constructor(e){this.pos=e}map(e){return new _3(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ys.valid(n)?new ys(n):Ln.near(n)}}function vle(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function mWe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||vle(i.type))return!0;if(i.inlineContent)return!1}}return!0}function gWe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||vle(i.type))return!0;if(i.inlineContent)return!1}}return!0}function vWe(){return new Di({props:{decorations:wWe,createSelectionBetween(t,e,n){return e.pos==n.pos&&ys.valid(n)?new ys(n):null},handleClick:xWe,handleKeyDown:yWe,handleDOMEvents:{beforeinput:bWe}}})}const yWe=n3({ArrowLeft:S2("horiz",-1),ArrowRight:S2("horiz",1),ArrowUp:S2("vert",-1),ArrowDown:S2("vert",1)});function S2(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof En){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=ys.findGapCursorFrom(l,e,c);return u?(i&&i(r.tr.setSelection(new ys(u))),!0):!1}}function xWe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ys.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Nn.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ys(r))),!0)}function bWe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ys))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=pt.empty;for(let o=r.length-1;o>=0;o--)i=pt.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new qt(i,0,0));return s.setSelection(En.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function wWe(t){if(!(t.selection instanceof ys))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",fi.create(t.doc,[oa.widget(t.selection.head,e,{key:"gapcursor"})])}var Tj=200,Ca=function(){};Ca.prototype.append=function(e){return e.length?(e=Ca.from(e),!this.length&&e||e.length<Tj&&this.leafAppend(e)||this.length<Tj&&e.leafPrepend(this)||this.appendInner(e)):this};Ca.prototype.prepend=function(e){return e.length?Ca.from(e).append(this):this};Ca.prototype.appendInner=function(e){return new NWe(this,e)};Ca.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ca.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ca.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ca.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ca.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Ca.from=function(e){return e instanceof Ca?e:e&&e.length?new yle(e):Ca.empty};var yle=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Tj)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Tj)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Ca);Ca.empty=new yle([]);var NWe=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Ca);const SWe=500;class fu{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,c,u=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),s=i.maps.length),s--,d.push(f);return}if(i){d.push(new Mh(f.map));let m=f.step.map(i.slice(s)),v;m&&o.maybeStep(m).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],u.push(new Mh(v,void 0,void 0,u.length+d.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(s)):f.selection,c=new fu(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new Mh(e.mapping.maps[d],f,n),m;(m=c&&c.merge(p))&&(p=m,d?s.pop():l=l.slice(0,l.length-1)),s.push(p),n&&(o++,n=void 0),i||(c=p)}let u=o-r.depth;return u>EWe&&(l=jWe(l,u),o-=u),new fu(l.append(s),o)}remapping(e,n){let r=new s1;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new fu(this.items.append(e.map(n=>new Mh(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let c=n;this.items.forEach(p=>{let m=s.getMirror(--c);if(m==null)return;o=Math.min(o,m);let v=s.maps[m];if(p.step){let y=e.steps[m].invert(e.docs[m]),x=p.selection&&p.selection.map(s.slice(c+1,m));x&&l++,r.push(new Mh(v,y,x))}else r.push(new Mh(v))},i);let u=[];for(let p=n;p<o;p++)u.push(new Mh(s.maps[p]));let d=this.items.slice(0,i).append(u).append(r),f=new fu(d,l);return f.emptyItemCount()>SWe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let f=new Mh(u.invert(),c,d),p,m=i.length-1;(p=i.length&&i[m].merge(f))?i[m]=p:i.push(f)}}else o.map&&r--},this.items.length,0),new fu(Ca.from(i.reverse()),s)}}fu.empty=new fu(Ca.empty,0);function jWe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let Mh=class xle{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new xle(n.getMap().invert(),n,this.selection)}}};class qh{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const EWe=20;function _We(t,e,n,r){let i=n.getMeta(Um),s;if(i)return i.historyState;n.getMeta(kWe)&&(t=new qh(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Um))return o.getMeta(Um).redo?new qh(t.done.addTransform(n,void 0,r,rN(e)),t.undone,qW(n.mapping.maps),t.prevTime,t.prevComposition):new qh(t.done,t.undone.addTransform(n,void 0,r,rN(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!CWe(n,t.prevRanges)),u=o?lP(t.prevRanges,n.mapping):qW(n.mapping.maps);return new qh(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,rN(e)),fu.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new qh(t.done.rebased(n,s),t.undone.rebased(n,s),lP(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new qh(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),lP(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function CWe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function qW(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function lP(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function AWe(t,e,n){let r=rN(e),i=Um.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new qh(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Um,{redo:n,historyState:c})}let cP=!1,UW=null;function rN(t){let e=t.plugins;if(UW!=e){cP=!1,UW=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){cP=!0;break}}return cP}const Um=new Ns("history"),kWe=new Ns("closeHistory");function TWe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Di({key:Um,state:{init(){return new qh(fu.empty,fu.empty,null,0,-1)},apply(e,n,r){return _We(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?wle:r=="historyRedo"?Nle:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function ble(t,e){return(n,r)=>{let i=Um.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=AWe(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const wle=ble(!1,!0),Nle=ble(!0,!0);li.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Di({key:new Ns("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(l,c);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=s-r,u=l-c,d=l;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>r)}})]}});var OWe=li.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[hWe(this.options)]}});li.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Di({key:new Ns("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return fi.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(oa.node(u,u+c.nodeSize,{class:this.options.className}))}),fi.create(t,s)}}})]}});var PWe=li.create({name:"gapCursor",addProseMirrorPlugins(){return[vWe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Yr(yn(t,"allowGapCursor",n)))!=null?e:null}}}),MWe=li.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Di({key:new Ns("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,u=!o.isLeaf&&k_(o);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=oa.node(l,l+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),fi.create(t,i)}}})]}});li.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Di({key:new Ns("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Ooe(n.selection)||t.view.dragging?null:fi.create(n.doc,[oa.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function HW({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var RWe=li.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ns(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Di({key:e,appendTransaction:(i,s,o)=>{const{doc:l,tr:c,schema:u}=o,d=e.getState(o),f=l.content.size,p=u.nodes[n];if(d)return c.insert(f,p.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!HW({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged)return s;const o=i.doc.lastChild;return!HW({node:o,types:r})}}})]}}),DWe=li.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>wle(t,e),redo:()=>({state:t,dispatch:e})=>Nle(t,e)}},addProseMirrorPlugins(){return[TWe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),IWe=li.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(lVe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(rVe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(ale.configure(this.options.bulletList)),this.options.code!==!1&&i.push(dVe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Xoe.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(mVe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(OWe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(PWe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(gVe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(vVe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(DWe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(yVe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(SVe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(ole.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(hle.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(j3.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(mle.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(oWe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(uWe.configure(this.options.strike)),this.options.text!==!1&&i.push(dWe.configure(this.options.text)),this.options.underline!==!1&&i.push(gle.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(RWe.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Sle=IWe,LWe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,jle=ka.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",mi(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,i,s,o;const l=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",c=(i=(r=t.attrs)==null?void 0:r.alt)!=null?i:"",u=(o=(s=t.attrs)==null?void 0:s.title)!=null?o:"";return u?`![${c}](${l} "${u}")`:`![${c}](${l})`},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Voe({find:LWe,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),FWe=jle,Ele=li.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),BWe=Ele,$We=20,_le=(t,e=0)=>{const n=[];return!t.children.length||e>$We||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(..._le(r,e+1))}),n},zWe=t=>{if(!t.children.length)return;const e=_le(t);e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},C3=Xf.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&zWe(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",mi(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),qWe=li.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),l=s.slice(1).join(":").trim();if(o==="background-color")return l.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),A3=li.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),l=s.slice(1).join(":").trim();if(o==="color")return l.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),UWe=li.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),HWe=li.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),VWe=li.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});li.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(qWe.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(A3.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(UWe.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(HWe.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(VWe.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(C3.configure(this.options.textStyle)),t}});var WWe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,KWe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,GWe=Xf.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",mi(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const s=i[2].trim(),o=n.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:o}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[pg({find:WWe,type:this.type})]},addPasteRules(){return[jp({find:KWe,type:this.type})]}}),uP,VW;function YWe(){if(VW)return uP;VW=1;function t(je){return je instanceof Map?je.clear=je.delete=je.set=function(){throw new Error("map is read-only")}:je instanceof Set&&(je.add=je.clear=je.delete=function(){throw new Error("set is read-only")}),Object.freeze(je),Object.getOwnPropertyNames(je).forEach(se=>{const Le=je[se],St=typeof Le;(St==="object"||St==="function")&&!Object.isFrozen(Le)&&t(Le)}),je}class e{constructor(se){se.data===void 0&&(se.data={}),this.data=se.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(je){return je.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(je,...se){const Le=Object.create(null);for(const St in je)Le[St]=je[St];return se.forEach(function(St){for(const Tn in St)Le[Tn]=St[Tn]}),Le}const i="</span>",s=je=>!!je.scope,o=(je,{prefix:se})=>{if(je.startsWith("language:"))return je.replace("language:","language-");if(je.includes(".")){const Le=je.split(".");return[`${se}${Le.shift()}`,...Le.map((St,Tn)=>`${St}${"_".repeat(Tn+1)}`)].join(" ")}return`${se}${je}`};class l{constructor(se,Le){this.buffer="",this.classPrefix=Le.classPrefix,se.walk(this)}addText(se){this.buffer+=n(se)}openNode(se){if(!s(se))return;const Le=o(se.scope,{prefix:this.classPrefix});this.span(Le)}closeNode(se){s(se)&&(this.buffer+=i)}value(){return this.buffer}span(se){this.buffer+=`<span class="${se}">`}}const c=(je={})=>{const se={children:[]};return Object.assign(se,je),se};class u{constructor(){this.rootNode=c(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(se){this.top.children.push(se)}openNode(se){const Le=c({scope:se});this.add(Le),this.stack.push(Le)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(se){return this.constructor._walk(se,this.rootNode)}static _walk(se,Le){return typeof Le=="string"?se.addText(Le):Le.children&&(se.openNode(Le),Le.children.forEach(St=>this._walk(se,St)),se.closeNode(Le)),se}static _collapse(se){typeof se!="string"&&se.children&&(se.children.every(Le=>typeof Le=="string")?se.children=[se.children.join("")]:se.children.forEach(Le=>{u._collapse(Le)}))}}class d extends u{constructor(se){super(),this.options=se}addText(se){se!==""&&this.add(se)}startScope(se){this.openNode(se)}endScope(){this.closeNode()}__addSublanguage(se,Le){const St=se.root;Le&&(St.scope=`language:${Le}`),this.add(St)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(je){return je?typeof je=="string"?je:je.source:null}function p(je){return y("(?=",je,")")}function m(je){return y("(?:",je,")*")}function v(je){return y("(?:",je,")?")}function y(...je){return je.map(Le=>f(Le)).join("")}function x(je){const se=je[je.length-1];return typeof se=="object"&&se.constructor===Object?(je.splice(je.length-1,1),se):{}}function b(...je){return"("+(x(je).capture?"":"?:")+je.map(St=>f(St)).join("|")+")"}function S(je){return new RegExp(je.toString()+"|").exec("").length-1}function j(je,se){const Le=je&&je.exec(se);return Le&&Le.index===0}const E=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function A(je,{joinWith:se}){let Le=0;return je.map(St=>{Le+=1;const Tn=Le;let Dt=f(St),wt="";for(;Dt.length>0;){const At=E.exec(Dt);if(!At){wt+=Dt;break}wt+=Dt.substring(0,At.index),Dt=Dt.substring(At.index+At[0].length),At[0][0]==="\\"&&At[1]?wt+="\\"+String(Number(At[1])+Tn):(wt+=At[0],At[0]==="("&&Le++)}return wt}).map(St=>`(${St})`).join(se)}const P=/\b\B/,O="[a-zA-Z]\\w*",k="[a-zA-Z_]\\w*",C="\\b\\d+(\\.\\d+)?",I="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",R="\\b(0b[01]+)",D="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",L=(je={})=>{const se=/^#![ ]*\//;return je.binary&&(je.begin=y(se,/.*\b/,je.binary,/\b.*/)),r({scope:"meta",begin:se,end:/$/,relevance:0,"on:begin":(Le,St)=>{Le.index!==0&&St.ignoreMatch()}},je)},z={begin:"\\\\[\\s\\S]",relevance:0},W={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[z]},X={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[z]},q={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},V=function(je,se,Le={}){const St=r({scope:"comment",begin:je,end:se,contains:[]},Le);St.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Tn=b("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return St.contains.push({begin:y(/[ ]+/,"(",Tn,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),St},Y=V("//","$"),re=V("/\\*","\\*/"),Q=V("#","$"),F={scope:"number",begin:C,relevance:0},G={scope:"number",begin:I,relevance:0},te={scope:"number",begin:R,relevance:0},le={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[z,{begin:/\[/,end:/\]/,relevance:0,contains:[z]}]},he={scope:"title",begin:O,relevance:0},me={scope:"title",begin:k,relevance:0},xe={begin:"\\.\\s*"+k,relevance:0};var Ne=Object.freeze({__proto__:null,APOS_STRING_MODE:W,BACKSLASH_ESCAPE:z,BINARY_NUMBER_MODE:te,BINARY_NUMBER_RE:R,COMMENT:V,C_BLOCK_COMMENT_MODE:re,C_LINE_COMMENT_MODE:Y,C_NUMBER_MODE:G,C_NUMBER_RE:I,END_SAME_AS_BEGIN:function(je){return Object.assign(je,{"on:begin":(se,Le)=>{Le.data._beginMatch=se[1]},"on:end":(se,Le)=>{Le.data._beginMatch!==se[1]&&Le.ignoreMatch()}})},HASH_COMMENT_MODE:Q,IDENT_RE:O,MATCH_NOTHING_RE:P,METHOD_GUARD:xe,NUMBER_MODE:F,NUMBER_RE:C,PHRASAL_WORDS_MODE:q,QUOTE_STRING_MODE:X,REGEXP_MODE:le,RE_STARTERS_RE:D,SHEBANG:L,TITLE_MODE:he,UNDERSCORE_IDENT_RE:k,UNDERSCORE_TITLE_MODE:me});function Ce(je,se){je.input[je.index-1]==="."&&se.ignoreMatch()}function ae(je,se){je.className!==void 0&&(je.scope=je.className,delete je.className)}function Pe(je,se){se&&je.beginKeywords&&(je.begin="\\b("+je.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",je.__beforeBegin=Ce,je.keywords=je.keywords||je.beginKeywords,delete je.beginKeywords,je.relevance===void 0&&(je.relevance=0))}function J(je,se){Array.isArray(je.illegal)&&(je.illegal=b(...je.illegal))}function ne(je,se){if(je.match){if(je.begin||je.end)throw new Error("begin & end are not supported with match");je.begin=je.match,delete je.match}}function Re(je,se){je.relevance===void 0&&(je.relevance=1)}const dt=(je,se)=>{if(!je.beforeMatch)return;if(je.starts)throw new Error("beforeMatch cannot be used with starts");const Le=Object.assign({},je);Object.keys(je).forEach(St=>{delete je[St]}),je.keywords=Le.keywords,je.begin=y(Le.beforeMatch,p(Le.begin)),je.starts={relevance:0,contains:[Object.assign(Le,{endsParent:!0})]},je.relevance=0,delete Le.beforeMatch},et=["of","and","for","in","not","or","if","then","parent","list","value"],Ve="keyword";function ge(je,se,Le=Ve){const St=Object.create(null);return typeof je=="string"?Tn(Le,je.split(" ")):Array.isArray(je)?Tn(Le,je):Object.keys(je).forEach(function(Dt){Object.assign(St,ge(je[Dt],se,Dt))}),St;function Tn(Dt,wt){se&&(wt=wt.map(At=>At.toLowerCase())),wt.forEach(function(At){const Bt=At.split("|");St[Bt[0]]=[Dt,Se(Bt[0],Bt[1])]})}}function Se(je,se){return se?Number(se):ke(je)?0:1}function ke(je){return et.includes(je.toLowerCase())}const We={},Ke=je=>{console.error(je)},qe=(je,...se)=>{console.log(`WARN: ${je}`,...se)},nt=(je,se)=>{We[`${je}/${se}`]||(console.log(`Deprecated as of ${je}. ${se}`),We[`${je}/${se}`]=!0)},_t=new Error;function xt(je,se,{key:Le}){let St=0;const Tn=je[Le],Dt={},wt={};for(let At=1;At<=se.length;At++)wt[At+St]=Tn[At],Dt[At+St]=!0,St+=S(se[At-1]);je[Le]=wt,je[Le]._emit=Dt,je[Le]._multi=!0}function Ot(je){if(Array.isArray(je.begin)){if(je.skip||je.excludeBegin||je.returnBegin)throw Ke("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),_t;if(typeof je.beginScope!="object"||je.beginScope===null)throw Ke("beginScope must be object"),_t;xt(je,je.begin,{key:"beginScope"}),je.begin=A(je.begin,{joinWith:""})}}function Yt(je){if(Array.isArray(je.end)){if(je.skip||je.excludeEnd||je.returnEnd)throw Ke("skip, excludeEnd, returnEnd not compatible with endScope: {}"),_t;if(typeof je.endScope!="object"||je.endScope===null)throw Ke("endScope must be object"),_t;xt(je,je.end,{key:"endScope"}),je.end=A(je.end,{joinWith:""})}}function Ct(je){je.scope&&typeof je.scope=="object"&&je.scope!==null&&(je.beginScope=je.scope,delete je.scope)}function $n(je){Ct(je),typeof je.beginScope=="string"&&(je.beginScope={_wrap:je.beginScope}),typeof je.endScope=="string"&&(je.endScope={_wrap:je.endScope}),Ot(je),Yt(je)}function Pn(je){function se(wt,At){return new RegExp(f(wt),"m"+(je.case_insensitive?"i":"")+(je.unicodeRegex?"u":"")+(At?"g":""))}class Le{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(At,Bt){Bt.position=this.position++,this.matchIndexes[this.matchAt]=Bt,this.regexes.push([Bt,At]),this.matchAt+=S(At)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const At=this.regexes.map(Bt=>Bt[1]);this.matcherRe=se(A(At,{joinWith:"|"}),!0),this.lastIndex=0}exec(At){this.matcherRe.lastIndex=this.lastIndex;const Bt=this.matcherRe.exec(At);if(!Bt)return null;const On=Bt.findIndex((sr,Nr)=>Nr>0&&sr!==void 0),en=this.matchIndexes[On];return Bt.splice(0,On),Object.assign(Bt,en)}}class St{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(At){if(this.multiRegexes[At])return this.multiRegexes[At];const Bt=new Le;return this.rules.slice(At).forEach(([On,en])=>Bt.addRule(On,en)),Bt.compile(),this.multiRegexes[At]=Bt,Bt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(At,Bt){this.rules.push([At,Bt]),Bt.type==="begin"&&this.count++}exec(At){const Bt=this.getMatcher(this.regexIndex);Bt.lastIndex=this.lastIndex;let On=Bt.exec(At);if(this.resumingScanAtSamePosition()&&!(On&&On.index===this.lastIndex)){const en=this.getMatcher(0);en.lastIndex=this.lastIndex+1,On=en.exec(At)}return On&&(this.regexIndex+=On.position+1,this.regexIndex===this.count&&this.considerAll()),On}}function Tn(wt){const At=new St;return wt.contains.forEach(Bt=>At.addRule(Bt.begin,{rule:Bt,type:"begin"})),wt.terminatorEnd&&At.addRule(wt.terminatorEnd,{type:"end"}),wt.illegal&&At.addRule(wt.illegal,{type:"illegal"}),At}function Dt(wt,At){const Bt=wt;if(wt.isCompiled)return Bt;[ae,ne,$n,dt].forEach(en=>en(wt,At)),je.compilerExtensions.forEach(en=>en(wt,At)),wt.__beforeBegin=null,[Pe,J,Re].forEach(en=>en(wt,At)),wt.isCompiled=!0;let On=null;return typeof wt.keywords=="object"&&wt.keywords.$pattern&&(wt.keywords=Object.assign({},wt.keywords),On=wt.keywords.$pattern,delete wt.keywords.$pattern),On=On||/\w+/,wt.keywords&&(wt.keywords=ge(wt.keywords,je.case_insensitive)),Bt.keywordPatternRe=se(On,!0),At&&(wt.begin||(wt.begin=/\B|\b/),Bt.beginRe=se(Bt.begin),!wt.end&&!wt.endsWithParent&&(wt.end=/\B|\b/),wt.end&&(Bt.endRe=se(Bt.end)),Bt.terminatorEnd=f(Bt.end)||"",wt.endsWithParent&&At.terminatorEnd&&(Bt.terminatorEnd+=(wt.end?"|":"")+At.terminatorEnd)),wt.illegal&&(Bt.illegalRe=se(wt.illegal)),wt.contains||(wt.contains=[]),wt.contains=[].concat(...wt.contains.map(function(en){return xn(en==="self"?wt:en)})),wt.contains.forEach(function(en){Dt(en,Bt)}),wt.starts&&Dt(wt.starts,At),Bt.matcher=Tn(Bt),Bt}if(je.compilerExtensions||(je.compilerExtensions=[]),je.contains&&je.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return je.classNameAliases=r(je.classNameAliases||{}),Dt(je)}function Ht(je){return je?je.endsWithParent||Ht(je.starts):!1}function xn(je){return je.variants&&!je.cachedVariants&&(je.cachedVariants=je.variants.map(function(se){return r(je,{variants:null},se)})),je.cachedVariants?je.cachedVariants:Ht(je)?r(je,{starts:je.starts?r(je.starts):null}):Object.isFrozen(je)?r(je):je}var ir="11.11.1";class on extends Error{constructor(se,Le){super(se),this.name="HTMLInjectionError",this.html=Le}}const Cn=n,bn=r,Cr=Symbol("nomatch"),ur=7,vn=function(je){const se=Object.create(null),Le=Object.create(null),St=[];let Tn=!0;const Dt="Could not find the language '{}', did you forget to load/include a language module?",wt={disableAutodetect:!0,name:"Plain text",contains:[]};let At={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function Bt(jt){return At.noHighlightRe.test(jt)}function On(jt){let an=jt.className+" ";an+=jt.parentNode?jt.parentNode.className:"";const Kn=At.languageDetectRe.exec(an);if(Kn){const nr=ha(Kn[1]);return nr||(qe(Dt.replace("{}",Kn[1])),qe("Falling back to no-highlight mode for this block.",jt)),nr?Kn[1]:"no-highlight"}return an.split(/\s+/).find(nr=>Bt(nr)||ha(nr))}function en(jt,an,Kn){let nr="",gi="";typeof an=="object"?(nr=jt,Kn=an.ignoreIllegals,gi=an.language):(nt("10.7.0","highlight(lang, code, ...args) has been deprecated."),nt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),gi=jt,nr=an),Kn===void 0&&(Kn=!0);const Ur={code:nr,language:gi};Ps("before:highlight",Ur);const qo=Ur.result?Ur.result:sr(Ur.language,Ur.code,Kn);return qo.code=Ur.code,Ps("after:highlight",qo),qo}function sr(jt,an,Kn,nr){const gi=Object.create(null);function Ur(Mt,Vt){return Mt.keywords[Vt]}function qo(){if(!wn.keywords){Ei.addText(Ar);return}let Mt=0;wn.keywordPatternRe.lastIndex=0;let Vt=wn.keywordPatternRe.exec(Ar),Sn="";for(;Vt;){Sn+=Ar.substring(Mt,Vt.index);const Ft=Ki.case_insensitive?Vt[0].toLowerCase():Vt[0],vi=Ur(wn,Ft);if(vi){const[as,Bp]=vi;if(Ei.addText(Sn),Sn="",gi[Ft]=(gi[Ft]||0)+1,gi[Ft]<=ur&&(Bc+=Bp),as.startsWith("_"))Sn+=Vt[0];else{const eh=Ki.classNameAliases[as]||as;Rs(Vt[0],eh)}}else Sn+=Vt[0];Mt=wn.keywordPatternRe.lastIndex,Vt=wn.keywordPatternRe.exec(Ar)}Sn+=Ar.substring(Mt),Ei.addText(Sn)}function ci(){if(Ar==="")return;let Mt=null;if(typeof wn.subLanguage=="string"){if(!se[wn.subLanguage]){Ei.addText(Ar);return}Mt=sr(wn.subLanguage,Ar,!0,Fc[wn.subLanguage]),Fc[wn.subLanguage]=Mt._top}else Mt=Ii(Ar,wn.subLanguage.length?wn.subLanguage:null);wn.relevance>0&&(Bc+=Mt.relevance),Ei.__addSublanguage(Mt._emitter,Mt.language)}function Ms(){wn.subLanguage!=null?ci():qo(),Ar=""}function Rs(Mt,Vt){Mt!==""&&(Ei.startScope(Vt),Ei.addText(Mt),Ei.endScope())}function Oa(Mt,Vt){let Sn=1;const Ft=Vt.length-1;for(;Sn<=Ft;){if(!Mt._emit[Sn]){Sn++;continue}const vi=Ki.classNameAliases[Mt[Sn]]||Mt[Sn],as=Vt[Sn];vi?Rs(as,vi):(Ar=as,qo(),Ar=""),Sn++}}function Ka(Mt,Vt){return Mt.scope&&typeof Mt.scope=="string"&&Ei.openNode(Ki.classNameAliases[Mt.scope]||Mt.scope),Mt.beginScope&&(Mt.beginScope._wrap?(Rs(Ar,Ki.classNameAliases[Mt.beginScope._wrap]||Mt.beginScope._wrap),Ar=""):Mt.beginScope._multi&&(Oa(Mt.beginScope,Vt),Ar="")),wn=Object.create(Mt,{parent:{value:wn}}),wn}function Xs(Mt,Vt,Sn){let Ft=j(Mt.endRe,Sn);if(Ft){if(Mt["on:end"]){const vi=new e(Mt);Mt["on:end"](Vt,vi),vi.isMatchIgnored&&(Ft=!1)}if(Ft){for(;Mt.endsParent&&Mt.parent;)Mt=Mt.parent;return Mt}}if(Mt.endsWithParent)return Xs(Mt.parent,Vt,Sn)}function Ic(Mt){return wn.matcher.regexIndex===0?(Ar+=Mt[0],1):(Pa=!0,0)}function ji(Mt){const Vt=Mt[0],Sn=Mt.rule,Ft=new e(Sn),vi=[Sn.__beforeBegin,Sn["on:begin"]];for(const as of vi)if(as&&(as(Mt,Ft),Ft.isMatchIgnored))return Ic(Vt);return Sn.skip?Ar+=Vt:(Sn.excludeBegin&&(Ar+=Vt),Ms(),!Sn.returnBegin&&!Sn.excludeBegin&&(Ar=Vt)),Ka(Sn,Mt),Sn.returnBegin?0:Vt.length}function Lc(Mt){const Vt=Mt[0],Sn=an.substring(Mt.index),Ft=Xs(wn,Mt,Sn);if(!Ft)return Cr;const vi=wn;wn.endScope&&wn.endScope._wrap?(Ms(),Rs(Vt,wn.endScope._wrap)):wn.endScope&&wn.endScope._multi?(Ms(),Oa(wn.endScope,Mt)):vi.skip?Ar+=Vt:(vi.returnEnd||vi.excludeEnd||(Ar+=Vt),Ms(),vi.excludeEnd&&(Ar=Vt));do wn.scope&&Ei.closeNode(),!wn.skip&&!wn.subLanguage&&(Bc+=wn.relevance),wn=wn.parent;while(wn!==Ft.parent);return Ft.starts&&Ka(Ft.starts,Mt),vi.returnEnd?0:Vt.length}function Jf(){const Mt=[];for(let Vt=wn;Vt!==Ki;Vt=Vt.parent)Vt.scope&&Mt.unshift(Vt.scope);Mt.forEach(Vt=>Ei.openNode(Vt))}let Vl={};function Wl(Mt,Vt){const Sn=Vt&&Vt[0];if(Ar+=Mt,Sn==null)return Ms(),0;if(Vl.type==="begin"&&Vt.type==="end"&&Vl.index===Vt.index&&Sn===""){if(Ar+=an.slice(Vt.index,Vt.index+1),!Tn){const Ft=new Error(`0 width match regex (${jt})`);throw Ft.languageName=jt,Ft.badRule=Vl.rule,Ft}return 1}if(Vl=Vt,Vt.type==="begin")return ji(Vt);if(Vt.type==="illegal"&&!Kn){const Ft=new Error('Illegal lexeme "'+Sn+'" for mode "'+(wn.scope||"<unnamed>")+'"');throw Ft.mode=wn,Ft}else if(Vt.type==="end"){const Ft=Lc(Vt);if(Ft!==Cr)return Ft}if(Vt.type==="illegal"&&Sn==="")return Ar+=`
`,1;if(yo>1e5&&yo>Vt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ar+=Sn,Sn.length}const Ki=ha(jt);if(!Ki)throw Ke(Dt.replace("{}",jt)),new Error('Unknown language: "'+jt+'"');const Fu=Pn(Ki);let dr="",wn=nr||Fu;const Fc={},Ei=new At.__emitter(At);Jf();let Ar="",Bc=0,Ga=0,yo=0,Pa=!1;try{if(Ki.__emitTokens)Ki.__emitTokens(an,Ei);else{for(wn.matcher.considerAll();;){yo++,Pa?Pa=!1:wn.matcher.considerAll(),wn.matcher.lastIndex=Ga;const Mt=wn.matcher.exec(an);if(!Mt)break;const Vt=an.substring(Ga,Mt.index),Sn=Wl(Vt,Mt);Ga=Mt.index+Sn}Wl(an.substring(Ga))}return Ei.finalize(),dr=Ei.toHTML(),{language:jt,value:dr,relevance:Bc,illegal:!1,_emitter:Ei,_top:wn}}catch(Mt){if(Mt.message&&Mt.message.includes("Illegal"))return{language:jt,value:Cn(an),illegal:!0,relevance:0,_illegalBy:{message:Mt.message,index:Ga,context:an.slice(Ga-100,Ga+100),mode:Mt.mode,resultSoFar:dr},_emitter:Ei};if(Tn)return{language:jt,value:Cn(an),illegal:!1,relevance:0,errorRaised:Mt,_emitter:Ei,_top:wn};throw Mt}}function Nr(jt){const an={value:Cn(jt),illegal:!1,relevance:0,_top:wt,_emitter:new At.__emitter(At)};return an._emitter.addText(jt),an}function Ii(jt,an){an=an||At.languages||Object.keys(se);const Kn=Nr(jt),nr=an.filter(ha).filter(Qf).map(Ms=>sr(Ms,jt,!1));nr.unshift(Kn);const gi=nr.sort((Ms,Rs)=>{if(Ms.relevance!==Rs.relevance)return Rs.relevance-Ms.relevance;if(Ms.language&&Rs.language){if(ha(Ms.language).supersetOf===Rs.language)return 1;if(ha(Rs.language).supersetOf===Ms.language)return-1}return 0}),[Ur,qo]=gi,ci=Ur;return ci.secondBest=qo,ci}function Ys(jt,an,Kn){const nr=an&&Le[an]||Kn;jt.classList.add("hljs"),jt.classList.add(`language-${nr}`)}function Ta(jt){let an=null;const Kn=On(jt);if(Bt(Kn))return;if(Ps("before:highlightElement",{el:jt,language:Kn}),jt.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",jt);return}if(jt.children.length>0&&(At.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(jt)),At.throwUnescapedHTML))throw new on("One of your code blocks includes unescaped HTML.",jt.innerHTML);an=jt;const nr=an.textContent,gi=Kn?en(nr,{language:Kn,ignoreIllegals:!0}):Ii(nr);jt.innerHTML=gi.value,jt.dataset.highlighted="yes",Ys(jt,Kn,gi.language),jt.result={language:gi.language,re:gi.relevance,relevance:gi.relevance},gi.secondBest&&(jt.secondBest={language:gi.secondBest.language,relevance:gi.secondBest.relevance}),Ps("after:highlightElement",{el:jt,result:gi,text:nr})}function $o(jt){At=bn(At,jt)}const Ss=()=>{zo(),nt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Wa(){zo(),nt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let fa=!1;function zo(){function jt(){zo()}if(document.readyState==="loading"){fa||window.addEventListener("DOMContentLoaded",jt,!1),fa=!0;return}document.querySelectorAll(At.cssSelector).forEach(Ta)}function vo(jt,an){let Kn=null;try{Kn=an(je)}catch(nr){if(Ke("Language definition for '{}' could not be registered.".replace("{}",jt)),Tn)Ke(nr);else throw nr;Kn=wt}Kn.name||(Kn.name=jt),se[jt]=Kn,Kn.rawDefinition=an.bind(null,je),Kn.aliases&&Dc(Kn.aliases,{languageName:jt})}function Ul(jt){delete se[jt];for(const an of Object.keys(Le))Le[an]===jt&&delete Le[an]}function Rc(){return Object.keys(se)}function ha(jt){return jt=(jt||"").toLowerCase(),se[jt]||se[Le[jt]]}function Dc(jt,{languageName:an}){typeof jt=="string"&&(jt=[jt]),jt.forEach(Kn=>{Le[Kn.toLowerCase()]=an})}function Qf(jt){const an=ha(jt);return an&&!an.disableAutodetect}function Xr(jt){jt["before:highlightBlock"]&&!jt["before:highlightElement"]&&(jt["before:highlightElement"]=an=>{jt["before:highlightBlock"](Object.assign({block:an.el},an))}),jt["after:highlightBlock"]&&!jt["after:highlightElement"]&&(jt["after:highlightElement"]=an=>{jt["after:highlightBlock"](Object.assign({block:an.el},an))})}function Zf(jt){Xr(jt),St.push(jt)}function Lu(jt){const an=St.indexOf(jt);an!==-1&&St.splice(an,1)}function Ps(jt,an){const Kn=jt;St.forEach(function(nr){nr[Kn]&&nr[Kn](an)})}function Hl(jt){return nt("10.7.0","highlightBlock will be removed entirely in v12.0"),nt("10.7.0","Please use highlightElement now."),Ta(jt)}Object.assign(je,{highlight:en,highlightAuto:Ii,highlightAll:zo,highlightElement:Ta,highlightBlock:Hl,configure:$o,initHighlighting:Ss,initHighlightingOnLoad:Wa,registerLanguage:vo,unregisterLanguage:Ul,listLanguages:Rc,getLanguage:ha,registerAliases:Dc,autoDetection:Qf,inherit:bn,addPlugin:Zf,removePlugin:Lu}),je.debugMode=function(){Tn=!1},je.safeMode=function(){Tn=!0},je.versionString=ir,je.regex={concat:y,lookahead:p,either:b,optional:v,anyNumberOfTimes:m};for(const jt in Ne)typeof Ne[jt]=="object"&&t(Ne[jt]);return Object.assign(je,Ne),je},zt=vn({});return zt.newInstance=()=>vn({}),uP=zt,zt.HighlightJS=zt,zt.default=zt,uP}var XWe=YWe();const Cle=qr(XWe);function Ale(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?Ale(n.children,r):{text:n.value,classes:r}})}function WW(t){return t.value||t.children||[]}function QWe(t){return!!Cle.getLanguage(t)}function KW({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return g4(t,s=>s.type.name===e).forEach(s=>{var o;let l=s.pos+1;const c=s.node.attrs.language||r,u=n.listLanguages(),d=c&&(u.includes(c)||QWe(c)||(o=n.registered)!=null&&o.call(n,c))?WW(n.highlight(c,s.node.textContent)):WW(n.highlightAuto(s.node.textContent));Ale(d).forEach(f=>{const p=l+f.text.length;if(f.classes.length){const m=oa.inline(l,p,{class:f.classes.join(" ")});i.push(m)}l=p})}),fi.create(t,i)}function ZWe(t){return typeof t=="function"}function JWe({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>ZWe(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Di({key:new Ns("lowlight"),state:{init:(i,{doc:s})=>KW({doc:s,name:t,lowlight:e,defaultLanguage:n}),apply:(i,s,o,l)=>{const c=o.selection.$head.parent.type.name,u=l.selection.$head.parent.type.name,d=g4(o.doc,p=>p.type.name===t),f=g4(l.doc,p=>p.type.name===t);return i.docChanged&&([c,u].includes(t)||f.length!==d.length||i.steps.some(p=>p.from!==void 0&&p.to!==void 0&&d.some(m=>m.pos>=p.from&&m.pos+m.node.nodeSize<=p.to)))?KW({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var eKe=pVe.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],JWe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});function tKe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},m=e.optional(i)+t.IDENT_RE+"\\s*\\(",v=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],E={type:y,keyword:v,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},A={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},P=[A,f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],O={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:P.concat([{begin:/\(/,end:/\)/,keywords:E,contains:P.concat(["self"]),relevance:0}]),relevance:0},k={className:"function",begin:"("+o+"[\\*&\\s]+)+"+m,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:E,relevance:0},{begin:m,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:E,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(O,k,A,P,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:E,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:E},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function nKe(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=tKe(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function rKe(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},s=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,i]};i.contains.push(l);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},p=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],m=t.SHEBANG({binary:`(${p.join("|")})`,relevance:10}),v={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},y=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],x=["true","false"],b={match:/(\/[a-z._-]+)+/},S=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],j=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],E=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],A=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:y,literal:x,built_in:[...S,...j,"set","shopt",...E,...A]},contains:[m,t.SHEBANG(),v,f,s,o,b,l,c,u,d,n]}}function iKe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},m=e.optional(i)+t.IDENT_RE+"\\s*\\(",x={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},b=[f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],S={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:x,contains:b.concat([{begin:/\(/,end:/\)/,keywords:x,contains:b.concat(["self"]),relevance:0}]),relevance:0},j={begin:"("+o+"[\\*&\\s]+)+"+m,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:x,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:x,relevance:0},{begin:m,returnBegin:!0,contains:[t.inherit(p,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:x,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:x,disableAutodetect:!0,illegal:"</",contains:[].concat(S,j,b,[f,{begin:t.IDENT_RE+"::",keywords:x},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:f,strings:u,keywords:x}}}function sKe(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},m=e.optional(i)+t.IDENT_RE+"\\s*\\(",v=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],x=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],E={type:y,keyword:v,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:x},A={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},P=[A,f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],O={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:P.concat([{begin:/\(/,end:/\)/,keywords:E,contains:P.concat(["self"]),relevance:0}]),relevance:0},k={className:"function",begin:"("+o+"[\\*&\\s]+)+"+m,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:E,relevance:0},{begin:m,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:E,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(O,k,A,P,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:E,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:E},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function aKe(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:i.concat(s),built_in:e,literal:r},l=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=t.inherit(d,{illegal:/\n/}),p={className:"subst",begin:/\{/,end:/\}/,keywords:o},m=t.inherit(p,{illegal:/\n/}),v={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,m]},y={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]},x=t.inherit(y,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]});p.contains=[y,v,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.C_BLOCK_COMMENT_MODE],m.contains=[x,v,f,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const b={variants:[u,y,v,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},S={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},j=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",E={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},b,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,S,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,S,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+j+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,S],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[b,c,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},E]}}const oKe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),lKe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],cKe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],uKe=[...lKe,...cKe],dKe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),fKe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),hKe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),pKe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function mKe(t){const e=t.regex,n=oKe(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+fKe.join("|")+")"},{begin:":(:)?("+hKe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+pKe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:dKe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+uKe.join("|")+")\\b"}]}}function gKe(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function vKe(t){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function yKe(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function xKe(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[r,s,i,o,n,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,f=e.either(c,u,d),p=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:p,className:"attr",starts:{end:/$/,contains:[r,l,s,i,o,n]}}]}}var Ov="[0-9](_*[0-9])*",j2=`\\.(${Ov})`,E2="[0-9a-fA-F](_*[0-9a-fA-F])*",GW={className:"number",variants:[{begin:`(\\b(${Ov})((${j2})|\\.)?|(${j2}))[eE][+-]?(${Ov})[fFdD]?\\b`},{begin:`\\b(${Ov})((${j2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${j2})[fFdD]?\\b`},{begin:`\\b(${Ov})[fFdD]\\b`},{begin:`\\b0[xX]((${E2})\\.?|(${E2})?\\.(${E2}))[pP][+-]?(${Ov})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${E2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function kle(t,e,n){return n===-1?"":t.replace(e,r=>kle(t,e,n-1))}function bKe(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+kle("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),c={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},u={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:c,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[d,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:c,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,GW,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},GW,u]}}const YW="[A-Za-z$_][0-9A-Za-z$_]*",wKe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],NKe=["true","false","null","undefined","NaN","Infinity"],Tle=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Ole=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ple=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],SKe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],jKe=[].concat(Ple,Tle,Ole);function EKe(t){const e=t.regex,n=(V,{after:Y})=>{const re="</"+V[0].slice(1);return V.input.indexOf(re,Y)!==-1},r=YW,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,Y)=>{const re=V[0].length+V.index,Q=V.input[re];if(Q==="<"||Q===","){Y.ignoreMatch();return}Q===">"&&(n(V,{after:re})||Y.ignoreMatch());let F;const G=V.input.substring(re);if(F=G.match(/^\s*=/)){Y.ignoreMatch();return}if((F=G.match(/^\s+extends\s+/))&&F.index===0){Y.ignoreMatch();return}}},l={$pattern:YW,keyword:wKe,literal:NKe,built_in:jKe,"variable.language":SKe},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},m={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},v={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},S={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},j=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,m,v,y,x,{match:/\$\d+/},f];p.contains=j.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(j)});const E=[].concat(S,p.contains),A=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(E)}]),P={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A},O={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},k={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Tle,...Ole]}},C={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},I={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[P],illegal:/%/},R={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(V){return e.concat("(?!",V.join("|"),")")}const L={match:e.concat(/\b/,D([...Ple,"super","import"].map(V=>`${V}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},W={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},P]},X="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",q={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(X)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[P]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:A,CLASS_REFERENCE:k},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),C,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,m,v,y,x,S,{match:/\$\d+/},f,k,{scope:"attr",match:r+e.lookahead(":"),relevance:0},q,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[S,t.REGEXP_MODE,{className:"function",begin:X,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},I,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[P,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[P]},L,R,O,W,{match:/\$[(.]/}]}}function _Ke(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,i,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Pv="[0-9](_*[0-9])*",_2=`\\.(${Pv})`,C2="[0-9a-fA-F](_*[0-9a-fA-F])*",CKe={className:"number",variants:[{begin:`(\\b(${Pv})((${_2})|\\.)?|(${_2}))[eE][+-]?(${Pv})[fFdD]?\\b`},{begin:`\\b(${Pv})((${_2})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${_2})[fFdD]?\\b`},{begin:`\\b(${Pv})[fFdD]\\b`},{begin:`\\b0[xX]((${C2})\\.?|(${C2})?\\.(${C2}))[pP][+-]?(${Pv})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${C2})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function AKe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(o);const l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(o,{className:"string"}),"self"]}]},u=CKe,d=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},p=f;return p.variants[1].contains=[f],f.variants[1].contains=[p],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,d,n,r,l,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,t.C_LINE_COMMENT_MODE,d],relevance:0},t.C_LINE_COMMENT_MODE,d,l,c,o,t.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,c]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}const kKe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),TKe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],OKe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],PKe=[...TKe,...OKe],MKe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Mle=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Rle=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),RKe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),DKe=Mle.concat(Rle).sort().reverse();function IKe(t){const e=kKe(t),n=DKe,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",o=[],l=[],c=function(j){return{className:"string",begin:"~?"+j+".*?"+j}},u=function(j,E,A){return{className:j,begin:E,relevance:A}},d={$pattern:/[a-z-]+/,keyword:r,attribute:MKe.join(" ")},f={begin:"\\(",end:"\\)",contains:l,keywords:d,relevance:0};l.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,c("'"),c('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,f,u("variable","@@?"+i,10),u("variable","@\\{"+i+"\\}"),u("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const p=l.concat({begin:/\{/,end:/\}/,contains:o}),m={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(l)},v={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+RKe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:l}}]},y={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:l,relevance:0}},x={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:p}},b={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,m,u("keyword","all\\b"),u("variable","@\\{"+i+"\\}"),{begin:"\\b("+PKe.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,u("selector-tag",s,0),u("selector-id","#"+s),u("selector-class","\\."+s,0),u("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Mle.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Rle.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:p},{begin:"!important"},e.FUNCTION_DISPATCH]},S={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[b]};return o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,y,x,S,v,b,m,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function LKe(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function FKe(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},i={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,i,s,o]}}function BKe(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(u,{contains:[]}),p=t.inherit(d,{contains:[]});u.contains.push(p),d.contains.push(f);let m=[n,c];return[u,d,f,p].forEach(b=>{b.contains=b.contains.concat(m)}),m=m.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:m},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:m}]}]},n,s,u,d,{className:"quote",begin:"^>\\s+",contains:m,end:"$"},i,r,c,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function $Ke(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function zKe(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,s,c],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],p=(y,x,b="\\1")=>{const S=b==="\\1"?b:e.concat(b,x);return e.concat(e.concat("(?:",y,")"),x,/(?:\\.|[^\\\/])*?/,S,/(?:\\.|[^\\\/])*?/,b,r)},m=(y,x,b)=>e.concat(e.concat("(?:",y,")"),x,/(?:\\.|[^\\\/])*?/,b,r),v=[c,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:p("s|tr|y",e.either(...f,{capture:!0}))},{begin:p("s|tr|y","\\(","\\)")},{begin:p("s|tr|y","\\[","\\]")},{begin:p("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:m("(?:m|qr)?",/\//,/\//)},{begin:m("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:m("m|qr",/\(/,/\)/)},{begin:m("m|qr",/\[/,/\]/)},{begin:m("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=v,o.contains=v,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:v}}function qKe(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=e.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+r},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},c={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=t.inherit(t.APOS_STRING_MODE,{illegal:null}),d=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(c)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(c),"on:begin":(z,W)=>{W.data._beginMatch=z[1]||z[2]},"on:end":(z,W)=>{W.data._beginMatch!==z[1]&&W.ignoreMatch()}},p=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),m=`[ 	
]`,v={scope:"string",variants:[d,u,f,p]},y={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},x=["false","null","true"],b=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],S=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],E={keyword:b,literal:(z=>{const W=[];return z.forEach(X=>{W.push(X),X.toLowerCase()===X?W.push(X.toUpperCase()):W.push(X.toLowerCase())}),W})(x),built_in:S},A=z=>z.map(W=>W.replace(/\|\d+$/,"")),P={variants:[{match:[/new/,e.concat(m,"+"),e.concat("(?!",A(S).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},O=e.concat(r,"\\b(?!\\()"),k={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),O],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),O],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},C={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},I={relevance:0,begin:/\(/,end:/\)/,keywords:E,contains:[C,o,k,t.C_BLOCK_COMMENT_MODE,v,y,P]},R={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",A(b).join("\\b|"),"|",A(S).join("\\b|"),"\\b)"),r,e.concat(m,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[I]};I.contains.push(R);const D=[C,k,t.C_BLOCK_COMMENT_MODE,v,y,P],L={begin:e.concat(/#\[\s*\\?/,e.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:x,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:x,keyword:["new","array"]},contains:["self",...D]},...D,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:E,contains:[L,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},o,R,k,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},P,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:E,contains:["self",L,o,k,t.C_BLOCK_COMMENT_MODE,v,y]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},v,y]}}function UKe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function HKe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function VKe(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},d={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",m=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,v=`\\b|${r.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${m}))[eE][+-]?(${p})[jJ]?(?=${v})`},{begin:`(${m})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${v})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${v})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${v})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${v})`},{begin:`\\b(${p})[jJ](?=${v})`}]},x={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,y,f,t.HASH_COMMENT_MODE]}]};return u.contains=[f,y,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,x,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,b,f]}]}}function WKe(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function KKe(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function GKe(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[l]}),t.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:o},f={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},p="[1-9](_?[0-9])*|0",m="[0-9](_?[0-9])*",v={className:"number",relevance:0,variants:[{begin:`\\b(${p})(\\.(${m}))?([eE][+-]?(${m})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},y={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},P=[f,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:o},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},v,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=P,y.contains=P;const I=[{begin:/^\s*=>/,starts:{end:"$",contains:P}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:P}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(I).concat(u).concat(P)}}function YKe(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),i=e.concat(n,t.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:l,literal:c,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},s]}}const XKe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),QKe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ZKe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],JKe=[...QKe,...ZKe],eGe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),tGe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),nGe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),rGe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function iGe(t){const e=XKe(t),n=nGe,r=tGe,i="@[a-z-]+",s="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+JKe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+rGe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:eGe.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function sGe(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function aGe(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],p=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],m=d,v=[...u,...c].filter(A=>!d.includes(A)),y={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},x={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},b={match:e.concat(/\b/,e.either(...m),/\s*\(/),relevance:0,keywords:{built_in:m}};function S(A){return e.concat(/\b/,e.either(...A.map(P=>P.replace(/\s+/,"\\s+"))),/\b/)}const j={scope:"keyword",match:S(p),relevance:0};function E(A,{exceptions:P,when:O}={}){const k=O;return P=P||[],A.map(C=>C.match(/\|\d+$/)||P.includes(C)?C:k(C)?`${C}|0`:C)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:E(v,{when:A=>A.length<3}),literal:s,type:l,built_in:f},contains:[{scope:"type",match:S(o)},j,b,y,r,i,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,x]}}function Dle(t){return t?typeof t=="string"?t:t.source:null}function hb(t){return ai("(?=",t,")")}function ai(...t){return t.map(n=>Dle(n)).join("")}function oGe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Co(...t){return"("+(oGe(t).capture?"":"?:")+t.map(r=>Dle(r)).join("|")+")"}const k3=t=>ai(/\b/,t,/\w$/.test(t)?/\b/:/\B/),lGe=["Protocol","Type"].map(k3),XW=["init","self"].map(k3),cGe=["Any","Self"],dP=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],QW=["false","nil","true"],uGe=["assignment","associativity","higherThan","left","lowerThan","none","right"],dGe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],ZW=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Ile=Co(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Lle=Co(Ile,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),fP=ai(Ile,Lle,"*"),Fle=Co(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),Oj=Co(Fle,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),td=ai(Fle,Oj,"*"),A2=ai(/[A-Z]/,Oj,"*"),fGe=["attached","autoclosure",ai(/convention\(/,Co("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",ai(/objc\(/,td,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],hGe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function pGe(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],i={match:[/\./,Co(...lGe,...XW)],className:{2:"keyword"}},s={match:ai(/\./,Co(...dP)),relevance:0},o=dP.filter(Re=>typeof Re=="string").concat(["_|0"]),l=dP.filter(Re=>typeof Re!="string").concat(cGe).map(k3),c={variants:[{className:"keyword",match:Co(...l,...XW)}]},u={$pattern:Co(/\b\w+/,/#\w+/),keyword:o.concat(dGe),literal:QW},d=[i,s,c],f={match:ai(/\./,Co(...ZW)),relevance:0},p={className:"built_in",match:ai(/\b/,Co(...ZW),/(?=\()/)},m=[f,p],v={match:/->/,relevance:0},y={className:"operator",relevance:0,variants:[{match:fP},{match:`\\.(\\.|${Lle})+`}]},x=[v,y],b="([0-9]_*)+",S="([0-9a-fA-F]_*)+",j={className:"number",relevance:0,variants:[{match:`\\b(${b})(\\.(${b}))?([eE][+-]?(${b}))?\\b`},{match:`\\b0x(${S})(\\.(${S}))?([pP][+-]?(${b}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},E=(Re="")=>({className:"subst",variants:[{match:ai(/\\/,Re,/[0\\tnr"']/)},{match:ai(/\\/,Re,/u\{[0-9a-fA-F]{1,8}\}/)}]}),A=(Re="")=>({className:"subst",match:ai(/\\/,Re,/[\t ]*(?:[\r\n]|\r\n)/)}),P=(Re="")=>({className:"subst",label:"interpol",begin:ai(/\\/,Re,/\(/),end:/\)/}),O=(Re="")=>({begin:ai(Re,/"""/),end:ai(/"""/,Re),contains:[E(Re),A(Re),P(Re)]}),k=(Re="")=>({begin:ai(Re,/"/),end:ai(/"/,Re),contains:[E(Re),P(Re)]}),C={className:"string",variants:[O(),O("#"),O("##"),O("###"),k(),k("#"),k("##"),k("###")]},I=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],R={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:I},D=Re=>{const dt=ai(Re,/\//),et=ai(/\//,Re);return{begin:dt,end:et,contains:[...I,{scope:"comment",begin:`#(?!.*${et})`,end:/$/}]}},L={scope:"regexp",variants:[D("###"),D("##"),D("#"),R]},z={match:ai(/`/,td,/`/)},W={className:"variable",match:/\$\d+/},X={className:"variable",match:`\\$${Oj}+`},q=[z,W,X],V={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:hGe,contains:[...x,j,C]}]}},Y={scope:"keyword",match:ai(/@/,Co(...fGe),hb(Co(/\(/,/\s+/)))},re={scope:"meta",match:ai(/@/,td)},Q=[V,Y,re],F={match:hb(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:ai(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,Oj,"+")},{className:"type",match:A2,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:ai(/\s+&\s+/,hb(A2)),relevance:0}]},G={begin:/</,end:/>/,keywords:u,contains:[...r,...d,...Q,v,F]};F.contains.push(G);const te={match:ai(td,/\s*:/),keywords:"_|0",relevance:0},le={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",te,...r,L,...d,...m,...x,j,C,...q,...Q,F]},he={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,F]},me={begin:Co(hb(ai(td,/\s*:/)),hb(ai(td,/\s+/,td,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:td}]},xe={begin:/\(/,end:/\)/,keywords:u,contains:[me,...r,...d,...x,j,C,...Q,F,le],endsParent:!0,illegal:/["']/},de={match:[/(func|macro)/,/\s+/,Co(z.match,td,fP)],className:{1:"keyword",3:"title.function"},contains:[he,xe,e],illegal:[/\[/,/%/]},Ne={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[he,xe,e],illegal:/\[|%/},Ce={match:[/operator/,/\s+/,fP],className:{1:"keyword",3:"title"}},ae={begin:[/precedencegroup/,/\s+/,A2],className:{1:"keyword",3:"title"},contains:[F],keywords:[...uGe,...QW],end:/}/},Pe={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},J={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ne={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,td,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:u,contains:[he,...d,{begin:/:/,end:/\{/,keywords:u,contains:[{scope:"title.class.inherited",match:A2},...d],relevance:0}]};for(const Re of C.variants){const dt=Re.contains.find(Ve=>Ve.label==="interpol");dt.keywords=u;const et=[...d,...m,...x,j,C,...q];dt.contains=[...et,{begin:/\(/,end:/\)/,contains:["self",...et]}]}return{name:"Swift",keywords:u,contains:[...r,de,Ne,Pe,J,ne,Ce,ae,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},L,...d,...m,...x,j,C,...q,...Q,F,le]}}const Pj="[A-Za-z$_][0-9A-Za-z$_]*",Ble=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],$le=["true","false","null","undefined","NaN","Infinity"],zle=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],qle=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ule=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Hle=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Vle=[].concat(Ule,zle,qle);function mGe(t){const e=t.regex,n=(V,{after:Y})=>{const re="</"+V[0].slice(1);return V.input.indexOf(re,Y)!==-1},r=Pj,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,Y)=>{const re=V[0].length+V.index,Q=V.input[re];if(Q==="<"||Q===","){Y.ignoreMatch();return}Q===">"&&(n(V,{after:re})||Y.ignoreMatch());let F;const G=V.input.substring(re);if(F=G.match(/^\s*=/)){Y.ignoreMatch();return}if((F=G.match(/^\s+extends\s+/))&&F.index===0){Y.ignoreMatch();return}}},l={$pattern:Pj,keyword:Ble,literal:$le,built_in:Vle,"variable.language":Hle},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},m={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},v={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},x={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},S={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},j=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,m,v,y,x,{match:/\$\d+/},f];p.contains=j.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(j)});const E=[].concat(S,p.contains),A=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(E)}]),P={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A},O={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},k={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...zle,...qle]}},C={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},I={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[P],illegal:/%/},R={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(V){return e.concat("(?!",V.join("|"),")")}const L={match:e.concat(/\b/,D([...Ule,"super","import"].map(V=>`${V}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},z={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},W={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},P]},X="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",q={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(X)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[P]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:A,CLASS_REFERENCE:k},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),C,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,m,v,y,x,S,{match:/\$\d+/},f,k,{scope:"attr",match:r+e.lookahead(":"),relevance:0},q,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[S,t.REGEXP_MODE,{className:"function",begin:X,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:A}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},I,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[P,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},z,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[P]},L,R,O,W,{match:/\$[(.]/}]}}function gGe(t){const e=t.regex,n=mGe(t),r=Pj,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:Pj,keyword:Ble.concat(c),literal:$le,built_in:Vle.concat(i),"variable.language":Hle},d={className:"meta",begin:"@"+r},f=(y,x,b)=>{const S=y.contains.findIndex(j=>j.label===x);if(S===-1)throw new Error("can not find mode to replace");y.contains.splice(S,1,b)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(d);const p=n.contains.find(y=>y.scope==="attr"),m=Object.assign({},p,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,p,m]),n.contains=n.contains.concat([d,s,o,m]),f(n,"shebang",t.SHEBANG()),f(n,"use_strict",l);const v=n.contains.find(y=>y.label==="func.def");return v.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function vGe(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,i),/ *#/)},{begin:e.concat(/# */,l,/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,e.either(s,i),/ +/,e.either(o,l),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},f=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),p=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,c,u,d,f,p,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[p]}]}}function yGe(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,o,i,t.QUOTE_STRING_MODE,c,u,l]}}function xGe(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=t.inherit(s,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,l,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,c,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function bGe(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},l=t.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),p={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},m={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},v={begin:/\{/,end:/\}/,contains:[m],illegal:"\\n",relevance:0},y={begin:"\\[",end:"\\]",contains:[m],illegal:"\\n",relevance:0},x=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},v,y,s,o],b=[...x];return b.pop(),b.push(l),m.contains=b,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:x}}const wGe={arduino:nKe,bash:rKe,c:iKe,cpp:sKe,csharp:aKe,css:mKe,diff:gKe,go:vKe,graphql:yKe,ini:xKe,java:bKe,javascript:EKe,json:_Ke,kotlin:AKe,less:IKe,lua:LKe,makefile:FKe,markdown:BKe,objectivec:$Ke,perl:zKe,php:qKe,"php-template":UKe,plaintext:HKe,python:VKe,"python-repl":WKe,r:KKe,ruby:GKe,rust:YKe,scss:iGe,shell:sGe,sql:aGe,swift:pGe,typescript:gGe,vbnet:vGe,wasm:yGe,xml:xGe,yaml:bGe},JW={},NGe="hljs-";function SGe(t){const e=Cle.newInstance();return t&&s(t),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:o,registered:l};function n(c,u,d){const f=d||JW,p=typeof f.prefix=="string"?f.prefix:NGe;if(!e.getLanguage(c))throw new Error("Unknown language: `"+c+"` is not registered");e.configure({__emitter:jGe,classPrefix:p});const m=e.highlight(u,{ignoreIllegals:!0,language:c});if(m.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:m.errorRaised});const v=m._emitter.root,y=v.data;return y.language=m.language,y.relevance=m.relevance,v}function r(c,u){const f=(u||JW).subset||i();let p=-1,m=0,v;for(;++p<f.length;){const y=f[p];if(!e.getLanguage(y))continue;const x=n(y,c,u);x.data&&x.data.relevance!==void 0&&x.data.relevance>m&&(m=x.data.relevance,v=x)}return v||{type:"root",children:[],data:{language:void 0,relevance:m}}}function i(){return e.listLanguages()}function s(c,u){if(typeof c=="string")e.registerLanguage(c,u);else{let d;for(d in c)Object.hasOwn(c,d)&&e.registerLanguage(d,c[d])}}function o(c,u){if(typeof c=="string")e.registerAliases(typeof u=="string"?u:[...u],{languageName:c});else{let d;for(d in c)if(Object.hasOwn(c,d)){const f=c[d];e.registerAliases(typeof f=="string"?f:[...f],{languageName:d})}}}function l(c){return!!e.getLanguage(c)}}class jGe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(o,l){return l?o+"_".repeat(l):n.options.classPrefix+o}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}var O4,P4;if(typeof WeakMap<"u"){let t=new WeakMap;O4=e=>t.get(e),P4=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;O4=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},P4=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var xs=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==n;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:l,top:c,bottom:u}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,c),right:Math.max(r,l),bottom:Math.max(s,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const l=(t+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(t){return O4(t)||P4(t,EGe(t))}};function EGe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=_Ge(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let u=0,d=e*n;u<d;u++)r[u]=0;for(let u=0,d=0;u<n;u++){const f=t.child(u);d++;for(let v=0;;v++){for(;i<r.length&&r[i]!=0;)i++;if(v==f.childCount)break;const y=f.child(v),{colspan:x,rowspan:b,colwidth:S}=y.attrs;for(let j=0;j<b;j++){if(j+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:b-j});break}const E=i+j*e;for(let A=0;A<x;A++){r[E+A]==0?r[E+A]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:x-A});const P=S&&S[A];if(P){const O=(E+A)%e*2,k=o[O];k==null||k!=P&&o[O+1]==1?(o[O]=P,o[O+1]=1):k==P&&o[O+1]++}}}i+=x,d+=y.nodeSize}const p=(u+1)*e;let m=0;for(;i<p;)r[i++]==0&&m++;m&&(s||(s=[])).push({type:"missing",row:u,n:m}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const l=new xs(e,n,r,s);let c=!1;for(let u=0;!c&&u<o.length;u+=2)o[u]!=null&&o[u+1]<n&&(c=!0);return c&&CGe(l,o,t),l}function _Ge(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const l=t.child(o);for(let c=0;c<l.childCount;c++){const u=l.child(c);o+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function CGe(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null;const c=o.attrs;for(let u=0;u<c.colspan;u++){const d=(i+u)%t.width,f=e[d*2];f!=null&&(!c.colwidth||c.colwidth[u]!=f)&&((l||(l=AGe(c)))[u]=f)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function AGe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function po(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Wh=new Ns("selectingCells");function bx(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function kGe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Du(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function M_(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=bx(e.$head)||TGe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function TGe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function M4(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function OGe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function T3(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Wle(t,e,n){const r=t.node(-1),i=xs.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function mg(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Kle(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function PGe(t,e,n){const r=po(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Ni=class yf extends Ln{constructor(e,n=e){const r=e.node(-1),i=xs.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),l=e.node(0),c=i.cellsInRect(o).filter(d=>d!=n.pos-s);c.unshift(n.pos-s);const u=c.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const p=s+d+1;return new bae(l.resolve(p),l.resolve(p+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(M4(r)&&M4(i)&&T3(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?yf.rowSelection(r,i):s&&this.isColSelection()?yf.colSelection(r,i):new yf(r,i)}return En.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=xs.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let c=i.top;c<i.bottom;c++){const u=[];for(let d=c*n.width+i.left,f=i.left;f<i.right;f++,d++){const p=n.map[d];if(s[p])continue;s[p]=!0;const m=n.findCell(p);let v=e.nodeAt(p);if(!v)throw RangeError(`No cell with offset ${p} found`);const y=i.left-m.left,x=m.right-i.right;if(y>0||x>0){let b=v.attrs;if(y>0&&(b=mg(b,0,y)),x>0&&(b=mg(b,b.colspan-x,x)),m.left<i.left){if(v=v.type.createAndFill(b),!v)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else v=v.type.create(b,v.content)}if(m.top<i.top||m.bottom>i.bottom){const b={...v.attrs,rowspan:Math.min(m.bottom,i.bottom)-Math.max(m.top,i.top)};m.top<i.top?v=v.type.createAndFill(b):v=v.type.create(b,v.content)}u.push(v)}o.push(e.child(c).copy(pt.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:o;return new qt(pt.from(l),1,1)}replace(e,n=qt.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:l,$to:c}=i[o],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(c.pos),o?qt.empty:n)}const s=Ln.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new qt(pt.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=xs.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=xs.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.top<=l.top?(o.top>0&&(e=c.resolve(s+i.map[o.left])),l.bottom<i.height&&(n=c.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=c.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=c.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new yf(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=xs.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(e){return e instanceof yf&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=xs.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.left<=l.left?(o.left>0&&(e=c.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(n=c.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=c.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=c.resolve(s+i.map[i.width*(o.top+1)-1]))),new yf(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new yf(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new yf(e.resolve(n),e.resolve(r))}getBookmark(){return new MGe(this.$anchorCell.pos,this.$headCell.pos)}};Ni.prototype.visible=!1;Ln.jsonID("cell",Ni);var MGe=class Gle{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Gle(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&T3(n,r)?new Ni(n,r):Ln.near(r,1)}};function RGe(t){if(!(t.selection instanceof Ni))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(oa.node(r,r+n.nodeSize,{class:"selectedCell"}))}),fi.create(t.doc,e)}function DGe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function IGe({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function LGe(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof Nn&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Ni.create(i,r.from);else if(o=="row"){const l=i.resolve(r.from+1);s=Ni.rowSelection(l,l)}else if(!n){const l=xs.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];s=Ni.create(i,c+1,u)}}else r instanceof En&&DGe(r)?s=En.create(i,r.from):r instanceof En&&IGe(r)&&(s=En.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var FGe=new Ns("fix-tables");function Yle(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){const c=e.child(o);for(let u=l,d=Math.min(i,o+3);u<d;u++)if(t.child(u)==c){l=u+1,n+=c.nodeSize;continue e}r(c,n),l<i&&t.child(l).sameMarkup(c)?Yle(t.child(l),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function Xle(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=BGe(t,i,s,n))};return e?e.doc!=t.doc&&Yle(e.doc,t.doc,0,r):t.doc.descendants(r),n}function BGe(t,e,n,r){const i=xs.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let c=0;c<i.height;c++)s.push(0);for(let c=0;c<i.problems.length;c++){const u=i.problems[c];if(u.type=="collision"){const d=e.nodeAt(u.pos);if(!d)continue;const f=d.attrs;for(let p=0;p<f.rowspan;p++)s[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,mg(f,f.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let o,l;for(let c=0;c<s.length;c++)s[c]&&(o==null&&(o=c),l=c);for(let c=0,u=n+1;c<i.height;c++){const d=e.child(c),f=u+d.nodeSize,p=s[c];if(p>0){let m="cell";d.firstChild&&(m=d.firstChild.type.spec.tableRole);const v=[];for(let x=0;x<p;x++){const b=po(t.schema)[m].createAndFill();b&&v.push(b)}const y=(c==0||o==c-1)&&l==c?u+1:f-1;r.insert(r.mapping.map(y),v)}u=f}return r.setMeta(FGe,{fixTables:!0})}function Rd(t){const e=t.selection,n=M_(t),r=n.node(-1),i=n.start(-1),s=xs.get(r);return{...e instanceof Ni?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function Qle(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;PGe(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,Kle(u.attrs,i-e.colCount(c))),o+=u.attrs.rowspan-1}else{const c=s==null?po(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,u=e.positionAt(o,i,r);t.insert(t.mapping.map(n+u),c.createAndFill())}}return t}function $Ge(t,e){if(!Du(t))return!1;if(e){const n=Rd(t);e(Qle(t.tr,n,n.left))}return!0}function zGe(t,e){if(!Du(t))return!1;if(e){const n=Rd(t);e(Qle(t.tr,n,n.right))}return!0}function qGe(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const l=o*e.width+i,c=e.map[l],u=n.nodeAt(c),d=u.attrs;if(i>0&&e.map[l-1]==c||i<e.width-1&&e.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,mg(d,i-e.colCount(c)));else{const f=t.mapping.slice(s).map(r+c);t.delete(f,f+u.nodeSize)}o+=d.rowspan}}function UGe(t,e){if(!Du(t))return!1;if(e){const n=Rd(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;qGe(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=xs.get(s)}e(r)}return!0}function HGe(t,e,n){var r;const i=po(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function Zle(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let u=0;u<i;u++)o+=r.child(u).nodeSize;const l=[];let c=i>0?-1:0;HGe(e,r,i+c)&&(c=i==0||i==e.height?null:0);for(let u=0,d=e.width*i;u<e.width;u++,d++)if(i>0&&i<e.height&&e.map[d]==e.map[d-e.width]){const f=e.map[d],p=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,{...p,rowspan:p.rowspan+1}),u+=p.colspan-1}else{const f=c==null?po(r.type.schema).cell:(s=r.nodeAt(e.map[d+c*e.width]))==null?void 0:s.type,p=f?.createAndFill();p&&l.push(p)}return t.insert(o,po(r.type.schema).row.create(null,l)),t}function VGe(t,e){if(!Du(t))return!1;if(e){const n=Rd(t);e(Zle(t.tr,n,n.top))}return!0}function WGe(t,e){if(!Du(t))return!1;if(e){const n=Rd(t);e(Zle(t.tr,n,n.bottom))}return!0}function KGe(t,{map:e,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const o=s+n.child(i).nodeSize,l=t.mapping.maps.length;t.delete(s+r,o+r);const c=new Set;for(let u=0,d=i*e.width;u<e.width;u++,d++){const f=e.map[d];if(!c.has(f)){if(c.add(f),i>0&&f==e.map[d-e.width]){const p=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(l).map(f+r),null,{...p,rowspan:p.rowspan-1}),u+=p.colspan-1}else if(i<e.height&&f==e.map[d+e.width]){const p=n.nodeAt(f),m=p.attrs,v=p.type.create({...m,rowspan:p.attrs.rowspan-1},p.content),y=e.positionAt(i+1,u,n);t.insert(t.mapping.slice(l).map(r+y),v),u+=m.colspan-1}}}}function GGe(t,e){if(!Du(t))return!1;if(e){const n=Rd(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;KGe(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=xs.get(n.table)}e(r)}return!0}function eK(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function YGe({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,l=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[l]==n[l+1])return!0;s+=t,l+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function tK(t,e){const n=t.selection;if(!(n instanceof Ni)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Rd(t),{map:i}=r;if(YGe(i,r))return!1;if(e){const s=t.tr,o={};let l=pt.empty,c,u;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const p=i.map[d*i.width+f],m=r.table.nodeAt(p);if(!(o[p]||!m))if(o[p]=!0,c==null)c=p,u=m;else{eK(m)||(l=l.append(m.content));const v=s.mapping.map(p+r.tableStart);s.delete(v,v+m.nodeSize)}}if(c==null||u==null)return!0;if(s.setNodeMarkup(c+r.tableStart,null,{...Kle(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const d=c+1+u.content.size,f=eK(u)?c+1:d;s.replaceWith(f+r.tableStart,d+r.tableStart,l)}s.setSelection(new Ni(s.doc.resolve(c+r.tableStart))),e(s)}return!0}function nK(t,e){const n=po(t.schema);return XGe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function XGe(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof Ni){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=kGe(i.$from),!s)return!1;o=(r=bx(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let l=s.attrs;const c=[],u=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const d=Rd(e),f=e.tr;for(let m=0;m<d.right-d.left;m++)c.push(u?{...l,colwidth:u&&u[m]?[u[m]]:null}:l);let p;for(let m=d.top;m<d.bottom;m++){let v=d.map.positionAt(m,d.left,d.table);m==d.top&&(v+=s.nodeSize);for(let y=d.left,x=0;y<d.right;y++,x++)y==d.left&&m==d.top||f.insert(p=f.mapping.map(v+d.tableStart,1),t({node:s,row:m,col:y}).createAndFill(c[x]))}f.setNodeMarkup(o,t({node:s,row:d.top,col:d.left}),c[0]),i instanceof Ni&&f.setSelection(new Ni(f.doc.resolve(i.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function QGe(t,e){return function(n,r){if(!Du(n))return!1;const i=M_(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof Ni?n.selection.forEachCell((o,l)=>{o.attrs[t]!==e&&s.setNodeMarkup(l,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function ZGe(t){return function(e,n){if(!Du(e))return!1;if(n){const r=po(e.schema),i=Rd(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(c=>i.table.nodeAt(c));for(let c=0;c<o.length;c++)l[c].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[c],r.cell,l[c].attrs);if(s.steps.length==0)for(let c=0;c<o.length;c++)s.setNodeMarkup(i.tableStart+o[c],r.header_cell,l[c].attrs);n(s)}return!0}}function rK(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function p1(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?ZGe(t):function(n,r){if(!Du(n))return!1;if(r){const i=po(n.schema),s=Rd(n),o=n.tr,l=rK("row",s,i),c=rK("column",s,i),d=(t==="column"?l:t==="row"?c:!1)?1:0,f=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,p=t=="column"?c?i.cell:i.header_cell:t=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(f).forEach(m=>{const v=m+s.tableStart,y=o.doc.nodeAt(v);y&&o.setNodeMarkup(v,p,y.attrs)}),r(o)}return!0}}p1("row",{useDeprecatedLogic:!0});p1("column",{useDeprecatedLogic:!0});var JGe=p1("cell",{useDeprecatedLogic:!0});function eYe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function iK(t){return function(e,n){if(!Du(e))return!1;const r=eYe(M_(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(En.between(i,OGe(i))).scrollIntoView())}return!0}}function tYe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function k2(t,e){const n=t.selection;if(!(n instanceof Ni))return!1;if(e){const r=t.tr,i=po(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new qt(i,0,0))}),r.docChanged&&e(r)}return!0}function nYe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let c=0;c<e.childCount;c++){let u=e.child(c).content;const d=c?0:Math.max(0,n-1),f=c<e.childCount-1?0:Math.max(0,r-1);(d||f)&&(u=R4(po(o).row,new qt(u,d,f)).content),l.push(u)}else if(s=="cell"||s=="header_cell")l.push(n||r?R4(po(o).row,new qt(e,n,r)).content:e);else return null;return rYe(o,l)}function rYe(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:l,colspan:c}=s.child(o).attrs;for(let u=i;u<i+l;u++)n[u]=(n[u]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(pt.empty),n[i]<r){const s=po(t).cell.createAndFill(),o=[];for(let l=n[i];l<r;l++)o.push(s);e[i]=e[i].append(pt.from(o))}return{height:e.length,width:r,rows:e}}function R4(t,e){const n=t.createAndFill();return new $L(n).replace(0,n.content.size,e).doc}function iYe({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let l=0;l<n.length;l++){const c=n[l],u=[];for(let d=s[l]||0,f=0;d<r;f++){let p=c.child(f%c.childCount);d+p.attrs.colspan>r&&(p=p.type.createChecked(mg(p.attrs,p.attrs.colspan,d+p.attrs.colspan-r),p.content)),u.push(p),d+=p.attrs.colspan;for(let m=1;m<p.attrs.rowspan;m++)s[l+m]=(s[l+m]||0)+p.attrs.colspan}o.push(pt.from(u))}n=o,t=r}if(e!=i){const s=[];for(let o=0,l=0;o<i;o++,l++){const c=[],u=n[l%e];for(let d=0;d<u.childCount;d++){let f=u.child(d);o+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),c.push(f)}s.push(pt.from(c))}n=s,e=i}return{width:t,height:e,rows:n}}function sYe(t,e,n,r,i,s,o){const l=t.doc.type.schema,c=po(l);let u,d;if(i>e.width)for(let f=0,p=0;f<e.height;f++){const m=n.child(f);p+=m.nodeSize;const v=[];let y;m.lastChild==null||m.lastChild.type==c.cell?y=u||(u=c.cell.createAndFill()):y=d||(d=c.header_cell.createAndFill());for(let x=e.width;x<i;x++)v.push(y);t.insert(t.mapping.slice(o).map(p-1+r),v)}if(s>e.height){const f=[];for(let v=0,y=(e.height-1)*e.width;v<Math.max(e.width,i);v++){const x=v>=e.width?!1:n.nodeAt(e.map[y+v]).type==c.header_cell;f.push(x?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const p=c.row.create(null,pt.from(f)),m=[];for(let v=e.height;v<s;v++)m.push(p);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),m)}return!!(u||d)}function sK(t,e,n,r,i,s,o,l){if(o==0||o==e.height)return!1;let c=!1;for(let u=i;u<s;u++){const d=o*e.width+u,f=e.map[d];if(e.map[d-e.width]==f){c=!0;const p=n.nodeAt(f),{top:m,left:v}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(l).map(f+r),null,{...p.attrs,rowspan:o-m}),t.insert(t.mapping.slice(l).map(e.positionAt(o,v,n)),p.type.createAndFill({...p.attrs,rowspan:m+p.attrs.rowspan-o})),u+=p.attrs.colspan-1}}return c}function aK(t,e,n,r,i,s,o,l){if(o==0||o==e.width)return!1;let c=!1;for(let u=i;u<s;u++){const d=u*e.width+o,f=e.map[d];if(e.map[d-1]==f){c=!0;const p=n.nodeAt(f),m=e.colCount(f),v=t.mapping.slice(l).map(f+r);t.setNodeMarkup(v,null,mg(p.attrs,o-m,p.attrs.colspan-(o-m))),t.insert(v+p.nodeSize,p.type.createAndFill(mg(p.attrs,0,o-m))),u+=p.attrs.rowspan-1}}return c}function oK(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=xs.get(s);const{top:l,left:c}=r,u=c+i.width,d=l+i.height,f=t.tr;let p=0;function m(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");o=xs.get(s),p=f.mapping.maps.length}sYe(f,o,s,n,u,d,p)&&m(),sK(f,o,s,n,c,u,l,p)&&m(),sK(f,o,s,n,c,u,d,p)&&m(),aK(f,o,s,n,l,d,c,p)&&m(),aK(f,o,s,n,l,d,u,p)&&m();for(let v=l;v<d;v++){const y=o.positionAt(v,c,s),x=o.positionAt(v,u,s);f.replace(f.mapping.slice(p).map(y+n),f.mapping.slice(p).map(x+n),new qt(i.rows[v-l],0,0))}m(),f.setSelection(new Ni(f.doc.resolve(n+o.positionAt(l,c,s)),f.doc.resolve(n+o.positionAt(d-1,u-1,s)))),e(f)}var aYe=n3({ArrowLeft:T2("horiz",-1),ArrowRight:T2("horiz",1),ArrowUp:T2("vert",-1),ArrowDown:T2("vert",1),"Shift-ArrowLeft":O2("horiz",-1),"Shift-ArrowRight":O2("horiz",1),"Shift-ArrowUp":O2("vert",-1),"Shift-ArrowDown":O2("vert",1),Backspace:k2,"Mod-Backspace":k2,Delete:k2,"Mod-Delete":k2});function iN(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function T2(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Ni)return iN(n,r,Ln.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=Jle(i,t,e);if(o==null)return!1;if(t=="horiz")return iN(n,r,Ln.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(o),c=Wle(l,t,e);let u;return c?u=Ln.near(c,1):e<0?u=Ln.near(n.doc.resolve(l.before(-1)),-1):u=Ln.near(n.doc.resolve(l.after(-1)),1),iN(n,r,u)}}}function O2(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof Ni)o=s;else{const c=Jle(i,t,e);if(c==null)return!1;o=new Ni(n.doc.resolve(c))}const l=Wle(o.$headCell,t,e);return l?iN(n,r,new Ni(o.$anchorCell,l)):!1}}function oYe(t,e){const n=t.state.doc,r=bx(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ni(r))),!0):!1}function lYe(t,e,n){if(!Du(t.state))return!1;let r=nYe(n);const i=t.state.selection;if(i instanceof Ni){r||(r={width:1,height:1,rows:[pt.from(R4(po(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=xs.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=iYe(r,l.right-l.left,l.bottom-l.top),oK(t.state,t.dispatch,o,l,r),!0}else if(r){const s=M_(t.state),o=s.start(-1);return oK(t.state,t.dispatch,o,xs.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function cYe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=lK(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Ni)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=bx(t.state.selection.$anchor))!=null&&((n=hP(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(c,u){let d=hP(t,u);const f=Wh.getState(t.state)==null;if(!d||!T3(c,d))if(f)d=c;else return;const p=new Ni(c,d);if(f||!t.state.selection.eq(p)){const m=t.state.tr.setSelection(p);f&&m.setMeta(Wh,c.pos),t.dispatch(m)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",l),Wh.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Wh,-1))}function l(c){const u=c,d=Wh.getState(t.state);let f;if(d!=null)f=t.state.doc.resolve(d);else if(lK(t,u.target)!=r&&(f=hP(t,e),!f))return o();f&&s(f,u)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",l)}function Jle(t,e,n){if(!(t.state.selection instanceof En))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(i),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}function lK(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function hP(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?bx(t.state.doc.resolve(n.pos)):null}var uYe=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),D4(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,D4(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function D4(t,e,n,r,i,s){var o;let l=0,c=!0,u=e.firstChild;const d=t.firstChild;if(d){for(let f=0,p=0;f<d.childCount;f++){const{colspan:m,colwidth:v}=d.child(f).attrs;for(let y=0;y<m;y++,p++){const x=i==p?s:v&&v[y],b=x?x+"px":"";if(l+=x||r,x||(c=!1),u)u.style.width!=b&&(u.style.width=b),u=u.nextSibling;else{const S=document.createElement("col");S.style.width=b,e.appendChild(S)}}}for(;u;){const f=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=f}c?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var Il=new Ns("tableColumnResizing");function dYe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=uYe,lastColumnResizable:i=!0}={}){const s=new Di({key:Il,state:{init(o,l){var c,u;const d=(u=(c=s.spec)==null?void 0:c.props)==null?void 0:u.nodeViews,f=po(l.schema).table.name;return r&&d&&(d[f]=(p,m)=>new r(p,n,m)),new fYe(-1,!1)},apply(o,l){return l.apply(o)}},props:{attributes:o=>{const l=Il.getState(o);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,l)=>{hYe(o,l,t,i)},mouseleave:o=>{pYe(o)},mousedown:(o,l)=>{mYe(o,l,e,n)}},decorations:o=>{const l=Il.getState(o);if(l&&l.activeHandle>-1)return bYe(o,l.activeHandle)},nodeViews:{}}});return s}var fYe=class sN{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Il);if(r&&r.setHandle!=null)return new sN(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new sN(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return M4(e.doc.resolve(i))||(i=-1),new sN(i,n.dragging)}return n}};function hYe(t,e,n,r){if(!t.editable)return;const i=Il.getState(t.state);if(i&&!i.dragging){const s=vYe(e.target);let o=-1;if(s){const{left:l,right:c}=s.getBoundingClientRect();e.clientX-l<=n?o=cK(t,e,"left",n):c-e.clientX<=n&&(o=cK(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const l=t.state.doc.resolve(o),c=l.node(-1),u=xs.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}ece(t,o)}}}function pYe(t){if(!t.editable)return;const e=Il.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&ece(t,-1)}function mYe(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=Il.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const l=t.state.doc.nodeAt(o.activeHandle),c=gYe(t,o.activeHandle,l.attrs);t.dispatch(t.state.tr.setMeta(Il,{setDragging:{startX:e.clientX,startWidth:c}}));function u(f){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",d);const p=Il.getState(t.state);p?.dragging&&(yYe(t,p.activeHandle,uK(p.dragging,f,n)),t.dispatch(t.state.tr.setMeta(Il,{setDragging:null})))}function d(f){if(!f.which)return u(f);const p=Il.getState(t.state);if(p&&p.dragging){const m=uK(p.dragging,f,n);dK(t,p.activeHandle,m,r)}}return dK(t,o.activeHandle,c,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",d),e.preventDefault(),!0}function gYe(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let l=s.node.childNodes[s.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(l-=r[u],c--);return l/c}function vYe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function cK(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,l=bx(t.state.doc.resolve(o));if(!l)return-1;if(n=="right")return l.pos;const c=xs.get(l.node(-1)),u=l.start(-1),d=c.map.indexOf(l.pos-u);return d%c.width==0?-1:u+c.map[d-1]}function uK(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function ece(t,e){t.dispatch(t.state.tr.setMeta(Il,{setHandle:e}))}function yYe(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=xs.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+l;if(u&&s.map[d]==s.map[d-s.width])continue;const f=s.map[d],p=i.nodeAt(f).attrs,m=p.colspan==1?0:l-s.colCount(f);if(p.colwidth&&p.colwidth[m]==n)continue;const v=p.colwidth?p.colwidth.slice():xYe(p.colspan);v[m]=n,c.setNodeMarkup(o+f,null,{...p,colwidth:v})}c.docChanged&&t.dispatch(c)}function dK(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),l=xs.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let c=t.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&D4(s,c.firstChild,c,r,l,n)}function xYe(t){return Array(t).fill(0)}function bYe(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return fi.empty;const o=xs.get(s),l=i.start(-1),c=o.colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<o.height;u++){const d=c+u*o.width;if((c==o.width-1||o.map[d]!=o.map[d+1])&&(u==0||o.map[d]!=o.map[d-o.width])){const f=o.map[d],p=l+f+s.nodeAt(f).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(n=Il.getState(t))!=null&&n.dragging&&r.push(oa.node(l+f,l+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(oa.widget(p,m))}}return fi.create(t.doc,r)}function wYe({allowTableNodeSelection:t=!1}={}){return new Di({key:Wh,state:{init(){return null},apply(e,n){const r=e.getMeta(Wh);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:RGe,handleDOMEvents:{mousedown:cYe},createSelectionBetween(e){return Wh.getState(e.state)!=null?e.state.selection:null},handleTripleClick:oYe,handleKeyDown:aYe,handlePaste:lYe},appendTransaction(e,n,r){return LGe(r,Xle(r,n),t)}})}var O3=ka.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(s=>parseInt(s,10)):null;if(!i){const s=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),o=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(o&&o>-1&&s&&s[o]){const l=s[o].getAttribute("width");return l?[parseInt(l,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",mi(this.options.HTMLAttributes,t),0]}}),P3=ka.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",mi(this.options.HTMLAttributes,t),0]}}),M3=ka.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",mi(this.options.HTMLAttributes,t),0]}});function I4(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function fK(t,e,n,r,i,s){var o;let l=0,c=!0,u=e.firstChild;const d=t.firstChild;if(d!==null)for(let f=0,p=0;f<d.childCount;f+=1){const{colspan:m,colwidth:v}=d.child(f).attrs;for(let y=0;y<m;y+=1,p+=1){const x=i===p?s:v&&v[y],b=x?`${x}px`:"";if(l+=x||r,x||(c=!1),u){if(u.style.width!==b){const[S,j]=I4(r,x);u.style.setProperty(S,j)}u=u.nextSibling}else{const S=document.createElement("col"),[j,E]=I4(r,x);S.style.setProperty(j,E),e.appendChild(S)}}}for(;u;){const f=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=f}c?(n.style.width=`${l}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${l}px`)}var NYe=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),fK(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,fK(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function SYe(t,e,n,r){let i=0,s=!0;const o=[],l=t.firstChild;if(!l)return{};for(let f=0,p=0;f<l.childCount;f+=1){const{colspan:m,colwidth:v}=l.child(f).attrs;for(let y=0;y<m;y+=1,p+=1){const x=n===p?r:v&&v[y];i+=x||e,x||(s=!1);const[b,S]=I4(e,x);o.push(["col",{style:`${b}: ${S}`}])}}const c=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:c,tableMinWidth:u}}function hK(t,e){return t.createAndFill()}function jYe(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function EYe(t,e,n,r,i){const s=jYe(t),o=[],l=[];for(let u=0;u<n;u+=1){const d=hK(s.cell);if(d&&l.push(d),r){const f=hK(s.header_cell);f&&o.push(f)}}const c=[];for(let u=0;u<e;u+=1)c.push(s.row.createChecked(null,r&&u===0?o:l));return s.table.createChecked(null,c)}function _Ye(t){return t instanceof Ni}var P2=({editor:t})=>{const{selection:e}=t.state;if(!_Ye(e))return!1;let n=0;const r=Soe(e.ranges[0].$from,s=>s.type.name==="table");return r?.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},CYe="";function AYe(t){return(t||"").replace(/\s+/g," ").trim()}function kYe(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:CYe;if(!t||!t.content||t.content.length===0)return"";const s=[];t.content.forEach(v=>{const y=[];v.content&&v.content.forEach(x=>{let b="";x.content&&Array.isArray(x.content)&&x.content.length>1?b=x.content.map(A=>e.renderChildren(A)).join(i):b=x.content?e.renderChildren(x.content):"";const S=AYe(b),j=x.type==="tableHeader";y.push({text:S,isHeader:j})}),s.push(y)});const o=s.reduce((v,y)=>Math.max(v,y.length),0);if(o===0)return"";const l=new Array(o).fill(0);s.forEach(v=>{var y;for(let x=0;x<o;x+=1){const S=(((y=v[x])==null?void 0:y.text)||"").length;S>l[x]&&(l[x]=S),l[x]<3&&(l[x]=3)}});const c=(v,y)=>v+" ".repeat(Math.max(0,y-v.length)),u=s[0],d=u.some(v=>v.isHeader);let f=`
`;const p=new Array(o).fill(0).map((v,y)=>d&&u[y]&&u[y].text||"");return f+=`| ${p.map((v,y)=>c(v,l[y])).join(" | ")} |
`,f+=`| ${l.map(v=>"-".repeat(Math.max(3,v))).join(" | ")} |
`,(d?s.slice(1):s).forEach(v=>{f+=`| ${new Array(o).fill(0).map((y,x)=>c(v[x]&&v[x].text||"",l[x])).join(" | ")} |
`}),f}var TYe=kYe,R3=ka.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:NYe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=SYe(t,this.options.cellMinWidth);return["table",mi(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(s=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>TYe(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=EYe(s.schema,t,e,n);if(i){const l=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(En.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>$Ge(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>zGe(t,e),deleteColumn:()=>({state:t,dispatch:e})=>UGe(t,e),addRowBefore:()=>({state:t,dispatch:e})=>VGe(t,e),addRowAfter:()=>({state:t,dispatch:e})=>WGe(t,e),deleteRow:()=>({state:t,dispatch:e})=>GGe(t,e),deleteTable:()=>({state:t,dispatch:e})=>tYe(t,e),mergeCells:()=>({state:t,dispatch:e})=>tK(t,e),splitCell:()=>({state:t,dispatch:e})=>nK(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>p1("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>p1("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>JGe(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>tK(t,e)?!0:nK(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>QGe(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>iK(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>iK(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&Xle(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Ni.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:P2,"Mod-Backspace":P2,Delete:P2,"Mod-Delete":P2}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[dYe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],wYe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Yr(yn(t,"tableRole",e))}}});li.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(R3.configure(this.options.table)),this.options.tableCell!==!1&&t.push(O3.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(P3.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(M3.configure(this.options.tableRow)),t}});var OYe=M3,PYe=O3,MYe=P3;function RYe({initialData:t,onSave:e,onCancel:n}){const[r,i]=N.useState(t?.length||3),[s,o]=N.useState(t?.[0]?.length||3),[l,c]=N.useState(t||Array(3).fill(null).map(()=>Array(3).fill("")));N.useEffect(()=>{t&&(c(t),i(t.length),o(t[0]?.length||3))},[t]);const u=(y,x,b)=>{const S=[...l];S[y][x]=b,c(S)},d=()=>{const y=[...l,Array(s).fill("")];c(y),i(r+1)},f=()=>{if(r>1){const y=l.slice(0,-1);c(y),i(r-1)}},p=()=>{const y=l.map(x=>[...x,""]);c(y),o(s+1)},m=()=>{if(s>1){const y=l.map(x=>x.slice(0,-1));c(y),o(s-1)}},v=()=>{e(l)};return a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx(_e,{className:"text-sm",children:"Filas:"}),a.jsx(pe,{size:"icon",variant:"outline",onClick:f,disabled:r<=1,className:"h-8 w-8","data-testid":"button-remove-row",children:a.jsx(kP,{className:"h-4 w-4"})}),a.jsx(Ye,{type:"number",value:r,readOnly:!0,className:"w-16 h-8 text-center"}),a.jsx(pe,{size:"icon",variant:"outline",onClick:d,className:"h-8 w-8","data-testid":"button-add-row",children:a.jsx(Ri,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx(_e,{className:"text-sm",children:"Columnas:"}),a.jsx(pe,{size:"icon",variant:"outline",onClick:m,disabled:s<=1,className:"h-8 w-8","data-testid":"button-remove-column",children:a.jsx(kP,{className:"h-4 w-4"})}),a.jsx(Ye,{type:"number",value:s,readOnly:!0,className:"w-16 h-8 text-center"}),a.jsx(pe,{size:"icon",variant:"outline",onClick:p,className:"h-8 w-8","data-testid":"button-add-column",children:a.jsx(Ri,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"border rounded-md overflow-auto max-h-[400px]","data-testid":"excel-table-grid",children:a.jsx("table",{className:"w-full border-collapse",children:a.jsx("tbody",{children:l.map((y,x)=>a.jsx("tr",{children:y.map((b,S)=>a.jsx("td",{className:"border p-0",children:a.jsx(Ye,{value:b,onChange:j=>u(x,S,j.target.value),className:"border-0 rounded-none focus-visible:ring-0 focus-visible:ring-offset-0","data-testid":`cell-${x}-${S}`,placeholder:x===0?`Columna ${S+1}`:""})},S))},x))})})}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(pe,{variant:"outline",onClick:n,"data-testid":"button-cancel-table",children:"Cancelar"}),a.jsx(pe,{onClick:v,"data-testid":"button-save-table",children:"Insertar Tabla"})]})]})}const DYe=SGe(wGe);function tce({content:t,onChange:e,manualId:n}){const{toast:r}=Dr(),[i,s]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[d,f]=N.useState(void 0),[p,m]=N.useState(null),[v,y]=N.useState(null),[x,b]=N.useState(""),[S,j]=N.useState(""),[E,A]=N.useState(!1),[P,O]=N.useState(!1),k=Yoe({extensions:[Sle.configure({codeBlock:!1}),jle.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:"editor-image"}}),j3.configure({openOnClick:!1}),Ele.configure({types:["heading","paragraph"]}),C3,A3,GWe.configure({multicolor:!0}),eKe.configure({lowlight:DYe}),R3.configure({resizable:!1,HTMLAttributes:{class:"editor-table"}}),M3,P3,O3],content:t,onUpdate:({editor:z})=>{e(z.getHTML())},editorProps:{handleDrop:(z,W,X,q)=>{if(!q&&W.dataTransfer&&W.dataTransfer.files&&W.dataTransfer.files[0]){const V=W.dataTransfer.files[0];if(V.type.startsWith("image/"))return W.preventDefault(),C(V),!0}return!1},handlePaste:(z,W)=>{const X=W.clipboardData?.items;if(X){const q=Array.from(X);for(const V of q)if(V.type.startsWith("image/")){W.preventDefault();const Y=V.getAsFile();return Y&&C(Y),!0}}return!1}}});if(!k)return null;N.useEffect(()=>{try{const z=k.getHTML();(!z||z==="<p></p>"||z===`<p></p>
`)&&t&&typeof t=="string"&&k.commands.setContent(t)}catch{}},[k,t,n]);const C=async z=>{if(!n){r({title:"Error",description:"Debes guardar el manual primero",variant:"destructive"});return}const W=new FormData;W.append("image",z);try{const X=await fetch("/api/manuals/upload-image",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:W});if(!X.ok)throw new Error("Error al subir imagen");const q=await X.json();k.chain().focus().setImage({src:q.url}).run(),r({title:"Imagen insertada correctamente"})}catch{r({title:"Error al subir imagen",variant:"destructive"})}},I=async()=>{let z=v;if(!z){const W=document.getElementById("image-file");W?.files&&W.files[0]&&(z=W.files[0],y(z))}if(!z){r({title:"Error",description:"Selecciona una imagen primero",variant:"destructive"});return}await C(z),s(!1),y(null)},R=()=>{x&&(S?k.chain().focus().insertContent(`<a href="${x}">${S}</a>`).run():k.chain().focus().setLink({href:x}).run(),l(!1),b(""),j(""))},D=["#000000","#374151","#6B7280","#9CA3AF","#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899"],L=z=>{const W=document.createElement("div");W.innerHTML=z;const X=W.querySelector("table");if(!X)return[];const q=[];return X.querySelectorAll("tr").forEach(V=>{const Y=[];V.querySelectorAll("th, td").forEach(re=>{Y.push(re.textContent||"")}),Y.length>0&&q.push(Y)}),q};return a.jsxs("div",{className:"border rounded-lg",children:[a.jsxs("div",{className:"border-b p-2 flex flex-wrap gap-1 items-center bg-muted/30",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>k.chain().focus().undo().run(),disabled:!k.can().undo(),"data-testid":"button-undo",children:a.jsx(zG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>k.chain().focus().redo().run(),disabled:!k.can().redo(),"data-testid":"button-redo",children:a.jsx(LG,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:k.isActive("bold")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleBold().run(),"data-testid":"button-bold",children:a.jsx(NG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("italic")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleItalic().run(),"data-testid":"button-italic",children:a.jsx(MG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("strike")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleStrike().run(),"data-testid":"button-strike",children:a.jsx(BG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("code")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleCode().run(),"data-testid":"button-code",children:a.jsx(jfe,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:k.isActive("heading",{level:1})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleHeading({level:1}).run(),"data-testid":"button-h1",children:a.jsx(TG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("heading",{level:2})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleHeading({level:2}).run(),"data-testid":"button-h2",children:a.jsx(OG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("heading",{level:3})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleHeading({level:3}).run(),"data-testid":"button-h3",children:a.jsx(PG,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:k.isActive("bulletList")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleBulletList().run(),"data-testid":"button-bullet-list",children:a.jsx(sD,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("orderedList")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleOrderedList().run(),"data-testid":"button-ordered-list",children:a.jsx(RG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive("blockquote")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleBlockquote().run(),"data-testid":"button-blockquote",children:a.jsx(IG,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:k.isActive({textAlign:"left"})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().setTextAlign("left").run(),"data-testid":"button-align-left",children:a.jsx(bG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive({textAlign:"center"})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().setTextAlign("center").run(),"data-testid":"button-align-center",children:a.jsx(yG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive({textAlign:"right"})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().setTextAlign("right").run(),"data-testid":"button-align-right",children:a.jsx(wG,{className:"h-4 w-4"})}),a.jsx(pe,{variant:k.isActive({textAlign:"justify"})?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().setTextAlign("justify").run(),"data-testid":"button-align-justify",children:a.jsx(xG,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsxs("div",{className:"relative",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>A(!E),"data-testid":"button-text-color",children:a.jsx("div",{className:"h-4 w-4 border-2 border-current",style:{backgroundColor:k.getAttributes("textStyle").color||"#000"}})}),E&&a.jsx("div",{className:"absolute top-full mt-1 p-2 bg-background border rounded-lg shadow-lg z-10 grid grid-cols-5 gap-1",children:D.map(z=>a.jsx("button",{className:"h-6 w-6 rounded border hover-elevate",style:{backgroundColor:z},onClick:()=>{k.chain().focus().setColor(z).run(),A(!1)}},z))})]}),a.jsxs("div",{className:"relative",children:[a.jsx(pe,{variant:k.isActive("highlight")?"default":"ghost",size:"icon",onClick:()=>O(!P),"data-testid":"button-highlight",children:a.jsx(Ofe,{className:"h-4 w-4"})}),P&&a.jsx("div",{className:"absolute top-full mt-1 p-2 bg-background border rounded-lg shadow-lg z-10 grid grid-cols-5 gap-1",children:D.slice(4).map(z=>a.jsx("button",{className:"h-6 w-6 rounded border hover-elevate",style:{backgroundColor:z},onClick:()=>{k.chain().focus().toggleHighlight({color:z}).run(),O(!1)}},z))})]}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:k.isActive("codeBlock")?"default":"ghost",size:"icon",onClick:()=>k.chain().focus().toggleCodeBlock().run(),"data-testid":"button-code-block",children:a.jsx(AG,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>{const W=k.getHTML().match(/<table[\s\S]*?<\/table>/);if(W){const X=L(W[0]);f(X),m(W[0])}else f(void 0),m(null);u(!0)},"data-testid":"button-insert-table",title:"Insertar/Editar tabla",children:a.jsx($G,{className:"h-4 w-4"})}),a.jsx(ts,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>s(!0),"data-testid":"button-insert-image",title:"Insertar imagen",children:a.jsx(rD,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>l(!0),"data-testid":"button-insert-link",title:"Insertar enlace",children:a.jsx(Ife,{className:"h-4 w-4"})})]}),a.jsx("style",{children:`
        .ProseMirror {
          outline: none;
          padding: 1rem;
          min-height: 400px;
        }

        /* Estilos de tabla profesionales tipo Word */
        .ProseMirror .editor-table {
          border-collapse: collapse;
          table-layout: fixed;
          width: 100%;
          margin: 1rem 0;
          overflow: hidden;
        }

        .ProseMirror .editor-table td,
        .ProseMirror .editor-table th {
          min-width: 1em;
          border: 2px solid #000000;
          padding: 0.5rem;
          vertical-align: top;
          box-sizing: border-box;
          position: relative;
          background-color: hsl(var(--background));
        }

        .ProseMirror .editor-table th {
          font-weight: 600;
          text-align: left;
          background-color: hsl(var(--muted));
          border: 2px solid #000000;
        }

        .ProseMirror .editor-table .selectedCell {
          background-color: hsl(var(--accent) / 0.3);
        }

        /* Handle de redimensionamiento de columna */
        .ProseMirror .editor-table .column-resize-handle {
          position: absolute;
          right: -2px;
          top: 0;
          bottom: 0;
          width: 4px;
          background-color: hsl(var(--primary));
          cursor: col-resize;
          z-index: 20;
        }

        /* Estilos de imagen mejorados */
        .ProseMirror .editor-image {
          max-width: 100%;
          height: auto;
          display: block;
          margin: 1rem 0;
          border-radius: 0.375rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .ProseMirror .editor-image:hover {
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .ProseMirror .editor-image.ProseMirror-selectednode {
          outline: 2px solid hsl(var(--primary));
          outline-offset: 2px;
        }

        /* Indicador de arrastre */
        .ProseMirror.dragging {
          background-color: hsl(var(--accent) / 0.1);
        }

        /* Estilos de prose mejorados */
        .ProseMirror p {
          margin: 0.5rem 0;
        }

        .ProseMirror h1, .ProseMirror h2, .ProseMirror h3 {
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
        }

        .ProseMirror ul, .ProseMirror ol {
          padding-left: 1.5rem;
        }

        .ProseMirror blockquote {
          border-left: 3px solid hsl(var(--border));
          padding-left: 1rem;
          margin-left: 0;
          font-style: italic;
        }

        .ProseMirror code {
          background-color: hsl(var(--muted));
          padding: 0.125rem 0.25rem;
          border-radius: 0.25rem;
          font-size: 0.875em;
        }

        .ProseMirror pre {
          background-color: hsl(var(--muted));
          border-radius: 0.5rem;
          padding: 1rem;
          overflow-x: auto;
        }

        .ProseMirror pre code {
          background-color: transparent;
          padding: 0;
        }
      `}),a.jsx(Koe,{editor:k,className:"focus:outline-none"}),a.jsx(xr,{open:i,onOpenChange:s,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Insertar Imagen"}),a.jsx(_r,{children:"Sube una imagen desde tu ordenador o arrastra y suelta directamente en el editor"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"image-file",children:"Seleccionar imagen"}),a.jsx(Ye,{id:"image-file",type:"file",accept:"image/*",onChange:z=>y(z.target.files?.[0]||null),"data-testid":"input-image-file"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" Tambin puedes arrastrar imgenes directamente al editor o pegarlas con Ctrl+V"})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(pe,{onClick:I,"data-testid":"button-upload-image",children:"Insertar"})]})]})}),a.jsx(xr,{open:o,onOpenChange:l,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Insertar Enlace"}),a.jsx(_r,{children:"Aade un enlace al documento"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"link-url",children:"URL"}),a.jsx(Ye,{id:"link-url",type:"url",placeholder:"https://example.com",value:x,onChange:z=>b(z.target.value),"data-testid":"input-link-url"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"link-text",children:"Texto (opcional)"}),a.jsx(Ye,{id:"link-text",type:"text",placeholder:"Texto del enlace",value:S,onChange:z=>j(z.target.value),"data-testid":"input-link-text"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),a.jsx(pe,{onClick:R,"data-testid":"button-insert-link-confirm",children:"Insertar"})]})]})}),a.jsx(xr,{open:c,onOpenChange:u,children:a.jsxs(vr,{className:"max-w-4xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:p?"Editar Tabla":"Insertar Tabla"}),a.jsxs(_r,{children:[p?"Modifica la tabla existente.":"Crea una nueva tabla."," La primera fila ser el encabezado con fondo gris."]})]}),a.jsx(RYe,{initialData:d,onSave:z=>{if(z.length!==0){if(p){const W=IYe(z),q=k.getHTML().replace(p,W);k.commands.setContent(q)}else{const W=z.length,X=z[0]?.length||2;k.chain().focus().insertTable({rows:W,cols:X,withHeaderRow:!0}).run(),z.forEach((q,V)=>{q.forEach((Y,re)=>{k.commands.goToNextCell(),Y&&k.commands.insertContent(Y)})})}u(!1),f(void 0),m(null)}},onCancel:()=>{u(!1),f(void 0),m(null)}})]})})]})}function IYe(t){if(t.length===0)return"";let e='<table class="editor-table">';return t.forEach((n,r)=>{e+="<tr>",n.forEach(i=>{r===0?e+=`<th>${i||""}</th>`:e+=`<td>${i||""}</td>`}),e+="</tr>"}),e+="</table>",e}const LYe=[{id:"procedimiento-basico",nombre:"Procedimiento Bsico",descripcion:"Plantilla para documentar un procedimiento paso a paso",categoria:"General",etiquetas:["procedimiento"],contenidoHtml:`
      <h1>Ttulo del Procedimiento</h1>
      <p><strong>Objetivo:</strong> Describir el objetivo del procedimiento</p>
      <p><strong>Alcance:</strong> Definir el alcance y limitaciones</p>
      
      <h2>Requisitos Previos</h2>
      <ul>
        <li>Requisito 1</li>
        <li>Requisito 2</li>
        <li>Requisito 3</li>
      </ul>

      <h2>Procedimiento</h2>
      <ol>
        <li><strong>Paso 1:</strong> Descripcin detallada del primer paso</li>
        <li><strong>Paso 2:</strong> Descripcin detallada del segundo paso</li>
        <li><strong>Paso 3:</strong> Descripcin detallada del tercer paso</li>
      </ol>

      <h2>Resultados Esperados</h2>
      <p>Describir los resultados que se deben obtener al completar el procedimiento</p>

      <h2>Solucin de Problemas</h2>
      <table>
        <thead>
          <tr>
            <th>Problema</th>
            <th>Causa</th>
            <th>Solucin</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Problema 1</td>
            <td>Causa probable</td>
            <td>Solucin recomendada</td>
          </tr>
        </tbody>
      </table>
    `},{id:"modelo-fiscal",nombre:"Gua Modelo Fiscal",descripcion:"Plantilla para documentar la presentacin de modelos fiscales",categoria:"Fiscal",etiquetas:["fiscal","impuestos"],contenidoHtml:`
      <h1>Modelo [Nmero] - [Nombre del Modelo]</h1>
      
      <h2>Informacin General</h2>
      <p><strong>Descripcin:</strong> Breve descripcin del modelo fiscal</p>
      <p><strong>Periodicidad:</strong> Trimestral / Mensual / Anual</p>
      <p><strong>Plazo de presentacin:</strong> Especificar fechas lmite</p>

      <h2>Quin debe presentarlo?</h2>
      <ul>
        <li>Tipo de contribuyente 1</li>
        <li>Tipo de contribuyente 2</li>
      </ul>

      <h2>Documentacin Necesaria</h2>
      <ol>
        <li>Documento 1</li>
        <li>Documento 2</li>
        <li>Documento 3</li>
      </ol>

      <h2>Procedimiento de Clculo</h2>
      <h3>Paso 1: Clculo de Base Imponible</h3>
      <p>Explicacin detallada</p>

      <h3>Paso 2: Aplicacin de Tipos</h3>
      <p>Explicacin detallada</p>

      <h3>Paso 3: Deducciones</h3>
      <p>Explicacin detallada</p>

      <h2>Presentacin Telemtica</h2>
      <ol>
        <li>Acceder a la sede electrnica</li>
        <li>Seleccionar el modelo correspondiente</li>
        <li>Completar los datos requeridos</li>
        <li>Revisar y confirmar</li>
      </ol>

      <h2>Notas Importantes</h2>
      <blockquote>
        <p> Consideraciones especiales y advertencias</p>
      </blockquote>
    `},{id:"normativa-laboral",nombre:"Normativa Laboral",descripcion:"Plantilla para documentar normativa y procedimientos laborales",categoria:"Laboral",etiquetas:["laboral","normativa"],contenidoHtml:`
      <h1>Normativa Laboral - [Ttulo]</h1>
      
      <h2>Marco Legal</h2>
      <p><strong>Normativa aplicable:</strong></p>
      <ul>
        <li>Ley / Real Decreto 1</li>
        <li>Ley / Real Decreto 2</li>
      </ul>

      <h2>mbito de Aplicacin</h2>
      <p>Definir a quin aplica esta normativa</p>

      <h2>Obligaciones del Empresario</h2>
      <ol>
        <li>Obligacin 1: Descripcin</li>
        <li>Obligacin 2: Descripcin</li>
        <li>Obligacin 3: Descripcin</li>
      </ol>

      <h2>Derechos del Trabajador</h2>
      <ol>
        <li>Derecho 1: Descripcin</li>
        <li>Derecho 2: Descripcin</li>
        <li>Derecho 3: Descripcin</li>
      </ol>

      <h2>Procedimiento</h2>
      <h3>Paso 1: [Nombre del paso]</h3>
      <p>Descripcin detallada</p>

      <h3>Paso 2: [Nombre del paso]</h3>
      <p>Descripcin detallada</p>

      <h2>Sanciones</h2>
      <table>
        <thead>
          <tr>
            <th>Infraccin</th>
            <th>Tipo</th>
            <th>Sancin</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Infraccin leve</td>
            <td>Leve</td>
            <td>Multa de X a Y </td>
          </tr>
          <tr>
            <td>Infraccin grave</td>
            <td>Grave</td>
            <td>Multa de X a Y </td>
          </tr>
        </tbody>
      </table>
    `},{id:"guia-rapida",nombre:"Gua Rpida",descripcion:"Plantilla para crear guas rpidas de referencia",categoria:"General",etiquetas:["gua","referencia"],contenidoHtml:`
      <h1>Gua Rpida - [Ttulo]</h1>
      
      <h2>Resumen</h2>
      <p>Breve descripcin de lo que cubre esta gua</p>

      <h2>Acciones Frecuentes</h2>
      <h3>Accin 1: [Nombre]</h3>
      <ol>
        <li>Paso 1</li>
        <li>Paso 2</li>
        <li>Paso 3</li>
      </ol>

      <h3>Accin 2: [Nombre]</h3>
      <ol>
        <li>Paso 1</li>
        <li>Paso 2</li>
        <li>Paso 3</li>
      </ol>

      <h2>Shortcuts / Atajos</h2>
      <table>
        <thead>
          <tr>
            <th>Accin</th>
            <th>Mtodo Rpido</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Accin 1</td>
            <td>Descripcin del atajo</td>
          </tr>
          <tr>
            <td>Accin 2</td>
            <td>Descripcin del atajo</td>
          </tr>
        </tbody>
      </table>

      <h2>Preguntas Frecuentes</h2>
      <h3>Pregunta 1?</h3>
      <p>Respuesta 1</p>

      <h3>Pregunta 2?</h3>
      <p>Respuesta 2</p>

      <h2>Enlaces tiles</h2>
      <ul>
        <li><a href="#">Recurso 1</a></li>
        <li><a href="#">Recurso 2</a></li>
      </ul>
    `},{id:"politica-empresa",nombre:"Poltica de Empresa",descripcion:"Plantilla para documentar polticas internas",categoria:"Organizacin",etiquetas:["poltica","normativa"],contenidoHtml:`
      <h1>Poltica de [Ttulo]</h1>
      
      <h2>Propsito</h2>
      <p>Descripcin del propsito de esta poltica</p>

      <h2>Alcance</h2>
      <p>Define a quin aplica esta poltica</p>

      <h2>Definiciones</h2>
      <ul>
        <li><strong>Trmino 1:</strong> Definicin</li>
        <li><strong>Trmino 2:</strong> Definicin</li>
      </ul>

      <h2>Poltica</h2>
      <h3>Principios Generales</h3>
      <ol>
        <li>Principio 1</li>
        <li>Principio 2</li>
        <li>Principio 3</li>
      </ol>

      <h3>Normas Especficas</h3>
      <ol>
        <li>Norma 1: Descripcin detallada</li>
        <li>Norma 2: Descripcin detallada</li>
      </ol>

      <h2>Responsabilidades</h2>
      <table>
        <thead>
          <tr>
            <th>Rol</th>
            <th>Responsabilidad</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Direccin</td>
            <td>Descripcin de responsabilidades</td>
          </tr>
          <tr>
            <td>Empleados</td>
            <td>Descripcin de responsabilidades</td>
          </tr>
        </tbody>
      </table>

      <h2>Incumplimiento</h2>
      <p>Consecuencias del incumplimiento de esta poltica</p>

      <h2>Revisin</h2>
      <p>Esta poltica ser revisada [periodicidad]</p>
    `}];function pK(){const t=H4(),[e,n]=ca(),{toast:r}=Dr(),i=e==="/manuales/nuevo"||t.id==="nuevo",[s,o]=N.useState({titulo:"",categoria:"",etiquetas:[],publicado:!1,contenidoHtml:""}),[l,c]=N.useState(""),[u,d]=N.useState(null),[f,p]=N.useState(!1),{data:m}=Wt({queryKey:["/api/manuals",t.id],enabled:!i}),{data:v=[]}=Wt({queryKey:["/api/manuals",t.id,"attachments"],enabled:!i}),{data:y=[]}=Wt({queryKey:["/api/manuals",t.id,"versions"],enabled:!i});N.useEffect(()=>{m&&!i&&o({titulo:m.titulo,categoria:m.categoria||"",etiquetas:m.etiquetas||[],publicado:m.publicado,contenidoHtml:m.contenidoHtml})},[m,i]);const x=$t({mutationFn:async I=>i?await Rt("POST","/api/manuals",I):await Rt("PATCH",`/api/manuals/${t.id}`,I),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/manuals"]}),r({title:i?"Manual creado exitosamente":"Manual actualizado exitosamente"}),n("/manuales")}}),b=$t({mutationFn:async I=>{const R=new FormData;R.append("file",I);const D=await fetch(`/api/manuals/${t.id}/attachments`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:R});if(!D.ok)throw new Error("Error al subir adjunto");return D.json()},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/manuals",t.id,"attachments"]}),r({title:"Adjunto subido correctamente"}),d(null)}}),S=$t({mutationFn:async I=>{await Rt("DELETE",`/api/manuals/${t.id}/attachments/${I}`)},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/manuals",t.id,"attachments"]}),r({title:"Adjunto eliminado"})}}),j=$t({mutationFn:async I=>await Rt("POST",`/api/manuals/${t.id}/versions/restore/${I}`),onSuccess:I=>{cn.invalidateQueries({queryKey:["/api/manuals"]}),o({titulo:I.titulo,categoria:I.categoria||"",etiquetas:I.etiquetas||[],publicado:I.publicado,contenidoHtml:I.contenidoHtml}),r({title:"Versin restaurada correctamente"})}}),E=(I=!1)=>{if(!s.titulo){r({title:"Error",description:"El ttulo es requerido",variant:"destructive"});return}x.mutate({...s,createVersion:I})},A=()=>{l&&!s.etiquetas.includes(l)&&(o({...s,etiquetas:[...s.etiquetas,l]}),c(""))},P=I=>{o({...s,etiquetas:s.etiquetas.filter(R=>R!==I)})},O=()=>{u&&b.mutate(u)},k=I=>I<1024?I+" B":I<1024*1024?(I/1024).toFixed(1)+" KB":(I/(1024*1024)).toFixed(1)+" MB",C=I=>{o({...s,titulo:s.titulo||I.nombre,categoria:I.categoria,etiquetas:Array.from(new Set([...s.etiquetas,...I.etiquetas])),contenidoHtml:I.contenidoHtml}),p(!1),r({title:"Plantilla aplicada correctamente"})};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>n("/manuales"),"data-testid":"button-back",children:a.jsx(Hf,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:i?"Nuevo Manual":"Editar Manual"})}),i&&a.jsxs(xr,{open:f,onOpenChange:p,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{variant:"outline","data-testid":"button-use-template",children:[a.jsx(AG,{className:"h-4 w-4 mr-2"}),"Usar Plantilla"]})}),a.jsxs(vr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Seleccionar Plantilla"}),a.jsx(_r,{children:"Elige una plantilla predefinida para comenzar tu manual"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:LYe.map(I=>a.jsx(Xe,{className:"cursor-pointer hover-elevate active-elevate-2",onClick:()=>C(I),"data-testid":`template-${I.id}`,children:a.jsxs(Qe,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:I.nombre}),a.jsx(jn,{className:"text-sm mb-3",children:I.descripcion}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ct,{variant:"outline",children:I.categoria}),I.etiquetas.slice(0,2).map(R=>a.jsx(ct,{variant:"secondary",children:R},R))]})]})},I.id))})]})]}),a.jsx(pe,{variant:"outline",onClick:()=>E(!0),disabled:i,"data-testid":"button-save-version",children:"Guardar Versin"}),a.jsxs(pe,{onClick:()=>E(!1),"data-testid":"button-save",children:[a.jsx($j,{className:"h-4 w-4 mr-2"}),"Guardar"]})]}),a.jsxs(kc,{defaultValue:"editor",className:"space-y-4",children:[a.jsxs(ql,{children:[a.jsxs(Wn,{value:"editor","data-testid":"tab-editor",children:[a.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Editor"]}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs(Wn,{value:"attachments","data-testid":"tab-attachments",children:[a.jsx(pp,{className:"h-4 w-4 mr-2"}),"Adjuntos (",v.length,")"]}),a.jsxs(Wn,{value:"versions","data-testid":"tab-versions",children:[a.jsx(Wm,{className:"h-4 w-4 mr-2"}),"Versiones (",y.length,")"]})]})]}),a.jsx(or,{value:"editor",className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[a.jsx(Xe,{className:"md:col-span-2",children:a.jsxs(Qe,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"titulo",children:"Ttulo *"}),a.jsx(Ye,{id:"titulo",value:s.titulo,onChange:I=>o({...s,titulo:I.target.value}),placeholder:"Ttulo del manual...","data-testid":"input-titulo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Editor de Contenido"}),a.jsx(tce,{content:s.contenidoHtml,onChange:I=>o({...s,contenidoHtml:I}),manualId:t.id})]})]})}),a.jsx(Xe,{children:a.jsxs(Qe,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"categoria",children:"Categora"}),a.jsx(Ye,{id:"categoria",value:s.categoria,onChange:I=>o({...s,categoria:I.target.value}),placeholder:"ej: Fiscal, Laboral","data-testid":"input-categoria"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"etiquetas",children:"Etiquetas"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ye,{id:"etiquetas",value:l,onChange:I=>c(I.target.value),onKeyPress:I=>I.key==="Enter"&&(I.preventDefault(),A()),placeholder:"Aadir etiqueta","data-testid":"input-tag"}),a.jsx(pe,{type:"button",onClick:A,"data-testid":"button-add-tag",children:"+"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.etiquetas.map(I=>a.jsxs(ct,{variant:"secondary",className:"cursor-pointer hover-elevate",onClick:()=>P(I),"data-testid":`badge-tag-${I}`,children:[I," "]},I))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(_e,{htmlFor:"publicado",children:"Publicado"}),a.jsx(Va,{id:"publicado",checked:s.publicado,onCheckedChange:I=>o({...s,publicado:I}),"data-testid":"switch-publicado"})]})]})})]})}),a.jsx(or,{value:"attachments",className:"space-y-4",children:a.jsx(Xe,{children:a.jsxs(Qe,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-end gap-4",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(_e,{htmlFor:"attachment-file",children:"Subir Adjunto"}),a.jsx(Ye,{id:"attachment-file",type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.zip,.rar,.txt",onChange:I=>d(I.target.files?.[0]||null),"data-testid":"input-attachment-file"})]}),a.jsxs(pe,{onClick:O,disabled:!u||b.isPending,"data-testid":"button-upload-attachment",children:[a.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Subir"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(_e,{children:["Adjuntos (",v.length,")"]}),a.jsxs("div",{className:"space-y-2",children:[v.map(I=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover-elevate","data-testid":`attachment-${I.id}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pp,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:I.originalName}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[k(I.fileSize),"  ",new Date(I.uploadedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>window.open(I.filePath,"_blank"),"data-testid":`button-download-${I.id}`,children:a.jsx(Ha,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>S.mutate(I.id),"data-testid":`button-delete-${I.id}`,children:a.jsx(Wi,{className:"h-4 w-4 text-destructive"})})]})]},I.id)),v.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay adjuntos todava"})]})]})]})})}),a.jsx(or,{value:"versions",className:"space-y-4",children:a.jsx(Xe,{children:a.jsxs(Qe,{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs(_e,{children:["Historial de Versiones (",y.length,")"]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Restaura una versin anterior del manual"})]}),a.jsxs("div",{className:"space-y-2",children:[y.map((I,R)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate","data-testid":`version-${I.id}`,children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium",children:["Versin ",I.versionNumber," - ",I.titulo]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(I.createdAt).toLocaleString()})]}),a.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>j.mutate(I.id),disabled:R===0,"data-testid":`button-restore-${I.id}`,children:[a.jsx(Wm,{className:"h-4 w-4 mr-2"}),R===0?"Versin Actual":"Restaurar"]})]},I.id)),y.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No hay versiones guardadas. Usa "Guardar Versin" para crear una.'})]})]})})})]})]})}async function FYe(){return Rt("GET","/api/system/github/updates")}async function BYe(){return Rt("GET","/api/system/github/config")}async function $Ye(t){return Rt("PUT","/api/system/github/config",t)}async function zYe(t){return Rt("POST",`/api/system/github/updates/${t}/apply`)}async function qYe(){return Rt("GET","/api/system/github/current-commit")}function nce(){const[t,e]=N.useState(null),[n,r]=N.useState([]),[i,s]=N.useState(null),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[d,f]=N.useState(null),[p,m]=N.useState(null),[v,y]=N.useState({githubRepo:"",githubBranch:"main",autoUpdateEnabled:!1,githubToken:"",githubWebhookSecret:""});N.useEffect(()=>{x();const E=setInterval(x,3e4);return()=>clearInterval(E)},[]);const x=async()=>{try{const[E,A,P]=await Promise.all([BYe(),FYe(),qYe()]);e(E),r(A),s(P),y({githubRepo:E.githubRepo,githubBranch:E.githubBranch,autoUpdateEnabled:E.autoUpdateEnabled,githubToken:"",githubWebhookSecret:""})}catch(E){console.error("Error loading GitHub data:",E)}finally{l(!1)}},b=async()=>{u(!0);try{const E={githubRepo:v.githubRepo,githubBranch:v.githubBranch,autoUpdateEnabled:v.autoUpdateEnabled};v.githubToken&&(E.githubToken=v.githubToken),v.githubWebhookSecret&&(E.githubWebhookSecret=v.githubWebhookSecret);const A=await $Ye(E);e(A),y(P=>({...P,githubToken:"",githubWebhookSecret:""}))}catch(E){console.error("Error saving config:",E),alert("Error al guardar la configuracin")}finally{u(!1)}},S=async E=>{if(confirm("Ests seguro de aplicar esta actualizacin? La aplicacin se reiniciar.")){f(E);try{await zYe(E),alert("Actualizacin iniciada. Recarga la pgina en unos segundos."),setTimeout(x,3e3)}catch(A){console.error("Error applying update:",A),alert("Error al aplicar la actualizacin")}finally{f(null)}}},j=E=>{const P={PENDING:{variant:"outline",icon:_c,text:"Pendiente"},APPLYING:{variant:"default",icon:xf,text:"Aplicando..."},COMPLETED:{variant:"secondary",icon:jG,text:"Completada"},FAILED:{variant:"destructive",icon:vu,text:"Fallida"},CHECKING:{variant:"outline",icon:xf,text:"Verificando"},DOWNLOADING:{variant:"default",icon:Ha,text:"Descargando"},INSTALLING:{variant:"default",icon:xf,text:"Instalando"},ROLLED_BACK:{variant:"destructive",icon:iy,text:"Revertida"}}[E]||{variant:"outline",icon:_c,text:E},O=P.icon;return a.jsxs(ct,{variant:P.variant,className:"gap-1",children:[a.jsx(O,{className:"h-3 w-3"}),P.text]})};return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(xf,{className:"h-8 w-8 animate-spin text-gray-400"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Actualizaciones desde GitHub"}),a.jsx("p",{className:"text-muted-foreground",children:"Configura el sistema de actualizaciones automticas desde tu repositorio de GitHub"})]}),i&&a.jsxs(Pf,{children:[a.jsx(Sfe,{className:"h-4 w-4"}),a.jsxs(Mf,{children:[a.jsx("div",{className:"font-semibold",children:"Commit actual del servidor:"}),a.jsxs("div",{className:"font-mono text-sm mt-1",children:[i.commitHash.substring(0,7)," en rama ",a.jsx("code",{children:i.branch})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(Afe,{className:"h-5 w-5"}),"Configuracin de GitHub"]}),a.jsx(jn,{children:"Configura el repositorio y las opciones de actualizacin automtica"})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"githubRepo",children:"Repositorio (owner/repo)"}),a.jsx(Ye,{id:"githubRepo",placeholder:"DigitalNexo/Asesoria-la-Llave-V2",value:v.githubRepo,onChange:E=>y(A=>({...A,githubRepo:E.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ejemplo: DigitalNexo/Asesoria-la-Llave-V2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"githubBranch",children:"Rama"}),a.jsx(Ye,{id:"githubBranch",placeholder:"main",value:v.githubBranch,onChange:E=>y(A=>({...A,githubBranch:E.target.value}))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"githubToken",children:"GitHub Personal Access Token"}),a.jsx(Ye,{id:"githubToken",type:"password",placeholder:"ghp_xxxxxxxxxxxxx (opcional)",value:v.githubToken,onChange:E=>y(A=>({...A,githubToken:E.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Necesario solo para repositorios privados"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"githubWebhookSecret",children:"Webhook Secret"}),a.jsx(Ye,{id:"githubWebhookSecret",type:"password",placeholder:"Tu secret para validar webhooks",value:v.githubWebhookSecret,onChange:E=>y(A=>({...A,githubWebhookSecret:E.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Para validar las peticiones del webhook"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[a.jsx(Va,{id:"autoUpdate",checked:v.autoUpdateEnabled,onCheckedChange:E=>y(A=>({...A,autoUpdateEnabled:E}))}),a.jsx(_e,{htmlFor:"autoUpdate",className:"cursor-pointer",children:"Aplicar actualizaciones automticamente"})]}),a.jsx(pe,{onClick:b,disabled:c,children:c?a.jsxs(a.Fragment,{children:[a.jsx(xf,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar Configuracin"})]})]}),t&&t.githubRepo&&a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Configuracin del Webhook en GitHub"}),a.jsx(jn,{children:"Copia esta URL y adela como webhook en tu repositorio de GitHub"})]}),a.jsx(Qe,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Payload URL"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ye,{readOnly:!0,value:"https://digitalnexo.es/api/system/github/webhook",className:"font-mono text-sm"}),a.jsx(pe,{variant:"outline",onClick:()=>{navigator.clipboard.writeText("https://digitalnexo.es/api/system/github/webhook"),alert("URL copiada al portapapeles")},children:"Copiar"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("p",{children:["Content type: ",a.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"application/json"})]}),a.jsxs("p",{children:["Evento: ",a.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"push"})]})]})]})})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Actualizaciones Disponibles"}),a.jsxs(pe,{variant:"outline",size:"sm",onClick:x,children:[a.jsx(xf,{className:"h-4 w-4 mr-2"}),"Recargar"]})]}),a.jsx(jn,{children:"Historial de commits recibidos desde GitHub"})]}),a.jsx(Qe,{children:n.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Ha,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No hay actualizaciones disponibles"}),a.jsx("p",{className:"text-sm",children:"Los commits se detectarn automticamente cuando hagas push a GitHub"})]}):a.jsx("div",{className:"space-y-3",children:n.map(E=>a.jsx("div",{className:"border rounded-lg p-4 space-y-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("code",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:E.commit_hash?.substring(0,7)}),j(E.status),E.auto_applied&&a.jsx(ct,{variant:"outline",className:"text-xs",children:"Auto"})]}),a.jsx("p",{className:"font-medium",children:E.commit_message}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[a.jsx("span",{children:E.commit_author}),"  ",a.jsx("span",{children:new Date(E.commit_date).toLocaleString("es-ES")}),E.branch&&a.jsxs(a.Fragment,{children:["  ",a.jsx("span",{className:"font-mono",children:E.branch})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[(E.status==="PENDING"||E.status==="FAILED")&&a.jsx(pe,{size:"sm",onClick:()=>S(E.id),disabled:d===E.id,children:d===E.id?a.jsx(xf,{className:"h-4 w-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(DG,{className:"h-4 w-4 mr-1"}),"Aplicar"]})}),E.logs&&a.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>m(E),children:[a.jsx(Cf,{className:"h-4 w-4 mr-1"}),"Logs"]})]})]})},E.id))})})]}),a.jsx(xr,{open:!!p,onOpenChange:()=>m(null),children:a.jsxs(vr,{className:"max-w-4xl max-h-[80vh]",children:[a.jsxs(br,{children:[a.jsxs(wr,{children:["Logs de Actualizacin",p&&a.jsx("code",{className:"ml-2 text-sm font-mono",children:p.commit_hash?.substring(0,7)})]}),a.jsx(_r,{children:p?.commit_message})]}),a.jsxs("div",{className:"overflow-auto",children:[a.jsx("pre",{className:"bg-muted p-4 rounded-lg text-xs font-mono whitespace-pre-wrap",children:p?.logs||"Sin logs disponibles"}),p?.error_message&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"font-semibold text-red-600 mb-2",children:"Error:"}),a.jsx("pre",{className:"bg-red-50 border border-red-200 p-4 rounded-lg text-xs font-mono whitespace-pre-wrap text-red-800",children:p.error_message})]})]})]})})]})}function mK(){const{toast:t}=Dr(),[e]=ca(),[n,r]=N.useState(!1),[i,s]=N.useState(null),[o,l]=N.useState({username:"",email:"",password:"",roleId:""}),[c,u]=N.useState(!1),[d,f]=N.useState(null),[p,m]=N.useState({name:"",description:""}),[v,y]=N.useState([]),[x,b]=N.useState(!1),[S,j]=N.useState(null),[E,A]=N.useState({nombre:"",host:"",port:"587",user:"",password:"",isPredeterminada:!1,activa:!0}),[P,O]=N.useState(!1),{data:k,isLoading:C}=Wt({queryKey:["/api/users"]}),{data:I,isLoading:R}=Wt({queryKey:["/api/activity-logs"]}),{data:D}=Wt({queryKey:["/api/admin/system-settings"]}),{data:L,isLoading:z}=Wt({queryKey:["/api/roles"]}),{data:W}=Wt({queryKey:["/api/permissions"]}),{data:X,isLoading:q}=Wt({queryKey:["/api/admin/smtp-accounts"]}),{data:V}=Wt({queryKey:["/api/system/config"]}),[Y,re]=N.useState({backup_db_pattern:"",backup_files_pattern:""});N.useEffect(()=>{if(V){const se=V.find(St=>St.key==="backup_db_pattern"),Le=V.find(St=>St.key==="backup_files_pattern");re({backup_db_pattern:se?.value||"",backup_files_pattern:Le?.value||""})}},[V]);const[Q,F]=N.useState(!1),[G,te]=N.useState(null),{data:le}=Wt({queryKey:["/api/system/version"]}),{data:he,isLoading:me}=Wt({queryKey:["/api/system/backups"]}),xe=$t({mutationFn:async se=>await Rt("POST","/api/users",se),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario creado exitosamente"}),r(!1),qe()}}),de=$t({mutationFn:async({id:se,data:Le})=>await Rt("PATCH",`/api/users/${se}`,Le),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario actualizado exitosamente"}),r(!1),qe()}}),Ne=$t({mutationFn:async se=>await Rt("DELETE",`/api/users/${se}`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario eliminado exitosamente"})},onError:se=>{t({title:"Error al eliminar usuario",description:se.message,variant:"destructive"})}}),Ce=$t({mutationFn:async se=>await Rt("PATCH",`/api/users/${se}/toggle-active`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/users"]}),t({title:"Estado del usuario actualizado"})},onError:se=>{t({title:"Error al cambiar estado",description:se.message,variant:"destructive"})}}),ae=$t({mutationFn:async se=>await Rt("PATCH","/api/admin/system-settings",{registrationEnabled:se}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/system-settings"]}),t({title:"Configuracin actualizada exitosamente"})},onError:se=>{t({title:"Error al actualizar configuracin",description:se.message,variant:"destructive"})}}),Pe=$t({mutationFn:async se=>{const Le=await Rt("POST","/api/roles",se);return v.length>0&&await Rt("POST",`/api/roles/${Le.id}/permissions`,{permissionIds:v}),Le},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol creado exitosamente"}),u(!1),xt()}}),J=$t({mutationFn:async({id:se,data:Le})=>{const St=await Rt("PATCH",`/api/roles/${se}`,Le);return await Rt("POST",`/api/roles/${se}/permissions`,{permissionIds:v}),St},onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol actualizado exitosamente"}),u(!1),xt()}}),ne=$t({mutationFn:async se=>await Rt("DELETE",`/api/roles/${se}`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol eliminado exitosamente"})},onError:se=>{t({title:"Error al eliminar rol",description:se.message,variant:"destructive"})}}),Re=$t({mutationFn:async se=>await Rt("POST","/api/admin/smtp-accounts",se),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP creada exitosamente"}),b(!1),Ot()}}),dt=$t({mutationFn:async({id:se,data:Le})=>await Rt("PATCH",`/api/admin/smtp-accounts/${se}`,Le),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP actualizada exitosamente"}),b(!1),Ot()}}),et=$t({mutationFn:async se=>await Rt("DELETE",`/api/admin/smtp-accounts/${se}`,{}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP eliminada exitosamente"})}}),Ve=$t({mutationFn:async se=>await Rt("POST","/api/admin/smtp-accounts/test",se),onSuccess:()=>{t({title:"Conexin SMTP exitosa",description:"La configuracin es vlida"})},onError:se=>{t({title:"Error de conexin SMTP",description:se.message,variant:"destructive"})}}),ge=$t({mutationFn:async({key:se,value:Le})=>await Rt("PUT",`/api/system/config/${se}`,{value:Le}),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/system/config"]}),t({title:"Patrn de backup actualizado exitosamente"})},onError:se=>{t({title:"Error al actualizar patrn",description:se.message,variant:"destructive"})}}),[Se,ke]=N.useState({repoUrl:"",branch:"main"}),{data:We}=Wt({queryKey:["/api/admin/github-config"]});N.useEffect(()=>{We&&ke({repoUrl:We.repoUrl||"",branch:We.branch||"main"})},[We]),$t({mutationFn:async se=>await Rt("PUT","/api/admin/github-config",se),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/github-config"]}),cn.invalidateQueries({queryKey:["/api/system/version"]}),t({title:"Configuracin de GitHub guardada exitosamente"})},onError:se=>{t({title:"Error al guardar configuracin",description:se.message,variant:"destructive"})}}),$t({mutationFn:async()=>(F(!0),await Rt("GET","/api/system/version")),onSuccess:se=>{F(!1),cn.invalidateQueries({queryKey:["/api/system/version"]}),se.updateAvailable?(te({version:se.latestVersion,changelog:se.changelog}),t({title:"Actualizacin disponible",description:`Versin ${se.latestVersion} disponible`})):t({title:"Sistema actualizado",description:"Ya tienes la ltima versin instalada"})},onError:se=>{F(!1),t({title:"Error al comprobar actualizaciones",description:se.message,variant:"destructive"})}}),$t({mutationFn:async()=>await Rt("POST","/api/system/update",{}),onSuccess:()=>{t({title:"Actualizacin iniciada",description:"El sistema se actualizar y reiniciar automticamente"}),te(null),cn.invalidateQueries({queryKey:["/api/system/version"]})},onError:se=>{t({title:"Error al actualizar",description:se.message,variant:"destructive"})}}),$t({mutationFn:async se=>await Rt("POST",`/api/system/restore/${se}`,{}),onSuccess:()=>{t({title:"Restauracin iniciada",description:"El sistema se restaurar y reiniciar automticamente"}),cn.invalidateQueries({queryKey:["/api/system/backups"]})},onError:se=>{t({title:"Error al restaurar",description:se.message,variant:"destructive"})}});const Ke=se=>{if(!se)return"";const Le=new Date;function St(On){const en=new Date(On.getTime());en.setHours(0,0,0,0),en.setDate(en.getDate()+4-(en.getDay()||7));const sr=new Date(en.getFullYear(),0,1);return Math.ceil(((en.getTime()-sr.getTime())/864e5+1)/7)}function Tn(On){const sr=new Date(On.getFullYear(),On.getMonth(),1).getDay(),Ii=1+(sr===0?1:sr===1?0:8-sr),Ys=On.getDate();return Ys<Ii?0:Math.floor((Ys-Ii)/7)+1}const Dt=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],wt=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],At={"{fecha}":Le.toISOString().split("T")[0].replace(/-/g,""),"{hora}":Le.toTimeString().split(" ")[0].replace(/:/g,""),"{version}":"1.0.0","{timestamp}":Date.now().toString(),"{YEAR_4}":Le.getFullYear().toString(),"{YEAR_2}":Le.getFullYear().toString().slice(-2),"{MONTH_NUMBER}":(Le.getMonth()+1).toString().padStart(2,"0"),"{MONTH_NAME}":Dt[Le.getMonth()],"{MONTH_DAY_NUMBER}":Le.getDate().toString().padStart(2,"0"),"{WEEK_DAY_NUMBER}":(Le.getDay()||7).toString(),"{WEEK_DAY_NAME}":wt[Le.getDay()],"{HOURS}":Le.getHours().toString().padStart(2,"0"),"{MINUTES}":Le.getMinutes().toString().padStart(2,"0"),"{SECONDS}":Le.getSeconds().toString().padStart(2,"0"),"{WEEK_NUMBER}":St(Le).toString(),"{WEEK_NUMBER_IN_THE_MONTH}":Tn(Le).toString()};let Bt=se;return Object.entries(At).forEach(([On,en])=>{Bt=Bt.replaceAll(On,en)}),Bt},qe=()=>{l({username:"",email:"",password:"",roleId:L?.[0]?.id||""}),s(null)},nt=se=>{s(se),l({username:se.username,email:se.email,password:"",roleId:se.roleId||""}),r(!0)},_t=se=>{if(se.preventDefault(),i){const Le={username:o.username,email:o.email,roleId:o.roleId};o.password&&(Le.password=o.password),de.mutate({id:i.id,data:Le})}else xe.mutate(o)},xt=()=>{m({name:"",description:""}),y([]),f(null)},Ot=()=>{A({nombre:"",host:"",port:"587",user:"",password:"",isPredeterminada:!1,activa:!0}),j(null)},Yt=se=>{j(se),A({nombre:se.nombre,host:se.host,port:se.port.toString(),user:se.user,password:"",isPredeterminada:se.isPredeterminada,activa:se.activa}),b(!0)},Ct=se=>{if(se.preventDefault(),S){const Le={...E};Le.password||delete Le.password,dt.mutate({id:S.id,data:Le})}else Re.mutate(E)},$n=()=>{O(!0),Ve.mutate({host:E.host,port:E.port,user:E.user,password:E.password},{onSettled:()=>O(!1)})},Pn=se=>{f(se),m({name:se.name,description:se.description||""});const Le=se.permissions?.map(St=>St.permission.id)||[];y(Le),u(!0)},Ht=se=>{se.preventDefault(),d?J.mutate({id:d.id,data:p}):Pe.mutate(p)},xn=se=>{y(Le=>Le.includes(se)?Le.filter(St=>St!==se):[...Le,se])},ir=se=>{if(!se)return a.jsx(ct,{variant:"outline",children:"Sin rol"});const Le=L?.find(Tn=>Tn.id===se);if(!Le)return a.jsx(ct,{variant:"outline",children:"Sin rol"});const St=Le.isSystem?"text-primary bg-primary/10":"text-chart-2 bg-chart-2/10";return a.jsx(ct,{variant:"outline",className:St,children:Le.name})},on=se=>{const Le={clientes:"text-chart-1 bg-chart-1/10",impuestos:"text-chart-2 bg-chart-2/10",tareas:"text-chart-3 bg-chart-3/10",manuales:"text-chart-4 bg-chart-4/10",usuarios:"text-chart-5 bg-chart-5/10"};return a.jsx(ct,{variant:"outline",className:Le[se]||"text-muted-foreground bg-muted",children:se})},Cn=se=>se?se.startsWith("/admin/sessions")?"sessions":se.startsWith("/admin/smtp-accounts")?"smtp-accounts":se.startsWith("/admin/storage-config")?"storage":"users":"users",[bn,Cr]=N.useState(()=>Cn(e));N.useEffect(()=>{Cr(Cn(e))},[e]);const[ur,vn]=N.useState(!1),{data:zt,isLoading:je}=Wt({queryKey:["/api/admin/sessions",ur?"all":"active"],queryFn:async()=>{const Le=await fetch(ur?"/api/admin/sessions/all":"/api/admin/sessions",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Le.ok)throw new Error("Error al cargar sesiones");return Le.json()},enabled:bn==="sessions",refetchInterval:5e3});return C||R?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(pr,{className:"h-9 w-48"}),a.jsx("div",{className:"space-y-4",children:[...Array(5)].map((se,Le)=>a.jsx(pr,{className:"h-16"},Le))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Administracin"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestin de usuarios y configuracin del sistema"})]}),a.jsxs(kc,{value:bn,onValueChange:se=>Cr(se),className:"space-y-6",children:[a.jsxs(ql,{className:"h-auto grid grid-cols-2 md:grid-cols-4 gap-1 p-1",children:[a.jsxs(Wn,{value:"users","data-testid":"tab-users",children:[a.jsx(ip,{className:"h-4 w-4 mr-2"}),"Usuarios"]}),a.jsxs(Wn,{value:"roles","data-testid":"tab-roles",children:[a.jsx(Sm,{className:"h-4 w-4 mr-2"}),"Roles y Permisos"]}),a.jsxs(Wn,{value:"logs","data-testid":"tab-logs",children:[a.jsx(MC,{className:"h-4 w-4 mr-2"}),"Logs de Actividad"]}),a.jsxs(Wn,{value:"settings","data-testid":"tab-settings",children:[a.jsx(zj,{className:"h-4 w-4 mr-2"}),"Configuracin"]}),a.jsxs(Wn,{value:"smtp-accounts","data-testid":"tab-smtp-accounts",children:[a.jsx(oD,{className:"h-4 w-4 mr-2"}),"Cuentas SMTP"]}),a.jsx(Wn,{value:"sessions","data-testid":"tab-sessions",children:a.jsxs(Cb,{href:"/admin/sessions",className:"flex items-center",children:[a.jsx(ip,{className:"h-4 w-4 mr-2"}),"Usuarios conectados"]})}),a.jsxs(Wn,{value:"system-updates","data-testid":"tab-system-updates",children:[a.jsx(xf,{className:"h-4 w-4 mr-2"}),"Actualizaciones"]}),a.jsxs(Wn,{value:"storage","data-testid":"tab-storage",children:[a.jsx(CP,{className:"h-4 w-4 mr-2"}),"Almacenamiento"]})]}),a.jsxs(or,{value:"users",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestin de Usuarios"}),a.jsxs(xr,{open:n,onOpenChange:r,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:qe,"data-testid":"button-add-user",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:i?"Editar Usuario":"Nuevo Usuario"}),a.jsx(_r,{children:i?"Actualiza los datos del usuario":"Crea un nuevo usuario del sistema"})]}),a.jsxs("form",{onSubmit:_t,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"username",children:"Usuario *"}),a.jsx(Ye,{id:"username",value:o.username,onChange:se=>l({...o,username:se.target.value}),required:!0,"data-testid":"input-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"email",children:"Email *"}),a.jsx(Ye,{id:"email",type:"email",value:o.email,onChange:se=>l({...o,email:se.target.value}),required:!0,"data-testid":"input-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"password",children:i?"Nueva Contrasea (dejar en blanco para no cambiar)":"Contrasea *"}),a.jsx(Ye,{id:"password",type:"password",value:o.password,onChange:se=>l({...o,password:se.target.value}),required:!i,"data-testid":"input-password"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"role",children:"Rol *"}),a.jsxs(Fn,{value:o.roleId,onValueChange:se=>l({...o,roleId:se}),children:[a.jsx(Rn,{"data-testid":"select-role",children:a.jsx(Bn,{placeholder:"Selecciona un rol"})}),a.jsx(Dn,{children:L?.map(se=>a.jsx(lt,{value:se.id,children:se.name},se.id))})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{r(!1),qe()},children:"Cancelar"}),a.jsx(pe,{type:"submit","data-testid":"button-submit-user",children:i?"Actualizar":"Crear"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{children:["Usuarios del Sistema (",k?.length||0,")"]})}),a.jsx(Qe,{children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Usuario"}),a.jsx(Ze,{children:"Email"}),a.jsx(Ze,{children:"Rol"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Fecha de Creacin"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:!k||k.length===0?a.jsx(gn,{children:a.jsx(He,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No hay usuarios registrados"})}):k.map(se=>a.jsxs(gn,{"data-testid":`row-user-${se.id}`,children:[a.jsx(He,{className:"font-medium",children:se.username}),a.jsx(He,{children:se.email}),a.jsx(He,{children:ir(se.roleId)}),a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ct,{variant:se.isActive?"default":"secondary","data-testid":`badge-status-${se.id}`,children:se.isActive?"Activo":"Inactivo"}),a.jsx(Va,{checked:se.isActive,onCheckedChange:()=>Ce.mutate(se.id),disabled:Ce.isPending,"data-testid":`switch-active-${se.id}`})]})}),a.jsx(He,{children:new Date(se.createdAt).toLocaleDateString()}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>nt(se),"data-testid":`button-edit-${se.id}`,children:a.jsx(fd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>Ne.mutate(se.id),"data-testid":`button-delete-${se.id}`,children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},se.id))})]})})]})]}),a.jsxs(or,{value:"roles",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestin de Roles y Permisos"}),a.jsxs(xr,{open:c,onOpenChange:u,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:xt,"data-testid":"button-add-role",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nuevo Rol"]})}),a.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:d?"Editar Rol":"Nuevo Rol"}),a.jsx(_r,{children:d?"Actualiza el rol y sus permisos":"Crea un nuevo rol personalizado con permisos especficos"})]}),a.jsxs("form",{onSubmit:Ht,className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"role-name",children:"Nombre del Rol *"}),a.jsx(Ye,{id:"role-name",value:p.name,onChange:se=>m({...p,name:se.target.value}),required:!0,disabled:d?.isSystem,placeholder:"Ej: Contable Senior","data-testid":"input-role-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"role-description",children:"Descripcin"}),a.jsx(Ye,{id:"role-description",value:p.description,onChange:se=>m({...p,description:se.target.value}),placeholder:"Descripcin del rol...","data-testid":"input-role-description"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(_e,{className:"text-base font-semibold",children:"Permisos"}),a.jsx("div",{className:"border rounded-lg p-4 space-y-4 max-h-96 overflow-y-auto",children:Object.entries(W?.reduce((se,Le)=>(se[Le.resource]||(se[Le.resource]=[]),se[Le.resource].push(Le),se),{})||{}).map(([se,Le])=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium capitalize text-sm",children:se}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pl-4",children:Le.map(St=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:St.id,checked:v.includes(St.id),onCheckedChange:()=>xn(St.id),"data-testid":`checkbox-permission-${St.resource}-${St.action}`}),a.jsx(_e,{htmlFor:St.id,className:"text-sm font-normal cursor-pointer",children:St.action})]},St.id))})]},se))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," permiso(s) seleccionado(s)"]})]}),a.jsxs(ss,{children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{u(!1),xt()},children:"Cancelar"}),a.jsx(pe,{type:"submit","data-testid":"button-submit-role",children:d?"Actualizar":"Crear"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{children:["Roles del Sistema (",L?.length||0,")"]})}),a.jsx(Qe,{children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nombre del Rol"}),a.jsx(Ze,{children:"Descripcin"}),a.jsx(Ze,{children:"Usuarios"}),a.jsx(Ze,{children:"Permisos"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:!L||L.length===0?a.jsx(gn,{children:a.jsx(He,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No hay roles configurados"})}):L.map(se=>a.jsxs(gn,{"data-testid":`row-role-${se.id}`,children:[a.jsx(He,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[se.name,se.isSystem&&a.jsxs(ct,{variant:"outline",className:"text-xs",children:[a.jsx(aD,{className:"h-3 w-3 mr-1"}),"Sistema"]})]})}),a.jsx(He,{className:"text-muted-foreground",children:se.description||"-"}),a.jsx(He,{children:a.jsxs(ct,{variant:"outline",children:[se._count?.users||0," usuarios"]})}),a.jsx(He,{children:a.jsxs(ct,{variant:"outline",children:[se.permissions?.length||0," permisos"]})}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>Pn(se),"data-testid":`button-edit-role-${se.id}`,children:a.jsx(fd,{className:"h-4 w-4"})}),!se.isSystem&&a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>ne.mutate(se.id),"data-testid":`button-delete-role-${se.id}`,children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},se.id))})]})})]})]}),a.jsxs(or,{value:"logs",className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Registro de Actividad"}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Actividad Reciente"})}),a.jsx(Qe,{className:"p-0",children:!I||I.length===0?a.jsx("div",{className:"text-center text-muted-foreground py-12",children:"No hay actividad registrada"}):a.jsx("div",{className:"divide-y",children:I.slice(0,50).map(se=>a.jsx("div",{className:"p-4 hover-elevate","data-testid":`row-log-${se.id}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("p",{className:"font-medium",children:se.user?.username||"Usuario desconocido"}),on(se.modulo)]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:se.accion}),se.detalles&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:se.detalles})]}),a.jsx("time",{className:"text-sm text-muted-foreground",children:new Date(se.fecha).toLocaleString()})]})},se.id))})})]})]}),a.jsxs(or,{value:"settings",className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Configuracin del Sistema"}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Control de Acceso"})}),a.jsx(Qe,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(_e,{htmlFor:"registration-enabled",children:"Permitir registro de nuevos usuarios"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cuando est deshabilitado, solo los administradores pueden crear usuarios"})]}),a.jsx(Va,{id:"registration-enabled",checked:D?.registrationEnabled??!0,onCheckedChange:se=>ae.mutate(se),"data-testid":"switch-registration"})]})})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Configuracin de Backups"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Personaliza los patrones de nombres para los archivos de respaldo"})]}),a.jsxs(Qe,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"backup-db-pattern",children:"Patrn para Backup de Base de Datos"}),a.jsx(Ye,{id:"backup-db-pattern",value:Y.backup_db_pattern,onChange:se=>re({...Y,backup_db_pattern:se.target.value}),placeholder:"backup_db_{fecha}_{hora}","data-testid":"input-backup-db-pattern"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vista previa: ",a.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[Ke(Y.backup_db_pattern),".sql"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"backup-files-pattern",children:"Patrn para Backup de Archivos"}),a.jsx(Ye,{id:"backup-files-pattern",value:Y.backup_files_pattern,onChange:se=>re({...Y,backup_files_pattern:se.target.value}),placeholder:"backup_files_{fecha}_{hora}","data-testid":"input-backup-files-pattern"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vista previa: ",a.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[Ke(Y.backup_files_pattern),".zip"]})]})]})]}),a.jsxs("div",{className:"bg-muted/50 p-4 rounded-md space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Variables disponibles:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{fecha}"})," - Fecha actual (YYYYMMDD)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{hora}"})," - Hora actual (HHMMSS)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{version}"})," - Versin del sistema"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{timestamp}"})," - Timestamp Unix"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{YEAR_4}"})," - Ao 4 dgitos (2025)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{YEAR_2}"})," - Ao 2 dgitos (25)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_NUMBER}"})," - Mes numrico (01-12)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_NAME}"})," - Nombre del mes (Enero-Diciembre)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_DAY_NUMBER}"})," - Da del mes (01-31)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_DAY_NUMBER}"})," - Da semana numrico (1-7)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_DAY_NAME}"})," - Da de la semana (Lunes-Domingo)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{HOURS}"})," - Hora en formato 24h (00-23)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MINUTES}"})," - Minutos (00-59)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{SECONDS}"})," - Segundos (00-59)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_NUMBER}"})," - Semana ISO-8601 del ao (1-53)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_NUMBER_IN_THE_MONTH}"})," - Semana del mes (0-5)"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{onClick:()=>{ge.mutate({key:"backup_db_pattern",value:Y.backup_db_pattern})},disabled:!Y.backup_db_pattern,"data-testid":"button-save-db-pattern",children:"Guardar Patrn BD"}),a.jsx(pe,{onClick:()=>{ge.mutate({key:"backup_files_pattern",value:Y.backup_files_pattern})},disabled:!Y.backup_files_pattern,"data-testid":"button-save-files-pattern",variant:"outline",children:"Guardar Patrn Archivos"})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Personalizacin"})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"company-name",children:"Nombre de la Empresa"}),a.jsx(Ye,{id:"company-name",defaultValue:"Asesora La Llave","data-testid":"input-company-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"logo",children:"Logo de la Empresa"}),a.jsx(Ye,{id:"logo",type:"file",accept:"image/*","data-testid":"input-logo"})]}),a.jsx(pe,{"data-testid":"button-save-branding",children:"Guardar Cambios"})]})]})]}),a.jsxs(or,{value:"smtp-accounts",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Cuentas SMTP"}),a.jsxs(xr,{open:x,onOpenChange:b,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>Ot(),"data-testid":"button-add-smtp-account",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nueva Cuenta SMTP"]})}),a.jsxs(vr,{className:"sm:max-w-[600px]",children:[a.jsxs(br,{children:[a.jsxs(wr,{children:[S?"Editar":"Nueva"," Cuenta SMTP"]}),a.jsx(_r,{children:"Configure una cuenta SMTP para el envo de notificaciones"})]}),a.jsxs("form",{onSubmit:Ct,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(_e,{htmlFor:"smtp-nombre",children:"Nombre de la Cuenta *"}),a.jsx(Ye,{id:"smtp-nombre",value:E.nombre,onChange:se=>A({...E,nombre:se.target.value}),placeholder:"Ej: Gmail Principal",required:!0,"data-testid":"input-smtp-nombre"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"smtp-form-host",children:"Servidor SMTP *"}),a.jsx(Ye,{id:"smtp-form-host",value:E.host,onChange:se=>A({...E,host:se.target.value}),placeholder:"smtp.gmail.com",required:!0,"data-testid":"input-smtp-form-host"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"smtp-form-port",children:"Puerto *"}),a.jsx(Ye,{id:"smtp-form-port",type:"number",value:E.port,onChange:se=>A({...E,port:se.target.value}),placeholder:"587",required:!0,"data-testid":"input-smtp-form-port"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"smtp-form-user",children:"Usuario *"}),a.jsx(Ye,{id:"smtp-form-user",value:E.user,onChange:se=>A({...E,user:se.target.value}),placeholder:"usuario@gmail.com",required:!0,"data-testid":"input-smtp-form-user"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"smtp-form-password",children:"Contrasea *"}),a.jsx(Ye,{id:"smtp-form-password",type:"password",value:E.password,onChange:se=>A({...E,password:se.target.value}),placeholder:S?"(dejar vaco para mantener)":"",required:!S,"data-testid":"input-smtp-form-password"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"smtp-predeterminada",checked:E.isPredeterminada,onCheckedChange:se=>A({...E,isPredeterminada:!!se}),"data-testid":"checkbox-smtp-predeterminada"}),a.jsx(_e,{htmlFor:"smtp-predeterminada",className:"text-sm",children:"Cuenta Predeterminada"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"smtp-activa",checked:E.activa,onCheckedChange:se=>A({...E,activa:!!se}),"data-testid":"checkbox-smtp-activa"}),a.jsx(_e,{htmlFor:"smtp-activa",className:"text-sm",children:"Activa"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{type:"button",variant:"outline",onClick:$n,disabled:!E.host||!E.port||!E.user||!E.password||P,"data-testid":"button-test-smtp",children:P?"Probando...":"Probar Conexin"}),a.jsxs(pe,{type:"submit","data-testid":"button-submit-smtp",children:[S?"Actualizar":"Crear"," Cuenta"]})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Cuentas SMTP Configuradas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona mltiples cuentas SMTP para el envo de notificaciones"})]}),a.jsx(Qe,{children:q?a.jsxs("div",{className:"space-y-2",children:[a.jsx(pr,{className:"h-12 w-full"}),a.jsx(pr,{className:"h-12 w-full"})]}):X&&X.length>0?a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Servidor"}),a.jsx(Ze,{children:"Puerto"}),a.jsx(Ze,{children:"Usuario"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Acciones"})]})}),a.jsx(is,{children:X.map(se=>a.jsxs(gn,{children:[a.jsxs(He,{className:"font-medium",children:[se.nombre,se.isPredeterminada&&a.jsx(ct,{variant:"secondary",className:"ml-2",children:"Predeterminada"})]}),a.jsx(He,{children:se.host}),a.jsx(He,{children:se.port}),a.jsx(He,{children:se.user}),a.jsx(He,{children:a.jsx(ct,{variant:se.activa?"default":"secondary",children:se.activa?"Activa":"Inactiva"})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>Yt(se),"data-testid":`button-edit-smtp-${se.id}`,children:a.jsx(fd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>et.mutate(se.id),"data-testid":`button-delete-smtp-${se.id}`,children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},se.id))})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay cuentas SMTP configuradas. Crea una para empezar."})})]})]}),a.jsxs(or,{value:"sessions",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestin de Sesiones"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitoreo avanzado de sesiones de usuario"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:ur?"default":"outline",size:"sm",onClick:()=>vn(!ur),children:ur?"Solo Activas":"Ver Todas"}),a.jsxs(pe,{variant:"outline",size:"sm",onClick:async()=>{try{const se=await Rt("POST","/api/admin/sessions/cleanup");cn.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:"Limpieza completada",description:`${se.totalCleaned} sesiones procesadas (${se.deletedCount} eliminadas, ${se.markedInactiveCount} marcadas como inactivas)`})}catch(se){t({title:"Error",description:se.message||String(se),variant:"destructive"})}},children:[a.jsx(FG,{className:"h-4 w-4 mr-2"}),"Limpiar Sesiones"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Xe,{children:a.jsx(Qe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sesiones Activas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:zt?.items?.filter(se=>se.status==="active").length||0})]}),a.jsx(MC,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Xe,{children:a.jsx(Qe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sesiones Inactivas"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:zt?.items?.filter(se=>se.status==="idle").length||0})]}),a.jsx(MC,{className:"h-8 w-8 text-yellow-600"})]})})}),a.jsx(Xe,{children:a.jsx(Qe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sospechosas"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:zt?.items?.filter(se=>se.suspicious).length||0})]}),a.jsx(Sm,{className:"h-8 w-8 text-red-600"})]})})}),a.jsx(Xe,{children:a.jsx(Qe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sesiones"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:zt?.total||0})]}),a.jsx(ip,{className:"h-8 w-8 text-blue-600"})]})})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{children:[ur?"Todas las Sesiones":"Sesiones Activas"," (",zt?.total??0,")",ur&&a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Incluye sesiones cerradas)"})]})}),a.jsx(Qe,{children:je?a.jsxs("div",{className:"space-y-2",children:[a.jsx(pr,{className:"h-12 w-full"}),a.jsx(pr,{className:"h-12 w-full"})]}):!zt||!zt.items||zt.items.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay sesiones"}):a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Usuario"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"IP / Ubicacin"}),a.jsx(Ze,{children:"Dispositivo"}),a.jsx(Ze,{children:"ltima Actividad"}),a.jsx(Ze,{children:"Duracin"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:zt.items.map(se=>a.jsxs(gn,{className:se.suspicious?"bg-red-50 dark:bg-red-950/20":"",children:[a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:se.user?.username||""}),a.jsx("p",{className:"text-sm text-muted-foreground",children:se.user?.role?.name||""})]}),se.suspicious&&a.jsx(Sm,{className:"h-4 w-4 text-red-500"})]})}),a.jsx(He,{children:a.jsx(ct,{variant:se.status==="active"?"default":se.status==="idle"?"secondary":"outline",className:se.status==="active"?"bg-green-100 text-green-800":se.status==="idle"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:se.status==="active"?"Activo":se.status==="idle"?"Inactivo":"Cerrado"})}),a.jsx(He,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-mono text-sm",children:se.ip}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[se.location?.city,", ",se.location?.country,se.location?.isVpn&&a.jsx("span",{className:"text-red-500 ml-1",children:"(VPN)"})]})]})}),a.jsx(He,{children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:se.deviceInfo?.type||"Unknown"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:se.deviceInfo?.platform||"Unknown"})]})}),a.jsx(He,{children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:se.lastSeenAt?new Date(se.lastSeenAt).toLocaleString():"-"}),se.minutesSinceLastSeen!==void 0&&a.jsx("p",{className:"text-xs text-muted-foreground",children:se.minutesSinceLastSeen<60?`Hace ${se.minutesSinceLastSeen} min`:`Hace ${Math.floor(se.minutesSinceLastSeen/60)}h ${se.minutesSinceLastSeen%60}min`})]})}),a.jsx(He,{children:a.jsxs("p",{className:"text-sm",children:[se.createdAt?Math.floor((Date.now()-new Date(se.createdAt).getTime())/(1e3*60*60)):0,"h"]})}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(pe,{variant:"destructive",size:"sm",onClick:async()=>{try{await Rt("POST",`/api/admin/sessions/${se.id}/terminate`),cn.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:"Sesin terminada",description:`La sesin de ${se.user?.username} ha sido terminada y el usuario ser redirigido al login`})}catch(Le){t({title:"Error",description:Le.message||String(Le),variant:"destructive"})}},children:a.jsx(vu,{className:"h-4 w-4"})}),a.jsx(pe,{variant:se.suspicious?"destructive":"outline",size:"sm",onClick:async()=>{try{const Le=se.suspicious?"unflag":"flag";await Rt("POST",`/api/admin/sessions/${se.id}/${Le}`),cn.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:se.suspicious?"Marcado como seguro":"Marcado como sospechoso",description:se.suspicious?"La sesin ya no est marcada como sospechosa":"La sesin ha sido marcada como sospechosa"})}catch(Le){t({title:"Error",description:Le.message||String(Le),variant:"destructive"})}},children:a.jsx(Sm,{className:"h-4 w-4"})})]})})]},se.id))})]})})]})]}),a.jsx(or,{value:"system-updates",className:"space-y-4",children:a.jsx(nce,{})}),a.jsx(or,{value:"storage",className:"space-y-4",children:a.jsx(UYe,{})})]})]})}function UYe(){const{toast:t}=Dr(),[e,n]=N.useState("LOCAL"),[r,i]=N.useState(!1),[s,o]=N.useState(!1),[l,c]=N.useState({host:"",port:"21",username:"",password:"",basePath:"/uploads"}),[u,d]=N.useState({host:"",shareName:"",username:"",password:"",domain:"",basePath:"/uploads"}),{data:f,isLoading:p}=Wt({queryKey:["/api/admin/storage-config"]});N.useEffect(()=>{f&&(n(f.type),i(f.active),f.type==="FTP"&&f.config?c({host:f.config.host||"",port:(f.config.port||21).toString(),username:f.config.username||"",password:"",basePath:f.config.basePath||"/uploads"}):f.type==="SMB"&&f.config&&d({host:f.config.host||"",shareName:f.config.shareName||"",username:f.config.username||"",password:"",domain:f.config.domain||"",basePath:f.config.basePath||"/uploads"}))},[f]);const m=$t({mutationFn:async x=>Rt("POST","/api/admin/storage-config",x),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/admin/storage-config"]}),t({title:"Configuracin guardada",description:"La configuracin de almacenamiento se ha actualizado correctamente"})},onError:x=>{t({title:"Error",description:x.message||"No se pudo guardar la configuracin",variant:"destructive"})}}),v=async()=>{o(!0);try{const b=await Rt("POST","/api/admin/storage-config/test",{type:e,config:e==="FTP"?l:e==="SMB"?u:null});t({title:"Conexin exitosa",description:b.message||"La conexin se estableci correctamente"})}catch(x){t({title:"Error de conexin",description:x.message||"No se pudo conectar al servidor",variant:"destructive"})}finally{o(!1)}},y=()=>{const x=e==="LOCAL"?null:e==="FTP"?{...l,port:parseInt(l.port)}:u;m.mutate({type:e,active:r,config:x})};return p?a.jsxs("div",{className:"space-y-4",children:[a.jsx(pr,{className:"h-8 w-64"}),a.jsx(pr,{className:"h-32"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Configuracin de Almacenamiento"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configura dnde se almacenan los archivos del sistema"})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs(gt,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Proveedor de Almacenamiento"}),f&&a.jsx(ct,{variant:f.active?"default":"secondary",children:f.active?"Activo":"Inactivo"})]})}),a.jsxs(Qe,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Tipo de Almacenamiento"}),a.jsxs(Fn,{value:e,onValueChange:x=>n(x),children:[a.jsx(Rn,{"data-testid":"select-storage-type",children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"LOCAL",children:"Local (Servidor)"}),a.jsx(lt,{value:"FTP",children:"FTP"}),a.jsx(lt,{value:"SMB",children:"SMB/CIFS (NAS)"})]})]})]}),e==="LOCAL"&&a.jsx("div",{className:"rounded-lg border p-4 bg-muted/50",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Tfe,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium",children:"Almacenamiento Local"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Los archivos se guardan en el servidor en: ",a.jsx("code",{className:"px-1 py-0.5 bg-background rounded text-xs",children:"/uploads"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"No requiere configuracin adicional."})]})]})}),e==="FTP"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"ftp-host",children:"Servidor FTP *"}),a.jsx(Ye,{id:"ftp-host",value:l.host,onChange:x=>c({...l,host:x.target.value}),placeholder:"ftp.ejemplo.com","data-testid":"input-ftp-host"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"ftp-port",children:"Puerto *"}),a.jsx(Ye,{id:"ftp-port",type:"number",value:l.port,onChange:x=>c({...l,port:x.target.value}),placeholder:"21","data-testid":"input-ftp-port"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"ftp-username",children:"Usuario *"}),a.jsx(Ye,{id:"ftp-username",value:l.username,onChange:x=>c({...l,username:x.target.value}),"data-testid":"input-ftp-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"ftp-password",children:"Contrasea *"}),a.jsx(Ye,{id:"ftp-password",type:"password",value:l.password,onChange:x=>c({...l,password:x.target.value}),placeholder:"Dejar vaco para mantener actual","data-testid":"input-ftp-password"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"ftp-basePath",children:"Ruta Base"}),a.jsx(Ye,{id:"ftp-basePath",value:l.basePath,onChange:x=>c({...l,basePath:x.target.value}),placeholder:"/uploads","data-testid":"input-ftp-basepath"})]})]}),e==="SMB"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-host",children:"Servidor SMB *"}),a.jsx(Ye,{id:"smb-host",value:u.host,onChange:x=>d({...u,host:x.target.value}),placeholder:"192.168.1.100","data-testid":"input-smb-host"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-share",children:"Nombre del Recurso Compartido *"}),a.jsx(Ye,{id:"smb-share",value:u.shareName,onChange:x=>d({...u,shareName:x.target.value}),placeholder:"archivos","data-testid":"input-smb-share"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-username",children:"Usuario *"}),a.jsx(Ye,{id:"smb-username",value:u.username,onChange:x=>d({...u,username:x.target.value}),"data-testid":"input-smb-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-password",children:"Contrasea *"}),a.jsx(Ye,{id:"smb-password",type:"password",value:u.password,onChange:x=>d({...u,password:x.target.value}),placeholder:"Dejar vaco para mantener actual","data-testid":"input-smb-password"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-domain",children:"Dominio (opcional)"}),a.jsx(Ye,{id:"smb-domain",value:u.domain,onChange:x=>d({...u,domain:x.target.value}),placeholder:"WORKGROUP","data-testid":"input-smb-domain"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smb-basePath",children:"Ruta Base"}),a.jsx(Ye,{id:"smb-basePath",value:u.basePath,onChange:x=>d({...u,basePath:x.target.value}),placeholder:"/uploads","data-testid":"input-smb-basepath"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(_e,{htmlFor:"storage-active",className:"font-medium",children:"Activar Configuracin"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Esta configuracin est activa y se usa para nuevos archivos":"Activa esta configuracin para empezar a usarla"})]}),a.jsx(Va,{id:"storage-active",checked:r,onCheckedChange:i,"data-testid":"switch-storage-active"})]}),a.jsxs("div",{className:"flex gap-2",children:[e!=="LOCAL"&&a.jsx(pe,{variant:"outline",onClick:v,disabled:s,"data-testid":"button-test-connection",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Mi,{className:"h-4 w-4 mr-2 animate-spin"}),"Probando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gu,{className:"h-4 w-4 mr-2"}),"Probar Conexin"]})}),a.jsx(pe,{onClick:y,disabled:m.isPending,"data-testid":"button-save-storage-config",children:m.isPending?"Guardando...":"Guardar Configuracin"})]})]})]}),f&&f.type!==e&&a.jsxs(Xe,{className:"border-orange-200 dark:border-orange-900",children:[a.jsx(ht,{children:a.jsxs(gt,{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400",children:[a.jsx(jF,{className:"h-5 w-5"}),"Migracin de Archivos"]})}),a.jsxs(Qe,{children:[a.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Al cambiar el tipo de almacenamiento, los archivos existentes permanecern en ",f.type,". Puedes migrarlos al nuevo almacenamiento desde la seccin de mantenimiento."]}),a.jsxs(pe,{variant:"outline",disabled:!0,children:[a.jsx(jF,{className:"h-4 w-4 mr-2"}),"Migrar Archivos (Prximamente)"]})]})]})]})}const HYe={clients:"Clientes",tasks:"Tareas",client_tax:"Impuestos",manuals:"Manuales",users:"Usuarios"},VYe={CREATE:"default",UPDATE:"secondary",DELETE:"destructive"},WYe={CREATE:"Creacin",UPDATE:"Actualizacin",DELETE:"Eliminacin"};function KYe(){const[t,e]=N.useState("all"),{data:n=[],isLoading:r}=Wt({queryKey:["/api/audit",t],queryFn:async()=>{const s=new URLSearchParams;t!=="all"&&s.append("table",t);const o=await fetch(`/api/audit?${s.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error("Error al cargar auditora");return o.json()}}),i=({anterior:s,nuevo:o})=>{if(!s&&!o)return null;const l=s?JSON.parse(s):{},c=o?JSON.parse(o):{};return a.jsx("div",{className:"mt-2 space-y-1",children:Object.keys({...l,...c}).map(u=>{if(["id","fechaActualizacion","fechaCreacion","created_at","updated_at"].includes(u))return null;const d=l[u],f=c[u];return d===f?null:a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-medium text-muted-foreground",children:[u,":"]})," ",d!==void 0&&a.jsx("span",{className:"line-through text-destructive",children:String(d)}),d!==void 0&&f!==void 0&&"  ",f!==void 0&&a.jsx("span",{className:"text-primary",children:String(f)})]},u)})})};return a.jsxs("div",{className:"container mx-auto py-6 px-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Auditora del Sistema"}),a.jsx("p",{className:"text-muted-foreground",children:"Registro completo de cambios y modificaciones"})]}),a.jsx("div",{className:"mb-6 flex gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cfe,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs(Fn,{value:t,onValueChange:e,children:[a.jsx(Rn,{className:"w-[200px]","data-testid":"select-filter-table",children:a.jsx(Bn,{placeholder:"Filtrar por mdulo"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todos los mdulos"}),a.jsx(lt,{value:"clients",children:"Clientes"}),a.jsx(lt,{value:"tasks",children:"Tareas"}),a.jsx(lt,{value:"client_tax",children:"Impuestos"}),a.jsx(lt,{value:"manuals",children:"Manuales"}),a.jsx(lt,{value:"users",children:"Usuarios"})]})]})]})}),r?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx("div",{className:"h-4 bg-muted rounded w-1/3 animate-pulse"})}),a.jsx(Qe,{children:a.jsx("div",{className:"h-3 bg-muted rounded w-2/3 animate-pulse"})})]},s))}):n.length===0?a.jsx(Xe,{children:a.jsxs(Qe,{className:"py-10 text-center",children:[a.jsx(Vi,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No se encontraron registros de auditora"})]})}):a.jsx("div",{className:"space-y-4",children:n.map(s=>a.jsxs(Xe,{"data-testid":`audit-entry-${s.id}`,children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(gt,{className:"text-lg flex items-center gap-2",children:[a.jsx(ct,{variant:VYe[s.accion],children:WYe[s.accion]}),a.jsx("span",{children:HYe[s.tabla]||s.tabla})]}),a.jsx(jn,{className:"mt-2",children:s.cambios||"Sin descripcin de cambios"})]})})}),a.jsx(Qe,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Km,{className:"h-4 w-4"}),a.jsx("span",{children:s.usuario?.username||"Usuario desconocido"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(_c,{className:"h-4 w-4"}),a.jsx("span",{children:qa(new Date(s.fecha),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:vc})})]})]}),(s.valorAnterior||s.valorNuevo)&&a.jsx(i,{anterior:s.valorAnterior,nuevo:s.valorNuevo})]})})]},s.id))})]})}const gK=[{key:"{nombre_cliente}",description:"Nombre del cliente"},{key:"{email_cliente}",description:"Email del cliente"},{key:"{fecha_vencimiento}",description:"Fecha de vencimiento"}];function GYe(){const[t,e]=N.useState("plantillas"),{toast:n}=Dr(),[r,i]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({nombre:"",asunto:"",contenidoHTML:""}),[u,d]=N.useState(""),[f,p]=N.useState("all"),[m,v]=N.useState(""),[y,x]=N.useState(!1),{data:b,isLoading:S}=Wt({queryKey:["/api/notification-templates"]}),{data:j}=Wt({queryKey:["/api/admin/smtp-accounts"]}),{data:E,isLoading:A}=Wt({queryKey:["/api/notifications/history"],enabled:t==="historial"}),{data:P,isLoading:O}=Wt({queryKey:["/api/notifications/scheduled"],enabled:t==="programadas"}),k=$t({mutationFn:async q=>await Rt("POST","/api/notification-templates",q),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/notification-templates"]}),i(!1),D(),n({title:"Plantilla creada",description:"La plantilla se ha creado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo crear la plantilla.",variant:"destructive"})}}),C=$t({mutationFn:async({id:q,data:V})=>await Rt("PATCH",`/api/notification-templates/${q}`,V),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/notification-templates"]}),i(!1),D(),n({title:"Plantilla actualizada",description:"La plantilla se ha actualizado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo actualizar la plantilla.",variant:"destructive"})}}),I=$t({mutationFn:async q=>await Rt("DELETE",`/api/notification-templates/${q}`),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/notification-templates"]}),n({title:"Plantilla eliminada",description:"La plantilla se ha eliminado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo eliminar la plantilla.",variant:"destructive"})}}),R=$t({mutationFn:async q=>y?await Rt("POST","/api/notifications/schedule",q):await Rt("POST","/api/notifications/send",q),onSuccess:()=>{cn.invalidateQueries({queryKey:["/api/notifications/history"]}),cn.invalidateQueries({queryKey:["/api/notifications/scheduled"]}),d(""),p("all"),v(""),x(!1),n({title:y?"Notificacin programada":"Notificacin enviada",description:y?"La notificacin se ha programado correctamente.":"La notificacin se ha enviado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo enviar la notificacin.",variant:"destructive"})}}),D=()=>{c({nombre:"",asunto:"",contenidoHTML:""}),o(null)},L=()=>{if(!u)return;const q=b?.find(V=>String(V.id)===u);q&&R.mutate({plantillaId:u,smtpAccountId:m||null,destinatarios:f,asunto:q.asunto,contenido:q.contenidoHTML})},z=q=>{o(q),c({nombre:q.nombre,asunto:q.asunto,contenidoHTML:q.contenidoHTML}),i(!0)},W=q=>{q.preventDefault(),s?C.mutate({id:s.id,data:l}):k.mutate(l)},X=q=>{const V=l.contenidoHTML+" "+q+" ";c({...l,contenidoHTML:V})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Sistema de Notificaciones"})}),a.jsxs(kc,{value:t,onValueChange:e,className:"space-y-4",children:[a.jsxs(ql,{children:[a.jsxs(Wn,{value:"plantillas","data-testid":"tab-plantillas",children:[a.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Plantillas"]}),a.jsxs(Wn,{value:"enviar","data-testid":"tab-enviar",children:[a.jsx(y1,{className:"h-4 w-4 mr-2"}),"Enviar Notificacin"]}),a.jsxs(Wn,{value:"historial","data-testid":"tab-historial",children:[a.jsx(Wm,{className:"h-4 w-4 mr-2"}),"Historial"]}),a.jsxs(Wn,{value:"programadas","data-testid":"tab-programadas",children:[a.jsx(_c,{className:"h-4 w-4 mr-2"}),"Programadas"]})]}),a.jsxs(or,{value:"plantillas",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Plantillas de Notificacin"}),a.jsxs(xr,{open:r,onOpenChange:i,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>D(),"data-testid":"button-add-template",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nueva Plantilla"]})}),a.jsxs(vr,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsxs(wr,{children:[s?"Editar":"Nueva"," Plantilla"]}),a.jsx(_r,{children:"Crea plantillas de notificacin reutilizables con variables dinmicas"})]}),a.jsxs("form",{onSubmit:W,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"template-nombre",children:"Nombre de la Plantilla *"}),a.jsx(Ye,{id:"template-nombre",value:l.nombre,onChange:q=>c({...l,nombre:q.target.value}),placeholder:"Ej: Recordatorio de vencimiento",required:!0,"data-testid":"input-template-nombre"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"template-asunto",children:"Asunto del Email *"}),a.jsx(Ye,{id:"template-asunto",value:l.asunto,onChange:q=>c({...l,asunto:q.target.value}),placeholder:"Ej: Recordatorio: Vencimiento prximo",required:!0,"data-testid":"input-template-asunto"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Variables Disponibles"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:gK.map(q=>a.jsxs(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>X(q.key),"data-testid":`button-variable-${q.key}`,children:[a.jsx(EG,{className:"h-3 w-3 mr-1"}),q.key]},q.key))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Haz clic en una variable para insertarla en el contenido"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"template-contenido",children:"Contenido HTML *"}),a.jsx(tce,{content:l.contenidoHTML,onChange:q=>c({...l,contenidoHTML:q})})]}),a.jsx(ss,{children:a.jsxs(pe,{type:"submit","data-testid":"button-submit-template",children:[s?"Actualizar":"Crear"," Plantilla"]})})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Plantillas Creadas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona tus plantillas de notificacin reutilizables"})]}),a.jsx(Qe,{children:S?a.jsxs("div",{className:"space-y-2",children:[a.jsx(pr,{className:"h-12 w-full"}),a.jsx(pr,{className:"h-12 w-full"})]}):b&&b.length>0?a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Asunto"}),a.jsx(Ze,{children:"Tipo"}),a.jsx(Ze,{children:"Variables Usadas"}),a.jsx(Ze,{children:"Acciones"})]})}),a.jsx(is,{children:b.map(q=>{const V=gK.filter(Y=>q.contenidoHTML.includes(Y.key));return a.jsxs(gn,{children:[a.jsx(He,{className:"font-medium","data-testid":`text-template-nombre-${q.id}`,children:q.nombre}),a.jsx(He,{"data-testid":`text-template-asunto-${q.id}`,children:q.asunto}),a.jsx(He,{"data-testid":`text-template-tipo-${q.id}`,children:a.jsx(ct,{variant:q.tipo==="RECORDATORIO"?"default":q.tipo==="URGENTE"?"destructive":"secondary",className:"text-xs",children:q.tipo})}),a.jsx(He,{"data-testid":`text-template-variables-${q.id}`,children:a.jsx("div",{className:"flex flex-wrap gap-1",children:V.length>0?V.map(Y=>a.jsx(ct,{variant:"secondary",className:"text-xs","data-testid":`badge-variable-${Y.key.replace(/[{}]/g,"")}-${q.id}`,children:Y.key},Y.key)):a.jsx("span",{className:"text-sm text-muted-foreground",children:"Sin variables"})})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>z(q),"data-testid":`button-edit-template-${q.id}`,children:a.jsx(fd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>I.mutate(q.id),"data-testid":`button-delete-template-${q.id}`,children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},q.id)})})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay plantillas creadas. Crea una para empezar."})})]})]}),a.jsx(or,{value:"enviar",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Enviar Notificacin"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Enva notificaciones inmediatas o programadas a tus clientes."})]}),a.jsx(Qe,{className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"template-select","data-testid":"label-template-select",children:"Plantilla"}),a.jsxs("select",{id:"template-select",className:"w-full rounded-md border border-input bg-background px-3 py-2","data-testid":"select-template",value:u,onChange:q=>d(q.target.value),children:[a.jsx("option",{value:"",children:"Selecciona una plantilla"}),b?.map(q=>a.jsx("option",{value:q.id,"data-testid":`option-template-${q.id}`,children:q.nombre},q.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{"data-testid":"label-recipients",children:"Destinatarios"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"all-clients",name:"recipients",value:"all",checked:f==="all",onChange:q=>p(q.target.value),"data-testid":"radio-recipients-all"}),a.jsx(_e,{htmlFor:"all-clients",className:"font-normal cursor-pointer",children:"Todos los clientes activos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"autonomos",name:"recipients",value:"AUTONOMO",checked:f==="AUTONOMO",onChange:q=>p(q.target.value),"data-testid":"radio-recipients-autonomo"}),a.jsx(_e,{htmlFor:"autonomos",className:"font-normal cursor-pointer",children:"Solo autnomos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"empresas",name:"recipients",value:"EMPRESA",checked:f==="EMPRESA",onChange:q=>p(q.target.value),"data-testid":"radio-recipients-empresa"}),a.jsx(_e,{htmlFor:"empresas",className:"font-normal cursor-pointer",children:"Solo empresas"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"smtp-select","data-testid":"label-smtp-select",children:"Cuenta SMTP"}),a.jsxs("select",{id:"smtp-select",className:"w-full rounded-md border border-input bg-background px-3 py-2","data-testid":"select-smtp",value:m,onChange:q=>v(q.target.value),children:[a.jsx("option",{value:"",children:"Usar cuenta predeterminada"}),j?.map(q=>a.jsxs("option",{value:q.id,"data-testid":`option-smtp-${q.id}`,children:[q.nombre," ",q.isPredeterminada?"(Predeterminada)":""]},q.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{"data-testid":"label-preview",children:"Vista Previa"}),a.jsx("div",{className:"border rounded-md p-4 bg-muted/50 min-h-[200px]","data-testid":"div-preview",children:u?a.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:b?.find(q=>String(q.id)===u)?.contenidoHTML?.replace(/{nombre_cliente}/g,'<strong class="text-primary">Cliente Ejemplo</strong>')?.replace(/{email_cliente}/g,'<strong class="text-primary">ejemplo@email.com</strong>')?.replace(/{fecha_vencimiento}/g,'<strong class="text-primary">31/12/2025</strong>')||'<p class="text-sm text-muted-foreground">No se encontr la plantilla</p>'}})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona una plantilla para ver la vista previa"})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"schedule-send","data-testid":"checkbox-schedule",checked:y,onChange:q=>x(q.target.checked)}),a.jsx(_e,{htmlFor:"schedule-send",className:"font-normal cursor-pointer",children:"Programar envo"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(pe,{variant:"default","data-testid":"button-send-notification",disabled:!u||R.isPending,onClick:L,children:[a.jsx(oD,{className:"h-4 w-4 mr-2"}),R.isPending?"Enviando...":y?"Programar Envo":"Enviar Ahora"]}),a.jsx(pe,{variant:"outline","data-testid":"button-cancel-send",onClick:()=>{d(""),p("all"),v(""),x(!1)},children:"Cancelar"})]})]})]})})]})}),a.jsx(or,{value:"historial",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Historial de Notificaciones"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Consulta todas las notificaciones enviadas y su estado."})]}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"flex gap-3 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Ye,{placeholder:"Buscar por destinatario...","data-testid":"input-search-history"})}),a.jsxs("select",{className:"rounded-md border border-input bg-background px-3 py-2","data-testid":"select-status-filter",children:[a.jsx("option",{value:"",children:"Todos los estados"}),a.jsx("option",{value:"ENVIADO",children:"Enviado"}),a.jsx("option",{value:"ERROR",children:"Error"}),a.jsx("option",{value:"PENDIENTE",children:"Pendiente"})]})]}),a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Fecha"}),a.jsx(Ze,{children:"Plantilla"}),a.jsx(Ze,{children:"Destinatario"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Cuenta SMTP"})]})}),a.jsx(is,{children:A?a.jsx(gn,{children:a.jsx(He,{colSpan:5,className:"text-center py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):E?.length>0?E.map(q=>a.jsxs(gn,{"data-testid":`row-history-${q.id}`,children:[a.jsx(He,{"data-testid":`text-history-date-${q.id}`,children:new Date(q.fechaEnvio).toLocaleDateString("es-ES")}),a.jsx(He,{"data-testid":`text-history-template-${q.id}`,children:q.template?.nombre||"N/A"}),a.jsx(He,{"data-testid":`text-history-recipients-${q.id}`,children:q.destinatarios==="all"?"Todos":q.destinatarios}),a.jsx(He,{"data-testid":`text-history-status-${q.id}`,children:a.jsx(ct,{variant:q.estado==="ENVIADO"?"default":"destructive",children:q.estado})}),a.jsx(He,{"data-testid":`text-history-smtp-${q.id}`,children:q.smtpAccount?.nombre||"Predeterminada"})]},q.id)):a.jsx(gn,{children:a.jsx(He,{colSpan:5,className:"text-center py-8 text-muted-foreground","data-testid":"text-empty-history",children:"No hay notificaciones en el historial"})})})]})]})]})}),a.jsx(or,{value:"programadas",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Notificaciones Programadas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona y consulta las notificaciones que estn programadas para envo futuro."})]}),a.jsx(Qe,{children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Fecha Programada"}),a.jsx(Ze,{children:"Plantilla"}),a.jsx(Ze,{children:"Destinatarios"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Acciones"})]})}),a.jsx(is,{children:O?a.jsx(gn,{children:a.jsx(He,{colSpan:5,className:"text-center py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):P?.length>0?P.map(q=>a.jsxs(gn,{"data-testid":`row-scheduled-${q.id}`,children:[a.jsx(He,{"data-testid":`text-scheduled-date-${q.id}`,children:new Date(q.fechaProgramada).toLocaleDateString("es-ES")}),a.jsx(He,{"data-testid":`text-scheduled-template-${q.id}`,children:q.template?.nombre||"N/A"}),a.jsx(He,{"data-testid":`text-scheduled-recipients-${q.id}`,children:q.destinatariosSeleccionados==="all"?"Todos":q.destinatariosSeleccionados}),a.jsx(He,{"data-testid":`text-scheduled-status-${q.id}`,children:a.jsx(ct,{variant:"secondary",children:q.estado})}),a.jsx(He,{"data-testid":`div-scheduled-actions-${q.id}`,children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{size:"sm",variant:"outline","data-testid":`button-edit-scheduled-${q.id}`,children:a.jsx(fd,{className:"h-3 w-3"})}),a.jsx(pe,{size:"sm",variant:"outline","data-testid":`button-cancel-scheduled-${q.id}`,children:a.jsx(Wi,{className:"h-3 w-3"})})]})})]},q.id)):a.jsx(gn,{children:a.jsx(He,{colSpan:5,className:"text-center py-8 text-muted-foreground","data-testid":"text-empty-scheduled",children:"No hay notificaciones programadas"})})})]})})]})})]})]})}function YYe(){const[,t]=ca();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Documentacin"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona presupuestos y documentos de tu negocio"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/presupuestos"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(nD,{className:"w-5 h-5 text-blue-500"}),"Presupuestos"]}),a.jsx(jn,{className:"mt-2",children:"Crea, gestiona y parametriza presupuestos"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Sistema OFICIAL/ONLINE"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Clculo automtico con tramos"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Parmetros configurables"})]}),a.jsx(pe,{className:"w-full",children:"Ir a Presupuestos"})]})]}),a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-5 h-5 text-green-500"}),"Documentos"]}),a.jsx(jn,{className:"mt-2",children:"Gestiona documentos, recibos y comprobantes"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Recibos de pago"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Proteccin de datos (RGPD)"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Domiciliacin bancaria"})]}),a.jsx(pe,{className:"w-full",children:"Ir a Documentos"})]})]})]})]})}const Mc="/api/gestoria-budgets";async function XYe(t){const e=new URLSearchParams;t?.tipoGestoria&&e.append("tipo",t.tipoGestoria),t?.estado&&e.append("estado",t.estado),t?.nombreCliente&&e.append("nombreCompleto",t.nombreCliente),t?.nifCif&&e.append("cifNif",t.nifCif),t?.email&&e.append("email",t.email),t?.fechaDesde&&e.append("fechaDesde",t.fechaDesde),t?.fechaHasta&&e.append("fechaHasta",t.fechaHasta);const n=await fetch(`${Mc}?${e}`);if(!n.ok)throw new Error("Error al cargar presupuestos");return(await n.json()).data}async function QYe(t){const e=await fetch(`${Mc}/${t}`);if(!e.ok)throw new Error("Error al cargar presupuesto");return(await e.json()).data}async function ZYe(t){const e=await fetch(Mc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.json();throw new Error(r.message||"Error al crear presupuesto")}return(await e.json()).data}async function JYe(t,e){const n=await fetch(`${Mc}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Error al actualizar presupuesto");return(await n.json()).data}async function eXe(t,e){const n=await fetch(`${Mc}/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({calculation:t,tipo:e})});if(!n.ok)throw new Error("Error al calcular presupuesto");return(await n.json()).data}async function tXe(t,e){if(!(await fetch(`${Mc}/${t}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})})).ok)throw new Error("Error al enviar presupuesto")}async function nXe(t){const e=await fetch(`${Mc}/${t}/accept`,{method:"POST"});if(!e.ok)throw new Error("Error al aceptar presupuesto");return(await e.json()).data}async function rXe(t,e){const n=await fetch(`${Mc}/${t}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({motivoRechazo:e})});if(!n.ok)throw new Error("Error al rechazar presupuesto");return(await n.json()).data}async function iXe(t,e){const n=await fetch(`${Mc}/${t}/convert`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!n.ok)throw new Error("Error al convertir presupuesto");return(await n.json()).data}async function sXe(t){const e=await fetch(`${Mc}/${t}/can-convert`);if(!e.ok)throw new Error("Error al verificar conversin");return(await e.json()).data}async function aXe(t){const e=await fetch(`${Mc}/config/active/${t}`);if(!e.ok)throw new Error(`No hay configuracin activa para ${t}`);return(await e.json()).data}function oXe(t){return Wt({queryKey:["gestoria-budgets",t],queryFn:()=>XYe(t)})}function rce(t){return Wt({queryKey:["gestoria-budget",t],queryFn:()=>QYe(t),enabled:!!t})}function lXe(){const t=mo();return $t({mutationFn:ZYe,onSuccess:()=>{t.invalidateQueries({queryKey:["gestoria-budgets"]})}})}function cXe(){const t=mo();return $t({mutationFn:({id:e,input:n})=>JYe(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function uXe(){return $t({mutationFn:({calculation:t,tipo:e})=>eXe(t,e)})}function dXe(){const t=mo();return $t({mutationFn:({id:e,options:n})=>tXe(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function fXe(){const t=mo();return $t({mutationFn:nXe,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n]})}})}function hXe(){const t=mo();return $t({mutationFn:({id:e,motivoRechazo:n})=>rXe(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function pXe(){const t=mo();return $t({mutationFn:({id:e,options:n})=>iXe(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]}),t.invalidateQueries({queryKey:["clients"]})}})}function mXe(t){return Wt({queryKey:["can-convert-budget",t],queryFn:()=>sXe(t),enabled:!!t})}function gXe(t){return Wt({queryKey:["active-config",t],queryFn:()=>aXe(t),enabled:!!t})}function ice(t,e){window.open(`${Mc}/${t}/pdf`,"_blank")}function pP(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 ":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function vXe(){const[t,e]=N.useState(""),[n,r]=N.useState("all"),[i,s]=N.useState("all"),{data:o,isLoading:l,error:c}=oXe({estado:n!=="all"?n:void 0,tipoGestoria:i!=="all"?i:void 0,nombreCliente:t||void 0}),u=o||[],d=p=>p==="ASESORIA_LA_LLAVE"?a.jsx(ct,{className:"bg-blue-100 text-blue-700",children:"Asesora La Llave"}):a.jsx(ct,{className:"bg-green-100 text-green-700",children:"Gestora Online"}),f=p=>{const m={BORRADOR:"bg-amber-100 text-amber-700",ENVIADO:"bg-blue-100 text-blue-700",ACEPTADO:"bg-emerald-100 text-emerald-700",RECHAZADO:"bg-red-100 text-red-700",FACTURADO:"bg-purple-100 text-purple-700"},y={BORRADOR:_c,ENVIADO:Ec,ACEPTADO:gu,RECHAZADO:vu,FACTURADO:_G}[p]||_c;return a.jsxs(ct,{className:m[p]||"bg-gray-100 text-gray-700",children:[a.jsx(y,{className:"h-3 w-3 mr-1"}),p]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(gt,{className:"text-xl",children:"Filtros y bsqueda"}),a.jsx(Cb,{href:"/documentacion/presupuestos/nuevo",children:a.jsxs(pe,{size:"sm",children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nuevo Presupuesto"]})})]})}),a.jsx(Qe,{children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[a.jsx(Qy,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ye,{placeholder:"Buscar por nombre de cliente...",value:t,onChange:p=>e(p.target.value),className:"pl-10"})]}),a.jsxs(Fn,{value:n,onValueChange:p=>r(p),children:[a.jsx(Rn,{className:"w-48",children:a.jsx(Bn,{placeholder:"Todos los estados"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todos los estados"}),a.jsx(lt,{value:"BORRADOR",children:"Borrador"}),a.jsx(lt,{value:"ENVIADO",children:"Enviado"}),a.jsx(lt,{value:"ACEPTADO",children:"Aceptado"}),a.jsx(lt,{value:"RECHAZADO",children:"Rechazado"}),a.jsx(lt,{value:"FACTURADO",children:"Facturado"})]})]}),a.jsxs(Fn,{value:i,onValueChange:p=>s(p),children:[a.jsx(Rn,{className:"w-56",children:a.jsx(Bn,{placeholder:"Todos los tipos"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todos los tipos"}),a.jsx(lt,{value:"ASESORIA_LA_LLAVE",children:"Asesora La Llave"}),a.jsx(lt,{value:"GESTORIA_ONLINE",children:"Gestora Online"})]})]}),(t||n!=="all"||i!=="all")&&a.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{e(""),r("all"),s("all")},children:"Limpiar filtros"})]})})]}),l?a.jsxs("div",{className:"space-y-3",children:[a.jsx(pr,{className:"h-24 w-full"}),a.jsx(pr,{className:"h-24 w-full"}),a.jsx(pr,{className:"h-24 w-full"})]}):c?a.jsx(Xe,{children:a.jsxs(Qe,{className:"p-12 text-center",children:[a.jsx(vu,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),a.jsx("p",{className:"text-lg font-semibold mb-2",children:"Error al cargar los presupuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:c instanceof Error?c.message:"Error desconocido"}),a.jsx(pe,{onClick:()=>window.location.reload(),children:"Recargar pgina"})]})}):u.length===0?a.jsx(Xe,{children:a.jsxs(Qe,{className:"p-12 text-center",children:[a.jsx(Vi,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-lg font-semibold mb-2",children:"No hay presupuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:t||n!=="all"||i!=="all"?"No se encontraron presupuestos con los filtros aplicados":"Crea tu primer presupuesto para comenzar"}),a.jsx(Cb,{href:"/documentacion/presupuestos/nuevo",children:a.jsxs(pe,{children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Crear Presupuesto"]})})]})}):a.jsx("div",{className:"space-y-3",children:u.map(p=>a.jsx(Xe,{className:"hover:shadow-md transition-shadow",children:a.jsx(Qe,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[a.jsx("h3",{className:"text-lg font-semibold truncate",children:p.nombreCliente}),d(p.tipoGestoria),f(p.estado)]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Nmero:"})," ",p.numero]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"CIF/NIF:"})," ",p.nifCif]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Fecha:"})," ",qa(new Date(p.fechaCreacion),"dd/MM/yyyy",{locale:vc})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",p.email]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold",children:pP(p.totalFinal)}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Contabilidad: ",pP(p.totalContabilidad),(p.totalLaboral??0)>0&&a.jsxs(a.Fragment,{children:[" + Laboral: ",pP(p.totalLaboral)]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>ice(p.id,p.numero),children:[a.jsx(Ha,{className:"h-4 w-4 mr-2"}),"PDF"]}),a.jsx(Cb,{href:`/documentacion/presupuestos/${p.id}`,children:a.jsxs(pe,{size:"sm",children:[a.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Ver Detalles"]})})]})]})]})})},p.id))})]})}function Fp(){const[t,e]=N.useState(null),[n,r]=N.useState(!0),i=N.useCallback(async()=>{r(!0);try{const D=await fetch("/api/gestoria-budgets/config/autonomo");if(!D.ok)throw new Error("Error fetching config");const L=await D.json();e(L.data||L)}catch(D){console.error(D)}finally{r(!1)}},[]);return N.useEffect(()=>{i()},[i]),{config:t,loading:n,refresh:()=>i(),updateConfig:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error updating config");return L.json()},getInvoiceTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers")).json()).data||[]).map(W=>({...W,precio:typeof W.precio=="string"?parseFloat(W.precio):W.precio})),createInvoiceTier:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error creating invoice tier");return L.json()},updateInvoiceTier:async(D,L)=>{const z=await fetch(`/api/gestoria-budgets/config/autonomo/invoice-tiers/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!z.ok)throw new Error("Error updating invoice tier");return z.json()},deleteInvoiceTier:async D=>{const L=await fetch(`/api/gestoria-budgets/config/autonomo/invoice-tiers/${D}`,{method:"DELETE"});if(!L.ok)throw new Error("Error deleting invoice tier");return L.json()},reorderInvoiceTiers:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:D})});if(!L.ok)throw new Error("Error reordering invoice tiers");return L.json()},getPayrollTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/payroll-tiers")).json()).data||[]).map(W=>({...W,precio:typeof W.precio=="string"?parseFloat(W.precio):W.precio})),createPayrollTier:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/payroll-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error creating payroll tier");return L.json()},updatePayrollTier:async(D,L)=>{const z=await fetch(`/api/gestoria-budgets/config/autonomo/payroll-tiers/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!z.ok)throw new Error("Error updating payroll tier");return z.json()},deletePayrollTier:async D=>{const L=await fetch(`/api/gestoria-budgets/config/autonomo/payroll-tiers/${D}`,{method:"DELETE"});if(!L.ok)throw new Error("Error deleting payroll tier");return L.json()},getBillingTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/billing-tiers")).json()).data||[]).map(W=>({...W,multiplicador:typeof W.multiplicador=="string"?parseFloat(W.multiplicador):W.multiplicador})),createBillingTier:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/billing-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error creating billing tier");return L.json()},updateBillingTier:async(D,L)=>{const z=await fetch(`/api/gestoria-budgets/config/autonomo/billing-tiers/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!z.ok)throw new Error("Error updating billing tier");return z.json()},deleteBillingTier:async D=>{const L=await fetch(`/api/gestoria-budgets/config/autonomo/billing-tiers/${D}`,{method:"DELETE"});if(!L.ok)throw new Error("Error deleting billing tier");return L.json()},getFiscalModels:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/fiscal-models")).json()).data||[]).map(W=>({...W,precio:typeof W.precio=="string"?parseFloat(W.precio):W.precio})),createFiscalModel:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/fiscal-models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error creating fiscal model");return L.json()},updateFiscalModel:async(D,L)=>{const z=await fetch(`/api/gestoria-budgets/config/autonomo/fiscal-models/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!z.ok)throw new Error("Error updating fiscal model");return z.json()},deleteFiscalModel:async D=>{const L=await fetch(`/api/gestoria-budgets/config/autonomo/fiscal-models/${D}`,{method:"DELETE"});if(!L.ok)throw new Error("Error deleting fiscal model");return L.json()},getServices:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/services")).json()).data||[]).map(W=>({...W,precio:typeof W.precio=="string"?parseFloat(W.precio):W.precio})),createService:async D=>{const L=await fetch("/api/gestoria-budgets/config/autonomo/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error("Error creating service");return L.json()},updateService:async(D,L)=>{const z=await fetch(`/api/gestoria-budgets/config/autonomo/services/${D}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!z.ok)throw new Error("Error updating service");return z.json()},deleteService:async D=>{const L=await fetch(`/api/gestoria-budgets/config/autonomo/services/${D}`,{method:"DELETE"});if(!L.ok)throw new Error("Error deleting service");return L.json()}}}function yXe({tier:t,onEdit:e,onDelete:n}){const{attributes:r,listeners:i,setNodeRef:s,transform:o,transition:l,isDragging:c}=$re({id:t.id}),u={transform:$y.Transform.toString(o),transition:l,opacity:c?.5:1};return a.jsxs(gn,{ref:s,style:u,children:[a.jsx(He,{children:a.jsx("div",{...r,...i,className:"cursor-grab active:cursor-grabbing",children:a.jsx(kfe,{className:"h-5 w-5 text-muted-foreground"})})}),a.jsx(He,{children:t.orden}),a.jsx(He,{children:t.minFacturas}),a.jsx(He,{children:t.maxFacturas??""}),a.jsxs(He,{children:["",t.precio.toFixed(2)]}),a.jsx(He,{children:t.etiqueta}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>e(t),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>n(t),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]})}function xXe({refreshParent:t}){const{getInvoiceTiers:e,createInvoiceTier:n,updateInvoiceTier:r,deleteInvoiceTier:i,reorderInvoiceTiers:s}=Fp(),{toast:o}=Dr(),[l,c]=N.useState([]),[u,d]=N.useState(!0),[f,p]=N.useState(!1),[m,v]=N.useState(null),[y,x]=N.useState(!1),[b,S]=N.useState(null),[j,E]=N.useState(!1),A=mL(zy(a_),zy(s_,{coordinateGetter:zre})),[P,O]=N.useState({orden:0,minFacturas:0,maxFacturas:null,precio:0,etiqueta:""}),k=async()=>{d(!0);try{const z=await e();c(z.sort((W,X)=>W.orden-X.orden))}catch(z){o({variant:"destructive",title:"Error",description:z.message||"No se pudieron cargar los tramos"})}finally{d(!1)}};N.useEffect(()=>{k()},[]);const C=async z=>{const{active:W,over:X}=z;if(!X||W.id===X.id)return;const q=l.findIndex(Q=>Q.id===W.id),V=l.findIndex(Q=>Q.id===X.id),Y=xL(l,q,V);c(Y);const re=Y.map((Q,F)=>({id:Q.id,orden:F+1}));try{await s(re),o({title:"Orden actualizado",description:"Los tramos se han reordenado correctamente"}),await k(),t?.()}catch(Q){o({variant:"destructive",title:"Error",description:Q.message||"No se pudo reordenar"}),await k()}},I=z=>{z?(v(z),O({orden:z.orden,minFacturas:z.minFacturas,maxFacturas:z.maxFacturas,precio:z.precio,etiqueta:z.etiqueta||""})):(v(null),O({orden:l.length+1,minFacturas:0,maxFacturas:null,precio:0,etiqueta:""})),p(!0)},R=async()=>{E(!0);try{m?(await r(m.id,P),o({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(P),o({title:"Tramo creado",description:"El nuevo tramo se ha aadido correctamente"})),p(!1),await k(),t?.()}catch(z){o({variant:"destructive",title:"Error",description:z.message||"No se pudo guardar el tramo"})}finally{E(!1)}},D=z=>{S(z),x(!0)},L=async()=>{if(b){E(!0);try{await i(b.id),o({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),x(!1),await k(),t?.()}catch(z){o({variant:"destructive",title:"Error",description:z.message||"No se pudo eliminar el tramo"})}finally{E(!1)}}};return u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.length," tramo",l.length!==1?"s":""," configurado",l.length!==1?"s":""]}),a.jsxs(xr,{open:f,onOpenChange:p,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>I(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Aadir Tramo"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:m?"Editar Tramo":"Nuevo Tramo"}),a.jsx(_r,{children:"Define el rango de facturas y el precio correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"orden",children:"Orden"}),a.jsx(Ye,{id:"orden",type:"number",value:P.orden,onChange:z=>O({...P,orden:parseInt(z.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"minFacturas",children:"Mn. Facturas"}),a.jsx(Ye,{id:"minFacturas",type:"number",value:P.minFacturas,onChange:z=>O({...P,minFacturas:parseInt(z.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"maxFacturas",children:"Mx. Facturas"}),a.jsx(Ye,{id:"maxFacturas",type:"number",value:P.maxFacturas??"",onChange:z=>O({...P,maxFacturas:z.target.value?parseInt(z.target.value):null}),placeholder:" (dejar vaco)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"precio",children:"Precio ()"}),a.jsx(Ye,{id:"precio",type:"number",step:"0.01",value:P.precio,onChange:z=>O({...P,precio:parseFloat(z.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ye,{id:"etiqueta",value:P.etiqueta,onChange:z=>O({...P,etiqueta:z.target.value}),placeholder:"Ej: De 0 a 25 facturas"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),a.jsxs(pe,{onClick:R,disabled:j,children:[j&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{className:"w-[50px]"}),a.jsx(Ze,{children:"Orden"}),a.jsx(Ze,{children:"Min"}),a.jsx(Ze,{children:"Max"}),a.jsx(Ze,{children:"Precio"}),a.jsx(Ze,{children:"Etiqueta"}),a.jsx(Ze,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(yL,{sensors:A,collisionDetection:gre,onDragEnd:C,children:a.jsx(Fre,{items:l.map(z=>z.id),strategy:Dre,children:a.jsx(is,{children:l.map(z=>a.jsx(yXe,{tier:z,onEdit:I,onDelete:D},z.id))})})})]})}),a.jsx(Td,{open:y,onOpenChange:x,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsx(Tu,{children:"Esta accin eliminar el tramo permanentemente. Los presupuestos que usen este rango se vern afectados."})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:L,disabled:j,children:[j&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function bXe({refreshParent:t}){const{getPayrollTiers:e,createPayrollTier:n,updatePayrollTier:r,deletePayrollTier:i}=Fp(),{toast:s}=Dr(),[o,l]=N.useState([]),[c,u]=N.useState(!0),[d,f]=N.useState(!1),[p,m]=N.useState(null),[v,y]=N.useState(!1),[x,b]=N.useState(null),[S,j]=N.useState(!1),[E,A]=N.useState({orden:0,minNominas:0,maxNominas:null,precio:0,etiqueta:""}),P=async()=>{u(!0);try{const R=await e();l(R.sort((D,L)=>D.orden-L.orden))}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudieron cargar los tramos"})}finally{u(!1)}};N.useEffect(()=>{P()},[]);const O=R=>{R?(m(R),A({orden:R.orden,minNominas:R.minNominas,maxNominas:R.maxNominas,precio:R.precio,etiqueta:R.etiqueta||""})):(m(null),A({orden:o.length+1,minNominas:0,maxNominas:null,precio:0,etiqueta:""})),f(!0)},k=async()=>{j(!0);try{p?(await r(p.id,E),s({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(E),s({title:"Tramo creado",description:"El nuevo tramo se ha aadido correctamente"})),f(!1),await P(),t?.()}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudo guardar el tramo"})}finally{j(!1)}},C=R=>{b(R),y(!0)},I=async()=>{if(x){j(!0);try{await i(x.id),s({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),y(!1),await P(),t?.()}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudo eliminar el tramo"})}finally{j(!1)}}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," tramo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(xr,{open:d,onOpenChange:f,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>O(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Aadir Tramo"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:p?"Editar Tramo":"Nuevo Tramo"}),a.jsx(_r,{children:"Define el rango de nminas y el precio correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"orden",children:"Orden"}),a.jsx(Ye,{id:"orden",type:"number",value:E.orden,onChange:R=>A({...E,orden:parseInt(R.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"minNominas",children:"Mn. Nminas"}),a.jsx(Ye,{id:"minNominas",type:"number",value:E.minNominas,onChange:R=>A({...E,minNominas:parseInt(R.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"maxNominas",children:"Mx. Nminas"}),a.jsx(Ye,{id:"maxNominas",type:"number",value:E.maxNominas??"",onChange:R=>A({...E,maxNominas:R.target.value?parseInt(R.target.value):null}),placeholder:" (dejar vaco)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"precio",children:"Precio ()"}),a.jsx(Ye,{id:"precio",type:"number",step:"0.01",value:E.precio,onChange:R=>A({...E,precio:parseFloat(R.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ye,{id:"etiqueta",value:E.etiqueta,onChange:R=>A({...E,etiqueta:R.target.value}),placeholder:"Ej: De 0 a 3 nminas"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(pe,{onClick:k,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Orden"}),a.jsx(Ze,{children:"Min"}),a.jsx(Ze,{children:"Max"}),a.jsx(Ze,{children:"Precio"}),a.jsx(Ze,{children:"Etiqueta"}),a.jsx(Ze,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(is,{children:o.map(R=>a.jsxs(gn,{children:[a.jsx(He,{children:R.orden}),a.jsx(He,{children:R.minNominas}),a.jsx(He,{children:R.maxNominas??""}),a.jsxs(He,{children:["",R.precio.toFixed(2)]}),a.jsx(He,{children:R.etiqueta}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>O(R),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>C(R),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},R.id))})]})}),a.jsx(Td,{open:v,onOpenChange:y,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsx(Tu,{children:"Esta accin eliminar el tramo permanentemente. Los presupuestos que usen este rango se vern afectados."})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:I,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function wXe({refreshParent:t}){const{getBillingTiers:e,createBillingTier:n,updateBillingTier:r,deleteBillingTier:i}=Fp(),{toast:s}=Dr(),[o,l]=N.useState([]),[c,u]=N.useState(!0),[d,f]=N.useState(!1),[p,m]=N.useState(null),[v,y]=N.useState(!1),[x,b]=N.useState(null),[S,j]=N.useState(!1),[E,A]=N.useState({orden:0,minFacturacion:0,maxFacturacion:null,multiplicador:1,etiqueta:""}),P=async()=>{u(!0);try{const R=await e();l(R.sort((D,L)=>D.orden-L.orden))}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudieron cargar los tramos"})}finally{u(!1)}};N.useEffect(()=>{P()},[]);const O=R=>{R?(m(R),A({orden:R.orden,minFacturacion:R.minFacturacion,maxFacturacion:R.maxFacturacion,multiplicador:R.multiplicador,etiqueta:R.etiqueta||""})):(m(null),A({orden:o.length+1,minFacturacion:0,maxFacturacion:null,multiplicador:1,etiqueta:""})),f(!0)},k=async()=>{j(!0);try{p?(await r(p.id,E),s({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(E),s({title:"Tramo creado",description:"El nuevo tramo se ha aadido correctamente"})),f(!1),await P(),t?.()}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudo guardar el tramo"})}finally{j(!1)}},C=R=>{b(R),y(!0)},I=async()=>{if(x){j(!0);try{await i(x.id),s({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),y(!1),await P(),t?.()}catch(R){s({variant:"destructive",title:"Error",description:R.message||"No se pudo eliminar el tramo"})}finally{j(!1)}}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," tramo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(xr,{open:d,onOpenChange:f,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>O(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Aadir Tramo"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:p?"Editar Tramo":"Nuevo Tramo"}),a.jsx(_r,{children:"Define el rango de facturacin anual y el multiplicador correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"orden",children:"Orden"}),a.jsx(Ye,{id:"orden",type:"number",value:E.orden,onChange:R=>A({...E,orden:parseInt(R.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"minFacturacion",children:"Mn. Facturacin ()"}),a.jsx(Ye,{id:"minFacturacion",type:"number",value:E.minFacturacion,onChange:R=>A({...E,minFacturacion:parseFloat(R.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"maxFacturacion",children:"Mx. Facturacin ()"}),a.jsx(Ye,{id:"maxFacturacion",type:"number",value:E.maxFacturacion??"",onChange:R=>A({...E,maxFacturacion:R.target.value?parseFloat(R.target.value):null}),placeholder:" (dejar vaco)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"multiplicador",children:"Multiplicador"}),a.jsx(Ye,{id:"multiplicador",type:"number",step:"0.01",value:E.multiplicador,onChange:R=>A({...E,multiplicador:parseFloat(R.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ye,{id:"etiqueta",value:E.etiqueta,onChange:R=>A({...E,etiqueta:R.target.value}),placeholder:"Ej: De 0 a 100.000"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(pe,{onClick:k,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Orden"}),a.jsx(Ze,{children:"Min"}),a.jsx(Ze,{children:"Max"}),a.jsx(Ze,{children:"Multiplicador"}),a.jsx(Ze,{children:"Etiqueta"}),a.jsx(Ze,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(is,{children:o.map(R=>a.jsxs(gn,{children:[a.jsx(He,{children:R.orden}),a.jsxs(He,{children:["",R.minFacturacion.toLocaleString()]}),a.jsx(He,{children:R.maxFacturacion?`${R.maxFacturacion.toLocaleString()}`:""}),a.jsxs(He,{children:[R.multiplicador,"x"]}),a.jsx(He,{children:R.etiqueta}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>O(R),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>C(R),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},R.id))})]})}),a.jsx(Td,{open:v,onOpenChange:y,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsx(Tu,{children:"Esta accin eliminar el tramo permanentemente. Los presupuestos que usen este rango se vern afectados."})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:I,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function NXe({refreshParent:t}){const{getFiscalModels:e,createFiscalModel:n,updateFiscalModel:r,deleteFiscalModel:i}=Fp(),{toast:s}=Dr(),[o,l]=N.useState([]),[c,u]=N.useState(!0),[d,f]=N.useState(!1),[p,m]=N.useState(null),[v,y]=N.useState(!1),[x,b]=N.useState(null),[S,j]=N.useState(!1),[E,A]=N.useState({orden:0,codigoModelo:"",nombreModelo:"",precio:0,activo:!0}),P=async()=>{u(!0);try{const D=await e();l(D.sort((L,z)=>L.orden-z.orden))}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudieron cargar los modelos"})}finally{u(!1)}};N.useEffect(()=>{P()},[]);const O=D=>{D?(m(D),A({orden:D.orden,codigoModelo:D.codigoModelo,nombreModelo:D.nombreModelo,precio:D.precio,activo:D.activo})):(m(null),A({orden:o.length+1,codigoModelo:"",nombreModelo:"",precio:0,activo:!0})),f(!0)},k=async()=>{j(!0);try{p?(await r(p.id,E),s({title:"Modelo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(E),s({title:"Modelo creado",description:"El nuevo modelo se ha aadido correctamente"})),f(!1),await P(),t?.()}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudo guardar el modelo"})}finally{j(!1)}},C=D=>{b(D),y(!0)},I=async()=>{if(x){j(!0);try{await i(x.id),s({title:"Modelo eliminado",description:"El modelo se ha eliminado correctamente"}),y(!1),await P(),t?.()}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudo eliminar el modelo"})}finally{j(!1)}}},R=async D=>{try{await r(D.id,{activo:!D.activo}),s({title:"Estado actualizado",description:`Modelo ${D.activo?"desactivado":"activado"}`}),await P(),t?.()}catch(L){s({variant:"destructive",title:"Error",description:L.message||"No se pudo cambiar el estado"})}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," modelo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(xr,{open:d,onOpenChange:f,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>O(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Aadir Modelo"]})}),a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:p?"Editar Modelo":"Nuevo Modelo"}),a.jsx(_r,{children:"Configura un modelo fiscal con su precio mensual"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"orden",children:"Orden"}),a.jsx(Ye,{id:"orden",type:"number",value:E.orden,onChange:D=>A({...E,orden:parseInt(D.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"codigoModelo",children:"Cdigo Modelo"}),a.jsx(Ye,{id:"codigoModelo",value:E.codigoModelo,onChange:D=>A({...E,codigoModelo:D.target.value}),placeholder:"Ej: 303"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nombreModelo",children:"Nombre Modelo"}),a.jsx(Ye,{id:"nombreModelo",value:E.nombreModelo,onChange:D=>A({...E,nombreModelo:D.target.value}),placeholder:"Ej: Autoliquidacin IVA"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"precio",children:"Precio Mensual ()"}),a.jsx(Ye,{id:"precio",type:"number",step:"0.01",value:E.precio,onChange:D=>A({...E,precio:parseFloat(D.target.value)})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Va,{id:"activo",checked:E.activo,onCheckedChange:D=>A({...E,activo:D})}),a.jsx(_e,{htmlFor:"activo",children:"Activo"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(pe,{onClick:k,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Orden"}),a.jsx(Ze,{children:"Cdigo"}),a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Precio"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(is,{children:o.map(D=>a.jsxs(gn,{children:[a.jsx(He,{children:D.orden}),a.jsx(He,{children:a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm",children:D.codigoModelo})}),a.jsx(He,{children:D.nombreModelo}),a.jsxs(He,{children:["",D.precio.toFixed(2)]}),a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Va,{checked:D.activo,onCheckedChange:()=>R(D)}),a.jsx(ct,{variant:D.activo?"default":"secondary",children:D.activo?"Activo":"Inactivo"})]})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>O(D),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>C(D),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},D.id))})]})}),a.jsx(Td,{open:v,onOpenChange:y,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsx(Tu,{children:"Esta accin eliminar el modelo permanentemente. Los presupuestos que usen este modelo se vern afectados."})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:I,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function SXe({refreshParent:t}){const{getServices:e,createService:n,updateService:r,deleteService:i}=Fp(),{toast:s}=Dr(),[o,l]=N.useState([]),[c,u]=N.useState(!0),[d,f]=N.useState(!1),[p,m]=N.useState(null),[v,y]=N.useState(!1),[x,b]=N.useState(null),[S,j]=N.useState(!1),[E,A]=N.useState({orden:0,codigo:"",nombre:"",descripcion:"",precio:0,tipoServicio:"MENSUAL",activo:!0}),P=async()=>{u(!0);try{const D=await e();l(D.sort((L,z)=>L.orden-z.orden))}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudieron cargar los servicios"})}finally{u(!1)}};N.useEffect(()=>{P()},[]);const O=D=>{D?(m(D),A({orden:D.orden,codigo:D.codigo,nombre:D.nombre,descripcion:D.descripcion||"",precio:D.precio,tipoServicio:D.tipoServicio,activo:D.activo})):(m(null),A({orden:o.length+1,codigo:"",nombre:"",descripcion:"",precio:0,tipoServicio:"MENSUAL",activo:!0})),f(!0)},k=async()=>{j(!0);try{p?(await r(p.id,E),s({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"})):(await n(E),s({title:"Servicio creado",description:"El nuevo servicio se ha aadido correctamente"})),f(!1),await P(),t?.()}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudo guardar el servicio"})}finally{j(!1)}},C=D=>{b(D),y(!0)},I=async()=>{if(x){j(!0);try{await i(x.id),s({title:"Servicio eliminado",description:"El servicio se ha eliminado correctamente"}),y(!1),await P(),t?.()}catch(D){s({variant:"destructive",title:"Error",description:D.message||"No se pudo eliminar el servicio"})}finally{j(!1)}}},R=async D=>{try{await r(D.id,{activo:!D.activo}),s({title:"Estado actualizado",description:`Servicio ${D.activo?"desactivado":"activado"}`}),await P(),t?.()}catch(L){s({variant:"destructive",title:"Error",description:L.message||"No se pudo cambiar el estado"})}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," servicio",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(xr,{open:d,onOpenChange:f,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:()=>O(),children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Aadir Servicio"]})}),a.jsxs(vr,{className:"max-w-2xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:p?"Editar Servicio":"Nuevo Servicio"}),a.jsx(_r,{children:"Configura un servicio adicional con su precio y tipo"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"orden",children:"Orden"}),a.jsx(Ye,{id:"orden",type:"number",value:E.orden,onChange:D=>A({...E,orden:parseInt(D.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"codigo",children:"Cdigo"}),a.jsx(Ye,{id:"codigo",value:E.codigo,onChange:D=>A({...E,codigo:D.target.value}),placeholder:"Ej: ASESORIA_EXTRA"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nombre",children:"Nombre"}),a.jsx(Ye,{id:"nombre",value:E.nombre,onChange:D=>A({...E,nombre:D.target.value}),placeholder:"Ej: Asesora Personalizada"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"descripcion",children:"Descripcin"}),a.jsx(Do,{id:"descripcion",value:E.descripcion,onChange:D=>A({...E,descripcion:D.target.value}),placeholder:"Descripcin del servicio",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"precio",children:"Precio ()"}),a.jsx(Ye,{id:"precio",type:"number",step:"0.01",value:E.precio,onChange:D=>A({...E,precio:parseFloat(D.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"tipoServicio",children:"Tipo de Servicio"}),a.jsxs(Fn,{value:E.tipoServicio,onValueChange:D=>A({...E,tipoServicio:D}),children:[a.jsx(Rn,{id:"tipoServicio",children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"MENSUAL",children:"Mensual"}),a.jsx(lt,{value:"PUNTUAL",children:"Puntual"})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Va,{id:"activo",checked:E.activo,onCheckedChange:D=>A({...E,activo:D})}),a.jsx(_e,{htmlFor:"activo",children:"Activo"})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(pe,{onClick:k,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Orden"}),a.jsx(Ze,{children:"Cdigo"}),a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Precio"}),a.jsx(Ze,{children:"Tipo"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(is,{children:o.map(D=>a.jsxs(gn,{children:[a.jsx(He,{children:D.orden}),a.jsx(He,{children:a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm",children:D.codigo})}),a.jsx(He,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:D.nombre}),D.descripcion&&a.jsx("div",{className:"text-xs text-muted-foreground",children:D.descripcion})]})}),a.jsxs(He,{children:["",D.precio.toFixed(2)]}),a.jsx(He,{children:a.jsx(ct,{variant:D.tipoServicio==="MENSUAL"?"default":"outline",children:D.tipoServicio})}),a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Va,{checked:D.activo,onCheckedChange:()=>R(D)}),a.jsx(ct,{variant:D.activo?"default":"secondary",children:D.activo?"Activo":"Inactivo"})]})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>O(D),children:a.jsx(Cd,{className:"h-4 w-4"})}),a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>C(D),children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},D.id))})]})}),a.jsx(Td,{open:v,onOpenChange:y,children:a.jsxs(Cu,{children:[a.jsxs(Au,{children:[a.jsx(ku,{children:"Ests seguro?"}),a.jsx(Tu,{children:"Esta accin eliminar el servicio permanentemente. Los presupuestos que usen este servicio se vern afectados."})]}),a.jsxs(Rp,{children:[a.jsx(Pu,{children:"Cancelar"}),a.jsxs(Ou,{onClick:I,disabled:S,children:[S&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function jXe({onSuccess:t}){const{config:e,loading:n,updateConfig:r,refresh:i}=Fp(),{toast:s}=Dr(),[o,l]=N.useState(!1),[c,u]=N.useState({porcentajePeriodoMensual:20,porcentajeEDN:10,porcentajeModulos:-10,minimoMensual:50});N.useEffect(()=>{e&&u({porcentajePeriodoMensual:e.porcentajePeriodoMensual,porcentajeEDN:e.porcentajeEDN,porcentajeModulos:e.porcentajeModulos,minimoMensual:e.minimoMensual})},[e]);const d=async f=>{f.preventDefault(),l(!0);try{await r(c),s({title:"Configuracin actualizada",description:"Los cambios se han guardado correctamente"}),await i(),t?.()}catch(p){s({variant:"destructive",title:"Error",description:p.message||"No se pudo actualizar la configuracin"})}finally{l(!1)}};return n?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"porcentajePeriodoMensual",children:"Porcentaje Periodo Mensual (%)"}),a.jsx(Ye,{id:"porcentajePeriodoMensual",type:"number",step:"0.01",value:c.porcentajePeriodoMensual,onChange:f=>u({...c,porcentajePeriodoMensual:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recargo aplicado a presupuestos mensuales"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"porcentajeEDN",children:"Porcentaje EDN (%)"}),a.jsx(Ye,{id:"porcentajeEDN",type:"number",step:"0.01",value:c.porcentajeEDN,onChange:f=>u({...c,porcentajeEDN:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recargo para sistema de tributacin EDN"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"porcentajeModulos",children:"Porcentaje Mdulos (%)"}),a.jsx(Ye,{id:"porcentajeModulos",type:"number",step:"0.01",value:c.porcentajeModulos,onChange:f=>u({...c,porcentajeModulos:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Descuento para rgimen de mdulos (valor negativo)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"minimoMensual",children:"Mnimo Mensual ()"}),a.jsx(Ye,{id:"minimoMensual",type:"number",step:"0.01",value:c.minimoMensual,onChange:f=>u({...c,minimoMensual:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Importe mnimo para presupuestos mensuales"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(pe,{type:"submit",disabled:o,children:[o&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar Cambios"]})})]})}function EXe(){const[t,e]=N.useState("general"),{refresh:n}=Fp();return console.log(" Active tab:",t),a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Parmetros de Presupuestos"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestin dinmica de configuracin para presupuestos de Autnomos"})]})}),a.jsxs(kc,{value:t,onValueChange:e,className:"space-y-4",children:[a.jsxs(ql,{className:"grid w-full grid-cols-6",children:[a.jsxs(Wn,{value:"general",className:"flex items-center gap-2",children:[a.jsx(zj,{className:"h-4 w-4"}),"General"]}),a.jsxs(Wn,{value:"facturas",className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4"}),"Facturas"]}),a.jsxs(Wn,{value:"nominas",className:"flex items-center gap-2",children:[a.jsx(ip,{className:"h-4 w-4"}),"Nminas"]}),a.jsxs(Wn,{value:"facturacion",className:"flex items-center gap-2",children:[a.jsx(mp,{className:"h-4 w-4"}),"Facturacin"]}),a.jsxs(Wn,{value:"modelos",className:"flex items-center gap-2",children:[a.jsx(dN,{className:"h-4 w-4"}),"Modelos"]}),a.jsxs(Wn,{value:"servicios",className:"flex items-center gap-2",children:[a.jsx(lD,{className:"h-4 w-4"}),"Servicios"]})]}),a.jsx(or,{value:"general",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Configuracin General"}),a.jsx(jn,{children:"Porcentajes y mnimos aplicados a todos los presupuestos de Autnomos"})]}),a.jsx(Qe,{children:a.jsx(jXe,{onSuccess:n})})]})}),a.jsx(or,{value:"facturas",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Tramos de Facturas Mensuales"}),a.jsx(jn,{children:"Define el precio base segn el nmero de facturas del cliente por mes"})]}),a.jsx(Qe,{children:a.jsx(xXe,{refreshParent:n})})]})}),a.jsx(or,{value:"nominas",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Tramos de Nminas Mensuales"}),a.jsx(jn,{children:"Define el precio por nmina segn el volumen mensual"})]}),a.jsx(Qe,{children:a.jsx(bXe,{refreshParent:n})})]})}),a.jsx(or,{value:"facturacion",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Tramos de Facturacin Anual"}),a.jsx(jn,{children:"Multiplicadores aplicados segn la facturacin anual del cliente"})]}),a.jsx(Qe,{children:a.jsx(wXe,{refreshParent:n})})]})}),a.jsx(or,{value:"modelos",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Modelos Fiscales"}),a.jsx(jn,{children:"Precios de modelos fiscales (303, 111, 115, 130, 100, 349, 347)"})]}),a.jsx(Qe,{children:a.jsx(NXe,{refreshParent:n})})]})}),a.jsx(or,{value:"servicios",className:"space-y-4",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Servicios Adicionales"}),a.jsx(jn,{children:"Servicios complementarios mensuales o puntuales"})]}),a.jsx(Qe,{children:a.jsx(SXe,{refreshParent:n})})]})})]})]})}var _Xe=MWe;const vK={common:[{label:"Nombre de contacto",variable:"{{nombre_contacto}}",description:"Nombre del cliente"},{label:"Email",variable:"{{email}}",description:"Correo electrnico"},{label:"Telfono",variable:"{{telefono}}",description:"Telfono de contacto"},{label:"Cdigo presupuesto",variable:"{{codigo}}",description:"Ej: AL-2025-0001"},{label:"Fecha",variable:"{{fecha}}",description:"Fecha de emisin"},{label:"Subtotal",variable:"{{subtotal}}",description:"Subtotal sin IVA"},{label:"IVA",variable:"{{iva}}",description:"Total de IVA"},{label:"Total",variable:"{{total}}",description:"Total con IVA"},{label:"Observaciones",variable:"{{observaciones}}",description:"Notas del presupuesto"}],PYME:[{label:"Nombre sociedad",variable:"{{nombre_sociedad}}",description:"Razn social"},{label:"Actividad",variable:"{{actividad}}",description:"Actividad de la empresa"},{label:"Periodo declaraciones",variable:"{{periodo_declaraciones}}",description:"Trimestral/Mensual"},{label:"Facturacin anual",variable:"{{facturacion_anual}}",description:"Facturacin estimada"},{label:"Nmero asientos",variable:"{{num_asientos}}",description:"Rango de asientos"},{label:"Nminas/mes",variable:"{{nominas_mes}}",description:"Nmero de nminas"}],AUTONOMO:[{label:"Actividad",variable:"{{actividad}}",description:"Actividad del autnomo"},{label:"Sistema tributacin",variable:"{{sistema_tributacion}}",description:"Directo/Mdulos"},{label:"Facturacin anual",variable:"{{facturacion_anual}}",description:"Facturacin estimada"},{label:"Nmero facturas/ao",variable:"{{num_facturas}}",description:"Rango de facturas"},{label:"Nminas/mes",variable:"{{nominas_mes}}",description:"Nmero de nminas"}],RENTA:[{label:"Tipo declaracin",variable:"{{tipo_declaracion}}",description:"Tipo de renta"},{label:"Ingresos",variable:"{{ingresos}}",description:"Ingresos anuales"},{label:"Retenciones",variable:"{{retenciones}}",description:"Retenciones IRPF"}],HERENCIAS:[{label:"Ttulo sucesorio",variable:"{{titulo_sucesorio}}",description:"Con/sin testamento"},{label:"Nmero herederos",variable:"{{num_herederos}}",description:"Cantidad de herederos"},{label:"Herederos menores",variable:"{{herederos_menores}}",description:"S/No"},{label:"Fincas Madrid",variable:"{{fincas_madrid}}",description:"Nmero de fincas"},{label:"Fincas otras",variable:"{{fincas_otras}}",description:"Fincas fuera de Madrid"},{label:"Caudal hereditario",variable:"{{caudal}}",description:"Valor del caudal"},{label:"Tipo proceso",variable:"{{tipo_proceso}}",description:"Amistoso/Judicial"}]},CXe=({editor:t,onInsertVariable:e,budgetType:n})=>{const[r,i]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState("#000000");if(!t)return null;const u=()=>{r&&(t.chain().focus().setLink({href:r}).run(),i(""))},d=()=>{s&&(t.chain().focus().setImage({src:s}).run(),o(""))},f=()=>{t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},p=[...vK.common,...vK[n]||[]];return a.jsx("div",{className:"border-b bg-slate-50 p-2 sticky top-0 z-10",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(pe,{size:"sm",variant:t.isActive("bold")?"default":"ghost",onClick:()=>t.chain().focus().toggleBold().run(),title:"Negrita",children:a.jsx(NG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("italic")?"default":"ghost",onClick:()=>t.chain().focus().toggleItalic().run(),title:"Cursiva",children:a.jsx(MG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("underline")?"default":"ghost",onClick:()=>t.chain().focus().toggleUnderline().run(),title:"Subrayado",children:a.jsx(the,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("strike")?"default":"ghost",onClick:()=>t.chain().focus().toggleStrike().run(),title:"Tachado",children:a.jsx(BG,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(pe,{size:"sm",variant:t.isActive("heading",{level:1})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),title:"Ttulo 1",children:a.jsx(TG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("heading",{level:2})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),title:"Ttulo 2",children:a.jsx(OG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("heading",{level:3})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),title:"Ttulo 3",children:a.jsx(PG,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(pe,{size:"sm",variant:t.isActive("bulletList")?"default":"ghost",onClick:()=>t.chain().focus().toggleBulletList().run(),title:"Lista",children:a.jsx(sD,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("orderedList")?"default":"ghost",onClick:()=>t.chain().focus().toggleOrderedList().run(),title:"Lista numerada",children:a.jsx(RG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive("blockquote")?"default":"ghost",onClick:()=>t.chain().focus().toggleBlockquote().run(),title:"Cita",children:a.jsx(IG,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(pe,{size:"sm",variant:t.isActive({textAlign:"left"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("left").run(),title:"Alinear izquierda",children:a.jsx(bG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive({textAlign:"center"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("center").run(),title:"Centrar",children:a.jsx(yG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive({textAlign:"right"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("right").run(),title:"Alinear derecha",children:a.jsx(wG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:t.isActive({textAlign:"justify"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("justify").run(),title:"Justificar",children:a.jsx(xG,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex gap-1 border-r pr-2",children:a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsx(pe,{size:"sm",variant:"ghost",title:"Color de texto",children:a.jsx(cD,{className:"h-4 w-4"})})}),a.jsx(Tm,{className:"w-64",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Color de texto"}),a.jsx(Ye,{type:"color",value:l,onChange:m=>{c(m.target.value),t.chain().focus().setColor(m.target.value).run()}}),a.jsx("div",{className:"grid grid-cols-6 gap-1",children:["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#000080","#808080"].map(m=>a.jsx("button",{className:"w-8 h-8 rounded border",style:{backgroundColor:m},onClick:()=>{c(m),t.chain().focus().setColor(m).run()}},m))})]})})]})}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsx(pe,{size:"sm",variant:"ghost",title:"Insertar enlace",children:a.jsx(Lfe,{className:"h-4 w-4"})})}),a.jsx(Tm,{className:"w-80",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"URL del enlace"}),a.jsx(Ye,{placeholder:"https://ejemplo.com",value:r,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&u()}),a.jsx(pe,{onClick:u,className:"w-full",children:"Insertar"})]})})]}),a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsx(pe,{size:"sm",variant:"ghost",title:"Insertar imagen",children:a.jsx(rD,{className:"h-4 w-4"})})}),a.jsx(Tm,{className:"w-80",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"URL de la imagen"}),a.jsx(Ye,{placeholder:"https://ejemplo.com/logo.png",value:s,onChange:m=>o(m.target.value),onKeyDown:m=>m.key==="Enter"&&d()}),a.jsx(pe,{onClick:d,className:"w-full",children:"Insertar"})]})})]}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:f,title:"Insertar tabla",children:a.jsx($G,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex gap-1 border-r pr-2",children:a.jsxs(Lv,{children:[a.jsx(Fv,{asChild:!0,children:a.jsxs(pe,{size:"sm",variant:"ghost",title:"Insertar variable",children:[a.jsx(rhe,{className:"h-4 w-4"}),a.jsx("span",{className:"ml-1 text-xs",children:"Variables"})]})}),a.jsx(Tm,{className:"w-80",children:a.jsx(OL,{className:"h-96",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Variables disponibles"}),p.map(m=>a.jsxs("button",{className:"w-full text-left p-2 hover:bg-slate-100 rounded text-sm",onClick:()=>e(m.variable),children:[a.jsx("div",{className:"font-mono text-xs text-blue-600",children:m.variable}),a.jsx("div",{className:"text-xs text-slate-600",children:m.description})]},m.variable))]})})})]})}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Deshacer",children:a.jsx(zG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Rehacer",children:a.jsx(LG,{className:"h-4 w-4"})})]})]})})};function AXe({initialContent:t="",budgetType:e,onChange:n,onPreview:r}){const i=Yoe({extensions:[Sle,fWe,BWe.configure({types:["heading","paragraph"]}),FWe,GVe.configure({openOnClick:!1}),R3.configure({resizable:!0}),OYe,MYe,PYe,C3,A3,_Xe.configure({placeholder:'Escribe aqu tu plantilla... Usa el men superior para dar formato y el botn "Variables" para insertar campos dinmicos.'})],content:t,onUpdate:({editor:o})=>{n?.(o.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[600px] p-4"}}}),s=o=>{i?.chain().focus().insertContent(o).run()};return a.jsxs("div",{className:"border rounded-lg bg-white",children:[a.jsx(CXe,{editor:i,onInsertVariable:s,budgetType:e}),a.jsx(Koe,{editor:i,className:"min-h-[600px]"}),r&&a.jsx("div",{className:"border-t p-2 bg-slate-50 flex justify-end",children:a.jsxs(pe,{onClick:r,variant:"outline",size:"sm",children:[a.jsx(Cf,{className:"h-4 w-4 mr-2"}),"Vista previa PDF"]})})]})}const kXe={PYME:a.jsx(cN,{className:"h-4 w-4"}),AUTONOMO:a.jsx(Km,{className:"h-4 w-4"}),RENTA:a.jsx(Pfe,{className:"h-4 w-4"}),HERENCIAS:a.jsx(Yfe,{className:"h-4 w-4"})},TXe={PYME:"Empresas",AUTONOMO:"Autnomos",RENTA:"Renta",HERENCIAS:"Herencias"};function OXe(){const[t,e]=N.useState(!1),[n,r]=N.useState(null),[i,s]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState("PYME"),[d,f]=N.useState("LA_LLAVE"),[p,m]=N.useState(""),[v,y]=N.useState(null),{toast:x}=Dr(),b=mo(),S=(W,X)=>({...{codigo:"PREV-2025-001",fecha:new Date().toLocaleDateString("es-ES"),nombre_contacto:"Juan Prez Garca",email:"juan.perez@ejemplo.com",telefono:"666 777 888",subtotal:"150,00 ",iva:"31,50 ",total:"181,50 ",empresa:X==="LA_LLAVE"?"Asesora La Llave":"Gestora Online",descripcion:"Este es un presupuesto de ejemplo para visualizar el diseo de la plantilla."},...{PYME:{nombre_sociedad:"Tecnologas Avanzadas SL",actividad:"Desarrollo de software",periodo_declaraciones:"Trimestral",num_asientos:"50",nominas_mes:"5"},AUTONOMO:{sistema_tributacion:"Estimacin Directa",facturacion_anual:"45.000,00 ",num_facturas:"120"},RENTA:{tipo_declaracion:"Individual",ingresos:"35.000,00 ",retenciones:"5.250,00 "},HERENCIAS:{titulo_sucesorio:"Testamento",num_herederos:"3",fincas_madrid:"S",caudal:"180.000,00 ",tipo_proceso:"Normal"}}[W]}),j=N.useMemo(()=>{if(!p)return'<p class="text-muted-foreground text-center py-12">El contenido aparecer aqu...</p>';const W=S(c,d);let X=p;return Object.entries(W).forEach(([q,V])=>{const Y=new RegExp(`{{\\s*${q}\\s*}}`,"gi");X=X.replace(Y,String(V))}),X=X.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),X},[p,c,d]),{data:E,isLoading:A}=Wt({queryKey:["/api/budget-templates"]}),P=$t({mutationFn:async W=>{const X=await fetch("/api/budget-templates",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(W)});if(!X.ok)throw new Error("Error al crear plantilla");return X.json()},onSuccess:()=>{b.invalidateQueries({queryKey:["/api/budget-templates"]}),x({title:" Plantilla creada correctamente"}),R()},onError:()=>{x({title:" Error al crear plantilla",variant:"destructive"})}}),O=$t({mutationFn:async({id:W,data:X})=>{const q=await fetch(`/api/budget-templates/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(X)});if(!q.ok)throw new Error("Error al actualizar plantilla");return q.json()},onSuccess:()=>{b.invalidateQueries({queryKey:["/api/budget-templates"]}),x({title:" Plantilla actualizada correctamente"}),R()},onError:()=>{x({title:" Error al actualizar plantilla",variant:"destructive"})}}),k=$t({mutationFn:async W=>{const X=await fetch(`/api/budget-templates/${W}`,{method:"DELETE",credentials:"include"});if(!X.ok)throw new Error("Error al eliminar plantilla");return X.json()},onSuccess:()=>{b.invalidateQueries({queryKey:["/api/budget-templates"]}),x({title:" Plantilla eliminada correctamente"})},onError:()=>{x({title:" Error al eliminar plantilla",variant:"destructive"})}}),C=$t({mutationFn:async({id:W,type:X,brand:q})=>{const V=await fetch(`/api/budget-templates/${W}/set-default`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:X,companyBrand:q})});if(!V.ok)throw new Error("Error al establecer plantilla predeterminada");return V.json()},onSuccess:()=>{b.invalidateQueries({queryKey:["/api/budget-templates"]}),x({title:" Plantilla establecida como predeterminada"})}}),I=W=>{W?(r(W),s(W.name),l(W.description||""),u(W.type),f(W.companyBrand),m(W.htmlContent)):(r(null),s(""),l(""),u("PYME"),f("LA_LLAVE"),m("")),e(!0)},R=()=>{e(!1),r(null),s(""),l(""),m("")},D=()=>{if(!i.trim()){x({title:"El nombre es obligatorio",variant:"destructive"});return}if(!p.trim()){x({title:"El contenido no puede estar vaco",variant:"destructive"});return}const W={name:i,description:o||null,type:c,companyBrand:d,htmlContent:p};n?O.mutate({id:n.id,data:W}):P.mutate(W)},L=W=>{const X={name:`${W.name} (Copia)`,description:W.description,type:W.type,companyBrand:W.companyBrand,htmlContent:W.htmlContent,isDefault:!1};P.mutate(X)},z=W=>{confirm("Ests seguro de eliminar esta plantilla?")&&k.mutate(W)};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-end items-center",children:a.jsxs(pe,{onClick:()=>I(),children:[a.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Nueva Plantilla"]})}),A?a.jsx(Xe,{children:a.jsx(Qe,{className:"p-12 text-center",children:a.jsx("p",{children:"Cargando plantillas..."})})}):a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Plantillas disponibles"}),a.jsxs(jn,{children:[E?.length||0," plantillas configuradas"]})]}),a.jsx(Qe,{children:a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Tipo"}),a.jsx(Ze,{children:"Empresa"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Actualizada"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsxs(is,{children:[E?.map(W=>a.jsxs(gn,{children:[a.jsx(He,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[kXe[W.type],W.name]})}),a.jsx(He,{children:a.jsx(ct,{variant:"outline",children:TXe[W.type]})}),a.jsx(He,{children:a.jsx(ct,{variant:W.companyBrand==="LA_LLAVE"?"default":"secondary",children:W.companyBrand==="LA_LLAVE"?"Asesora La Llave":"Gestora Online"})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-1",children:[W.isDefault&&a.jsxs(ct,{variant:"default",children:[a.jsx(_F,{className:"h-3 w-3 mr-1"}),"Predeterminada"]}),W.isActive?a.jsx(ct,{variant:"outline",className:"text-green-600",children:"Activa"}):a.jsx(ct,{variant:"outline",className:"text-gray-400",children:"Inactiva"})]})}),a.jsx(He,{className:"text-sm text-muted-foreground",children:new Date(W.updatedAt).toLocaleDateString("es-ES")}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[!W.isDefault&&a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>C.mutate({id:W.id,type:W.type,brand:W.companyBrand}),title:"Establecer como predeterminada",children:a.jsx(_F,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>y(W),title:"Vista previa",children:a.jsx(Cf,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>I(W),title:"Editar",children:a.jsx(fd,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>L(W),title:"Duplicar",children:a.jsx(EG,{className:"h-4 w-4"})}),a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>z(W.id),title:"Eliminar",disabled:W.isDefault,children:a.jsx(Wi,{className:"h-4 w-4"})})]})})]},W.id)),(!E||E.length===0)&&a.jsx(gn,{children:a.jsxs(He,{colSpan:6,className:"text-center py-12 text-muted-foreground",children:[a.jsx(Vi,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No hay plantillas configuradas"}),a.jsx("p",{className:"text-sm",children:"Crea tu primera plantilla para comenzar"})]})})]})]})})]}),a.jsx(xr,{open:t,onOpenChange:e,children:a.jsxs(vr,{className:"max-w-[95vw] max-h-[95vh] overflow-hidden",children:[a.jsxs(br,{children:[a.jsx(wr,{children:n?"Editar Plantilla":"Nueva Plantilla"}),a.jsx(_r,{children:"Personaliza el diseo del PDF. Los cambios se previsualizan en tiempo real."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 h-[75vh]",children:[a.jsxs("div",{className:"space-y-4 overflow-y-auto pr-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Nombre de la plantilla *"}),a.jsx(Ye,{placeholder:"Ej: Presupuesto PYME Estndar",value:i,onChange:W=>s(W.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Tipo de presupuesto *"}),a.jsxs(Fn,{value:c,onValueChange:W=>u(W),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"PYME",children:"Empresas (PYME)"}),a.jsx(lt,{value:"AUTONOMO",children:"Autnomos"}),a.jsx(lt,{value:"RENTA",children:"Declaracin de Renta"}),a.jsx(lt,{value:"HERENCIAS",children:"Herencias"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Empresa *"}),a.jsxs(Fn,{value:d,onValueChange:W=>f(W),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"LA_LLAVE",children:"Asesora La Llave"}),a.jsx(lt,{value:"GESTORIA_ONLINE",children:"Gestora Online"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Descripcin (opcional)"}),a.jsx(Do,{placeholder:"Breve descripcin de la plantilla...",value:o,onChange:W=>l(W.target.value),rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Contenido de la plantilla *"}),a.jsx(AXe,{initialContent:p,budgetType:c,onChange:m})]})]}),a.jsxs("div",{className:"border-l pl-6 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background pb-3 mb-3 border-b z-10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Vista Previa en Tiempo Real"}),a.jsx(ct,{variant:"secondary",className:"text-xs",children:d==="LA_LLAVE"?"Asesora La Llave":"Gestora Online"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Datos de ejemplo  Las variables se reemplazan automticamente"})]}),a.jsx("div",{className:"prose prose-sm max-w-none p-6 bg-white border rounded shadow-sm",dangerouslySetInnerHTML:{__html:j}})]})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:R,children:"Cancelar"}),a.jsxs(pe,{onClick:D,disabled:P.isPending||O.isPending,children:[n?"Actualizar":"Crear"," Plantilla"]})]})]})}),a.jsx(xr,{open:!!v,onOpenChange:()=>y(null),children:a.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:v?.name}),a.jsx(_r,{children:"Vista previa de la plantilla"})]}),a.jsx("div",{className:"prose max-w-none p-6 bg-white border rounded",dangerouslySetInnerHTML:{__html:v?.htmlContent||""}})]})})]})}function mP(){const[t,e]=ca(),{user:n}=xg(),r=n?.roleName==="Administrador",i=()=>t.includes("/parametros")?"parametros":t.includes("/plantillas")?"plantillas":"presupuestos",s=o=>{o==="presupuestos"?e("/documentacion/presupuestos"):o==="parametros"?e("/documentacion/presupuestos/parametros"):o==="plantillas"&&e("/documentacion/presupuestos/plantillas")};return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Documentacin"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestin de presupuestos y documentos"})]}),a.jsxs(kc,{value:i(),onValueChange:s,className:"w-full",children:[a.jsxs(ql,{className:"grid w-full grid-cols-3",children:[a.jsxs(Wn,{value:"presupuestos",className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4"}),"Presupuestos"]}),r&&a.jsxs(a.Fragment,{children:[a.jsxs(Wn,{value:"parametros",className:"flex items-center gap-2",children:[a.jsx(zj,{className:"h-4 w-4"}),"Parmetros"]}),a.jsxs(Wn,{value:"plantillas",className:"flex items-center gap-2",children:[a.jsx(cD,{className:"h-4 w-4"}),"Plantillas"]})]})]}),a.jsx(or,{value:"presupuestos",className:"mt-6",children:a.jsx(vXe,{})}),r&&a.jsxs(a.Fragment,{children:[a.jsx(or,{value:"parametros",className:"mt-6",children:a.jsx(EXe,{})}),a.jsx(or,{value:"plantillas",className:"mt-6",children:a.jsx(OXe,{})})]})]})]})}function L4(){const[,t]=ca();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Documentos"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona recibos, proteccin de datos, domiciliaciones y otros documentos"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/recibos"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(Gfe,{className:"w-5 h-5 text-blue-500"}),"Recibos"]}),a.jsx(jn,{className:"mt-2",children:"Genera recibos para clientes o externos"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Para clientes y externos"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Numeracin automtica"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Envo por email con PDF"})]}),a.jsx(pe,{className:"w-full",variant:"outline",children:"Gestionar Recibos"})]})]}),a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/proteccion-datos"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(dN,{className:"w-5 h-5 text-green-500"}),"Proteccin de Datos"]}),a.jsx(jn,{className:"mt-2",children:"Documentos RGPD para clientes"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Solo clientes registrados"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Firma digital"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Plantillas personalizables"})]}),a.jsx(pe,{className:"w-full",variant:"outline",children:"Gestionar RGPD"})]})]}),a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/domiciliacion"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(AP,{className:"w-5 h-5 text-purple-500"}),"Domiciliacin Bancaria"]}),a.jsx(jn,{className:"mt-2",children:"Autorizacin de domiciliacin SEPA"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Solo clientes registrados"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Firma requerida"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Envo automtico"})]}),a.jsx(pe,{className:"w-full",variant:"outline",children:"Gestionar Domiciliaciones"})]})]}),a.jsxs(Xe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/plantillas"),children:[a.jsx(ht,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(nD,{className:"w-5 h-5 text-orange-500"}),"Plantillas"]}),a.jsx(jn,{className:"mt-2",children:"Gestiona plantillas de documentos"})]})})}),a.jsxs(Qe,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:" Editor visual TipTap"}),a.jsx("p",{className:"text-sm text-gray-600",children:" Variables dinmicas"}),a.jsx("p",{className:"text-sm text-gray-600",children:" HTML personalizado"})]}),a.jsx(pe,{className:"w-full",variant:"outline",children:"Gestionar Plantillas"})]})]})]})]})}async function PXe(t){return await Rt("POST","/api/documents/receipts",t)}async function MXe(t){const e=new URLSearchParams;return await Rt("GET",`/api/documents/receipts?${e.toString()}`)}async function RXe(t,e){return await Rt("PUT",`/api/documents/receipts/${t}`,e)}async function DXe(t){return await Rt("POST",`/api/documents/receipts/${t}/generate-pdf`)}async function IXe(t,e){return await Rt("POST",`/api/documents/receipts/${t}/send`,e)}async function sce(t){return await Rt("POST","/api/documents/documents",t)}async function ace(t){const e=new URLSearchParams;return t?.type&&e.append("type",t.type),t?.status&&e.append("status",t.status),t?.clientId&&e.append("clientId",t.clientId),await Rt("GET",`/api/documents/documents?${e.toString()}`)}async function oce(t){return await Rt("POST",`/api/documents/documents/${t}/generate-pdf`)}async function lce(t,e,n,r){return await Rt("POST",`/api/documents/documents/${t}/send`,{to:e,subject:n,message:r})}async function cce(t,e){const n=new FormData;n.append("signedFile",e);const r=await fetch(`/api/documents/documents/${t}/accept`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:n});if(!r.ok)throw new Error(await r.text());return await r.json()}async function LXe(t){return await Rt("POST","/api/documents/templates",t)}async function D3(t){const e=new URLSearchParams;return t?.type&&e.append("type",t.type),t?.isActive!==void 0&&e.append("isActive",t.isActive.toString()),await Rt("GET",`/api/documents/templates?${e.toString()}`)}async function yK(t,e){return await Rt("PUT",`/api/documents/templates/${t}`,e)}async function FXe(t){return await Rt("DELETE",`/api/documents/templates/${t}`)}function uce(){const[,t]=ca(),[e,n]=N.useState(!1),[r,i]=N.useState(null),[s,o]=N.useState("client"),[l,c]=N.useState("total"),[u,d]=N.useState(""),[f,p]=N.useState("21"),[m,v]=N.useState(""),y=mo(),{data:x=[],isLoading:b}=Wt({queryKey:["/api/documents/receipts"],queryFn:()=>MXe()}),{data:S=[],isLoading:j}=Wt({queryKey:["/api/clients"],queryFn:()=>Rt("GET","/api/clients")}),E=q=>{if(v(q),q&&!isNaN(parseFloat(q))){const V=parseFloat(q),Y=parseFloat(f)||21,re=V/(1+Y/100);d(re.toFixed(2))}},A=q=>{if(d(q),q&&!isNaN(parseFloat(q))){const V=parseFloat(q),Y=parseFloat(f)||21,re=V*(1+Y/100);v(re.toFixed(2))}},P=q=>{p(q),l==="total"&&m?E(m):l==="base"&&u&&A(u)},O=()=>{o("client"),c("total"),d(""),p("21"),v("")},k=(q,V)=>{let Y=q;if(q.startsWith("/root/")){const re=q.match(/uploads\/documents\/.+$/);re&&(Y=`/${re[0]}`)}window.open(Y,"_blank")},C=q=>{i(q),o(q.client_id?"client":"external"),d(q.base_imponible.toString()),p(q.iva_porcentaje.toString()),v(q.total.toString()),n(!0)},I=$t({mutationFn:PXe,onSuccess:()=>{y.invalidateQueries({queryKey:["receipts"]}),n(!1),i(null),O(),Er({title:"Recibo creado correctamente"})},onError:q=>{Er({title:"Error",description:q.message,variant:"destructive"})}}),R=$t({mutationFn:({id:q,data:V})=>RXe(q,V),onSuccess:()=>{y.invalidateQueries({queryKey:["receipts"]}),n(!1),i(null),O(),Er({title:"Recibo actualizado correctamente"})},onError:q=>{Er({title:"Error",description:q.message,variant:"destructive"})}}),D=$t({mutationFn:q=>DXe(q),onSuccess:()=>{y.invalidateQueries({queryKey:["receipts"]}),Er({title:"PDF generado correctamente"})}}),L=$t({mutationFn:({id:q,to:V})=>IXe(q,{to:V}),onSuccess:()=>{y.invalidateQueries({queryKey:["receipts"]}),Er({title:"Recibo enviado correctamente"})}}),z=q=>{q.preventDefault();const V=new FormData(q.currentTarget),Y={concepto:V.get("concepto"),base_imponible:parseFloat(u),iva_porcentaje:parseFloat(f)||21,notes:V.get("notes")||void 0};if(s==="client"){Y.clientId=V.get("clientId");const re=S.find(Q=>Q.id===Y.clientId);re&&(Y.recipient_name=re.razonSocial,Y.recipient_nif=re.nifCif,Y.recipient_email=re.email||"")}else Y.recipient_name=V.get("recipient_name"),Y.recipient_nif=V.get("recipient_nif"),Y.recipient_email=V.get("recipient_email"),Y.recipient_address=V.get("recipient_address")||void 0;r?R.mutate({id:r.id,data:Y}):I.mutate(Y)},W=()=>{i(null),o("client"),d(""),p("21"),v(""),c("total"),n(!0)},X=q=>{const V={BORRADOR:"secondary",ENVIADO:"default",ARCHIVADO:"outline"};return a.jsx(ct,{variant:V[q]||"secondary",children:q})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(pe,{variant:"ghost",onClick:()=>t("/documentacion/documentos"),className:"mb-2",children:[a.jsx(Hf,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recibos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Genera y gestiona recibos para clientes o externos"})]}),a.jsxs(xr,{open:e,onOpenChange:n,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:W,children:[a.jsx(Ri,{className:"w-4 h-4 mr-2"}),"Nuevo Recibo"]})}),a.jsxs(vr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:r?"Editar Recibo":"Crear Nuevo Recibo"}),a.jsx(_r,{children:r?"Modifica los datos del recibo":"Genera un recibo para un cliente registrado o una persona externa"})]}),a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Tipo de Destinatario"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(pe,{type:"button",variant:s==="client"?"default":"outline",onClick:()=>o("client"),className:"flex-1",children:[a.jsx(cN,{className:"w-4 h-4 mr-2"}),"Cliente Registrado"]}),a.jsxs(pe,{type:"button",variant:s==="external"?"default":"outline",onClick:()=>o("external"),className:"flex-1",children:[a.jsx(Km,{className:"w-4 h-4 mr-2"}),"Persona Externa"]})]})]}),s==="client"?a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(Fn,{name:"clientId",required:!0,defaultValue:r?.client_id,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona un cliente"})}),a.jsx(Dn,{children:S.map(q=>a.jsxs(lt,{value:q.id,children:[q.razonSocial," - ",q.nifCif]},q.id))})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"recipient_name",children:"Nombre/Razn Social *"}),a.jsx(Ye,{id:"recipient_name",name:"recipient_name",required:!0,defaultValue:r?.recipient_name})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"recipient_nif",children:"NIF/CIF *"}),a.jsx(Ye,{id:"recipient_nif",name:"recipient_nif",required:!0,defaultValue:r?.recipient_nif})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"recipient_email",children:"Email *"}),a.jsx(Ye,{id:"recipient_email",name:"recipient_email",type:"email",required:!0,defaultValue:r?.recipient_email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"recipient_address",children:"Direccin"}),a.jsx(Ye,{id:"recipient_address",name:"recipient_address",defaultValue:r?.recipient_address})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"concepto",children:"Concepto *"}),a.jsx(Do,{id:"concepto",name:"concepto",required:!0,rows:2,defaultValue:r?.concepto})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{children:"Modo de Clculo"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{type:"button",variant:l==="total"?"default":"outline",onClick:()=>c("total"),className:"flex-1",children:"Introducir Precio Total"}),a.jsx(pe,{type:"button",variant:l==="base"?"default":"outline",onClick:()=>c("base"),className:"flex-1",children:"Introducir Base Imponible"})]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:l==="total"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"precio_total",children:"Precio Total () *"}),a.jsx(Ye,{id:"precio_total",name:"precio_total",type:"number",step:"0.01",min:"0",value:m,onChange:q=>E(q.target.value),required:!0,className:"font-semibold"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"iva_porcentaje",children:"IVA (%)"}),a.jsx(Ye,{id:"iva_porcentaje",name:"iva_porcentaje",type:"number",step:"0.01",value:f,onChange:q=>P(q.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{className:"text-muted-foreground",children:"Base Imponible (calculada)"}),a.jsx("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted flex items-center justify-end font-mono",children:u?`${u} `:"-"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"base_imponible",children:"Base Imponible () *"}),a.jsx(Ye,{id:"base_imponible",name:"base_imponible",type:"number",step:"0.01",min:"0",value:u,onChange:q=>A(q.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"iva_porcentaje",children:"IVA (%)"}),a.jsx(Ye,{id:"iva_porcentaje",name:"iva_porcentaje",type:"number",step:"0.01",value:f,onChange:q=>P(q.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{className:"text-muted-foreground",children:"Total (calculado)"}),a.jsx("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted flex items-center justify-end font-mono font-semibold",children:m?`${m} `:"-"})]})]})}),u&&m&&a.jsxs("div",{className:"p-3 bg-muted rounded-md text-sm space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Base Imponible:"}),a.jsxs("span",{className:"font-mono",children:[u," "]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["IVA (",f,"%):"]}),a.jsxs("span",{className:"font-mono",children:[(parseFloat(m)-parseFloat(u)).toFixed(2)," "]})]}),a.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[a.jsx("span",{children:"TOTAL:"}),a.jsxs("span",{className:"font-mono",children:[m," "]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"notes",children:"Observaciones"}),a.jsx(Do,{id:"notes",name:"notes",rows:2,defaultValue:r?.notes})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(pe,{type:"submit",disabled:I.isPending||R.isPending,children:r?R.isPending?"Actualizando...":"Actualizar Recibo":I.isPending?"Creando...":"Crear Recibo"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Recibos Emitidos"}),a.jsx(jn,{children:"Listado de todos los recibos generados"})]}),a.jsx(Qe,{children:b?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):x.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay recibos. Crea tu primer recibo."}):a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nmero"}),a.jsx(Ze,{children:"Destinatario"}),a.jsx(Ze,{children:"Concepto"}),a.jsx(Ze,{className:"text-right",children:"Total"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Fecha"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:x.map(q=>a.jsxs(gn,{children:[a.jsx(He,{className:"font-medium",children:q.numero}),a.jsx(He,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:q.recipient_name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:q.recipient_nif})]})}),a.jsx(He,{className:"max-w-xs truncate",children:q.concepto}),a.jsxs(He,{className:"text-right font-medium",children:[Number(q.total).toFixed(2)," "]}),a.jsx(He,{children:X(q.status)}),a.jsx(He,{children:new Date(q.created_at).toLocaleDateString("es-ES")}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[q.status==="BORRADOR"&&a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>C(q),title:"Editar recibo",children:a.jsx(Cd,{className:"w-4 h-4"})}),!q.pdf_path&&a.jsx(pe,{size:"sm",variant:"outline",onClick:()=>D.mutate(q.id),disabled:D.isPending,title:"Generar PDF",children:a.jsx(tD,{className:"w-4 h-4"})}),q.pdf_path&&a.jsx(pe,{size:"sm",variant:"outline",onClick:()=>k(q.pdf_path,q.numero),title:"Descargar PDF",children:a.jsx(Ha,{className:"w-4 h-4"})}),q.pdf_path&&q.status==="BORRADOR"&&a.jsx(pe,{size:"sm",onClick:()=>L.mutate({id:q.id,to:q.recipient_email}),disabled:L.isPending,title:"Enviar por email",children:a.jsx(y1,{className:"w-4 h-4"})})]})})]},q.id))})]})})]})]})}function xK(){return a.jsxs(gP,{children:[a.jsx(rr,{path:"/documentacion/documentos",component:L4}),a.jsx(rr,{path:"/documentacion/documentos/recibos",component:uce}),a.jsx(rr,{path:"/documentacion/documentos/proteccion-datos",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Proteccin de Datos"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(rr,{path:"/documentacion/documentos/domiciliacion",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Domiciliacin Bancaria"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(rr,{path:"/documentacion/documentos/plantillas",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Plantillas"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(rr,{children:()=>a.jsx(L4,{})})]})}function BXe(){const[,t]=ca(),[e,n]=N.useState(!1),[r,i]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),u=mo(),{data:d=[],isLoading:f}=Wt({queryKey:["/api/documents/documents",{type:"DATA_PROTECTION"}],queryFn:()=>ace({type:"DATA_PROTECTION"})}),{data:p=[],isLoading:m}=Wt({queryKey:["/api/clients"],queryFn:()=>Rt("GET","/api/clients")}),{data:v=[]}=Wt({queryKey:["/api/documents/templates",{type:"DATA_PROTECTION"}],queryFn:()=>D3({type:"DATA_PROTECTION",isActive:!0})}),y=$t({mutationFn:sce,onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),n(!1),Er({title:"Documento creado correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),x=$t({mutationFn:C=>oce(C),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Er({title:"PDF generado correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),b=$t({mutationFn:({id:C,to:I,subject:R,message:D})=>lce(C,I,R,D),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Er({title:"Documento enviado por email correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),S=$t({mutationFn:({id:C,file:I})=>cce(C,I),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),i(!1),c(null),Er({title:"Documento aceptado y archivo firmado guardado"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),j=C=>{C.preventDefault();const I=new FormData(C.currentTarget);y.mutate({type:"DATA_PROTECTION",clientId:I.get("clientId"),templateId:I.get("templateId")})},E=C=>{const I=p.find(R=>R.id===C.clientId);if(!I?.email){Er({title:"Error",description:"El cliente no tiene email",variant:"destructive"});return}b.mutate({id:C.id,to:I.email,subject:"Documento de Proteccin de Datos - Firma requerida",message:"Adjunto encontrar el documento de proteccin de datos. Por favor, frmelo y devulvalo."})},A=()=>{if(!s||!l){Er({title:"Error",description:"Seleccione un archivo",variant:"destructive"});return}S.mutate({id:s,file:l})},P=C=>{o(C),i(!0)},O=C=>{const I={BORRADOR:"secondary",ENVIADO:"default",ACEPTADO:"outline",RECHAZADO:"destructive",ARCHIVADO:"outline"};return a.jsx(ct,{variant:I[C]||"default",children:C})},k=C=>{const I={PENDIENTE:"secondary",FIRMADO:"default",RECHAZADO:"destructive"},R={PENDIENTE:"text-yellow-600",FIRMADO:"text-green-600",RECHAZADO:"text-red-600"};return a.jsx(ct,{variant:I[C]||"default",className:R[C],children:C})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(Hf,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(dN,{className:"h-8 w-8 text-green-600"}),"Proteccin de Datos"]}),a.jsx("p",{className:"text-muted-foreground",children:"Gestin de documentos de proteccin de datos"})]})]}),a.jsxs(xr,{open:e,onOpenChange:n,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Crear Documento"]})}),a.jsxs(vr,{className:"max-w-xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Nuevo Documento de Proteccin de Datos"}),a.jsx(_r,{children:"Selecciona el cliente y la plantilla para generar el documento"})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(Fn,{name:"clientId",required:!0,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar cliente..."})}),a.jsx(Dn,{children:m?a.jsx(lt,{value:"loading",disabled:!0,children:"Cargando..."}):p.map(C=>a.jsxs(lt,{value:C.id,children:[C.nombre_fiscal||C.nombre," - ",C.nif]},C.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"templateId",children:"Plantilla *"}),a.jsxs(Fn,{name:"templateId",required:!0,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar plantilla..."})}),a.jsx(Dn,{children:v.length===0?a.jsx(lt,{value:"none",disabled:!0,children:"No hay plantillas activas"}):v.map(C=>a.jsx(lt,{value:C.id,children:C.name},C.id))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(pe,{type:"submit",disabled:y.isPending,children:y.isPending?"Creando...":"Crear Documento"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Documentos de Proteccin de Datos"}),a.jsx(jn,{children:"Listado de todos los documentos generados"})]}),a.jsx(Qe,{children:f?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):d.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay documentos. Crea tu primer documento de proteccin de datos."}):a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Cliente"}),a.jsx(Ze,{children:"Plantilla"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Firma"}),a.jsx(Ze,{children:"Fecha Envo"}),a.jsx(Ze,{children:"Fecha Firma"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:d.map(C=>{const I=p.find(D=>D.id===C.clientId),R=v.find(D=>D.id===C.templateId);return a.jsxs(gn,{children:[a.jsxs(He,{className:"font-medium",children:[I?.nombre_fiscal||I?.nombre||"N/A",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-muted-foreground",children:I?.nif})]}),a.jsx(He,{children:R?.name||"N/A"}),a.jsx(He,{children:O(C.status)}),a.jsx(He,{children:k(C.signatureStatus)}),a.jsx(He,{children:C.sentAt?new Date(C.sentAt).toLocaleDateString():"-"}),a.jsx(He,{children:C.signatureDate?new Date(C.signatureDate).toLocaleDateString():"-"}),a.jsxs(He,{className:"text-right space-x-2",children:[!C.filePath&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>x.mutate(C.id),disabled:x.isPending,children:[a.jsx(tD,{className:"h-4 w-4 mr-1"}),"Generar PDF"]}),C.filePath&&C.status==="BORRADOR"&&a.jsxs(pe,{size:"sm",onClick:()=>E(C),disabled:b.isPending,children:[a.jsx(y1,{className:"h-4 w-4 mr-1"}),"Enviar"]}),C.status==="ENVIADO"&&C.signatureStatus==="PENDIENTE"&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>P(C.id),children:[a.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Subir Firmado"]}),C.signedFilePath&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>window.open(`/api/documents/documents/${C.id}/signed-pdf`,"_blank"),children:[a.jsx(dN,{className:"h-4 w-4 mr-1"}),"Ver Firmado"]})]})]},C.id)})})]})})]}),a.jsx(xr,{open:r,onOpenChange:i,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Subir Documento Firmado"}),a.jsx(_r,{children:"Selecciona el archivo PDF firmado por el cliente"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"signedFile",children:"Archivo PDF *"}),a.jsx(Ye,{id:"signedFile",type:"file",accept:".pdf",onChange:C=>c(C.target.files?.[0]||null)})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{i(!1),c(null)},children:"Cancelar"}),a.jsx(pe,{onClick:A,disabled:!l||S.isPending,children:S.isPending?"Subiendo...":"Marcar como Aceptado"})]})]})]})})]})}function $Xe(){const[,t]=ca(),[e,n]=N.useState(!1),[r,i]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState(null),u=mo(),{data:d=[],isLoading:f}=Wt({queryKey:["/api/documents/documents",{type:"BANKING_DOMICILIATION"}],queryFn:()=>ace({type:"BANKING_DOMICILIATION"})}),{data:p=[],isLoading:m}=Wt({queryKey:["/api/clients"],queryFn:()=>Rt("GET","/api/clients")}),{data:v=[]}=Wt({queryKey:["/api/documents/templates",{type:"BANKING_DOMICILIATION"}],queryFn:()=>D3({type:"BANKING_DOMICILIATION",isActive:!0})}),y=$t({mutationFn:sce,onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),n(!1),Er({title:"Documento creado correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),x=$t({mutationFn:C=>oce(C),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Er({title:"PDF generado correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),b=$t({mutationFn:({id:C,to:I,subject:R,message:D})=>lce(C,I,R,D),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Er({title:"Documento enviado por email correctamente"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),S=$t({mutationFn:({id:C,file:I})=>cce(C,I),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),i(!1),c(null),Er({title:"Documento aceptado y archivo firmado guardado"})},onError:C=>{Er({title:"Error",description:C.message,variant:"destructive"})}}),j=C=>{C.preventDefault();const I=new FormData(C.currentTarget);y.mutate({type:"BANKING_DOMICILIATION",clientId:I.get("clientId"),templateId:I.get("templateId")})},E=C=>{const I=p.find(R=>R.id===C.clientId);if(!I?.email){Er({title:"Error",description:"El cliente no tiene email",variant:"destructive"});return}b.mutate({id:C.id,to:I.email,subject:"Documento de Domiciliacin Bancaria - Firma requerida",message:"Adjunto encontrar el documento de domiciliacin bancaria. Por favor, frmelo y devulvalo."})},A=()=>{if(!s||!l){Er({title:"Error",description:"Seleccione un archivo",variant:"destructive"});return}S.mutate({id:s,file:l})},P=C=>{o(C),i(!0)},O=C=>{const I={BORRADOR:"secondary",ENVIADO:"default",ACEPTADO:"outline",RECHAZADO:"destructive",ARCHIVADO:"outline"};return a.jsx(ct,{variant:I[C]||"default",children:C})},k=C=>{const I={PENDIENTE:"secondary",FIRMADO:"default",RECHAZADO:"destructive"},R={PENDIENTE:"text-yellow-600",FIRMADO:"text-green-600",RECHAZADO:"text-red-600"};return a.jsx(ct,{variant:I[C]||"default",className:R[C],children:C})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(Hf,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(AP,{className:"h-8 w-8 text-purple-600"}),"Domiciliacin Bancaria"]}),a.jsx("p",{className:"text-muted-foreground",children:"Gestin de documentos de domiciliacin bancaria"})]})]}),a.jsxs(xr,{open:e,onOpenChange:n,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{children:[a.jsx(Ri,{className:"mr-2 h-4 w-4"}),"Crear Documento"]})}),a.jsxs(vr,{className:"max-w-xl",children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Nuevo Documento de Domiciliacin Bancaria"}),a.jsx(_r,{children:"Selecciona el cliente y la plantilla para generar el documento"})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(Fn,{name:"clientId",required:!0,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar cliente..."})}),a.jsx(Dn,{children:m?a.jsx(lt,{value:"loading",disabled:!0,children:"Cargando..."}):p.map(C=>a.jsxs(lt,{value:C.id,children:[C.nombre_fiscal||C.nombre," - ",C.nif]},C.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"templateId",children:"Plantilla *"}),a.jsxs(Fn,{name:"templateId",required:!0,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar plantilla..."})}),a.jsx(Dn,{children:v.length===0?a.jsx(lt,{value:"none",disabled:!0,children:"No hay plantillas activas"}):v.map(C=>a.jsx(lt,{value:C.id,children:C.name},C.id))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(pe,{type:"submit",disabled:y.isPending,children:y.isPending?"Creando...":"Crear Documento"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Documentos de Domiciliacin Bancaria"}),a.jsx(jn,{children:"Listado de todos los documentos generados"})]}),a.jsx(Qe,{children:f?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):d.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay documentos. Crea tu primer documento de domiciliacin bancaria."}):a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Cliente"}),a.jsx(Ze,{children:"Plantilla"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Firma"}),a.jsx(Ze,{children:"Fecha Envo"}),a.jsx(Ze,{children:"Fecha Firma"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:d.map(C=>{const I=p.find(D=>D.id===C.clientId),R=v.find(D=>D.id===C.templateId);return a.jsxs(gn,{children:[a.jsxs(He,{className:"font-medium",children:[I?.nombre_fiscal||I?.nombre||"N/A",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-muted-foreground",children:I?.nif})]}),a.jsx(He,{children:R?.name||"N/A"}),a.jsx(He,{children:O(C.status)}),a.jsx(He,{children:k(C.signatureStatus)}),a.jsx(He,{children:C.sentAt?new Date(C.sentAt).toLocaleDateString():"-"}),a.jsx(He,{children:C.signatureDate?new Date(C.signatureDate).toLocaleDateString():"-"}),a.jsxs(He,{className:"text-right space-x-2",children:[!C.filePath&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>x.mutate(C.id),disabled:x.isPending,children:[a.jsx(tD,{className:"h-4 w-4 mr-1"}),"Generar PDF"]}),C.filePath&&C.status==="BORRADOR"&&a.jsxs(pe,{size:"sm",onClick:()=>E(C),disabled:b.isPending,children:[a.jsx(y1,{className:"h-4 w-4 mr-1"}),"Enviar"]}),C.status==="ENVIADO"&&C.signatureStatus==="PENDIENTE"&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>P(C.id),children:[a.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Subir Firmado"]}),C.signedFilePath&&a.jsxs(pe,{size:"sm",variant:"outline",onClick:()=>window.open(`/api/documents/documents/${C.id}/signed-pdf`,"_blank"),children:[a.jsx(AP,{className:"h-4 w-4 mr-1"}),"Ver Firmado"]})]})]},C.id)})})]})})]}),a.jsx(xr,{open:r,onOpenChange:i,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Subir Documento Firmado"}),a.jsx(_r,{children:"Selecciona el archivo PDF firmado por el cliente"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"signedFile",children:"Archivo PDF *"}),a.jsx(Ye,{id:"signedFile",type:"file",accept:".pdf",onChange:C=>c(C.target.files?.[0]||null)})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{i(!1),c(null)},children:"Cancelar"}),a.jsx(pe,{onClick:A,disabled:!l||S.isPending,children:S.isPending?"Subiendo...":"Marcar como Aceptado"})]})]})]})})]})}function zXe(){const[,t]=ca(),[e,n]=N.useState(!1),[r,i]=N.useState(null),[s,o]=N.useState("all"),[l,c]=N.useState(""),[u,d]=N.useState(null),f=mo(),p=()=>({NUMERO:"REC-2025-001",NOMBRE:"Ejemplo Cliente SL",NIF:"B12345678",EMAIL:"cliente@ejemplo.com",FECHA:new Date().toLocaleDateString("es-ES"),CONCEPTO:"Servicios de asesora fiscal - Enero 2025",BASE:"150.00",IVA_PORCENTAJE:"21",IVA_IMPORTE:"31.50",TOTAL:"181.50",NOTAS:"Gracias por confiar en nuestros servicios."});N.useMemo(()=>{if(!l)return'<p class="text-muted-foreground text-center py-12">El contenido aparecer aqu...</p>';const I=p();let R=l;return Object.entries(I).forEach(([D,L])=>{const z=new RegExp(`{{\\s*${D}\\s*}}`,"gi");R=R.replace(z,String(L))}),R=R.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),R},[l]);const{data:m=[],isLoading:v}=Wt({queryKey:["/api/documents/templates"],queryFn:()=>D3()}),y=$t({mutationFn:LXe,onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),n(!1),i(null),Er({title:"Plantilla creada correctamente"})},onError:I=>{Er({title:"Error",description:I.message,variant:"destructive"})}}),x=$t({mutationFn:({id:I,data:R})=>yK(I,R),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),n(!1),i(null),Er({title:"Plantilla actualizada correctamente"})},onError:I=>{Er({title:"Error",description:I.message,variant:"destructive"})}}),b=$t({mutationFn:FXe,onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),Er({title:"Plantilla eliminada correctamente"})},onError:I=>{Er({title:"Error",description:I.message,variant:"destructive"})}}),S=$t({mutationFn:({id:I,isActive:R})=>yK(I,{is_active:!R}),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),Er({title:"Estado actualizado correctamente"})}}),j=I=>{I.preventDefault();const R=new FormData(I.currentTarget),D={type:R.get("type"),name:R.get("name"),description:R.get("description")||void 0,content:R.get("content")};r?x.mutate({id:r.id,data:D}):y.mutate(D)},E=I=>{i(I),c(I.content||""),n(!0)},A=I=>{confirm("Ests seguro de eliminar esta plantilla?")&&b.mutate(I)},P=()=>{i(null),c(""),n(!0)},O=I=>({DATA_PROTECTION:"Proteccin de Datos",BANKING_DOMICILIATION:"Domiciliacin Bancaria",RECEIPT:"Recibo"})[I]||I,k=I=>({DATA_PROTECTION:"bg-blue-100 text-blue-800",BANKING_DOMICILIATION:"bg-green-100 text-green-800",RECEIPT:"bg-purple-100 text-purple-800"})[I]||"bg-gray-100 text-gray-800",C=s==="all"?m:m.filter(I=>I.type===s);return a.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pe,{variant:"outline",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(Hf,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Plantillas de Documentos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestiona las plantillas para generar documentos PDF"})]})]}),a.jsxs(xr,{open:e,onOpenChange:n,children:[a.jsx(Ua,{asChild:!0,children:a.jsxs(pe,{onClick:P,children:[a.jsx(Ri,{className:"w-4 h-4 mr-2"}),"Nueva Plantilla"]})}),a.jsxs(vr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:r?"Editar Plantilla":"Nueva Plantilla"}),a.jsxs(_r,{children:["Las variables disponibles son: ","{{NUMERO}}",", ","{{NOMBRE}}",", ","{{NIF}}",", ","{{EMAIL}}",", ","{{FECHA}}",", ","{{CONCEPTO}}",", ","{{BASE}}",", ","{{IVA_PORCENTAJE}}",", ","{{IVA_IMPORTE}}",", ","{{TOTAL}}",", ","{{NOTAS}}"]})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"type",children:"Tipo de Plantilla"}),a.jsxs(Fn,{name:"type",defaultValue:r?.type||"",required:!0,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Selecciona un tipo"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"DATA_PROTECTION",children:"Proteccin de Datos"}),a.jsx(lt,{value:"BANKING_DOMICILIATION",children:"Domiciliacin Bancaria"}),a.jsx(lt,{value:"RECEIPT",children:"Recibo"})]})]})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"name",children:"Nombre de la Plantilla"}),a.jsx(Ye,{id:"name",name:"name",defaultValue:r?.name||"",placeholder:"Ej: Plantilla de Recibo Estndar",required:!0})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"description",children:"Descripcin (opcional)"}),a.jsx(Do,{id:"description",name:"description",defaultValue:r?.description||"",placeholder:"Describe el propsito de esta plantilla",rows:2})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx(_e,{htmlFor:"content",children:"Contenido HTML"}),a.jsxs(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>d({name:r?.name||"Vista previa",content:l}),disabled:!l,children:[a.jsx(Cf,{className:"w-4 h-4 mr-2"}),"Vista Previa"]})]}),a.jsx(Do,{id:"content",name:"content",value:l,onChange:I=>c(I.target.value),placeholder:"Ingresa el cdigo HTML de la plantilla con las variables {{VARIABLE}}",rows:15,className:"font-mono text-sm",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Usa HTML vlido. Las variables se reemplazarn automticamente al generar el PDF."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(pe,{type:"button",variant:"outline",onClick:()=>{n(!1),i(null)},children:"Cancelar"}),a.jsxs(pe,{type:"submit",disabled:y.isPending||x.isPending,children:[r?"Actualizar":"Crear"," Plantilla"]})]})]})]})]})]}),a.jsx(Xe,{children:a.jsx(Qe,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(_e,{children:"Filtrar por tipo:"}),a.jsxs(Fn,{value:s,onValueChange:o,children:[a.jsx(Rn,{className:"w-[250px]",children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"all",children:"Todas las plantillas"}),a.jsx(lt,{value:"DATA_PROTECTION",children:"Proteccin de Datos"}),a.jsx(lt,{value:"BANKING_DOMICILIATION",children:"Domiciliacin Bancaria"}),a.jsx(lt,{value:"RECEIPT",children:"Recibos"})]})]})]})})}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Plantillas Registradas"}),a.jsxs(jn,{children:[C.length," plantilla(s) encontrada(s)"]})]}),a.jsx(Qe,{children:v?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando plantillas..."}):C.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay plantillas registradas. Crea una nueva para comenzar."}):a.jsxs(ns,{children:[a.jsx(rs,{children:a.jsxs(gn,{children:[a.jsx(Ze,{children:"Nombre"}),a.jsx(Ze,{children:"Tipo"}),a.jsx(Ze,{children:"Descripcin"}),a.jsx(Ze,{children:"Estado"}),a.jsx(Ze,{children:"Fecha"}),a.jsx(Ze,{className:"text-right",children:"Acciones"})]})}),a.jsx(is,{children:C.map(I=>a.jsxs(gn,{children:[a.jsx(He,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-4 h-4 text-muted-foreground"}),I.name]})}),a.jsx(He,{children:a.jsx(ct,{className:k(I.type),children:O(I.type)})}),a.jsx(He,{className:"max-w-xs truncate",children:I.description||"-"}),a.jsx(He,{children:a.jsx(pe,{size:"sm",variant:"ghost",onClick:()=>S.mutate({id:I.id,isActive:I.is_active}),children:I.is_active?a.jsxs(ct,{className:"bg-green-100 text-green-800",children:[a.jsx(Cf,{className:"w-3 h-3 mr-1"}),"Activa"]}):a.jsxs(ct,{variant:"secondary",children:[a.jsx(_fe,{className:"w-3 h-3 mr-1"}),"Inactiva"]})})}),a.jsx(He,{children:new Date(I.created_at).toLocaleDateString("es-ES")}),a.jsx(He,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[a.jsx(pe,{size:"sm",variant:"outline",onClick:()=>d(I),title:"Vista previa",children:a.jsx(Cf,{className:"w-4 h-4"})}),a.jsx(pe,{size:"sm",variant:"outline",onClick:()=>E(I),children:a.jsx(Cd,{className:"w-4 h-4"})}),a.jsx(pe,{size:"sm",variant:"outline",onClick:()=>A(I.id),disabled:b.isPending,children:a.jsx(Wi,{className:"w-4 h-4"})})]})})]},I.id))})]})})]}),a.jsx(xr,{open:!!u,onOpenChange:()=>d(null),children:a.jsxs(vr,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[a.jsxs(br,{children:[a.jsx(wr,{children:u?.name}),a.jsx(_r,{children:"Vista previa de la plantilla con datos de ejemplo"})]}),a.jsx("div",{className:"prose max-w-none p-6 bg-white border rounded",dangerouslySetInnerHTML:{__html:u?.content?(()=>{const I=p();let R=u.content;return Object.entries(I).forEach(([D,L])=>{const z=new RegExp(`{{\\s*${D}\\s*}}`,"gi");R=R.replace(z,String(L))}),R=R.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),R})():""}})]})})]})}function qXe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let F4=1;class UXe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:F4++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:l,title:r}):c):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const l=i.then(async u=>{if(o=["resolve",u],ve.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(VXe(u)&&!u.ok){s=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof f=="object"&&!ve.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...v})}else if(u instanceof Error){s=!1;const f=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof f=="object"&&!ve.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){s=!1;const f=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof f=="object"&&!ve.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:p,...v})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){s=!1;const d=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description,m=typeof d=="object"&&!ve.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...m})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{const r=n?.id||F4++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const fc=new UXe,HXe=(t,e)=>{const n=e?.id||F4++;return fc.addToast({title:t,...e,id:n}),n},VXe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",WXe=HXe,KXe=()=>fc.toasts,GXe=()=>fc.getActiveToasts(),Ao=Object.assign(WXe,{success:fc.success,info:fc.info,warning:fc.warning,error:fc.error,custom:fc.custom,message:fc.message,promise:fc.promise,dismiss:fc.dismiss,loading:fc.loading},{getHistory:KXe,getToasts:GXe});qXe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function yv(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 ":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function bK(){const[t,e]=ca(),[n,r]=Dj("/documentacion/presupuestos/:id/editar"),i=r?.id,s=!!i,[o,l]=N.useState("ASESORIA_LA_LLAVE"),[c,u]=N.useState("AUTONOMO"),[d,f]=N.useState(null),[p,m]=N.useState([]),{data:v,isLoading:y}=rce(i||""),{data:x}=gXe(o),b=lXe(),S=cXe(),j=uXe(),{register:E,handleSubmit:A,watch:P,setValue:O,formState:{errors:k}}=KI({defaultValues:{tipoGestoria:"ASESORIA_LA_LLAVE",creadoPor:"admin",configId:"",nombreCliente:"",nifCif:"",email:"",telefono:"",direccion:"",personaContacto:"",facturacion:0,facturasMes:0,nominasMes:0,sistemaTributacion:"Estimacin Directa",periodoDeclaraciones:"Trimestral",modelo303:!1,modelo111:!1,modelo115:!1,modelo130:!1,modelo100:!1,modelo349:!1,modelo347:!1,solicitudCertificados:!1,censosAEAT:!1,recepcionNotificaciones:!1,estadisticasINE:!1,solicitudAyudas:!1,conLaboralSocial:!1,aplicaDescuento:!1,tipoDescuento:"PORCENTAJE",valorDescuento:0}}),C=P(),I=N.useRef(null);N.useEffect(()=>{s&&v&&!y&&(l(v.tipoGestoria),O("nombreCliente",v.nombreCliente),O("nifCif",v.nifCif),O("email",v.email),O("telefono",v.telefono||""),O("direccion",v.direccion||""),O("personaContacto",v.personaContacto||""),O("facturacion",v.facturacion),O("facturasMes",v.facturasMes),O("nominasMes",v.nominasMes||0),O("sistemaTributacion",v.sistemaTributacion),O("periodoDeclaraciones",v.periodoDeclaraciones),O("modelo303",v.modelo303||!1),O("modelo111",v.modelo111||!1),O("modelo115",v.modelo115||!1),O("modelo130",v.modelo130||!1),O("modelo100",v.modelo100||!1),O("modelo349",v.modelo349||!1),O("modelo347",v.modelo347||!1),O("solicitudCertificados",v.solicitudCertificados||!1),O("censosAEAT",v.censosAEAT||!1),O("recepcionNotificaciones",v.recepcionNotificaciones||!1),O("estadisticasINE",v.estadisticasINE||!1),O("solicitudAyudas",v.solicitudAyudas||!1),O("conLaboralSocial",v.conLaboralSocial||!1),O("aplicaDescuento",v.aplicaDescuento||!1),O("tipoDescuento",v.tipoDescuento||"PORCENTAJE"),O("valorDescuento",v.valorDescuento||0),v.configId&&O("configId",v.configId))},[v,y,s,O]);const R=N.useMemo(()=>JSON.stringify({facturasMes:C.facturasMes,nominasMes:C.nominasMes,facturacion:C.facturacion,sistemaTributacion:C.sistemaTributacion,periodoDeclaraciones:C.periodoDeclaraciones,modelo303:C.modelo303,modelo111:C.modelo111,modelo115:C.modelo115,modelo130:C.modelo130,modelo100:C.modelo100,modelo349:C.modelo349,modelo347:C.modelo347,solicitudCertificados:C.solicitudCertificados,censosAEAT:C.censosAEAT,recepcionNotificaciones:C.recepcionNotificaciones,estadisticasINE:C.estadisticasINE,solicitudAyudas:C.solicitudAyudas,conLaboralSocial:C.conLaboralSocial,aplicaDescuento:C.aplicaDescuento,tipoDescuento:C.tipoDescuento,valorDescuento:C.valorDescuento}),[C.facturasMes,C.nominasMes,C.facturacion,C.sistemaTributacion,C.periodoDeclaraciones,C.modelo303,C.modelo111,C.modelo115,C.modelo130,C.modelo100,C.modelo349,C.modelo347,C.solicitudCertificados,C.censosAEAT,C.recepcionNotificaciones,C.estadisticasINE,C.solicitudAyudas,C.conLaboralSocial,C.aplicaDescuento,C.tipoDescuento,C.valorDescuento]);N.useEffect(()=>{if(!x)return;const L=JSON.parse(R);if(!L.facturasMes&&!L.facturacion){f(null);return}const z={facturasMes:L.facturasMes||0,nominasMes:L.nominasMes,facturacion:L.facturacion||0,sistemaTributacion:L.sistemaTributacion||"Estimacin Directa",periodoDeclaraciones:L.periodoDeclaraciones||"Trimestral",modelo303:L.modelo303,modelo111:L.modelo111,modelo115:L.modelo115,modelo130:L.modelo130,modelo100:L.modelo100,modelo349:L.modelo349,modelo347:L.modelo347,solicitudCertificados:L.solicitudCertificados,censosAEAT:L.censosAEAT,recepcionNotificaciones:L.recepcionNotificaciones,estadisticasINE:L.estadisticasINE,solicitudAyudas:L.solicitudAyudas,conLaboralSocial:L.conLaboralSocial,aplicaDescuento:L.aplicaDescuento,tipoDescuento:L.tipoDescuento,valorDescuento:L.valorDescuento};return I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{j.mutate({calculation:z,tipo:o},{onSuccess:W=>f(W),onError:()=>f(null)})},800),()=>{I.current&&clearTimeout(I.current)}},[R,x,o]),N.useEffect(()=>{x&&O("configId",x.id)},[x,O]),N.useEffect(()=>{s&&v&&(console.log(" Cargando datos del presupuesto existente:",v),l(v.tipoGestoria),v.nominasMes&&v.nominasMes>0?u("EMPRESA"):u("AUTONOMO"),O("nombreCliente",v.nombreCliente),O("nifCif",v.nifCif),O("email",v.email),O("telefono",v.telefono||""),O("direccion",v.direccion||""),O("personaContacto",v.personaContacto||""),O("facturacion",v.facturacion),O("facturasMes",v.facturasMes),O("nominasMes",v.nominasMes||0),O("sistemaTributacion",v.sistemaTributacion),O("periodoDeclaraciones",v.periodoDeclaraciones),O("modelo303",v.modelo303||!1),O("modelo111",v.modelo111||!1),O("modelo115",v.modelo115||!1),O("modelo130",v.modelo130||!1),O("modelo100",v.modelo100||!1),O("modelo349",v.modelo349||!1),O("modelo347",v.modelo347||!1),O("solicitudCertificados",v.solicitudCertificados||!1),O("censosAEAT",v.censosAEAT||!1),O("recepcionNotificaciones",v.recepcionNotificaciones||!1),O("estadisticasINE",v.estadisticasINE||!1),O("solicitudAyudas",v.solicitudAyudas||!1),O("conLaboralSocial",v.conLaboralSocial||!1),O("aplicaDescuento",v.aplicaDescuento||!1),O("tipoDescuento",v.tipoDescuento||"PORCENTAJE"),O("valorDescuento",v.valorDescuento||0),O("configId",v.configId||""),O("creadoPor",v.creadoPor||"admin"))},[s,v,O]);const D=async L=>{try{console.log(" Datos del formulario:",L),console.log(" Tipo gestora:",o),console.log(" Modo:",s?"Editar":"Crear");const z={...L,tipoGestoria:o};if(s&&i){console.log(" Actualizando presupuesto:",i);const W=await S.mutateAsync({id:i,input:z});console.log(" Presupuesto actualizado:",W),Ao.success("Presupuesto actualizado exitosamente"),e(`/documentacion/presupuestos/${i}`)}else{console.log(" Creando presupuesto nuevo");const W=await b.mutateAsync(z);console.log(" Presupuesto creado:",W),Ao.success("Presupuesto creado exitosamente"),e(`/documentacion/presupuestos/${W.id}`)}}catch(z){console.error(" Error:",z),console.error(" Detalles del error:",z.response?.data||z);const W=s?"actualizar":"crear";Ao.error(z.response?.data?.message||z.message||`Error al ${W} presupuesto`)}};return s&&y?a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Cargando presupuesto..."})]}):s&&!y&&!v?a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Presupuesto no encontrado"}),a.jsx(pe,{onClick:()=>e("/documentacion/presupuestos"),children:"Volver a la lista"})]}):a.jsxs("div",{className:"container mx-auto py-6 max-w-7xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>e("/documentacion/presupuestos"),children:[a.jsx(Hf,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:s?`Editar Presupuesto ${v?.numero||""}`:"Nuevo Presupuesto"}),a.jsx("p",{className:"text-muted-foreground",children:s?"Modifique los datos del presupuesto":"Complete los datos para generar el presupuesto"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ct,{variant:o==="ASESORIA_LA_LLAVE"?"default":"outline",children:o==="ASESORIA_LA_LLAVE"?"Asesora La Llave":"Gestora Online"}),a.jsx(ct,{variant:"secondary",children:c==="EMPRESA"?"Empresa":c==="AUTONOMO"?"Autnomo":"Particular"})]})]}),a.jsx("form",{onSubmit:A(D),children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Configuracin del Presupuesto"}),a.jsx(jn,{children:"Seleccione el tipo de cliente y gestora"})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"tipoCliente",children:"Tipo de Cliente *"}),a.jsxs(Fn,{value:c,onValueChange:L=>u(L),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"EMPRESA",children:" Empresa"}),a.jsx(lt,{value:"AUTONOMO",children:" Autnomo"}),a.jsx(lt,{value:"PARTICULAR",children:" Particular"})]})]})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"tipoGestoria",children:"Tipo de Gestora *"}),a.jsxs(Fn,{value:o,onValueChange:L=>l(L),children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"ASESORIA_LA_LLAVE",children:"Asesora La Llave"}),a.jsx(lt,{value:"GESTORIA_ONLINE",children:"Gestora Online"})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Datos del Cliente"}),a.jsx(jn,{children:"Informacin del cliente potencial"})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"nombreCliente",children:"Nombre Completo *"}),a.jsx(Ye,{id:"nombreCliente",...E("nombreCliente",{required:!0}),placeholder:"Nombre o razn social"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"nifCif",children:"CIF/NIF *"}),a.jsx(Ye,{id:"nifCif",...E("nifCif",{required:!0}),placeholder:"12345678A"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"email",children:"Email *"}),a.jsx(Ye,{id:"email",type:"email",...E("email",{required:!0}),placeholder:"cliente@ejemplo.com"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"telefono",children:"Telfono"}),a.jsx(Ye,{id:"telefono",...E("telefono"),placeholder:"600 123 456"})]})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"direccion",children:"Direccin"}),a.jsx(Ye,{id:"direccion",...E("direccion"),placeholder:"Calle, nmero, ciudad"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"personaContacto",children:"Persona de Contacto"}),a.jsx(Ye,{id:"personaContacto",...E("personaContacto"),placeholder:"Nombre de contacto"})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Datos Empresariales"})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"facturacion",children:"Facturacin Anual *"}),a.jsx(Ye,{id:"facturacion",type:"number",...E("facturacion",{required:!0,valueAsNumber:!0}),placeholder:"50000"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"facturasMes",children:"Facturas/Mes *"}),a.jsx(Ye,{id:"facturasMes",type:"number",...E("facturasMes",{required:!0,valueAsNumber:!0}),placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"nominasMes",children:"Nminas/Mes"}),a.jsx(Ye,{id:"nominasMes",type:"number",...E("nominasMes",{valueAsNumber:!0}),placeholder:"2"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"sistemaTributacion",children:"Sistema Tributacin *"}),a.jsxs(Fn,{onValueChange:L=>O("sistemaTributacion",L),value:C.sistemaTributacion,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"Estimacin Directa",children:"Estimacin Directa"}),a.jsx(lt,{value:"Estimacin Objetiva",children:"Estimacin Objetiva"}),a.jsx(lt,{value:"Mdulos",children:"Mdulos"})]})]})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"periodoDeclaraciones",children:"Periodo Declaraciones *"}),a.jsxs(Fn,{onValueChange:L=>O("periodoDeclaraciones",L),value:C.periodoDeclaraciones,children:[a.jsx(Rn,{children:a.jsx(Bn,{placeholder:"Seleccionar"})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"Mensual",children:"Mensual"}),a.jsx(lt,{value:"Trimestral",children:"Trimestral"}),a.jsx(lt,{value:"Anual",children:"Anual"})]})]})]})]})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Modelos Fiscales"}),a.jsx(jn,{children:"Seleccione los modelos que aplican"})]}),a.jsx(Qe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo303",checked:C.modelo303,onCheckedChange:L=>O("modelo303",L)}),a.jsx(_e,{htmlFor:"modelo303",children:"Modelo 303 (IVA)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo111",checked:C.modelo111,onCheckedChange:L=>O("modelo111",L)}),a.jsx(_e,{htmlFor:"modelo111",children:"Modelo 111 (IRPF)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo115",checked:C.modelo115,onCheckedChange:L=>O("modelo115",L)}),a.jsx(_e,{htmlFor:"modelo115",children:"Modelo 115 (Alquileres)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo130",checked:C.modelo130,onCheckedChange:L=>O("modelo130",L)}),a.jsx(_e,{htmlFor:"modelo130",children:"Modelo 130 (Autnomos)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo100",checked:C.modelo100,onCheckedChange:L=>O("modelo100",L)}),a.jsx(_e,{htmlFor:"modelo100",children:"Modelo 100 (Renta)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo349",checked:C.modelo349,onCheckedChange:L=>O("modelo349",L)}),a.jsx(_e,{htmlFor:"modelo349",children:"Modelo 349 (Intracomunitarias)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"modelo347",checked:C.modelo347,onCheckedChange:L=>O("modelo347",L)}),a.jsx(_e,{htmlFor:"modelo347",children:"Modelo 347 (Terceros)"})]})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Servicios Adicionales"})}),a.jsx(Qe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"solicitudCertificados",checked:C.solicitudCertificados,onCheckedChange:L=>O("solicitudCertificados",L)}),a.jsx(_e,{htmlFor:"solicitudCertificados",children:"Solicitud Certificados"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"censosAEAT",checked:C.censosAEAT,onCheckedChange:L=>O("censosAEAT",L)}),a.jsx(_e,{htmlFor:"censosAEAT",children:"Censos AEAT"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"recepcionNotificaciones",checked:C.recepcionNotificaciones,onCheckedChange:L=>O("recepcionNotificaciones",L)}),a.jsx(_e,{htmlFor:"recepcionNotificaciones",children:"Recepcin Notificaciones"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"estadisticasINE",checked:C.estadisticasINE,onCheckedChange:L=>O("estadisticasINE",L)}),a.jsx(_e,{htmlFor:"estadisticasINE",children:"Estadsticas INE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"solicitudAyudas",checked:C.solicitudAyudas,onCheckedChange:L=>O("solicitudAyudas",L)}),a.jsx(_e,{htmlFor:"solicitudAyudas",children:"Solicitud Ayudas"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"conLaboralSocial",checked:C.conLaboralSocial,onCheckedChange:L=>O("conLaboralSocial",L)}),a.jsx(_e,{htmlFor:"conLaboralSocial",children:"Con Laboral/Social"})]})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(gt,{children:"Servicios Personalizados"}),a.jsx(jn,{children:"Aade conceptos adicionales manualmente"})]}),a.jsxs(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>{m([...p,{id:Date.now().toString(),nombre:"",descripcion:"",precio:0}])},children:[a.jsx(Ri,{className:"w-4 h-4 mr-2"}),"Aadir Servicio"]})]})}),a.jsx(Qe,{className:"space-y-4",children:p.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No hay servicios personalizados. Haz clic en "Aadir Servicio" para crear uno.'}):p.map((L,z)=>a.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(_e,{className:"text-sm font-medium",children:["Servicio #",z+1]}),a.jsx(pe,{type:"button",variant:"ghost",size:"sm",onClick:()=>{m(p.filter(W=>W.id!==L.id))},children:a.jsx(Wi,{className:"w-4 h-4 text-destructive"})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:`nombre-${L.id}`,children:"Nombre del Servicio"}),a.jsx(Ye,{id:`nombre-${L.id}`,value:L.nombre,onChange:W=>{const X=p.map(q=>q.id===L.id?{...q,nombre:W.target.value}:q);m(X)},placeholder:"Ej: Asesora especial, Trmite urgente..."})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:`descripcion-${L.id}`,children:"Descripcin"}),a.jsx(Ye,{id:`descripcion-${L.id}`,value:L.descripcion,onChange:W=>{const X=p.map(q=>q.id===L.id?{...q,descripcion:W.target.value}:q);m(X)},placeholder:"Descripcin opcional del servicio"})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:`precio-${L.id}`,children:"Precio ()"}),a.jsx(Ye,{id:`precio-${L.id}`,type:"number",step:"0.01",value:L.precio,onChange:W=>{const X=p.map(q=>q.id===L.id?{...q,precio:parseFloat(W.target.value)||0}:q);m(X)},placeholder:"0.00"})]})]})]},L.id))})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Descuentos"})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ki,{id:"aplicaDescuento",checked:C.aplicaDescuento,onCheckedChange:L=>O("aplicaDescuento",L)}),a.jsx(_e,{htmlFor:"aplicaDescuento",children:"Aplicar Descuento"})]}),C.aplicaDescuento&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"tipoDescuento",children:"Tipo"}),a.jsxs(Fn,{onValueChange:L=>O("tipoDescuento",L),value:C.tipoDescuento,children:[a.jsx(Rn,{children:a.jsx(Bn,{})}),a.jsxs(Dn,{children:[a.jsx(lt,{value:"PORCENTAJE",children:"Porcentaje (%)"}),a.jsx(lt,{value:"FIJO",children:"Fijo ()"})]})]})]}),a.jsxs("div",{children:[a.jsx(_e,{htmlFor:"valorDescuento",children:"Valor"}),a.jsx(Ye,{id:"valorDescuento",type:"number",...E("valorDescuento",{valueAsNumber:!0}),placeholder:C.tipoDescuento==="PORCENTAJE"?"10":"50"})]})]})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs(Xe,{className:"sticky top-6",children:[a.jsx(ht,{children:a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(r0,{className:`w-5 h-5 ${j.isPending?"animate-pulse":""}`}),"Resumen del Presupuesto",j.isPending&&a.jsx("span",{className:"text-xs font-normal text-muted-foreground ml-auto",children:"Actualizando..."})]})}),a.jsxs(Qe,{className:"space-y-4",children:[d?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"space-y-2 transition-opacity duration-200",style:{opacity:j.isPending?.6:1},children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Contabilidad:"}),a.jsx("span",{className:"font-medium tabular-nums",children:yv(d.totalContabilidad)})]}),(d.totalLaboral??0)>0&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Laboral:"}),a.jsx("span",{className:"font-medium tabular-nums",children:yv(d.totalLaboral)})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{className:"font-medium tabular-nums",children:yv(d.subtotal)})]}),p.length>0&&a.jsxs("div",{className:"flex justify-between text-sm text-blue-600",children:[a.jsx("span",{children:"Servicios Personalizados:"}),a.jsxs("span",{className:"font-medium tabular-nums",children:["+",yv(p.reduce((L,z)=>L+z.precio,0))]})]}),(d.descuentoCalculado??0)>0&&a.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[a.jsx("span",{children:"Descuento:"}),a.jsxs("span",{className:"font-medium tabular-nums",children:["-",yv(d.descuentoCalculado)]})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total Final:"}),a.jsx("span",{className:"text-primary tabular-nums",children:yv(d.totalFinal+p.reduce((L,z)=>L+z.precio,0))})]})]})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(r0,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm font-medium mb-2",children:"Empiece a completar los datos"}),a.jsxs("p",{className:"text-xs",children:["El clculo se actualizar",a.jsx("br",{}),"automticamente mientras escribe"]})]}),a.jsxs("div",{className:"pt-4 border-t mt-4",children:[a.jsxs(pe,{type:"submit",className:"w-full",size:"lg",disabled:b.isPending||S.isPending||!C.nombreCliente||!C.nifCif||!C.email,children:[a.jsx($j,{className:"w-4 h-4 mr-2"}),b.isPending||S.isPending?s?"Actualizando...":"Guardando...":s?"Actualizar Presupuesto":"Crear Presupuesto"]}),(!C.nombreCliente||!C.nifCif||!C.email)&&a.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"Complete nombre, NIF y email del cliente"})]})]})]})})]})})]})}function YXe(){const[t,e]=N.useState(!1),[n,r]=N.useState(null),[i,s]=N.useState(null),o=N.useCallback(async c=>{e(!0),s(null);try{const u=await fetch("/api/gestoria-budgets/calculate-autonomo",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!u.ok){const p=await u.json().catch(()=>({message:"Error al calcular presupuesto"}));throw new Error(p.message||`Error ${u.status}: ${u.statusText}`)}const f={success:!0,data:await u.json()};return r(f),f}catch(u){const d=u.message||"Error al calcular presupuesto";s(d);const f={success:!1,error:d};return r(f),f}finally{e(!1)}},[]),l=N.useCallback(()=>{r(null),s(null)},[]);return{calculate:o,clearResult:l,loading:t,result:n,error:i}}var R_="Collapsible",[XXe,dce]=Gs(R_),[QXe,I3]=XXe(R_),fce=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...l}=t,[c,u]=Ro({prop:r,defaultProp:i??!1,onChange:o,caller:R_});return a.jsx(QXe,{scope:n,disabled:s,contentId:Hs(),open:c,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),children:a.jsx(Lt.div,{"data-state":F3(c),"data-disabled":s?"":void 0,...l,ref:e})})});fce.displayName=R_;var hce="CollapsibleTrigger",pce=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=I3(hce,n);return a.jsx(Lt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":F3(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:bt(t.onClick,i.onOpenToggle)})});pce.displayName=hce;var L3="CollapsibleContent",mce=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=I3(L3,t.__scopeCollapsible);return a.jsx(ua,{present:n||i.open,children:({present:s})=>a.jsx(ZXe,{...r,ref:e,present:s})})});mce.displayName=L3;var ZXe=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=I3(L3,n),[l,c]=N.useState(r),u=N.useRef(null),d=_n(e,u),f=N.useRef(0),p=f.current,m=N.useRef(0),v=m.current,y=o.open||l,x=N.useRef(y),b=N.useRef(void 0);return N.useEffect(()=>{const S=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(S)},[]),ws(()=>{const S=u.current;if(S){b.current=b.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const j=S.getBoundingClientRect();f.current=j.height,m.current=j.width,x.current||(S.style.transitionDuration=b.current.transitionDuration,S.style.animationName=b.current.animationName),c(r)}},[o.open,r]),a.jsx(Lt.div,{"data-state":F3(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...s,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:y&&i})});function F3(t){return t?"open":"closed"}var JXe=fce,eQe=pce,tQe=mce,Iu="Accordion",nQe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[B3,rQe,iQe]=Yy(Iu),[D_]=Gs(Iu,[iQe,dce]),$3=dce(),gce=ve.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return a.jsx(B3.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(lQe,{...s,ref:e}):a.jsx(oQe,{...i,ref:e})})});gce.displayName=Iu;var[vce,sQe]=D_(Iu),[yce,aQe]=D_(Iu,{collapsible:!1}),oQe=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[l,c]=Ro({prop:n,defaultProp:r??"",onChange:i,caller:Iu});return a.jsx(vce,{scope:t.__scopeAccordion,value:ve.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:ve.useCallback(()=>s&&c(""),[s,c]),children:a.jsx(yce,{scope:t.__scopeAccordion,collapsible:s,children:a.jsx(xce,{...o,ref:e})})})}),lQe=ve.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,l]=Ro({prop:n,defaultProp:r??[],onChange:i,caller:Iu}),c=ve.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=ve.useCallback(d=>l((f=[])=>f.filter(p=>p!==d)),[l]);return a.jsx(vce,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(yce,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(xce,{...s,ref:e})})})}),[cQe,I_]=D_(Iu),xce=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,l=ve.useRef(null),c=_n(l,e),u=rQe(n),f=bg(i)==="ltr",p=bt(t.onKeyDown,m=>{if(!nQe.includes(m.key))return;const v=m.target,y=u().filter(k=>!k.ref.current?.disabled),x=y.findIndex(k=>k.ref.current===v),b=y.length;if(x===-1)return;m.preventDefault();let S=x;const j=0,E=b-1,A=()=>{S=x+1,S>E&&(S=j)},P=()=>{S=x-1,S<j&&(S=E)};switch(m.key){case"Home":S=j;break;case"End":S=E;break;case"ArrowRight":s==="horizontal"&&(f?A():P());break;case"ArrowDown":s==="vertical"&&A();break;case"ArrowLeft":s==="horizontal"&&(f?P():A());break;case"ArrowUp":s==="vertical"&&P();break}const O=S%b;y[O].ref.current?.focus()});return a.jsx(cQe,{scope:n,disabled:r,direction:i,orientation:s,children:a.jsx(B3.Slot,{scope:n,children:a.jsx(Lt.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:p})})})}),Mj="AccordionItem",[uQe,z3]=D_(Mj),bce=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=I_(Mj,n),o=sQe(Mj,n),l=$3(n),c=Hs(),u=r&&o.value.includes(r)||!1,d=s.disabled||t.disabled;return a.jsx(uQe,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(JXe,{"data-orientation":s.orientation,"data-state":_ce(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});bce.displayName=Mj;var wce="AccordionHeader",Nce=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=I_(Iu,n),s=z3(wce,n);return a.jsx(Lt.h3,{"data-orientation":i.orientation,"data-state":_ce(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Nce.displayName=wce;var B4="AccordionTrigger",Sce=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=I_(Iu,n),s=z3(B4,n),o=aQe(B4,n),l=$3(n);return a.jsx(B3.ItemSlot,{scope:n,children:a.jsx(eQe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...l,...r,ref:e})})});Sce.displayName=B4;var jce="AccordionContent",Ece=ve.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=I_(Iu,n),s=z3(jce,n),o=$3(n);return a.jsx(tQe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Ece.displayName=jce;function _ce(t){return t?"open":"closed"}var dQe=gce,fQe=bce,hQe=Nce,Cce=Sce,Ace=Ece;const pQe=dQe,kce=N.forwardRef(({className:t,...e},n)=>a.jsx(fQe,{ref:n,className:ft("border-b",t),...e}));kce.displayName="AccordionItem";const Tce=N.forwardRef(({className:t,children:e,...n},r)=>a.jsx(hQe,{className:"flex",children:a.jsxs(Cce,{ref:r,className:ft("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(Bj,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Tce.displayName=Cce.displayName;const Oce=N.forwardRef(({className:t,children:e,...n},r)=>a.jsx(Ace,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:ft("pb-4 pt-0",t),children:e})}));Oce.displayName=Ace.displayName;function mQe({data:t,tipoGestoria:e}){const{detalleCalculo:n}=t,r=i=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(i);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Xe,{className:"border-2 border-primary",children:[a.jsx(ht,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(r0,{className:"h-5 w-5 text-primary"}),a.jsx(gt,{children:"Resumen del Presupuesto"})]}),a.jsx(ct,{variant:e==="ASESORIA_LA_LLAVE"?"default":"secondary",className:"text-sm",children:e==="ASESORIA_LA_LLAVE"?"Asesora La Llave":"Gestora Online"})]})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-lg",children:[a.jsx("span",{className:"font-medium",children:t.conceptoBase}),a.jsx("span",{className:"font-bold text-primary",children:r(t.precioBase)})]}),t.conceptosAdicionales.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ts,{}),a.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:"Conceptos Adicionales:"}),t.conceptosAdicionales.map((i,s)=>a.jsxs("div",{className:"flex justify-between items-center text-sm pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:i.concepto}),a.jsx(ct,{variant:"outline",className:"text-xs",children:i.tipo})]}),a.jsx("span",{className:"font-medium",children:r(i.precio)})]},s))]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:"Subtotal"}),a.jsx("span",{className:"font-semibold",children:r(t.subtotal)})]}),a.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[a.jsx("span",{children:"IVA (21%)"}),a.jsx("span",{children:r(t.iva)})]}),a.jsx(ts,{className:"my-2"}),a.jsxs("div",{className:"flex justify-between items-center text-2xl",children:[a.jsx("span",{className:"font-bold",children:"Total"}),a.jsx("span",{className:"font-bold text-primary",children:r(t.total)})]})]})]}),a.jsx(pQe,{type:"single",collapsible:!0,className:"w-full",children:a.jsxs(kce,{value:"detalles",children:[a.jsx(Tce,{className:"hover:no-underline",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(iD,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Ver Detalle del Clculo"})]})}),a.jsx(Oce,{children:a.jsxs("div",{className:"space-y-6 pt-4",children:[a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4"}),"1. Clculo Base por Tramos"]})}),a.jsxs(Qe,{className:"space-y-3 text-sm",children:[n.tramoFacturas&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Tramo Facturas:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoFacturas.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",n.tramoFacturas.min," - ",n.tramoFacturas.max??"",")"]}),a.jsx("div",{className:"font-semibold",children:r(n.precioFacturas)})]})]}),n.tramoNominas&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Tramo Nminas:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoNominas.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",n.tramoNominas.min," - ",n.tramoNominas.max??"",")"]}),a.jsx("div",{className:"font-semibold",children:r(n.precioNominas)})]})]}),n.tramoFacturacion&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Factor Facturacin Anual:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoFacturacion.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Multiplicador: ",n.tramoFacturacion.multiplicador,"x"]}),a.jsxs("div",{className:"font-semibold",children:["Factor: ",n.factorFacturacion.toFixed(2)]})]})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio Base Calculado:"}),a.jsx("span",{className:"text-primary",children:r(n.precioBase)})]})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(mp,{className:"h-4 w-4"}),"2. Ajuste Perodo Mensual"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje:"}),a.jsxs("span",{children:[n.porcentajePeriodoMensual,"%"]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con Perodo:"}),a.jsx("span",{className:"text-primary",children:r(n.precioBaseConPeriodo)})]})]})]}),e==="GESTORIA_ONLINE"&&n.porcentajeEDN!==void 0&&a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(ip,{className:"h-4 w-4"}),"3. Incremento EDN (Gestin Online)"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje EDN:"}),a.jsxs("span",{children:[n.porcentajeEDN,"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Incremento:"}),a.jsxs("span",{children:["+",r(n.incrementoEDN||0)]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con EDN:"}),a.jsx("span",{className:"text-primary",children:r(n.precioConEDN||0)})]})]})]}),e==="GESTORIA_ONLINE"&&n.porcentajeModulos!==void 0&&a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(lD,{className:"h-4 w-4"}),"4. Incremento Mdulos (Gestin Online)"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje Mdulos:"}),a.jsxs("span",{children:[n.porcentajeModulos,"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Incremento:"}),a.jsxs("span",{children:["+",r(n.incrementoModulos||0)]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con Mdulos:"}),a.jsx("span",{className:"text-primary",children:r(n.precioConModulos||0)})]})]})]}),n.modelosFiscalesSeleccionados.length>0&&a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4"}),"5. Modelos Fiscales Seleccionados"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[n.modelosFiscalesSeleccionados.map((i,s)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-xs",children:i.codigo}),a.jsx("span",{children:i.nombre})]}),a.jsx("span",{children:r(i.precio)})]},s)),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Total Modelos:"}),a.jsx("span",{className:"text-primary",children:r(n.precioModelosFiscales)})]})]})]}),n.serviciosSeleccionados.length>0&&a.jsxs(Xe,{children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2",children:[a.jsx(_G,{className:"h-4 w-4"}),"6. Servicios Adicionales"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[n.serviciosSeleccionados.map((i,s)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:i.nombre}),a.jsx(ct,{variant:"outline",className:"text-xs",children:i.tipo})]}),a.jsx("span",{children:r(i.precio)})]},s)),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Total Servicios:"}),a.jsx("span",{className:"text-primary",children:r(n.precioServiciosAdicionales)})]})]})]}),n.descuentoAplicado!==void 0&&n.descuentoAplicado>0&&a.jsxs(Xe,{className:"border-green-200 bg-green-50",children:[a.jsx(ht,{className:"pb-3",children:a.jsxs(gt,{className:"text-sm flex items-center gap-2 text-green-700",children:[a.jsx(mp,{className:"h-4 w-4"}),"Descuento Aplicado"]})}),a.jsxs(Qe,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal sin descuento:"}),a.jsx("span",{children:r(n.subtotalSinDescuento||0)})]}),a.jsxs("div",{className:"flex justify-between text-green-700 font-semibold",children:[a.jsxs("span",{children:["Descuento (",n.porcentajeDescuento,"%):"]}),a.jsxs("span",{children:["-",r(n.descuentoAplicado)]})]})]})]})]})})]})})]})}function gQe({onCalculationComplete:t,initialValues:e}){const{getFiscalModels:n,getServices:r}=Fp(),{calculate:i,loading:s,result:o,error:l}=YXe(),[c,u]=N.useState(e?.tipoGestoria||"ASESORIA_LA_LLAVE"),[d,f]=N.useState(e?.nFacturas||10),[p,m]=N.useState(e?.nNominas||2),[v,y]=N.useState(e?.facturacionAnual||5e4),[x,b]=N.useState(e?.modelosFiscales||[]),[S,j]=N.useState(e?.serviciosAdicionales||[]),[E,A]=N.useState(e?.aplicarDescuento||!1),[P,O]=N.useState(e?.porcentajeDescuento||0),[k,C]=N.useState([]),[I,R]=N.useState([]),[D,L]=N.useState(!0);N.useEffect(()=>{(async()=>{L(!0);try{const[V,Y]=await Promise.all([n(),r()]);C(V.filter(re=>re.activo).sort((re,Q)=>re.orden-Q.orden)),R(Y.filter(re=>re.activo).sort((re,Q)=>re.orden-Q.orden))}catch(V){console.error("Error cargando datos:",V)}finally{L(!1)}})()},[n,r]);const z=async()=>{const V=await i({tipoGestoria:c,nFacturas:d,nNominas:p,facturacionAnual:v,modelosFiscales:x,serviciosAdicionales:S,aplicarDescuento:E,porcentajeDescuento:E?P:void 0});V.success&&t&&t(V.data)},W=q=>{b(V=>V.includes(q)?V.filter(Y=>Y!==q):[...V,q])},X=q=>{j(V=>V.includes(q)?V.filter(Y=>Y!==q):[...V,q])};return D?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Mi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(r0,{className:"h-5 w-5"}),"Tipo de Gestora"]}),a.jsx(jn,{children:"Selecciona el modelo de gestin"})]}),a.jsx(Qe,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(pe,{variant:c==="ASESORIA_LA_LLAVE"?"default":"outline",onClick:()=>u("ASESORIA_LA_LLAVE"),className:"flex-1",children:"Asesora La Llave"}),a.jsx(pe,{variant:c==="GESTORIA_ONLINE"?"default":"outline",onClick:()=>u("GESTORIA_ONLINE"),className:"flex-1",children:"Gestora Online"})]})})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"h-5 w-5"}),"Datos de Actividad"]}),a.jsx(jn,{children:"Introduce los datos principales del autnomo"})]}),a.jsx(Qe,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nFacturas",children:"N Facturas"}),a.jsx(Ye,{id:"nFacturas",type:"number",min:"0",value:d,onChange:q=>f(parseInt(q.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturas emitidas al mes"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nNominas",children:"N Nminas"}),a.jsx(Ye,{id:"nNominas",type:"number",min:"0",value:p,onChange:q=>m(parseInt(q.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Nminas procesadas al mes"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"facturacionAnual",children:"Facturacin Anual ()"}),a.jsx(Ye,{id:"facturacionAnual",type:"number",min:"0",step:"1000",value:v,onChange:q=>y(parseFloat(q.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturacin anual estimada"})]})]})})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(mp,{className:"h-5 w-5"}),"Modelos Fiscales"]}),a.jsx(jn,{children:"Selecciona los modelos fiscales que necesita el autnomo"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:k.map(q=>a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>W(q.id),children:[a.jsx(ki,{id:`modelo-${q.id}`,checked:x.includes(q.id),onCheckedChange:()=>W(q.id)}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-xs font-semibold",children:q.codigoModelo}),a.jsx(_e,{htmlFor:`modelo-${q.id}`,className:"cursor-pointer font-medium",children:q.nombreModelo})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[q.precio.toFixed(2),"/mes"]})]})]},q.id))}),k.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay modelos fiscales disponibles"})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(lD,{className:"h-5 w-5"}),"Servicios Adicionales"]}),a.jsx(jn,{children:"Aade servicios extra al presupuesto"})]}),a.jsxs(Qe,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-3",children:I.map(q=>a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>X(q.id),children:[a.jsx(ki,{id:`servicio-${q.id}`,checked:S.includes(q.id),onCheckedChange:()=>X(q.id)}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_e,{htmlFor:`servicio-${q.id}`,className:"cursor-pointer font-medium",children:q.nombre}),a.jsx(ct,{variant:q.tipoServicio==="MENSUAL"?"default":"outline",children:q.tipoServicio})]}),q.descripcion&&a.jsx("p",{className:"text-xs text-muted-foreground",children:q.descripcion}),a.jsxs("p",{className:"text-xs font-semibold text-primary",children:[q.precio.toFixed(2),"",q.tipoServicio==="MENSUAL"?"/mes":""]})]})]},q.id))}),I.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay servicios adicionales disponibles"})]})]}),a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(ip,{className:"h-5 w-5"}),"Descuento"]}),a.jsx(jn,{children:"Aplicar descuento al presupuesto"})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Va,{id:"aplicar-descuento",checked:E,onCheckedChange:A}),a.jsx(_e,{htmlFor:"aplicar-descuento",children:"Aplicar descuento"})]}),E&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"porcentajeDescuento",children:"Porcentaje de descuento (%)"}),a.jsx(Ye,{id:"porcentajeDescuento",type:"number",min:"0",max:"100",step:"1",value:P,onChange:q=>O(parseFloat(q.target.value)||0)})]})]})]}),a.jsxs(pe,{onClick:z,disabled:s,size:"lg",className:"w-full",children:[s&&a.jsx(Mi,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Calculando...":"Calcular Presupuesto"]}),l&&a.jsxs(Pf,{variant:"destructive",children:[a.jsx(Ec,{className:"h-4 w-4"}),a.jsx(Mf,{children:l})]}),o?.success&&o.data&&a.jsx(mQe,{data:o.data,tipoGestoria:c})]})}function vQe(){const[t,e]=ca(),[n,r]=N.useState("cliente"),[i,s]=N.useState(null),[o,l]=N.useState("ASESORIA_LA_LLAVE"),{register:c,handleSubmit:u,formState:{errors:d}}=KI(),f=m=>{s(m),r("guardar")},p=async m=>{if(!i){Ao.error("Debe calcular el presupuesto primero");return}try{const v={...m,tipoGestoria:o,subtotal:i.subtotal,iva:i.iva,total:i.total,estado:"BORRADOR",detalleCalculo:i.detalleCalculo,conceptos:[{concepto:i.conceptoBase,precio:i.precioBase},...i.conceptosAdicionales]},y=await fetch("/api/gestoria-budgets",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(v)});if(!y.ok){const b=await y.json();throw new Error(b.message||"Error al crear presupuesto")}const x=await y.json();Ao.success("Presupuesto creado exitosamente"),e(`/documentacion/presupuestos/${x.id}`)}catch(v){Ao.error(v.message||"Error al guardar presupuesto")}};return a.jsxs("div",{className:"container mx-auto py-6 max-w-6xl space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>e("/documentacion/presupuestos"),children:[a.jsx(Hf,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Nuevo Presupuesto Autnomo"}),a.jsx("p",{className:"text-muted-foreground",children:"Genera un presupuesto personalizado con clculo automtico"})]})]})}),a.jsxs(kc,{value:n,onValueChange:r,children:[a.jsxs(ql,{className:"grid w-full grid-cols-3",children:[a.jsxs(Wn,{value:"cliente",className:"flex items-center gap-2",children:[a.jsx(Km,{className:"h-4 w-4"}),"Datos del Cliente"]}),a.jsxs(Wn,{value:"calculo",className:"flex items-center gap-2",children:[a.jsx(r0,{className:"h-4 w-4"}),"Clculo"]}),a.jsxs(Wn,{value:"guardar",disabled:!i,className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4"}),"Revisar y Guardar"]})]}),a.jsx(or,{value:"cliente",className:"space-y-6 mt-6",children:a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(Km,{className:"h-5 w-5"}),"Informacin del Cliente"]}),a.jsx(jn,{children:"Introduce los datos del cliente para el presupuesto"})]}),a.jsx(Qe,{children:a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nombreCliente",children:"Nombre / Razn Social *"}),a.jsx(Ye,{id:"nombreCliente",...c("nombreCliente",{required:"Este campo es obligatorio"}),placeholder:"Juan Prez Garca"}),d.nombreCliente&&a.jsx("p",{className:"text-sm text-destructive",children:d.nombreCliente.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"nifCif",children:"CIF/NIF *"}),a.jsx(Ye,{id:"nifCif",...c("nifCif",{required:"Este campo es obligatorio"}),placeholder:"12345678A"}),d.nifCif&&a.jsx("p",{className:"text-sm text-destructive",children:d.nifCif.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"email",children:"Email *"}),a.jsx(Ye,{id:"email",type:"email",...c("email",{required:"Este campo es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invlido"}}),placeholder:"cliente@ejemplo.com"}),d.email&&a.jsx("p",{className:"text-sm text-destructive",children:d.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"telefono",children:"Telfono"}),a.jsx(Ye,{id:"telefono",...c("telefono"),placeholder:"600 123 456"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"direccion",children:"Direccin"}),a.jsx(Ye,{id:"direccion",...c("direccion"),placeholder:"Calle, nmero, cdigo postal, ciudad"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"personaContacto",children:"Persona de Contacto"}),a.jsx(Ye,{id:"personaContacto",...c("personaContacto"),placeholder:"Nombre de la persona de contacto"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"observaciones",children:"Observaciones"}),a.jsx(Do,{id:"observaciones",...c("observaciones"),placeholder:"Notas internas sobre el cliente o el presupuesto",rows:3})]}),a.jsx(ts,{}),a.jsx("div",{className:"flex justify-end",children:a.jsx(pe,{type:"button",onClick:()=>r("calculo"),children:"Siguiente: Calcular Presupuesto"})})]})})]})}),a.jsx(or,{value:"calculo",className:"space-y-6 mt-6",children:a.jsx(gQe,{onCalculationComplete:f,initialValues:{tipoGestoria:o}})}),a.jsx(or,{value:"guardar",className:"space-y-6 mt-6",children:i&&a.jsxs(a.Fragment,{children:[a.jsxs(Xe,{children:[a.jsxs(ht,{children:[a.jsx(gt,{children:"Resumen del Presupuesto"}),a.jsx(jn,{children:"Revisa todos los datos antes de guardar el presupuesto"})]}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Concepto base:"}),a.jsx("p",{className:"font-medium",children:i.conceptoBase})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Precio base:"}),a.jsxs("p",{className:"font-medium",children:[i.precioBase.toFixed(2),""]})]})]}),i.conceptosAdicionales.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(ts,{}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Conceptos adicionales:"}),a.jsx("ul",{className:"space-y-1",children:i.conceptosAdicionales.map((m,v)=>a.jsxs("li",{className:"text-sm flex justify-between",children:[a.jsx("span",{children:m.concepto}),a.jsxs("span",{className:"font-medium",children:[m.precio.toFixed(2),""]})]},v))})]})]}),a.jsx(ts,{}),a.jsxs("div",{className:"space-y-2 text-lg",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{className:"font-semibold",children:[i.subtotal.toFixed(2),""]})]}),a.jsxs("div",{className:"flex justify-between text-muted-foreground text-sm",children:[a.jsx("span",{children:"IVA (21%):"}),a.jsxs("span",{children:[i.iva.toFixed(2),""]})]}),a.jsxs("div",{className:"flex justify-between text-2xl font-bold text-primary",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:[i.total.toFixed(2),""]})]})]})]})]}),a.jsxs("div",{className:"flex gap-4 justify-end",children:[a.jsx(pe,{variant:"outline",onClick:()=>r("calculo"),children:"Volver a Calcular"}),a.jsxs(pe,{onClick:u(p),children:[a.jsx($j,{className:"w-4 h-4 mr-2"}),"Guardar Presupuesto"]})]})]})})]})]})}function xv(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 ":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function yQe(){const[t,e]=Dj("/documentacion/presupuestos/:id"),[,n]=ca(),r=e?.id||"",[i,s]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(""),{data:d,isLoading:f}=rce(r),{data:p}=mXe(r),m=fXe(),v=hXe(),y=pXe(),x=dXe();if(f)return a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Cargando presupuesto..."})]});if(!d)return a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Presupuesto no encontrado"}),a.jsx(pe,{onClick:()=>n("/documentacion/presupuestos"),children:"Volver a la lista"})]});const b=async()=>{try{await m.mutateAsync(r),Ao.success("Presupuesto aceptado")}catch(P){Ao.error(P.message)}},S=async()=>{if(!c.trim()){Ao.error("Debe indicar el motivo del rechazo");return}try{await v.mutateAsync({id:r,motivoRechazo:c}),Ao.success("Presupuesto rechazado"),s(!1)}catch(P){Ao.error(P.message)}},j=async()=>{try{const P=await y.mutateAsync({id:r});Ao.success("Cliente creado exitosamente"),n(`/clientes/${P.clientId}`)}catch(P){Ao.error(P.message)}},E=async()=>{try{await x.mutateAsync({id:r}),Ao.success("Presupuesto enviado")}catch(P){Ao.error(P.message)}},A=P=>{const O={BORRADOR:"bg-gray-500",ENVIADO:"bg-blue-500",ACEPTADO:"bg-green-500",RECHAZADO:"bg-red-500",FACTURADO:"bg-purple-500"};return a.jsx(ct,{className:O[P]||"",children:P})};return a.jsxs("div",{className:"container mx-auto py-6 max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>n("/documentacion/presupuestos"),children:[a.jsx(Hf,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold",children:["Presupuesto ",d.numero]}),a.jsxs("p",{className:"text-muted-foreground",children:["Creado el ",qa(new Date(d.fechaCreacion),"dd 'de' MMMM 'de' yyyy",{locale:vc})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[A(d.estado),a.jsx(ct,{variant:d.tipoGestoria==="ASESORIA_LA_LLAVE"?"default":"outline",children:d.tipoGestoria==="ASESORIA_LA_LLAVE"?"Asesora La Llave":"Gestora Online"})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Acciones"})}),a.jsxs(Qe,{className:"flex flex-wrap gap-2",children:[a.jsxs(pe,{onClick:()=>ice(d.id,d.numero),children:[a.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]}),d.estado==="BORRADOR"&&a.jsxs(a.Fragment,{children:[a.jsxs(pe,{onClick:E,disabled:x.isPending,children:[a.jsx(oD,{className:"w-4 h-4 mr-2"}),x.isPending?"Enviando...":"Enviar por Email"]}),a.jsxs(pe,{variant:"outline",onClick:()=>n(`/documentacion/presupuestos/${r}/editar`),children:[a.jsx(fd,{className:"w-4 h-4 mr-2"}),"Editar"]})]}),(d.estado==="ENVIADO"||d.estado==="BORRADOR")&&a.jsxs(a.Fragment,{children:[a.jsxs(pe,{onClick:b,disabled:m.isPending,children:[a.jsx(jG,{className:"w-4 h-4 mr-2"}),m.isPending?"Aceptando...":"Marcar Aceptado"]}),a.jsxs(pe,{variant:"destructive",onClick:()=>s(!0),disabled:v.isPending,children:[a.jsx(vu,{className:"w-4 h-4 mr-2"}),"Rechazar"]})]}),d.estado==="ACEPTADO"&&p?.canConvert&&a.jsxs(pe,{onClick:()=>l(!0),disabled:y.isPending,children:[a.jsx(nhe,{className:"w-4 h-4 mr-2"}),y.isPending?"Convirtiendo...":"Convertir a Cliente"]}),d.estado==="ACEPTADO"&&!p?.canConvert&&a.jsx("div",{className:"text-sm text-muted-foreground",children:p?.reason||"No se puede convertir a cliente"})]})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Informacin del Cliente"})}),a.jsx(Qe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Nombre"}),a.jsx("p",{className:"font-medium",children:d.nombreCliente})]}),a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"CIF/NIF"}),a.jsx("p",{className:"font-medium font-mono",children:d.nifCif})]}),a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-medium",children:d.email})]}),d.telefono&&a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Telfono"}),a.jsx("p",{className:"font-medium",children:d.telefono})]}),d.direccion&&a.jsxs("div",{className:"col-span-2",children:[a.jsx(_e,{className:"text-muted-foreground",children:"Direccin"}),a.jsx("p",{className:"font-medium",children:d.direccion})]})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Datos Empresariales"})}),a.jsx(Qe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Facturacin Anual"}),a.jsx("p",{className:"font-medium",children:xv(d.facturacion)})]}),a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Facturas/Mes"}),a.jsx("p",{className:"font-medium",children:d.facturasMes})]}),d.nominasMes&&a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Nminas/Mes"}),a.jsx("p",{className:"font-medium",children:d.nominasMes})]}),a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Sistema Tributacin"}),a.jsx("p",{className:"font-medium",children:d.sistemaTributacion})]}),a.jsxs("div",{children:[a.jsx(_e,{className:"text-muted-foreground",children:"Periodo Declaraciones"}),a.jsx("p",{className:"font-medium",children:d.periodoDeclaraciones})]})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Modelos Fiscales"})}),a.jsx(Qe,{children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.modelo303&&a.jsx(ct,{children:"Modelo 303"}),d.modelo111&&a.jsx(ct,{children:"Modelo 111"}),d.modelo115&&a.jsx(ct,{children:"Modelo 115"}),d.modelo130&&a.jsx(ct,{children:"Modelo 130"}),d.modelo100&&a.jsx(ct,{children:"Modelo 100"}),d.modelo349&&a.jsx(ct,{children:"Modelo 349"}),d.modelo347&&a.jsx(ct,{children:"Modelo 347"})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Servicios Adicionales"})}),a.jsx(Qe,{children:a.jsxs("div",{className:"space-y-2",children:[d.solicitudCertificados&&a.jsx("div",{children:" Solicitud de Certificados"}),d.censosAEAT&&a.jsx("div",{children:" Censos AEAT"}),d.recepcionNotificaciones&&a.jsx("div",{children:" Recepcin de Notificaciones"}),d.estadisticasINE&&a.jsx("div",{children:" Estadsticas INE"}),d.solicitudAyudas&&a.jsx("div",{children:" Solicitud de Ayudas"}),d.conLaboralSocial&&a.jsx("div",{children:" Con Laboral/Social"})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Resumen Econmico"})}),a.jsxs(Qe,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Contabilidad:"}),a.jsx("span",{className:"font-medium",children:xv(d.totalContabilidad)})]}),d.totalLaboral>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Laboral:"}),a.jsx("span",{className:"font-medium",children:xv(d.totalLaboral)})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:xv(d.subtotal)})]}),d.aplicaDescuento&&d.descuentoCalculado>0&&a.jsxs("div",{className:"flex justify-between text-green-600",children:[a.jsxs("span",{children:["Descuento (",d.tipoDescuento==="PORCENTAJE"?`${d.valorDescuento}%`:"Fijo","):"]}),a.jsxs("span",{className:"font-medium",children:["-",xv(d.descuentoCalculado)]})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[a.jsx("span",{children:"Total Final:"}),a.jsx("span",{className:"text-primary",children:xv(d.totalFinal)})]})]})]}),a.jsx(xr,{open:i,onOpenChange:s,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Rechazar Presupuesto"}),a.jsx(_r,{children:"Indique el motivo del rechazo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{htmlFor:"motivo",children:"Motivo del Rechazo"}),a.jsx(Do,{id:"motivo",value:c,onChange:P=>u(P.target.value),placeholder:"Precio elevado, no se ajusta a necesidades, etc.",rows:4})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(pe,{variant:"destructive",onClick:S,children:"Rechazar Presupuesto"})]})]})}),a.jsx(xr,{open:o,onOpenChange:l,children:a.jsxs(vr,{children:[a.jsxs(br,{children:[a.jsx(wr,{children:"Convertir a Cliente"}),a.jsx(_r,{children:"Se crear un nuevo cliente con los datos del presupuesto. Se asignarn automticamente todos los modelos fiscales seleccionados."})]}),a.jsxs(ss,{children:[a.jsx(pe,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),a.jsx(pe,{onClick:j,children:"Crear Cliente"})]})]})})]})}function xQe(){const[t,e]=Dj("/public/budgets/:code/accept"),n=e?.code,i=new URLSearchParams(window.location.search).get("t"),[s,o]=N.useState(!1),[l,c]=N.useState(!1),{data:u,isLoading:d,error:f}=Wt({queryKey:["/public/budgets",n,i],queryFn:async()=>{if(!n||!i)throw new Error("Cdigo o token no proporcionado");const x=await fetch(`/public/budgets/${n}/accept?t=${i}`);if(!x.ok){const b=await x.json().catch(()=>({error:"Error al cargar"}));throw new Error(b.error||"No se pudo cargar el presupuesto")}return x.json()},enabled:!!n&&!!i,retry:!1}),p=$t({mutationFn:async()=>{if(!n||!i)throw new Error("Cdigo o token no proporcionado");const x=await fetch(`/public/budgets/${n}/accept?t=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accepted:!0})});if(!x.ok){const b=await x.json().catch(()=>({error:"Error al aceptar"}));throw new Error(b.error||"No se pudo aceptar el presupuesto")}return x.json()},onSuccess:()=>{o(!0)}}),m=()=>{if(!l){alert("Por favor, acepta los trminos y condiciones");return}p.mutate()},v=u?.expiresAt&&new Date(u.expiresAt)<new Date,y=u?.acceptedAt!==null;return!t||!n||!i?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsx(Xe,{className:"max-w-md w-full",children:a.jsxs(Qe,{className:"p-12 text-center",children:[a.jsx(vu,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Enlace invlido"}),a.jsx("p",{className:"text-muted-foreground",children:"El enlace que has utilizado no es vlido o ha expirado."})]})})}):d?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx(pr,{className:"h-32 w-full"}),a.jsx(pr,{className:"h-96 w-full"}),a.jsx(pr,{className:"h-48 w-full"})]})}):f||!u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsx(Xe,{className:"max-w-md w-full",children:a.jsxs(Qe,{className:"p-12 text-center",children:[a.jsx(Ec,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Error"}),a.jsx("p",{className:"text-muted-foreground",children:f?.message||"No se pudo cargar el presupuesto"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"El enlace puede haber expirado o ser invlido."})]})})}):s||y?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-emerald-100 flex items-center justify-center p-4",children:a.jsx(Xe,{className:"max-w-md w-full",children:a.jsxs(Qe,{className:"p-12 text-center",children:[a.jsx("div",{className:"mb-6 inline-flex items-center justify-center w-20 h-20 rounded-full bg-emerald-100",children:a.jsx(gu,{className:"h-12 w-12 text-emerald-600"})}),a.jsx("h1",{className:"text-3xl font-bold mb-3 text-emerald-900",children:"Presupuesto Aceptado!"}),a.jsxs("p",{className:"text-lg text-emerald-700 mb-6",children:["Hemos recibido tu aceptacin del presupuesto ",a.jsx("strong",{children:u.code})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Total aceptado:"}),a.jsxs("p",{className:"text-3xl font-bold text-primary",children:[Number(u.total).toFixed(2)," "]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recibirs un email de confirmacin en breve con los prximos pasos."}),y&&u.acceptedAt&&a.jsx("div",{className:"mt-6 p-3 bg-emerald-50 rounded-lg",children:a.jsxs("p",{className:"text-xs text-emerald-700",children:["Aceptado el ",new Date(u.acceptedAt).toLocaleString()]})})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx(Xe,{children:a.jsxs(ht,{className:"text-center pb-8",children:[a.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mx-auto",children:a.jsx(Vi,{className:"h-8 w-8 text-primary"})}),a.jsxs(gt,{className:"text-3xl font-bold mb-2",children:["Presupuesto ",u.code]}),a.jsx("p",{className:"text-muted-foreground",children:"Revisa los detalles y acepta el presupuesto si ests conforme"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[a.jsxs(ct,{className:"bg-blue-100 text-blue-700",children:["Serie ",u.series]}),v?a.jsxs(ct,{variant:"destructive",children:[a.jsx(vu,{className:"h-3 w-3 mr-1"}),"Vencido"]}):a.jsxs(ct,{variant:"outline",children:[a.jsx(Sm,{className:"h-3 w-3 mr-1"}),"Vlido ",u.validDays," das"]})]})]})}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Informacin General"})}),a.jsx(Qe,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cliente"}),a.jsx("p",{className:"font-semibold",children:u.clientName})]}),u.clientEmail&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-semibold",children:u.clientEmail})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fecha de emisin"}),a.jsx("p",{className:"font-semibold",children:new Date(u.date).toLocaleDateString()})]}),u.expiresAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vlido hasta"}),a.jsxs("p",{className:`font-semibold ${v?"text-destructive":""}`,children:[new Date(u.expiresAt).toLocaleDateString(),v&&" (Vencido)"]})]})]})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Detalle de Servicios"})}),a.jsx(Qe,{children:a.jsx("div",{className:"space-y-3",children:u.items.map((x,b)=>a.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 bg-slate-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:x.concept}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.quantity,"  ",Number(x.price).toFixed(2),"  (IVA ",x.vatPct,"%)"]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-bold text-lg",children:[Number(x.subtotal).toFixed(2)," "]})})]},b))})})]}),a.jsxs(Xe,{children:[a.jsx(ht,{children:a.jsx(gt,{children:"Resumen"})}),a.jsxs(Qe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal (Base Imponible)"}),a.jsxs("span",{className:"font-semibold",children:[Number(u.subtotal).toFixed(2)," "]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"IVA Total"}),a.jsxs("span",{className:"font-semibold",children:[Number(u.vatTotal).toFixed(2)," "]})]}),a.jsx(ts,{}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xl font-bold",children:"TOTAL"}),a.jsxs("span",{className:"text-3xl font-bold text-primary",children:[Number(u.total).toFixed(2)," "]})]})]})]}),a.jsx(Xe,{children:a.jsx(Qe,{className:"p-4",children:a.jsxs(pe,{variant:"outline",className:"w-full",onClick:()=>window.open(`/public/budgets/${u.id}/pdf`,"_blank"),children:[a.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Descargar Presupuesto en PDF"]})})}),!v&&a.jsxs(Xe,{className:"border-2 border-primary",children:[a.jsx(ht,{children:a.jsxs(gt,{className:"flex items-center gap-2",children:[a.jsx(gu,{className:"h-5 w-5 text-primary"}),"Aceptar Presupuesto"]})}),a.jsxs(Qe,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[a.jsx(ki,{id:"terms",checked:l,onCheckedChange:x=>c(x===!0)}),a.jsxs("label",{htmlFor:"terms",className:"text-sm cursor-pointer",children:[a.jsx("span",{className:"font-medium",children:"Acepto los trminos y condiciones"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"He revisado el presupuesto y acepto los servicios, precios y condiciones detalladas. Al aceptar, estoy confirmando mi conformidad con este presupuesto."})]})]}),a.jsx(pe,{size:"lg",className:"w-full",onClick:m,disabled:!l||p.isPending,children:p.isPending?a.jsx(a.Fragment,{children:"Procesando..."}):a.jsxs(a.Fragment,{children:[a.jsx(gu,{className:"h-5 w-5 mr-2"}),"Confirmar Aceptacin del Presupuesto"]})}),p.error&&a.jsx("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg",children:a.jsx("p",{className:"text-sm text-destructive font-medium",children:p.error.message})}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[a.jsx(Sm,{className:"h-3 w-3 inline mr-1"}),"Conexin segura  Tu aceptacin quedar registrada con fecha y hora"]})]})]}),v&&a.jsx(Xe,{className:"border-2 border-destructive",children:a.jsxs(Qe,{className:"p-8 text-center",children:[a.jsx(vu,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Presupuesto Vencido"}),a.jsxs("p",{className:"text-muted-foreground",children:["Este presupuesto venci el ",new Date(u.expiresAt).toLocaleDateString(),". Por favor, contacta con nosotros para renovarlo."]})]})}),a.jsx(Xe,{className:"bg-slate-100",children:a.jsxs(Qe,{className:"p-6 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:" 2025 Asesora La Llave  Todos los derechos reservados"}),a.jsxs("p",{className:"mt-2",children:["Tienes dudas? Contacta con nosotros en ",a.jsx("a",{href:"mailto:info@asesorialallave.es",className:"text-primary underline",children:"info@asesorialallave.es"})]})]})})]})})}function bQe(){const{connected:t,onlineUsers:e}=Ege();return a.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:t?a.jsxs(a.Fragment,{children:[a.jsx(ahe,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"hidden sm:inline",children:["Conectado (",e,")"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(she,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:"hidden sm:inline",children:"Desconectado"})]})})}function wQe(){return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function NQe(){const{user:t,isLoading:e}=xg();if(e)return a.jsx(wQe,{});const[n]=Dj("/public/budgets/:code/accept");if(n)return a.jsx(xQe,{});if(!t)return a.jsxs(gP,{children:[a.jsx(rr,{path:"/",component:o8}),a.jsx(rr,{path:"/:rest*",children:a.jsx(Wx,{to:"/"})})]});const r={"--sidebar-width":"20rem","--sidebar-width-icon":"4rem"};return a.jsx(qve,{style:r,children:a.jsxs("div",{className:"flex h-screen w-full",children:[a.jsx(oye,{}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsxs("header",{className:"flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[a.jsx(Hve,{"data-testid":"button-sidebar-toggle"}),a.jsx("div",{className:"flex-1 max-w-xl mx-4",children:a.jsx(Iye,{})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Lye,{}),a.jsx(bQe,{}),a.jsx(lye,{})]})]}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsxs(gP,{children:[a.jsx(rr,{path:"/",component:jPe}),a.jsx(rr,{path:"/auth",component:o8}),a.jsx(rr,{path:"/clientes",component:o4e}),a.jsx(rr,{path:"/tareas",component:F6e}),a.jsx(rr,{path:"/manuales",component:B6e}),a.jsx(rr,{path:"/manuales/nuevo",component:pK}),a.jsx(rr,{path:"/manuales/:id/editar",component:pK}),a.jsx(rr,{path:"/manuales/:id",component:B7e}),a.jsx(rr,{path:"/impuestos",children:a.jsx(Wx,{to:"/impuestos/control"})}),a.jsx(rr,{path:"/impuestos/control",component:a8e}),a.jsx(rr,{path:"/impuestos/calendario",component:f8e}),a.jsx(rr,{path:"/impuestos/modelos",component:h8e}),a.jsx(rr,{path:"/impuestos/reportes",component:M8e}),a.jsx(rr,{path:"/notificaciones",component:GYe}),a.jsx(rr,{path:"/documentacion",component:YYe}),a.jsx(rr,{path:"/documentacion/documentos",component:L4}),a.jsx(rr,{path:"/documentacion/documentos/recibos",component:uce}),a.jsx(rr,{path:"/documentacion/documentos/proteccion-datos",component:BXe}),a.jsx(rr,{path:"/documentacion/documentos/domiciliacion",component:$Xe}),a.jsx(rr,{path:"/documentacion/documentos/plantillas",component:zXe}),a.jsx(rr,{path:"/documentos",component:xK}),a.jsx(rr,{path:"/documentos/:rest*",component:xK}),a.jsx(rr,{path:"/documentacion/presupuestos",component:mP}),a.jsx(rr,{path:"/documentacion/presupuestos/parametros",component:mP}),a.jsx(rr,{path:"/documentacion/presupuestos/plantillas",component:mP}),a.jsx(rr,{path:"/documentacion/presupuestos/nuevo",component:bK}),a.jsx(rr,{path:"/documentacion/presupuestos/nuevo-autonomo",component:vQe}),a.jsx(rr,{path:"/documentacion/presupuestos/:id/editar",component:bK}),a.jsx(rr,{path:"/documentacion/presupuestos/:id",component:yQe}),a.jsx(rr,{path:"/admin",component:()=>t?.roleName==="Administrador"?a.jsx(mK,{}):a.jsx(Wx,{to:"/"})}),a.jsx(rr,{path:"/admin/github-updates",component:()=>t?.roleName==="Administrador"?a.jsx(nce,{}):a.jsx(Wx,{to:"/"})}),a.jsx(rr,{path:"/admin/:rest*",children:t?.roleName==="Administrador"?a.jsx(mK,{}):a.jsx(Wx,{to:"/"})}),a.jsx(rr,{path:"/auditoria",component:KYe}),a.jsx(rr,{component:Bye})]})})]})]})})}function SQe(){return N.useEffect(()=>{document.cookie.split("; ").find(e=>e.startsWith("sidebar_state="))||(document.cookie="sidebar_state=true; path=/; max-age=604800")},[]),a.jsx(ade,{client:cn,children:a.jsxs(CY,{children:[a.jsx(kme,{defaultTheme:"light",children:a.jsx(Ome,{children:a.jsx(_ge,{children:a.jsx(NQe,{})})})}),a.jsx(qhe,{})]})})}yue.createRoot(document.getElementById("root")).render(a.jsx(SQe,{}));export{ri as _,kw as c,qr as g};
