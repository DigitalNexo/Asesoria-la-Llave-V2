const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BZfUCev9.js","assets/react-vendor-CyE4uQHY.js","assets/ui-vendor-BS26HFT-.js"])))=>i.map(i=>d[i]);
var kse=Object.defineProperty;var i4=t=>{throw TypeError(t)};var Tse=(t,e,n)=>e in t?kse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var br=(t,e,n)=>Tse(t,typeof e!="symbol"?e+"":e,n),f2=(t,e,n)=>e.has(t)||i4("Cannot "+n);var be=(t,e,n)=>(f2(t,e,"read from private field"),n?n.call(t):e.get(t)),Yt=(t,e,n)=>e.has(t)?i4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Et=(t,e,n,r)=>(f2(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),In=(t,e,n)=>(f2(t,e,"access private method"),n);var Jb=(t,e,n,r)=>({set _(i){Et(t,e,i,n)},get _(){return be(t,e,r)}});import{j as a,V as _9,R as E9,A as A9,C as C9,X as jh,T as k9,D as T9,P as Ose,a as Ot,u as qs,c as Ts,b as Tn,d as Za,e as Ca,f as YN,g as O9,h as Pse,i as Es,k as ao,l as vt,S as XN,O as _g,m as JN,n as Eg,o as ZN,p as Yx,q as Xx,r as QN,s as Mse,L as Rse,U as Dd,F as Qr,B as N1,t as om,v as Dse,w as Kf,x as eS,y as Ise,M as Lse,z as Fse,E as _h,G as P9,H as Ag,I as Eh,J as Kk,K as Bse,N as qo,Q as Jx,W as Wd,Y as wP,Z as NP,_ as SP,$ as jP,a0 as _P,a1 as EP,a2 as $se,a3 as tS,a4 as zse,a5 as AP,a6 as M9,a7 as qse,a8 as mc,a9 as ei,aa as Oy,ab as Cs,ac as sa,ad as ml,ae as Kr,af as S1,ag as Use,ah as ec,ai as R9,aj as Hse,ak as Id,al as Zx,am as Vse,an as D9,ao as CP,ap as Wse,aq as Kse,ar as Gse,as as Yse,at as I9,au as Xse,av as Uo,aw as nS,ax as s4,ay as Kd,az as Ah,aA as j1,aB as kP,aC as Jse,aD as Zse,aE as TP,aF as ou,aG as Qse,aH as eae,aI as Gr,aJ as OP,aK as tae,aL as PP,aM as nae,aN as L9,aO as Yc,aP as gl,aQ as rae,aR as iae,aS as F9,aT as sae,aU as aae,aV as Dm,aW as a4,aX as oae,aY as Gk,aZ as lae,a_ as o4,a$ as MP,b0 as ju,b1 as cae,b2 as uae,b3 as B9,b4 as $9,b5 as z9,b6 as q9,b7 as U9,b8 as dae,b9 as H9,ba as V9,bb as W9,bc as K9,bd as G9,be as Y9,bf as X9,bg as J9,bh as Z9,bi as fae,bj as Q9,bk as eH,bl as hae,bm as pae,bn as mae,bo as tH,bp as h2,bq as RP,br as gae,bs as l4,bt as vae,bu as nH,bv as rH,bw as yae,bx as _1,by as DP,bz as xae,bA as bae,bB as wae,bC as c4,bD as Nae,bE as Sae,bF as jae,bG as Yk,bH as IP,bI as _ae,bJ as Py,bK as Eae,bL as Aae,bM as Cae}from"./ui-vendor-BS26HFT-.js";import{e as kae,r as iH,a as x,d as Tae,b as _d,f as Zb,g as jr,R as le,c as Oae}from"./react-vendor-CyE4uQHY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qb={},u4;function Pae(){if(u4)return Qb;u4=1;var t=kae();return Qb.createRoot=t.createRoot,Qb.hydrateRoot=t.hydrateRoot,Qb}var Mae=Pae();function Rae(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,o=[],l="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),l+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(l+=(~r?"?":"")+"\\"+i.substring(s))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var p2={exports:{}},m2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4;function Dae(){if(d4)return m2;d4=1;var t=iH();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(f,p){var h=p(),m=r({inst:{value:h,getSnapshot:p}}),g=m[0].inst,v=m[1];return s(function(){g.value=h,g.getSnapshot=p,c(g)&&v({inst:g})},[f,h,p]),i(function(){return c(g)&&v({inst:g}),f(function(){c(g)&&v({inst:g})})},[f]),o(h),h}function c(f){var p=f.getSnapshot;f=f.value;try{var h=p();return!n(f,h)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return m2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,m2}var f4;function sH(){return f4||(f4=1,p2.exports=Dae()),p2.exports}var rS=sH();const Iae=Tae.useInsertionEffect,Lae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aH=Lae?x.useLayoutEffect:x.useEffect,Fae=Iae||aH,LP=t=>{const e=x.useRef([t,(...n)=>e[0](...n)]).current;return Fae(()=>{e[0]=t}),e[1]},Bae="popstate",FP="pushState",BP="replaceState",$ae="hashchange",h4=[Bae,FP,BP,$ae],zae=t=>{for(const e of h4)addEventListener(e,t);return()=>{for(const e of h4)removeEventListener(e,t)}},oH=(t,e)=>rS.useSyncExternalStore(zae,t,e),qae=()=>location.search,Uae=({ssrSearch:t=""}={})=>oH(qae,()=>t),p4=()=>location.pathname,Hae=({ssrPath:t}={})=>oH(p4,t?()=>t:p4),Vae=(t,{replace:e=!1,state:n=null}={})=>history[e?BP:FP](n,"",t),Wae=(t={})=>[Hae(t),Vae],m4=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[m4]>"u"){for(const t of[FP,BP]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,m4,{value:!0})}const Kae=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",lH=(t="")=>t==="/"?"":t,Gae=(t,e)=>t[0]==="~"?t.slice(1):lH(e)+t,Yae=(t="",e)=>Kae(g4(lH(t)),g4(e)),g4=t=>{try{return decodeURI(t)}catch{return t}},cH={hook:Wae,searchHook:Uae,parser:Rae,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},uH=x.createContext(cH),Xh=()=>x.useContext(uH),dH={},fH=x.createContext(dH),$P=()=>x.useContext(fH),Qx=t=>{const[e,n]=t.hook(t);return[Yae(t.base,e),LP((r,i)=>n(Gae(r,t.base),i))]},es=()=>Qx(Xh()),zP=(t,e,n,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=s!==!1?Object.fromEntries(s.map((f,p)=>[f,c[p]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[l]:[]]:[!1,null]},iS=t=>zP(Xh().parser,t,es()[0]),Xae=({children:t,...e})=>{const n=Xh(),r=e.hook?cH:n;let i=r;const[s,o]=e.ssrPath?.split("?")??[];o&&(e.ssrSearch=o,e.ssrPath=s),e.hrefs=e.hrefs??e.hook?.hrefs;let l=x.useRef({}),c=l.current,u=c;for(let d in r){const f=d==="base"?r[d]+(e[d]||""):e[d]||r[d];c===u&&f!==u[d]&&(l.current=u={...u}),u[d]=f,(f!==r[d]||f!==i[d])&&(i=u)}return x.createElement(uH.Provider,{value:i,children:t})},v4=({children:t,component:e},n)=>e?x.createElement(e,{params:n}):typeof t=="function"?t(n):t,Jae=t=>{let e=x.useRef(dH);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,i])=>i!==n[r])?t:n},kn=({path:t,nest:e,match:n,...r})=>{const i=Xh(),[s]=Qx(i),[o,l,c]=n??zP(i.parser,t,s,e),u=Jae({...$P(),...l});if(!o)return null;const d=c?x.createElement(Xae,{base:c},v4(r,u)):v4(r,u);return x.createElement(fH.Provider,{value:u,children:d})},ny=x.forwardRef((t,e)=>{const n=Xh(),[r,i]=Qx(n),{to:s="",href:o=s,onClick:l,asChild:c,children:u,className:d,replace:f,state:p,...h}=t,m=LP(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l?.(v),v.defaultPrevented||(v.preventDefault(),i(o,t)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&x.isValidElement(u)?x.cloneElement(u,{onClick:m,href:g}):x.createElement("a",{...h,onClick:m,href:g,className:d?.call?d(r===o):d,children:u,ref:e})}),hH=t=>Array.isArray(t)?t.flatMap(e=>hH(e&&e.type===x.Fragment?e.props.children:e)):[t],Xk=({children:t,location:e})=>{const n=Xh(),[r]=Qx(n);for(const i of hH(t)){let s=0;if(x.isValidElement(i)&&(s=zP(n.parser,i.props.path,e||r,i.props.nest))[0])return x.cloneElement(i,{match:s})}return null},bv=t=>{const{to:e,href:n=e}=t,r=Xh(),[,i]=Qx(r),s=LP(()=>i(e||n,t)),{ssrContext:o}=r;return aH(()=>{s()},[]),o&&(o.redirectTo=e),null};var Cg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zae={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},gd,bP,p9,Qae=(p9=class{constructor(){Yt(this,gd,Zae);Yt(this,bP,!1)}setTimeoutProvider(t){Et(this,gd,t)}setTimeout(t,e){return be(this,gd).setTimeout(t,e)}clearTimeout(t){be(this,gd).clearTimeout(t)}setInterval(t,e){return be(this,gd).setInterval(t,e)}clearInterval(t){be(this,gd).clearInterval(t)}},gd=new WeakMap,bP=new WeakMap,p9),Gf=new Qae;function eoe(t){setTimeout(t,0)}var Ch=typeof window>"u"||"Deno"in globalThis;function ra(){}function toe(t,e){return typeof t=="function"?t(e):t}function Jk(t){return typeof t=="number"&&t>=0&&t!==1/0}function pH(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ld(t,e){return typeof t=="function"?t(e):t}function To(t,e){return typeof t=="function"?t(e):t}function y4(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==qP(o,e.options))return!1}else if(!My(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function x4(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(kh(e.options.mutationKey)!==kh(s))return!1}else if(!My(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function qP(t,e){return(e?.queryKeyHashFn||kh)(t)}function kh(t){return JSON.stringify(t,(e,n)=>Zk(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function My(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>My(t[n],e[n])):!1}var noe=Object.prototype.hasOwnProperty;function mH(t,e){if(t===e)return t;const n=b4(t)&&b4(e);if(!n&&!(Zk(t)&&Zk(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:s[u],f=t[d],p=e[d];if(f===p){l[d]=f,(n?u<i:noe.call(t,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[d]=p;continue}const h=mH(f,p);l[d]=h,h===f&&c++}return i===o&&c===i?t:l}function E1(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function b4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zk(t){if(!w4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!w4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function w4(t){return Object.prototype.toString.call(t)==="[object Object]"}function roe(t){return new Promise(e=>{Gf.setTimeout(e,t)})}function Qk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mH(t,e):e}function ioe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function soe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var UP=Symbol();function gH(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===UP?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function vH(t,e){return typeof t=="function"?t(...e):!!t}var ah,vd,Sm,m9,aoe=(m9=class extends Cg{constructor(){super();Yt(this,ah);Yt(this,vd);Yt(this,Sm);Et(this,Sm,e=>{if(!Ch&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){be(this,vd)||this.setEventListener(be(this,Sm))}onUnsubscribe(){var e;this.hasListeners()||((e=be(this,vd))==null||e.call(this),Et(this,vd,void 0))}setEventListener(e){var n;Et(this,Sm,e),(n=be(this,vd))==null||n.call(this),Et(this,vd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){be(this,ah)!==e&&(Et(this,ah,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof be(this,ah)=="boolean"?be(this,ah):globalThis.document?.visibilityState!=="hidden"}},ah=new WeakMap,vd=new WeakMap,Sm=new WeakMap,m9),HP=new aoe;function eT(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var ooe=eoe;function loe(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=ooe;const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Xi=loe(),jm,yd,_m,g9,coe=(g9=class extends Cg{constructor(){super();Yt(this,jm,!0);Yt(this,yd);Yt(this,_m);Et(this,_m,e=>{if(!Ch&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){be(this,yd)||this.setEventListener(be(this,_m))}onUnsubscribe(){var e;this.hasListeners()||((e=be(this,yd))==null||e.call(this),Et(this,yd,void 0))}setEventListener(e){var n;Et(this,_m,e),(n=be(this,yd))==null||n.call(this),Et(this,yd,e(this.setOnline.bind(this)))}setOnline(e){be(this,jm)!==e&&(Et(this,jm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return be(this,jm)}},jm=new WeakMap,yd=new WeakMap,_m=new WeakMap,g9),A1=new coe;function uoe(t){return Math.min(1e3*2**t,3e4)}function yH(t){return(t??"online")==="online"?A1.isOnline():!0}var tT=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function xH(t){let e=!1,n=0,r;const i=eT(),s=()=>i.status!=="pending",o=g=>{if(!s()){const v=new tT(g);p(v),t.onCancel?.(v)}},l=()=>{e=!0},c=()=>{e=!1},u=()=>HP.isFocused()&&(t.networkMode==="always"||A1.isOnline())&&t.canRun(),d=()=>yH(t.networkMode)&&t.canRun(),f=g=>{s()||(r?.(),i.resolve(g))},p=g=>{s()||(r?.(),i.reject(g))},h=()=>new Promise(g=>{r=v=>{(s()||u())&&g(v)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),m=()=>{if(s())return;let g;const v=n===0?t.initialPromise:void 0;try{g=v??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{if(s())return;const b=t.retry??(Ch?0:3),N=t.retryDelay??uoe,S=typeof N=="function"?N(n,y):N,E=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!E){p(y);return}n++,t.onFail?.(n,y),roe(S).then(()=>u()?void 0:h()).then(()=>{e?p(y):m()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?m():h().then(m),i)}}var oh,v9,bH=(v9=class{constructor(){Yt(this,oh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jk(this.gcTime)&&Et(this,oh,Gf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ch?1/0:300*1e3))}clearGcTimeout(){be(this,oh)&&(Gf.clearTimeout(be(this,oh)),Et(this,oh,void 0))}},oh=new WeakMap,v9),lh,Em,ko,ch,is,Hx,uh,il,Vc,y9,doe=(y9=class extends bH{constructor(e){super();Yt(this,il);Yt(this,lh);Yt(this,Em);Yt(this,ko);Yt(this,ch);Yt(this,is);Yt(this,Hx);Yt(this,uh);Et(this,uh,!1),Et(this,Hx,e.defaultOptions),this.setOptions(e.options),this.observers=[],Et(this,ch,e.client),Et(this,ko,be(this,ch).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Et(this,lh,N4(this.options)),this.state=e.state??be(this,lh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return be(this,is)?.promise}setOptions(e){if(this.options={...be(this,Hx),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=N4(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Et(this,lh,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&be(this,ko).remove(this)}setData(e,n){const r=Qk(this.state.data,e,this.options);return In(this,il,Vc).call(this,{data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){In(this,il,Vc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){const n=be(this,is)?.promise;return be(this,is)?.cancel(e),n?n.then(ra).catch(ra):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(be(this,lh))}isActive(){return this.observers.some(e=>To(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===UP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ld(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!pH(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),be(this,is)?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),be(this,is)?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),be(this,ko).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(be(this,is)&&(be(this,uh)?be(this,is).cancel({revert:!0}):be(this,is).cancelRetry()),this.scheduleGc()),be(this,ko).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||In(this,il,Vc).call(this,{type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&be(this,is)?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(be(this,is))return be(this,is).continueRetry(),be(this,is).promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,i=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(Et(this,uh,!0),r.signal)})},s=()=>{const c=gH(this.options,n),d=(()=>{const f={client:be(this,ch),queryKey:this.queryKey,meta:this.meta};return i(f),f})();return Et(this,uh,!1),this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:be(this,ch),state:this.state,fetchFn:s};return i(c),c})();this.options.behavior?.onFetch(l,this),Et(this,Em,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&In(this,il,Vc).call(this,{type:"fetch",meta:l.fetchOptions?.meta}),Et(this,is,xH({initialPromise:n?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof tT&&c.revert&&this.setState({...be(this,Em),fetchStatus:"idle"}),r.abort()},onFail:(c,u)=>{In(this,il,Vc).call(this,{type:"failed",failureCount:c,error:u})},onPause:()=>{In(this,il,Vc).call(this,{type:"pause"})},onContinue:()=>{In(this,il,Vc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const c=await be(this,is).start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),be(this,ko).config.onSuccess?.(c,this),be(this,ko).config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof tT){if(c.silent)return be(this,is).promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw In(this,il,Vc).call(this,{type:"error",error:c}),be(this,ko).config.onError?.(c,this),be(this,ko).config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}},lh=new WeakMap,Em=new WeakMap,ko=new WeakMap,ch=new WeakMap,is=new WeakMap,Hx=new WeakMap,uh=new WeakMap,il=new WeakSet,Vc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...wH(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Et(this,Em,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Xi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),be(this,ko).notify({query:this,type:"updated",action:e})})},y9);function wH(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yH(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function N4(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var va,Gn,Vx,Qs,dh,Am,Zc,xd,Wx,Cm,km,fh,hh,bd,Tm,gr,qv,nT,rT,iT,sT,aT,oT,lT,NH,x9,foe=(x9=class extends Cg{constructor(e,n){super();Yt(this,gr);Yt(this,va);Yt(this,Gn);Yt(this,Vx);Yt(this,Qs);Yt(this,dh);Yt(this,Am);Yt(this,Zc);Yt(this,xd);Yt(this,Wx);Yt(this,Cm);Yt(this,km);Yt(this,fh);Yt(this,hh);Yt(this,bd);Yt(this,Tm,new Set);this.options=n,Et(this,va,e),Et(this,xd,null),Et(this,Zc,eT()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(be(this,Gn).addObserver(this),S4(be(this,Gn),this.options)?In(this,gr,qv).call(this):this.updateResult(),In(this,gr,sT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cT(be(this,Gn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cT(be(this,Gn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,In(this,gr,aT).call(this),In(this,gr,oT).call(this),be(this,Gn).removeObserver(this)}setOptions(e){const n=this.options,r=be(this,Gn);if(this.options=be(this,va).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof To(this.options.enabled,be(this,Gn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");In(this,gr,lT).call(this),be(this,Gn).setOptions(this.options),n._defaulted&&!E1(this.options,n)&&be(this,va).getQueryCache().notify({type:"observerOptionsUpdated",query:be(this,Gn),observer:this});const i=this.hasListeners();i&&j4(be(this,Gn),r,this.options,n)&&In(this,gr,qv).call(this),this.updateResult(),i&&(be(this,Gn)!==r||To(this.options.enabled,be(this,Gn))!==To(n.enabled,be(this,Gn))||Ld(this.options.staleTime,be(this,Gn))!==Ld(n.staleTime,be(this,Gn)))&&In(this,gr,nT).call(this);const s=In(this,gr,rT).call(this);i&&(be(this,Gn)!==r||To(this.options.enabled,be(this,Gn))!==To(n.enabled,be(this,Gn))||s!==be(this,bd))&&In(this,gr,iT).call(this,s)}getOptimisticResult(e){const n=be(this,va).getQueryCache().build(be(this,va),e),r=this.createResult(n,e);return poe(this,r)&&(Et(this,Qs,r),Et(this,Am,this.options),Et(this,dh,be(this,Gn).state)),r}getCurrentResult(){return be(this,Qs)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&be(this,Zc).status==="pending"&&be(this,Zc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){be(this,Tm).add(e)}getCurrentQuery(){return be(this,Gn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=be(this,va).defaultQueryOptions(e),r=be(this,va).getQueryCache().build(be(this,va),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return In(this,gr,qv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),be(this,Qs)))}createResult(e,n){const r=be(this,Gn),i=this.options,s=be(this,Qs),o=be(this,dh),l=be(this,Am),u=e!==r?e.state:be(this,Vx),{state:d}=e;let f={...d},p=!1,h;if(n._optimisticResults){const j=this.hasListeners(),P=!j&&S4(e,n),k=j&&j4(e,r,n,i);(P||k)&&(f={...f,...wH(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=f;h=f.data;let y=!1;if(n.placeholderData!==void 0&&h===void 0&&v==="pending"){let j;s?.isPlaceholderData&&n.placeholderData===l?.placeholderData?(j=s.data,y=!0):j=typeof n.placeholderData=="function"?n.placeholderData(be(this,km)?.state.data,be(this,km)):n.placeholderData,j!==void 0&&(v="success",h=Qk(s?.data,j,n),p=!0)}if(n.select&&h!==void 0&&!y)if(s&&h===o?.data&&n.select===be(this,Wx))h=be(this,Cm);else try{Et(this,Wx,n.select),h=n.select(h),h=Qk(s?.data,h,n),Et(this,Cm,h),Et(this,xd,null)}catch(j){Et(this,xd,j)}be(this,xd)&&(m=be(this,xd),h=be(this,Cm),g=Date.now(),v="error");const b=f.fetchStatus==="fetching",N=v==="pending",S=v==="error",E=N&&b,C=h!==void 0,_={status:v,fetchStatus:f.fetchStatus,isPending:N,isSuccess:v==="success",isError:S,isInitialLoading:E,isLoading:E,data:h,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!N,isLoadingError:S&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:S&&C,isStale:VP(e,n),refetch:this.refetch,promise:be(this,Zc),isEnabled:To(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=O=>{_.status==="error"?O.reject(_.error):_.data!==void 0&&O.resolve(_.data)},P=()=>{const O=Et(this,Zc,_.promise=eT());j(O)},k=be(this,Zc);switch(k.status){case"pending":e.queryHash===r.queryHash&&j(k);break;case"fulfilled":(_.status==="error"||_.data!==k.value)&&P();break;case"rejected":(_.status!=="error"||_.error!==k.reason)&&P();break}}return _}updateResult(){const e=be(this,Qs),n=this.createResult(be(this,Gn),this.options);if(Et(this,dh,be(this,Gn).state),Et(this,Am,this.options),be(this,dh).data!==void 0&&Et(this,km,be(this,Gn)),E1(n,e))return;Et(this,Qs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!be(this,Tm).size)return!0;const o=new Set(s??be(this,Tm));return this.options.throwOnError&&o.add("error"),Object.keys(be(this,Qs)).some(l=>{const c=l;return be(this,Qs)[c]!==e[c]&&o.has(c)})};In(this,gr,NH).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&In(this,gr,sT).call(this)}},va=new WeakMap,Gn=new WeakMap,Vx=new WeakMap,Qs=new WeakMap,dh=new WeakMap,Am=new WeakMap,Zc=new WeakMap,xd=new WeakMap,Wx=new WeakMap,Cm=new WeakMap,km=new WeakMap,fh=new WeakMap,hh=new WeakMap,bd=new WeakMap,Tm=new WeakMap,gr=new WeakSet,qv=function(e){In(this,gr,lT).call(this);let n=be(this,Gn).fetch(this.options,e);return e?.throwOnError||(n=n.catch(ra)),n},nT=function(){In(this,gr,aT).call(this);const e=Ld(this.options.staleTime,be(this,Gn));if(Ch||be(this,Qs).isStale||!Jk(e))return;const r=pH(be(this,Qs).dataUpdatedAt,e)+1;Et(this,fh,Gf.setTimeout(()=>{be(this,Qs).isStale||this.updateResult()},r))},rT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(be(this,Gn)):this.options.refetchInterval)??!1},iT=function(e){In(this,gr,oT).call(this),Et(this,bd,e),!(Ch||To(this.options.enabled,be(this,Gn))===!1||!Jk(be(this,bd))||be(this,bd)===0)&&Et(this,hh,Gf.setInterval(()=>{(this.options.refetchIntervalInBackground||HP.isFocused())&&In(this,gr,qv).call(this)},be(this,bd)))},sT=function(){In(this,gr,nT).call(this),In(this,gr,iT).call(this,In(this,gr,rT).call(this))},aT=function(){be(this,fh)&&(Gf.clearTimeout(be(this,fh)),Et(this,fh,void 0))},oT=function(){be(this,hh)&&(Gf.clearInterval(be(this,hh)),Et(this,hh,void 0))},lT=function(){const e=be(this,va).getQueryCache().build(be(this,va),this.options);if(e===be(this,Gn))return;const n=be(this,Gn);Et(this,Gn,e),Et(this,Vx,e.state),this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))},NH=function(e){Xi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(be(this,Qs))}),be(this,va).getQueryCache().notify({query:be(this,Gn),type:"observerResultsUpdated"})})},x9);function hoe(t,e){return To(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function S4(t,e){return hoe(t,e)||t.state.data!==void 0&&cT(t,e,e.refetchOnMount)}function cT(t,e,n){if(To(e.enabled,t)!==!1&&Ld(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&VP(t,e)}return!1}function j4(t,e,n,r){return(t!==e||To(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&VP(t,n)}function VP(t,e){return To(e.enabled,t)!==!1&&t.isStaleByTime(Ld(e.staleTime,t))}function poe(t,e){return!E1(t.getCurrentResult(),e)}function _4(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let d=!1;const f=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},p=gH(e.options,e.fetchOptions),h=async(m,g,v)=>{if(d)return Promise.reject();if(g==null&&m.pages.length)return Promise.resolve(m);const b=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:g,direction:v?"backward":"forward",meta:e.options.meta};return f(C),C})(),N=await p(b),{maxPages:S}=e.options,E=v?soe:ioe;return{pages:E(m.pages,N,S),pageParams:E(m.pageParams,g,S)}};if(i&&s.length){const m=i==="backward",g=m?moe:E4,v={pages:s,pageParams:o},y=g(r,v);l=await h(v,y,m)}else{const m=t??s.length;do{const g=c===0?o[0]??r.initialPageParam:E4(r,l);if(c>0&&g==null)break;l=await h(l,g),c++}while(c<m)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=u}}}function E4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function moe(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var Kx,Hl,ea,ph,Vl,rd,b9,goe=(b9=class extends bH{constructor(e){super();Yt(this,Vl);Yt(this,Kx);Yt(this,Hl);Yt(this,ea);Yt(this,ph);Et(this,Kx,e.client),this.mutationId=e.mutationId,Et(this,ea,e.mutationCache),Et(this,Hl,[]),this.state=e.state||SH(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){be(this,Hl).includes(e)||(be(this,Hl).push(e),this.clearGcTimeout(),be(this,ea).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Et(this,Hl,be(this,Hl).filter(n=>n!==e)),this.scheduleGc(),be(this,ea).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){be(this,Hl).length||(this.state.status==="pending"?this.scheduleGc():be(this,ea).remove(this))}continue(){return be(this,ph)?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{In(this,Vl,rd).call(this,{type:"continue"})},r={client:be(this,Kx),meta:this.options.meta,mutationKey:this.options.mutationKey};Et(this,ph,xH({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{In(this,Vl,rd).call(this,{type:"failed",failureCount:o,error:l})},onPause:()=>{In(this,Vl,rd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>be(this,ea).canRun(this)}));const i=this.state.status==="pending",s=!be(this,ph).canStart();try{if(i)n();else{In(this,Vl,rd).call(this,{type:"pending",variables:e,isPaused:s}),await be(this,ea).config.onMutate?.(e,this,r);const l=await this.options.onMutate?.(e,r);l!==this.state.context&&In(this,Vl,rd).call(this,{type:"pending",context:l,variables:e,isPaused:s})}const o=await be(this,ph).start();return await be(this,ea).config.onSuccess?.(o,e,this.state.context,this,r),await this.options.onSuccess?.(o,e,this.state.context,r),await be(this,ea).config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,e,this.state.context,r),In(this,Vl,rd).call(this,{type:"success",data:o}),o}catch(o){try{throw await be(this,ea).config.onError?.(o,e,this.state.context,this,r),await this.options.onError?.(o,e,this.state.context,r),await be(this,ea).config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,e,this.state.context,r),o}finally{In(this,Vl,rd).call(this,{type:"error",error:o})}}finally{be(this,ea).runNext(this)}}},Kx=new WeakMap,Hl=new WeakMap,ea=new WeakMap,ph=new WeakMap,Vl=new WeakSet,rd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xi.batch(()=>{be(this,Hl).forEach(r=>{r.onMutationUpdate(e)}),be(this,ea).notify({mutation:this,type:"updated",action:e})})},b9);function SH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qc,sl,Gx,w9,voe=(w9=class extends Cg{constructor(e={}){super();Yt(this,Qc);Yt(this,sl);Yt(this,Gx);this.config=e,Et(this,Qc,new Set),Et(this,sl,new Map),Et(this,Gx,0)}build(e,n,r){const i=new goe({client:e,mutationCache:this,mutationId:++Jb(this,Gx)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){be(this,Qc).add(e);const n=e0(e);if(typeof n=="string"){const r=be(this,sl).get(n);r?r.push(e):be(this,sl).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(be(this,Qc).delete(e)){const n=e0(e);if(typeof n=="string"){const r=be(this,sl).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&be(this,sl).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=e0(e);if(typeof n=="string"){const i=be(this,sl).get(n)?.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=e0(e);return typeof n=="string"?be(this,sl).get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xi.batch(()=>{be(this,Qc).forEach(e=>{this.notify({type:"removed",mutation:e})}),be(this,Qc).clear(),be(this,sl).clear()})}getAll(){return Array.from(be(this,Qc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>x4(n,r))}findAll(e={}){return this.getAll().filter(n=>x4(e,n))}notify(e){Xi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Xi.batch(()=>Promise.all(e.map(n=>n.continue().catch(ra))))}},Qc=new WeakMap,sl=new WeakMap,Gx=new WeakMap,w9);function e0(t){return t.options.scope?.id}var eu,wd,ya,tu,gu,X0,uT,N9,yoe=(N9=class extends Cg{constructor(n,r){super();Yt(this,gu);Yt(this,eu);Yt(this,wd);Yt(this,ya);Yt(this,tu);Et(this,eu,n),this.setOptions(r),this.bindMethods(),In(this,gu,X0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const r=this.options;this.options=be(this,eu).defaultMutationOptions(n),E1(this.options,r)||be(this,eu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:be(this,ya),observer:this}),r?.mutationKey&&this.options.mutationKey&&kh(r.mutationKey)!==kh(this.options.mutationKey)?this.reset():be(this,ya)?.state.status==="pending"&&be(this,ya).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||be(this,ya)?.removeObserver(this)}onMutationUpdate(n){In(this,gu,X0).call(this),In(this,gu,uT).call(this,n)}getCurrentResult(){return be(this,wd)}reset(){be(this,ya)?.removeObserver(this),Et(this,ya,void 0),In(this,gu,X0).call(this),In(this,gu,uT).call(this)}mutate(n,r){return Et(this,tu,r),be(this,ya)?.removeObserver(this),Et(this,ya,be(this,eu).getMutationCache().build(be(this,eu),this.options)),be(this,ya).addObserver(this),be(this,ya).execute(n)}},eu=new WeakMap,wd=new WeakMap,ya=new WeakMap,tu=new WeakMap,gu=new WeakSet,X0=function(){const n=be(this,ya)?.state??SH();Et(this,wd,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},uT=function(n){Xi.batch(()=>{if(be(this,tu)&&this.hasListeners()){const r=be(this,wd).variables,i=be(this,wd).context,s={client:be(this,eu),meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(be(this,tu).onSuccess?.(n.data,r,i,s),be(this,tu).onSettled?.(n.data,null,r,i,s)):n?.type==="error"&&(be(this,tu).onError?.(n.error,r,i,s),be(this,tu).onSettled?.(void 0,n.error,r,i,s))}this.listeners.forEach(r=>{r(be(this,wd))})})},N9),Wl,S9,xoe=(S9=class extends Cg{constructor(e={}){super();Yt(this,Wl);this.config=e,Et(this,Wl,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??qP(i,n);let o=this.get(s);return o||(o=new doe({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){be(this,Wl).has(e.queryHash)||(be(this,Wl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=be(this,Wl).get(e.queryHash);n&&(e.destroy(),n===e&&be(this,Wl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return be(this,Wl).get(e)}getAll(){return[...be(this,Wl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>y4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>y4(e,r)):n}notify(e){Xi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Xi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Wl=new WeakMap,S9),fi,Nd,Sd,Om,Pm,jd,Mm,Rm,j9,boe=(j9=class{constructor(t={}){Yt(this,fi);Yt(this,Nd);Yt(this,Sd);Yt(this,Om);Yt(this,Pm);Yt(this,jd);Yt(this,Mm);Yt(this,Rm);Et(this,fi,t.queryCache||new xoe),Et(this,Nd,t.mutationCache||new voe),Et(this,Sd,t.defaultOptions||{}),Et(this,Om,new Map),Et(this,Pm,new Map),Et(this,jd,0)}mount(){Jb(this,jd)._++,be(this,jd)===1&&(Et(this,Mm,HP.subscribe(async t=>{t&&(await this.resumePausedMutations(),be(this,fi).onFocus())})),Et(this,Rm,A1.subscribe(async t=>{t&&(await this.resumePausedMutations(),be(this,fi).onOnline())})))}unmount(){var t,e;Jb(this,jd)._--,be(this,jd)===0&&((t=be(this,Mm))==null||t.call(this),Et(this,Mm,void 0),(e=be(this,Rm))==null||e.call(this),Et(this,Rm,void 0))}isFetching(t){return be(this,fi).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return be(this,Nd).findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return be(this,fi).get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=be(this,fi).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ld(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return be(this,fi).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=be(this,fi).get(r.queryHash)?.state.data,o=toe(e,s);if(o!==void 0)return be(this,fi).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Xi.batch(()=>be(this,fi).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return be(this,fi).get(e.queryHash)?.state}removeQueries(t){const e=be(this,fi);Xi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=be(this,fi);return Xi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Xi.batch(()=>be(this,fi).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(ra).catch(ra)}invalidateQueries(t,e={}){return Xi.batch(()=>(be(this,fi).findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Xi.batch(()=>be(this,fi).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(ra)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ra)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=be(this,fi).build(this,e);return n.isStaleByTime(Ld(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ra).catch(ra)}fetchInfiniteQuery(t){return t.behavior=_4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ra).catch(ra)}ensureInfiniteQueryData(t){return t.behavior=_4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return A1.isOnline()?be(this,Nd).resumePausedMutations():Promise.resolve()}getQueryCache(){return be(this,fi)}getMutationCache(){return be(this,Nd)}getDefaultOptions(){return be(this,Sd)}setDefaultOptions(t){Et(this,Sd,t)}setQueryDefaults(t,e){be(this,Om).set(kh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...be(this,Om).values()],n={};return e.forEach(r=>{My(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){be(this,Pm).set(kh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...be(this,Pm).values()],n={};return e.forEach(r=>{My(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...be(this,Sd).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qP(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===UP&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...be(this,Sd).mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){be(this,fi).clear(),be(this,Nd).clear()}},fi=new WeakMap,Nd=new WeakMap,Sd=new WeakMap,Om=new WeakMap,Pm=new WeakMap,jd=new WeakMap,Mm=new WeakMap,Rm=new WeakMap,j9),jH=x.createContext(void 0),Hs=t=>{const e=x.useContext(jH);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},woe=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(jH.Provider,{value:t,children:e})),_H=x.createContext(!1),Noe=()=>x.useContext(_H);_H.Provider;function Soe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var joe=x.createContext(Soe()),_oe=()=>x.useContext(joe),Eoe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Aoe=t=>{x.useEffect(()=>{t.clearReset()},[t])},Coe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||vH(n,[t.error,r])),koe=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Toe=(t,e)=>t.isLoading&&t.isFetching&&!e,Ooe=(t,e)=>t?.suspense&&e.isPending,A4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Poe(t,e,n){const r=Noe(),i=_oe(),s=Hs(),o=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",koe(o),Eoe(o,i),Aoe(i);const l=!s.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new e(s,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(f=>{const p=d?c.subscribe(Xi.batchCalls(f)):ra;return c.updateResult(),p},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o)},[o,c]),Ooe(o,u))throw A4(o,c,i);if(Coe({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Ch&&Toe(u,r)&&(l?A4(o,c,i):s.getQueryCache().get(o.queryHash)?.promise)?.catch(ra).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?u:c.trackResult(u)}function At(t,e){return Poe(t,foe)}function yt(t,e){const n=Hs(),[r]=x.useState(()=>new yoe(n,t));x.useEffect(()=>{r.setOptions(t)},[r,t]);const i=x.useSyncExternalStore(x.useCallback(o=>r.subscribe(Xi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=x.useCallback((o,l)=>{r.mutate(o,l).catch(ra)},[r]);if(i.error&&vH(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function EH(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function ht(t,e,n,r){const i=localStorage.getItem("token"),s={};n&&(s["Content-Type"]="application/json"),i&&(s.Authorization=`Bearer ${i}`);const o=new AbortController;try{const l=await fetch(e,{method:t,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include",signal:o.signal});await EH(l);const c=l.headers.get("content-type")||"";return l.status===204||!c.includes("application/json")?{}:l.json()}catch(l){throw l.name==="AbortError"?new Error(`La petición tardó más de ${0/1e3}s y fue cancelada`):l}finally{}}const AH=({on401:t})=>async({queryKey:e})=>{const n=localStorage.getItem("token"),r={};n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(e.join("/"),{headers:r,credentials:"include"});return t==="returnNull"&&i.status===401?null:(await EH(i),await i.json())},Lt=new boe({defaultOptions:{queries:{queryFn:AH({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Moe=1,Roe=1e6;let g2=0;function Doe(){return g2=(g2+1)%Number.MAX_SAFE_INTEGER,g2.toString()}const v2=new Map,C4=t=>{if(v2.has(t))return;const e=setTimeout(()=>{v2.delete(t),ry({type:"REMOVE_TOAST",toastId:t})},Roe);v2.set(t,e)},Ioe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Moe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?C4(n):t.toasts.forEach(r=>{C4(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},J0=[];let Z0={toasts:[]};function ry(t){Z0=Ioe(Z0,t),J0.forEach(e=>{e(Z0)})}function Zn({...t}){const e=Doe(),n=i=>ry({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>ry({type:"DISMISS_TOAST",toastId:e});return ry({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function nr(){const[t,e]=x.useState(Z0);return x.useEffect(()=>(J0.push(e),()=>{const n=J0.indexOf(e);n>-1&&J0.splice(n,1)}),[t]),{...t,toast:Zn,dismiss:n=>ry({type:"DISMISS_TOAST",toastId:n})}}function CH(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=CH(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=CH(t))&&(r&&(r+=" "),r+=e);return r}const k4=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,T4=Bn,Jh=(t,e)=>n=>{var r;if(e?.variants==null)return T4(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n?.[u],f=s?.[u];if(d===null)return null;const p=k4(d)||k4(f);return i[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...h}=d;return Object.entries(h).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...s,...l}[g]):{...s,...l}[g]===v})?[...u,f,p]:u},[]);return T4(t,o,c,n?.class,n?.className)},WP="-",Loe=t=>{const e=Boe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(WP);return l[0]===""&&l.length!==1&&l.shift(),kH(l,e)||Foe(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},kH=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?kH(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(WP);return e.validators.find(({validator:o})=>o(s))?.classGroupId},O4=/^\[(.+)\]$/,Foe=t=>{if(O4.test(t)){const e=O4.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Boe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return zoe(Object.entries(t.classGroups),n).forEach(([s,o])=>{dT(o,r,s,e)}),r},dT=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:P4(e,i);s.classGroupId=n;return}if(typeof i=="function"){if($oe(i)){dT(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{dT(o,P4(e,s),n,r)})})},P4=(t,e)=>{let n=t;return e.split(WP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$oe=t=>t.isThemeGetter,zoe=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,qoe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},TH="!",Uoe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let y=l[v];if(u===0){if(y===i&&(r||l.slice(v,v+s)===e)){c.push(l.slice(d,v)),d=v+s;continue}if(y==="/"){f=v;continue}}y==="["?u++:y==="]"&&u--}const p=c.length===0?l:l.substring(d),h=p.startsWith(TH),m=h?p.substring(1):p,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},Hoe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Voe=t=>({cache:qoe(t.cacheSize),parseClassName:Uoe(t),...Loe(t)}),Woe=/\s+/,Koe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Woe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:h}=n(u);let m=!!h,g=r(m?p.substring(0,h):p);if(!g){if(!m){l=u+(l.length>0?" "+l:l);continue}if(g=r(p),!g){l=u+(l.length>0?" "+l:l);continue}m=!1}const v=Hoe(d).join(":"),y=f?v+TH:v,b=y+g;if(s.includes(b))continue;s.push(b);const N=i(g,m);for(let S=0;S<N.length;++S){const E=N[S];s.push(y+E)}l=u+(l.length>0?" "+l:l)}return l};function Goe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=OH(e))&&(r&&(r+=" "),r+=n);return r}const OH=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=OH(t[r]))&&(n&&(n+=" "),n+=e);return n};function Yoe(t,...e){let n,r,i,s=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return n=Voe(u),r=n.cache.get,i=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Koe(c,n);return i(c,d),d}return function(){return s(Goe.apply(null,arguments))}}const qr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},PH=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xoe=/^\d+\/\d+$/,Joe=new Set(["px","full","screen"]),Zoe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qoe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ele=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tle=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ic=t=>lm(t)||Joe.has(t)||Xoe.test(t),Xu=t=>kg(t,"length",ule),lm=t=>!!t&&!Number.isNaN(Number(t)),y2=t=>kg(t,"number",lm),wv=t=>!!t&&Number.isInteger(Number(t)),rle=t=>t.endsWith("%")&&lm(t.slice(0,-1)),Mn=t=>PH.test(t),Ju=t=>Zoe.test(t),ile=new Set(["length","size","percentage"]),sle=t=>kg(t,ile,MH),ale=t=>kg(t,"position",MH),ole=new Set(["image","url"]),lle=t=>kg(t,ole,fle),cle=t=>kg(t,"",dle),Nv=()=>!0,kg=(t,e,n)=>{const r=PH.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},ule=t=>Qoe.test(t)&&!ele.test(t),MH=()=>!1,dle=t=>tle.test(t),fle=t=>nle.test(t),hle=()=>{const t=qr("colors"),e=qr("spacing"),n=qr("blur"),r=qr("brightness"),i=qr("borderColor"),s=qr("borderRadius"),o=qr("borderSpacing"),l=qr("borderWidth"),c=qr("contrast"),u=qr("grayscale"),d=qr("hueRotate"),f=qr("invert"),p=qr("gap"),h=qr("gradientColorStops"),m=qr("gradientColorStopPositions"),g=qr("inset"),v=qr("margin"),y=qr("opacity"),b=qr("padding"),N=qr("saturate"),S=qr("scale"),E=qr("sepia"),C=qr("skew"),T=qr("space"),_=qr("translate"),j=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Mn,e],O=()=>[Mn,e],M=()=>["",Ic,Xu],I=()=>["auto",lm,Mn],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Mn],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[lm,Mn];return{cacheSize:500,separator:":",theme:{colors:[Nv],spacing:[Ic,Xu],blur:["none","",Ju,Mn],brightness:ae(),borderColor:[t],borderRadius:["none","","full",Ju,Mn],borderSpacing:O(),borderWidth:M(),contrast:ae(),grayscale:H(),hueRotate:ae(),invert:H(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[rle,Xu],inset:k(),margin:k(),opacity:ae(),padding:O(),saturate:ae(),scale:ae(),sepia:H(),skew:ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Mn]}],container:["container"],columns:[{columns:[Ju]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Mn]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wv,Mn]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Mn]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",wv,Mn]}],"grid-cols":[{"grid-cols":[Nv]}],"col-start-end":[{col:["auto",{span:["full",wv,Mn]},Mn]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Nv]}],"row-start-end":[{row:["auto",{span:[wv,Mn]},Mn]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Mn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Mn]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Mn,e]}],"min-w":[{"min-w":[Mn,e,"min","max","fit"]}],"max-w":[{"max-w":[Mn,e,"none","full","min","max","fit","prose",{screen:[Ju]},Ju]}],h:[{h:[Mn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Mn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Mn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Mn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ju,Xu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",y2]}],"font-family":[{font:[Nv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Mn]}],"line-clamp":[{"line-clamp":["none",lm,y2]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ic,Mn]}],"list-image":[{"list-image":["none",Mn]}],"list-style-type":[{list:["none","disc","decimal",Mn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ic,Xu]}],"underline-offset":[{"underline-offset":["auto",Ic,Mn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),ale]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sle]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ic,Mn]}],"outline-w":[{outline:[Ic,Xu]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ic,Xu]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ju,cle]}],"shadow-color":[{shadow:[Nv]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ju,Mn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[N]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Mn]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Mn]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Mn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[wv,Mn]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Mn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ic,Xu,y2]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ple=Yoe(hle);function Xe(...t){return ple(Bn(t))}const mle=Ose,RH=x.forwardRef(({className:t,...e},n)=>a.jsx(_9,{ref:n,className:Xe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));RH.displayName=_9.displayName;const gle=Jh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DH=x.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(E9,{ref:r,className:Xe(gle({variant:e}),t),...n}));DH.displayName=E9.displayName;const vle=x.forwardRef(({className:t,...e},n)=>a.jsx(A9,{ref:n,className:Xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));vle.displayName=A9.displayName;const IH=x.forwardRef(({className:t,...e},n)=>a.jsx(C9,{ref:n,className:Xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(jh,{className:"h-4 w-4"})}));IH.displayName=C9.displayName;const LH=x.forwardRef(({className:t,...e},n)=>a.jsx(k9,{ref:n,className:Xe("text-sm font-semibold",t),...e}));LH.displayName=k9.displayName;const FH=x.forwardRef(({className:t,...e},n)=>a.jsx(T9,{ref:n,className:Xe("text-sm opacity-90",t),...e}));FH.displayName=T9.displayName;function yle(){const{toasts:t}=nr();return a.jsxs(mle,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return a.jsxs(DH,{...s,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(LH,{children:n}),r&&a.jsx(FH,{children:r})]}),i,a.jsx(IH,{})]},e)}),a.jsx(RH,{})]})}const xle=["top","right","bottom","left"],Gd=Math.min,Ja=Math.max,C1=Math.round,t0=Math.floor,tc=t=>({x:t,y:t}),ble={left:"right",right:"left",bottom:"top",top:"bottom"},wle={start:"end",end:"start"};function fT(t,e,n){return Ja(t,Gd(e,n))}function vu(t,e){return typeof t=="function"?t(e):t}function yu(t){return t.split("-")[0]}function Tg(t){return t.split("-")[1]}function KP(t){return t==="x"?"y":"x"}function GP(t){return t==="y"?"height":"width"}const Nle=new Set(["top","bottom"]);function Yl(t){return Nle.has(yu(t))?"y":"x"}function YP(t){return KP(Yl(t))}function Sle(t,e,n){n===void 0&&(n=!1);const r=Tg(t),i=YP(t),s=GP(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=k1(o)),[o,k1(o)]}function jle(t){const e=k1(t);return[hT(t),e,hT(e)]}function hT(t){return t.replace(/start|end/g,e=>wle[e])}const M4=["left","right"],R4=["right","left"],_le=["top","bottom"],Ele=["bottom","top"];function Ale(t,e,n){switch(t){case"top":case"bottom":return n?e?R4:M4:e?M4:R4;case"left":case"right":return e?_le:Ele;default:return[]}}function Cle(t,e,n,r){const i=Tg(t);let s=Ale(yu(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(hT)))),s}function k1(t){return t.replace(/left|right|bottom|top/g,e=>ble[e])}function kle(t){return{top:0,right:0,bottom:0,left:0,...t}}function BH(t){return typeof t!="number"?kle(t):{top:t,right:t,bottom:t,left:t}}function T1(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function D4(t,e,n){let{reference:r,floating:i}=t;const s=Yl(e),o=YP(e),l=GP(o),c=yu(e),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[l]/2-i[l]/2;let h;switch(c){case"top":h={x:d,y:r.y-i.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Tg(e)){case"start":h[o]-=p*(n&&u?-1:1);break;case"end":h[o]+=p*(n&&u?-1:1);break}return h}const Tle=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=D4(u,r,c),p=r,h={},m=0;for(let g=0;g<l.length;g++){const{name:v,fn:y}=l[g],{x:b,y:N,data:S,reset:E}=await y({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:t,floating:e}});d=b??d,f=N??f,h={...h,[v]:{...h[v],...S}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:d,y:f}=D4(u,p,c)),g=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:h}};async function Ry(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=vu(e,t),m=BH(h),v=l[p?f==="floating"?"reference":"floating":f],y=T1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),S=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},E=T1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:N,strategy:c}):b);return{top:(y.top-E.top+m.top)/S.y,bottom:(E.bottom-y.bottom+m.bottom)/S.y,left:(y.left-E.left+m.left)/S.x,right:(E.right-y.right+m.right)/S.x}}const Ole=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=vu(t,e)||{};if(u==null)return{};const f=BH(d),p={x:n,y:r},h=YP(i),m=GP(h),g=await o.getDimensions(u),v=h==="y",y=v?"top":"left",b=v?"bottom":"right",N=v?"clientHeight":"clientWidth",S=s.reference[m]+s.reference[h]-p[h]-s.floating[m],E=p[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=C?C[N]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=l.floating[N]||s.floating[m]);const _=S/2-E/2,j=T/2-g[m]/2-1,P=Gd(f[y],j),k=Gd(f[b],j),O=P,M=T-g[m]-k,I=T/2-g[m]/2+_,B=fT(O,I,M),U=!c.arrow&&Tg(i)!=null&&I!==B&&s.reference[m]/2-(I<O?P:k)-g[m]/2<0,D=U?I<O?I-O:I-M:0;return{[h]:p[h]+D,data:{[h]:B,centerOffset:I-B-D,...U&&{alignmentOffset:D}},reset:U}}}),Ple=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=vu(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=yu(i),b=Yl(l),N=yu(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),E=p||(N||!g?[k1(l)]:jle(l)),C=m!=="none";!p&&C&&E.push(...Cle(l,g,m,S));const T=[l,...E],_=await Ry(e,v),j=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&j.push(_[y]),f){const I=Sle(i,o,S);j.push(_[I[0]],_[I[1]])}if(P=[...P,{placement:i,overflows:j}],!j.every(I=>I<=0)){var k,O;const I=(((k=s.flip)==null?void 0:k.index)||0)+1,B=T[I];if(B&&(!(f==="alignment"?b!==Yl(B):!1)||P.every(z=>Yl(z.placement)===b?z.overflows[0]>0:!0)))return{data:{index:I,overflows:P},reset:{placement:B}};let U=(O=P.filter(D=>D.overflows[0]<=0).sort((D,z)=>D.overflows[1]-z.overflows[1])[0])==null?void 0:O.placement;if(!U)switch(h){case"bestFit":{var M;const D=(M=P.filter(z=>{if(C){const H=Yl(z.placement);return H===b||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,ee)=>H+ee,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:M[0];D&&(U=D);break}case"initialPlacement":U=l;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function I4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function L4(t){return xle.some(e=>t[e]>=0)}const Mle=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=vu(t,e);switch(r){case"referenceHidden":{const s=await Ry(e,{...i,elementContext:"reference"}),o=I4(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:L4(o)}}}case"escaped":{const s=await Ry(e,{...i,altBoundary:!0}),o=I4(s,n.floating);return{data:{escapedOffsets:o,escaped:L4(o)}}}default:return{}}}}},$H=new Set(["left","top"]);async function Rle(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=yu(n),l=Tg(n),c=Yl(n)==="y",u=$H.has(o)?-1:1,d=s&&c?-1:1,f=vu(e,t);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof m=="number"&&(h=l==="end"?m*-1:m),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const Dle=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,c=await Rle(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Ile=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...c}=vu(t,e),u={x:n,y:r},d=await Ry(e,c),f=Yl(yu(i)),p=KP(f);let h=u[p],m=u[f];if(s){const v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",b=h+d[v],N=h-d[y];h=fT(b,h,N)}if(o){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=m+d[v],N=m-d[y];m=fT(b,m,N)}const g=l.fn({...e,[p]:h,[f]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:s,[f]:o}}}}}},Lle=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=vu(t,e),d={x:n,y:r},f=Yl(i),p=KP(f);let h=d[p],m=d[f];const g=vu(l,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const N=p==="y"?"height":"width",S=s.reference[p]-s.floating[N]+v.mainAxis,E=s.reference[p]+s.reference[N]-v.mainAxis;h<S?h=S:h>E&&(h=E)}if(u){var y,b;const N=p==="y"?"width":"height",S=$H.has(yu(i)),E=s.reference[f]-s.floating[N]+(S&&((y=o.offset)==null?void 0:y[f])||0)+(S?0:v.crossAxis),C=s.reference[f]+s.reference[N]+(S?0:((b=o.offset)==null?void 0:b[f])||0)-(S?v.crossAxis:0);m<E?m=E:m>C&&(m=C)}return{[p]:h,[f]:m}}}},Fle=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:c=()=>{},...u}=vu(t,e),d=await Ry(e,u),f=yu(i),p=Tg(i),h=Yl(i)==="y",{width:m,height:g}=s.floating;let v,y;f==="top"||f==="bottom"?(v=f,y=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,v=p==="end"?"top":"bottom");const b=g-d.top-d.bottom,N=m-d.left-d.right,S=Gd(g-d[v],b),E=Gd(m-d[y],N),C=!e.middlewareData.shift;let T=S,_=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(_=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=b),C&&!p){const P=Ja(d.left,0),k=Ja(d.right,0),O=Ja(d.top,0),M=Ja(d.bottom,0);h?_=m-2*(P!==0||k!==0?P+k:Ja(d.left,d.right)):T=g-2*(O!==0||M!==0?O+M:Ja(d.top,d.bottom))}await c({...e,availableWidth:_,availableHeight:T});const j=await o.getDimensions(l.floating);return m!==j.width||g!==j.height?{reset:{rects:!0}}:{}}}};function sS(){return typeof window<"u"}function Og(t){return zH(t)?(t.nodeName||"").toLowerCase():"#document"}function io(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gc(t){var e;return(e=(zH(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zH(t){return sS()?t instanceof Node||t instanceof io(t).Node:!1}function vl(t){return sS()?t instanceof Element||t instanceof io(t).Element:!1}function lc(t){return sS()?t instanceof HTMLElement||t instanceof io(t).HTMLElement:!1}function F4(t){return!sS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof io(t).ShadowRoot}const Ble=new Set(["inline","contents"]);function eb(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=yl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Ble.has(i)}const $le=new Set(["table","td","th"]);function zle(t){return $le.has(Og(t))}const qle=[":popover-open",":modal"];function aS(t){return qle.some(e=>{try{return t.matches(e)}catch{return!1}})}const Ule=["transform","translate","scale","rotate","perspective"],Hle=["transform","translate","scale","rotate","perspective","filter"],Vle=["paint","layout","strict","content"];function XP(t){const e=JP(),n=vl(t)?yl(t):t;return Ule.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Hle.some(r=>(n.willChange||"").includes(r))||Vle.some(r=>(n.contain||"").includes(r))}function Wle(t){let e=Yd(t);for(;lc(e)&&!Im(e);){if(XP(e))return e;if(aS(e))return null;e=Yd(e)}return null}function JP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Kle=new Set(["html","body","#document"]);function Im(t){return Kle.has(Og(t))}function yl(t){return io(t).getComputedStyle(t)}function oS(t){return vl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yd(t){if(Og(t)==="html")return t;const e=t.assignedSlot||t.parentNode||F4(t)&&t.host||gc(t);return F4(e)?e.host:e}function qH(t){const e=Yd(t);return Im(e)?t.ownerDocument?t.ownerDocument.body:t.body:lc(e)&&eb(e)?e:qH(e)}function Dy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=qH(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=io(i);if(s){const l=pT(o);return e.concat(o,o.visualViewport||[],eb(i)?i:[],l&&n?Dy(l):[])}return e.concat(i,Dy(i,[],n))}function pT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function UH(t){const e=yl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=lc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=C1(n)!==s||C1(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function ZP(t){return vl(t)?t:t.contextElement}function cm(t){const e=ZP(t);if(!lc(e))return tc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=UH(e);let o=(s?C1(n.width):n.width)/r,l=(s?C1(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Gle=tc(0);function HH(t){const e=io(t);return!JP()||!e.visualViewport?Gle:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Yle(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==io(t)?!1:e}function Th(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=ZP(t);let o=tc(1);e&&(r?vl(r)&&(o=cm(r)):o=cm(t));const l=Yle(s,n,r)?HH(s):tc(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const p=io(s),h=r&&vl(r)?io(r):r;let m=p,g=pT(m);for(;g&&r&&h!==m;){const v=cm(g),y=g.getBoundingClientRect(),b=yl(g),N=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=y.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=N,u+=S,m=io(g),g=pT(m)}}return T1({width:d,height:f,x:c,y:u})}function lS(t,e){const n=oS(t).scrollLeft;return e?e.left+n:Th(gc(t)).left+n}function VH(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-lS(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Xle(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=gc(r),l=e?aS(e.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=tc(1);const d=tc(0),f=lc(r);if((f||!f&&!s)&&((Og(r)!=="body"||eb(o))&&(c=oS(r)),lc(r))){const h=Th(r);u=cm(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=o&&!f&&!s?VH(o,c):tc(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function Jle(t){return Array.from(t.getClientRects())}function Zle(t){const e=gc(t),n=oS(t),r=t.ownerDocument.body,i=Ja(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ja(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lS(t);const l=-n.scrollTop;return yl(r).direction==="rtl"&&(o+=Ja(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}const B4=25;function Qle(t,e){const n=io(t),r=gc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;const d=JP();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const u=lS(r);if(u<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),h=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=B4&&(s-=m)}else u<=B4&&(s+=u);return{width:s,height:o,x:l,y:c}}const ece=new Set(["absolute","fixed"]);function tce(t,e){const n=Th(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=lc(t)?cm(t):tc(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function $4(t,e,n){let r;if(e==="viewport")r=Qle(t,n);else if(e==="document")r=Zle(gc(t));else if(vl(e))r=tce(e,n);else{const i=HH(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return T1(r)}function WH(t,e){const n=Yd(t);return n===e||!vl(n)||Im(n)?!1:yl(n).position==="fixed"||WH(n,e)}function nce(t,e){const n=e.get(t);if(n)return n;let r=Dy(t,[],!1).filter(l=>vl(l)&&Og(l)!=="body"),i=null;const s=yl(t).position==="fixed";let o=s?Yd(t):t;for(;vl(o)&&!Im(o);){const l=yl(o),c=XP(o);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&ece.has(i.position)||eb(o)&&!c&&WH(t,o))?r=r.filter(d=>d!==o):i=l,o=Yd(o)}return e.set(t,r),r}function rce(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?aS(e)?[]:nce(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=$4(e,d,i);return u.top=Ja(f.top,u.top),u.right=Gd(f.right,u.right),u.bottom=Gd(f.bottom,u.bottom),u.left=Ja(f.left,u.left),u},$4(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function ice(t){const{width:e,height:n}=UH(t);return{width:e,height:n}}function sce(t,e,n){const r=lc(e),i=gc(e),s=n==="fixed",o=Th(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=tc(0);function u(){c.x=lS(i)}if(r||!r&&!s)if((Og(e)!=="body"||eb(i))&&(l=oS(e)),r){const h=Th(e,!0,s,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?VH(i,l):tc(0),f=o.left+l.scrollLeft-c.x-d.x,p=o.top+l.scrollTop-c.y-d.y;return{x:f,y:p,width:o.width,height:o.height}}function x2(t){return yl(t).position==="static"}function z4(t,e){if(!lc(t)||yl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gc(t)===n&&(n=n.ownerDocument.body),n}function KH(t,e){const n=io(t);if(aS(t))return n;if(!lc(t)){let i=Yd(t);for(;i&&!Im(i);){if(vl(i)&&!x2(i))return i;i=Yd(i)}return n}let r=z4(t,e);for(;r&&zle(r)&&x2(r);)r=z4(r,e);return r&&Im(r)&&x2(r)&&!XP(r)?n:r||Wle(t)||n}const ace=async function(t){const e=this.getOffsetParent||KH,n=this.getDimensions,r=await n(t.floating);return{reference:sce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oce(t){return yl(t).direction==="rtl"}const lce={convertOffsetParentRelativeRectToViewportRelativeRect:Xle,getDocumentElement:gc,getClippingRect:rce,getOffsetParent:KH,getElementRects:ace,getClientRects:Jle,getDimensions:ice,getScale:cm,isElement:vl,isRTL:oce};function GH(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function cce(t,e){let n=null,r;const i=gc(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=t.getBoundingClientRect(),{left:d,top:f,width:p,height:h}=u;if(l||e(),!p||!h)return;const m=t0(f),g=t0(i.clientWidth-(d+p)),v=t0(i.clientHeight-(f+h)),y=t0(d),N={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:Ja(0,Gd(1,c))||1};let S=!0;function E(C){const T=C[0].intersectionRatio;if(T!==c){if(!S)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!GH(u,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(E,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,N)}n.observe(t)}return o(!0),s}function uce(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ZP(t),d=i||s?[...u?Dy(u):[],...Dy(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=u&&l?cce(u,n):null;let p=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=h)==null||N.observe(e)})),n()}),u&&!c&&h.observe(u),h.observe(e));let m,g=c?Th(t):null;c&&v();function v(){const y=Th(t);g&&!GH(g,y)&&n(),g=y,m=requestAnimationFrame(v)}return n(),()=>{var y;d.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const dce=Dle,fce=Ile,hce=Ple,pce=Fle,mce=Mle,q4=Ole,gce=Lle,vce=(t,e,n)=>{const r=new Map,i={platform:lce,...n},s={...i.platform,_c:r};return Tle(t,e,{...i,platform:s})};var yce=typeof document<"u",xce=function(){},Q0=yce?x.useLayoutEffect:xce;function O1(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!O1(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!O1(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function YH(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function U4(t,e){const n=YH(t);return Math.round(e*n)/n}function b2(t){const e=x.useRef(t);return Q0(()=>{e.current=t}),e}function bce(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,h]=x.useState(r);O1(p,r)||h(r);const[m,g]=x.useState(null),[v,y]=x.useState(null),b=x.useCallback(z=>{z!==C.current&&(C.current=z,g(z))},[]),N=x.useCallback(z=>{z!==T.current&&(T.current=z,y(z))},[]),S=s||m,E=o||v,C=x.useRef(null),T=x.useRef(null),_=x.useRef(d),j=c!=null,P=b2(c),k=b2(i),O=b2(u),M=x.useCallback(()=>{if(!C.current||!T.current)return;const z={placement:e,strategy:n,middleware:p};k.current&&(z.platform=k.current),vce(C.current,T.current,z).then(H=>{const ee={...H,isPositioned:O.current!==!1};I.current&&!O1(_.current,ee)&&(_.current=ee,_d.flushSync(()=>{f(ee)}))})},[p,e,n,k,O]);Q0(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[u]);const I=x.useRef(!1);Q0(()=>(I.current=!0,()=>{I.current=!1}),[]),Q0(()=>{if(S&&(C.current=S),E&&(T.current=E),S&&E){if(P.current)return P.current(S,E,M);M()}},[S,E,M,P,j]);const B=x.useMemo(()=>({reference:C,floating:T,setReference:b,setFloating:N}),[b,N]),U=x.useMemo(()=>({reference:S,floating:E}),[S,E]),D=x.useMemo(()=>{const z={position:n,left:0,top:0};if(!U.floating)return z;const H=U4(U.floating,d.x),ee=U4(U.floating,d.y);return l?{...z,transform:"translate("+H+"px, "+ee+"px)",...YH(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:ee}},[n,l,U.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:M,refs:B,elements:U,floatingStyles:D}),[d,M,B,U,D])}const wce=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?q4({element:r.current,padding:i}).fn(n):{}:r?q4({element:r,padding:i}).fn(n):{}}}},Nce=(t,e)=>({...dce(t),options:[t,e]}),Sce=(t,e)=>({...fce(t),options:[t,e]}),jce=(t,e)=>({...gce(t),options:[t,e]}),_ce=(t,e)=>({...hce(t),options:[t,e]}),Ece=(t,e)=>({...pce(t),options:[t,e]}),Ace=(t,e)=>({...mce(t),options:[t,e]}),Cce=(t,e)=>({...wce(t),options:[t,e]});var kce="Arrow",XH=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return a.jsx(Ot.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});XH.displayName=kce;var Tce=XH;function cS(t){const[e,n]=x.useState(void 0);return qs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var QP="Popper",[JH,rf]=Ts(QP),[Oce,ZH]=JH(QP),QH=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return a.jsx(Oce,{scope:e,anchor:r,onAnchorChange:i,children:n})};QH.displayName=QP;var eV="PopperAnchor",tV=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=ZH(eV,n),o=x.useRef(null),l=Tn(e,o),c=x.useRef(null);return x.useEffect(()=>{const u=c.current;c.current=r?.current||o.current,u!==c.current&&s.onAnchorChange(c.current)}),r?null:a.jsx(Ot.div,{...i,ref:l})});tV.displayName=eV;var eM="PopperContent",[Pce,Mce]=JH(eM),nV=x.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:m,...g}=t,v=ZH(eM,n),[y,b]=x.useState(null),N=Tn(e,ue=>b(ue)),[S,E]=x.useState(null),C=cS(S),T=C?.width??0,_=C?.height??0,j=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],O=k.length>0,M={padding:P,boundary:k.filter(Dce),altBoundary:O},{refs:I,floatingStyles:B,placement:U,isPositioned:D,middlewareData:z}=bce({strategy:"fixed",placement:j,whileElementsMounted:(...ue)=>uce(...ue,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[Nce({mainAxis:i+_,alignmentAxis:o}),c&&Sce({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?jce():void 0,...M}),c&&_ce({...M}),Ece({...M,apply:({elements:ue,rects:ve,availableWidth:oe,availableHeight:pe})=>{const{width:xe,height:X}=ve.reference,Se=ue.floating.style;Se.setProperty("--radix-popper-available-width",`${oe}px`),Se.setProperty("--radix-popper-available-height",`${pe}px`),Se.setProperty("--radix-popper-anchor-width",`${xe}px`),Se.setProperty("--radix-popper-anchor-height",`${X}px`)}}),S&&Cce({element:S,padding:l}),Ice({arrowWidth:T,arrowHeight:_}),p&&Ace({strategy:"referenceHidden",...M})]}),[H,ee]=sV(U),ae=Za(m);qs(()=>{D&&ae?.()},[D,ae]);const F=z.arrow?.x,q=z.arrow?.y,Z=z.arrow?.centerOffset!==0,[te,ce]=x.useState();return qs(()=>{y&&ce(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:D?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(Pce,{scope:n,placedSide:H,onArrowChange:E,arrowX:F,arrowY:q,shouldHideArrow:Z,children:a.jsx(Ot.div,{"data-side":H,"data-align":ee,...g,ref:N,style:{...g.style,animation:D?void 0:"none"}})})})});nV.displayName=eM;var rV="PopperArrow",Rce={top:"bottom",right:"left",bottom:"top",left:"right"},iV=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Mce(rV,r),o=Rce[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(Tce,{...i,ref:n,style:{...i.style,display:"block"}})})});iV.displayName=rV;function Dce(t){return t!==null}var Ice=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=sV(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(i.arrow?.x??0)+l/2,h=(i.arrow?.y??0)+c/2;let m="",g="";return u==="bottom"?(m=o?f:`${p}px`,g=`${-c}px`):u==="top"?(m=o?f:`${p}px`,g=`${r.floating.height+c}px`):u==="right"?(m=`${-c}px`,g=o?f:`${h}px`):u==="left"&&(m=`${r.floating.width+c}px`,g=o?f:`${h}px`),{data:{x:m,y:g}}}});function sV(t){const[e,n="center"]=t.split("-");return[e,n]}var uS=QH,tb=tV,dS=nV,fS=iV,[hS]=Ts("Tooltip",[rf]),pS=rf(),aV="TooltipProvider",Lce=700,mT="tooltip.open",[Fce,tM]=hS(aV),oV=t=>{const{__scopeTooltip:e,delayDuration:n=Lce,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(Fce,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};oV.displayName=aV;var Iy="Tooltip",[Bce,mS]=hS(Iy),lV=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=t,c=tM(Iy,t.__scopeTooltip),u=pS(e),[d,f]=x.useState(null),p=Es(),h=x.useRef(0),m=o??c.disableHoverableContent,g=l??c.delayDuration,v=x.useRef(!1),[y,b]=ao({prop:r,defaultProp:i??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(mT))):c.onClose(),s?.(T)},caller:Iy}),N=x.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),S=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,b(!0)},[b]),E=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),C=x.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,b(!0),h.current=0},g)},[g,b]);return x.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),a.jsx(uS,{...u,children:a.jsx(Bce,{scope:e,contentId:p,open:y,stateAttribute:N,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?C():S()},[c.isOpenDelayedRef,C,S]),onTriggerLeave:x.useCallback(()=>{m?E():(window.clearTimeout(h.current),h.current=0)},[E,m]),onOpen:S,onClose:E,disableHoverableContent:m,children:n})})};lV.displayName=Iy;var gT="TooltipTrigger",cV=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=mS(gT,n),s=tM(gT,n),o=pS(n),l=x.useRef(null),c=Tn(e,l,i.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(tb,{asChild:!0,...o,children:a.jsx(Ot.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:vt(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:vt(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:vt(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:vt(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:vt(t.onBlur,i.onClose),onClick:vt(t.onClick,i.onClose)})})});cV.displayName=gT;var $ce="TooltipPortal",[eVe,zce]=hS($ce,{forceMount:void 0}),Lm="TooltipContent",uV=x.forwardRef((t,e)=>{const n=zce(Lm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=mS(Lm,t.__scopeTooltip);return a.jsx(Ca,{present:r||o.open,children:o.disableHoverableContent?a.jsx(dV,{side:i,...s,ref:e}):a.jsx(qce,{side:i,...s,ref:e})})}),qce=x.forwardRef((t,e)=>{const n=mS(Lm,t.__scopeTooltip),r=tM(Lm,t.__scopeTooltip),i=x.useRef(null),s=Tn(e,i),[o,l]=x.useState(null),{trigger:c,onClose:u}=n,d=i.current,{onPointerInTransitChange:f}=r,p=x.useCallback(()=>{l(null),f(!1)},[f]),h=x.useCallback((m,g)=>{const v=m.currentTarget,y={x:m.clientX,y:m.clientY},b=Kce(y,v.getBoundingClientRect()),N=Gce(y,b),S=Yce(g.getBoundingClientRect()),E=Jce([...N,...S]);l(E),f(!0)},[f]);return x.useEffect(()=>()=>p(),[p]),x.useEffect(()=>{if(c&&d){const m=v=>h(v,d),g=v=>h(v,c);return c.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[c,d,h,p]),x.useEffect(()=>{if(o){const m=g=>{const v=g.target,y={x:g.clientX,y:g.clientY},b=c?.contains(v)||d?.contains(v),N=!Xce(y,o);b?p():N&&(p(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,d,o,u,p]),a.jsx(dV,{...t,ref:s})}),[Uce,Hce]=hS(Iy,{isInside:!1}),Vce=O9("TooltipContent"),dV=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=t,c=mS(Lm,n),u=pS(n),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(mT,d),()=>document.removeEventListener(mT,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=p=>{p.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),a.jsx(YN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:a.jsxs(dS,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(Vce,{children:r}),a.jsx(Uce,{scope:n,isInside:!0,children:a.jsx(Pse,{id:c.contentId,role:"tooltip",children:i||r})})]})})});uV.displayName=Lm;var fV="TooltipArrow",Wce=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=pS(n);return Hce(fV,n).isInside?null:a.jsx(fS,{...i,...r,ref:e})});Wce.displayName=fV;function Kce(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Gce(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Yce(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Xce(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,f=c.x,p=c.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function Jce(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Zce(e)}function Zce(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Qce=oV,eue=lV,tue=cV,hV=uV;const pV=Qce,mV=eue,gV=tue,nM=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(hV,{ref:r,sideOffset:e,className:Xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));nM.displayName=hV.displayName;const nue={theme:"light",setTheme:()=>null,toggleTheme:()=>null},vV=x.createContext(nue);function rue({children:t,defaultTheme:e="light",...n}){const[r,i]=x.useState(()=>localStorage.getItem("theme")||e);x.useEffect(()=>{const l=document.documentElement;l.classList.remove("light","dark"),l.classList.add(r),localStorage.setItem("theme",r)},[r]);const o={theme:r,setTheme:i,toggleTheme:()=>{i(r==="light"?"dark":"light")}};return a.jsx(vV.Provider,{...n,value:o,children:t})}const iue=()=>{const t=x.useContext(vV);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},yV=x.createContext(void 0);function sue({children:t}){const e=Hs(),{data:n,isLoading:r}=At({queryKey:["/api/auth/profile"],queryFn:AH({on401:"returnNull"}),retry:!1,enabled:!0}),i=yt({mutationFn:async({username:d,password:f})=>await ht("POST","/api/auth/login",{username:d,password:f}),onSuccess:d=>{localStorage.setItem("token",d.token),e.setQueryData(["/api/auth/profile"],d.user)}}),s=yt({mutationFn:async({username:d,email:f,password:p,role:h})=>await ht("POST","/api/auth/register",{username:d,email:f,password:p,role:h}),onSuccess:d=>{localStorage.setItem("token",d.token),e.setQueryData(["/api/auth/profile"],d.user)}}),o=yt({mutationFn:async()=>{await ht("POST","/api/auth/logout",{})},onSuccess:()=>{localStorage.removeItem("token"),e.setQueryData(["/api/auth/profile"],null),e.clear()}}),l=async(d,f)=>{await i.mutateAsync({username:d,password:f})},c=async(d,f,p,h)=>{await s.mutateAsync({username:d,email:f,password:p,role:h})},u=async()=>{await o.mutateAsync()};return a.jsx(yV.Provider,{value:{user:n??null,isLoading:r,login:l,register:c,logout:u},children:t})}function Zh(){const t=x.useContext(yV);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const cc=Object.create(null);cc.open="0";cc.close="1";cc.ping="2";cc.pong="3";cc.message="4";cc.upgrade="5";cc.noop="6";const e1=Object.create(null);Object.keys(cc).forEach(t=>{e1[cc[t]]=t});const vT={type:"error",data:"parser error"},xV=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",bV=typeof ArrayBuffer=="function",wV=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,rM=({type:t,data:e},n,r)=>xV&&e instanceof Blob?n?r(e):H4(e,r):bV&&(e instanceof ArrayBuffer||wV(e))?n?r(e):H4(new Blob([e]),r):r(cc[t]+(e||"")),H4=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function V4(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let w2;function aue(t,e){if(xV&&t.data instanceof Blob)return t.data.arrayBuffer().then(V4).then(e);if(bV&&(t.data instanceof ArrayBuffer||wV(t.data)))return e(V4(t.data));rM(t,!1,n=>{w2||(w2=new TextEncoder),e(w2.encode(n))})}const W4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<W4.length;t++)Uv[W4.charCodeAt(t)]=t;const oue=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)s=Uv[t.charCodeAt(r)],o=Uv[t.charCodeAt(r+1)],l=Uv[t.charCodeAt(r+2)],c=Uv[t.charCodeAt(r+3)],d[i++]=s<<2|o>>4,d[i++]=(o&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return u},lue=typeof ArrayBuffer=="function",iM=(t,e)=>{if(typeof t!="string")return{type:"message",data:NV(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:cue(t.substring(1),e)}:e1[n]?t.length>1?{type:e1[n],data:t.substring(1)}:{type:e1[n]}:vT},cue=(t,e)=>{if(lue){const n=oue(t);return NV(n,e)}else return{base64:!0,data:t}},NV=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},SV="",uue=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{rM(s,!1,l=>{r[o]=l,++i===n&&e(r.join(SV))})})},due=(t,e)=>{const n=t.split(SV),r=[];for(let i=0;i<n.length;i++){const s=iM(n[i],e);if(r.push(s),s.type==="error")break}return r};function fue(){return new TransformStream({transform(t,e){aue(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let N2;function n0(t){return t.reduce((e,n)=>e+n.length,0)}function r0(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function hue(t,e){N2||(N2=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(n0(n)<1)break;const c=r0(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(n0(n)<2)break;const c=r0(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(n0(n)<8)break;const c=r0(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(vT);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(n0(n)<i)break;const c=r0(n,i);l.enqueue(iM(s?c:N2.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(vT);break}}}})}const jV=4;function Ii(t){if(t)return pue(t)}function pue(t){for(var e in Ii.prototype)t[e]=Ii.prototype[e];return t}Ii.prototype.on=Ii.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ii.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ii.prototype.off=Ii.prototype.removeListener=Ii.prototype.removeAllListeners=Ii.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ii.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ii.prototype.emitReserved=Ii.prototype.emit;Ii.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ii.prototype.hasListeners=function(t){return!!this.listeners(t).length};const gS=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Mo=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),mue="arraybuffer";function _V(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const gue=Mo.setTimeout,vue=Mo.clearTimeout;function vS(t,e){e.useNativeTimers?(t.setTimeoutFn=gue.bind(Mo),t.clearTimeoutFn=vue.bind(Mo)):(t.setTimeoutFn=Mo.setTimeout.bind(Mo),t.clearTimeoutFn=Mo.clearTimeout.bind(Mo))}const yue=1.33;function xue(t){return typeof t=="string"?bue(t):Math.ceil((t.byteLength||t.size)*yue)}function bue(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function EV(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function wue(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Nue(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Sue extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class sM extends Ii{constructor(e){super(),this.writable=!1,vS(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Sue(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=iM(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=wue(e);return n.length?"?"+n:""}}class jue extends sM{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};due(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,uue(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=EV()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let AV=!1;try{AV=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const _ue=AV;function Eue(){}class Aue extends jue{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class nc extends Ii{constructor(e,n,r){super(),this.createRequest=e,vS(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=_V(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=nc.requestsCount++,nc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Eue,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete nc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}nc.requestsCount=0;nc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",K4);else if(typeof addEventListener=="function"){const t="onpagehide"in Mo?"pagehide":"unload";addEventListener(t,K4,!1)}}function K4(){for(let t in nc.requests)nc.requests.hasOwnProperty(t)&&nc.requests[t].abort()}const Cue=(function(){const t=CV({xdomain:!1});return t&&t.responseType!==null})();class kue extends Aue{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Cue&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new nc(CV,this.uri(),e)}}function CV(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||_ue))return new XMLHttpRequest}catch{}if(!e)try{return new Mo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const kV=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Tue extends sM{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=kV?{}:_V(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;rM(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&gS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=EV()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const S2=Mo.WebSocket||Mo.MozWebSocket;let Oue=class extends Tue{createSocket(e,n,r){return kV?new S2(e,n,r):n?new S2(e,n):new S2(e)}doWrite(e,n){this.ws.send(n)}};class Pue extends sM{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=hue(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=fue();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&gS(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Mue={websocket:Oue,webtransport:Pue,polling:kue},Rue=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Due=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yT(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Rue.exec(t||""),s={},o=14;for(;o--;)s[Due[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Iue(s,s.path),s.queryKey=Lue(s,s.query),s}function Iue(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Lue(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const xT=typeof addEventListener=="function"&&typeof removeEventListener=="function",t1=[];xT&&addEventListener("offline",()=>{t1.forEach(t=>t())},!1);class Fd extends Ii{constructor(e,n){if(super(),this.binaryType=mue,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=yT(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=yT(n.host).host);vS(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Nue(this.opts.query)),xT&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},t1.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=jV,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Fd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Fd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=xue(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,gS(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Fd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),xT&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=t1.indexOf(this._offlineEventListener);r!==-1&&t1.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Fd.protocol=jV;class Fue extends Fd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Fd.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Fd.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=n.name,s(),this.emitReserved("upgradeError",p)};function l(){o("transport closed")}function c(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Bue=class extends Fue{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Mue[i]).filter(i=>!!i)),super(e,r)}};function $ue(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=yT(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const zue=typeof ArrayBuffer=="function",que=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,TV=Object.prototype.toString,Uue=typeof Blob=="function"||typeof Blob<"u"&&TV.call(Blob)==="[object BlobConstructor]",Hue=typeof File=="function"||typeof File<"u"&&TV.call(File)==="[object FileConstructor]";function aM(t){return zue&&(t instanceof ArrayBuffer||que(t))||Uue&&t instanceof Blob||Hue&&t instanceof File}function n1(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(n1(t[n]))return!0;return!1}if(aM(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return n1(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&n1(t[n]))return!0;return!1}function Vue(t){const e=[],n=t.data,r=t;return r.data=bT(n,e),r.attachments=e.length,{packet:r,buffers:e}}function bT(t,e){if(!t)return t;if(aM(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=bT(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=bT(t[r],e));return n}return t}function Wue(t,e){return t.data=wT(t.data,e),delete t.attachments,t}function wT(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=wT(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=wT(t[n],e));return t}const Kue=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Gue=5;var Yn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Yn||(Yn={}));class Yue{constructor(e){this.replacer=e}encode(e){return(e.type===Yn.EVENT||e.type===Yn.ACK)&&n1(e)?this.encodeAsBinary({type:e.type===Yn.EVENT?Yn.BINARY_EVENT:Yn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Yn.BINARY_EVENT||e.type===Yn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Vue(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function G4(t){return Object.prototype.toString.call(t)==="[object Object]"}class oM extends Ii{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Yn.BINARY_EVENT;r||n.type===Yn.BINARY_ACK?(n.type=r?Yn.EVENT:Yn.ACK,this.reconstructor=new Xue(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(aM(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Yn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Yn.BINARY_EVENT||r.type===Yn.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(oM.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Yn.CONNECT:return G4(n);case Yn.DISCONNECT:return n===void 0;case Yn.CONNECT_ERROR:return typeof n=="string"||G4(n);case Yn.EVENT:case Yn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Kue.indexOf(n[0])===-1);case Yn.ACK:case Yn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Xue{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Wue(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Jue=Object.freeze(Object.defineProperty({__proto__:null,Decoder:oM,Encoder:Yue,get PacketType(){return Yn},protocol:Gue},Symbol.toStringTag,{value:"Module"}));function al(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Zue=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class OV extends Ii{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[al(e,"open",this.onopen.bind(this)),al(e,"packet",this.onpacket.bind(this)),al(e,"error",this.onerror.bind(this)),al(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Zue.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Yn.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),o.id=d}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Yn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Yn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Yn.EVENT:case Yn.BINARY_EVENT:this.onevent(e);break;case Yn.ACK:case Yn.BINARY_ACK:this.onack(e);break;case Yn.DISCONNECT:this.ondisconnect();break;case Yn.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Yn.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Yn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Pg(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Pg.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Pg.prototype.reset=function(){this.attempts=0};Pg.prototype.setMin=function(t){this.ms=t};Pg.prototype.setMax=function(t){this.max=t};Pg.prototype.setJitter=function(t){this.jitter=t};class NT extends Ii{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,vS(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Pg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Jue;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Bue(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=al(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=al(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(al(e,"ping",this.onping.bind(this)),al(e,"data",this.ondata.bind(this)),al(e,"error",this.onerror.bind(this)),al(e,"close",this.onclose.bind(this)),al(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){gS(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new OV(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Sv={};function r1(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=$ue(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Sv[i]&&s in Sv[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new NT(r,e):(Sv[i]||(Sv[i]=new NT(r,e)),c=Sv[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(r1,{Manager:NT,Socket:OV,io:r1,connect:r1});const PV=x.createContext({socket:null,connected:!1,onlineUsers:0}),Que=()=>x.useContext(PV);function ede({children:t}){const[e,n]=x.useState(null),[r,i]=x.useState(!1),[s,o]=x.useState(0),{toast:l}=nr(),[c,u]=x.useState(localStorage.getItem("token"));return x.useEffect(()=>{const d=()=>{const p=localStorage.getItem("token");u(p)};window.addEventListener("storage",d);const f=setInterval(d,1e3);return()=>{window.removeEventListener("storage",d),clearInterval(f)}},[]),x.useEffect(()=>{if(!c){e&&(e.close(),n(null),i(!1),o(0));return}const d=r1(window.location.origin,{auth:{token:c}});return d.on("connect",()=>{console.log("WebSocket conectado"),i(!0),d.emit("get:online-count")}),d.on("disconnect",f=>{console.log(`WebSocket desconectado - Razón: ${f}`),i(!1),f==="io client disconnect"||f==="io server disconnect"||f==="ping timeout"||o(0)}),d.on("heartbeat",f=>{console.log("💓 Heartbeat recibido:",f),d.emit("heartbeat-response",{timestamp:Date.now()})}),d.on("online-count",f=>{console.log(`Usuarios conectados: ${f}`),o(f)}),d.on("notification",f=>{console.log("Notificación recibida:",f),l({title:f.title,description:f.message,variant:f.action==="deleted"?"destructive":"default"})}),d.on("user:connected",()=>{console.log("Usuario conectado")}),d.on("user:disconnected",()=>{console.log("Usuario desconectado")}),d.on("session:new",f=>{console.log("Nueva sesión detectada:",f),l({title:"Nueva Sesión",description:`Usuario ${f.username} se conectó desde ${f.ip}`,variant:"default"})}),d.on("session:update",f=>{console.log("Sesión actualizada:",f)}),d.on("sessions:terminated",f=>{console.log("Sesiones terminadas:",f),l({title:"Sesiones Terminadas",description:`Se terminaron ${f.count} sesiones del usuario`,variant:"default"})}),d.on("session:terminated",f=>{console.log("Sesión terminada por administrador:",f),l({title:"Sesión Terminada",description:f.message||"Tu sesión ha sido terminada por un administrador",variant:"destructive"}),localStorage.removeItem("token"),window.location.href="/"}),d.on("connect_error",f=>{console.error("Error de conexión WebSocket:",f),i(!1),o(0)}),n(d),()=>{d.close()}},[c,l]),a.jsx(PV.Provider,{value:{socket:e,connected:r,onlineUsers:s},children:t})}const j2=768;function tde(){const[t,e]=x.useState(void 0);return x.useEffect(()=>{const n=window.matchMedia(`(max-width: ${j2-1}px)`),r=()=>{e(window.innerWidth<j2)};return n.addEventListener("change",r),e(window.innerWidth<j2),()=>n.removeEventListener("change",r)},[]),!!t}const Ly=Jh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?XN:"button";return a.jsx(o,{className:Xe(Ly({variant:e,size:n,className:t})),ref:s,...i})});re.displayName="Button";const Ie=x.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:Xe("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ie.displayName="Input";var nde="Separator",Y4="horizontal",rde=["horizontal","vertical"],MV=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=Y4,...i}=t,s=ide(r)?r:Y4,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return a.jsx(Ot.div,{"data-orientation":s,...l,...i,ref:e})});MV.displayName=nde;function ide(t){return rde.includes(t)}var RV=MV;const ri=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>a.jsx(RV,{ref:i,decorative:n,orientation:e,className:Xe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ri.displayName=RV.displayName;const sde=QN,ade=JN,DV=x.forwardRef(({className:t,...e},n)=>a.jsx(_g,{className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));DV.displayName=_g.displayName;const ode=Jh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),IV=x.forwardRef(({side:t="right",className:e,children:n,...r},i)=>a.jsxs(ade,{children:[a.jsx(DV,{}),a.jsxs(Eg,{ref:i,className:Xe(ode({side:t}),e),...r,children:[n,a.jsxs(ZN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(jh,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));IV.displayName=Eg.displayName;const LV=({className:t,...e})=>a.jsx("div",{className:Xe("flex flex-col space-y-2 text-center sm:text-left",t),...e});LV.displayName="SheetHeader";const FV=x.forwardRef(({className:t,...e},n)=>a.jsx(Yx,{ref:n,className:Xe("text-lg font-semibold text-foreground",t),...e}));FV.displayName=Yx.displayName;const BV=x.forwardRef(({className:t,...e},n)=>a.jsx(Xx,{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));BV.displayName=Xx.displayName;function Fn({className:t,...e}){return a.jsx("div",{className:Xe("animate-pulse rounded-md bg-muted",t),...e})}const lde="sidebar_state",cde=3600*24*7,ude="16rem",dde="18rem",fde="3rem",hde="b",$V=x.createContext(null);function lM(){const t=x.useContext($V);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function pde({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:i,children:s,...o}){const l=tde(),[c,u]=x.useState(!1),[d,f]=x.useState(t),p=e??d,h=x.useCallback(y=>{const b=typeof y=="function"?y(p):y;n?n(b):f(b),document.cookie=`${lde}=${b}; path=/; max-age=${cde}`},[n,p]),m=x.useCallback(()=>l?u(y=>!y):h(y=>!y),[l,h,u]);x.useEffect(()=>{const y=b=>{b.key===hde&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),m())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[m]);const g=p?"expanded":"collapsed",v=x.useMemo(()=>({state:g,open:p,setOpen:h,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:m}),[g,p,h,l,c,u,m]);return a.jsx($V.Provider,{value:v,children:a.jsx(pV,{delayDuration:0,children:a.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":ude,"--sidebar-width-icon":fde,...i},className:Xe("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...o,children:s})})})}function mde({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:i,...s}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:u}=lM();return n==="none"?a.jsx("div",{"data-slot":"sidebar",className:Xe("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",r),...s,children:i}):o?a.jsx(sde,{open:c,onOpenChange:u,...s,children:a.jsxs(IV,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":dde},side:t,children:[a.jsxs(LV,{className:"sr-only",children:[a.jsx(FV,{children:"Sidebar"}),a.jsx(BV,{children:"Displays the mobile sidebar."})]}),a.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):a.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[a.jsx("div",{"data-slot":"sidebar-gap",className:Xe("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),a.jsx("div",{"data-slot":"sidebar-container",className:Xe("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...s,children:a.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function gde({className:t,onClick:e,...n}){const{toggleSidebar:r}=lM();return a.jsxs(re,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:Xe("h-7 w-7",t),onClick:i=>{e?.(i),r()},...n,children:[a.jsx(Mse,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function vde({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:Xe("flex flex-col gap-2 p-2",t),...e})}function yde({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Xe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function xde({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Xe("relative flex w-full min-w-0 flex-col p-2",t),...e})}function bde({className:t,asChild:e=!1,...n}){const r=e?XN:"div";return a.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Xe("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function wde({className:t,...e}){return a.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Xe("w-full text-sm",t),...e})}function Nde({className:t,...e}){return a.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Xe("flex w-full min-w-0 flex-col gap-1",t),...e})}function Sde({className:t,...e}){return a.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Xe("group/menu-item relative",t),...e})}const jde=Jh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function _de({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:i,className:s,...o}){const l=t?XN:"button",{isMobile:c,state:u}=lM(),d=a.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:Xe(jde({variant:n,size:r}),s),...o});return i?(typeof i=="string"&&(i={children:i}),a.jsxs(mV,{children:[a.jsx(gV,{asChild:!0,children:d}),a.jsx(nM,{side:"right",align:"center",hidden:u!=="collapsed"||c,...i})]})):d}function Ede(){return rS.useSyncExternalStore(Ade,()=>!0,()=>!1)}function Ade(){return()=>{}}var cM="Avatar",[Cde]=Ts(cM),[kde,zV]=Cde(cM),qV=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=x.useState("idle");return a.jsx(kde,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:a.jsx(Ot.span,{...r,ref:e})})});qV.displayName=cM;var UV="AvatarImage",HV=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=zV(UV,n),l=Tde(r,s),c=Za(u=>{i(u),o.onImageLoadingStatusChange(u)});return qs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Ot.img,{...s,ref:e,src:r}):null});HV.displayName=UV;var VV="AvatarFallback",WV=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=zV(VV,n),[o,l]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?a.jsx(Ot.span,{...i,ref:e}):null});WV.displayName=VV;function X4(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Tde(t,{referrerPolicy:e,crossOrigin:n}){const r=Ede(),i=x.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=x.useState(()=>X4(s,t));return qs(()=>{l(X4(s,t))},[s,t]),qs(()=>{const c=f=>()=>{l(f)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,n,e]),o}var KV=qV,GV=HV,YV=WV;const P1=x.forwardRef(({className:t,...e},n)=>a.jsx(KV,{ref:n,className:Xe(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));P1.displayName=KV.displayName;const Ode=x.forwardRef(({className:t,...e},n)=>a.jsx(GV,{ref:n,className:Xe("aspect-square h-full w-full",t),...e}));Ode.displayName=GV.displayName;const M1=x.forwardRef(({className:t,...e},n)=>a.jsx(YV,{ref:n,className:Xe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));M1.displayName=YV.displayName;const Pde=[{title:"Dashboard",url:"/",icon:Rse,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Clientes",url:"/clientes",icon:Dd,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Impuestos",url:"/impuestos/control",icon:Qr,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Documentación",url:"/documentacion",icon:N1,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Tareas",url:"/tareas",icon:om,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Manuales",url:"/manuales",icon:N1,roles:["Administrador","Gestor","Solo Lectura"]},{title:"Notificaciones",url:"/notificaciones",icon:Dse,roles:["Administrador","Gestor"]},{title:"Auditoría",url:"/auditoria",icon:Kf,roles:["Administrador","Gestor"]},{title:"Administración",url:"/admin",icon:eS,roles:["Administrador"]}];function Mde(){const[t]=es(),{user:e,logout:n}=Zh(),r=Pde.filter(s=>e&&e.roleName&&Array.isArray(s.roles)&&s.roles.includes(e.roleName)),i=s=>s.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return a.jsxs(mde,{children:[a.jsxs(yde,{children:[a.jsx("div",{className:"p-6",children:a.jsx("h1",{className:"text-xl font-display font-bold text-primary",children:"Asesoría La Llave"})}),a.jsxs(xde,{children:[a.jsx(bde,{children:"Navegación"}),a.jsx(wde,{children:a.jsx(Nde,{children:r.map(s=>a.jsx(Sde,{children:a.jsx(_de,{asChild:!0,isActive:t.startsWith(s.url)||t===s.url,children:a.jsxs(ny,{href:s.url,"data-testid":`link-${s.title.toLowerCase()}`,children:[a.jsx(s.icon,{className:"h-4 w-4"}),a.jsx("span",{children:s.title})]})})},s.title))})})]})]}),a.jsxs(vde,{className:"p-4",children:[e&&a.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b",children:[a.jsx(P1,{className:"h-9 w-9",children:a.jsx(M1,{className:"bg-primary text-primary-foreground text-sm",children:i(e.username)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:e.username}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.roleName||"Sin rol"})]})]}),a.jsxs(re,{variant:"ghost",className:"w-full justify-start",onClick:n,"data-testid":"button-logout",children:[a.jsx(Ise,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]})]})]})}function Rde(){const{theme:t,toggleTheme:e}=iue();return a.jsxs(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-theme-toggle",children:[t==="light"?a.jsx(Lse,{className:"h-5 w-5"}):a.jsx(Fse,{className:"h-5 w-5"}),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}var J4=1,Dde=.9,Ide=.8,Lde=.17,_2=.1,E2=.999,Fde=.9999,Bde=.99,$de=/[\\\/_+.#"@\[\(\{&]/,zde=/[\\\/_+.#"@\[\(\{&]/g,qde=/[\s-]/,XV=/[\s-]/g;function ST(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?J4:Bde;var l=`${i},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,i),d=0,f,p,h,m;u>=0;)f=ST(t,e,n,r,u+1,s+1,o),f>d&&(u===i?f*=J4:$de.test(t.charAt(u-1))?(f*=Ide,h=t.slice(i,u-1).match(zde),h&&i>0&&(f*=Math.pow(E2,h.length))):qde.test(t.charAt(u-1))?(f*=Dde,m=t.slice(i,u-1).match(XV),m&&i>0&&(f*=Math.pow(E2,m.length))):(f*=Lde,i>0&&(f*=Math.pow(E2,u-i))),t.charAt(u)!==e.charAt(s)&&(f*=Fde)),(f<_2&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(p=ST(t,e,n,r,u+1,s+2,o),p*_2>f&&(f=p*_2)),f>d&&(d=f),u=n.indexOf(c,u+1);return o[l]=d,d}function Z4(t){return t.toLowerCase().replace(XV," ")}function Ude(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,ST(t,e,Z4(t),Z4(e),0,0,{})}var jv='[cmdk-group=""]',A2='[cmdk-group-items=""]',Hde='[cmdk-group-heading=""]',JV='[cmdk-item=""]',Q4=`${JV}:not([aria-disabled="true"])`,jT="cmdk-item-select",$p="data-value",Vde=(t,e,n)=>Ude(t,e,n),ZV=x.createContext(void 0),nb=()=>x.useContext(ZV),QV=x.createContext(void 0),uM=()=>x.useContext(QV),eW=x.createContext(void 0),tW=x.forwardRef((t,e)=>{let n=zp(()=>{var F,q;return{search:"",value:(q=(F=t.value)!=null?F:t.defaultValue)!=null?q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=zp(()=>new Set),i=zp(()=>new Map),s=zp(()=>new Map),o=zp(()=>new Set),l=nW(t),{label:c,children:u,value:d,onValueChange:f,filter:p,shouldFilter:h,loop:m,disablePointerSelection:g=!1,vimBindings:v=!0,...y}=t,b=Es(),N=Es(),S=Es(),E=x.useRef(null),C=nfe();Oh(()=>{if(d!==void 0){let F=d.trim();n.current.value=F,T.emit()}},[d]),Oh(()=>{C(6,M)},[]);let T=x.useMemo(()=>({subscribe:F=>(o.current.add(F),()=>o.current.delete(F)),snapshot:()=>n.current,setState:(F,q,Z)=>{var te,ce,ue,ve;if(!Object.is(n.current[F],q)){if(n.current[F]=q,F==="search")O(),P(),C(1,k);else if(F==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let oe=document.getElementById(S);oe?oe.focus():(te=document.getElementById(b))==null||te.focus()}if(C(7,()=>{var oe;n.current.selectedItemId=(oe=I())==null?void 0:oe.id,T.emit()}),Z||C(5,M),((ce=l.current)==null?void 0:ce.value)!==void 0){let oe=q??"";(ve=(ue=l.current).onValueChange)==null||ve.call(ue,oe);return}}T.emit()}},emit:()=>{o.current.forEach(F=>F())}}),[]),_=x.useMemo(()=>({value:(F,q,Z)=>{var te;q!==((te=s.current.get(F))==null?void 0:te.value)&&(s.current.set(F,{value:q,keywords:Z}),n.current.filtered.items.set(F,j(q,Z)),C(2,()=>{P(),T.emit()}))},item:(F,q)=>(r.current.add(F),q&&(i.current.has(q)?i.current.get(q).add(F):i.current.set(q,new Set([F]))),C(3,()=>{O(),P(),n.current.value||k(),T.emit()}),()=>{s.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let Z=I();C(4,()=>{O(),Z?.getAttribute("id")===F&&k(),T.emit()})}),group:F=>(i.current.has(F)||i.current.set(F,new Set),()=>{s.current.delete(F),i.current.delete(F)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:S,labelId:N,listInnerRef:E}),[]);function j(F,q){var Z,te;let ce=(te=(Z=l.current)==null?void 0:Z.filter)!=null?te:Vde;return F?ce(F,n.current.search,q):0}function P(){if(!n.current.search||l.current.shouldFilter===!1)return;let F=n.current.filtered.items,q=[];n.current.filtered.groups.forEach(te=>{let ce=i.current.get(te),ue=0;ce.forEach(ve=>{let oe=F.get(ve);ue=Math.max(oe,ue)}),q.push([te,ue])});let Z=E.current;B().sort((te,ce)=>{var ue,ve;let oe=te.getAttribute("id"),pe=ce.getAttribute("id");return((ue=F.get(pe))!=null?ue:0)-((ve=F.get(oe))!=null?ve:0)}).forEach(te=>{let ce=te.closest(A2);ce?ce.appendChild(te.parentElement===ce?te:te.closest(`${A2} > *`)):Z.appendChild(te.parentElement===Z?te:te.closest(`${A2} > *`))}),q.sort((te,ce)=>ce[1]-te[1]).forEach(te=>{var ce;let ue=(ce=E.current)==null?void 0:ce.querySelector(`${jv}[${$p}="${encodeURIComponent(te[0])}"]`);ue?.parentElement.appendChild(ue)})}function k(){let F=B().find(Z=>Z.getAttribute("aria-disabled")!=="true"),q=F?.getAttribute($p);T.setState("value",q||void 0)}function O(){var F,q,Z,te;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ce=0;for(let ue of r.current){let ve=(q=(F=s.current.get(ue))==null?void 0:F.value)!=null?q:"",oe=(te=(Z=s.current.get(ue))==null?void 0:Z.keywords)!=null?te:[],pe=j(ve,oe);n.current.filtered.items.set(ue,pe),pe>0&&ce++}for(let[ue,ve]of i.current)for(let oe of ve)if(n.current.filtered.items.get(oe)>0){n.current.filtered.groups.add(ue);break}n.current.filtered.count=ce}function M(){var F,q,Z;let te=I();te&&(((F=te.parentElement)==null?void 0:F.firstChild)===te&&((Z=(q=te.closest(jv))==null?void 0:q.querySelector(Hde))==null||Z.scrollIntoView({block:"nearest"})),te.scrollIntoView({block:"nearest"}))}function I(){var F;return(F=E.current)==null?void 0:F.querySelector(`${JV}[aria-selected="true"]`)}function B(){var F;return Array.from(((F=E.current)==null?void 0:F.querySelectorAll(Q4))||[])}function U(F){let q=B()[F];q&&T.setState("value",q.getAttribute($p))}function D(F){var q;let Z=I(),te=B(),ce=te.findIndex(ve=>ve===Z),ue=te[ce+F];(q=l.current)!=null&&q.loop&&(ue=ce+F<0?te[te.length-1]:ce+F===te.length?te[0]:te[ce+F]),ue&&T.setState("value",ue.getAttribute($p))}function z(F){let q=I(),Z=q?.closest(jv),te;for(;Z&&!te;)Z=F>0?efe(Z,jv):tfe(Z,jv),te=Z?.querySelector(Q4);te?T.setState("value",te.getAttribute($p)):D(F)}let H=()=>U(B().length-1),ee=F=>{F.preventDefault(),F.metaKey?H():F.altKey?z(1):D(1)},ae=F=>{F.preventDefault(),F.metaKey?U(0):F.altKey?z(-1):D(-1)};return x.createElement(Ot.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:F=>{var q;(q=y.onKeyDown)==null||q.call(y,F);let Z=F.nativeEvent.isComposing||F.keyCode===229;if(!(F.defaultPrevented||Z))switch(F.key){case"n":case"j":{v&&F.ctrlKey&&ee(F);break}case"ArrowDown":{ee(F);break}case"p":case"k":{v&&F.ctrlKey&&ae(F);break}case"ArrowUp":{ae(F);break}case"Home":{F.preventDefault(),U(0);break}case"End":{F.preventDefault(),H();break}case"Enter":{F.preventDefault();let te=I();if(te){let ce=new Event(jT);te.dispatchEvent(ce)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:ife},c),yS(t,F=>x.createElement(QV.Provider,{value:T},x.createElement(ZV.Provider,{value:_},F))))}),Wde=x.forwardRef((t,e)=>{var n,r;let i=Es(),s=x.useRef(null),o=x.useContext(eW),l=nb(),c=nW(t),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o?.forceMount;Oh(()=>{if(!u)return l.item(i,o?.id)},[u]);let d=rW(i,s,[t.value,t.children,s],t.keywords),f=uM(),p=Xd(C=>C.value&&C.value===d.current),h=Xd(C=>u||l.filter()===!1?!0:C.search?C.filtered.items.get(i)>0:!0);x.useEffect(()=>{let C=s.current;if(!(!C||t.disabled))return C.addEventListener(jT,m),()=>C.removeEventListener(jT,m)},[h,t.onSelect,t.disabled]);function m(){var C,T;g(),(T=(C=c.current).onSelect)==null||T.call(C,d.current)}function g(){f.setState("value",d.current,!0)}if(!h)return null;let{disabled:v,value:y,onSelect:b,forceMount:N,keywords:S,...E}=t;return x.createElement(Ot.div,{ref:_h(s,e),...E,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!p,"data-disabled":!!v,"data-selected":!!p,onPointerMove:v||l.getDisablePointerSelection()?void 0:g,onClick:v?void 0:m},t.children)}),Kde=x.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=Es(),l=x.useRef(null),c=x.useRef(null),u=Es(),d=nb(),f=Xd(h=>i||d.filter()===!1?!0:h.search?h.filtered.groups.has(o):!0);Oh(()=>d.group(o),[]),rW(o,l,[t.value,t.heading,c]);let p=x.useMemo(()=>({id:o,forceMount:i}),[i]);return x.createElement(Ot.div,{ref:_h(l,e),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),yS(t,h=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},x.createElement(eW.Provider,{value:p},h))))}),Gde=x.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=x.useRef(null),s=Xd(o=>!o.search);return!n&&!s?null:x.createElement(Ot.div,{ref:_h(i,e),...r,"cmdk-separator":"",role:"separator"})}),Yde=x.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=uM(),o=Xd(u=>u.search),l=Xd(u=>u.selectedItemId),c=nb();return x.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),x.createElement(Ot.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:i?t.value:o,onChange:u=>{i||s.setState("search",u.target.value),n?.(u.target.value)}})}),Xde=x.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=x.useRef(null),o=x.useRef(null),l=Xd(u=>u.selectedItemId),c=nb();return x.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let h=u.offsetHeight;d.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(f),p.unobserve(u)}}},[]),x.createElement(Ot.div,{ref:_h(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},yS(t,u=>x.createElement("div",{ref:_h(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Jde=x.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...l}=t;return x.createElement(QN,{open:n,onOpenChange:r},x.createElement(JN,{container:o},x.createElement(_g,{"cmdk-overlay":"",className:i}),x.createElement(Eg,{"aria-label":t.label,"cmdk-dialog":"",className:s},x.createElement(tW,{ref:e,...l}))))}),Zde=x.forwardRef((t,e)=>Xd(n=>n.filtered.count===0)?x.createElement(Ot.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),Qde=x.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return x.createElement(Ot.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},yS(t,o=>x.createElement("div",{"aria-hidden":!0},o)))}),ka=Object.assign(tW,{List:Xde,Item:Wde,Input:Yde,Group:Kde,Separator:Gde,Dialog:Jde,Empty:Zde,Loading:Qde});function efe(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function tfe(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function nW(t){let e=x.useRef(t);return Oh(()=>{e.current=t}),e}var Oh=typeof window>"u"?x.useEffect:x.useLayoutEffect;function zp(t){let e=x.useRef();return e.current===void 0&&(e.current=t()),e}function Xd(t){let e=uM(),n=()=>t(e.snapshot());return x.useSyncExternalStore(e.subscribe,n,n)}function rW(t,e,n,r=[]){let i=x.useRef(),s=nb();return Oh(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():i.current}})(),c=r.map(u=>u.trim());s.value(t,l,c),(o=e.current)==null||o.setAttribute($p,l),i.current=l}),i}var nfe=()=>{let[t,e]=x.useState(),n=zp(()=>new Map);return Oh(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function rfe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function yS({asChild:t,children:e},n){return t&&x.isValidElement(e)?x.cloneElement(rfe(e),{ref:e.ref},n(e.props.children)):n(e)}var ife={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Un=QN,As=P9,sfe=JN,iW=x.forwardRef(({className:t,...e},n)=>a.jsx(_g,{ref:n,className:Xe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));iW.displayName=_g.displayName;const zn=x.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(sfe,{children:[a.jsx(iW,{}),a.jsxs(Eg,{ref:r,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 max-h-[85vh] overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(ZN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(jh,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zn.displayName=Eg.displayName;const Hn=({className:t,...e})=>a.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Hn.displayName="DialogHeader";const oi=({className:t,...e})=>a.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});oi.displayName="DialogFooter";const Vn=x.forwardRef(({className:t,...e},n)=>a.jsx(Yx,{ref:n,className:Xe("text-lg font-semibold leading-none tracking-tight",t),...e}));Vn.displayName=Yx.displayName;const Qn=x.forwardRef(({className:t,...e},n)=>a.jsx(Xx,{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Qn.displayName=Xx.displayName;const sW=x.forwardRef(({className:t,...e},n)=>a.jsx(ka,{ref:n,className:Xe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));sW.displayName=ka.displayName;const afe=({children:t,...e})=>a.jsx(Un,{...e,children:a.jsx(zn,{className:"overflow-hidden p-0 shadow-lg",children:a.jsx(sW,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),aW=x.forwardRef(({className:t,...e},n)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(Ag,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(ka.Input,{ref:n,className:Xe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));aW.displayName=ka.Input.displayName;const oW=x.forwardRef(({className:t,...e},n)=>a.jsx(ka.List,{ref:n,className:Xe("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));oW.displayName=ka.List.displayName;const lW=x.forwardRef((t,e)=>a.jsx(ka.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));lW.displayName=ka.Empty.displayName;const i1=x.forwardRef(({className:t,...e},n)=>a.jsx(ka.Group,{ref:n,className:Xe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));i1.displayName=ka.Group.displayName;const ofe=x.forwardRef(({className:t,...e},n)=>a.jsx(ka.Separator,{ref:n,className:Xe("-mx-1 h-px bg-border",t),...e}));ofe.displayName=ka.Separator.displayName;const s1=x.forwardRef(({className:t,...e},n)=>a.jsx(ka.Item,{ref:n,className:Xe("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));s1.displayName=ka.Item.displayName;function lfe(){const[t,e]=x.useState(!1),[n,r]=x.useState(""),[,i]=es();x.useEffect(()=>{const l=c=>{c.key==="k"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),e(u=>!u))};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[]);const{data:s}=At({queryKey:["/api/search",n],enabled:n.length>=2,queryFn:async()=>{const l=await fetch(`/api/search?q=${encodeURIComponent(n)}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!l.ok)throw new Error("Error en búsqueda");return l.json()}}),o=(l,c)=>{e(!1),r(""),l==="cliente"?i("/clientes"):l==="tarea"?i("/tareas"):l==="manual"&&i(`/manuales/${c}`)};return a.jsxs(a.Fragment,{children:[a.jsxs(re,{variant:"outline",className:"relative w-full justify-start text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64",onClick:()=>e(!0),"data-testid":"button-global-search",children:[a.jsx(Ag,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden lg:inline-flex",children:"Buscar..."}),a.jsx("span",{className:"inline-flex lg:hidden",children:"Buscar"}),a.jsxs("kbd",{className:"pointer-events-none absolute right-1.5 top-2 hidden h-6 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[a.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),a.jsxs(afe,{open:t,onOpenChange:e,children:[a.jsx(aW,{placeholder:"Buscar clientes, tareas, impuestos, manuales...",value:n,onValueChange:r,"data-testid":"input-global-search"}),a.jsxs(oW,{children:[a.jsx(lW,{children:n.length<2?"Escribe al menos 2 caracteres para buscar":"No se encontraron resultados"}),s&&s.clientes.length>0&&a.jsx(i1,{heading:"Clientes",children:s.clientes.map(l=>a.jsxs(s1,{onSelect:()=>o("cliente",l.id),"data-testid":`search-result-client-${l.id}`,children:[a.jsx(Eh,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.razonSocial}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.nifCif})]})]},l.id))}),s&&s.tareas.length>0&&a.jsx(i1,{heading:"Tareas",children:s.tareas.map(l=>a.jsxs(s1,{onSelect:()=>o("tarea",l.id),"data-testid":`search-result-task-${l.id}`,children:[a.jsx(om,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.titulo}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.estado})]})]},l.id))}),null,s&&s.manuales.length>0&&a.jsx(i1,{heading:"Manuales",children:s.manuales.map(l=>a.jsxs(s1,{onSelect:()=>o("manual",l.id),"data-testid":`search-result-manual-${l.id}`,children:[a.jsx(N1,{className:"mr-2 h-4 w-4"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:l.titulo}),a.jsx("span",{className:"text-xs text-muted-foreground",children:l.categoria})]})]},l.id))})]})]})]})}function cfe(){const{data:t,isLoading:e}=At({queryKey:["/api/health"],refetchInterval:3e4,retry:2}),n=t?.status==="healthy"&&t?.database==="connected";return e?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Kk,{className:"h-4 w-4 animate-pulse"}),a.jsx("span",{className:"hidden sm:inline",children:"Verificando..."})]}):a.jsxs(mV,{children:[a.jsx(gV,{asChild:!0,children:a.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground cursor-help",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Bse,{className:"h-4 w-4 text-green-500","data-testid":"icon-db-connected"}),a.jsx("span",{className:"hidden sm:inline",children:"DB Activa"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Kk,{className:"h-4 w-4 text-red-500","data-testid":"icon-db-disconnected"}),a.jsx("span",{className:"hidden sm:inline",children:"DB Desconectada"})]})})}),a.jsx(nM,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"font-semibold",children:["Estado: ",n?"Conectada":"Desconectada"]}),t?.timestamp&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Última verificación: ",new Date(t.timestamp).toLocaleTimeString()]})]})})]})}const Fe=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Fe.displayName="Card";const Je=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("flex flex-col space-y-1.5 p-6",t),...e}));Je.displayName="CardHeader";const et=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("text-2xl font-semibold leading-none tracking-tight",t),...e}));et.displayName="CardTitle";const Zt=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Zt.displayName="CardDescription";const Be=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("p-6 pt-0",t),...e}));Be.displayName="CardContent";const ufe=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("flex items-center p-6 pt-0",t),...e}));ufe.displayName="CardFooter";function dfe(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Fe,{className:"w-full max-w-md mx-4",children:a.jsxs(Be,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(qo,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var ffe="Label",cW=x.forwardRef((t,e)=>a.jsx(Ot.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));cW.displayName=ffe;var uW=cW;const hfe=Jh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ye=x.forwardRef(({className:t,...e},n)=>a.jsx(uW,{ref:n,className:Xe(hfe(),t),...e}));ye.displayName=uW.displayName;var pfe=x.createContext(void 0);function Qh(t){const e=x.useContext(pfe);return t||e||"ltr"}var C2="rovingFocusGroup.onEntryFocus",mfe={bubbles:!1,cancelable:!0},rb="RovingFocusGroup",[_T,dW,gfe]=Jx(rb),[vfe,xS]=Ts(rb,[gfe]),[yfe,xfe]=vfe(rb),fW=x.forwardRef((t,e)=>a.jsx(_T.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(_T.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(bfe,{...t,ref:e})})}));fW.displayName=rb;var bfe=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,p=x.useRef(null),h=Tn(e,p),m=Qh(s),[g,v]=ao({prop:o,defaultProp:l??null,onChange:c,caller:rb}),[y,b]=x.useState(!1),N=Za(u),S=dW(n),E=x.useRef(!1),[C,T]=x.useState(0);return x.useEffect(()=>{const _=p.current;if(_)return _.addEventListener(C2,N),()=>_.removeEventListener(C2,N)},[N]),a.jsx(yfe,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(_=>v(_),[v]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>T(_=>_+1),[]),onFocusableItemRemove:x.useCallback(()=>T(_=>_-1),[]),children:a.jsx(Ot.div,{tabIndex:y||C===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...t.style},onMouseDown:vt(t.onMouseDown,()=>{E.current=!0}),onFocus:vt(t.onFocus,_=>{const j=!E.current;if(_.target===_.currentTarget&&j&&!y){const P=new CustomEvent(C2,mfe);if(_.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=S().filter(U=>U.focusable),O=k.find(U=>U.active),M=k.find(U=>U.id===g),B=[O,M,...k].filter(Boolean).map(U=>U.ref.current);mW(B,d)}}E.current=!1}),onBlur:vt(t.onBlur,()=>b(!1))})})}),hW="RovingFocusGroupItem",pW=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=t,c=Es(),u=s||c,d=xfe(hW,n),f=d.currentTabStopId===u,p=dW(n),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:g}=d;return x.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),a.jsx(_T.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:a.jsx(Ot.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:vt(t.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:vt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:vt(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=Sfe(v,d.orientation,d.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let N=p().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")N.reverse();else if(y==="prev"||y==="next"){y==="prev"&&N.reverse();const S=N.indexOf(v.currentTarget);N=d.loop?jfe(N,S+1):N.slice(S+1)}setTimeout(()=>mW(N))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});pW.displayName=hW;var wfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nfe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Sfe(t,e,n){const r=Nfe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return wfe[r]}function mW(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function jfe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gW=fW,vW=pW,bS="Tabs",[_fe]=Ts(bS,[xS]),yW=xS(),[Efe,dM]=_fe(bS),xW=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Qh(l),[f,p]=ao({prop:r,onChange:i,defaultProp:s??"",caller:bS});return a.jsx(Efe,{scope:n,baseId:Es(),value:f,onValueChange:p,orientation:o,dir:d,activationMode:c,children:a.jsx(Ot.div,{dir:d,"data-orientation":o,...u,ref:e})})});xW.displayName=bS;var bW="TabsList",wW=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=dM(bW,n),o=yW(n);return a.jsx(gW,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:a.jsx(Ot.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});wW.displayName=bW;var NW="TabsTrigger",SW=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=dM(NW,n),l=yW(n),c=EW(o.baseId,r),u=AW(o.baseId,r),d=r===o.value;return a.jsx(vW,{asChild:!0,...l,focusable:!i,active:d,children:a.jsx(Ot.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:vt(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:vt(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:vt(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});SW.displayName=NW;var jW="TabsContent",_W=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,l=dM(jW,n),c=EW(l.baseId,r),u=AW(l.baseId,r),d=r===l.value,f=x.useRef(d);return x.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Ca,{present:i||d,children:({present:p})=>a.jsx(Ot.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&s})})});_W.displayName=jW;function EW(t,e){return`${t}-trigger-${e}`}function AW(t,e){return`${t}-content-${e}`}var Afe=xW,CW=wW,kW=SW,TW=_W;const Wo=Afe,co=x.forwardRef(({className:t,...e},n)=>a.jsx(CW,{ref:n,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));co.displayName=CW.displayName;const vn=x.forwardRef(({className:t,...e},n)=>a.jsx(kW,{ref:n,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));vn.displayName=kW.displayName;const Rn=x.forwardRef(({className:t,...e},n)=>a.jsx(TW,{ref:n,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Rn.displayName=TW.displayName;function eL(){const[,t]=es(),{login:e,register:n,logout:r,user:i}=Zh(),{toast:s}=nr(),[o,l]=x.useState({username:"",password:""}),[c,u]=x.useState({username:"",email:"",password:"",confirmPassword:""}),{data:d}=At({queryKey:["/api/admin/system-settings"]});x.useEffect(()=>{i&&r()},[i,r]);const f=async h=>{h.preventDefault();try{await e(o.username,o.password),s({title:"Inicio de sesión exitoso",description:"Bienvenido de nuevo"}),t("/")}catch(m){s({title:"Error",description:m.message||"Credenciales incorrectas",variant:"destructive"})}},p=async h=>{if(h.preventDefault(),c.password!==c.confirmPassword){s({title:"Error",description:"Las contraseñas no coinciden",variant:"destructive"});return}try{await n(c.username,c.email,c.password),s({title:"Registro exitoso",description:"Tu cuenta ha sido creada"}),t("/")}catch(m){s({title:"Error",description:m.message||"Error al crear la cuenta",variant:"destructive"})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-ring/5 p-4",children:a.jsxs(Fe,{className:"w-full max-w-md",children:[a.jsxs(Je,{className:"space-y-1",children:[a.jsx(et,{className:"text-3xl font-display font-bold text-center text-primary",children:"Asesoría La Llave"}),a.jsx(Zt,{className:"text-center",children:"Sistema de gestión profesional"})]}),a.jsx(Be,{children:a.jsxs(Wo,{defaultValue:"login",className:"w-full",children:[a.jsxs(co,{className:`grid w-full ${d?.registrationEnabled??!0?"grid-cols-2":"grid-cols-1"} mb-6`,children:[a.jsx(vn,{value:"login",children:"Iniciar Sesión"}),(d?.registrationEnabled??!0)&&a.jsx(vn,{value:"register",children:"Registrarse"})]}),a.jsx(Rn,{value:"login",children:a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"login-username",children:"Usuario"}),a.jsx(Ie,{id:"login-username",type:"text",placeholder:"tu_usuario",value:o.username,onChange:h=>l({...o,username:h.target.value}),required:!0,"data-testid":"input-login-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"login-password",children:"Contraseña"}),a.jsx(Ie,{id:"login-password",type:"password",placeholder:"••••••••",value:o.password,onChange:h=>l({...o,password:h.target.value}),required:!0,"data-testid":"input-login-password"})]}),a.jsx(re,{type:"submit",className:"w-full","data-testid":"button-login-submit",children:"Iniciar Sesión"})]})}),(d?.registrationEnabled??!0)&&a.jsx(Rn,{value:"register",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"register-username",children:"Usuario"}),a.jsx(Ie,{id:"register-username",type:"text",placeholder:"tu_usuario",value:c.username,onChange:h=>u({...c,username:h.target.value}),required:!0,"data-testid":"input-register-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"register-email",children:"Email"}),a.jsx(Ie,{id:"register-email",type:"email",placeholder:"tu@email.com",value:c.email,onChange:h=>u({...c,email:h.target.value}),required:!0,"data-testid":"input-register-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"register-password",children:"Contraseña"}),a.jsx(Ie,{id:"register-password",type:"password",placeholder:"••••••••",value:c.password,onChange:h=>u({...c,password:h.target.value}),required:!0,"data-testid":"input-register-password"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"register-confirm-password",children:"Confirmar Contraseña"}),a.jsx(Ie,{id:"register-confirm-password",type:"password",placeholder:"••••••••",value:c.confirmPassword,onChange:h=>u({...c,confirmPassword:h.target.value}),required:!0,"data-testid":"input-register-confirm-password"})]}),a.jsx(re,{type:"submit",className:"w-full","data-testid":"button-register-submit",children:"Crear Cuenta"})]})})]})})]})})}var k2,tL;function Ta(){if(tL)return k2;tL=1;var t=Array.isArray;return k2=t,k2}var T2,nL;function OW(){if(nL)return T2;nL=1;var t=typeof Zb=="object"&&Zb&&Zb.Object===Object&&Zb;return T2=t,T2}var O2,rL;function vc(){if(rL)return O2;rL=1;var t=OW(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return O2=n,O2}var P2,iL;function ib(){if(iL)return P2;iL=1;var t=vc(),e=t.Symbol;return P2=e,P2}var M2,sL;function Cfe(){if(sL)return M2;sL=1;var t=ib(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(l?o[i]=c:delete o[i]),d}return M2=s,M2}var R2,aL;function kfe(){if(aL)return R2;aL=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return R2=n,R2}var D2,oL;function _u(){if(oL)return D2;oL=1;var t=ib(),e=Cfe(),n=kfe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?e(l):n(l)}return D2=o,D2}var I2,lL;function Eu(){if(lL)return I2;lL=1;function t(e){return e!=null&&typeof e=="object"}return I2=t,I2}var L2,cL;function Mg(){if(cL)return L2;cL=1;var t=_u(),e=Eu(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return L2=r,L2}var F2,uL;function fM(){if(uL)return F2;uL=1;var t=Ta(),e=Mg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return F2=i,F2}var B2,dL;function sf(){if(dL)return B2;dL=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return B2=t,B2}var $2,fL;function hM(){if(fL)return $2;fL=1;var t=_u(),e=sf(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==r||c==i||c==n||c==s}return $2=o,$2}var z2,hL;function Tfe(){if(hL)return z2;hL=1;var t=vc(),e=t["__core-js_shared__"];return z2=e,z2}var q2,pL;function Ofe(){if(pL)return q2;pL=1;var t=Tfe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return q2=n,q2}var U2,mL;function PW(){if(mL)return U2;mL=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return U2=n,U2}var H2,gL;function Pfe(){if(gL)return H2;gL=1;var t=hM(),e=Ofe(),n=sf(),r=PW(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!n(p)||e(p))return!1;var h=t(p)?d:s;return h.test(r(p))}return H2=f,H2}var V2,vL;function Mfe(){if(vL)return V2;vL=1;function t(e,n){return e?.[n]}return V2=t,V2}var W2,yL;function ep(){if(yL)return W2;yL=1;var t=Pfe(),e=Mfe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return W2=n,W2}var K2,xL;function wS(){if(xL)return K2;xL=1;var t=ep(),e=t(Object,"create");return K2=e,K2}var G2,bL;function Rfe(){if(bL)return G2;bL=1;var t=wS();function e(){this.__data__=t?t(null):{},this.size=0}return G2=e,G2}var Y2,wL;function Dfe(){if(wL)return Y2;wL=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Y2=t,Y2}var X2,NL;function Ife(){if(NL)return X2;NL=1;var t=wS(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return r.call(o,s)?o[s]:void 0}return X2=i,X2}var J2,SL;function Lfe(){if(SL)return J2;SL=1;var t=wS(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return J2=r,J2}var Z2,jL;function Ffe(){if(jL)return Z2;jL=1;var t=wS(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return Z2=n,Z2}var Q2,_L;function Bfe(){if(_L)return Q2;_L=1;var t=Rfe(),e=Dfe(),n=Ife(),r=Lfe(),i=Ffe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Q2=s,Q2}var e_,EL;function $fe(){if(EL)return e_;EL=1;function t(){this.__data__=[],this.size=0}return e_=t,e_}var t_,AL;function pM(){if(AL)return t_;AL=1;function t(e,n){return e===n||e!==e&&n!==n}return t_=t,t_}var n_,CL;function NS(){if(CL)return n_;CL=1;var t=pM();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return n_=e,n_}var r_,kL;function zfe(){if(kL)return r_;kL=1;var t=NS(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return r_=r,r_}var i_,TL;function qfe(){if(TL)return i_;TL=1;var t=NS();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return i_=e,i_}var s_,OL;function Ufe(){if(OL)return s_;OL=1;var t=NS();function e(n){return t(this.__data__,n)>-1}return s_=e,s_}var a_,PL;function Hfe(){if(PL)return a_;PL=1;var t=NS();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return a_=e,a_}var o_,ML;function SS(){if(ML)return o_;ML=1;var t=$fe(),e=zfe(),n=qfe(),r=Ufe(),i=Hfe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,o_=s,o_}var l_,RL;function mM(){if(RL)return l_;RL=1;var t=ep(),e=vc(),n=t(e,"Map");return l_=n,l_}var c_,DL;function Vfe(){if(DL)return c_;DL=1;var t=Bfe(),e=SS(),n=mM();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return c_=r,c_}var u_,IL;function Wfe(){if(IL)return u_;IL=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return u_=t,u_}var d_,LL;function jS(){if(LL)return d_;LL=1;var t=Wfe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return d_=e,d_}var f_,FL;function Kfe(){if(FL)return f_;FL=1;var t=jS();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return f_=e,f_}var h_,BL;function Gfe(){if(BL)return h_;BL=1;var t=jS();function e(n){return t(this,n).get(n)}return h_=e,h_}var p_,$L;function Yfe(){if($L)return p_;$L=1;var t=jS();function e(n){return t(this,n).has(n)}return p_=e,p_}var m_,zL;function Xfe(){if(zL)return m_;zL=1;var t=jS();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return m_=e,m_}var g_,qL;function gM(){if(qL)return g_;qL=1;var t=Vfe(),e=Kfe(),n=Gfe(),r=Yfe(),i=Xfe();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,g_=s,g_}var v_,UL;function MW(){if(UL)return v_;UL=1;var t=gM(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var u=r.apply(this,o);return s.cache=c.set(l,u)||c,u};return s.cache=new(n.Cache||t),s}return n.Cache=t,v_=n,v_}var y_,HL;function Jfe(){if(HL)return y_;HL=1;var t=MW(),e=500;function n(r){var i=t(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return y_=n,y_}var x_,VL;function Zfe(){if(VL)return x_;VL=1;var t=Jfe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,c,u){s.push(c?u.replace(n,"$1"):l||o)}),s});return x_=r,x_}var b_,WL;function vM(){if(WL)return b_;WL=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return b_=t,b_}var w_,KL;function Qfe(){if(KL)return w_;KL=1;var t=ib(),e=vM(),n=Ta(),r=Mg(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(r(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return w_=o,w_}var N_,GL;function RW(){if(GL)return N_;GL=1;var t=Qfe();function e(n){return n==null?"":t(n)}return N_=e,N_}var S_,YL;function DW(){if(YL)return S_;YL=1;var t=Ta(),e=fM(),n=Zfe(),r=RW();function i(s,o){return t(s)?s:e(s,o)?[s]:n(r(s))}return S_=i,S_}var j_,XL;function _S(){if(XL)return j_;XL=1;var t=Mg();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return j_=e,j_}var __,JL;function yM(){if(JL)return __;JL=1;var t=DW(),e=_S();function n(r,i){i=t(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return __=n,__}var E_,ZL;function IW(){if(ZL)return E_;ZL=1;var t=yM();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return E_=e,E_}var ehe=IW();const Fo=jr(ehe);var A_,QL;function the(){if(QL)return A_;QL=1;function t(e){return e==null}return A_=t,A_}var nhe=the();const wn=jr(nhe);var C_,e3;function rhe(){if(e3)return C_;e3=1;var t=_u(),e=Ta(),n=Eu(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return C_=i,C_}var ihe=rhe();const Ph=jr(ihe);var she=hM();const Cn=jr(she);var ahe=sf();const Rg=jr(ahe);var k_={exports:{}},hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t3;function ohe(){if(t3)return hr;t3=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function g(v){if(typeof v=="object"&&v!==null){var y=v.$$typeof;switch(y){case t:switch(v=v.type,v){case n:case i:case r:case u:case d:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case c:case p:case f:case s:return v;default:return y}}case e:return y}}}return hr.ContextConsumer=o,hr.ContextProvider=s,hr.Element=t,hr.ForwardRef=c,hr.Fragment=n,hr.Lazy=p,hr.Memo=f,hr.Portal=e,hr.Profiler=i,hr.StrictMode=r,hr.Suspense=u,hr.SuspenseList=d,hr.isAsyncMode=function(){return!1},hr.isConcurrentMode=function(){return!1},hr.isContextConsumer=function(v){return g(v)===o},hr.isContextProvider=function(v){return g(v)===s},hr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},hr.isForwardRef=function(v){return g(v)===c},hr.isFragment=function(v){return g(v)===n},hr.isLazy=function(v){return g(v)===p},hr.isMemo=function(v){return g(v)===f},hr.isPortal=function(v){return g(v)===e},hr.isProfiler=function(v){return g(v)===i},hr.isStrictMode=function(v){return g(v)===r},hr.isSuspense=function(v){return g(v)===u},hr.isSuspenseList=function(v){return g(v)===d},hr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===u||v===d||v===h||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===f||v.$$typeof===s||v.$$typeof===o||v.$$typeof===c||v.$$typeof===m||v.getModuleId!==void 0)},hr.typeOf=g,hr}var n3;function lhe(){return n3||(n3=1,k_.exports=ohe()),k_.exports}var che=lhe(),T_,r3;function LW(){if(r3)return T_;r3=1;var t=_u(),e=Eu(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return T_=r,T_}var O_,i3;function uhe(){if(i3)return O_;i3=1;var t=LW();function e(n){return t(n)&&n!=+n}return O_=e,O_}var dhe=uhe();const Dg=jr(dhe);var fhe=LW();const hhe=jr(fhe);var hl=function(e){return e===0?0:e>0?1:-1},Yf=function(e){return Ph(e)&&e.indexOf("%")===e.length-1},dt=function(e){return hhe(e)&&!Dg(e)},phe=function(e){return wn(e)},Ji=function(e){return dt(e)||Ph(e)},mhe=0,tp=function(e){var n=++mhe;return"".concat(e||"").concat(n)},Mh=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(e)&&!Ph(e))return r;var s;if(Yf(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Dg(s)&&(s=r),i&&s>n&&(s=n),s},fd=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},ghe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},_i=function(e,n){return dt(e)&&dt(n)?function(r){return e+r*(n-e)}:function(){return n}};function R1(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Fo(r,e))===n})}var vhe=function(e){if(!e||!e.length)return null;for(var n=e.length,r=0,i=0,s=0,o=0,l=1/0,c=-1/0,u=0,d=0,f=0;f<n;f++)u=e[f].cx||0,d=e[f].cy||0,r+=u,i+=d,s+=u*d,o+=u*u,l=Math.min(l,u),c=Math.max(c,u);var p=n*o!==r*r?(n*s-r*i)/(n*o-r*r):0;return{xmin:l,xmax:c,a:p,b:(i-p*r)/n}},yhe=function(e,n){return dt(e)&&dt(n)?e-n:Ph(e)&&Ph(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function um(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function ET(t){"@babel/helpers - typeof";return ET=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ET(t)}var xhe=["viewBox","children"],bhe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s3=["points","pathLength"],P_={svg:xhe,polygon:s3,polyline:s3},xM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],D1=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),!Rg(r))return null;var i={};return Object.keys(r).forEach(function(s){xM.includes(s)&&(i[s]=n||function(o){return r[s](r,o)})}),i},whe=function(e,n,r){return function(i){return e(n,r,i),null}},Fy=function(e,n,r){if(!Rg(e)||ET(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];xM.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=whe(o,n,r))}),i},Nhe=["children"],She=["children"];function a3(t,e){if(t==null)return{};var n=jhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function AT(t){"@babel/helpers - typeof";return AT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(t)}var o3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},lu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},l3=null,M_=null,bM=function t(e){if(e===l3&&Array.isArray(M_))return M_;var n=[];return x.Children.forEach(e,function(r){wn(r)||(che.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),M_=n,l3=e,n};function _a(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return lu(i)}):r=[lu(e)],bM(t).forEach(function(i){var s=Fo(i,"type.displayName")||Fo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Ga(t,e){var n=_a(t,e);return n&&n[0]}var c3=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!dt(r)||r<=0||!dt(i)||i<=0)},_he=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ehe=function(e){return e&&e.type&&Ph(e.type)&&_he.indexOf(e.type)>=0},FW=function(e){return e&&AT(e)==="object"&&"clipDot"in e},Ahe=function(e,n,r,i){var s,o=(s=P_?.[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Cn(e)&&(i&&o.includes(n)||bhe.includes(n))||r&&xM.includes(n)},_n=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(x.isValidElement(e)&&(i=e.props),!Rg(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;Ahe((l=i)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=i[o])}),s},CT=function t(e,n){if(e===n)return!0;var r=x.Children.count(e);if(r!==x.Children.count(n))return!1;if(r===0)return!0;if(r===1)return u3(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!u3(s,o))return!1}return!0},u3=function(e,n){if(wn(e)&&wn(n))return!0;if(!wn(e)&&!wn(n)){var r=e.props||{},i=r.children,s=a3(r,Nhe),o=n.props||{},l=o.children,c=a3(o,She);return i&&l?um(s,c)&&CT(i,l):!i&&!l?um(s,c):!1}return!1},d3=function(e,n){var r=[],i={};return bM(e).forEach(function(s,o){if(Ehe(s))r.push(s);else if(s){var l=lu(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,o);r.push(f),i[l]=!0}}}),r},Che=function(e){var n=e&&e.type;return n&&o3[n]?o3[n]:null},khe=function(e,n){return bM(n).indexOf(e)},The=["children","width","height","viewBox","className","style","title","desc"];function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kT.apply(this,arguments)}function Ohe(t,e){if(t==null)return{};var n=Phe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Phe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TT(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=Ohe(t,The),d=i||{width:n,height:r,x:0,y:0},f=Bn("recharts-surface",s);return le.createElement("svg",kT({},_n(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),le.createElement("title",null,l),le.createElement("desc",null,c),e)}var Mhe=["children","className"];function OT(){return OT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OT.apply(this,arguments)}function Rhe(t,e){if(t==null)return{};var n=Dhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ur=le.forwardRef(function(t,e){var n=t.children,r=t.className,i=Rhe(t,Mhe),s=Bn("recharts-layer",r);return le.createElement("g",OT({className:s},_n(i,!0),{ref:e}),n)}),cu=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},R_,f3;function Ihe(){if(f3)return R_;f3=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return R_=t,R_}var D_,h3;function Lhe(){if(h3)return D_;h3=1;var t=Ihe();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return D_=e,D_}var I_,p3;function BW(){if(p3)return I_;p3=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function c(u){return l.test(u)}return I_=c,I_}var L_,m3;function Fhe(){if(m3)return L_;m3=1;function t(e){return e.split("")}return L_=t,L_}var F_,g3;function Bhe(){if(g3)return F_;g3=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",m=u+"?",g="["+s+"]?",v="(?:"+h+"(?:"+[d,f,p].join("|")+")"+g+m+")*",y=g+m+v,b="(?:"+[d+l+"?",l,f,p,o].join("|")+")",N=RegExp(c+"(?="+c+")|"+b+y,"g");function S(E){return E.match(N)||[]}return F_=S,F_}var B_,v3;function $he(){if(v3)return B_;v3=1;var t=Fhe(),e=BW(),n=Bhe();function r(i){return e(i)?n(i):t(i)}return B_=r,B_}var $_,y3;function zhe(){if(y3)return $_;y3=1;var t=Lhe(),e=BW(),n=$he(),r=RW();function i(s){return function(o){o=r(o);var l=e(o)?n(o):void 0,c=l?l[0]:o.charAt(0),u=l?t(l,1).join(""):o.slice(1);return c[s]()+u}}return $_=i,$_}var z_,x3;function qhe(){if(x3)return z_;x3=1;var t=zhe(),e=t("toUpperCase");return z_=e,z_}var Uhe=qhe();const ES=jr(Uhe);function Lr(t){return function(){return t}}const $W=Math.cos,I1=Math.sin,jl=Math.sqrt,L1=Math.PI,AS=2*L1,PT=Math.PI,MT=2*PT,Bf=1e-6,Hhe=MT-Bf;function zW(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Vhe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zW;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Whe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zW:Vhe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-e,u=i-n,d=o-e,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Bf)if(!(Math.abs(f*c-u*d)>Bf)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,m=i-l,g=c*c+u*u,v=h*h+m*m,y=Math.sqrt(g),b=Math.sqrt(p),N=s*Math.tan((PT-Math.acos((g+p-v)/(2*y*b)))/2),S=N/b,E=N/y;Math.abs(S-1)>Bf&&this._append`L${e+S*d},${n+S*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+E*c},${this._y1=n+E*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^o,p=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Bf||Math.abs(this._y1-d)>Bf)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%MT+MT),p>Hhe?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>Bf&&this._append`A${r},${r},0,${+(p>=PT)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Whe(e)}function NM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qW(t){this._context=t}qW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function CS(t){return new qW(t)}function UW(t){return t[0]}function HW(t){return t[1]}function VW(t,e){var n=Lr(!0),r=null,i=CS,s=null,o=wM(l);t=typeof t=="function"?t:t===void 0?UW:Lr(t),e=typeof e=="function"?e:e===void 0?HW:Lr(e);function l(c){var u,d=(c=NM(c)).length,f,p=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Lr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Lr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Lr(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function i0(t,e,n){var r=null,i=Lr(!0),s=null,o=CS,l=null,c=wM(u);t=typeof t=="function"?t:t===void 0?UW:Lr(+t),e=typeof e=="function"?e:Lr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?HW:Lr(+n);function u(f){var p,h,m,g=(f=NM(f)).length,v,y=!1,b,N=new Array(g),S=new Array(g);for(s==null&&(l=o(b=c())),p=0;p<=g;++p){if(!(p<g&&i(v=f[p],p,f))===y)if(y=!y)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(N[m],S[m]);l.lineEnd(),l.areaEnd()}y&&(N[p]=+t(v,p,f),S[p]=+e(v,p,f),l.point(r?+r(v,p,f):N[p],n?+n(v,p,f):S[p]))}if(b)return l=null,b+""||null}function d(){return VW().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Lr(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Lr(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Lr(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Lr(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Lr(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class WW{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Khe(t){return new WW(t,!0)}function Ghe(t){return new WW(t,!1)}const SM={draw(t,e){const n=jl(e/L1);t.moveTo(n,0),t.arc(0,0,n,0,AS)}},Yhe={draw(t,e){const n=jl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},KW=jl(1/3),Xhe=KW*2,Jhe={draw(t,e){const n=jl(e/Xhe),r=n*KW;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Zhe={draw(t,e){const n=jl(e),r=-n/2;t.rect(r,r,n,n)}},Qhe=.8908130915292852,GW=I1(L1/10)/I1(7*L1/10),epe=I1(AS/10)*GW,tpe=-$W(AS/10)*GW,npe={draw(t,e){const n=jl(e*Qhe),r=epe*n,i=tpe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=AS*s/5,l=$W(o),c=I1(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},q_=jl(3),rpe={draw(t,e){const n=-jl(e/(q_*3));t.moveTo(0,n*2),t.lineTo(-q_*n,-n),t.lineTo(q_*n,-n),t.closePath()}},No=-.5,So=jl(3)/2,RT=1/jl(12),ipe=(RT/2+1)*3,spe={draw(t,e){const n=jl(e/ipe),r=n/2,i=n*RT,s=r,o=n*RT+n,l=-s,c=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(No*r-So*i,So*r+No*i),t.lineTo(No*s-So*o,So*s+No*o),t.lineTo(No*l-So*c,So*l+No*c),t.lineTo(No*r+So*i,No*i-So*r),t.lineTo(No*s+So*o,No*o-So*s),t.lineTo(No*l+So*c,No*c-So*l),t.closePath()}};function ape(t,e){let n=null,r=wM(i);t=typeof t=="function"?t:Lr(t||SM),e=typeof e=="function"?e:Lr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Lr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Lr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F1(){}function B1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function YW(t){this._context=t}YW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ope(t){return new YW(t)}function XW(t){this._context=t}XW.prototype={areaStart:F1,areaEnd:F1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:B1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lpe(t){return new XW(t)}function JW(t){this._context=t}JW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:B1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cpe(t){return new JW(t)}function ZW(t){this._context=t}ZW.prototype={areaStart:F1,areaEnd:F1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function upe(t){return new ZW(t)}function b3(t){return t<0?-1:1}function w3(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(b3(s)+b3(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function N3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function U_(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,o-l*n,s,o)}function $1(t){this._context=t}$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:U_(this,this._t0,N3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,U_(this,N3(this,n=w3(this,t,e)),n);break;default:U_(this,this._t0,n=w3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function QW(t){this._context=new eK(t)}(QW.prototype=Object.create($1.prototype)).point=function(t,e){$1.prototype.point.call(this,e,t)};function eK(t){this._context=t}eK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function dpe(t){return new $1(t)}function fpe(t){return new QW(t)}function tK(t){this._context=t}tK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=S3(t),i=S3(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function S3(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function hpe(t){return new tK(t)}function kS(t,e){this._context=t,this._t=e}kS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function ppe(t){return new kS(t,.5)}function mpe(t){return new kS(t,0)}function gpe(t){return new kS(t,1)}function Fm(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,l=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function vpe(t,e){return t[e]}function ype(t){const e=[];return e.key=t,e}function xpe(){var t=Lr([]),e=DT,n=Fm,r=vpe;function i(s){var o=Array.from(t.apply(this,arguments),ype),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(f,o[l].key,u,s)]).data=f;for(l=0,d=NM(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Lr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Lr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?DT:typeof s=="function"?s:Lr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Fm,i):n},i}function bpe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Fm(t,e)}}function wpe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,l=0;o<i;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Fm(t,e)}}function Npe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[r][1]||0,p=d[r-1][1]||0,h=(f-p)/2,m=0;m<l;++m){var g=t[e[m]],v=g[r][1]||0,y=g[r-1][1]||0;h+=v-y}c+=f,u+=h*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Fm(t,e)}}function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}var Spe=["type","size","sizeType"];function IT(){return IT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IT.apply(this,arguments)}function j3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(n),!0).forEach(function(r){jpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jpe(t,e,n){return e=_pe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _pe(t){var e=Epe(t,"string");return By(e)=="symbol"?e:e+""}function Epe(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ape(t,e){if(t==null)return{};var n=Cpe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var nK={symbolCircle:SM,symbolCross:Yhe,symbolDiamond:Jhe,symbolSquare:Zhe,symbolStar:npe,symbolTriangle:rpe,symbolWye:spe},kpe=Math.PI/180,Tpe=function(e){var n="symbol".concat(ES(e));return nK[n]||SM},Ope=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*kpe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ppe=function(e,n){nK["symbol".concat(ES(e))]=n},TS=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=Ape(e,Spe),u=_3(_3({},c),{},{type:r,size:s,sizeType:l}),d=function(){var v=Tpe(r),y=ape().type(v).size(Ope(s,l,r));return y()},f=u.className,p=u.cx,h=u.cy,m=_n(u,!0);return p===+p&&h===+h&&s===+s?le.createElement("path",IT({},m,{className:Bn("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};TS.registerSymbol=Ppe;function Bm(t){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(t)}function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LT.apply(this,arguments)}function E3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(n),!0).forEach(function(r){$y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iK(r.key),r)}}function Ipe(t,e,n){return e&&Dpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lpe(t,e,n){return e=z1(e),Fpe(t,rK()?Reflect.construct(e,n||[],z1(t).constructor):e.apply(t,n))}function Fpe(t,e){if(e&&(Bm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bpe(t)}function Bpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rK=function(){return!!t})()}function z1(t){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z1(t)}function $pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FT(t,e)}function FT(t,e){return FT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FT(t,e)}function $y(t,e,n){return e=iK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iK(t){var e=zpe(t,"string");return Bm(e)=="symbol"?e:e+""}function zpe(t,e){if(Bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jo=32,jM=(function(t){function e(){return Rpe(this,e),Lpe(this,e,arguments)}return $pe(e,t),Ipe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=jo/2,o=jo/6,l=jo/3,c=r.inactive?i:r.color;if(r.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:jo,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(jo,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return le.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(jo/8,"h").concat(jo,"v").concat(jo*3/4,"h").concat(-jo,"z"),className:"recharts-legend-icon"});if(le.isValidElement(r.legendIcon)){var u=Mpe({},r);return delete u.legendIcon,le.cloneElement(r.legendIcon,u)}return le.createElement(TS,{fill:c,cx:s,cy:s,size:jo,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:jo,height:jo},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(h,m){var g=h.formatter||c,v=Bn($y($y({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Cn(h.value)?null:h.value;cu(!Cn(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=h.inactive?u:h.color;return le.createElement("li",LT({className:v,style:f,key:"legend-item-".concat(m)},Fy(r.props,h,m)),le.createElement(TT,{width:o,height:o,viewBox:d,style:p},r.renderIcon(h)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(y,h,m):y))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(x.PureComponent);$y(jM,"displayName","Legend");$y(jM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var H_,A3;function qpe(){if(A3)return H_;A3=1;var t=SS();function e(){this.__data__=new t,this.size=0}return H_=e,H_}var V_,C3;function Upe(){if(C3)return V_;C3=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return V_=t,V_}var W_,k3;function Hpe(){if(k3)return W_;k3=1;function t(e){return this.__data__.get(e)}return W_=t,W_}var K_,T3;function Vpe(){if(T3)return K_;T3=1;function t(e){return this.__data__.has(e)}return K_=t,K_}var G_,O3;function Wpe(){if(O3)return G_;O3=1;var t=SS(),e=mM(),n=gM(),r=200;function i(s,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<r-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return G_=i,G_}var Y_,P3;function sK(){if(P3)return Y_;P3=1;var t=SS(),e=qpe(),n=Upe(),r=Hpe(),i=Vpe(),s=Wpe();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Y_=o,Y_}var X_,M3;function Kpe(){if(M3)return X_;M3=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return X_=e,X_}var J_,R3;function Gpe(){if(R3)return J_;R3=1;function t(e){return this.__data__.has(e)}return J_=t,J_}var Z_,D3;function aK(){if(D3)return Z_;D3=1;var t=gM(),e=Kpe(),n=Gpe();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Z_=r,Z_}var Q_,I3;function oK(){if(I3)return Q_;I3=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Q_=t,Q_}var eE,L3;function lK(){if(L3)return eE;L3=1;function t(e,n){return e.has(n)}return eE=t,eE}var tE,F3;function cK(){if(F3)return tE;F3=1;var t=aK(),e=oK(),n=lK(),r=1,i=2;function s(o,l,c,u,d,f){var p=c&r,h=o.length,m=l.length;if(h!=m&&!(p&&m>h))return!1;var g=f.get(o),v=f.get(l);if(g&&v)return g==l&&v==o;var y=-1,b=!0,N=c&i?new t:void 0;for(f.set(o,l),f.set(l,o);++y<h;){var S=o[y],E=l[y];if(u)var C=p?u(E,S,y,l,o,f):u(S,E,y,o,l,f);if(C!==void 0){if(C)continue;b=!1;break}if(N){if(!e(l,function(T,_){if(!n(N,_)&&(S===T||d(S,T,c,u,f)))return N.push(_)})){b=!1;break}}else if(!(S===E||d(S,E,c,u,f))){b=!1;break}}return f.delete(o),f.delete(l),b}return tE=s,tE}var nE,B3;function Ype(){if(B3)return nE;B3=1;var t=vc(),e=t.Uint8Array;return nE=e,nE}var rE,$3;function Xpe(){if($3)return rE;$3=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return rE=t,rE}var iE,z3;function _M(){if(z3)return iE;z3=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return iE=t,iE}var sE,q3;function Jpe(){if(q3)return sE;q3=1;var t=ib(),e=Ype(),n=pM(),r=cK(),i=Xpe(),s=_M(),o=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",p="[object Number]",h="[object RegExp]",m="[object Set]",g="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",N=t?t.prototype:void 0,S=N?N.valueOf:void 0;function E(C,T,_,j,P,k,O){switch(_){case b:if(C.byteLength!=T.byteLength||C.byteOffset!=T.byteOffset)return!1;C=C.buffer,T=T.buffer;case y:return!(C.byteLength!=T.byteLength||!k(new e(C),new e(T)));case c:case u:case p:return n(+C,+T);case d:return C.name==T.name&&C.message==T.message;case h:case g:return C==T+"";case f:var M=i;case m:var I=j&o;if(M||(M=s),C.size!=T.size&&!I)return!1;var B=O.get(C);if(B)return B==T;j|=l,O.set(C,T);var U=r(M(C),M(T),j,P,k,O);return O.delete(C),U;case v:if(S)return S.call(C)==S.call(T)}return!1}return sE=E,sE}var aE,U3;function uK(){if(U3)return aE;U3=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return aE=t,aE}var oE,H3;function Zpe(){if(H3)return oE;H3=1;var t=uK(),e=Ta();function n(r,i,s){var o=i(r);return e(r)?o:t(o,s(r))}return oE=n,oE}var lE,V3;function Qpe(){if(V3)return lE;V3=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var l=e[r];n(l,r,e)&&(o[s++]=l)}return o}return lE=t,lE}var cE,W3;function eme(){if(W3)return cE;W3=1;function t(){return[]}return cE=t,cE}var uE,K3;function tme(){if(K3)return uE;K3=1;var t=Qpe(),e=eme(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return r.call(o,l)}))}:e;return uE=s,uE}var dE,G3;function nme(){if(G3)return dE;G3=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return dE=t,dE}var fE,Y3;function rme(){if(Y3)return fE;Y3=1;var t=_u(),e=Eu(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return fE=r,fE}var hE,X3;function EM(){if(X3)return hE;X3=1;var t=rme(),e=Eu(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return hE=s,hE}var Hv={exports:{}},pE,J3;function ime(){if(J3)return pE;J3=1;function t(){return!1}return pE=t,pE}Hv.exports;var Z3;function dK(){return Z3||(Z3=1,(function(t,e){var n=vc(),r=ime(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(Hv,Hv.exports)),Hv.exports}var mE,Q3;function AM(){if(Q3)return mE;Q3=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return mE=n,mE}var gE,eF;function CM(){if(eF)return gE;eF=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return gE=e,gE}var vE,tF;function sme(){if(tF)return vE;tF=1;var t=_u(),e=CM(),n=Eu(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",p="[object RegExp]",h="[object Set]",m="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",N="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",T="[object Uint8Array]",_="[object Uint8ClampedArray]",j="[object Uint16Array]",P="[object Uint32Array]",k={};k[b]=k[N]=k[S]=k[E]=k[C]=k[T]=k[_]=k[j]=k[P]=!0,k[r]=k[i]=k[v]=k[s]=k[y]=k[o]=k[l]=k[c]=k[u]=k[d]=k[f]=k[p]=k[h]=k[m]=k[g]=!1;function O(M){return n(M)&&e(M.length)&&!!k[t(M)]}return vE=O,vE}var yE,nF;function fK(){if(nF)return yE;nF=1;function t(e){return function(n){return e(n)}}return yE=t,yE}var Vv={exports:{}};Vv.exports;var rF;function ame(){return rF||(rF=1,(function(t,e){var n=OW(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(Vv,Vv.exports)),Vv.exports}var xE,iF;function hK(){if(iF)return xE;iF=1;var t=sme(),e=fK(),n=ame(),r=n&&n.isTypedArray,i=r?e(r):t;return xE=i,xE}var bE,sF;function ome(){if(sF)return bE;sF=1;var t=nme(),e=EM(),n=Ta(),r=dK(),i=AM(),s=hK(),o=Object.prototype,l=o.hasOwnProperty;function c(u,d){var f=n(u),p=!f&&e(u),h=!f&&!p&&r(u),m=!f&&!p&&!h&&s(u),g=f||p||h||m,v=g?t(u.length,String):[],y=v.length;for(var b in u)(d||l.call(u,b))&&!(g&&(b=="length"||h&&(b=="offset"||b=="parent")||m&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,y)))&&v.push(b);return v}return bE=c,bE}var wE,aF;function lme(){if(aF)return wE;aF=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return wE=e,wE}var NE,oF;function pK(){if(oF)return NE;oF=1;function t(e,n){return function(r){return e(n(r))}}return NE=t,NE}var SE,lF;function cme(){if(lF)return SE;lF=1;var t=pK(),e=t(Object.keys,Object);return SE=e,SE}var jE,cF;function ume(){if(cF)return jE;cF=1;var t=lme(),e=cme(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return jE=i,jE}var _E,uF;function sb(){if(uF)return _E;uF=1;var t=hM(),e=CM();function n(r){return r!=null&&e(r.length)&&!t(r)}return _E=n,_E}var EE,dF;function OS(){if(dF)return EE;dF=1;var t=ome(),e=ume(),n=sb();function r(i){return n(i)?t(i):e(i)}return EE=r,EE}var AE,fF;function dme(){if(fF)return AE;fF=1;var t=Zpe(),e=tme(),n=OS();function r(i){return t(i,n,e)}return AE=r,AE}var CE,hF;function fme(){if(hF)return CE;hF=1;var t=dme(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,c,u,d){var f=l&e,p=t(s),h=p.length,m=t(o),g=m.length;if(h!=g&&!f)return!1;for(var v=h;v--;){var y=p[v];if(!(f?y in o:r.call(o,y)))return!1}var b=d.get(s),N=d.get(o);if(b&&N)return b==o&&N==s;var S=!0;d.set(s,o),d.set(o,s);for(var E=f;++v<h;){y=p[v];var C=s[y],T=o[y];if(c)var _=f?c(T,C,y,o,s,d):c(C,T,y,s,o,d);if(!(_===void 0?C===T||u(C,T,l,c,d):_)){S=!1;break}E||(E=y=="constructor")}if(S&&!E){var j=s.constructor,P=o.constructor;j!=P&&"constructor"in s&&"constructor"in o&&!(typeof j=="function"&&j instanceof j&&typeof P=="function"&&P instanceof P)&&(S=!1)}return d.delete(s),d.delete(o),S}return CE=i,CE}var kE,pF;function hme(){if(pF)return kE;pF=1;var t=ep(),e=vc(),n=t(e,"DataView");return kE=n,kE}var TE,mF;function pme(){if(mF)return TE;mF=1;var t=ep(),e=vc(),n=t(e,"Promise");return TE=n,TE}var OE,gF;function mK(){if(gF)return OE;gF=1;var t=ep(),e=vc(),n=t(e,"Set");return OE=n,OE}var PE,vF;function mme(){if(vF)return PE;vF=1;var t=ep(),e=vc(),n=t(e,"WeakMap");return PE=n,PE}var ME,yF;function gme(){if(yF)return ME;yF=1;var t=hme(),e=mM(),n=pme(),r=mK(),i=mme(),s=_u(),o=PW(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",h=o(t),m=o(e),g=o(n),v=o(r),y=o(i),b=s;return(t&&b(new t(new ArrayBuffer(1)))!=p||e&&b(new e)!=l||n&&b(n.resolve())!=u||r&&b(new r)!=d||i&&b(new i)!=f)&&(b=function(N){var S=s(N),E=S==c?N.constructor:void 0,C=E?o(E):"";if(C)switch(C){case h:return p;case m:return l;case g:return u;case v:return d;case y:return f}return S}),ME=b,ME}var RE,xF;function vme(){if(xF)return RE;xF=1;var t=sK(),e=cK(),n=Jpe(),r=fme(),i=gme(),s=Ta(),o=dK(),l=hK(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype,h=p.hasOwnProperty;function m(g,v,y,b,N,S){var E=s(g),C=s(v),T=E?d:i(g),_=C?d:i(v);T=T==u?f:T,_=_==u?f:_;var j=T==f,P=_==f,k=T==_;if(k&&o(g)){if(!o(v))return!1;E=!0,j=!1}if(k&&!j)return S||(S=new t),E||l(g)?e(g,v,y,b,N,S):n(g,v,T,y,b,N,S);if(!(y&c)){var O=j&&h.call(g,"__wrapped__"),M=P&&h.call(v,"__wrapped__");if(O||M){var I=O?g.value():g,B=M?v.value():v;return S||(S=new t),N(I,B,y,b,S)}}return k?(S||(S=new t),r(g,v,y,b,N,S)):!1}return RE=m,RE}var DE,bF;function kM(){if(bF)return DE;bF=1;var t=vme(),e=Eu();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,o,n,l)}return DE=n,DE}var IE,wF;function yme(){if(wF)return IE;wF=1;var t=sK(),e=kM(),n=1,r=2;function i(s,o,l,c){var u=l.length,d=u,f=!c;if(s==null)return!d;for(s=Object(s);u--;){var p=l[u];if(f&&p[2]?p[1]!==s[p[0]]:!(p[0]in s))return!1}for(;++u<d;){p=l[u];var h=p[0],m=s[h],g=p[1];if(f&&p[2]){if(m===void 0&&!(h in s))return!1}else{var v=new t;if(c)var y=c(m,g,h,s,o,v);if(!(y===void 0?e(g,m,n|r,c,v):y))return!1}}return!0}return IE=i,IE}var LE,NF;function gK(){if(NF)return LE;NF=1;var t=sf();function e(n){return n===n&&!t(n)}return LE=e,LE}var FE,SF;function xme(){if(SF)return FE;SF=1;var t=gK(),e=OS();function n(r){for(var i=e(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,t(l)]}return i}return FE=n,FE}var BE,jF;function vK(){if(jF)return BE;jF=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return BE=t,BE}var $E,_F;function bme(){if(_F)return $E;_F=1;var t=yme(),e=xme(),n=vK();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return $E=r,$E}var zE,EF;function wme(){if(EF)return zE;EF=1;function t(e,n){return e!=null&&n in Object(e)}return zE=t,zE}var qE,AF;function Nme(){if(AF)return qE;AF=1;var t=DW(),e=EM(),n=Ta(),r=AM(),i=CM(),s=_S();function o(l,c,u){c=t(c,l);for(var d=-1,f=c.length,p=!1;++d<f;){var h=s(c[d]);if(!(p=l!=null&&u(l,h)))break;l=l[h]}return p||++d!=f?p:(f=l==null?0:l.length,!!f&&i(f)&&r(h,f)&&(n(l)||e(l)))}return qE=o,qE}var UE,CF;function Sme(){if(CF)return UE;CF=1;var t=wme(),e=Nme();function n(r,i){return r!=null&&e(r,i,t)}return UE=n,UE}var HE,kF;function jme(){if(kF)return HE;kF=1;var t=kM(),e=IW(),n=Sme(),r=fM(),i=gK(),s=vK(),o=_S(),l=1,c=2;function u(d,f){return r(d)&&i(f)?s(o(d),f):function(p){var h=e(p,d);return h===void 0&&h===f?n(p,d):t(f,h,l|c)}}return HE=u,HE}var VE,TF;function Ig(){if(TF)return VE;TF=1;function t(e){return e}return VE=t,VE}var WE,OF;function _me(){if(OF)return WE;OF=1;function t(e){return function(n){return n?.[e]}}return WE=t,WE}var KE,PF;function Eme(){if(PF)return KE;PF=1;var t=yM();function e(n){return function(r){return t(r,n)}}return KE=e,KE}var GE,MF;function Ame(){if(MF)return GE;MF=1;var t=_me(),e=Eme(),n=fM(),r=_S();function i(s){return n(s)?t(r(s)):e(s)}return GE=i,GE}var YE,RF;function af(){if(RF)return YE;RF=1;var t=bme(),e=jme(),n=Ig(),r=Ta(),i=Ame();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return YE=s,YE}var XE,DF;function yK(){if(DF)return XE;DF=1;function t(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return XE=t,XE}var JE,IF;function Cme(){if(IF)return JE;IF=1;function t(e){return e!==e}return JE=t,JE}var ZE,LF;function kme(){if(LF)return ZE;LF=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return ZE=t,ZE}var QE,FF;function Tme(){if(FF)return QE;FF=1;var t=yK(),e=Cme(),n=kme();function r(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return QE=r,QE}var eA,BF;function Ome(){if(BF)return eA;BF=1;var t=Tme();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return eA=e,eA}var tA,$F;function Pme(){if($F)return tA;$F=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return tA=t,tA}var nA,zF;function Mme(){if(zF)return nA;zF=1;function t(){}return nA=t,nA}var rA,qF;function Rme(){if(qF)return rA;qF=1;var t=mK(),e=Mme(),n=_M(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return rA=i,rA}var iA,UF;function Dme(){if(UF)return iA;UF=1;var t=aK(),e=Ome(),n=Pme(),r=lK(),i=Rme(),s=_M(),o=200;function l(c,u,d){var f=-1,p=e,h=c.length,m=!0,g=[],v=g;if(d)m=!1,p=n;else if(h>=o){var y=u?null:i(c);if(y)return s(y);m=!1,p=r,v=new t}else v=u?[]:g;e:for(;++f<h;){var b=c[f],N=u?u(b):b;if(b=d||b!==0?b:0,m&&N===N){for(var S=v.length;S--;)if(v[S]===N)continue e;u&&v.push(N),g.push(b)}else p(v,N,d)||(v!==g&&v.push(N),g.push(b))}return g}return iA=l,iA}var sA,HF;function Ime(){if(HF)return sA;HF=1;var t=af(),e=Dme();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return sA=n,sA}var Lme=Ime();const VF=jr(Lme);function xK(t,e,n){return e===!0?VF(t,n):Cn(e)?VF(t,e):t}function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(t)}var Fme=["ref"];function WF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(n),!0).forEach(function(r){PS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wK(r.key),r)}}function $me(t,e,n){return e&&KF(t.prototype,e),n&&KF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zme(t,e,n){return e=q1(e),qme(t,bK()?Reflect.construct(e,n||[],q1(t).constructor):e.apply(t,n))}function qme(t,e){if(e&&($m(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ume(t)}function Ume(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bK=function(){return!!t})()}function q1(t){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q1(t)}function Hme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BT(t,e)}function BT(t,e){return BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BT(t,e)}function PS(t,e,n){return e=wK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wK(t){var e=Vme(t,"string");return $m(e)=="symbol"?e:e+""}function Vme(t,e){if($m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Wme(t,e){if(t==null)return{};var n=Kme(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gme(t){return t.value}function Yme(t,e){if(le.isValidElement(t))return le.cloneElement(t,e);if(typeof t=="function")return le.createElement(t,e);e.ref;var n=Wme(e,Fme);return le.createElement(jM,n)}var GF=1,uu=(function(t){function e(){var n;Bme(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=zme(this,e,[].concat(i)),PS(n,"lastBoundingBox",{width:-1,height:-1}),n}return Hme(e,t),$me(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>GF||Math.abs(i.height-this.lastBoundingBox.height)>GF)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Lc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var m=this.getBBoxSnapshot();p={top:((d||0)-m.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Lc(Lc({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=Lc(Lc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return le.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},Yme(s,Lc(Lc({},this.props),{},{payload:xK(d,u,Gme)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Lc(Lc({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&dt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])})(x.PureComponent);PS(uu,"displayName","Legend");PS(uu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aA,YF;function Xme(){if(YF)return aA;YF=1;var t=ib(),e=EM(),n=Ta(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return aA=i,aA}var oA,XF;function NK(){if(XF)return oA;XF=1;var t=uK(),e=Xme();function n(r,i,s,o,l){var c=-1,u=r.length;for(s||(s=e),l||(l=[]);++c<u;){var d=r[c];i>0&&s(d)?i>1?n(d,i-1,s,o,l):t(l,d):o||(l[l.length]=d)}return l}return oA=n,oA}var lA,JF;function Jme(){if(JF)return lA;JF=1;function t(e){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var u=l[e?c:++s];if(r(o[u],u,o)===!1)break}return n}}return lA=t,lA}var cA,ZF;function Zme(){if(ZF)return cA;ZF=1;var t=Jme(),e=t();return cA=e,cA}var uA,QF;function SK(){if(QF)return uA;QF=1;var t=Zme(),e=OS();function n(r,i){return r&&t(r,i,e)}return uA=n,uA}var dA,e6;function Qme(){if(e6)return dA;e6=1;var t=sb();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=r?o:-1,c=Object(i);(r?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return dA=e,dA}var fA,t6;function TM(){if(t6)return fA;t6=1;var t=SK(),e=Qme(),n=e(t);return fA=n,fA}var hA,n6;function jK(){if(n6)return hA;n6=1;var t=TM(),e=sb();function n(r,i){var s=-1,o=e(r)?Array(r.length):[];return t(r,function(l,c,u){o[++s]=i(l,c,u)}),o}return hA=n,hA}var pA,r6;function ege(){if(r6)return pA;r6=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return pA=t,pA}var mA,i6;function tge(){if(i6)return mA;i6=1;var t=Mg();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=t(n),c=r!==void 0,u=r===null,d=r===r,f=t(r);if(!u&&!f&&!l&&n>r||l&&c&&d&&!u&&!f||s&&c&&d||!i&&d||!o)return 1;if(!s&&!l&&!f&&n<r||f&&i&&o&&!s&&!l||u&&i&&o||!c&&o||!d)return-1}return 0}return mA=e,mA}var gA,s6;function nge(){if(s6)return gA;s6=1;var t=tge();function e(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,c=o.length,u=i.length;++s<c;){var d=t(o[s],l[s]);if(d){if(s>=u)return d;var f=i[s];return d*(f=="desc"?-1:1)}}return n.index-r.index}return gA=e,gA}var vA,a6;function rge(){if(a6)return vA;a6=1;var t=vM(),e=yM(),n=af(),r=jK(),i=ege(),s=fK(),o=nge(),l=Ig(),c=Ta();function u(d,f,p){f.length?f=t(f,function(g){return c(g)?function(v){return e(v,g.length===1?g[0]:g)}:g}):f=[l];var h=-1;f=t(f,s(n));var m=r(d,function(g,v,y){var b=t(f,function(N){return N(g)});return{criteria:b,index:++h,value:g}});return i(m,function(g,v){return o(g,v,p)})}return vA=u,vA}var yA,o6;function ige(){if(o6)return yA;o6=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return yA=t,yA}var xA,l6;function sge(){if(l6)return xA;l6=1;var t=ige(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),u=Array(c);++l<c;)u[l]=o[i+l];l=-1;for(var d=Array(i+1);++l<i;)d[l]=o[l];return d[i]=s(u),t(r,this,d)}}return xA=n,xA}var bA,c6;function age(){if(c6)return bA;c6=1;function t(e){return function(){return e}}return bA=t,bA}var wA,u6;function _K(){if(u6)return wA;u6=1;var t=ep(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return wA=e,wA}var NA,d6;function oge(){if(d6)return NA;d6=1;var t=age(),e=_K(),n=Ig(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return NA=r,NA}var SA,f6;function lge(){if(f6)return SA;f6=1;var t=800,e=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),c=e-(l-o);if(o=l,c>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return SA=r,SA}var jA,h6;function cge(){if(h6)return jA;h6=1;var t=oge(),e=lge(),n=e(t);return jA=n,jA}var _A,p6;function uge(){if(p6)return _A;p6=1;var t=Ig(),e=sge(),n=cge();function r(i,s){return n(e(i,s,t),i+"")}return _A=r,_A}var EA,m6;function MS(){if(m6)return EA;m6=1;var t=pM(),e=sb(),n=AM(),r=sf();function i(s,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?e(l)&&n(o,l.length):c=="string"&&o in l)?t(l[o],s):!1}return EA=i,EA}var AA,g6;function dge(){if(g6)return AA;g6=1;var t=NK(),e=rge(),n=uge(),r=MS(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return AA=i,AA}var fge=dge();const OM=jr(fge);function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function $T(){return $T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$T.apply(this,arguments)}function hge(t,e){return vge(t)||gge(t,e)||mge(t,e)||pge()}function pge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mge(t,e){if(t){if(typeof t=="string")return v6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v6(t,e)}}function v6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function vge(t){if(Array.isArray(t))return t}function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){yge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yge(t,e,n){return e=xge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xge(t){var e=bge(t,"string");return zy(e)=="symbol"?e:e+""}function bge(t,e){if(zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wge(t){return Array.isArray(t)&&Ji(t[0])&&Ji(t[1])?t.join(" ~ "):t}var Nge=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,p=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,g=e.label,v=e.labelFormatter,y=e.accessibilityLayer,b=y===void 0?!1:y,N=function(){if(d&&d.length){var O={padding:0,margin:0},M=(p?OM(d,p):d).map(function(I,B){if(I.type==="none")return null;var U=CA({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),D=I.formatter||f||wge,z=I.value,H=I.name,ee=z,ae=H;if(D&&ee!=null&&ae!=null){var F=D(z,H,I,B,d);if(Array.isArray(F)){var q=hge(F,2);ee=q[0],ae=q[1]}else ee=F}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:U},Ji(ae)?le.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,Ji(ae)?le.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,le.createElement("span",{className:"recharts-tooltip-item-value"},ee),le.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:O},M)}return null},S=CA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),E=CA({margin:0},u),C=!wn(g),T=C?g:"",_=Bn("recharts-default-tooltip",h),j=Bn("recharts-tooltip-label",m);C&&v&&d!==void 0&&d!==null&&(T=v(g,d));var P=b?{role:"status","aria-live":"assertive"}:{};return le.createElement("div",$T({className:_,style:S},P),le.createElement("p",{className:j,style:E},le.isValidElement(T)?T:"".concat(T)),N())};function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}function s0(t,e,n){return e=Sge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sge(t){var e=jge(t,"string");return qy(e)=="symbol"?e:e+""}function jge(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _v="recharts-tooltip-wrapper",_ge={visibility:"hidden"};function Ege(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Bn(_v,s0(s0(s0(s0({},"".concat(_v,"-right"),dt(n)&&e&&dt(e.x)&&n>=e.x),"".concat(_v,"-left"),dt(n)&&e&&dt(e.x)&&n<e.x),"".concat(_v,"-bottom"),dt(r)&&e&&dt(e.y)&&r>=e.y),"".concat(_v,"-top"),dt(r)&&e&&dt(e.y)&&r<e.y))}function x6(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&dt(s[r]))return s[r];var d=n[r]-l-i,f=n[r]+i;if(e[r])return o[r]?d:f;if(o[r]){var p=d,h=c[r];return p<h?Math.max(f,c[r]):Math.max(d,c[r])}var m=f+l,g=c[r]+u;return m>g?Math.max(d,c[r]):Math.max(f,c[r])}function Age(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Cge(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&n?(d=x6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=x6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Age({translateX:d,translateY:f,useTranslate3d:l})):u=_ge,{cssProperties:u,cssClasses:Ege({translateX:d,translateY:f,coordinate:n})}}function zm(t){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(t)}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){qT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AK(r.key),r)}}function Oge(t,e,n){return e&&Tge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pge(t,e,n){return e=U1(e),Mge(t,EK()?Reflect.construct(e,n||[],U1(t).constructor):e.apply(t,n))}function Mge(t,e){if(e&&(zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rge(t)}function Rge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EK=function(){return!!t})()}function U1(t){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U1(t)}function Dge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zT(t,e)}function zT(t,e){return zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zT(t,e)}function qT(t,e,n){return e=AK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AK(t){var e=Ige(t,"string");return zm(e)=="symbol"?e:e+""}function Ige(t,e){if(zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var N6=1,Lge=(function(t){function e(){var n;kge(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Pge(this,e,[].concat(i)),qT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),qT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Dge(e,t),Oge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>N6||Math.abs(r.height-this.state.lastBoundingBox.height)>N6)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,h=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,y=i.viewBox,b=i.wrapperStyle,N=Cge({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:y}),S=N.cssClasses,E=N.cssProperties,C=w6(w6({transition:p&&s?"transform ".concat(l,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return le.createElement("div",{tabIndex:-1,className:S,style:C,ref:function(_){r.wrapperNode=_}},u)}}])})(x.PureComponent),Fge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},of={isSsr:Fge()};function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(t)}function S6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(n),!0).forEach(function(r){PM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kK(r.key),r)}}function zge(t,e,n){return e&&$ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qge(t,e,n){return e=H1(e),Uge(t,CK()?Reflect.construct(e,n||[],H1(t).constructor):e.apply(t,n))}function Uge(t,e){if(e&&(qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hge(t)}function Hge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CK=function(){return!!t})()}function H1(t){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H1(t)}function Vge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UT(t,e)}function PM(t,e,n){return e=kK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kK(t){var e=Wge(t,"string");return qm(e)=="symbol"?e:e+""}function Wge(t,e){if(qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Kge(t){return t.dataKey}function Gge(t,e){return le.isValidElement(t)?le.cloneElement(t,e):typeof t=="function"?le.createElement(t,e):le.createElement(Nge,e)}var wa=(function(t){function e(){return Bge(this,e),qge(this,e,arguments)}return Vge(e,t),zge(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,h=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,y=i.reverseDirection,b=i.useTranslate3d,N=i.viewBox,S=i.wrapperStyle,E=m??[];f&&E.length&&(E=xK(m.filter(function(T){return T.value!=null&&(T.hide!==!0||r.props.includeHidden)}),g,Kge));var C=E.length>0;return le.createElement(Lge,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:s,coordinate:d,hasPayload:C,offset:h,position:v,reverseDirection:y,useTranslate3d:b,viewBox:N,wrapperStyle:S},Gge(u,j6(j6({},this.props),{},{payload:E})))}}])})(x.PureComponent);PM(wa,"displayName","Tooltip");PM(wa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!of.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var kA,_6;function Yge(){if(_6)return kA;_6=1;var t=vc(),e=function(){return t.Date.now()};return kA=e,kA}var TA,E6;function Xge(){if(E6)return TA;E6=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return TA=e,TA}var OA,A6;function Jge(){if(A6)return OA;A6=1;var t=Xge(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return OA=n,OA}var PA,C6;function TK(){if(C6)return PA;C6=1;var t=Jge(),e=sf(),n=Mg(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=s.test(u);return f||o.test(u)?l(u.slice(2),f?2:8):i.test(u)?r:+u}return PA=c,PA}var MA,k6;function Zge(){if(k6)return MA;k6=1;var t=sf(),e=Yge(),n=TK(),r="Expected a function",i=Math.max,s=Math.min;function o(l,c,u){var d,f,p,h,m,g,v=0,y=!1,b=!1,N=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,t(u)&&(y=!!u.leading,b="maxWait"in u,p=b?i(n(u.maxWait)||0,c):p,N="trailing"in u?!!u.trailing:N);function S(M){var I=d,B=f;return d=f=void 0,v=M,h=l.apply(B,I),h}function E(M){return v=M,m=setTimeout(_,c),y?S(M):h}function C(M){var I=M-g,B=M-v,U=c-I;return b?s(U,p-B):U}function T(M){var I=M-g,B=M-v;return g===void 0||I>=c||I<0||b&&B>=p}function _(){var M=e();if(T(M))return j(M);m=setTimeout(_,C(M))}function j(M){return m=void 0,N&&d?S(M):(d=f=void 0,h)}function P(){m!==void 0&&clearTimeout(m),v=0,d=g=f=m=void 0}function k(){return m===void 0?h:j(e())}function O(){var M=e(),I=T(M);if(d=arguments,f=this,g=M,I){if(m===void 0)return E(g);if(b)return clearTimeout(m),m=setTimeout(_,c),S(g)}return m===void 0&&(m=setTimeout(_,c)),h}return O.cancel=P,O.flush=k,O}return MA=o,MA}var RA,T6;function Qge(){if(T6)return RA;T6=1;var t=Zge(),e=sf(),n="Expected a function";function r(i,s,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,s,{leading:l,maxWait:s,trailing:c})}return RA=r,RA}var eve=Qge();const OK=jr(eve);function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function O6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(n),!0).forEach(function(r){tve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tve(t,e,n){return e=nve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nve(t){var e=rve(t,"string");return Uy(e)=="symbol"?e:e+""}function rve(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ive(t,e){return lve(t)||ove(t,e)||ave(t,e)||sve()}function sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ave(t,e){if(t){if(typeof t=="string")return P6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P6(t,e)}}function P6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ove(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function lve(t){if(Array.isArray(t))return t}var iy=x.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,h=t.children,m=t.debounce,g=m===void 0?0:m,v=t.id,y=t.className,b=t.onResize,N=t.style,S=N===void 0?{}:N,E=x.useRef(null),C=x.useRef();C.current=b,x.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var T=x.useState({containerWidth:i.width,containerHeight:i.height}),_=ive(T,2),j=_[0],P=_[1],k=x.useCallback(function(M,I){P(function(B){var U=Math.round(M),D=Math.round(I);return B.containerWidth===U&&B.containerHeight===D?B:{containerWidth:U,containerHeight:D}})},[]);x.useEffect(function(){var M=function(H){var ee,ae=H[0].contentRect,F=ae.width,q=ae.height;k(F,q),(ee=C.current)===null||ee===void 0||ee.call(C,F,q)};g>0&&(M=OK(M,g,{trailing:!0,leading:!1}));var I=new ResizeObserver(M),B=E.current.getBoundingClientRect(),U=B.width,D=B.height;return k(U,D),I.observe(E.current),function(){I.disconnect()}},[k,g]);var O=x.useMemo(function(){var M=j.containerWidth,I=j.containerHeight;if(M<0||I<0)return null;cu(Yf(o)||Yf(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),cu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=Yf(o)?M:o,U=Yf(c)?I:c;n&&n>0&&(B?U=B/n:U&&(B=U*n),p&&U>p&&(U=p)),cu(B>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,U,o,c,d,f,n);var D=!Array.isArray(h)&&lu(h.type).endsWith("Chart");return le.Children.map(h,function(z){return le.isValidElement(z)?x.cloneElement(z,a0({width:B,height:U},D?{style:a0({height:"100%",width:"100%",maxHeight:U,maxWidth:B},z.props.style)}:{})):z})},[n,h,c,p,f,d,j,o]);return le.createElement("div",{id:v?"".concat(v):void 0,className:Bn("recharts-responsive-container",y),style:a0(a0({},S),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:E},O)}),Ed=function(e){return null};Ed.displayName="Cell";function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){cve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cve(t,e,n){return e=uve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uve(t){var e=dve(t,"string");return Hy(e)=="symbol"?e:e+""}function dve(t,e){if(Hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _p={widthCache:{},cacheCount:0},fve=2e3,hve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},R6="recharts_measurement_span";function pve(t){var e=HT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var sy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||of.isSsr)return{width:0,height:0};var r=pve(n),i=JSON.stringify({text:e,copyStyle:r});if(_p.widthCache[i])return _p.widthCache[i];try{var s=document.getElementById(R6);s||(s=document.createElement("span"),s.setAttribute("id",R6),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=HT(HT({},hve),r);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return _p.widthCache[i]=c,++_p.cacheCount>fve&&(_p.cacheCount=0,_p.widthCache={}),c}catch{return{width:0,height:0}}},mve=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function V1(t,e){return xve(t)||yve(t,e)||vve(t,e)||gve()}function gve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vve(t,e){if(t){if(typeof t=="string")return D6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D6(t,e)}}function D6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function xve(t){if(Array.isArray(t))return t}function bve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nve(r.key),r)}}function wve(t,e,n){return e&&I6(t.prototype,e),n&&I6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nve(t){var e=Sve(t,"string");return Vy(e)=="symbol"?e:e+""}function Sve(t,e){if(Vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var L6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,F6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_ve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Eve=Object.keys(PK),Qp="NaN";function Ave(t,e){return t*PK[e]}var o0=(function(){function t(e,n){bve(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!jve.test(n)&&(this.num=NaN,this.unit=""),Eve.includes(n)&&(this.num=Ave(e,n),this.unit="px")}return wve(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=_ve.exec(n))!==null&&r!==void 0?r:[],s=V1(i,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])})();function MK(t){if(t.includes(Qp))return Qp;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=L6.exec(e))!==null&&n!==void 0?n:[],i=V1(r,4),s=i[1],o=i[2],l=i[3],c=o0.parse(s??""),u=o0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Qp;e=e.replace(L6,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=F6.exec(e))!==null&&f!==void 0?f:[],h=V1(p,4),m=h[1],g=h[2],v=h[3],y=o0.parse(m??""),b=o0.parse(v??""),N=g==="+"?y.add(b):y.subtract(b);if(N.isNaN())return Qp;e=e.replace(F6,N.toString())}return e}var B6=/\(([^()]*)\)/;function Cve(t){for(var e=t;e.includes("(");){var n=B6.exec(e),r=V1(n,2),i=r[1];e=e.replace(B6,MK(i))}return e}function kve(t){var e=t.replace(/\s+/g,"");return e=Cve(e),e=MK(e),e}function Tve(t){try{return kve(t)}catch{return Qp}}function DA(t){var e=Tve(t.slice(5,-1));return e===Qp?"":e}var Ove=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Pve=["dx","dy","angle","className","breakAll"];function VT(){return VT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VT.apply(this,arguments)}function $6(t,e){if(t==null)return{};var n=Mve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z6(t,e){return Lve(t)||Ive(t,e)||Dve(t,e)||Rve()}function Rve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(t,e){if(t){if(typeof t=="string")return q6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q6(t,e)}}function q6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ive(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Lve(t){if(Array.isArray(t))return t}var RK=/[ \f\n\r\t\v\u2028\u2029]+/,DK=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];wn(n)||(r?s=n.toString().split(""):s=n.toString().split(RK));var o=s.map(function(c){return{word:c,width:sy(c,i).width}}),l=r?0:sy(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Fve=function(e,n,r,i,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=dt(o),f=l,p=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(U,D){var z=D.word,H=D.width,ee=U[U.length-1];if(ee&&(i==null||s||ee.width+H+r<Number(i)))ee.words.push(z),ee.width+=H+r;else{var ae={words:[z],width:H};U.push(ae)}return U},[])},h=p(n),m=function(B){return B.reduce(function(U,D){return U.width>D.width?U:D})};if(!d)return h;for(var g="…",v=function(B){var U=f.slice(0,B),D=DK({breakAll:u,style:c,children:U+g}).wordsWithComputedWidth,z=p(D),H=z.length>o||m(z).width>Number(i);return[H,z]},y=0,b=f.length-1,N=0,S;y<=b&&N<=f.length-1;){var E=Math.floor((y+b)/2),C=E-1,T=v(C),_=z6(T,2),j=_[0],P=_[1],k=v(E),O=z6(k,1),M=O[0];if(!j&&!M&&(y=E+1),j&&M&&(b=E-1),!j&&M){S=P;break}N++}return S||h},U6=function(e){var n=wn(e)?[]:e.toString().split(RK);return[{words:n}]},Bve=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!of.isSsr){var c,u,d=DK({breakAll:o,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return U6(i);return Fve({breakAll:o,children:i,maxLines:l,style:s},c,u,n,r)}return U6(i)},H6="#808080",W1=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,h=p===void 0?"start":p,m=e.verticalAnchor,g=m===void 0?"end":m,v=e.fill,y=v===void 0?H6:v,b=$6(e,Ove),N=x.useMemo(function(){return Bve({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),S=b.dx,E=b.dy,C=b.angle,T=b.className,_=b.breakAll,j=$6(b,Pve);if(!Ji(r)||!Ji(s))return null;var P=r+(dt(S)?S:0),k=s+(dt(E)?E:0),O;switch(g){case"start":O=DA("calc(".concat(u,")"));break;case"middle":O=DA("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=DA("calc(".concat(N.length-1," * -").concat(l,")"));break}var M=[];if(f){var I=N[0].width,B=b.width;M.push("scale(".concat((dt(B)?B/I:1)/I,")"))}return C&&M.push("rotate(".concat(C,", ").concat(P,", ").concat(k,")")),M.length&&(j.transform=M.join(" ")),le.createElement("text",VT({},_n(j,!0),{x:P,y:k,className:Bn("recharts-text",T),textAnchor:h,fill:y.includes("url")?H6:y}),N.map(function(U,D){var z=U.words.join(_?"":" ");return le.createElement("tspan",{x:P,dy:D===0?O:l,key:"".concat(z,"-").concat(D)},z)}))};function Bd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $ve(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function MM(t){let e,n,r;t.length!==2?(e=Bd,n=(l,c)=>Bd(t(l),c),r=(l,c)=>t(l)-c):(e=t===Bd||t===$ve?t:zve,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:o,right:s}}function zve(){return 0}function IK(t){return t===null?NaN:+t}function*qve(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Uve=MM(Bd),ab=Uve.right;MM(IK).center;class V6 extends Map{constructor(e,n=Wve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(W6(this,e))}has(e){return super.has(W6(this,e))}set(e,n){return super.set(Hve(this,e),n)}delete(e){return super.delete(Vve(this,e))}}function W6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Hve({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Vve({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Wve(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Kve(t=Bd){if(t===Bd)return LK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function LK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Gve=Math.sqrt(50),Yve=Math.sqrt(10),Xve=Math.sqrt(2);function K1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Gve?10:s>=Yve?5:s>=Xve?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?K1(t,e,n*2):[l,c,u]}function WT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?K1(e,t,n):K1(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function KT(t,e,n){return e=+e,t=+t,n=+n,K1(t,e,n)[2]}function GT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?KT(e,t,n):KT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function K6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function G6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function FK(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?LK:Kve(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/c+p)),m=Math.min(r,Math.floor(e+(c-u)*f/c+p));FK(t,e,h,m,i)}const s=t[e];let o=n,l=r;for(Ev(t,n,e),i(t[r],s)>0&&Ev(t,n,r);o<l;){for(Ev(t,o,l),++o,--l;i(t[o],s)<0;)++o;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Ev(t,n,l):(++l,Ev(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Ev(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Jve(t,e,n){if(t=Float64Array.from(qve(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return G6(t);if(e>=1)return K6(t);var r,i=(r-1)*e,s=Math.floor(i),o=K6(FK(t,s).subarray(0,s+1)),l=G6(t.subarray(s+1));return o+(l-o)*(i-s)}}function Zve(t,e,n=IK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return o+(l-o)*(i-s)}}function Qve(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ko(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Au(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const YT=Symbol("implicit");function RM(){var t=new V6,e=[],n=[],r=YT;function i(s){let o=t.get(s);if(o===void 0){if(r!==YT)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new V6;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return RM(e,n).unknown(r)},Ko.apply(i,arguments),i}function Wy(){var t=RM().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,h=i<r,m=h?i:r,g=h?r:i;s=(g-m)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),m+=(g-m-s*(p-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var v=Qve(p).map(function(y){return m+s*y});return n(h?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,f()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return Wy(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ko.apply(f(),arguments)}function BK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BK(e())},t}function ay(){return BK(Wy.apply(null,arguments).paddingInner(1))}function DM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $K(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ob(){}var Ky=.7,G1=1/Ky,dm="\\s*([+-]?\\d+)\\s*",Gy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eye=/^#([0-9a-f]{3,8})$/,tye=new RegExp(`^rgb\\(${dm},${dm},${dm}\\)$`),nye=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),rye=new RegExp(`^rgba\\(${dm},${dm},${dm},${Gy}\\)$`),iye=new RegExp(`^rgba\\(${rc},${rc},${rc},${Gy}\\)$`),sye=new RegExp(`^hsl\\(${Gy},${rc},${rc}\\)$`),aye=new RegExp(`^hsla\\(${Gy},${rc},${rc},${Gy}\\)$`),Y6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DM(ob,Yy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:X6,formatHex:X6,formatHex8:oye,formatHsl:lye,formatRgb:J6,toString:J6});function X6(){return this.rgb().formatHex()}function oye(){return this.rgb().formatHex8()}function lye(){return zK(this).formatHsl()}function J6(){return this.rgb().formatRgb()}function Yy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=eye.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Z6(e):n===3?new Sa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?l0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?l0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tye.exec(t))?new Sa(e[1],e[2],e[3],1):(e=nye.exec(t))?new Sa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rye.exec(t))?l0(e[1],e[2],e[3],e[4]):(e=iye.exec(t))?l0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sye.exec(t))?tB(e[1],e[2]/100,e[3]/100,1):(e=aye.exec(t))?tB(e[1],e[2]/100,e[3]/100,e[4]):Y6.hasOwnProperty(t)?Z6(Y6[t]):t==="transparent"?new Sa(NaN,NaN,NaN,0):null}function Z6(t){return new Sa(t>>16&255,t>>8&255,t&255,1)}function l0(t,e,n,r){return r<=0&&(t=e=n=NaN),new Sa(t,e,n,r)}function cye(t){return t instanceof ob||(t=Yy(t)),t?(t=t.rgb(),new Sa(t.r,t.g,t.b,t.opacity)):new Sa}function XT(t,e,n,r){return arguments.length===1?cye(t):new Sa(t,e,n,r??1)}function Sa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}DM(Sa,XT,$K(ob,{brighter(t){return t=t==null?G1:Math.pow(G1,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ky:Math.pow(Ky,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Sa(mh(this.r),mh(this.g),mh(this.b),Y1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Q6,formatHex:Q6,formatHex8:uye,formatRgb:eB,toString:eB}));function Q6(){return`#${Xf(this.r)}${Xf(this.g)}${Xf(this.b)}`}function uye(){return`#${Xf(this.r)}${Xf(this.g)}${Xf(this.b)}${Xf((isNaN(this.opacity)?1:this.opacity)*255)}`}function eB(){const t=Y1(this.opacity);return`${t===1?"rgb(":"rgba("}${mh(this.r)}, ${mh(this.g)}, ${mh(this.b)}${t===1?")":`, ${t})`}`}function Y1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xf(t){return t=mh(t),(t<16?"0":"")+t.toString(16)}function tB(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cl(t,e,n,r)}function zK(t){if(t instanceof cl)return new cl(t.h,t.s,t.l,t.opacity);if(t instanceof ob||(t=Yy(t)),!t)return new cl;if(t instanceof cl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new cl(o,l,c,t.opacity)}function dye(t,e,n,r){return arguments.length===1?zK(t):new cl(t,e,n,r??1)}function cl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}DM(cl,dye,$K(ob,{brighter(t){return t=t==null?G1:Math.pow(G1,t),new cl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ky:Math.pow(Ky,t),new cl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Sa(IA(t>=240?t-240:t+120,i,r),IA(t,i,r),IA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new cl(nB(this.h),c0(this.s),c0(this.l),Y1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Y1(this.opacity);return`${t===1?"hsl(":"hsla("}${nB(this.h)}, ${c0(this.s)*100}%, ${c0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nB(t){return t=(t||0)%360,t<0?t+360:t}function c0(t){return Math.max(0,Math.min(1,t||0))}function IA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const IM=t=>()=>t;function fye(t,e){return function(n){return t+n*e}}function hye(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pye(t){return(t=+t)==1?qK:function(e,n){return n-e?hye(e,n,t):IM(isNaN(e)?n:e)}}function qK(t,e){var n=e-t;return n?fye(t,n):IM(isNaN(t)?e:t)}const rB=(function t(e){var n=pye(e);function r(i,s){var o=n((i=XT(i)).r,(s=XT(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=qK(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r})(1);function mye(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function gye(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vye(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Lg(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function yye(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function X1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xye(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Lg(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var JT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,LA=new RegExp(JT.source,"g");function bye(t){return function(){return t}}function wye(t){return function(e){return t(e)+""}}function Nye(t,e){var n=JT.lastIndex=LA.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=JT.exec(t))&&(i=LA.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:X1(r,i)})),n=LA.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?wye(c[0].x):bye(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Lg(t,e){var n=typeof e,r;return e==null||n==="boolean"?IM(e):(n==="number"?X1:n==="string"?(r=Yy(e))?(e=r,rB):Nye:e instanceof Yy?rB:e instanceof Date?yye:gye(e)?mye:Array.isArray(e)?vye:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xye:X1)(t,e)}function LM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Sye(t,e){e===void 0&&(e=t,t=Lg);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function jye(t){return function(){return t}}function J1(t){return+t}var iB=[0,1];function aa(t){return t}function ZT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jye(isNaN(e)?NaN:.5)}function _ye(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Eye(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=ZT(i,r),s=n(o,s)):(r=ZT(r,i),s=n(s,o)),function(l){return s(r(l))}}function Aye(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ZT(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(l){var c=ab(t,l,1,r)-1;return s[c](i[c](l))}}function lb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function RS(){var t=iB,e=iB,n=Lg,r,i,s,o=aa,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==aa&&(o=_ye(t[0],t[p-1])),l=p>2?Aye:Eye,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(r),e,n)))(r(o(p)))}return f.invert=function(p){return o(i((u||(u=l(e,t.map(r),X1)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,J1),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=LM,d()},f.clamp=function(p){return arguments.length?(o=p?!0:aa,d()):o!==aa},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(s=p,f):s},function(p,h){return r=p,i=h,d()}}function FM(){return RS()(aa,aa)}function Cye(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Z1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Um(t){return t=Z1(Math.abs(t)),t?t[1]:NaN}function kye(t,e){return function(n,r){for(var i=n.length,s=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Tye(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Oye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xy(t){if(!(e=Oye.exec(t)))throw new Error("invalid format: "+t);var e;return new BM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xy.prototype=BM.prototype;function BM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}BM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pye(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var UK;function Mye(t,e){var n=Z1(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(UK=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Z1(t,Math.max(0,e+s-1))[0]}function sB(t,e){var n=Z1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const aB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Cye,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>sB(t*100,e),r:sB,s:Mye,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oB(t){return t}var lB=Array.prototype.map,cB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Rye(t){var e=t.grouping===void 0||t.thousands===void 0?oB:kye(lB.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?oB:Tye(lB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Xy(f);var p=f.fill,h=f.align,m=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,N=f.precision,S=f.trim,E=f.type;E==="n"?(b=!0,E="g"):aB[E]||(N===void 0&&(N=12),S=!0,E="g"),(v||p==="0"&&h==="=")&&(v=!0,p="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=g==="$"?r:/[%p]/.test(E)?o:"",_=aB[E],j=/[defgprs%]/.test(E);N=N===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function P(k){var O=C,M=T,I,B,U;if(E==="c")M=_(k)+M,k="";else{k=+k;var D=k<0||1/k<0;if(k=isNaN(k)?c:_(Math.abs(k),N),S&&(k=Pye(k)),D&&+k==0&&m!=="+"&&(D=!1),O=(D?m==="("?m:l:m==="-"||m==="("?"":m)+O,M=(E==="s"?cB[8+UK/3]:"")+M+(D&&m==="("?")":""),j){for(I=-1,B=k.length;++I<B;)if(U=k.charCodeAt(I),48>U||U>57){M=(U===46?i+k.slice(I+1):k.slice(I))+M,k=k.slice(0,I);break}}}b&&!v&&(k=e(k,1/0));var z=O.length+k.length+M.length,H=z<y?new Array(y-z+1).join(p):"";switch(b&&v&&(k=e(H+k,H.length?y-M.length:1/0),H=""),h){case"<":k=O+k+M+H;break;case"=":k=O+H+k+M;break;case"^":k=H.slice(0,z=H.length>>1)+O+k+M+H.slice(z);break;default:k=H+O+k+M;break}return s(k)}return P.toString=function(){return f+""},P}function d(f,p){var h=u((f=Xy(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Um(p)/3)))*3,g=Math.pow(10,-m),v=cB[8+m/3];return function(y){return h(g*y)+v}}return{format:u,formatPrefix:d}}var u0,$M,HK;Dye({thousands:",",grouping:[3],currency:["$",""]});function Dye(t){return u0=Rye(t),$M=u0.format,HK=u0.formatPrefix,u0}function Iye(t){return Math.max(0,-Um(Math.abs(t)))}function Lye(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Um(e)/3)))*3-Um(Math.abs(t)))}function Fye(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Um(e)-Um(t))+1}function VK(t,e,n,r){var i=GT(t,e,n),s;switch(r=Xy(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Lye(i,o))&&(r.precision=s),HK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Fye(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Iye(i))&&(r.precision=s-(r.type==="%")*2);break}}return $M(r)}function lf(t){var e=t.domain;return t.ticks=function(n){var r=e();return WT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return VK(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],l=r[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=KT(o,l,n),u===c)return r[i]=o,r[s]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Q1(){var t=FM();return t.copy=function(){return lb(t,Q1())},Ko.apply(t,arguments),lf(t)}function WK(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,J1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return WK(t).unknown(e)},t=arguments.length?Array.from(t,J1):[0,1],lf(n)}function KK(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function uB(t){return Math.log(t)}function dB(t){return Math.exp(t)}function Bye(t){return-Math.log(-t)}function $ye(t){return-Math.exp(-t)}function zye(t){return isFinite(t)?+("1e"+t):t<0?0:t}function qye(t){return t===10?zye:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Uye(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function fB(t){return(e,n)=>-t(-e,n)}function zM(t){const e=t(uB,dB),n=e.domain;let r=10,i,s;function o(){return i=Uye(r),s=qye(r),n()[0]<0?(i=fB(i),s=fB(s),t(Bye,$ye)):t(uB,dB),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),m,g;const v=l==null?10:+l;let y=[];if(!(r%1)&&h-p<v){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(m=1;m<r;++m)if(g=p<0?m/s(-p):m*s(p),!(g<u)){if(g>d)break;y.push(g)}}else for(;p<=h;++p)for(m=r-1;m>=1;--m)if(g=p>0?m/s(-p):m*s(p),!(g<u)){if(g>d)break;y.push(g)}y.length*2<v&&(y=WT(u,d,v))}else y=WT(p,h,Math.min(h-p,v)).map(s);return f?y.reverse():y},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Xy(c)).precision==null&&(c.trim=!0),c=$M(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(KK(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function GK(){const t=zM(RS()).domain([1,10]);return t.copy=()=>lb(t,GK()).base(t.base()),Ko.apply(t,arguments),t}function hB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function qM(t){var e=1,n=t(hB(e),pB(e));return n.constant=function(r){return arguments.length?t(hB(e=+r),pB(e)):e},lf(n)}function YK(){var t=qM(RS());return t.copy=function(){return lb(t,YK()).constant(t.constant())},Ko.apply(t,arguments)}function mB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Hye(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Vye(t){return t<0?-t*t:t*t}function UM(t){var e=t(aa,aa),n=1;function r(){return n===1?t(aa,aa):n===.5?t(Hye,Vye):t(mB(n),mB(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},lf(e)}function HM(){var t=UM(RS());return t.copy=function(){return lb(t,HM()).exponent(t.exponent())},Ko.apply(t,arguments),t}function Wye(){return HM.apply(null,arguments).exponent(.5)}function gB(t){return Math.sign(t)*t*t}function Kye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function XK(){var t=FM(),e=[0,1],n=!1,r;function i(s){var o=Kye(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(gB(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,J1)).map(gB)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return XK(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ko.apply(i,arguments),lf(i)}function JK(){var t=[],e=[],n=[],r;function i(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=Zve(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:e[ab(n,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Bd),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return JK().domain(t).range(e).unknown(r)},Ko.apply(s,arguments)}function ZK(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[ab(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return ZK().domain([t,e]).range(i).unknown(s)},Ko.apply(lf(o),arguments)}function QK(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[ab(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return QK().domain(t).range(e).unknown(n)},Ko.apply(i,arguments)}const FA=new Date,BA=new Date;function ts(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},i.filter=s=>ts(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(FA.setTime(+s),BA.setTime(+o),t(FA),t(BA),Math.floor(n(FA,BA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const ew=ts(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ew.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ts(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ew);ew.range;const ru=1e3,Io=ru*60,iu=Io*60,xu=iu*24,VM=xu*7,vB=xu*30,$A=xu*365,Jf=ts(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ru)},(t,e)=>(e-t)/ru,t=>t.getUTCSeconds());Jf.range;const WM=ts(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ru)},(t,e)=>{t.setTime(+t+e*Io)},(t,e)=>(e-t)/Io,t=>t.getMinutes());WM.range;const KM=ts(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Io)},(t,e)=>(e-t)/Io,t=>t.getUTCMinutes());KM.range;const GM=ts(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ru-t.getMinutes()*Io)},(t,e)=>{t.setTime(+t+e*iu)},(t,e)=>(e-t)/iu,t=>t.getHours());GM.range;const YM=ts(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*iu)},(t,e)=>(e-t)/iu,t=>t.getUTCHours());YM.range;const cb=ts(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Io)/xu,t=>t.getDate()-1);cb.range;const DS=ts(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xu,t=>t.getUTCDate()-1);DS.range;const eG=ts(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xu,t=>Math.floor(t/xu));eG.range;function np(t){return ts(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Io)/VM)}const IS=np(0),tw=np(1),Gye=np(2),Yye=np(3),Hm=np(4),Xye=np(5),Jye=np(6);IS.range;tw.range;Gye.range;Yye.range;Hm.range;Xye.range;Jye.range;function rp(t){return ts(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/VM)}const LS=rp(0),nw=rp(1),Zye=rp(2),Qye=rp(3),Vm=rp(4),exe=rp(5),txe=rp(6);LS.range;nw.range;Zye.range;Qye.range;Vm.range;exe.range;txe.range;const XM=ts(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());XM.range;const JM=ts(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());JM.range;const bu=ts(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ts(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});bu.range;const wu=ts(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());wu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ts(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});wu.range;function tG(t,e,n,r,i,s){const o=[[Jf,1,ru],[Jf,5,5*ru],[Jf,15,15*ru],[Jf,30,30*ru],[s,1,Io],[s,5,5*Io],[s,15,15*Io],[s,30,30*Io],[i,1,iu],[i,3,3*iu],[i,6,6*iu],[i,12,12*iu],[r,1,xu],[r,2,2*xu],[n,1,VM],[e,1,vB],[e,3,3*vB],[t,1,$A]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return p?m.reverse():m}function c(u,d,f){const p=Math.abs(d-u)/f,h=MM(([,,v])=>v).right(o,p);if(h===o.length)return t.every(GT(u/$A,d/$A,f));if(h===0)return ew.every(Math.max(GT(u,d,f),1));const[m,g]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return m.every(g)}return[l,c]}const[nxe,rxe]=tG(wu,JM,LS,eG,YM,KM),[ixe,sxe]=tG(bu,XM,IS,cb,GM,WM);function zA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Av(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function axe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Cv(i),d=kv(i),f=Cv(s),p=kv(s),h=Cv(o),m=kv(o),g=Cv(l),v=kv(l),y=Cv(c),b=kv(c),N={a:D,A:z,b:H,B:ee,c:null,d:SB,e:SB,f:kxe,g:Bxe,G:zxe,H:Exe,I:Axe,j:Cxe,L:nG,m:Txe,M:Oxe,p:ae,q:F,Q:EB,s:AB,S:Pxe,u:Mxe,U:Rxe,V:Dxe,w:Ixe,W:Lxe,x:null,X:null,y:Fxe,Y:$xe,Z:qxe,"%":_B},S={a:q,A:Z,b:te,B:ce,c:null,d:jB,e:jB,f:Wxe,g:nbe,G:ibe,H:Uxe,I:Hxe,j:Vxe,L:iG,m:Kxe,M:Gxe,p:ue,q:ve,Q:EB,s:AB,S:Yxe,u:Xxe,U:Jxe,V:Zxe,w:Qxe,W:ebe,x:null,X:null,y:tbe,Y:rbe,Z:sbe,"%":_B},E={a:P,A:k,b:O,B:M,c:I,d:wB,e:wB,f:Nxe,g:bB,G:xB,H:NB,I:NB,j:yxe,L:wxe,m:vxe,M:xxe,p:j,q:gxe,Q:jxe,s:_xe,S:bxe,u:dxe,U:fxe,V:hxe,w:uxe,W:pxe,x:B,X:U,y:bB,Y:xB,Z:mxe,"%":Sxe};N.x=C(n,N),N.X=C(r,N),N.c=C(e,N),S.x=C(n,S),S.X=C(r,S),S.c=C(e,S);function C(oe,pe){return function(xe){var X=[],Se=-1,W=0,G=oe.length,_e,Qe,ze;for(xe instanceof Date||(xe=new Date(+xe));++Se<G;)oe.charCodeAt(Se)===37&&(X.push(oe.slice(W,Se)),(Qe=yB[_e=oe.charAt(++Se)])!=null?_e=oe.charAt(++Se):Qe=_e==="e"?" ":"0",(ze=pe[_e])&&(_e=ze(xe,Qe)),X.push(_e),W=Se+1);return X.push(oe.slice(W,Se)),X.join("")}}function T(oe,pe){return function(xe){var X=Av(1900,void 0,1),Se=_(X,oe,xe+="",0),W,G;if(Se!=xe.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(pe&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(W=qA(Av(X.y,0,1)),G=W.getUTCDay(),W=G>4||G===0?nw.ceil(W):nw(W),W=DS.offset(W,(X.V-1)*7),X.y=W.getUTCFullYear(),X.m=W.getUTCMonth(),X.d=W.getUTCDate()+(X.w+6)%7):(W=zA(Av(X.y,0,1)),G=W.getDay(),W=G>4||G===0?tw.ceil(W):tw(W),W=cb.offset(W,(X.V-1)*7),X.y=W.getFullYear(),X.m=W.getMonth(),X.d=W.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),G="Z"in X?qA(Av(X.y,0,1)).getUTCDay():zA(Av(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(G+5)%7:X.w+X.U*7-(G+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,qA(X)):zA(X)}}function _(oe,pe,xe,X){for(var Se=0,W=pe.length,G=xe.length,_e,Qe;Se<W;){if(X>=G)return-1;if(_e=pe.charCodeAt(Se++),_e===37){if(_e=pe.charAt(Se++),Qe=E[_e in yB?pe.charAt(Se++):_e],!Qe||(X=Qe(oe,xe,X))<0)return-1}else if(_e!=xe.charCodeAt(X++))return-1}return X}function j(oe,pe,xe){var X=u.exec(pe.slice(xe));return X?(oe.p=d.get(X[0].toLowerCase()),xe+X[0].length):-1}function P(oe,pe,xe){var X=h.exec(pe.slice(xe));return X?(oe.w=m.get(X[0].toLowerCase()),xe+X[0].length):-1}function k(oe,pe,xe){var X=f.exec(pe.slice(xe));return X?(oe.w=p.get(X[0].toLowerCase()),xe+X[0].length):-1}function O(oe,pe,xe){var X=y.exec(pe.slice(xe));return X?(oe.m=b.get(X[0].toLowerCase()),xe+X[0].length):-1}function M(oe,pe,xe){var X=g.exec(pe.slice(xe));return X?(oe.m=v.get(X[0].toLowerCase()),xe+X[0].length):-1}function I(oe,pe,xe){return _(oe,e,pe,xe)}function B(oe,pe,xe){return _(oe,n,pe,xe)}function U(oe,pe,xe){return _(oe,r,pe,xe)}function D(oe){return o[oe.getDay()]}function z(oe){return s[oe.getDay()]}function H(oe){return c[oe.getMonth()]}function ee(oe){return l[oe.getMonth()]}function ae(oe){return i[+(oe.getHours()>=12)]}function F(oe){return 1+~~(oe.getMonth()/3)}function q(oe){return o[oe.getUTCDay()]}function Z(oe){return s[oe.getUTCDay()]}function te(oe){return c[oe.getUTCMonth()]}function ce(oe){return l[oe.getUTCMonth()]}function ue(oe){return i[+(oe.getUTCHours()>=12)]}function ve(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var pe=C(oe+="",N);return pe.toString=function(){return oe},pe},parse:function(oe){var pe=T(oe+="",!1);return pe.toString=function(){return oe},pe},utcFormat:function(oe){var pe=C(oe+="",S);return pe.toString=function(){return oe},pe},utcParse:function(oe){var pe=T(oe+="",!0);return pe.toString=function(){return oe},pe}}}var yB={"-":"",_:" ",0:"0"},fs=/^\s*\d+/,oxe=/^%/,lxe=/[\\^$*+?|[\]().{}]/g;function sr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function cxe(t){return t.replace(lxe,"\\$&")}function Cv(t){return new RegExp("^(?:"+t.map(cxe).join("|")+")","i")}function kv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function uxe(t,e,n){var r=fs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function dxe(t,e,n){var r=fs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function fxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function hxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function pxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function xB(t,e,n){var r=fs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bB(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mxe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gxe(t,e,n){var r=fs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function vxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wB(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yxe(t,e,n){var r=fs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function NB(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function bxe(t,e,n){var r=fs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function wxe(t,e,n){var r=fs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Nxe(t,e,n){var r=fs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Sxe(t,e,n){var r=oxe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function jxe(t,e,n){var r=fs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _xe(t,e,n){var r=fs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function SB(t,e){return sr(t.getDate(),e,2)}function Exe(t,e){return sr(t.getHours(),e,2)}function Axe(t,e){return sr(t.getHours()%12||12,e,2)}function Cxe(t,e){return sr(1+cb.count(bu(t),t),e,3)}function nG(t,e){return sr(t.getMilliseconds(),e,3)}function kxe(t,e){return nG(t,e)+"000"}function Txe(t,e){return sr(t.getMonth()+1,e,2)}function Oxe(t,e){return sr(t.getMinutes(),e,2)}function Pxe(t,e){return sr(t.getSeconds(),e,2)}function Mxe(t){var e=t.getDay();return e===0?7:e}function Rxe(t,e){return sr(IS.count(bu(t)-1,t),e,2)}function rG(t){var e=t.getDay();return e>=4||e===0?Hm(t):Hm.ceil(t)}function Dxe(t,e){return t=rG(t),sr(Hm.count(bu(t),t)+(bu(t).getDay()===4),e,2)}function Ixe(t){return t.getDay()}function Lxe(t,e){return sr(tw.count(bu(t)-1,t),e,2)}function Fxe(t,e){return sr(t.getFullYear()%100,e,2)}function Bxe(t,e){return t=rG(t),sr(t.getFullYear()%100,e,2)}function $xe(t,e){return sr(t.getFullYear()%1e4,e,4)}function zxe(t,e){var n=t.getDay();return t=n>=4||n===0?Hm(t):Hm.ceil(t),sr(t.getFullYear()%1e4,e,4)}function qxe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sr(e/60|0,"0",2)+sr(e%60,"0",2)}function jB(t,e){return sr(t.getUTCDate(),e,2)}function Uxe(t,e){return sr(t.getUTCHours(),e,2)}function Hxe(t,e){return sr(t.getUTCHours()%12||12,e,2)}function Vxe(t,e){return sr(1+DS.count(wu(t),t),e,3)}function iG(t,e){return sr(t.getUTCMilliseconds(),e,3)}function Wxe(t,e){return iG(t,e)+"000"}function Kxe(t,e){return sr(t.getUTCMonth()+1,e,2)}function Gxe(t,e){return sr(t.getUTCMinutes(),e,2)}function Yxe(t,e){return sr(t.getUTCSeconds(),e,2)}function Xxe(t){var e=t.getUTCDay();return e===0?7:e}function Jxe(t,e){return sr(LS.count(wu(t)-1,t),e,2)}function sG(t){var e=t.getUTCDay();return e>=4||e===0?Vm(t):Vm.ceil(t)}function Zxe(t,e){return t=sG(t),sr(Vm.count(wu(t),t)+(wu(t).getUTCDay()===4),e,2)}function Qxe(t){return t.getUTCDay()}function ebe(t,e){return sr(nw.count(wu(t)-1,t),e,2)}function tbe(t,e){return sr(t.getUTCFullYear()%100,e,2)}function nbe(t,e){return t=sG(t),sr(t.getUTCFullYear()%100,e,2)}function rbe(t,e){return sr(t.getUTCFullYear()%1e4,e,4)}function ibe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vm(t):Vm.ceil(t),sr(t.getUTCFullYear()%1e4,e,4)}function sbe(){return"+0000"}function _B(){return"%"}function EB(t){return+t}function AB(t){return Math.floor(+t/1e3)}var Ep,aG,oG;abe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function abe(t){return Ep=axe(t),aG=Ep.format,Ep.parse,oG=Ep.utcFormat,Ep.utcParse,Ep}function obe(t){return new Date(t)}function lbe(t){return t instanceof Date?+t:+new Date(+t)}function ZM(t,e,n,r,i,s,o,l,c,u){var d=FM(),f=d.invert,p=d.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),N=u("%B"),S=u("%Y");function E(C){return(c(C)<C?h:l(C)<C?m:o(C)<C?g:s(C)<C?v:r(C)<C?i(C)<C?y:b:n(C)<C?N:S)(C)}return d.invert=function(C){return new Date(f(C))},d.domain=function(C){return arguments.length?p(Array.from(C,lbe)):p().map(obe)},d.ticks=function(C){var T=p();return t(T[0],T[T.length-1],C??10)},d.tickFormat=function(C,T){return T==null?E:u(T)},d.nice=function(C){var T=p();return(!C||typeof C.range!="function")&&(C=e(T[0],T[T.length-1],C??10)),C?p(KK(T,C)):d},d.copy=function(){return lb(d,ZM(t,e,n,r,i,s,o,l,c,u))},d}function cbe(){return Ko.apply(ZM(ixe,sxe,bu,XM,IS,cb,GM,WM,Jf,aG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ube(){return Ko.apply(ZM(nxe,rxe,wu,JM,LS,DS,YM,KM,Jf,oG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function FS(){var t=0,e=1,n,r,i,s,o=aa,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(s(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(p){var h,m;return arguments.length?([h,m]=p,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(Lg),u.rangeRound=d(LM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function cf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lG(){var t=lf(FS()(aa));return t.copy=function(){return cf(t,lG())},Au.apply(t,arguments)}function cG(){var t=zM(FS()).domain([1,10]);return t.copy=function(){return cf(t,cG()).base(t.base())},Au.apply(t,arguments)}function uG(){var t=qM(FS());return t.copy=function(){return cf(t,uG()).constant(t.constant())},Au.apply(t,arguments)}function QM(){var t=UM(FS());return t.copy=function(){return cf(t,QM()).exponent(t.exponent())},Au.apply(t,arguments)}function dbe(){return QM.apply(null,arguments).exponent(.5)}function dG(){var t=[],e=aa;function n(r){if(r!=null&&!isNaN(r=+r))return e((ab(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Bd),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Jve(t,s/r))},n.copy=function(){return dG(e).domain(t)},Au.apply(n,arguments)}function BS(){var t=0,e=.5,n=1,r=1,i,s,o,l,c,u=aa,d,f=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+d(g))-s)*(r*g<r*s?l:c),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),s=d(e=+e),o=d(n=+n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h):[t,e,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function m(g){return function(v){var y,b,N;return arguments.length?([y,b,N]=v,u=Sye(g,[y,b,N]),h):[u(0),u(.5),u(1)]}}return h.range=m(Lg),h.rangeRound=m(LM),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return d=g,i=g(t),s=g(e),o=g(n),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function fG(){var t=lf(BS()(aa));return t.copy=function(){return cf(t,fG())},Au.apply(t,arguments)}function hG(){var t=zM(BS()).domain([.1,1,10]);return t.copy=function(){return cf(t,hG()).base(t.base())},Au.apply(t,arguments)}function pG(){var t=qM(BS());return t.copy=function(){return cf(t,pG()).constant(t.constant())},Au.apply(t,arguments)}function eR(){var t=UM(BS());return t.copy=function(){return cf(t,eR()).exponent(t.exponent())},Au.apply(t,arguments)}function fbe(){return eR.apply(null,arguments).exponent(.5)}const CB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Wy,scaleDiverging:fG,scaleDivergingLog:hG,scaleDivergingPow:eR,scaleDivergingSqrt:fbe,scaleDivergingSymlog:pG,scaleIdentity:WK,scaleImplicit:YT,scaleLinear:Q1,scaleLog:GK,scaleOrdinal:RM,scalePoint:ay,scalePow:HM,scaleQuantile:JK,scaleQuantize:ZK,scaleRadial:XK,scaleSequential:lG,scaleSequentialLog:cG,scaleSequentialPow:QM,scaleSequentialQuantile:dG,scaleSequentialSqrt:dbe,scaleSequentialSymlog:uG,scaleSqrt:Wye,scaleSymlog:YK,scaleThreshold:QK,scaleTime:cbe,scaleUtc:ube,tickFormat:VK},Symbol.toStringTag,{value:"Module"}));var UA,kB;function mG(){if(kB)return UA;kB=1;var t=Mg();function e(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=r(l);if(c!=null&&(u===void 0?c===c&&!t(c):i(c,u)))var u=c,d=l}return d}return UA=e,UA}var HA,TB;function hbe(){if(TB)return HA;TB=1;function t(e,n){return e>n}return HA=t,HA}var VA,OB;function pbe(){if(OB)return VA;OB=1;var t=mG(),e=hbe(),n=Ig();function r(i){return i&&i.length?t(i,n,e):void 0}return VA=r,VA}var mbe=pbe();const Ad=jr(mbe);var WA,PB;function gbe(){if(PB)return WA;PB=1;function t(e,n){return e<n}return WA=t,WA}var KA,MB;function vbe(){if(MB)return KA;MB=1;var t=mG(),e=gbe(),n=Ig();function r(i){return i&&i.length?t(i,n,e):void 0}return KA=r,KA}var ybe=vbe();const $S=jr(ybe);var GA,RB;function xbe(){if(RB)return GA;RB=1;var t=vM(),e=af(),n=jK(),r=Ta();function i(s,o){var l=r(s)?t:n;return l(s,e(o,3))}return GA=i,GA}var YA,DB;function bbe(){if(DB)return YA;DB=1;var t=NK(),e=xbe();function n(r,i){return t(e(r,i),1)}return YA=n,YA}var wbe=bbe();const Nbe=jr(wbe);var XA,IB;function Sbe(){if(IB)return XA;IB=1;var t=kM();function e(n,r){return t(n,r)}return XA=e,XA}var jbe=Sbe();const Rh=jr(jbe);var Fg=1e9,_be={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nR,Zr=!0,Ho="[DecimalError] ",gh=Ho+"Invalid argument: ",tR=Ho+"Exponent out of range: ",Bg=Math.floor,$f=Math.pow,Ebe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qa,ss=1e7,Vr=7,gG=9007199254740991,rw=Bg(gG/Vr),Tt={};Tt.absoluteValue=Tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Tt.comparedTo=Tt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Tt.decimalPlaces=Tt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Vr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Tt.dividedBy=Tt.div=function(t){return du(this,new this.constructor(t))};Tt.dividedToIntegerBy=Tt.idiv=function(t){var e=this,n=e.constructor;return Mr(du(e,new n(t),0,1),n.precision)};Tt.equals=Tt.eq=function(t){return!this.cmp(t)};Tt.exponent=function(){return Fi(this)};Tt.greaterThan=Tt.gt=function(t){return this.cmp(t)>0};Tt.greaterThanOrEqualTo=Tt.gte=function(t){return this.cmp(t)>=0};Tt.isInteger=Tt.isint=function(){return this.e>this.d.length-2};Tt.isNegative=Tt.isneg=function(){return this.s<0};Tt.isPositive=Tt.ispos=function(){return this.s>0};Tt.isZero=function(){return this.s===0};Tt.lessThan=Tt.lt=function(t){return this.cmp(t)<0};Tt.lessThanOrEqualTo=Tt.lte=function(t){return this.cmp(t)<1};Tt.logarithm=Tt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Qa))throw Error(Ho+"NaN");if(n.s<1)throw Error(Ho+(n.s?"NaN":"-Infinity"));return n.eq(Qa)?new r(0):(Zr=!1,e=du(Jy(n,s),Jy(t,s),s),Zr=!0,Mr(e,i))};Tt.minus=Tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xG(e,t):vG(e,(t.s=-t.s,t))};Tt.modulo=Tt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ho+"NaN");return n.s?(Zr=!1,e=du(n,t,0,1).times(t),Zr=!0,n.minus(e)):Mr(new r(n),i)};Tt.naturalExponential=Tt.exp=function(){return yG(this)};Tt.naturalLogarithm=Tt.ln=function(){return Jy(this)};Tt.negated=Tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Tt.plus=Tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vG(e,t):xG(e,(t.s=-t.s,t))};Tt.precision=Tt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gh+t);if(e=Fi(i)+1,r=i.d.length-1,n=r*Vr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Tt.squareRoot=Tt.sqrt=function(){var t,e,n,r,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ho+"NaN")}for(t=Fi(l),Zr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Xl(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=o=n+3;;)if(s=r,r=s.plus(du(l,s,o+2)).times(.5),Xl(s.d).slice(0,o)===(e=Xl(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Mr(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;o+=4}return Zr=!0,Mr(r,n)};Tt.times=Tt.mul=function(t){var e,n,r,i,s,o,l,c,u,d=this,f=d.constructor,p=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=p.length,u=h.length,c<u&&(s=p,p=h,h=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)l=s[i]+h[r]*p[i-r-1]+e,s[i--]=l%ss|0,e=l/ss|0;s[i]=(s[i]+e)%ss|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Zr?Mr(t,f.precision):t};Tt.toDecimalPlaces=Tt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(uc(t,0,Fg),e===void 0?e=r.rounding:uc(e,0,8),Mr(n,t+Fi(n)+1,e))};Tt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Dh(r,!0):(uc(t,0,Fg),e===void 0?e=i.rounding:uc(e,0,8),r=Mr(new i(r),t+1,e),n=Dh(r,!0,t+1)),n};Tt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Dh(i):(uc(t,0,Fg),e===void 0?e=s.rounding:uc(e,0,8),r=Mr(new s(i),t+Fi(i)+1,e),n=Dh(r.abs(),!1,t+Fi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Tt.toInteger=Tt.toint=function(){var t=this,e=t.constructor;return Mr(new e(t),Fi(t)+1,e.rounding)};Tt.toNumber=function(){return+this};Tt.toPower=Tt.pow=function(t){var e,n,r,i,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Qa);if(l=new c(l),!l.s){if(t.s<1)throw Error(Ho+"Infinity");return l}if(l.eq(Qa))return l;if(r=c.precision,t.eq(Qa))return Mr(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=l.s,o){if((n=d<0?-d:d)<=gG){for(i=new c(Qa),e=Math.ceil(r/Vr+4),Zr=!1;n%2&&(i=i.times(l),FB(i.d,e)),n=Bg(n/2),n!==0;)l=l.times(l),FB(l.d,e);return Zr=!0,t.s<0?new c(Qa).div(i):Mr(i,r)}}else if(s<0)throw Error(Ho+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Zr=!1,i=t.times(Jy(l,r+u)),Zr=!0,i=yG(i),i.s=s,i};Tt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Fi(i),r=Dh(i,n<=s.toExpNeg||n>=s.toExpPos)):(uc(t,1,Fg),e===void 0?e=s.rounding:uc(e,0,8),i=Mr(new s(i),t,e),n=Fi(i),r=Dh(i,t<=n||n<=s.toExpNeg,t)),r};Tt.toSignificantDigits=Tt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(uc(t,1,Fg),e===void 0?e=r.rounding:uc(e,0,8)),Mr(new r(n),t,e)};Tt.toString=Tt.valueOf=Tt.val=Tt.toJSON=Tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fi(t),n=t.constructor;return Dh(t,e<=n.toExpNeg||e>=n.toExpPos)};function vG(t,e){var n,r,i,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Zr?Mr(e,f):e;if(c=t.d,u=e.d,o=t.e,i=e.e,c=c.slice(),s=o-i,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=o,l=c.length),o=Math.ceil(f/Vr),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/ss|0,c[s]%=ss;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Zr?Mr(e,f):e}function uc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gh+t)}function Xl(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Vr-r.length,n&&(s+=ad(n)),s+=r;o=t[e],r=o+"",n=Vr-r.length,n&&(s+=ad(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var du=(function(){function t(r,i){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+o,r[l]=s%ss|0,o=s/ss|0;return o&&r.unshift(o),r}function e(r,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*ss+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var l,c,u,d,f,p,h,m,g,v,y,b,N,S,E,C,T,_,j=r.constructor,P=r.s==i.s?1:-1,k=r.d,O=i.d;if(!r.s)return new j(r);if(!i.s)throw Error(Ho+"Division by zero");for(c=r.e-i.e,T=O.length,E=k.length,h=new j(P),m=h.d=[],u=0;O[u]==(k[u]||0);)++u;if(O[u]>(k[u]||0)&&--c,s==null?b=s=j.precision:o?b=s+(Fi(r)-Fi(i))+1:b=s,b<0)return new j(0);if(b=b/Vr+2|0,u=0,T==1)for(d=0,O=O[0],b++;(u<E||d)&&b--;u++)N=d*ss+(k[u]||0),m[u]=N/O|0,d=N%O|0;else{for(d=ss/(O[0]+1)|0,d>1&&(O=t(O,d),k=t(k,d),T=O.length,E=k.length),S=T,g=k.slice(0,T),v=g.length;v<T;)g[v++]=0;_=O.slice(),_.unshift(0),C=O[0],O[1]>=ss/2&&++C;do d=0,l=e(O,g,T,v),l<0?(y=g[0],T!=v&&(y=y*ss+(g[1]||0)),d=y/C|0,d>1?(d>=ss&&(d=ss-1),f=t(O,d),p=f.length,v=g.length,l=e(f,g,p,v),l==1&&(d--,n(f,T<p?_:O,p))):(d==0&&(l=d=1),f=O.slice()),p=f.length,p<v&&f.unshift(0),n(g,f,v),l==-1&&(v=g.length,l=e(O,g,T,v),l<1&&(d++,n(g,T<v?_:O,v))),v=g.length):l===0&&(d++,g=[0]),m[u++]=d,l&&g[0]?g[v++]=k[S]||0:(g=[k[S]],v=1);while((S++<E||g[0]!==void 0)&&b--)}return m[0]||m.shift(),h.e=c,Mr(h,o?s+Fi(h)+1:s)}})();function yG(t,e){var n,r,i,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(Fi(t)>16)throw Error(tR+Fi(t));if(!t.s)return new d(Qa);for(Zr=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log($f(2,u))/Math.LN10*2+5|0,l+=r,n=i=s=new d(Qa),d.precision=l;;){if(i=Mr(i.times(t),l),n=n.times(++c),o=s.plus(du(i,n,l)),Xl(o.d).slice(0,l)===Xl(s.d).slice(0,l)){for(;u--;)s=Mr(s.times(s),l);return d.precision=f,e==null?(Zr=!0,Mr(s,f)):s}s=o}}function Fi(t){for(var e=t.e*Vr,n=t.d[0];n>=10;n/=10)e++;return e}function JA(t,e,n){if(e>t.LN10.sd())throw Zr=!0,n&&(t.precision=n),Error(Ho+"LN10 precision limit exceeded");return Mr(new t(t.LN10),e)}function ad(t){for(var e="";t--;)e+="0";return e}function Jy(t,e){var n,r,i,s,o,l,c,u,d,f=1,p=10,h=t,m=h.d,g=h.constructor,v=g.precision;if(h.s<1)throw Error(Ho+(h.s?"NaN":"-Infinity"));if(h.eq(Qa))return new g(0);if(e==null?(Zr=!1,u=v):u=e,h.eq(10))return e==null&&(Zr=!0),JA(g,u);if(u+=p,g.precision=u,n=Xl(m),r=n.charAt(0),s=Fi(h),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Xl(h.d),r=n.charAt(0),f++;s=Fi(h),r>1?(h=new g("0."+n),s++):h=new g(r+"."+n.slice(1))}else return c=JA(g,u+2,v).times(s+""),h=Jy(new g(r+"."+n.slice(1)),u-p).plus(c),g.precision=v,e==null?(Zr=!0,Mr(h,v)):h;for(l=o=h=du(h.minus(Qa),h.plus(Qa),u),d=Mr(h.times(h),u),i=3;;){if(o=Mr(o.times(d),u),c=l.plus(du(o,new g(i),u)),Xl(c.d).slice(0,u)===Xl(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(JA(g,u+2,v).times(s+""))),l=du(l,new g(f),u),g.precision=v,e==null?(Zr=!0,Mr(l,v)):l;l=c,i+=2}}function LB(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bg(n/Vr),t.d=[],r=(n+1)%Vr,n<0&&(r+=Vr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Vr;r<i;)t.d.push(+e.slice(r,r+=Vr));e=e.slice(r),r=Vr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Zr&&(t.e>rw||t.e<-rw))throw Error(tR+n)}else t.s=0,t.e=0,t.d=[0];return t}function Mr(t,e,n){var r,i,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Vr,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/Vr),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;r%=Vr,i=r-Vr+o}if(n!==void 0&&(s=$f(10,o-i-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/$f(10,o-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=Fi(t),f.length=1,e=e-s-1,f[0]=$f(10,(Vr-e%Vr)%Vr),t.e=Bg(-e/Vr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=$f(10,Vr-r),f[d]=i>0?(u/$f(10,o-i)%$f(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==ss&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=ss)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Zr&&(t.e>rw||t.e<-rw))throw Error(tR+Fi(t));return t}function xG(t,e){var n,r,i,s,o,l,c,u,d,f,p=t.constructor,h=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Zr?Mr(e,h):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(h/Vr),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}o=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=ss-1;--c[s],c[i]+=ss}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Zr?Mr(e,h):e):new p(0)}function Dh(t,e,n){var r,i=Fi(t),s=Xl(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+ad(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+ad(-i-1)+s,n&&(r=n-o)>0&&(s+=ad(r))):i>=o?(s+=ad(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+ad(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=ad(r))),t.s<0?"-"+s:s}function FB(t,e){if(t.length>e)return t.length=e,!0}function bG(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(gh+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return LB(o,s.toString())}else if(typeof s!="string")throw Error(gh+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Ebe.test(s))LB(o,s);else throw Error(gh+s)}if(i.prototype=Tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bG,i.config=i.set=Abe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Abe(t){if(!t||typeof t!="object")throw Error(Ho+"Object expected");var e,n,r,i=["precision",1,Fg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(gh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(gh+n+": "+r);return this}var nR=bG(_be);Qa=new nR(1);const Er=nR;function Cbe(t){return Pbe(t)||Obe(t)||Tbe(t)||kbe()}function kbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(t,e){if(t){if(typeof t=="string")return QT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QT(t,e)}}function Obe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Pbe(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Mbe=function(e){return e},wG={},NG=function(e){return e===wG},BB=function(e){return function n(){return arguments.length===0||arguments.length===1&&NG(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Rbe=function t(e,n){return e===1?n:BB(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==wG}).length;return o>=e?n.apply(void 0,i):t(e-o,BB(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return NG(f)?c.shift():f});return n.apply(void 0,Cbe(d).concat(c))}))})},zS=function(e){return Rbe(e.length,e)},eO=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Dbe=zS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Ibe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Mbe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},tO=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},SG=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function Lbe(t){var e;return t===0?e=1:e=Math.floor(new Er(t).abs().log(10).toNumber())+1,e}function Fbe(t,e,n){for(var r=new Er(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Bbe=zS(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),$be=zS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),zbe=zS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const qS={rangeStep:Fbe,getDigitCount:Lbe,interpolateNumber:Bbe,uninterpolateNumber:$be,uninterpolateTruncation:zbe};function nO(t){return Hbe(t)||Ube(t)||jG(t)||qbe()}function qbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ube(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hbe(t){if(Array.isArray(t))return rO(t)}function Zy(t,e){return Kbe(t)||Wbe(t,e)||jG(t,e)||Vbe()}function Vbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jG(t,e){if(t){if(typeof t=="string")return rO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(t,e)}}function rO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wbe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function Kbe(t){if(Array.isArray(t))return t}function _G(t){var e=Zy(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function EG(t,e,n){if(t.lte(0))return new Er(0);var r=qS.getDigitCount(t.toNumber()),i=new Er(10).pow(r),s=t.div(i),o=r!==1?.05:.1,l=new Er(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return e?c:new Er(Math.ceil(c))}function Gbe(t,e,n){var r=1,i=new Er(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Er(10).pow(qS.getDigitCount(t)-1),i=new Er(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Er(Math.floor(t)))}else t===0?i=new Er(Math.floor((e-1)/2)):n||(i=new Er(Math.floor(t)));var o=Math.floor((e-1)/2),l=Ibe(Dbe(function(c){return i.add(new Er(c-o).mul(r)).toNumber()}),eO);return l(0,e)}function AG(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Er(0),tickMin:new Er(0),tickMax:new Er(0)};var s=EG(new Er(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new Er(0):(o=new Er(t).add(e).div(2),o=o.sub(new Er(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Er(e).sub(o).div(s).toNumber()),u=l+c+1;return u>n?AG(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:o.sub(new Er(l).mul(s)),tickMax:o.add(new Er(c).mul(s))})}function Ybe(t){var e=Zy(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=_G([n,r]),c=Zy(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(nO(eO(0,i-1).map(function(){return 1/0}))):[].concat(nO(eO(0,i-1).map(function(){return-1/0})),[d]);return n>r?tO(f):f}if(u===d)return Gbe(u,i,s);var p=AG(u,d,o,s),h=p.step,m=p.tickMin,g=p.tickMax,v=qS.rangeStep(m,g.add(new Er(.1).mul(h)),h);return n>r?tO(v):v}function Xbe(t,e){var n=Zy(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=_G([r,i]),l=Zy(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=EG(new Er(u).sub(c).div(d-1),s,0),p=[].concat(nO(qS.rangeStep(new Er(c),new Er(u).sub(new Er(.99).mul(f)),f)),[u]);return r>i?tO(p):p}var Jbe=SG(Ybe),Zbe=SG(Xbe),Qbe="Invariant failed";function Ih(t,e){throw new Error(Qbe)}var e0e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}function iw(){return iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iw.apply(this,arguments)}function t0e(t,e){return s0e(t)||i0e(t,e)||r0e(t,e)||n0e()}function n0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r0e(t,e){if(t){if(typeof t=="string")return $B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $B(t,e)}}function $B(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function s0e(t){if(Array.isArray(t))return t}function a0e(t,e){if(t==null)return{};var n=o0e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function o0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function l0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TG(r.key),r)}}function u0e(t,e,n){return e&&c0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d0e(t,e,n){return e=sw(e),f0e(t,CG()?Reflect.construct(e,n||[],sw(t).constructor):e.apply(t,n))}function f0e(t,e){if(e&&(Wm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h0e(t)}function h0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CG=function(){return!!t})()}function sw(t){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sw(t)}function p0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iO(t,e)}function iO(t,e){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iO(t,e)}function kG(t,e,n){return e=TG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TG(t){var e=m0e(t,"string");return Wm(e)=="symbol"?e:e+""}function m0e(t,e){if(Wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $g=(function(t){function e(){return l0e(this,e),d0e(this,e,arguments)}return p0e(e,t),u0e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,p=a0e(r,e0e),h=_n(p,!1);this.props.direction==="x"&&d.type!=="number"&&Ih();var m=c.map(function(g){var v=u(g,l),y=v.x,b=v.y,N=v.value,S=v.errorVal;if(!S)return null;var E=[],C,T;if(Array.isArray(S)){var _=t0e(S,2);C=_[0],T=_[1]}else C=T=S;if(s==="vertical"){var j=d.scale,P=b+i,k=P+o,O=P-o,M=j(N-C),I=j(N+T);E.push({x1:I,y1:k,x2:I,y2:O}),E.push({x1:M,y1:P,x2:I,y2:P}),E.push({x1:M,y1:k,x2:M,y2:O})}else if(s==="horizontal"){var B=f.scale,U=y+i,D=U-o,z=U+o,H=B(N-C),ee=B(N+T);E.push({x1:D,y1:ee,x2:z,y2:ee}),E.push({x1:U,y1:H,x2:U,y2:ee}),E.push({x1:D,y1:H,x2:z,y2:H})}return le.createElement(ur,iw({className:"recharts-errorBar",key:"bar-".concat(E.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},h),E.map(function(ae){return le.createElement("line",iw({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return le.createElement(ur,{className:"recharts-errorBars"},m)}}])})(le.Component);kG($g,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});kG($g,"displayName","ErrorBar");function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function zB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(n),!0).forEach(function(r){g0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0e(t,e,n){return e=v0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v0e(t){var e=y0e(t,"string");return Qy(e)=="symbol"?e:e+""}function y0e(t,e){if(Qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OG=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=Ga(n,uu);if(!o)return null;var l=uu.defaultProps,c=l!==void 0?Lf(Lf({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var p=f.item,h=f.props,m=h.sectors||h.data||[];return d.concat(m.map(function(g){return{type:o.props.iconType||p.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Lf(Lf({},p),f.props):{},m=h.dataKey,g=h.name,v=h.legendType,y=h.hide;return{inactive:y,dataKey:m,type:c.iconType||v||"square",color:rR(f),value:g||m,payload:h}}),Lf(Lf(Lf({},c),uu.getWithHeight(o,i)),{},{payload:u,item:o})};function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function qB(t){return N0e(t)||w0e(t)||b0e(t)||x0e()}function x0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b0e(t,e){if(t){if(typeof t=="string")return sO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(t,e)}}function w0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N0e(t){if(Array.isArray(t))return sO(t)}function sO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){fm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fm(t,e,n){return e=S0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S0e(t){var e=j0e(t,"string");return ex(e)=="symbol"?e:e+""}function j0e(t,e){if(ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qi(t,e,n){return wn(t)||wn(e)?n:Ji(e)?Fo(t,e,n):Cn(e)?e(t):n}function oy(t,e,n,r){var i=Nbe(t,function(l){return Qi(l,e)});if(n==="number"){var s=i.filter(function(l){return dt(l)||parseFloat(l)});return s.length?[$S(s),Ad(s)]:[1/0,-1/0]}var o=r?i.filter(function(l){return!wn(l)}):i;return o.map(function(l){return Ji(l)||l instanceof Date?l:""})}var _0e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r?.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,p=u>=l-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(hl(f-d)!==hl(p-f)){var m=[];if(hl(p-f)===hl(c[1]-c[0])){h=p;var g=f+c[1]-c[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{h=d;var v=p+c[1]-c[0];m[0]=Math.min(f,(v+f)/2),m[1]=Math.max(f,(v+f)/2)}var y=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){o=i[u].index;break}}else{var b=Math.min(d,p),N=Math.max(d,p);if(e>(b+f)/2&&e<=(N+f)/2){o=i[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S>0&&S<l-1&&e>(r[S].coordinate+r[S-1].coordinate)/2&&e<=(r[S].coordinate+r[S+1].coordinate)/2||S===l-1&&e>(r[S].coordinate+r[S-1].coordinate)/2){o=r[S].index;break}return o},rR=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?pi(pi({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},E0e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var m=d[f[p]],g=m.items,v=m.cateAxisId,y=g.filter(function(T){return lu(T.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,N=b!==void 0?pi(pi({},b),y[0].props):y[0].props,S=N.barSize,E=N[v];o[E]||(o[E]=[]);var C=wn(S)?n:S;o[E].push({item:y[0],stackList:y.slice(1),barSize:wn(C)?void 0:Mh(C,r,0)})}}return o},A0e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Mh(n,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,h=i/c,m=o.reduce(function(S,E){return S+E.barSize||0},0);m+=(c-1)*u,m>=i&&(m-=(c-1)*u,u=0),m>=i&&h>0&&(p=!0,h*=.9,m=c*h);var g=(i-m)/2>>0,v={offset:g-u,size:0};d=o.reduce(function(S,E){var C={item:E.item,position:{offset:v.offset+v.size+u,size:p?h:E.barSize}},T=[].concat(qB(S),[C]);return v=T[T.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(_){T.push({item:_,position:v})}),T},f)}else{var y=Mh(r,i,0,!0);i-2*y-(c-1)*u<=0&&(u=0);var b=(i-2*y-(c-1)*u)/c;b>1&&(b>>=0);var N=l===+l?Math.min(b,l):b;d=o.reduce(function(S,E,C){var T=[].concat(qB(S),[{item:E.item,position:{offset:y+(b+u)*C+(b-N)/2,size:N}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(_){T.push({item:_,position:T[T.length-1].position})}),T},f)}return d},C0e=function(e,n,r,i){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=OG({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,p=d.height,h=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&h!=="center"&&dt(e[h]))return pi(pi({},e),{},fm({},h,e[h]+(f||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&m!=="middle"&&dt(e[m]))return pi(pi({},e),{},fm({},m,e[m]+(p||0)))}return e},k0e=function(e,n,r){return wn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},PG=function(e,n,r,i,s){var o=n.props.children,l=_a(o,$g).filter(function(u){return k0e(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Qi(d,r);if(wn(f))return u;var p=Array.isArray(f)?[$S(f),Ad(f)]:[f,f],h=c.reduce(function(m,g){var v=Qi(d,g,0),y=p[0]-Math.abs(Array.isArray(v)?v[0]:v),b=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(y,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},T0e=function(e,n,r,i,s){var o=n.map(function(l){return PG(e,l,r,s,i)}).filter(function(l){return!wn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},MG=function(e,n,r,i,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&PG(e,c,u,i)||oy(e,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},RG=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},DG=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},su=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&l?.length>=2?hl(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=s?s.indexOf(f):f;return{coordinate:i(p)+u,value:f,offset:u}});return d.filter(function(f){return!Dg(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+u,value:f,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,p){return{coordinate:i(f)+u,value:s?s[f]:f,index:p,offset:u}})},ZA=new WeakMap,d0=function(e,n){if(typeof n!="function")return e;ZA.has(e)||ZA.set(e,new WeakMap);var r=ZA.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},O0e=function(e,n,r){var i=e.scale,s=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Wy(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Q1(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:ay(),realScaleType:"point"}:s==="category"?{scale:Wy(),realScaleType:"band"}:{scale:Q1(),realScaleType:"linear"};if(Ph(i)){var c="scale".concat(ES(i));return{scale:(CB[c]||ay)(),realScaleType:CB[c]?c:"point"}}return Cn(i)?{scale:i}:{scale:ay(),realScaleType:"point"}},HB=1e-4,P0e=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-HB,o=Math.max(i[0],i[1])+HB,l=e(n[0]),c=e(n[r-1]);(l<s||l>o||c<s||c>o)&&e.domain([n[0],n[r-1]])}},M0e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},R0e=function(e,n){if(!n||n.length!==2||!dt(n[0])||!dt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!dt(e[0])||e[0]<r)&&(s[0]=r),(!dt(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},D0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Dg(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=s,e[l][r][1]=s+c,s=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},I0e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<n;++o){var l=Dg(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},L0e={sign:D0e,expand:bpe,none:Fm,silhouette:wpe,wiggle:Npe,positive:I0e},F0e=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),s=L0e[r],o=xpe().keys(i).value(function(l,c){return+Qi(l,c,0)}).order(DT).offset(s);return o(e)},B0e=function(e,n,r,i,s,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(f,p){var h,m=(h=p.type)!==null&&h!==void 0&&h.defaultProps?pi(pi({},p.type.defaultProps),p.props):p.props,g=m.stackId,v=m.hide;if(v)return f;var y=m[r],b=f[y]||{hasStack:!1,stackGroups:{}};if(Ji(g)){var N=b.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};N.items.push(p),b.hasStack=!0,b.stackGroups[g]=N}else b.stackGroups[tp("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return pi(pi({},f),{},fm({},y,b))},c),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,v){var y=h.stackGroups[v];return pi(pi({},g),{},fm({},v,{numericAxisId:r,cateAxisId:i,items:y.items,stackedData:F0e(e,y.items,s)}))},m)}return pi(pi({},f),{},fm({},p,h))},d)},$0e=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Jbe(u,s,l);return e.domain([$S(d),Ad(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),p=Zbe(f,s,l);return{niceTicks:p}}return null};function Km(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!wn(i[e.dataKey])){var l=R1(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=Qi(i,wn(o)?e.dataKey:o);return wn(c)?null:e.scale(c)}var VB=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=Qi(o,n.dataKey,n.domain[l]);return wn(c)?null:n.scale(c)-s/2+i},z0e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},q0e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?pi(pi({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ji(s)){var o=n[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},U0e=function(e){return e.reduce(function(n,r){return[$S(r.concat([n[0]]).filter(dt)),Ad(r.concat([n[1]]).filter(dt))]},[1/0,-1/0])},IG=function(e,n,r){return Object.keys(e).reduce(function(i,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,d){var f=U0e(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},WB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aO=function(e,n,r){if(Cn(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(dt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(WB.test(e[0])){var s=+WB.exec(e[0])[1];i[0]=n[0]-s}else Cn(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(dt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(KB.test(e[1])){var o=+KB.exec(e[1])[1];i[1]=n[1]+o}else Cn(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},aw=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=OM(n,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},GB=function(e,n,r){return!e||!e.length||Rh(e,Fo(r,"type.defaultProps.domain"))?n:e},LG=function(e,n){var r=e.type.defaultProps?pi(pi({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return pi(pi({},_n(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:rR(e),value:Qi(n,i),type:c,payload:n,chartType:u,hide:d})};function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tx(t)}function YB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(n),!0).forEach(function(r){H0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H0e(t,e,n){return e=V0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V0e(t){var e=W0e(t,"string");return tx(e)=="symbol"?e:e+""}function W0e(t,e){if(tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ow=Math.PI/180,K0e=function(e){return e*180/Math.PI},js=function(e,n,r,i){return{x:e+Math.cos(-ow*i)*r,y:n+Math.sin(-ow*i)*r}},G0e=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},Y0e=function(e,n){var r=e.x,i=e.y,s=n.cx,o=n.cy,l=G0e({x:r,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:K0e(u),angleInRadian:u}},X0e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:r-o*360}},J0e=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),l=Math.min(s,o);return e+l*360},JB=function(e,n){var r=e.x,i=e.y,s=Y0e({x:r,y:i},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=X0e(n),f=d.startAngle,p=d.endAngle,h=l,m;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}return m?XB(XB({},n),{},{radius:o,angle:J0e(h,n)}):null};function nx(t){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nx(t)}var Z0e=["offset"];function Q0e(t){return r1e(t)||n1e(t)||t1e(t)||e1e()}function e1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t1e(t,e){if(t){if(typeof t=="string")return oO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oO(t,e)}}function n1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r1e(t){if(Array.isArray(t))return oO(t)}function oO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i1e(t,e){if(t==null)return{};var n=s1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(n),!0).forEach(function(r){a1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a1e(t,e,n){return e=o1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o1e(t){var e=l1e(t,"string");return nx(e)=="symbol"?e:e+""}function l1e(t,e){if(nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rx(){return rx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rx.apply(this,arguments)}var c1e=function(e){var n=e.value,r=e.formatter,i=wn(e.children)?n:e.children;return Cn(r)?r(i):i},u1e=function(e,n){var r=hl(n-e),i=Math.min(Math.abs(n-e),360);return r*i},d1e=function(e,n,r){var i=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,h=c.startAngle,m=c.endAngle,g=c.clockWise,v=(f+p)/2,y=u1e(h,m),b=y>=0?1:-1,N,S;i==="insideStart"?(N=h+b*o,S=g):i==="insideEnd"?(N=m-b*o,S=!g):i==="end"&&(N=m+b*o,S=g),S=y<=0?S:!S;var E=js(u,d,v,N),C=js(u,d,v,N+(S?1:-1)*359),T="M".concat(E.x,",").concat(E.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(S?0:1,`,
    `).concat(C.x,",").concat(C.y),_=wn(e.id)?tp("recharts-radial-line-"):e.id;return le.createElement("text",rx({},r,{dominantBaseline:"central",className:Bn("recharts-radial-bar-label",l)}),le.createElement("defs",null,le.createElement("path",{id:_,d:T})),le.createElement("textPath",{xlinkHref:"#".concat(_)},n))},f1e=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,p=(d+f)/2;if(i==="outside"){var h=js(o,l,u+r,p),m=h.x,g=h.y;return{x:m,y:g,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,y=js(o,l,v,p),b=y.x,N=y.y;return{x:b,y:N,textAnchor:"middle",verticalAnchor:"middle"}},h1e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,p=f*i,h=f>0?"end":"start",m=f>0?"start":"end",g=u>=0?1:-1,v=g*i,y=g>0?"end":"start",b=g>0?"start":"end";if(s==="top"){var N={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:h};return Ki(Ki({},N),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var S={x:l+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:m};return Ki(Ki({},S),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var E={x:l-v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Ki(Ki({},E),r?{width:Math.max(E.x-r.x,0),height:d}:{})}if(s==="right"){var C={x:l+u+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Ki(Ki({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var T=r?{width:u,height:d}:{};return s==="insideLeft"?Ki({x:l+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},T):s==="insideRight"?Ki({x:l+u-v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},T):s==="insideTop"?Ki({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:m},T):s==="insideBottom"?Ki({x:l+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:h},T):s==="insideTopLeft"?Ki({x:l+v,y:c+p,textAnchor:b,verticalAnchor:m},T):s==="insideTopRight"?Ki({x:l+u-v,y:c+p,textAnchor:y,verticalAnchor:m},T):s==="insideBottomLeft"?Ki({x:l+v,y:c+d-p,textAnchor:b,verticalAnchor:h},T):s==="insideBottomRight"?Ki({x:l+u-v,y:c+d-p,textAnchor:y,verticalAnchor:h},T):Rg(s)&&(dt(s.x)||Yf(s.x))&&(dt(s.y)||Yf(s.y))?Ki({x:l+Mh(s.x,u),y:c+Mh(s.y,d),textAnchor:"end",verticalAnchor:"end"},T):Ki({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},T)},p1e=function(e){return"cx"in e&&dt(e.cx)};function Bs(t){var e=t.offset,n=e===void 0?5:e,r=i1e(t,Z0e),i=Ki({offset:n},r),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!s||wn(l)&&wn(c)&&!x.isValidElement(u)&&!Cn(u))return null;if(x.isValidElement(u))return x.cloneElement(u,i);var h;if(Cn(u)){if(h=x.createElement(u,i),x.isValidElement(h))return h}else h=c1e(i);var m=p1e(s),g=_n(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return d1e(i,h,g);var v=m?f1e(i):h1e(i);return le.createElement(W1,rx({className:Bn("recharts-label",f)},g,v,{breakAll:p}),h)}Bs.displayName="Label";var FG=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,h=e.top,m=e.left,g=e.width,v=e.height,y=e.clockWise,b=e.labelViewBox;if(b)return b;if(dt(g)&&dt(v)){if(dt(f)&&dt(p))return{x:f,y:p,width:g,height:v};if(dt(h)&&dt(m))return{x:h,y:m,width:g,height:v}}return dt(f)&&dt(p)?{x:f,y:p,width:0,height:0}:dt(n)&&dt(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},m1e=function(e,n){return e?e===!0?le.createElement(Bs,{key:"label-implicit",viewBox:n}):Ji(e)?le.createElement(Bs,{key:"label-implicit",viewBox:n,value:e}):x.isValidElement(e)?e.type===Bs?x.cloneElement(e,{key:"label-implicit",viewBox:n}):le.createElement(Bs,{key:"label-implicit",content:e,viewBox:n}):Cn(e)?le.createElement(Bs,{key:"label-implicit",content:e,viewBox:n}):Rg(e)?le.createElement(Bs,rx({viewBox:n},e,{key:"label-implicit"})):null:null},g1e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=FG(e),o=_a(i,Bs).map(function(c,u){return x.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=m1e(e.label,n||s);return[l].concat(Q0e(o))};Bs.parseViewBox=FG;Bs.renderCallByParent=g1e;var QA,QB;function v1e(){if(QB)return QA;QB=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return QA=t,QA}var y1e=v1e();const x1e=jr(y1e);function ix(t){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(t)}var b1e=["valueAccessor"],w1e=["data","dataKey","clockWise","id","textBreakAll"];function N1e(t){return E1e(t)||_1e(t)||j1e(t)||S1e()}function S1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j1e(t,e){if(t){if(typeof t=="string")return lO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(t,e)}}function _1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E1e(t){if(Array.isArray(t))return lO(t)}function lO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lw(){return lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lw.apply(this,arguments)}function e$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e$(Object(n),!0).forEach(function(r){A1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A1e(t,e,n){return e=C1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C1e(t){var e=k1e(t,"string");return ix(e)=="symbol"?e:e+""}function k1e(t,e){if(ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n$(t,e){if(t==null)return{};var n=T1e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var O1e=function(e){return Array.isArray(e.value)?x1e(e.value):e.value};function ic(t){var e=t.valueAccessor,n=e===void 0?O1e:e,r=n$(t,b1e),i=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=n$(r,w1e);return!i||!i.length?null:le.createElement(ur,{className:"recharts-label-list"},i.map(function(d,f){var p=wn(s)?n(d,f):Qi(d&&d.payload,s),h=wn(l)?{}:{id:"".concat(l,"-").concat(f)};return le.createElement(Bs,lw({},_n(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Bs.parseViewBox(wn(o)?d:t$(t$({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}ic.displayName="LabelList";function P1e(t,e){return t?t===!0?le.createElement(ic,{key:"labelList-implicit",data:e}):le.isValidElement(t)||Cn(t)?le.createElement(ic,{key:"labelList-implicit",data:e,content:t}):Rg(t)?le.createElement(ic,lw({data:e},t,{key:"labelList-implicit"})):null:null}function M1e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=_a(r,ic).map(function(o,l){return x.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=P1e(t.label,e);return[s].concat(N1e(i))}ic.renderCallByParent=M1e;function sx(t){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sx(t)}function cO(){return cO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cO.apply(this,arguments)}function r$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(n),!0).forEach(function(r){R1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R1e(t,e,n){return e=D1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D1e(t){var e=I1e(t,"string");return sx(e)=="symbol"?e:e+""}function I1e(t,e){if(sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L1e=function(e,n){var r=hl(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},f0=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/ow,p=u?s:s+o*f,h=js(n,r,d,p),m=js(n,r,i,p),g=u?s-o*f:s,v=js(n,r,d*Math.cos(f*ow),g);return{center:h,circleTangency:m,lineTangency:v,theta:f}},BG=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=L1e(o,l),u=o+c,d=js(n,r,s,o),f=js(n,r,s,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=js(n,r,i,o),m=js(n,r,i,u);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},F1e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=hl(d-u),p=f0({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),h=p.circleTangency,m=p.lineTangency,g=p.theta,v=f0({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=v.circleTangency,b=v.lineTangency,N=v.theta,S=c?Math.abs(u-d):Math.abs(u-d)-g-N;if(S<0)return l?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):BG({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var E="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var C=f0({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=C.circleTangency,_=C.lineTangency,j=C.theta,P=f0({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=P.circleTangency,O=P.lineTangency,M=P.theta,I=c?Math.abs(u-d):Math.abs(u-d)-j-M;if(I<0&&o===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(I>180),",").concat(+(f>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},B1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$G=function(e){var n=i$(i$({},B1e),e),r=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,p=n.className;if(o<s||d===f)return null;var h=Bn("recharts-sector",p),m=o-s,g=Mh(l,m,0,!0),v;return g>0&&Math.abs(d-f)<360?v=F1e({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=BG({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),le.createElement("path",cO({},_n(n,!0),{className:h,d:v,role:"img"}))};function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(t)}function uO(){return uO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uO.apply(this,arguments)}function s$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(n),!0).forEach(function(r){$1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $1e(t,e,n){return e=z1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z1e(t){var e=q1e(t,"string");return ax(e)=="symbol"?e:e+""}function q1e(t,e){if(ax(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o$={curveBasisClosed:lpe,curveBasisOpen:cpe,curveBasis:ope,curveBumpX:Khe,curveBumpY:Ghe,curveLinearClosed:upe,curveLinear:CS,curveMonotoneX:dpe,curveMonotoneY:fpe,curveNatural:hpe,curveStep:ppe,curveStepAfter:gpe,curveStepBefore:mpe},h0=function(e){return e.x===+e.x&&e.y===+e.y},Tv=function(e){return e.x},Ov=function(e){return e.y},U1e=function(e,n){if(Cn(e))return e;var r="curve".concat(ES(e));return(r==="curveMonotone"||r==="curveBump")&&n?o$["".concat(r).concat(n==="vertical"?"Y":"X")]:o$[r]||CS},H1e=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=U1e(r,l),f=u?s.filter(function(g){return h0(g)}):s,p;if(Array.isArray(o)){var h=u?o.filter(function(g){return h0(g)}):o,m=f.map(function(g,v){return a$(a$({},g),{},{base:h[v]})});return l==="vertical"?p=i0().y(Ov).x1(Tv).x0(function(g){return g.base.x}):p=i0().x(Tv).y1(Ov).y0(function(g){return g.base.y}),p.defined(h0).curve(d),p(m)}return l==="vertical"&&dt(o)?p=i0().y(Ov).x1(Tv).x0(o):dt(o)?p=i0().x(Tv).y1(Ov).y0(o):p=VW().x(Tv).y(Ov),p.defined(h0).curve(d),p(f)},vh=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?H1e(e):i;return x.createElement("path",uO({},_n(e,!1),D1(e),{className:Bn("recharts-curve",n),d:o,ref:s}))},eC={exports:{}},tC,l$;function V1e(){if(l$)return tC;l$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tC=t,tC}var nC,c$;function W1e(){if(c$)return nC;c$=1;var t=V1e();function e(){}function n(){}return n.resetWarningCache=e,nC=function(){function r(o,l,c,u,d,f){if(f!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},nC}var u$;function K1e(){return u$||(u$=1,eC.exports=W1e()()),eC.exports}var G1e=K1e();const pr=jr(G1e);var Y1e=Object.getOwnPropertyNames,X1e=Object.getOwnPropertySymbols,J1e=Object.prototype.hasOwnProperty;function d$(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function p0(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=t(n,r,i);return s.delete(n),s.delete(r),c}}function Z1e(t){return t?.[Symbol.toStringTag]}function f$(t){return Y1e(t).concat(X1e(t))}var Q1e=Object.hasOwn||(function(t,e){return J1e.call(t,e)});function ip(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ewe="__v",twe="__o",nwe="_owner",h$=Object.getOwnPropertyDescriptor,p$=Object.keys;function rwe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function iwe(t,e){return ip(t.getTime(),e.getTime())}function swe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function awe(t,e){return t===e}function m$(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var p=o.value,h=l.value;if(n.equals(p[0],h[0],c,f,t,e,n)&&n.equals(p[1],h[1],p[0],h[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var owe=ip;function lwe(t,e,n){var r=p$(t),i=r.length;if(p$(e).length!==i)return!1;for(;i-- >0;)if(!zG(t,e,n,r[i]))return!1;return!0}function Pv(t,e,n){var r=f$(t),i=r.length;if(f$(e).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=r[i],!zG(t,e,n,s)||(o=h$(t,s),l=h$(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function cwe(t,e){return ip(t.valueOf(),e.valueOf())}function uwe(t,e){return t.source===e.source&&t.flags===e.flags}function g$(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function dwe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function fwe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function zG(t,e,n,r){return(r===nwe||r===twe||r===ewe)&&(t.$$typeof||e.$$typeof)?!0:Q1e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var hwe="[object Arguments]",pwe="[object Boolean]",mwe="[object Date]",gwe="[object Error]",vwe="[object Map]",ywe="[object Number]",xwe="[object Object]",bwe="[object RegExp]",wwe="[object Set]",Nwe="[object String]",Swe="[object URL]",jwe=Array.isArray,v$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,y$=Object.assign,_we=Object.prototype.toString.call.bind(Object.prototype.toString);function Ewe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,p=t.areUrlsEqual,h=t.unknownTagComparators;return function(g,v,y){if(g===v)return!0;if(g==null||v==null)return!1;var b=typeof g;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?o(g,v,y):b==="function"?i(g,v,y):!1;var N=g.constructor;if(N!==v.constructor)return!1;if(N===Object)return l(g,v,y);if(jwe(g))return e(g,v,y);if(v$!=null&&v$(g))return f(g,v,y);if(N===Date)return n(g,v,y);if(N===RegExp)return u(g,v,y);if(N===Map)return s(g,v,y);if(N===Set)return d(g,v,y);var S=_we(g);if(S===mwe)return n(g,v,y);if(S===bwe)return u(g,v,y);if(S===vwe)return s(g,v,y);if(S===wwe)return d(g,v,y);if(S===xwe)return typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,y);if(S===Swe)return p(g,v,y);if(S===gwe)return r(g,v,y);if(S===hwe)return l(g,v,y);if(S===pwe||S===ywe||S===Nwe)return c(g,v,y);if(h){var E=h[S];if(!E){var C=Z1e(g);C&&(E=h[C])}if(E)return E(g,v,y)}return!1}}function Awe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Pv:rwe,areDatesEqual:iwe,areErrorsEqual:swe,areFunctionsEqual:awe,areMapsEqual:r?d$(m$,Pv):m$,areNumbersEqual:owe,areObjectsEqual:r?Pv:lwe,arePrimitiveWrappersEqual:cwe,areRegExpsEqual:uwe,areSetsEqual:r?d$(g$,Pv):g$,areTypedArraysEqual:r?Pv:dwe,areUrlsEqual:fwe,unknownTagComparators:void 0};if(n&&(i=y$({},i,n(i))),e){var s=p0(i.areArraysEqual),o=p0(i.areMapsEqual),l=p0(i.areObjectsEqual),c=p0(i.areSetsEqual);i=y$({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function Cwe(t){return function(e,n,r,i,s,o,l){return t(e,n,l)}}function kwe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(c,u){var d=r(),f=d.cache,p=f===void 0?e?new WeakMap:void 0:f,h=d.meta;return n(c,u,{cache:p,equals:i,meta:h,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var Twe=uf();uf({strict:!0});uf({circular:!0});uf({circular:!0,strict:!0});uf({createInternalComparator:function(){return ip}});uf({strict:!0,createInternalComparator:function(){return ip}});uf({circular:!0,createInternalComparator:function(){return ip}});uf({circular:!0,createInternalComparator:function(){return ip},strict:!0});function uf(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,o=s===void 0?!1:s,l=Awe(t),c=Ewe(l),u=r?r(c):Cwe(c);return kwe({circular:n,comparator:c,createState:i,equals:u,strict:o})}function Owe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function x$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Owe(i)};requestAnimationFrame(r)}function dO(t){"@babel/helpers - typeof";return dO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dO(t)}function Pwe(t){return Iwe(t)||Dwe(t)||Rwe(t)||Mwe()}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(t,e){if(t){if(typeof t=="string")return b$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b$(t,e)}}function b$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iwe(t){if(Array.isArray(t))return t}function Lwe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=Pwe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){x$(i.bind(null,u),c);return}i(c),x$(i.bind(null,u));return}dO(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function ox(t){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ox(t)}function w$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(n),!0).forEach(function(r){qG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qG(t,e,n){return e=Fwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fwe(t){var e=Bwe(t,"string");return ox(e)==="symbol"?e:String(e)}function Bwe(t,e){if(ox(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ox(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $we=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},zwe=function(e){return e},qwe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ly=function(e,n){return Object.keys(n).reduce(function(r,i){return N$(N$({},r),{},qG({},i,e(i,n[i])))},{})},S$=function(e,n,r){return e.map(function(i){return"".concat(qwe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Uwe(t,e){return Wwe(t)||Vwe(t,e)||UG(t,e)||Hwe()}function Hwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Wwe(t){if(Array.isArray(t))return t}function Kwe(t){return Xwe(t)||Ywe(t)||UG(t)||Gwe()}function Gwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(t,e){if(t){if(typeof t=="string")return fO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fO(t,e)}}function Ywe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xwe(t){if(Array.isArray(t))return fO(t)}function fO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cw=1e-4,HG=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},VG=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},j$=function(e,n){return function(r){var i=HG(e,n);return VG(i,r)}},Jwe=function(e,n){return function(r){var i=HG(e,n),s=[].concat(Kwe(i.map(function(o,l){return o*l}).slice(1)),[0]);return VG(s,r)}},_$=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=Uwe(u,4);i=d[0],s=d[1],o=d[2],l=d[3]}}}var f=j$(i,o),p=j$(s,l),h=Jwe(i,o),m=function(y){return y>1?1:y<0?0:y},g=function(y){for(var b=y>1?1:y,N=b,S=0;S<8;++S){var E=f(N)-b,C=h(N);if(Math.abs(E-b)<cw||C<cw)return p(N);N=m(N-E/C)}return p(N)};return g.isStepper=!1,g},Zwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(d,f,p){var h=-(d-f)*r,m=p*s,g=p+(h-m)*l/1e3,v=p*l/1e3+d;return Math.abs(v-f)<cw&&Math.abs(g)<cw?[f,0]:[v,g]};return c.isStepper=!0,c.dt=l,c},Qwe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _$(i);case"spring":return Zwe();default:if(i.split("(")[0]==="cubic-bezier")return _$(i)}return typeof i=="function"?i:null};function lx(t){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(t)}function E$(t){return nNe(t)||tNe(t)||WG(t)||eNe()}function eNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nNe(t){if(Array.isArray(t))return pO(t)}function A$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(n),!0).forEach(function(r){hO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hO(t,e,n){return e=rNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rNe(t){var e=iNe(t,"string");return lx(e)==="symbol"?e:String(e)}function iNe(t,e){if(lx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sNe(t,e){return lNe(t)||oNe(t,e)||WG(t,e)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WG(t,e){if(t){if(typeof t=="string")return pO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(t,e)}}function pO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function lNe(t){if(Array.isArray(t))return t}var uw=function(e,n,r){return e+(n-e)*r},mO=function(e){var n=e.from,r=e.to;return n!==r},cNe=function t(e,n,r){var i=ly(function(s,o){if(mO(o)){var l=e(o.from,o.to,o.velocity),c=sNe(l,2),u=c[0],d=c[1];return bs(bs({},o),{},{from:u,velocity:d})}return o},n);return r<1?ly(function(s,o){return mO(o)?bs(bs({},o),{},{velocity:uw(o.velocity,i[s].velocity,r),from:uw(o.from,i[s].from,r)}):o},n):t(e,i,r-1)};const uNe=(function(t,e,n,r,i){var s=$we(t,e),o=s.reduce(function(v,y){return bs(bs({},v),{},hO({},y,[t[y],e[y]]))},{}),l=s.reduce(function(v,y){return bs(bs({},v),{},hO({},y,{from:t[y],velocity:0,to:e[y]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return ly(function(y,b){return b.from},l)},h=function(){return!Object.values(l).filter(mO).length},m=function(y){u||(u=y);var b=y-u,N=b/n.dt;l=cNe(n,l,N),i(bs(bs(bs({},t),e),p())),u=y,h()||(c=requestAnimationFrame(f))},g=function(y){d||(d=y);var b=(y-d)/r,N=ly(function(E,C){return uw.apply(void 0,E$(C).concat([n(b)]))},o);if(i(bs(bs(bs({},t),e),N)),b<1)c=requestAnimationFrame(f);else{var S=ly(function(E,C){return uw.apply(void 0,E$(C).concat([n(1)]))},o);i(bs(bs(bs({},t),e),S))}};return f=n.isStepper?m:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Gm(t){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gm(t)}var dNe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function fNe(t,e){if(t==null)return{};var n=hNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hNe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rC(t){return vNe(t)||gNe(t)||mNe(t)||pNe()}function pNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mNe(t,e){if(t){if(typeof t=="string")return gO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gO(t,e)}}function gNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vNe(t){if(Array.isArray(t))return gO(t)}function gO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(n),!0).forEach(function(r){Wv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wv(t,e,n){return e=KG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KG(r.key),r)}}function bNe(t,e,n){return e&&xNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KG(t){var e=wNe(t,"string");return Gm(e)==="symbol"?e:String(e)}function wNe(t,e){if(Gm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vO(t,e)}function vO(t,e){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vO(t,e)}function SNe(t){var e=jNe();return function(){var r=dw(t),i;if(e){var s=dw(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return yO(this,i)}}function yO(t,e){if(e&&(Gm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xO(t)}function xO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dw(t){return dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dw(t)}var xl=(function(t){NNe(n,t);var e=SNe(n);function n(r,i){var s;yNe(this,n),s=e.call(this,r,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,p=o.children,h=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(xO(s)),s.changeStyle=s.changeStyle.bind(xO(s)),!l||h<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:d}),yO(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof p=="function")return s.state={style:u},yO(s);s.state={style:c?Wv({},c,u):u}}else s.state={style:{}};return s}return bNe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,p=this.state.style;if(l){if(!o){var h={style:c?Wv({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(h);return}if(!(Twe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?f:i.to;if(this.state&&p){var v={style:c?Wv({},c,g):g};(c&&p[c]!==g||!c&&p!==g)&&this.setState(v)}this.runAnimation(tl(tl({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,h=uNe(o,l,Qwe(u),c,this.changeStyle),m=function(){s.stopJSAnimation=h()};this.manager.start([p,d,m,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(g,v,y){if(y===0)return g;var b=v.duration,N=v.easing,S=N===void 0?"ease":N,E=v.style,C=v.properties,T=v.onAnimationEnd,_=y>0?o[y-1]:v,j=C||Object.keys(E);if(typeof S=="function"||S==="spring")return[].concat(rC(g),[s.runJSAnimation.bind(s,{from:_.style,to:E,duration:b,easing:S}),b]);var P=S$(j,b,S),k=tl(tl(tl({},_.style),E),{},{transition:P});return[].concat(rC(g),[k,b,T]).filter(zwe)};return this.manager.start([c].concat(rC(o.reduce(h,[d,Math.max(p,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Lwe());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var g=l?Wv({},l,c):c,v=S$(Object.keys(g),o,u);m.start([d,s,tl(tl({},g),{},{transition:v}),o,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=fNe(i,dNe),u=x.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(h){var m=h.props,g=m.style,v=g===void 0?{}:g,y=m.className,b=x.cloneElement(h,tl(tl({},c),{},{style:tl(tl({},v),d),className:y}));return b};return u===1?f(x.Children.only(s)):le.createElement("div",null,x.Children.map(s,function(p){return f(p)}))}}]),n})(x.PureComponent);xl.displayName="Animate";xl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};xl.propTypes={from:pr.oneOfType([pr.object,pr.string]),to:pr.oneOfType([pr.object,pr.string]),attributeName:pr.string,duration:pr.number,begin:pr.number,easing:pr.oneOfType([pr.string,pr.func]),steps:pr.arrayOf(pr.shape({duration:pr.number.isRequired,style:pr.object.isRequired,easing:pr.oneOfType([pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pr.func]),properties:pr.arrayOf("string"),onAnimationEnd:pr.func})),children:pr.oneOfType([pr.node,pr.func]),isActive:pr.bool,canBegin:pr.bool,onAnimationEnd:pr.func,shouldReAnimate:pr.bool,onAnimationStart:pr.func,onAnimationReStart:pr.func};function cx(t){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cx(t)}function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function _Ne(t,e){return kNe(t)||CNe(t,e)||ANe(t,e)||ENe()}function ENe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ANe(t,e){if(t){if(typeof t=="string")return k$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k$(t,e)}}function k$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function kNe(t){if(Array.isArray(t))return t}function T$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(n),!0).forEach(function(r){TNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TNe(t,e,n){return e=ONe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ONe(t){var e=PNe(t,"string");return cx(e)=="symbol"?e:e+""}function PNe(t,e){if(cx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P$=function(e,n,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=s[p]>o?o:s[p];d="M".concat(e,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*f[1])),d+="L ".concat(e+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var m=Math.min(o,s);d="M ".concat(e,",").concat(n+l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+c*m,",").concat(n,`
            L `).concat(e+r-c*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*m,`
            L `).concat(e+r,",").concat(n+i-l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-c*m,",").concat(n+i,`
            L `).concat(e+c*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*m," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},MNe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return r>=u&&r<=d&&i>=f&&i<=p}return!1},RNe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iR=function(e){var n=O$(O$({},RNe),e),r=x.useRef(),i=x.useState(-1),s=_Ne(i,2),o=s[0],l=s[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,p=n.radius,h=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var N=Bn("recharts-rectangle",h);return b?le.createElement(xl,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:m,isActive:b},function(S){var E=S.width,C=S.height,T=S.x,_=S.y;return le.createElement(xl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:y,easing:m},le.createElement("path",fw({},_n(n,!0),{className:N,d:P$(T,_,E,C,p),ref:r})))}):le.createElement("path",fw({},_n(n,!0),{className:N,d:P$(c,u,d,f,p)}))};function bO(){return bO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bO.apply(this,arguments)}var US=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,o=Bn("recharts-dot",s);return n===+n&&r===+r&&i===+i?x.createElement("circle",bO({},_n(e,!1),D1(e),{className:o,cx:n,cy:r,r:i})):null};function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(t)}var DNe=["x","y","top","left","width","height","className"];function wO(){return wO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wO.apply(this,arguments)}function M$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function INe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(n),!0).forEach(function(r){LNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LNe(t,e,n){return e=FNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FNe(t){var e=BNe(t,"string");return ux(e)=="symbol"?e:e+""}function BNe(t,e){if(ux(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ne(t,e){if(t==null)return{};var n=zNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qNe=function(e,n,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},UNe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,p=e.height,h=p===void 0?0:p,m=e.className,g=$Ne(e,DNe),v=INe({x:r,y:s,top:l,left:u,width:f,height:h},g);return!dt(r)||!dt(s)||!dt(f)||!dt(h)||!dt(l)||!dt(u)?null:le.createElement("path",wO({},_n(v,!0),{className:Bn("recharts-cross",m),d:qNe(r,s,f,h,l,u)}))},iC,R$;function HNe(){if(R$)return iC;R$=1;var t=pK(),e=t(Object.getPrototypeOf,Object);return iC=e,iC}var sC,D$;function VNe(){if(D$)return sC;D$=1;var t=_u(),e=HNe(),n=Eu(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function u(d){if(!n(d)||t(d)!=r)return!1;var f=e(d);if(f===null)return!0;var p=l.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return sC=u,sC}var WNe=VNe();const KNe=jr(WNe);var aC,I$;function GNe(){if(I$)return aC;I$=1;var t=_u(),e=Eu(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return aC=r,aC}var YNe=GNe();const XNe=jr(YNe);function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hw.apply(this,arguments)}function JNe(t,e){return tSe(t)||eSe(t,e)||QNe(t,e)||ZNe()}function ZNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QNe(t,e){if(t){if(typeof t=="string")return L$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L$(t,e)}}function L$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function tSe(t){if(Array.isArray(t))return t}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){nSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nSe(t,e,n){return e=rSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rSe(t){var e=iSe(t,"string");return dx(e)=="symbol"?e:e+""}function iSe(t,e){if(dx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $$=function(e,n,r,i,s){var o=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+s),l+="L ".concat(e+r-o/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},sSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aSe=function(e){var n=B$(B$({},sSe),e),r=x.useRef(),i=x.useState(-1),s=JNe(i,2),o=s[0],l=s[1];x.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,p=n.height,h=n.className,m=n.animationEasing,g=n.animationDuration,v=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var b=Bn("recharts-trapezoid",h);return y?le.createElement(xl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:g,animationEasing:m,isActive:y},function(N){var S=N.upperWidth,E=N.lowerWidth,C=N.height,T=N.x,_=N.y;return le.createElement(xl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},le.createElement("path",hw({},_n(n,!0),{className:b,d:$$(T,_,S,E,C),ref:r})))}):le.createElement("g",null,le.createElement("path",hw({},_n(n,!0),{className:b,d:$$(c,u,d,f,p)})))},oSe=["option","shapeType","propTransformer","activeClassName","isActive"];function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}function lSe(t,e){if(t==null)return{};var n=cSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(n),!0).forEach(function(r){uSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uSe(t,e,n){return e=dSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dSe(t){var e=fSe(t,"string");return fx(e)=="symbol"?e:e+""}function fSe(t,e){if(fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hSe(t,e){return pw(pw({},e),t)}function pSe(t,e){return t==="symbols"}function q$(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return le.createElement(iR,n);case"trapezoid":return le.createElement(aSe,n);case"sector":return le.createElement($G,n);case"symbols":if(pSe(e))return le.createElement(TS,n);break;default:return null}}function mSe(t){return x.isValidElement(t)?t.props:t}function NO(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?hSe:r,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=lSe(t,oSe),u;if(x.isValidElement(e))u=x.cloneElement(e,pw(pw({},c),mSe(e)));else if(Cn(e))u=e(c);else if(KNe(e)&&!XNe(e)){var d=i(e,c);u=le.createElement(q$,{shapeType:n,elementProps:d})}else{var f=c;u=le.createElement(q$,{shapeType:n,elementProps:f})}return l?le.createElement(ur,{className:o},u):u}function HS(t,e){return e!=null&&"trapezoids"in t.props}function VS(t,e){return e!=null&&"sectors"in t.props}function hx(t,e){return e!=null&&"points"in t.props}function gSe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function vSe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ySe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function xSe(t,e){var n;return HS(t,e)?n=gSe:VS(t,e)?n=vSe:hx(t,e)&&(n=ySe),n}function bSe(t,e){var n;return HS(t,e)?n="trapezoids":VS(t,e)?n="sectors":hx(t,e)&&(n="points"),n}function wSe(t,e){if(HS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(VS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return hx(t,e)?e.payload:{}}function NSe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=bSe(n,e),s=wSe(n,e),o=r.filter(function(c,u){var d=Rh(s,c),f=n.props[i].filter(function(m){var g=xSe(n,e);return g(m,e)}),p=n.props[i].indexOf(f[f.length-1]),h=u===p;return d&&h}),l=r.indexOf(o[o.length-1]);return l}var oC,U$;function SSe(){if(U$)return oC;U$=1;var t=Math.ceil,e=Math.max;function n(r,i,s,o){for(var l=-1,c=e(t((i-r)/(s||1)),0),u=Array(c);c--;)u[o?c:++l]=r,r+=s;return u}return oC=n,oC}var lC,H$;function GG(){if(H$)return lC;H$=1;var t=TK(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return lC=r,lC}var cC,V$;function jSe(){if(V$)return cC;V$=1;var t=SSe(),e=MS(),n=GG();function r(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return cC=r,cC}var uC,W$;function _Se(){if(W$)return uC;W$=1;var t=jSe(),e=t();return uC=e,uC}var ESe=_Se();const mw=jr(ESe);function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}function K$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(n),!0).forEach(function(r){YG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YG(t,e,n){return e=ASe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ASe(t){var e=CSe(t,"string");return px(e)=="symbol"?e:e+""}function CSe(t,e){if(px(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(px(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kSe=["Webkit","Moz","O","ms"],TSe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=kSe.reduce(function(s,o){return G$(G$({},s),{},YG({},o+r,n))},{});return i[e]=n,i};function Ym(t){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym(t)}function gw(){return gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gw.apply(this,arguments)}function Y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(n),!0).forEach(function(r){Ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JG(r.key),r)}}function PSe(t,e,n){return e&&X$(t.prototype,e),n&&X$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MSe(t,e,n){return e=vw(e),RSe(t,XG()?Reflect.construct(e,n||[],vw(t).constructor):e.apply(t,n))}function RSe(t,e){if(e&&(Ym(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DSe(t)}function DSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XG=function(){return!!t})()}function vw(t){return vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vw(t)}function ISe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}function SO(t,e){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SO(t,e)}function Ka(t,e,n){return e=JG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JG(t){var e=LSe(t,"string");return Ym(e)=="symbol"?e:e+""}function LSe(t,e){if(Ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var FSe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=ay().domain(mw(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},J$=function(e){return e.changedTouches&&!!e.changedTouches.length},Xm=(function(t){function e(n){var r;return OSe(this,e),r=MSe(this,e,[n]),Ka(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ka(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ka(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o?.({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Ka(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ka(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ka(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ka(r,"handleSlideDragStart",function(i){var s=J$(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return ISe(e,t),PSe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),p=Math.max(i,s),h=e.getIndexInRange(o,f),m=e.getIndexInRange(o,p);return{startIndex:h-h%c,endIndex:m===d?d:m-m%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=Qi(s[r],l,r);return Cn(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,h=c.endIndex,m=c.onChange,g=r.pageX-s;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var v=this.getIndex({startX:o+g,endX:l+g});(v.startIndex!==p||v.endIndex!==h)&&m&&m(v),this.setState({startX:o+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=J$(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,m=d.onChange,g=d.gap,v=d.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,f+p-h-u):b<0&&(b=Math.max(b,f-u)),y[o]=u+b;var N=this.getIndex(y),S=N.startIndex,E=N.endIndex,C=function(){var _=v.length-1;return o==="startX"&&(l>c?S%g===0:E%g===0)||l<c&&E===_||o==="endX"&&(l>c?E%g===0:S%g===0)||l>c&&E===_};this.setState(Ka(Ka({},o,u+b),"brushMoveStartX",r.pageX),function(){m&&C()&&m(N)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var p=f+r;if(!(p===-1||p>=l.length)){var h=l[p];i==="startX"&&h>=u||i==="endX"&&h<=c||this.setState(Ka({},i,h),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return le.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=x.Children.only(u);return f?le.cloneElement(f,{x:i,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,h=c.ariaLabel,m=c.data,g=c.startIndex,v=c.endIndex,y=Math.max(r,this.props.x),b=dC(dC({},_n(this.props,!1)),{},{x:y,y:u,width:d,height:f}),N=h||"Min value: ".concat((s=m[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=m[v])===null||o===void 0?void 0:o.name);return le.createElement(ur,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,b))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,p=d.endX,h=5,m={pointerEvents:"none",fill:u};return le.createElement(ur,{className:"recharts-brush-texts"},le.createElement(W1,gw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:o+l/2},m),this.getTextOfTick(i)),le.createElement(W1,gw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+h,y:o+l/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,p=this.state,h=p.startX,m=p.endX,g=p.isTextActive,v=p.isSlideMoving,y=p.isTravellerMoving,b=p.isTravellerFocused;if(!i||!i.length||!dt(l)||!dt(c)||!dt(u)||!dt(d)||u<=0||d<=0)return null;var N=Bn("recharts-brush",s),S=le.Children.count(o)===1,E=TSe("userSelect","none");return le.createElement(ur,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),le.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return le.isValidElement(r)?s=le.cloneElement(r,i):Cn(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return dC({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?FSe({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var p=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>i?l=c:o=c}return i>=r[l]?l:o}}])})(x.PureComponent);Ka(Xm,"displayName","Brush");Ka(Xm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fC,Z$;function BSe(){if(Z$)return fC;Z$=1;var t=TM();function e(n,r){var i;return t(n,function(s,o,l){return i=r(s,o,l),!i}),!!i}return fC=e,fC}var hC,Q$;function $Se(){if(Q$)return hC;Q$=1;var t=oK(),e=af(),n=BSe(),r=Ta(),i=MS();function s(o,l,c){var u=r(o)?t:n;return c&&i(o,l,c)&&(l=void 0),u(o,e(l,3))}return hC=s,hC}var zSe=$Se();const qSe=jr(zSe);var sc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},pC,e8;function USe(){if(e8)return pC;e8=1;var t=_K();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return pC=e,pC}var mC,t8;function HSe(){if(t8)return mC;t8=1;var t=USe(),e=SK(),n=af();function r(i,s){var o={};return s=n(s,3),e(i,function(l,c,u){t(o,c,s(l,c,u))}),o}return mC=r,mC}var VSe=HSe();const WSe=jr(VSe);var gC,n8;function KSe(){if(n8)return gC;n8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return gC=t,gC}var vC,r8;function GSe(){if(r8)return vC;r8=1;var t=TM();function e(n,r){var i=!0;return t(n,function(s,o,l){return i=!!r(s,o,l),i}),i}return vC=e,vC}var yC,i8;function YSe(){if(i8)return yC;i8=1;var t=KSe(),e=GSe(),n=af(),r=Ta(),i=MS();function s(o,l,c){var u=r(o)?t:e;return c&&i(o,l,c)&&(l=void 0),u(o,n(l,3))}return yC=s,yC}var XSe=YSe();const ZG=jr(XSe);var JSe=["x","y"];function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}function jO(){return jO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jO.apply(this,arguments)}function s8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s8(Object(n),!0).forEach(function(r){ZSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZSe(t,e,n){return e=QSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QSe(t){var e=eje(t,"string");return mx(e)=="symbol"?e:e+""}function eje(t,e){if(mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tje(t,e){if(t==null)return{};var n=nje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rje(t,e){var n=t.x,r=t.y,i=tje(t,JSe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),p=parseInt(f,10);return Mv(Mv(Mv(Mv(Mv({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function a8(t){return le.createElement(NO,jO({shapeType:"rectangle",propTransformer:rje,activeClassName:"recharts-active-bar"},t))}var ije=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=dt(r)||phe(r);return s?e(r,i):(s||Ih(),n)}},sje=["value","background"],QG;function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function aje(t,e){if(t==null)return{};var n=oje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yw(){return yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yw.apply(this,arguments)}function o8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(n),!0).forEach(function(r){Cd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tY(r.key),r)}}function cje(t,e,n){return e&&l8(t.prototype,e),n&&l8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uje(t,e,n){return e=xw(e),dje(t,eY()?Reflect.construct(e,n||[],xw(t).constructor):e.apply(t,n))}function dje(t,e){if(e&&(Jm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fje(t)}function fje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eY=function(){return!!t})()}function xw(t){return xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xw(t)}function hje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_O(t,e)}function _O(t,e){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_O(t,e)}function Cd(t,e,n){return e=tY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tY(t){var e=pje(t,"string");return Jm(e)=="symbol"?e:e+""}function pje(t,e){if(Jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oa=(function(t){function e(){var n;lje(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=uje(this,e,[].concat(i)),Cd(n,"state",{isAnimationFinished:!1}),Cd(n,"id",tp("recharts-bar-")),Cd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Cd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return hje(e,t),cje(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=_n(this.props,!1);return r&&r.map(function(f,p){var h=p===c,m=h?u:o,g=Ri(Ri(Ri({},d),f),{},{isActive:h,option:m,index:p,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return le.createElement(ur,yw({className:"recharts-bar-rectangle"},Fy(i.props,f,p),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),le.createElement(a8,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return le.createElement(xl,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=s.map(function(v,y){var b=p&&p[y];if(b){var N=_i(b.x,v.x),S=_i(b.y,v.y),E=_i(b.width,v.width),C=_i(b.height,v.height);return Ri(Ri({},v),{},{x:N(m),y:S(m),width:E(m),height:C(m)})}if(o==="horizontal"){var T=_i(0,v.height),_=T(m);return Ri(Ri({},v),{},{y:v.y+v.height-_,height:_})}var j=_i(0,v.width),P=j(m);return Ri(Ri({},v),{},{width:P})});return le.createElement(ur,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Rh(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=_n(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,p=aje(u,sje);if(!f)return null;var h=Ri(Ri(Ri(Ri(Ri({},p),{},{fill:"#eee"},f),c),Fy(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return le.createElement(a8,yw({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=_a(d,$g);if(!f)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,h=function(v,y){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:Qi(v,y)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return le.createElement(ur,m,f.map(function(g){return le.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,p=r.height,h=r.isAnimationActive,m=r.background,g=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=Bn("recharts-bar",o),b=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,S=b||N,E=wn(g)?this.id:g;return le.createElement(ur,{className:y},b||N?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(E)},le.createElement("rect",{x:b?u:u-f/2,y:N?d:d-p/2,width:b?f:f*2,height:N?p:p*2}))):null,le.createElement(ur,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(E,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,E),(!h||v)&&ic.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(x.PureComponent);QG=oa;Cd(oa,"displayName","Bar");Cd(oa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!of.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cd(oa,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=M0e(r,n);if(!h)return null;var m=e.layout,g=n.type.defaultProps,v=g!==void 0?Ri(Ri({},g),n.props):n.props,y=v.dataKey,b=v.children,N=v.minPointSize,S=m==="horizontal"?o:s,E=u?S.scale.domain():null,C=z0e({numericAxis:S}),T=_a(b,Ed),_=f.map(function(j,P){var k,O,M,I,B,U;u?k=R0e(u[d+P],E):(k=Qi(j,y),Array.isArray(k)||(k=[C,k]));var D=ije(N,QG.defaultProps.minPointSize)(k[1],P);if(m==="horizontal"){var z,H=[o.scale(k[0]),o.scale(k[1])],ee=H[0],ae=H[1];O=VB({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:j,index:P}),M=(z=ae??ee)!==null&&z!==void 0?z:void 0,I=h.size;var F=ee-ae;if(B=Number.isNaN(F)?0:F,U={x:O,y:o.y,width:I,height:o.height},Math.abs(D)>0&&Math.abs(B)<Math.abs(D)){var q=hl(B||D)*(Math.abs(D)-Math.abs(B));M-=q,B+=q}}else{var Z=[s.scale(k[0]),s.scale(k[1])],te=Z[0],ce=Z[1];if(O=te,M=VB({axis:o,ticks:c,bandSize:i,offset:h.offset,entry:j,index:P}),I=ce-te,B=h.size,U={x:s.x,y:M,width:s.width,height:B},Math.abs(D)>0&&Math.abs(I)<Math.abs(D)){var ue=hl(I||D)*(Math.abs(D)-Math.abs(I));I+=ue}}return Ri(Ri(Ri({},j),{},{x:O,y:M,width:I,height:B,value:u?k:k[1],payload:j,background:U},T&&T[P]&&T[P].props),{},{tooltipPayload:[LG(n,j)],tooltipPosition:{x:O+I/2,y:M+B/2}})});return Ri({data:_,layout:m},p)});function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gx(t)}function mje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nY(r.key),r)}}function gje(t,e,n){return e&&c8(t.prototype,e),n&&c8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ol(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(n),!0).forEach(function(r){WS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WS(t,e,n){return e=nY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nY(t){var e=vje(t,"string");return gx(e)=="symbol"?e:e+""}function vje(t,e){if(gx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sR=function(e,n,r,i,s){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},p=!!Ga(u,oa);return d.reduce(function(h,m){var g=n[m],v=g.orientation,y=g.domain,b=g.padding,N=b===void 0?{}:b,S=g.mirror,E=g.reversed,C="".concat(v).concat(S?"Mirror":""),T,_,j,P,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=y[1]-y[0],M=1/0,I=g.categoricalDomain.sort(yhe);if(I.forEach(function(Z,te){te>0&&(M=Math.min((Z||0)-(I[te-1]||0),M))}),Number.isFinite(M)){var B=M/O,U=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(T=B*U/2),g.padding==="no-gap"){var D=Mh(e.barCategoryGap,B*U),z=B*U/2;T=z-D-(z-D)/U*D}}}i==="xAxis"?_=[r.left+(N.left||0)+(T||0),r.left+r.width-(N.right||0)-(T||0)]:i==="yAxis"?_=c==="horizontal"?[r.top+r.height-(N.bottom||0),r.top+(N.top||0)]:[r.top+(N.top||0)+(T||0),r.top+r.height-(N.bottom||0)-(T||0)]:_=g.range,E&&(_=[_[1],_[0]]);var H=O0e(g,s,p),ee=H.scale,ae=H.realScaleType;ee.domain(y).range(_),P0e(ee);var F=$0e(ee,ol(ol({},g),{},{realScaleType:ae}));i==="xAxis"?(k=v==="top"&&!S||v==="bottom"&&S,j=r.left,P=f[C]-k*g.height):i==="yAxis"&&(k=v==="left"&&!S||v==="right"&&S,j=f[C]-k*g.width,P=r.top);var q=ol(ol(ol({},g),F),{},{realScaleType:ae,x:j,y:P,scale:ee,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return q.bandSize=aw(q,F),!g.hide&&i==="xAxis"?f[C]+=(k?-1:1)*q.height:g.hide||(f[C]+=(k?-1:1)*q.width),ol(ol({},h),{},WS({},m,q))},{})},rY=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},yje=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return rY({x:n,y:r},{x:i,y:s})},iY=(function(){function t(e){mje(this,t),this.scale=e}return gje(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();WS(iY,"EPS",1e-4);var aR=function(e){var n=Object.keys(e).reduce(function(r,i){return ol(ol({},r),{},WS({},i,iY.create(e[i])))},{});return ol(ol({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return WSe(i,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return ZG(i,function(s,o){return n[o].isInRange(s)})}})};function xje(t){return(t%180+180)%180}var bje=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=xje(i),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},xC,d8;function wje(){if(d8)return xC;d8=1;var t=af(),e=sb(),n=OS();function r(i){return function(s,o,l){var c=Object(s);if(!e(s)){var u=t(o,3);s=n(s),o=function(f){return u(c[f],f,c)}}var d=i(s,o,l);return d>-1?c[u?s[d]:d]:void 0}}return xC=r,xC}var bC,f8;function Nje(){if(f8)return bC;f8=1;var t=GG();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return bC=e,bC}var wC,h8;function Sje(){if(h8)return wC;h8=1;var t=yK(),e=af(),n=Nje(),r=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var u=l==null?0:n(l);return u<0&&(u=r(c+u,0)),t(s,e(o,3),u)}return wC=i,wC}var NC,p8;function jje(){if(p8)return NC;p8=1;var t=wje(),e=Sje(),n=t(e);return NC=n,NC}var _je=jje();const Eje=jr(_je);var Aje=MW();const Cje=jr(Aje);var kje=Cje(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),oR=x.createContext(void 0),lR=x.createContext(void 0),sY=x.createContext(void 0),aY=x.createContext({}),oY=x.createContext(void 0),lY=x.createContext(0),cY=x.createContext(0),m8=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=kje(s);return le.createElement(oR.Provider,{value:r},le.createElement(lR.Provider,{value:i},le.createElement(aY.Provider,{value:s},le.createElement(sY.Provider,{value:d},le.createElement(oY.Provider,{value:o},le.createElement(lY.Provider,{value:u},le.createElement(cY.Provider,{value:c},l)))))))},Tje=function(){return x.useContext(oY)},uY=function(e){var n=x.useContext(oR);n==null&&Ih();var r=n[e];return r==null&&Ih(),r},Oje=function(){var e=x.useContext(oR);return fd(e)},Pje=function(){var e=x.useContext(lR),n=Eje(e,function(r){return ZG(r.domain,Number.isFinite)});return n||fd(e)},dY=function(e){var n=x.useContext(lR);n==null&&Ih();var r=n[e];return r==null&&Ih(),r},Mje=function(){var e=x.useContext(sY);return e},Rje=function(){return x.useContext(aY)},cR=function(){return x.useContext(cY)},uR=function(){return x.useContext(lY)};function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function Dje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ije(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hY(r.key),r)}}function Lje(t,e,n){return e&&Ije(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fje(t,e,n){return e=bw(e),Bje(t,fY()?Reflect.construct(e,n||[],bw(t).constructor):e.apply(t,n))}function Bje(t,e){if(e&&(Zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $je(t)}function $je(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fY=function(){return!!t})()}function bw(t){return bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bw(t)}function zje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EO(t,e)}function EO(t,e){return EO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EO(t,e)}function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(r){dR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dR(t,e,n){return e=hY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hY(t){var e=qje(t,"string");return Zm(e)=="symbol"?e:e+""}function qje(t,e){if(Zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Uje(t,e){return Kje(t)||Wje(t,e)||Vje(t,e)||Hje()}function Hje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vje(t,e){if(t){if(typeof t=="string")return y8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y8(t,e)}}function y8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function Kje(t){if(Array.isArray(t))return t}function AO(){return AO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AO.apply(this,arguments)}var Gje=function(e,n){var r;return le.isValidElement(e)?r=le.cloneElement(e,n):Cn(e)?r=e(n):r=le.createElement("line",AO({},n,{className:"recharts-reference-line-line"})),r},Yje=function(e,n,r,i,s,o,l,c,u){var d=s.x,f=s.y,p=s.width,h=s.height;if(r){var m=u.y,g=e.y.apply(m,{position:o});if(sc(u,"discard")&&!e.y.isInRange(g))return null;var v=[{x:d+p,y:g},{x:d,y:g}];return c==="left"?v.reverse():v}if(n){var y=u.x,b=e.x.apply(y,{position:o});if(sc(u,"discard")&&!e.x.isInRange(b))return null;var N=[{x:b,y:f+h},{x:b,y:f}];return l==="top"?N.reverse():N}if(i){var S=u.segment,E=S.map(function(C){return e.apply(C,{position:o})});return sc(u,"discard")&&qSe(E,function(C){return!e.isInRange(C)})?null:E}return null};function Xje(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=Tje(),d=uY(i),f=dY(s),p=Mje();if(!u||!p)return null;cu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=aR({x:d.scale,y:f.scale}),m=Ji(e),g=Ji(n),v=r&&r.length===2,y=Yje(h,m,g,v,p,t.position,d.orientation,f.orientation,t);if(!y)return null;var b=Uje(y,2),N=b[0],S=N.x,E=N.y,C=b[1],T=C.x,_=C.y,j=sc(t,"hidden")?"url(#".concat(u,")"):void 0,P=v8(v8({clipPath:j},_n(t,!0)),{},{x1:S,y1:E,x2:T,y2:_});return le.createElement(ur,{className:Bn("recharts-reference-line",l)},Gje(o,P),Bs.renderCallByParent(t,yje({x1:S,y1:E,x2:T,y2:_})))}var fR=(function(t){function e(){return Dje(this,e),Fje(this,e,arguments)}return zje(e,t),Lje(e,[{key:"render",value:function(){return le.createElement(Xje,this.props)}}])})(le.Component);dR(fR,"displayName","ReferenceLine");dR(fR,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function CO(){return CO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CO.apply(this,arguments)}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}function x8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(n),!0).forEach(function(r){KS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zje(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mY(r.key),r)}}function Qje(t,e,n){return e&&Zje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function e2e(t,e,n){return e=ww(e),t2e(t,pY()?Reflect.construct(e,n||[],ww(t).constructor):e.apply(t,n))}function t2e(t,e){if(e&&(Qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n2e(t)}function n2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pY=function(){return!!t})()}function ww(t){return ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ww(t)}function r2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kO(t,e)}function kO(t,e){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kO(t,e)}function KS(t,e,n){return e=mY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mY(t){var e=i2e(t,"string");return Qm(e)=="symbol"?e:e+""}function i2e(t,e){if(Qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s2e=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=aR({x:i.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return sc(e,"discard")&&!o.isInRange(l)?null:l},GS=(function(t){function e(){return Jje(this,e),e2e(this,e,arguments)}return r2e(e,t),Qje(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=Ji(i),d=Ji(s);if(cu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=s2e(this.props);if(!f)return null;var p=f.x,h=f.y,m=this.props,g=m.shape,v=m.className,y=sc(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=b8(b8({clipPath:y},_n(this.props,!0)),{},{cx:p,cy:h});return le.createElement(ur,{className:Bn("recharts-reference-dot",v)},e.renderDot(g,b),Bs.renderCallByParent(this.props,{x:p-o,y:h-o,width:2*o,height:2*o}))}}])})(le.Component);KS(GS,"displayName","ReferenceDot");KS(GS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});KS(GS,"renderDot",function(t,e){var n;return le.isValidElement(t)?n=le.cloneElement(t,e):Cn(t)?n=t(e):n=le.createElement(US,CO({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function TO(){return TO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TO.apply(this,arguments)}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function w8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vY(r.key),r)}}function l2e(t,e,n){return e&&o2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c2e(t,e,n){return e=Nw(e),u2e(t,gY()?Reflect.construct(e,n||[],Nw(t).constructor):e.apply(t,n))}function u2e(t,e){if(e&&(eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2e(t)}function d2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gY=function(){return!!t})()}function Nw(t){return Nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nw(t)}function f2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OO(t,e)}function OO(t,e){return OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OO(t,e)}function YS(t,e,n){return e=vY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vY(t){var e=h2e(t,"string");return eg(e)=="symbol"?e:e+""}function h2e(t,e){if(eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p2e=function(e,n,r,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var p=aR({x:d.scale,y:f.scale}),h={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(c,{position:"start"}):p.y.rangeMin},m={x:n?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return sc(s,"discard")&&(!p.isInRange(h)||!p.isInRange(m))?null:rY(h,m)},XS=(function(t){function e(){return a2e(this,e),c2e(this,e,arguments)}return f2e(e,t),l2e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;cu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ji(i),p=Ji(s),h=Ji(o),m=Ji(l),g=this.props.shape;if(!f&&!p&&!h&&!m&&!g)return null;var v=p2e(f,p,h,m,this.props);if(!v&&!g)return null;var y=sc(this.props,"hidden")?"url(#".concat(d,")"):void 0;return le.createElement(ur,{className:Bn("recharts-reference-area",c)},e.renderRect(g,N8(N8({clipPath:y},_n(this.props,!0)),v)),Bs.renderCallByParent(this.props,v))}}])})(le.Component);YS(XS,"displayName","ReferenceArea");YS(XS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});YS(XS,"renderRect",function(t,e){var n;return le.isValidElement(t)?n=le.cloneElement(t,e):Cn(t)?n=t(e):n=le.createElement(iR,TO({},e,{className:"recharts-reference-area-rect"})),n});function yY(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function m2e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return bje(r,n)}function g2e(t,e,n){var r=n==="width",i=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:r?i:s,end:r?i+o:s+l}:{start:r?i+o:s+l,end:r?i:s}}function Sw(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function v2e(t,e){return yY(t,e+1)}function y2e(t,e,n,r,i){for(var s=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var m=r?.[c];if(m===void 0)return{v:yY(r,u)};var g=c,v,y=function(){return v===void 0&&(v=n(m,g)),v},b=m.coordinate,N=c===0||Sw(t,b,y,d,l);N||(c=0,d=o,u+=1),N&&(d=b+t*(y()/2+i),c+=u)},p;u<=s.length;)if(p=f(),p)return p.v;return[]}function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(t)}function S8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(n),!0).forEach(function(r){x2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x2e(t,e,n){return e=b2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b2e(t){var e=w2e(t,"string");return vx(e)=="symbol"?e:e+""}function w2e(t,e){if(vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N2e(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(p){var h=s[p],m,g=function(){return m===void 0&&(m=n(h,p)),m};if(p===o-1){var v=t*(h.coordinate+t*g()/2-c);s[p]=h=Ls(Ls({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate})}else s[p]=h=Ls(Ls({},h),{},{tickCoord:h.coordinate});var y=Sw(t,h.tickCoord,g,l,c);y&&(c=h.tickCoord-t*(g()/2+i),s[p]=Ls(Ls({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function S2e(t,e,n,r,i,s){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var d=r[l-1],f=n(d,l-1),p=t*(d.coordinate+t*f/2-u);o[l-1]=d=Ls(Ls({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var h=Sw(t,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-t*(f/2+i),o[l-1]=Ls(Ls({},d),{},{isShow:!0}))}for(var m=s?l-1:l,g=function(b){var N=o[b],S,E=function(){return S===void 0&&(S=n(N,b)),S};if(b===0){var C=t*(N.coordinate-t*E()/2-c);o[b]=N=Ls(Ls({},N),{},{tickCoord:C<0?N.coordinate-C*t:N.coordinate})}else o[b]=N=Ls(Ls({},N),{},{tickCoord:N.coordinate});var T=Sw(t,N.tickCoord,E,c,u);T&&(c=N.tickCoord+t*(E()/2+i),o[b]=Ls(Ls({},N),{},{isShow:!0}))},v=0;v<m;v++)g(v);return o}function hR(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(dt(c)||of.isSsr)return v2e(i,typeof c=="number"&&dt(c)?c:0);var p=[],h=l==="top"||l==="bottom"?"width":"height",m=d&&h==="width"?sy(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(N,S){var E=Cn(u)?u(N.value,S):N.value;return h==="width"?m2e(sy(E,{fontSize:e,letterSpacing:n}),m,f):sy(E,{fontSize:e,letterSpacing:n})[h]},v=i.length>=2?hl(i[1].coordinate-i[0].coordinate):1,y=g2e(s,v,h);return c==="equidistantPreserveStart"?y2e(v,y,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?p=S2e(v,y,g,i,o,c==="preserveStartEnd"):p=N2e(v,y,g,i,o),p.filter(function(b){return b.isShow}))}var j2e=["viewBox"],_2e=["viewBox"],E2e=["ticks"];function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function em(){return em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},em.apply(this,arguments)}function j8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j8(Object(n),!0).forEach(function(r){pR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SC(t,e){if(t==null)return{};var n=A2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function C2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bY(r.key),r)}}function k2e(t,e,n){return e&&_8(t.prototype,e),n&&_8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T2e(t,e,n){return e=jw(e),O2e(t,xY()?Reflect.construct(e,n||[],jw(t).constructor):e.apply(t,n))}function O2e(t,e){if(e&&(tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P2e(t)}function P2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xY=function(){return!!t})()}function jw(t){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jw(t)}function M2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PO(t,e)}function PO(t,e){return PO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PO(t,e)}function pR(t,e,n){return e=bY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bY(t){var e=R2e(t,"string");return tg(e)=="symbol"?e:e+""}function R2e(t,e){if(tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zg=(function(t){function e(n){var r;return C2e(this,e),r=T2e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return M2e(e,t),k2e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=SC(r,j2e),l=this.props,c=l.viewBox,u=SC(l,_2e);return!um(s,c)||!um(o,u)||!um(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,h,m,g,v,y,b,N=f?-1:1,S=r.tickSize||d,E=dt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=m=r.coordinate,v=o+ +!f*c,g=v-N*S,b=g-N*p,y=E;break;case"left":g=v=r.coordinate,m=s+ +!f*l,h=m-N*S,y=h-N*p,b=E;break;case"right":g=v=r.coordinate,m=s+ +f*l,h=m+N*S,y=h+N*p,b=E;break;default:h=m=r.coordinate,v=o+ +f*c,g=v+N*S,b=g+N*p,y=E;break}return{line:{x1:h,y1:g,x2:m,y2:v},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=Wi(Wi(Wi({},_n(this.props,!1)),_n(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=Wi(Wi({},f),{},{x1:i,y1:s+p*l,x2:i+o,y2:s+p*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=Wi(Wi({},f),{},{x1:i+h*o,y1:s,x2:i+h*o,y2:s+l})}return le.createElement("line",em({},f,{className:Bn("recharts-cartesian-axis-line",Fo(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,p=l.unit,h=hR(Wi(Wi({},this.props),{},{ticks:r}),i,s),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=_n(this.props,!1),y=_n(d,!1),b=Wi(Wi({},v),{},{fill:"none"},_n(c,!1)),N=h.map(function(S,E){var C=o.getTickLineCoord(S),T=C.line,_=C.tick,j=Wi(Wi(Wi(Wi({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},y),_),{},{index:E,payload:S,visibleTicksCount:h.length,tickFormatter:f});return le.createElement(ur,em({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Fy(o.props,S,E)),c&&le.createElement("line",em({},b,T,{className:Bn("recharts-cartesian-axis-tick-line",Fo(c,"className"))})),d&&e.renderTickItem(d,j,"".concat(Cn(f)?f(S.value,E):S.value).concat(p||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,h=SC(f,E2e),m=p;return Cn(c)&&(m=p&&p.length>0?c(this.props):c(h)),o<=0||l<=0||!m||!m.length?null:le.createElement(ur,{className:Bn("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Bs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o,l=Bn(i.className,"recharts-cartesian-axis-tick-value");return le.isValidElement(r)?o=le.cloneElement(r,Wi(Wi({},i),{},{className:l})):Cn(r)?o=r(Wi(Wi({},i),{},{className:l})):o=le.createElement(W1,em({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])})(x.Component);pR(zg,"displayName","CartesianAxis");pR(zg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var D2e=["x1","y1","x2","y2","key"],I2e=["offset"];function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function E8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(n),!0).forEach(function(r){L2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L2e(t,e,n){return e=F2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F2e(t){var e=B2e(t,"string");return Lh(e)=="symbol"?e:e+""}function B2e(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}function A8(t,e){if(t==null)return{};var n=$2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var z2e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return le.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function wY(t,e){var n;if(le.isValidElement(t))n=le.cloneElement(t,e);else if(Cn(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,l=e.key,c=A8(e,D2e),u=_n(c,!1);u.offset;var d=A8(u,I2e);n=le.createElement("line",Zf({},d,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:l}))}return n}function q2e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=$s($s({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return wY(i,u)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function U2e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=$s($s({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return wY(i,u)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function H2e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?i+o-p:d[h+1]-p;if(g<=0)return null;var v=h%e.length;return le.createElement("rect",{key:"react-".concat(h),y:p,x:r,height:g,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function V2e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+s-s)}).sort(function(p,h){return p-h});s!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?s+l-p:d[h+1]-p;if(g<=0)return null;var v=h%r.length;return le.createElement("rect",{key:"react-".concat(h),x:p,y:o,width:g,height:c,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var W2e=function(e,n){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return DG(hR($s($s($s({},zg.defaultProps),r),{},{ticks:su(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},K2e=function(e,n){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return DG(hR($s($s($s({},zg.defaultProps),r),{},{ticks:su(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},Ap={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hm(t){var e,n,r,i,s,o,l=cR(),c=uR(),u=Rje(),d=$s($s({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ap.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Ap.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Ap.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Ap.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Ap.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Ap.verticalFill,x:dt(t.x)?t.x:u.left,y:dt(t.y)?t.y:u.top,width:dt(t.width)?t.width:u.width,height:dt(t.height)?t.height:u.height}),f=d.x,p=d.y,h=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,y=d.verticalValues,b=Oje(),N=Pje();if(!dt(h)||h<=0||!dt(m)||m<=0||!dt(f)||f!==+f||!dt(p)||p!==+p)return null;var S=d.verticalCoordinatesGenerator||W2e,E=d.horizontalCoordinatesGenerator||K2e,C=d.horizontalPoints,T=d.verticalPoints;if((!C||!C.length)&&Cn(E)){var _=v&&v.length,j=E({yAxis:N?$s($s({},N),{},{ticks:_?v:N.ticks}):void 0,width:l,height:c,offset:u},_?!0:g);cu(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lh(j),"]")),Array.isArray(j)&&(C=j)}if((!T||!T.length)&&Cn(S)){var P=y&&y.length,k=S({xAxis:b?$s($s({},b),{},{ticks:P?y:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);cu(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lh(k),"]")),Array.isArray(k)&&(T=k)}return le.createElement("g",{className:"recharts-cartesian-grid"},le.createElement(z2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),le.createElement(q2e,Zf({},d,{offset:u,horizontalPoints:C,xAxis:b,yAxis:N})),le.createElement(U2e,Zf({},d,{offset:u,verticalPoints:T,xAxis:b,yAxis:N})),le.createElement(H2e,Zf({},d,{horizontalPoints:C})),le.createElement(V2e,Zf({},d,{verticalPoints:T})))}hm.displayName="CartesianGrid";var G2e=["type","layout","connectNulls","ref"],Y2e=["key"];function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function C8(t,e){if(t==null)return{};var n=X2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function X2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)}function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){ll(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cp(t){return e_e(t)||Q2e(t)||Z2e(t)||J2e()}function J2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2e(t,e){if(t){if(typeof t=="string")return MO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MO(t,e)}}function Q2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e_e(t){if(Array.isArray(t))return MO(t)}function MO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SY(r.key),r)}}function n_e(t,e,n){return e&&T8(t.prototype,e),n&&T8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r_e(t,e,n){return e=_w(e),i_e(t,NY()?Reflect.construct(e,n||[],_w(t).constructor):e.apply(t,n))}function i_e(t,e){if(e&&(ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s_e(t)}function s_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NY=function(){return!!t})()}function _w(t){return _w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_w(t)}function a_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RO(t,e)}function RO(t,e){return RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RO(t,e)}function ll(t,e,n){return e=SY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SY(t){var e=o_e(t,"string");return ng(e)=="symbol"?e:e+""}function o_e(t,e){if(ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nu=(function(t){function e(){var n;t_e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=r_e(this,e,[].concat(i)),ll(n,"state",{isAnimationFinished:!0,totalLength:0}),ll(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ll(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(y,b){return y+b});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,p=l-o,h=[],m=0,g=0;m<c.length;g+=c[m],++m)if(g+c[m]>f){h=[].concat(Cp(c.slice(0,m)),[f-g]);break}var v=h.length%2===0?[0,p]:[p];return[].concat(Cp(e.repeat(c,d)),Cp(h),v).map(function(y){return"".concat(y,"px")}).join(", ")}),ll(n,"id",tp("recharts-line-")),ll(n,"pathRef",function(o){n.mainCurve=o}),ll(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ll(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return a_e(e,t),n_e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=_a(d,$g);if(!f)return null;var p=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:Qi(g.payload,v)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return le.createElement(ur,h,f.map(function(m){return le.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=_n(this.props,!1),p=_n(c,!0),h=u.map(function(g,v){var y=Wa(Wa(Wa({key:"dot-".concat(v),r:3},f),p),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return e.renderDotItem(c,y)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return le.createElement(ur,cy({className:"recharts-line-dots",key:"dots"},m),h)}},{key:"renderCurveStatically",value:function(r,i,s,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=C8(l,G2e),p=Wa(Wa(Wa({},_n(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return le.createElement(vh,cy({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,p=o.animationEasing,h=o.animationId,m=o.animateNewValues,g=o.width,v=o.height,y=this.state,b=y.prevPoints,N=y.totalLength;return le.createElement(xl,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var E=S.t;if(b){var C=b.length/l.length,T=l.map(function(O,M){var I=Math.floor(M*C);if(b[I]){var B=b[I],U=_i(B.x,O.x),D=_i(B.y,O.y);return Wa(Wa({},O),{},{x:U(E),y:D(E)})}if(m){var z=_i(g*2,O.x),H=_i(v/2,O.y);return Wa(Wa({},O),{},{x:z(E),y:H(E)})}return Wa(Wa({},O),{},{x:O.x,y:O.y})});return s.renderCurveStatically(T,r,i)}var _=_i(0,N),j=_(E),P;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});P=s.getStrokeDasharray(j,N,k)}else P=s.generateSimpleStrokeDasharray(N,j);return s.renderCurveStatically(l,r,i,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Rh(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,p=i.left,h=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(s||!l||!l.length)return null;var y=this.state.isAnimationFinished,b=l.length===1,N=Bn("recharts-line",c),S=u&&u.allowDataOverflow,E=d&&d.allowDataOverflow,C=S||E,T=wn(v)?this.id:v,_=(r=_n(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},j=_.r,P=j===void 0?3:j,k=_.strokeWidth,O=k===void 0?2:k,M=FW(o)?o:{},I=M.clipDot,B=I===void 0?!0:I,U=P*2+O;return le.createElement(ur,{className:N},S||E?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(T)},le.createElement("rect",{x:S?p:p-h/2,y:E?f:f-m/2,width:S?h:h*2,height:E?m:m*2})),!B&&le.createElement("clipPath",{id:"clipPath-dots-".concat(T)},le.createElement("rect",{x:p-U/2,y:f-U/2,width:h+U,height:m+U}))):null,!b&&this.renderCurve(C,T),this.renderErrorBar(C,T),(b||o)&&this.renderDots(C,B,T),(!g||y)&&ic.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(Cp(r),[0]):r,o=[],l=0;l<i;++l)o=[].concat(Cp(o),Cp(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(le.isValidElement(r))s=le.cloneElement(r,i);else if(Cn(r))s=r(i);else{var o=i.key,l=C8(i,Y2e),c=Bn("recharts-line-dot",typeof r!="boolean"?r.className:"");s=le.createElement(US,cy({key:o},l,{className:c}))}return s}}])})(x.PureComponent);ll(Nu,"displayName","Line");ll(Nu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!of.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ll(Nu,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,f=c.map(function(p,h){var m=Qi(p,o);return d==="horizontal"?{x:Km({axis:n,ticks:i,bandSize:l,entry:p,index:h}),y:wn(m)?null:r.scale(m),value:m,payload:p}:{x:wn(m)?null:n.scale(m),y:Km({axis:r,ticks:s,bandSize:l,entry:p,index:h}),value:m,payload:p}});return Wa({points:f,layout:d},u)});var l_e=["layout","type","stroke","connectNulls","isRange","ref"],c_e=["key"],jY;function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function _Y(t,e){if(t==null)return{};var n=u_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function O8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O8(Object(n),!0).forEach(function(r){Jl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AY(r.key),r)}}function f_e(t,e,n){return e&&P8(t.prototype,e),n&&P8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h_e(t,e,n){return e=Ew(e),p_e(t,EY()?Reflect.construct(e,n||[],Ew(t).constructor):e.apply(t,n))}function p_e(t,e){if(e&&(rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_e(t)}function m_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EY=function(){return!!t})()}function Ew(t){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ew(t)}function g_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DO(t,e)}function DO(t,e){return DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DO(t,e)}function Jl(t,e,n){return e=AY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AY(t){var e=v_e(t,"string");return rg(e)=="symbol"?e:e+""}function v_e(t,e){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sp=(function(t){function e(){var n;d_e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=h_e(this,e,[].concat(i)),Jl(n,"state",{isAnimationFinished:!0}),Jl(n,"id",tp("recharts-area-")),Jl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Cn(o)&&o()}),Jl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Cn(o)&&o()}),n}return g_e(e,t),f_e(e,[{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,p=_n(this.props,!1),h=_n(u,!0),m=d.map(function(v,y){var b=id(id(id({key:"dot-".concat(y),r:3},p),h),{},{index:y,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,b)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return le.createElement(ur,Qf({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),f=Ad(o.map(function(p){return p.y||0}));return dt(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Ad(s.map(function(p){return p.y||0})),f)),dt(f)?le.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),f=Ad(o.map(function(p){return p.x||0}));return dt(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Ad(s.map(function(p){return p.x||0})),f)),dt(f)?le.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,p=l.isRange;l.ref;var h=_Y(l,l_e);return le.createElement(ur,{clipPath:s?"url(#clipPath-".concat(o,")"):null},le.createElement(vh,Qf({},_n(h,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&le.createElement(vh,Qf({},_n(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&p&&le.createElement(vh,Qf({},_n(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,p=o.animationEasing,h=o.animationId,m=this.state,g=m.prevPoints,v=m.prevBaseLine;return le.createElement(xl,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(g){var N=g.length/l.length,S=l.map(function(_,j){var P=Math.floor(j*N);if(g[P]){var k=g[P],O=_i(k.x,_.x),M=_i(k.y,_.y);return id(id({},_),{},{x:O(b),y:M(b)})}return _}),E;if(dt(c)&&typeof c=="number"){var C=_i(v,c);E=C(b)}else if(wn(c)||Dg(c)){var T=_i(v,0);E=T(b)}else E=c.map(function(_,j){var P=Math.floor(j*N);if(v[P]){var k=v[P],O=_i(k.x,_.x),M=_i(k.y,_.y);return id(id({},_),{},{x:O(b),y:M(b)})}return _});return s.renderAreaStatically(S,E,r,i)}return le.createElement(ur,null,le.createElement("defs",null,le.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(b))),le.createElement(ur,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,o=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,p=u.totalLength;return c&&o&&o.length&&(!d&&p>0||!Rh(d,o)||!Rh(f,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,l,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,p=i.yAxis,h=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(s||!l||!l.length)return null;var y=this.state.isAnimationFinished,b=l.length===1,N=Bn("recharts-area",c),S=f&&f.allowDataOverflow,E=p&&p.allowDataOverflow,C=S||E,T=wn(v)?this.id:v,_=(r=_n(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},j=_.r,P=j===void 0?3:j,k=_.strokeWidth,O=k===void 0?2:k,M=FW(o)?o:{},I=M.clipDot,B=I===void 0?!0:I,U=P*2+O;return le.createElement(ur,{className:N},S||E?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(T)},le.createElement("rect",{x:S?d:d-h/2,y:E?u:u-m/2,width:S?h:h*2,height:E?m:m*2})),!B&&le.createElement("clipPath",{id:"clipPath-dots-".concat(T)},le.createElement("rect",{x:d-U/2,y:u-U/2,width:h+U,height:m+U}))):null,b?null:this.renderArea(C,T),(o||b)&&this.renderDots(C,B,T),(!g||y)&&ic.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(x.PureComponent);jY=sp;Jl(sp,"displayName","Area");Jl(sp,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!of.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Jl(sp,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,o=e.props.baseValue,l=o??s;if(dt(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Jl(sp,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=e.layout,m=u&&u.length,g=jY.getBaseValue(e,n,r,i),v=h==="horizontal",y=!1,b=f.map(function(S,E){var C;m?C=u[d+E]:(C=Qi(S,c),Array.isArray(C)?y=!0:C=[g,C]);var T=C[1]==null||m&&Qi(S,c)==null;return v?{x:Km({axis:r,ticks:s,bandSize:l,entry:S,index:E}),y:T?null:i.scale(C[1]),value:C,payload:S}:{x:T?null:r.scale(C[1]),y:Km({axis:i,ticks:o,bandSize:l,entry:S,index:E}),value:C,payload:S}}),N;return m||y?N=b.map(function(S){var E=Array.isArray(S.value)?S.value[0]:null;return v?{x:S.x,y:E!=null&&S.y!=null?i.scale(E):null}:{x:E!=null?r.scale(E):null,y:S.y}}):N=v?i.scale(g):r.scale(g),id({points:b,baseLine:N,layout:h,isRange:y},p)});Jl(sp,"renderDotItem",function(t,e){var n;if(le.isValidElement(t))n=le.cloneElement(t,e);else if(Cn(t))n=t(e);else{var r=Bn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=_Y(e,c_e);n=le.createElement(US,Qf({},s,{key:i,className:r}))}return n});function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function y_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TY(r.key),r)}}function b_e(t,e,n){return e&&x_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function w_e(t,e,n){return e=Aw(e),N_e(t,CY()?Reflect.construct(e,n||[],Aw(t).constructor):e.apply(t,n))}function N_e(t,e){if(e&&(ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S_e(t)}function S_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CY=function(){return!!t})()}function Aw(t){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aw(t)}function j_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IO(t,e)}function IO(t,e){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IO(t,e)}function kY(t,e,n){return e=TY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TY(t){var e=__e(t,"string");return ig(e)=="symbol"?e:e+""}function __e(t,e){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JS=(function(t){function e(){return y_e(this,e),w_e(this,e,arguments)}return j_e(e,t),b_e(e,[{key:"render",value:function(){return null}}])})(x.Component);kY(JS,"displayName","ZAxis");kY(JS,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var E_e=["option","isActive"];function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(this,arguments)}function A_e(t,e){if(t==null)return{};var n=C_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function C_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function k_e(t){var e=t.option,n=t.isActive,r=A_e(t,E_e);return typeof e=="string"?x.createElement(NO,uy({option:x.createElement(TS,uy({type:e},r)),isActive:n,shapeType:"symbols"},r)):x.createElement(NO,uy({option:e,isActive:n,shapeType:"symbols"},r))}function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dy.apply(this,arguments)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ao(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(r){kd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PY(r.key),r)}}function O_e(t,e,n){return e&&R8(t.prototype,e),n&&R8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function P_e(t,e,n){return e=Cw(e),M_e(t,OY()?Reflect.construct(e,n||[],Cw(t).constructor):e.apply(t,n))}function M_e(t,e){if(e&&(sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R_e(t)}function R_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OY=function(){return!!t})()}function Cw(t){return Cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cw(t)}function D_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LO(t,e)}function LO(t,e){return LO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LO(t,e)}function kd(t,e,n){return e=PY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PY(t){var e=I_e(t,"string");return sg(e)=="symbol"?e:e+""}function I_e(t,e){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZS=(function(t){function e(){var n;T_e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=P_e(this,e,[].concat(i)),kd(n,"state",{isAnimationFinished:!1}),kd(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),kd(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),kd(n,"id",tp("recharts-scatter-")),n}return D_e(e,t),O_e(e,[{key:"renderSymbolsStatically",value:function(r){var i=this,s=this.props,o=s.shape,l=s.activeShape,c=s.activeIndex,u=_n(this.props,!1);return r.map(function(d,f){var p=c===f,h=p?l:o,m=Ao(Ao({},u),d);return le.createElement(ur,dy({className:"recharts-scatter-symbol",key:"symbol-".concat(d?.cx,"-").concat(d?.cy,"-").concat(d?.size,"-").concat(f)},Fy(i.props,d,f),{role:"img"}),le.createElement(k_e,dy({option:h,isActive:p,key:"symbol-".concat(f)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,s=i.points,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevPoints;return le.createElement(xl,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,m=s.map(function(g,v){var y=f&&f[v];if(y){var b=_i(y.cx,g.cx),N=_i(y.cy,g.cy),S=_i(y.size,g.size);return Ao(Ao({},g),{},{cx:b(h),cy:N(h),size:S(h)})}var E=_i(0,g.size);return Ao(Ao({},g),{},{size:E(h)})});return le.createElement(ur,null,r.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,s=r.isAnimationActive,o=this.state.prevPoints;return s&&i&&i.length&&(!o||!Rh(o,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,o=i.xAxis,l=i.yAxis,c=i.children,u=_a(c,$g);return u?u.map(function(d,f){var p=d.props,h=p.direction,m=p.dataKey;return le.cloneElement(d,{key:"".concat(h,"-").concat(m,"-").concat(s[f]),data:s,xAxis:o,yAxis:l,layout:h==="x"?"vertical":"horizontal",dataPointFormatter:function(v,y){return{x:v.cx,y:v.cy,value:h==="x"?+v.node.x:+v.node.y,errorVal:Qi(v,y)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,s=r.line,o=r.lineType,l=r.lineJointType,c=_n(this.props,!1),u=_n(s,!1),d,f;if(o==="joint")d=i.map(function(N){return{x:N.cx,y:N.cy}});else if(o==="fitting"){var p=vhe(i),h=p.xmin,m=p.xmax,g=p.a,v=p.b,y=function(S){return g*S+v};d=[{x:h,y:y(h)},{x:m,y:y(m)}]}var b=Ao(Ao(Ao({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return le.isValidElement(s)?f=le.cloneElement(s,b):Cn(s)?f=s(b):f=le.createElement(vh,dy({},b,{type:l})),le.createElement(ur,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.points,o=r.line,l=r.className,c=r.xAxis,u=r.yAxis,d=r.left,f=r.top,p=r.width,h=r.height,m=r.id,g=r.isAnimationActive;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=Bn("recharts-scatter",l),b=c&&c.allowDataOverflow,N=u&&u.allowDataOverflow,S=b||N,E=wn(m)?this.id:m;return le.createElement(ur,{className:y,clipPath:S?"url(#clipPath-".concat(E,")"):null},b||N?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(E)},le.createElement("rect",{x:b?d:d-p/2,y:N?f:f-h/2,width:b?p:p*2,height:N?h:h*2}))):null,o&&this.renderLine(),this.renderErrorBar(),le.createElement(ur,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||v)&&ic.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])})(x.PureComponent);kd(ZS,"displayName","Scatter");kd(ZS,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!of.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});kd(ZS,"getComposedData",function(t){var e=t.xAxis,n=t.yAxis,r=t.zAxis,i=t.item,s=t.displayedData,o=t.xAxisTicks,l=t.yAxisTicks,c=t.offset,u=i.props.tooltipType,d=_a(i.props.children,Ed),f=wn(e.dataKey)?i.props.dataKey:e.dataKey,p=wn(n.dataKey)?i.props.dataKey:n.dataKey,h=r&&r.dataKey,m=r?r.range:JS.defaultProps.range,g=m&&m[0],v=e.scale.bandwidth?e.scale.bandwidth():0,y=n.scale.bandwidth?n.scale.bandwidth():0,b=s.map(function(N,S){var E=Qi(N,f),C=Qi(N,p),T=!wn(h)&&Qi(N,h)||"-",_=[{name:wn(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:E,payload:N,dataKey:f,type:u},{name:wn(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:N,dataKey:p,type:u}];T!=="-"&&_.push({name:r.name||r.dataKey,unit:r.unit||"",value:T,payload:N,dataKey:h,type:u});var j=Km({axis:e,ticks:o,bandSize:v,entry:N,index:S,dataKey:f}),P=Km({axis:n,ticks:l,bandSize:y,entry:N,index:S,dataKey:p}),k=T!=="-"?r.scale(T):g,O=Math.sqrt(Math.max(k,0)/Math.PI);return Ao(Ao({},N),{},{cx:j,cy:P,x:j-O,y:P-O,xAxis:e,yAxis:n,zAxis:r,width:2*O,height:2*O,size:k,node:{x:E,y:C,z:T},tooltipPayload:_,tooltipPosition:{x:j,y:P},payload:N},d&&d[S]&&d[S].props)});return Ao({points:b},c)});function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function L_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DY(r.key),r)}}function B_e(t,e,n){return e&&F_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $_e(t,e,n){return e=kw(e),z_e(t,MY()?Reflect.construct(e,n||[],kw(t).constructor):e.apply(t,n))}function z_e(t,e){if(e&&(ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q_e(t)}function q_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MY=function(){return!!t})()}function kw(t){return kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kw(t)}function U_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FO(t,e)}function FO(t,e){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FO(t,e)}function RY(t,e,n){return e=DY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DY(t){var e=H_e(t,"string");return ag(e)=="symbol"?e:e+""}function H_e(t,e){if(ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function BO(){return BO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BO.apply(this,arguments)}function V_e(t){var e=t.xAxisId,n=cR(),r=uR(),i=uY(e);return i==null?null:x.createElement(zg,BO({},i,{className:Bn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return su(o,!0)}}))}var ac=(function(t){function e(){return L_e(this,e),$_e(this,e,arguments)}return U_e(e,t),B_e(e,[{key:"render",value:function(){return x.createElement(V_e,this.props)}}])})(x.Component);RY(ac,"displayName","XAxis");RY(ac,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function W_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FY(r.key),r)}}function G_e(t,e,n){return e&&K_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y_e(t,e,n){return e=Tw(e),X_e(t,IY()?Reflect.construct(e,n||[],Tw(t).constructor):e.apply(t,n))}function X_e(t,e){if(e&&(og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J_e(t)}function J_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IY=function(){return!!t})()}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tw(t)}function Z_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$O(t,e)}function $O(t,e){return $O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$O(t,e)}function LY(t,e,n){return e=FY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FY(t){var e=Q_e(t,"string");return og(e)=="symbol"?e:e+""}function Q_e(t,e){if(og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zO(){return zO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zO.apply(this,arguments)}var eEe=function(e){var n=e.yAxisId,r=cR(),i=uR(),s=dY(n);return s==null?null:x.createElement(zg,zO({},s,{className:Bn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return su(l,!0)}}))},Lo=(function(t){function e(){return W_e(this,e),Y_e(this,e,arguments)}return Z_e(e,t),G_e(e,[{key:"render",value:function(){return x.createElement(eEe,this.props)}}])})(x.Component);LY(Lo,"displayName","YAxis");LY(Lo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function D8(t){return iEe(t)||rEe(t)||nEe(t)||tEe()}function tEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nEe(t,e){if(t){if(typeof t=="string")return qO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(t,e)}}function rEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iEe(t){if(Array.isArray(t))return qO(t)}function qO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UO=function(e,n,r,i,s){var o=_a(e,fR),l=_a(e,GS),c=[].concat(D8(o),D8(l)),u=_a(e,XS),d="".concat(i,"Id"),f=i[0],p=n;if(c.length&&(p=c.reduce(function(g,v){if(v.props[d]===r&&sc(v.props,"extendDomain")&&dt(v.props[f])){var y=v.props[f];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},p)),u.length){var h="".concat(f,"1"),m="".concat(f,"2");p=u.reduce(function(g,v){if(v.props[d]===r&&sc(v.props,"extendDomain")&&dt(v.props[h])&&dt(v.props[m])){var y=v.props[h],b=v.props[m];return[Math.min(g[0],y,b),Math.max(g[1],y,b)]}return g},p)}return s&&s.length&&(p=s.reduce(function(g,v){return dt(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},p)),p},jC={exports:{}},I8;function sEe(){return I8||(I8=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||c,p),m=n?n+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,m=new Array(h);p<h;p++)m[p]=f[p].fn;return m},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,h,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,b,N;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,p),!0;case 5:return v.fn.call(v.context,d,f,p,h),!0;case 6:return v.fn.call(v.context,d,f,p,h,m),!0}for(N=1,b=new Array(y-1);N<y;N++)b[N-1]=arguments[N];v.fn.apply(v.context,b)}else{var S=v.length,E;for(N=0;N<S;N++)switch(v[N].once&&this.removeListener(u,v[N].fn,void 0,!0),y){case 1:v[N].fn.call(v[N].context);break;case 2:v[N].fn.call(v[N].context,d);break;case 3:v[N].fn.call(v[N].context,d,f);break;case 4:v[N].fn.call(v[N].context,d,f,p);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];v[N].fn.apply(v[N].context,b)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var h=n?n+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!p||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==d||p&&!m[g].once||f&&m[g].context!==f)&&v.push(m[g]);v.length?this._events[h]=v.length===1?v[0]:v:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(jC)),jC.exports}var aEe=sEe();const oEe=jr(aEe);var _C=new oEe,EC="recharts.syncMouseEvents";function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(t)}function lEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BY(r.key),r)}}function uEe(t,e,n){return e&&cEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AC(t,e,n){return e=BY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BY(t){var e=dEe(t,"string");return yx(e)=="symbol"?e:e+""}function dEe(t,e){if(yx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fEe=(function(){function t(){lEe(this,t),AC(this,"activeIndex",0),AC(this,"coordinateList",[]),AC(this,"layout","horizontal")}return uEe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,p=n.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,p=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function hEe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t?.[0],i=t?.[1];if(r&&i&&dt(r)&&dt(i))return!0}return!1}function pEe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function $Y(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,o=js(e,n,r,i),l=js(e,n,r,s);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function mEe(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=js(l,c,u,f),h=js(l,c,d,f);r=p.x,i=p.y,s=h.x,o=h.y}else return $Y(e);return[{x:r,y:i},{x:s,y:o}]}function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(t)}function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(n),!0).forEach(function(r){gEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gEe(t,e,n){return e=vEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vEe(t){var e=yEe(t,"string");return xx(e)=="symbol"?e:e+""}function yEe(t,e){if(xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xEe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!s||!o||p!=="ScatterChart"&&i!=="axis")return null;var m,g=vh;if(p==="ScatterChart")m=o,g=UNe;else if(p==="BarChart")m=pEe(f,o,c,d),g=iR;else if(f==="radial"){var v=$Y(o),y=v.cx,b=v.cy,N=v.radius,S=v.startAngle,E=v.endAngle;m={cx:y,cy:b,startAngle:S,endAngle:E,innerRadius:N,outerRadius:N},g=$G}else m={points:mEe(f,o,c)},g=vh;var C=m0(m0(m0(m0({stroke:"#ccc",pointerEvents:"none"},c),m),_n(h,!1)),{},{payload:l,payloadIndex:u,className:Bn("recharts-tooltip-cursor",h.className)});return x.isValidElement(h)?x.cloneElement(h,C):x.createElement(g,C)}var bEe=["item"],wEe=["children","className","width","height","style","compact","title","desc"];function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function tm(){return tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tm.apply(this,arguments)}function F8(t,e){return jEe(t)||SEe(t,e)||qY(t,e)||NEe()}function NEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function jEe(t){if(Array.isArray(t))return t}function B8(t,e){if(t==null)return{};var n=_Ee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function EEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UY(r.key),r)}}function CEe(t,e,n){return e&&AEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kEe(t,e,n){return e=Ow(e),TEe(t,zY()?Reflect.construct(e,n||[],Ow(t).constructor):e.apply(t,n))}function TEe(t,e){if(e&&(lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OEe(t)}function OEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zY=function(){return!!t})()}function Ow(t){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ow(t)}function PEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HO(t,e)}function HO(t,e){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HO(t,e)}function cg(t){return DEe(t)||REe(t)||qY(t)||MEe()}function MEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qY(t,e){if(t){if(typeof t=="string")return VO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VO(t,e)}}function REe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DEe(t){if(Array.isArray(t))return VO(t)}function VO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(r){rn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rn(t,e,n){return e=UY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UY(t){var e=IEe(t,"string");return lg(e)=="symbol"?e:e+""}function IEe(t,e){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LEe={xAxis:["bottom","top"],yAxis:["left","right"]},FEe={width:"100%",height:"100%"},HY={x:0,y:0};function g0(t){return t}var BEe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},$Ee=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=i.radius;return He(He(He({},i),js(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return He(He(He({},i),js(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return HY},QS=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(cg(l),cg(u)):l},[]);return o.length>0?o:e&&e.length&&dt(i)&&dt(s)?e.slice(i,s+1):[]};function VY(t){return t==="number"?[0,"auto"]:void 0}var WO=function(e,n,r,i){var s=e.graphicalItems,o=e.tooltipAxis,l=QS(n,e);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var h=f===void 0?l:f;p=R1(h,o.dataKey,i)}else p=f&&f[r]||l[r];return p?[].concat(cg(c),[LG(u,p)]):c},[])},z8=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},o=BEe(s,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=_0e(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=WO(e,n,d,f),h=$Ee(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},zEe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,h=RG(d,s);return r.reduce(function(m,g){var v,y=g.type.defaultProps!==void 0?He(He({},g.type.defaultProps),g.props):g.props,b=y.type,N=y.dataKey,S=y.allowDataOverflow,E=y.allowDuplicatedCategory,C=y.scale,T=y.ticks,_=y.includeHidden,j=y[o];if(m[j])return m;var P=QS(e.data,{graphicalItems:i.filter(function(F){var q,Z=o in F.props?F.props[o]:(q=F.type.defaultProps)===null||q===void 0?void 0:q[o];return Z===j}),dataStartIndex:c,dataEndIndex:u}),k=P.length,O,M,I;hEe(y.domain,S,b)&&(O=aO(y.domain,null,S),h&&(b==="number"||C!=="auto")&&(I=oy(P,N,"category")));var B=VY(b);if(!O||O.length===0){var U,D=(U=y.domain)!==null&&U!==void 0?U:B;if(N){if(O=oy(P,N,b),b==="category"&&h){var z=ghe(O);E&&z?(M=O,O=mw(0,k)):E||(O=GB(D,O,g).reduce(function(F,q){return F.indexOf(q)>=0?F:[].concat(cg(F),[q])},[]))}else if(b==="category")E?O=O.filter(function(F){return F!==""&&!wn(F)}):O=GB(D,O,g).reduce(function(F,q){return F.indexOf(q)>=0||q===""||wn(q)?F:[].concat(cg(F),[q])},[]);else if(b==="number"){var H=T0e(P,i.filter(function(F){var q,Z,te=o in F.props?F.props[o]:(q=F.type.defaultProps)===null||q===void 0?void 0:q[o],ce="hide"in F.props?F.props.hide:(Z=F.type.defaultProps)===null||Z===void 0?void 0:Z.hide;return te===j&&(_||!ce)}),N,s,d);H&&(O=H)}h&&(b==="number"||C!=="auto")&&(I=oy(P,N,"category"))}else h?O=mw(0,k):l&&l[j]&&l[j].hasStack&&b==="number"?O=p==="expand"?[0,1]:IG(l[j].stackGroups,c,u):O=MG(P,i.filter(function(F){var q=o in F.props?F.props[o]:F.type.defaultProps[o],Z="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return q===j&&(_||!Z)}),b,d,!0);if(b==="number")O=UO(f,O,j,s,T),D&&(O=aO(D,O,S));else if(b==="category"&&D){var ee=D,ae=O.every(function(F){return ee.indexOf(F)>=0});ae&&(O=ee)}}return He(He({},m),{},rn({},j,He(He({},y),{},{axisType:s,domain:O,categoricalDomain:I,duplicateDomain:M,originalDomain:(v=y.domain)!==null&&v!==void 0?v:B,isCategorical:h,layout:d})))},{})},qEe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=QS(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),h=p.length,m=RG(d,s),g=-1;return r.reduce(function(v,y){var b=y.type.defaultProps!==void 0?He(He({},y.type.defaultProps),y.props):y.props,N=b[o],S=VY("number");if(!v[N]){g++;var E;return m?E=mw(0,h):l&&l[N]&&l[N].hasStack?(E=IG(l[N].stackGroups,c,u),E=UO(f,E,N,s)):(E=aO(S,MG(p,r.filter(function(C){var T,_,j=o in C.props?C.props[o]:(T=C.type.defaultProps)===null||T===void 0?void 0:T[o],P="hide"in C.props?C.props.hide:(_=C.type.defaultProps)===null||_===void 0?void 0:_.hide;return j===N&&!P}),"number",d),i.defaultProps.allowDataOverflow),E=UO(f,E,N,s)),He(He({},v),{},rn({},N,He(He({axisType:s},i.defaultProps),{},{hide:!0,orientation:Fo(LEe,"".concat(s,".").concat(g%2),null),domain:E,originalDomain:S,isCategorical:m,layout:d})))}return v},{})},UEe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=_a(d,s),h={};return p&&p.length?h=zEe(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(h=qEe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},HEe=function(e){var n=fd(e),r=su(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:OM(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:aw(n,r)}},q8=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ga(n,Xm),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},VEe=function(e){return!e||!e.length?!1:e.some(function(n){var r=lu(n&&n.type);return r&&r.indexOf("Bar")>=0})},U8=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WEe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,p=r.margin||{},h=Ga(f,Xm),m=Ga(f,uu),g=Object.keys(c).reduce(function(E,C){var T=c[C],_=T.orientation;return!T.mirror&&!T.hide?He(He({},E),{},rn({},_,E[_]+T.width)):E},{left:p.left||0,right:p.right||0}),v=Object.keys(o).reduce(function(E,C){var T=o[C],_=T.orientation;return!T.mirror&&!T.hide?He(He({},E),{},rn({},_,Fo(E,"".concat(_))+T.height)):E},{top:p.top||0,bottom:p.bottom||0}),y=He(He({},v),g),b=y.bottom;h&&(y.bottom+=h.props.height||Xm.defaultProps.height),m&&n&&(y=C0e(y,i,r,n));var N=u-y.left-y.right,S=d-y.top-y.bottom;return He(He({brushBottom:b},y),{},{width:Math.max(N,0),height:Math.max(S,0)})},KEe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},mR=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(y,b){var N=b.graphicalItems,S=b.stackGroups,E=b.offset,C=b.updateId,T=b.dataStartIndex,_=b.dataEndIndex,j=y.barSize,P=y.layout,k=y.barGap,O=y.barCategoryGap,M=y.maxBarSize,I=U8(P),B=I.numericAxisName,U=I.cateAxisName,D=VEe(N),z=[];return N.forEach(function(H,ee){var ae=QS(y.data,{graphicalItems:[H],dataStartIndex:T,dataEndIndex:_}),F=H.type.defaultProps!==void 0?He(He({},H.type.defaultProps),H.props):H.props,q=F.dataKey,Z=F.maxBarSize,te=F["".concat(B,"Id")],ce=F["".concat(U,"Id")],ue={},ve=c.reduce(function(ge,Ne){var De=b["".concat(Ne.axisType,"Map")],Le=F["".concat(Ne.axisType,"Id")];De&&De[Le]||Ne.axisType==="zAxis"||Ih();var Pe=De[Le];return He(He({},ge),{},rn(rn({},Ne.axisType,Pe),"".concat(Ne.axisType,"Ticks"),su(Pe)))},ue),oe=ve[U],pe=ve["".concat(U,"Ticks")],xe=S&&S[te]&&S[te].hasStack&&q0e(H,S[te].stackGroups),X=lu(H.type).indexOf("Bar")>=0,Se=aw(oe,pe),W=[],G=D&&E0e({barSize:j,stackGroups:S,totalSize:KEe(ve,U)});if(X){var _e,Qe,ze=wn(Z)?M:Z,Re=(_e=(Qe=aw(oe,pe,!0))!==null&&Qe!==void 0?Qe:ze)!==null&&_e!==void 0?_e:0;W=A0e({barGap:k,barCategoryGap:O,bandSize:Re!==Se?Re:Se,sizeList:G[ce],maxBarSize:ze}),Re!==Se&&(W=W.map(function(ge){return He(He({},ge),{},{position:He(He({},ge.position),{},{offset:ge.position.offset-Re/2})})}))}var se=H&&H.type&&H.type.getComposedData;se&&z.push({props:He(He({},se(He(He({},ve),{},{displayedData:ae,props:y,dataKey:q,item:H,bandSize:Se,barPosition:W,offset:E,stackedData:xe,layout:P,dataStartIndex:T,dataEndIndex:_}))),{},rn(rn(rn({key:H.key||"item-".concat(ee)},B,ve[B]),U,ve[U]),"animationId",C)),childIndex:khe(H,y.children),item:H})}),z},h=function(y,b){var N=y.props,S=y.dataStartIndex,E=y.dataEndIndex,C=y.updateId;if(!c3({props:N}))return null;var T=N.children,_=N.layout,j=N.stackOffset,P=N.data,k=N.reverseStackOrder,O=U8(_),M=O.numericAxisName,I=O.cateAxisName,B=_a(T,r),U=B0e(P,B,"".concat(M,"Id"),"".concat(I,"Id"),j,k),D=c.reduce(function(F,q){var Z="".concat(q.axisType,"Map");return He(He({},F),{},rn({},Z,UEe(N,He(He({},q),{},{graphicalItems:B,stackGroups:q.axisType===M&&U,dataStartIndex:S,dataEndIndex:E}))))},{}),z=WEe(He(He({},D),{},{props:N,graphicalItems:B}),b?.legendBBox);Object.keys(D).forEach(function(F){D[F]=d(N,D[F],z,F.replace("Map",""),n)});var H=D["".concat(I,"Map")],ee=HEe(H),ae=p(N,He(He({},D),{},{dataStartIndex:S,dataEndIndex:E,updateId:C,graphicalItems:B,stackGroups:U,offset:z}));return He(He({formattedGraphicalItems:ae,graphicalItems:B,offset:z,stackGroups:U},ee),D)},m=(function(v){function y(b){var N,S,E;return EEe(this,y),E=kEe(this,y,[b]),rn(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),rn(E,"accessibilityManager",new fEe),rn(E,"handleLegendBBoxUpdate",function(C){if(C){var T=E.state,_=T.dataStartIndex,j=T.dataEndIndex,P=T.updateId;E.setState(He({legendBBox:C},h({props:E.props,dataStartIndex:_,dataEndIndex:j,updateId:P},He(He({},E.state),{},{legendBBox:C}))))}}),rn(E,"handleReceiveSyncEvent",function(C,T,_){if(E.props.syncId===C){if(_===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(T)}}),rn(E,"handleBrushChange",function(C){var T=C.startIndex,_=C.endIndex;if(T!==E.state.dataStartIndex||_!==E.state.dataEndIndex){var j=E.state.updateId;E.setState(function(){return He({dataStartIndex:T,dataEndIndex:_},h({props:E.props,dataStartIndex:T,dataEndIndex:_,updateId:j},E.state))}),E.triggerSyncEvent({dataStartIndex:T,dataEndIndex:_})}}),rn(E,"handleMouseEnter",function(C){var T=E.getMouseInfo(C);if(T){var _=He(He({},T),{},{isTooltipActive:!0});E.setState(_),E.triggerSyncEvent(_);var j=E.props.onMouseEnter;Cn(j)&&j(_,C)}}),rn(E,"triggeredAfterMouseMove",function(C){var T=E.getMouseInfo(C),_=T?He(He({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(_),E.triggerSyncEvent(_);var j=E.props.onMouseMove;Cn(j)&&j(_,C)}),rn(E,"handleItemMouseEnter",function(C){E.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),rn(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),rn(E,"handleMouseMove",function(C){C.persist(),E.throttleTriggeredAfterMouseMove(C)}),rn(E,"handleMouseLeave",function(C){E.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};E.setState(T),E.triggerSyncEvent(T);var _=E.props.onMouseLeave;Cn(_)&&_(T,C)}),rn(E,"handleOuterEvent",function(C){var T=Che(C),_=Fo(E.props,"".concat(T));if(T&&Cn(_)){var j,P;/.*touch.*/i.test(T)?P=E.getMouseInfo(C.changedTouches[0]):P=E.getMouseInfo(C),_((j=P)!==null&&j!==void 0?j:{},C)}}),rn(E,"handleClick",function(C){var T=E.getMouseInfo(C);if(T){var _=He(He({},T),{},{isTooltipActive:!0});E.setState(_),E.triggerSyncEvent(_);var j=E.props.onClick;Cn(j)&&j(_,C)}}),rn(E,"handleMouseDown",function(C){var T=E.props.onMouseDown;if(Cn(T)){var _=E.getMouseInfo(C);T(_,C)}}),rn(E,"handleMouseUp",function(C){var T=E.props.onMouseUp;if(Cn(T)){var _=E.getMouseInfo(C);T(_,C)}}),rn(E,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),rn(E,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseDown(C.changedTouches[0])}),rn(E,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseUp(C.changedTouches[0])}),rn(E,"handleDoubleClick",function(C){var T=E.props.onDoubleClick;if(Cn(T)){var _=E.getMouseInfo(C);T(_,C)}}),rn(E,"handleContextMenu",function(C){var T=E.props.onContextMenu;if(Cn(T)){var _=E.getMouseInfo(C);T(_,C)}}),rn(E,"triggerSyncEvent",function(C){E.props.syncId!==void 0&&_C.emit(EC,E.props.syncId,C,E.eventEmitterSymbol)}),rn(E,"applySyncEvent",function(C){var T=E.props,_=T.layout,j=T.syncMethod,P=E.state.updateId,k=C.dataStartIndex,O=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)E.setState(He({dataStartIndex:k,dataEndIndex:O},h({props:E.props,dataStartIndex:k,dataEndIndex:O,updateId:P},E.state)));else if(C.activeTooltipIndex!==void 0){var M=C.chartX,I=C.chartY,B=C.activeTooltipIndex,U=E.state,D=U.offset,z=U.tooltipTicks;if(!D)return;if(typeof j=="function")B=j(z,C);else if(j==="value"){B=-1;for(var H=0;H<z.length;H++)if(z[H].value===C.activeLabel){B=H;break}}var ee=He(He({},D),{},{x:D.left,y:D.top}),ae=Math.min(M,ee.x+ee.width),F=Math.min(I,ee.y+ee.height),q=z[B]&&z[B].value,Z=WO(E.state,E.props.data,B),te=z[B]?{x:_==="horizontal"?z[B].coordinate:ae,y:_==="horizontal"?F:z[B].coordinate}:HY;E.setState(He(He({},C),{},{activeLabel:q,activeCoordinate:te,activePayload:Z,activeTooltipIndex:B}))}else E.setState(C)}),rn(E,"renderCursor",function(C){var T,_=E.state,j=_.isTooltipActive,P=_.activeCoordinate,k=_.activePayload,O=_.offset,M=_.activeTooltipIndex,I=_.tooltipAxisBandSize,B=E.getTooltipEventType(),U=(T=C.props.active)!==null&&T!==void 0?T:j,D=E.props.layout,z=C.key||"_recharts-cursor";return le.createElement(xEe,{key:z,activeCoordinate:P,activePayload:k,activeTooltipIndex:M,chartName:n,element:C,isActive:U,layout:D,offset:O,tooltipAxisBandSize:I,tooltipEventType:B})}),rn(E,"renderPolarAxis",function(C,T,_){var j=Fo(C,"type.axisType"),P=Fo(E.state,"".concat(j,"Map")),k=C.type.defaultProps,O=k!==void 0?He(He({},k),C.props):C.props,M=P&&P[O["".concat(j,"Id")]];return x.cloneElement(C,He(He({},M),{},{className:Bn(j,M.className),key:C.key||"".concat(T,"-").concat(_),ticks:su(M,!0)}))}),rn(E,"renderPolarGrid",function(C){var T=C.props,_=T.radialLines,j=T.polarAngles,P=T.polarRadius,k=E.state,O=k.radiusAxisMap,M=k.angleAxisMap,I=fd(O),B=fd(M),U=B.cx,D=B.cy,z=B.innerRadius,H=B.outerRadius;return x.cloneElement(C,{polarAngles:Array.isArray(j)?j:su(B,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(P)?P:su(I,!0).map(function(ee){return ee.coordinate}),cx:U,cy:D,innerRadius:z,outerRadius:H,key:C.key||"polar-grid",radialLines:_})}),rn(E,"renderLegend",function(){var C=E.state.formattedGraphicalItems,T=E.props,_=T.children,j=T.width,P=T.height,k=E.props.margin||{},O=j-(k.left||0)-(k.right||0),M=OG({children:_,formattedGraphicalItems:C,legendWidth:O,legendContent:u});if(!M)return null;var I=M.item,B=B8(M,bEe);return x.cloneElement(I,He(He({},B),{},{chartWidth:j,chartHeight:P,margin:k,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),rn(E,"renderTooltip",function(){var C,T=E.props,_=T.children,j=T.accessibilityLayer,P=Ga(_,wa);if(!P)return null;var k=E.state,O=k.isTooltipActive,M=k.activeCoordinate,I=k.activePayload,B=k.activeLabel,U=k.offset,D=(C=P.props.active)!==null&&C!==void 0?C:O;return x.cloneElement(P,{viewBox:He(He({},U),{},{x:U.left,y:U.top}),active:D,label:B,payload:D?I:[],coordinate:M,accessibilityLayer:j})}),rn(E,"renderBrush",function(C){var T=E.props,_=T.margin,j=T.data,P=E.state,k=P.offset,O=P.dataStartIndex,M=P.dataEndIndex,I=P.updateId;return x.cloneElement(C,{key:C.key||"_recharts-brush",onChange:d0(E.handleBrushChange,C.props.onChange),data:j,x:dt(C.props.x)?C.props.x:k.left,y:dt(C.props.y)?C.props.y:k.top+k.height+k.brushBottom-(_.bottom||0),width:dt(C.props.width)?C.props.width:k.width,startIndex:O,endIndex:M,updateId:"brush-".concat(I)})}),rn(E,"renderReferenceElement",function(C,T,_){if(!C)return null;var j=E,P=j.clipPathId,k=E.state,O=k.xAxisMap,M=k.yAxisMap,I=k.offset,B=C.type.defaultProps||{},U=C.props,D=U.xAxisId,z=D===void 0?B.xAxisId:D,H=U.yAxisId,ee=H===void 0?B.yAxisId:H;return x.cloneElement(C,{key:C.key||"".concat(T,"-").concat(_),xAxis:O[z],yAxis:M[ee],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:P})}),rn(E,"renderActivePoints",function(C){var T=C.item,_=C.activePoint,j=C.basePoint,P=C.childIndex,k=C.isRange,O=[],M=T.props.key,I=T.item.type.defaultProps!==void 0?He(He({},T.item.type.defaultProps),T.item.props):T.item.props,B=I.activeDot,U=I.dataKey,D=He(He({index:P,dataKey:U,cx:_.x,cy:_.y,r:4,fill:rR(T.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},_n(B,!1)),D1(B));return O.push(y.renderActiveDot(B,D,"".concat(M,"-activePoint-").concat(P))),j?O.push(y.renderActiveDot(B,He(He({},D),{},{cx:j.x,cy:j.y}),"".concat(M,"-basePoint-").concat(P))):k&&O.push(null),O}),rn(E,"renderGraphicChild",function(C,T,_){var j=E.filterFormatItem(C,T,_);if(!j)return null;var P=E.getTooltipEventType(),k=E.state,O=k.isTooltipActive,M=k.tooltipAxis,I=k.activeTooltipIndex,B=k.activeLabel,U=E.props.children,D=Ga(U,wa),z=j.props,H=z.points,ee=z.isRange,ae=z.baseLine,F=j.item.type.defaultProps!==void 0?He(He({},j.item.type.defaultProps),j.item.props):j.item.props,q=F.activeDot,Z=F.hide,te=F.activeBar,ce=F.activeShape,ue=!!(!Z&&O&&D&&(q||te||ce)),ve={};P!=="axis"&&D&&D.props.trigger==="click"?ve={onClick:d0(E.handleItemMouseEnter,C.props.onClick)}:P!=="axis"&&(ve={onMouseLeave:d0(E.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:d0(E.handleItemMouseEnter,C.props.onMouseEnter)});var oe=x.cloneElement(C,He(He({},j.props),ve));function pe(Ne){return typeof M.dataKey=="function"?M.dataKey(Ne.payload):null}if(ue)if(I>=0){var xe,X;if(M.dataKey&&!M.allowDuplicatedCategory){var Se=typeof M.dataKey=="function"?pe:"payload.".concat(M.dataKey.toString());xe=R1(H,Se,B),X=ee&&ae&&R1(ae,Se,B)}else xe=H?.[I],X=ee&&ae&&ae[I];if(ce||te){var W=C.props.activeIndex!==void 0?C.props.activeIndex:I;return[x.cloneElement(C,He(He(He({},j.props),ve),{},{activeIndex:W})),null,null]}if(!wn(xe))return[oe].concat(cg(E.renderActivePoints({item:j,activePoint:xe,basePoint:X,childIndex:I,isRange:ee})))}else{var G,_e=(G=E.getItemByXY(E.state.activeCoordinate))!==null&&G!==void 0?G:{graphicalItem:oe},Qe=_e.graphicalItem,ze=Qe.item,Re=ze===void 0?C:ze,se=Qe.childIndex,ge=He(He(He({},j.props),ve),{},{activeIndex:se});return[x.cloneElement(Re,ge),null,null]}return ee?[oe,null,null]:[oe,null]}),rn(E,"renderCustomized",function(C,T,_){return x.cloneElement(C,He(He({key:"recharts-customized-".concat(_)},E.props),E.state))}),rn(E,"renderMap",{CartesianGrid:{handler:g0,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:g0},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:g0},YAxis:{handler:g0},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((N=b.id)!==null&&N!==void 0?N:tp("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=OK(E.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),E.state={},E}return PEe(y,v),CEe(y,[{key:"componentDidMount",value:function(){var N,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,S=N.children,E=N.data,C=N.height,T=N.layout,_=Ga(S,wa);if(_){var j=_.props.defaultIndex;if(!(typeof j!="number"||j<0||j>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[j]&&this.state.tooltipTicks[j].value,k=WO(this.state,E,j,P),O=this.state.tooltipTicks[j].coordinate,M=(this.state.offset.top+C)/2,I=T==="horizontal",B=I?{x:O,y:M}:{y:O,x:M},U=this.state.formattedGraphicalItems.find(function(z){var H=z.item;return H.type.name==="Scatter"});U&&(B=He(He({},B),U.props.points[j].tooltipPosition),k=U.props.points[j].tooltipPayload);var D={activeTooltipIndex:j,isTooltipActive:!0,activeLabel:P,activePayload:k,activeCoordinate:B};this.setState(D),this.renderCursor(_),this.accessibilityManager.setIndex(j)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var E,C;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(N){CT([Ga(N.children,wa)],[Ga(this.props.children,wa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=Ga(this.props.children,wa);if(N&&typeof N.props.shared=="boolean"){var S=N.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var S=this.container,E=S.getBoundingClientRect(),C=mve(E),T={chartX:Math.round(N.pageX-C.left),chartY:Math.round(N.pageY-C.top)},_=E.width/S.offsetWidth||1,j=this.inRange(T.chartX,T.chartY,_);if(!j)return null;var P=this.state,k=P.xAxisMap,O=P.yAxisMap,M=this.getTooltipEventType(),I=z8(this.state,this.props.data,this.props.layout,j);if(M!=="axis"&&k&&O){var B=fd(k).scale,U=fd(O).scale,D=B&&B.invert?B.invert(T.chartX):null,z=U&&U.invert?U.invert(T.chartY):null;return He(He({},T),{},{xValue:D,yValue:z},I)}return I?He(He({},T),I):null}},{key:"inRange",value:function(N,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,T=N/E,_=S/E;if(C==="horizontal"||C==="vertical"){var j=this.state.offset,P=T>=j.left&&T<=j.left+j.width&&_>=j.top&&_<=j.top+j.height;return P?{x:T,y:_}:null}var k=this.state,O=k.angleAxisMap,M=k.radiusAxisMap;if(O&&M){var I=fd(O);return JB({x:T,y:_},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,S=this.getTooltipEventType(),E=Ga(N,wa),C={};E&&S==="axis"&&(E.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=D1(this.props,this.handleOuterEvent);return He(He({},T),C)}},{key:"addListener",value:function(){_C.on(EC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){_C.removeListener(EC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,S,E){for(var C=this.state.formattedGraphicalItems,T=0,_=C.length;T<_;T++){var j=C[T];if(j.item===N||j.props.key===N.key||S===lu(j.item.type)&&E===j.childIndex)return j}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,S=this.state.offset,E=S.left,C=S.top,T=S.height,_=S.width;return le.createElement("defs",null,le.createElement("clipPath",{id:N},le.createElement("rect",{x:E,y:C,height:T,width:_})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(S,E){var C=F8(E,2),T=C[0],_=C[1];return He(He({},S),{},rn({},T,_.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(S,E){var C=F8(E,2),T=C[0],_=C[1];return He(He({},S),{},rn({},T,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[N])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(N){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[N])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(N){var S=this.state,E=S.formattedGraphicalItems,C=S.activeItem;if(E&&E.length)for(var T=0,_=E.length;T<_;T++){var j=E[T],P=j.props,k=j.item,O=k.type.defaultProps!==void 0?He(He({},k.type.defaultProps),k.props):k.props,M=lu(k.type);if(M==="Bar"){var I=(P.data||[]).find(function(z){return MNe(N,z)});if(I)return{graphicalItem:j,payload:I}}else if(M==="RadialBar"){var B=(P.data||[]).find(function(z){return JB(N,z)});if(B)return{graphicalItem:j,payload:B}}else if(HS(j,C)||VS(j,C)||hx(j,C)){var U=NSe({graphicalItem:j,activeTooltipItem:C,itemData:O.data}),D=O.activeIndex===void 0?U:O.activeIndex;return{graphicalItem:He(He({},j),{},{childIndex:D}),payload:hx(j,C)?O.data[U]:j.props.data[U]}}}return null}},{key:"render",value:function(){var N=this;if(!c3(this))return null;var S=this.props,E=S.children,C=S.className,T=S.width,_=S.height,j=S.style,P=S.compact,k=S.title,O=S.desc,M=B8(S,wEe),I=_n(M,!1);if(P)return le.createElement(m8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement(TT,tm({},I,{width:T,height:_,title:k,desc:O}),this.renderClipPath(),d3(E,this.renderMap)));if(this.props.accessibilityLayer){var B,U;I.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,I.role=(U=this.props.role)!==null&&U!==void 0?U:"application",I.onKeyDown=function(z){N.accessibilityManager.keyboardEvent(z)},I.onFocus=function(){N.accessibilityManager.focus()}}var D=this.parseEventsOfWrapper();return le.createElement(m8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement("div",tm({className:Bn("recharts-wrapper",C),style:He({position:"relative",cursor:"default",width:T,height:_},j)},D,{ref:function(H){N.container=H}}),le.createElement(TT,tm({},I,{width:T,height:_,title:k,desc:O,style:FEe}),this.renderClipPath(),d3(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(x.Component);rn(m,"displayName",n),rn(m,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),rn(m,"getDerivedStateFromProps",function(v,y){var b=v.dataKey,N=v.data,S=v.children,E=v.width,C=v.height,T=v.layout,_=v.stackOffset,j=v.margin,P=y.dataStartIndex,k=y.dataEndIndex;if(y.updateId===void 0){var O=q8(v);return He(He(He({},O),{},{updateId:0},h(He(He({props:v},O),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:N,prevWidth:E,prevHeight:C,prevLayout:T,prevStackOffset:_,prevMargin:j,prevChildren:S})}if(b!==y.prevDataKey||N!==y.prevData||E!==y.prevWidth||C!==y.prevHeight||T!==y.prevLayout||_!==y.prevStackOffset||!um(j,y.prevMargin)){var M=q8(v),I={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},B=He(He({},z8(y,N,T)),{},{updateId:y.updateId+1}),U=He(He(He({},M),I),B);return He(He(He({},U),h(He({props:v},U),y)),{},{prevDataKey:b,prevData:N,prevWidth:E,prevHeight:C,prevLayout:T,prevStackOffset:_,prevMargin:j,prevChildren:S})}if(!CT(S,y.prevChildren)){var D,z,H,ee,ae=Ga(S,Xm),F=ae&&(D=(z=ae.props)===null||z===void 0?void 0:z.startIndex)!==null&&D!==void 0?D:P,q=ae&&(H=(ee=ae.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&H!==void 0?H:k,Z=F!==P||q!==k,te=!wn(N),ce=te&&!Z?y.updateId:y.updateId+1;return He(He({updateId:ce},h(He(He({props:v},y),{},{updateId:ce,dataStartIndex:F,dataEndIndex:q}),y)),{},{prevChildren:S,dataStartIndex:F,dataEndIndex:q})}return null}),rn(m,"renderActiveDot",function(v,y,b){var N;return x.isValidElement(v)?N=x.cloneElement(v,y):Cn(v)?N=v(y):N=le.createElement(US,y),le.createElement(ur,{className:"recharts-active-dot",key:b},N)});var g=x.forwardRef(function(y,b){return le.createElement(m,tm({},y,{ref:b}))});return g.displayName=m.displayName,g},GEe=mR({chartName:"LineChart",GraphicalChild:Nu,axisComponents:[{axisType:"xAxis",AxisComp:ac},{axisType:"yAxis",AxisComp:Lo}],formatAxisMap:sR}),KO=mR({chartName:"BarChart",GraphicalChild:oa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ac},{axisType:"yAxis",AxisComp:Lo}],formatAxisMap:sR}),YEe=mR({chartName:"ComposedChart",GraphicalChild:[Nu,sp,oa,ZS],axisComponents:[{axisType:"xAxis",AxisComp:ac},{axisType:"yAxis",AxisComp:Lo},{axisType:"zAxis",AxisComp:JS}],formatAxisMap:sR});function XEe(){const{data:t,isLoading:e}=At({queryKey:["/api/dashboard/stats"]}),n=t?[{name:"Pendientes",value:t.tareasPendientes,fill:"hsl(var(--chart-4))"},{name:"En Progreso",value:t.tareasEnProgreso,fill:"hsl(var(--chart-2))"},{name:"Completadas",value:t.tareasCompletadas,fill:"hsl(var(--chart-3))"}]:[];return e?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx(Fn,{className:"h-9 w-48 mb-2"}),a.jsx(Fn,{className:"h-5 w-96"})]}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((r,i)=>a.jsxs(Fe,{children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(Fn,{className:"h-4 w-32"}),a.jsx(Fn,{className:"h-4 w-4"})]}),a.jsxs(Be,{children:[a.jsx(Fn,{className:"h-8 w-16 mb-2"}),a.jsx(Fn,{className:"h-3 w-24"})]})]},i))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:"Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Resumen general de la actividad"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(Fe,{className:"hover-elevate",children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Clientes Activos"}),a.jsx(Dd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"text-3xl font-bold",children:t?.clientesActivos||0}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["de ",t?.totalClientes||0," totales"]})]})]}),a.jsxs(Fe,{className:"hover-elevate",children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Impuestos Pendientes"}),a.jsx(qo,{className:"h-4 w-4 text-chart-4"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"text-3xl font-bold text-chart-4",children:t?.impuestosPendientes||0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"requieren atención"})]})]}),a.jsxs(Fe,{className:"hover-elevate",children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Tareas Activas"}),a.jsx(om,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"text-3xl font-bold",children:(t?.tareasPendientes||0)+(t?.tareasEnProgreso||0)}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t?.tareasGenerales||0," generales, ",t?.tareasPersonales||0," personales"]})]})]}),a.jsxs(Fe,{className:"hover-elevate",children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between gap-2 space-y-0 pb-2",children:[a.jsx(et,{className:"text-sm font-medium",children:"Manuales"}),a.jsx(N1,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"text-3xl font-bold",children:t?.manualesPublicados||0}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["de ",t?.manualesTotal||0," publicados"]})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[null,a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Wd,{className:"h-5 w-5"}),"Distribución de Tareas"]})}),a.jsx(Be,{children:a.jsx(iy,{width:"100%",height:300,children:a.jsxs(KO,{data:n,children:[a.jsx(hm,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(ac,{dataKey:"name",className:"text-xs"}),a.jsx(Lo,{className:"text-xs"}),a.jsx(wa,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),a.jsx(oa,{dataKey:"value",radius:[8,8,0,0],children:n.map((r,i)=>a.jsx(Ed,{fill:r.fill},`cell-${i}`))})]})})})]})]})]})}var a1={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var JEe=a1.exports,H8;function ZEe(){return H8||(H8=1,(function(t,e){((n,r)=>{t.exports=r()})(JEe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(j){var P=E(j);P.chunkSize=parseInt(P.chunkSize),j.step||j.chunk||(P.chunkSize=null),this._handle=new g(P),(this._handle.streamer=this)._config=P}.call(this,_),this.parseChunk=function(j,P){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let M=this._config.newline;M||(O=this._config.quoteChar||'"',M=this._handle.guessLineEndings(j,O)),j=[...j.split(M).slice(k)].join(M)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(j))!==void 0&&(j=O),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+j,O=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(j=O.meta.cursor,k=(this._finished||(this._partialLine=k.substring(j-this._baseIndex),this._baseIndex=j),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:O,workerId:u.WORKER_ID,finished:k});else if(T(this._config.chunk)&&!P){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!k||!T(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(j){T(this._config.error)?this._config.error(j):o&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:j,finished:!1})}}function f(_){var j;(_=_||{}).chunkSize||(_.chunkSize=u.RemoteChunkSize),d.call(this,_),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(j=new XMLHttpRequest,this._config.withCredentials&&(j.withCredentials=this._config.withCredentials),s||(j.onload=C(this._chunkLoaded,this),j.onerror=C(this._chunkError,this)),j.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var P,k=this._config.downloadRequestHeaders;for(P in k)j.setRequestHeader(P,k[P])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,j.setRequestHeader("Range","bytes="+this._start+"-"+O));try{j.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}s&&j.status===0&&this._chunkError()}},this._chunkLoaded=function(){j.readyState===4&&(j.status<200||400<=j.status?this._chunkError():(this._start+=this._config.chunkSize||j.responseText.length,this._finished=!this._config.chunkSize||this._start>=(P=>(P=P.getResponseHeader("Content-Range"))!==null?parseInt(P.substring(P.lastIndexOf("/")+1)):-1)(j),this.parseChunk(j.responseText)))},this._chunkError=function(P){P=j.statusText||P,this._sendError(new Error(P))}}function p(_){(_=_||{}).chunkSize||(_.chunkSize=u.LocalChunkSize),d.call(this,_);var j,P,k=typeof FileReader<"u";this.stream=function(O){this._input=O,P=O.slice||O.webkitSlice||O.mozSlice,k?((j=new FileReader).onload=C(this._chunkLoaded,this),j.onerror=C(this._chunkError,this)):j=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),O=P.call(O,this._start,M)),j.readAsText(O,this._config.encoding));k||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(j.error)}}function h(_){var j;d.call(this,_=_||{}),this.stream=function(P){return j=P,this._nextChunk()},this._nextChunk=function(){var P,k;if(!this._finished)return P=this._config.chunkSize,j=P?(k=j.substring(0,P),j.substring(P)):(k=j,""),this._finished=!j,this.parseChunk(k)}}function m(_){d.call(this,_=_||{});var j=[],P=!0,k=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&j.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),j.length?this.parseChunk(j.shift()):P=!0},this._streamData=C(function(O){try{j.push(typeof O=="string"?O:O.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(j.shift()))}catch(M){this._streamError(M)}},this),this._streamError=C(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=C(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(_){var j,P,k,O,M=Math.pow(2,53),I=-M,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,z=0,H=0,ee=!1,ae=!1,F=[],q={data:[],errors:[],meta:{}};function Z(ve){return _.skipEmptyLines==="greedy"?ve.join("").trim()==="":ve.length===1&&ve[0].length===0}function te(){if(q&&k&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),k=!1),_.skipEmptyLines&&(q.data=q.data.filter(function(xe){return!Z(xe)})),ce()){let xe=function(X,Se){T(_.transformHeader)&&(X=_.transformHeader(X,Se)),F.push(X)};if(q)if(Array.isArray(q.data[0])){for(var ve=0;ce()&&ve<q.data.length;ve++)q.data[ve].forEach(xe);q.data.splice(0,1)}else q.data.forEach(xe)}function oe(xe,X){for(var Se=_.header?{}:[],W=0;W<xe.length;W++){var G=W,_e=xe[W],_e=((Qe,ze)=>(Re=>(_.dynamicTypingFunction&&_.dynamicTyping[Re]===void 0&&(_.dynamicTyping[Re]=_.dynamicTypingFunction(Re)),(_.dynamicTyping[Re]||_.dynamicTyping)===!0))(Qe)?ze==="true"||ze==="TRUE"||ze!=="false"&&ze!=="FALSE"&&((Re=>{if(B.test(Re)&&(Re=parseFloat(Re),I<Re&&Re<M))return 1})(ze)?parseFloat(ze):U.test(ze)?new Date(ze):ze===""?null:ze):ze)(G=_.header?W>=F.length?"__parsed_extra":F[W]:G,_e=_.transform?_.transform(_e,G):_e);G==="__parsed_extra"?(Se[G]=Se[G]||[],Se[G].push(_e)):Se[G]=_e}return _.header&&(W>F.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+W,H+X):W<F.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+W,H+X)),Se}var pe;q&&(_.header||_.dynamicTyping||_.transform)&&(pe=1,!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(oe),pe=q.data.length):q.data=oe(q.data,0),_.header&&q.meta&&(q.meta.fields=F),H+=pe)}function ce(){return _.header&&F.length===0}function ue(ve,oe,pe,xe){ve={type:ve,code:oe,message:pe},xe!==void 0&&(ve.row=xe),q.errors.push(ve)}T(_.step)&&(O=_.step,_.step=function(ve){q=ve,ce()?te():(te(),q.data.length!==0&&(z+=ve.data.length,_.preview&&z>_.preview?P.abort():(q.data=q.data[0],O(q,D))))}),this.parse=function(ve,oe,pe){var xe=_.quoteChar||'"',xe=(_.newline||(_.newline=this.guessLineEndings(ve,xe)),k=!1,_.delimiter?T(_.delimiter)&&(_.delimiter=_.delimiter(ve),q.meta.delimiter=_.delimiter):((xe=((X,Se,W,G,_e)=>{var Qe,ze,Re,se;_e=_e||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var ge=0;ge<_e.length;ge++){for(var Ne,De=_e[ge],Le=0,Pe=0,qe=0,ut=(Re=void 0,new y({comments:G,delimiter:De,newline:Se,preview:10}).parse(X)),it=0;it<ut.data.length;it++)W&&Z(ut.data[it])?qe++:(Ne=ut.data[it].length,Pe+=Ne,Re===void 0?Re=Ne:0<Ne&&(Le+=Math.abs(Ne-Re),Re=Ne));0<ut.data.length&&(Pe/=ut.data.length-qe),(ze===void 0||Le<=ze)&&(se===void 0||se<Pe)&&1.99<Pe&&(ze=Le,Qe=De,se=Pe)}return{successful:!!(_.delimiter=Qe),bestDelimiter:Qe}})(ve,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=xe.bestDelimiter:(k=!0,_.delimiter=u.DefaultDelimiter),q.meta.delimiter=_.delimiter),E(_));return _.preview&&_.header&&xe.preview++,j=ve,P=new y(xe),q=P.parse(j,oe,pe),te(),ee?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,P.abort(),j=T(_.chunk)?"":j.substring(P.getCharIndex())},this.resume=function(){D.streamer._halted?(ee=!1,D.streamer.parseChunk(j,!0)):setTimeout(D.resume,3)},this.aborted=function(){return ae},this.abort=function(){ae=!0,P.abort(),q.meta.aborted=!0,T(_.complete)&&_.complete(q),j=""},this.guessLineEndings=function(X,xe){X=X.substring(0,1048576);var xe=new RegExp(v(xe)+"([^]*?)"+v(xe),"gm"),pe=(X=X.replace(xe,"")).split("\r"),xe=X.split(`
`),X=1<xe.length&&xe[0].length<pe[0].length;if(pe.length===1||X)return`
`;for(var Se=0,W=0;W<pe.length;W++)pe[W][0]===`
`&&Se++;return Se>=pe.length/2?`\r
`:"\r"}}function v(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(_){var j=(_=_||{}).delimiter,P=_.newline,k=_.comments,O=_.step,M=_.preview,I=_.fastMode,B=null,U=!1,D=_.quoteChar==null?'"':_.quoteChar,z=D;if(_.escapeChar!==void 0&&(z=_.escapeChar),(typeof j!="string"||-1<u.BAD_DELIMITERS.indexOf(j))&&(j=","),k===j)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=!1),P!==`
`&&P!=="\r"&&P!==`\r
`&&(P=`
`);var H=0,ee=!1;this.parse=function(ae,F,q){if(typeof ae!="string")throw new Error("Input must be a string");var Z=ae.length,te=j.length,ce=P.length,ue=k.length,ve=T(O),oe=[],pe=[],xe=[],X=H=0;if(!ae)return Le();if(I||I!==!1&&ae.indexOf(D)===-1){for(var Se=ae.split(P),W=0;W<Se.length;W++){if(xe=Se[W],H+=xe.length,W!==Se.length-1)H+=P.length;else if(q)return Le();if(!k||xe.substring(0,ue)!==k){if(ve){if(oe=[],se(xe.split(j)),Pe(),ee)return Le()}else se(xe.split(j));if(M&&M<=W)return oe=oe.slice(0,M),Le(!0)}}return Le()}for(var G=ae.indexOf(j,H),_e=ae.indexOf(P,H),Qe=new RegExp(v(z)+v(D),"g"),ze=ae.indexOf(D,H);;)if(ae[H]===D)for(ze=H,H++;;){if((ze=ae.indexOf(D,ze+1))===-1)return q||pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:H}),Ne();if(ze===Z-1)return Ne(ae.substring(H,ze).replace(Qe,D));if(D===z&&ae[ze+1]===z)ze++;else if(D===z||ze===0||ae[ze-1]!==z){G!==-1&&G<ze+1&&(G=ae.indexOf(j,ze+1));var Re=ge((_e=_e!==-1&&_e<ze+1?ae.indexOf(P,ze+1):_e)===-1?G:Math.min(G,_e));if(ae.substr(ze+1+Re,te)===j){xe.push(ae.substring(H,ze).replace(Qe,D)),ae[H=ze+1+Re+te]!==D&&(ze=ae.indexOf(D,H)),G=ae.indexOf(j,H),_e=ae.indexOf(P,H);break}if(Re=ge(_e),ae.substring(ze+1+Re,ze+1+Re+ce)===P){if(xe.push(ae.substring(H,ze).replace(Qe,D)),De(ze+1+Re+ce),G=ae.indexOf(j,H),ze=ae.indexOf(D,H),ve&&(Pe(),ee))return Le();if(M&&oe.length>=M)return Le(!0);break}pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:H}),ze++}}else if(k&&xe.length===0&&ae.substring(H,H+ue)===k){if(_e===-1)return Le();H=_e+ce,_e=ae.indexOf(P,H),G=ae.indexOf(j,H)}else if(G!==-1&&(G<_e||_e===-1))xe.push(ae.substring(H,G)),H=G+te,G=ae.indexOf(j,H);else{if(_e===-1)break;if(xe.push(ae.substring(H,_e)),De(_e+ce),ve&&(Pe(),ee))return Le();if(M&&oe.length>=M)return Le(!0)}return Ne();function se(qe){oe.push(qe),X=H}function ge(qe){var ut=0;return ut=qe!==-1&&(qe=ae.substring(ze+1,qe))&&qe.trim()===""?qe.length:ut}function Ne(qe){return q||(qe===void 0&&(qe=ae.substring(H)),xe.push(qe),H=Z,se(xe),ve&&Pe()),Le()}function De(qe){H=qe,se(xe),xe=[],_e=ae.indexOf(P,H)}function Le(qe){if(_.header&&!F&&oe.length&&!U){var ut=oe[0],it=Object.create(null),pt=new Set(ut);let It=!1;for(let mt=0;mt<ut.length;mt++){let yn=ut[mt];if(it[yn=T(_.transformHeader)?_.transformHeader(yn,mt):yn]){let pn,Ct=it[yn];for(;pn=yn+"_"+Ct,Ct++,pt.has(pn););pt.add(pn),ut[mt]=pn,it[yn]++,It=!0,(B=B===null?{}:B)[pn]=yn}else it[yn]=1,ut[mt]=yn;pt.add(yn)}It&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:oe,errors:pe,meta:{delimiter:j,linebreak:P,aborted:ee,truncated:!!qe,cursor:X+(F||0),renamedHeaders:B}}}function Pe(){O(Le()),oe=[],pe=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return H}}function b(_){var j=_.data,P=l[j.workerId],k=!1;if(j.error)P.userError(j.error,j.file);else if(j.results&&j.results.data){var O={abort:function(){k=!0,N(j.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(T(P.userStep)){for(var M=0;M<j.results.data.length&&(P.userStep({data:j.results.data[M],errors:j.results.errors,meta:j.results.meta},O),!k);M++);delete j.results}else T(P.userChunk)&&(P.userChunk(j.results,O,j.file),delete j.results)}j.finished&&!k&&N(j.workerId,j.results)}function N(_,j){var P=l[_];T(P.userComplete)&&P.userComplete(j),P.terminate(),delete l[_]}function S(){throw new Error("Not implemented.")}function E(_){if(typeof _!="object"||_===null)return _;var j,P=Array.isArray(_)?[]:{};for(j in _)P[j]=E(_[j]);return P}function C(_,j){return function(){_.apply(j,arguments)}}function T(_){return typeof _=="function"}return u.parse=function(_,j){var P=(j=j||{}).dynamicTyping||!1;if(T(P)&&(j.dynamicTypingFunction=P,P={}),j.dynamicTyping=P,j.transform=!!T(j.transform)&&j.transform,!j.worker||!u.WORKERS_SUPPORTED)return P=null,u.NODE_STREAM_INPUT,typeof _=="string"?(_=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(_),P=new(j.download?f:h)(j)):_.readable===!0&&T(_.read)&&T(_.on)?P=new m(j):(r.File&&_ instanceof File||_ instanceof Object)&&(P=new p(j)),P.stream(_);(P=(()=>{var k;return!!u.WORKERS_SUPPORTED&&(k=(()=>{var O=r.URL||r.webkitURL||null,M=n.toString();return u.BLOB_URL||(u.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(k=new r.Worker(k)).onmessage=b,k.id=c++,l[k.id]=k)})()).userStep=j.step,P.userChunk=j.chunk,P.userComplete=j.complete,P.userError=j.error,j.step=T(j.step),j.chunk=T(j.chunk),j.complete=T(j.complete),j.error=T(j.error),delete j.worker,P.postMessage({input:_,config:j,workerId:P.id})},u.unparse=function(_,j){var P=!1,k=!0,O=",",M=`\r
`,I='"',B=I+I,U=!1,D=null,z=!1,H=((()=>{if(typeof j=="object"){if(typeof j.delimiter!="string"||u.BAD_DELIMITERS.filter(function(F){return j.delimiter.indexOf(F)!==-1}).length||(O=j.delimiter),typeof j.quotes!="boolean"&&typeof j.quotes!="function"&&!Array.isArray(j.quotes)||(P=j.quotes),typeof j.skipEmptyLines!="boolean"&&typeof j.skipEmptyLines!="string"||(U=j.skipEmptyLines),typeof j.newline=="string"&&(M=j.newline),typeof j.quoteChar=="string"&&(I=j.quoteChar),typeof j.header=="boolean"&&(k=j.header),Array.isArray(j.columns)){if(j.columns.length===0)throw new Error("Option columns is empty");D=j.columns}j.escapeChar!==void 0&&(B=j.escapeChar+I),j.escapeFormulae instanceof RegExp?z=j.escapeFormulae:typeof j.escapeFormulae=="boolean"&&j.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(I),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return ee(null,_,U);if(typeof _[0]=="object")return ee(D||Object.keys(_[0]),_,U)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||D),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),ee(_.fields||[],_.data||[],U);throw new Error("Unable to serialize unrecognized input");function ee(F,q,Z){var te="",ce=(typeof F=="string"&&(F=JSON.parse(F)),typeof q=="string"&&(q=JSON.parse(q)),Array.isArray(F)&&0<F.length),ue=!Array.isArray(q[0]);if(ce&&k){for(var ve=0;ve<F.length;ve++)0<ve&&(te+=O),te+=ae(F[ve],ve);0<q.length&&(te+=M)}for(var oe=0;oe<q.length;oe++){var pe=(ce?F:q[oe]).length,xe=!1,X=ce?Object.keys(q[oe]).length===0:q[oe].length===0;if(Z&&!ce&&(xe=Z==="greedy"?q[oe].join("").trim()==="":q[oe].length===1&&q[oe][0].length===0),Z==="greedy"&&ce){for(var Se=[],W=0;W<pe;W++){var G=ue?F[W]:W;Se.push(q[oe][G])}xe=Se.join("").trim()===""}if(!xe){for(var _e=0;_e<pe;_e++){0<_e&&!X&&(te+=O);var Qe=ce&&ue?F[_e]:_e;te+=ae(q[oe][Qe],_e)}oe<q.length-1&&(!Z||0<pe&&!X)&&(te+=M)}}return te}function ae(F,q){var Z,te;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(te=!1,z&&typeof F=="string"&&z.test(F)&&(F="'"+F,te=!0),Z=F.toString().replace(H,B),(te=te||P===!0||typeof P=="function"&&P(F,q)||Array.isArray(P)&&P[q]||((ce,ue)=>{for(var ve=0;ve<ue.length;ve++)if(-1<ce.indexOf(ue[ve]))return!0;return!1})(Z,u.BAD_DELIMITERS)||-1<Z.indexOf(O)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?I+Z+I:Z)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=g,u.NetworkStreamer=f,u.FileStreamer=p,u.StringStreamer=h,u.ReadableStreamStreamer=m,r.jQuery&&((i=r.jQuery).fn.parse=function(_){var j=_.config||{},P=[];return this.each(function(M){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)P.push({file:this.files[I],inputElem:this,instanceConfig:i.extend({},j)})}),k(),this;function k(){if(P.length===0)T(_.complete)&&_.complete();else{var M,I,B,U,D=P[0];if(T(_.before)){var z=_.before(D.file,D.inputElem);if(typeof z=="object"){if(z.action==="abort")return M="AbortError",I=D.file,B=D.inputElem,U=z.reason,void(T(_.error)&&_.error({name:M},I,B,U));if(z.action==="skip")return void O();typeof z.config=="object"&&(D.instanceConfig=i.extend(D.instanceConfig,z.config))}else if(z==="skip")return void O()}var H=D.instanceConfig.complete;D.instanceConfig.complete=function(ee){T(H)&&H(ee,D.file,D.inputElem),O()},u.parse(D.file,D.instanceConfig)}}function O(){P.splice(0,1),k()}}),o&&(r.onmessage=function(_){_=_.data,u.WORKER_ID===void 0&&_&&(u.WORKER_ID=_.workerId),typeof _.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(_.input,_.config),finished:!0}):(r.File&&_.input instanceof File||_.input instanceof Object)&&(_=u.parse(_.input,_.config))&&r.postMessage({workerId:u.WORKER_ID,results:_,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,(h.prototype=Object.create(h.prototype)).constructor=h,(m.prototype=Object.create(d.prototype)).constructor=m,u})})(a1)),a1.exports}var QEe=ZEe();const eAe=jr(QEe),la=x.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:Xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));la.displayName="Textarea";const ii=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:Xe("w-full caption-bottom text-sm",t),...e})}));ii.displayName="Table";const si=x.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:Xe("[&_tr]:border-b",t),...e}));si.displayName="TableHeader";const ai=x.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:Xe("[&_tr:last-child]:border-0",t),...e}));ai.displayName="TableBody";const tAe=x.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:Xe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));tAe.displayName="TableFooter";const Gt=x.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:Xe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Gt.displayName="TableRow";const $e=x.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:Xe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));$e.displayName="TableHead";const Me=x.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:Xe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Me.displayName="TableCell";const nAe=x.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:Xe("mt-4 text-sm text-muted-foreground",t),...e}));nAe.displayName="TableCaption";const rAe=Jh("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ge({className:t,variant:e,...n}){return a.jsx("div",{className:Xe(rAe({variant:e}),t),...n})}function bx(t,[e,n]){return Math.min(n,Math.max(e,t))}function ej(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var iAe=[" ","Enter","ArrowUp","ArrowDown"],sAe=[" ","Enter"],Fh="Select",[tj,nj,aAe]=Jx(Fh),[qg]=Ts(Fh,[aAe,rf]),rj=rf(),[oAe,df]=qg(Fh),[lAe,cAe]=qg(Fh),WY=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:h,form:m}=t,g=rj(e),[v,y]=x.useState(null),[b,N]=x.useState(null),[S,E]=x.useState(!1),C=Qh(u),[T,_]=ao({prop:r,defaultProp:i??!1,onChange:s,caller:Fh}),[j,P]=ao({prop:o,defaultProp:l,onChange:c,caller:Fh}),k=x.useRef(null),O=v?m||!!v.closest("form"):!0,[M,I]=x.useState(new Set),B=Array.from(M).map(U=>U.props.value).join(";");return a.jsx(uS,{...g,children:a.jsxs(oAe,{required:h,scope:e,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:N,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:Es(),value:j,onValueChange:P,open:T,onOpenChange:_,dir:C,triggerPointerDownPosRef:k,disabled:p,children:[a.jsx(tj.Provider,{scope:e,children:a.jsx(lAe,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(U=>{I(D=>new Set(D).add(U))},[]),onNativeOptionRemove:x.useCallback(U=>{I(D=>{const z=new Set(D);return z.delete(U),z})},[]),children:n})}),O?a.jsxs(gX,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:f,value:j,onChange:U=>P(U.target.value),disabled:p,form:m,children:[j===void 0?a.jsx("option",{value:""}):null,Array.from(M)]},B):null]})})};WY.displayName=Fh;var KY="SelectTrigger",GY=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=rj(n),o=df(KY,n),l=o.disabled||r,c=Tn(e,o.onTriggerChange),u=nj(n),d=x.useRef("touch"),[f,p,h]=yX(g=>{const v=u().filter(N=>!N.disabled),y=v.find(N=>N.value===o.value),b=xX(v,g,y);b!==void 0&&o.onValueChange(b.value)}),m=g=>{l||(o.onOpenChange(!0),h()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(tb,{asChild:!0,...s,children:a.jsx(Ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":vX(o.value)?"":void 0,...i,ref:c,onClick:vt(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:vt(i.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:vt(i.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(v&&g.key===" ")&&iAe.includes(g.key)&&(m(),g.preventDefault())})})})});GY.displayName=KY;var YY="SelectValue",XY=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...l}=t,c=df(YY,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=Tn(e,c.onValueNodeChange);return qs(()=>{u(d)},[u,d]),a.jsx(Ot.span,{...l,ref:f,style:{pointerEvents:"none"},children:vX(c.value)?a.jsx(a.Fragment,{children:o}):s})});XY.displayName=YY;var uAe="SelectIcon",JY=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return a.jsx(Ot.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});JY.displayName=uAe;var dAe="SelectPortal",ZY=t=>a.jsx(wP,{asChild:!0,...t});ZY.displayName=dAe;var Bh="SelectContent",QY=x.forwardRef((t,e)=>{const n=df(Bh,t.__scopeSelect),[r,i]=x.useState();if(qs(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?_d.createPortal(a.jsx(eX,{scope:t.__scopeSelect,children:a.jsx(tj.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),s):null}return a.jsx(tX,{...t,ref:e})});QY.displayName=Bh;var rl=10,[eX,ff]=qg(Bh),fAe="SelectContentImpl",hAe=_P("SelectContent.RemoveScroll"),tX=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:v,...y}=t,b=df(Bh,n),[N,S]=x.useState(null),[E,C]=x.useState(null),T=Tn(e,ue=>S(ue)),[_,j]=x.useState(null),[P,k]=x.useState(null),O=nj(n),[M,I]=x.useState(!1),B=x.useRef(!1);x.useEffect(()=>{if(N)return NP(N)},[N]),SP();const U=x.useCallback(ue=>{const[ve,...oe]=O().map(X=>X.ref.current),[pe]=oe.slice(-1),xe=document.activeElement;for(const X of ue)if(X===xe||(X?.scrollIntoView({block:"nearest"}),X===ve&&E&&(E.scrollTop=0),X===pe&&E&&(E.scrollTop=E.scrollHeight),X?.focus(),document.activeElement!==xe))return},[O,E]),D=x.useCallback(()=>U([_,N]),[U,_,N]);x.useEffect(()=>{M&&D()},[M,D]);const{onOpenChange:z,triggerPointerDownPosRef:H}=b;x.useEffect(()=>{if(N){let ue={x:0,y:0};const ve=pe=>{ue={x:Math.abs(Math.round(pe.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(pe.pageY)-(H.current?.y??0))}},oe=pe=>{ue.x<=10&&ue.y<=10?pe.preventDefault():N.contains(pe.target)||z(!1),document.removeEventListener("pointermove",ve),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",oe,{capture:!0})}}},[N,z,H]),x.useEffect(()=>{const ue=()=>z(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[z]);const[ee,ae]=yX(ue=>{const ve=O().filter(xe=>!xe.disabled),oe=ve.find(xe=>xe.ref.current===document.activeElement),pe=xX(ve,ue,oe);pe&&setTimeout(()=>pe.ref.current.focus())}),F=x.useCallback((ue,ve,oe)=>{const pe=!B.current&&!oe;(b.value!==void 0&&b.value===ve||pe)&&(j(ue),pe&&(B.current=!0))},[b.value]),q=x.useCallback(()=>N?.focus(),[N]),Z=x.useCallback((ue,ve,oe)=>{const pe=!B.current&&!oe;(b.value!==void 0&&b.value===ve||pe)&&k(ue)},[b.value]),te=r==="popper"?GO:nX,ce=te===GO?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return a.jsx(eX,{scope:n,content:N,viewport:E,onViewportChange:C,itemRefCallback:F,selectedItem:_,onItemLeave:q,itemTextRefCallback:Z,focusSelectedItem:D,selectedItemText:P,position:r,isPositioned:M,searchRef:ee,children:a.jsx(jP,{as:hAe,allowPinchZoom:!0,children:a.jsx(EP,{asChild:!0,trapped:b.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:vt(i,ue=>{b.trigger?.focus({preventScroll:!0}),ue.preventDefault()}),children:a.jsx(YN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:a.jsx(te,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ue=>ue.preventDefault(),...y,...ce,onPlaced:()=>I(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:vt(y.onKeyDown,ue=>{const ve=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ve&&ue.key.length===1&&ae(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let pe=O().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const xe=ue.target,X=pe.indexOf(xe);pe=pe.slice(X+1)}setTimeout(()=>U(pe)),ue.preventDefault()}})})})})})})});tX.displayName=fAe;var pAe="SelectItemAlignedPosition",nX=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=df(Bh,n),o=ff(Bh,n),[l,c]=x.useState(null),[u,d]=x.useState(null),f=Tn(e,T=>d(T)),p=nj(n),h=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,N=x.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&g&&v&&y){const T=s.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(s.dir!=="rtl"){const xe=P.left-_.left,X=j.left-xe,Se=T.left-X,W=T.width+Se,G=Math.max(W,_.width),_e=window.innerWidth-rl,Qe=bx(X,[rl,Math.max(rl,_e-G)]);l.style.minWidth=W+"px",l.style.left=Qe+"px"}else{const xe=_.right-P.right,X=window.innerWidth-j.right-xe,Se=window.innerWidth-T.right-X,W=T.width+Se,G=Math.max(W,_.width),_e=window.innerWidth-rl,Qe=bx(X,[rl,Math.max(rl,_e-G)]);l.style.minWidth=W+"px",l.style.right=Qe+"px"}const k=p(),O=window.innerHeight-rl*2,M=g.scrollHeight,I=window.getComputedStyle(u),B=parseInt(I.borderTopWidth,10),U=parseInt(I.paddingTop,10),D=parseInt(I.borderBottomWidth,10),z=parseInt(I.paddingBottom,10),H=B+U+M+z+D,ee=Math.min(v.offsetHeight*5,H),ae=window.getComputedStyle(g),F=parseInt(ae.paddingTop,10),q=parseInt(ae.paddingBottom,10),Z=T.top+T.height/2-rl,te=O-Z,ce=v.offsetHeight/2,ue=v.offsetTop+ce,ve=B+U+ue,oe=H-ve;if(ve<=Z){const xe=k.length>0&&v===k[k.length-1].ref.current;l.style.bottom="0px";const X=u.clientHeight-g.offsetTop-g.offsetHeight,Se=Math.max(te,ce+(xe?q:0)+X+D),W=ve+Se;l.style.height=W+"px"}else{const xe=k.length>0&&v===k[0].ref.current;l.style.top="0px";const Se=Math.max(Z,B+g.offsetTop+(xe?F:0)+ce)+oe;l.style.height=Se+"px",g.scrollTop=ve-Z+g.offsetTop}l.style.margin=`${rl}px 0`,l.style.minHeight=ee+"px",l.style.maxHeight=O+"px",r?.(),requestAnimationFrame(()=>h.current=!0)}},[p,s.trigger,s.valueNode,l,u,g,v,y,s.dir,r]);qs(()=>N(),[N]);const[S,E]=x.useState();qs(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const C=x.useCallback(T=>{T&&m.current===!0&&(N(),b?.(),m.current=!1)},[N,b]);return a.jsx(gAe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:a.jsx(Ot.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nX.displayName=pAe;var mAe="SelectPopperPosition",GO=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=rl,...s}=t,o=rj(n);return a.jsx(dS,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});GO.displayName=mAe;var[gAe,gR]=qg(Bh,{}),YO="SelectViewport",rX=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=ff(YO,n),o=gR(YO,n),l=Tn(e,s.onViewportChange),c=x.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(tj.Slot,{scope:n,children:a.jsx(Ot.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:vt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p?.current&&f){const h=Math.abs(c.current-d.scrollTop);if(h>0){const m=window.innerHeight-rl*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),y=Math.max(g,v);if(y<m){const b=y+h,N=Math.min(m,b),S=b-N;f.style.height=N+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});rX.displayName=YO;var iX="SelectGroup",[vAe,yAe]=qg(iX),xAe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Es();return a.jsx(vAe,{scope:n,id:i,children:a.jsx(Ot.div,{role:"group","aria-labelledby":i,...r,ref:e})})});xAe.displayName=iX;var sX="SelectLabel",aX=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=yAe(sX,n);return a.jsx(Ot.div,{id:i.id,...r,ref:e})});aX.displayName=sX;var Pw="SelectItem",[bAe,oX]=qg(Pw),lX=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,l=df(Pw,n),c=ff(Pw,n),u=l.value===r,[d,f]=x.useState(s??""),[p,h]=x.useState(!1),m=Tn(e,b=>c.itemRefCallback?.(b,r,i)),g=Es(),v=x.useRef("touch"),y=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(bAe,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:x.useCallback(b=>{f(N=>N||(b?.textContent??"").trim())},[]),children:a.jsx(tj.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:a.jsx(Ot.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:vt(o.onFocus,()=>h(!0)),onBlur:vt(o.onBlur,()=>h(!1)),onClick:vt(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:vt(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:vt(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:vt(o.onPointerMove,b=>{v.current=b.pointerType,i?c.onItemLeave?.():v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:vt(o.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:vt(o.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(sAe.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});lX.displayName=Pw;var Kv="SelectItemText",cX=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=df(Kv,n),l=ff(Kv,n),c=oX(Kv,n),u=cAe(Kv,n),[d,f]=x.useState(null),p=Tn(e,y=>f(y),c.onItemTextChange,y=>l.itemTextRefCallback?.(y,c.value,c.disabled)),h=d?.textContent,m=x.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return qs(()=>(g(m),()=>v(m)),[g,v,m]),a.jsxs(a.Fragment,{children:[a.jsx(Ot.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?_d.createPortal(s.children,o.valueNode):null]})});cX.displayName=Kv;var uX="SelectItemIndicator",dX=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return oX(uX,n).isSelected?a.jsx(Ot.span,{"aria-hidden":!0,...r,ref:e}):null});dX.displayName=uX;var XO="SelectScrollUpButton",fX=x.forwardRef((t,e)=>{const n=ff(XO,t.__scopeSelect),r=gR(XO,t.__scopeSelect),[i,s]=x.useState(!1),o=Tn(e,r.onScrollButtonChange);return qs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?a.jsx(pX,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fX.displayName=XO;var JO="SelectScrollDownButton",hX=x.forwardRef((t,e)=>{const n=ff(JO,t.__scopeSelect),r=gR(JO,t.__scopeSelect),[i,s]=x.useState(!1),o=Tn(e,r.onScrollButtonChange);return qs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?a.jsx(pX,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});hX.displayName=JO;var pX=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=ff("SelectScrollButton",n),o=x.useRef(null),l=nj(n),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),qs(()=>{l().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),a.jsx(Ot.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:vt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:vt(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:vt(i.onPointerLeave,()=>{c()})})}),wAe="SelectSeparator",mX=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(Ot.div,{"aria-hidden":!0,...r,ref:e})});mX.displayName=wAe;var ZO="SelectArrow",NAe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=rj(n),s=df(ZO,n),o=ff(ZO,n);return s.open&&o.position==="popper"?a.jsx(fS,{...i,...r,ref:e}):null});NAe.displayName=ZO;var SAe="SelectBubbleInput",gX=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),s=Tn(r,i),o=ej(e);return x.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(Ot.select,{...n,style:{...$se,...n.style},ref:s,defaultValue:e})});gX.displayName=SAe;function vX(t){return t===""||t===void 0}function yX(t){const e=Za(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const l=n.current+o;e(l),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function xX(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=jAe(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function jAe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var _Ae=WY,bX=GY,EAe=XY,AAe=JY,CAe=ZY,wX=QY,kAe=rX,NX=aX,SX=lX,TAe=cX,OAe=dX,jX=fX,_X=hX,EX=mX;const un=_Ae,dn=EAe,sn=x.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(bX,{ref:r,className:Xe("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(AAe,{asChild:!0,children:a.jsx(tS,{className:"h-4 w-4 opacity-50"})})]}));sn.displayName=bX.displayName;const AX=x.forwardRef(({className:t,...e},n)=>a.jsx(jX,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(zse,{className:"h-4 w-4"})}));AX.displayName=jX.displayName;const CX=x.forwardRef(({className:t,...e},n)=>a.jsx(_X,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(tS,{className:"h-4 w-4"})}));CX.displayName=_X.displayName;const an=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>a.jsx(CAe,{children:a.jsxs(wX,{ref:i,className:Xe("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(AX,{}),a.jsx(kAe,{className:Xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(CX,{})]})}));an.displayName=wX.displayName;const PAe=x.forwardRef(({className:t,...e},n)=>a.jsx(NX,{ref:n,className:Xe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));PAe.displayName=NX.displayName;const Ke=x.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(SX,{ref:r,className:Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(OAe,{children:a.jsx(AP,{className:"h-4 w-4"})})}),a.jsx(TAe,{children:e})]}));Ke.displayName=SX.displayName;const MAe=x.forwardRef(({className:t,...e},n)=>a.jsx(EX,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",t),...e}));MAe.displayName=EX.displayName;var ij="Checkbox",[RAe]=Ts(ij),[DAe,vR]=RAe(ij);function IAe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=t,[p,h]=ao({prop:n,defaultProp:i??!1,onChange:c,caller:ij}),[m,g]=x.useState(null),[v,y]=x.useState(null),b=x.useRef(!1),N=m?!!o||!!m.closest("form"):!0,S={checked:p,disabled:s,setChecked:h,control:m,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:$d(i)?!1:i,isFormControl:N,bubbleInput:v,setBubbleInput:y};return a.jsx(DAe,{scope:e,...S,children:LAe(f)?f(S):r})}var kX="CheckboxTrigger",TX=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:m}=vR(kX,t),g=Tn(i,d),v=x.useRef(c);return x.useEffect(()=>{const y=s?.form;if(y){const b=()=>f(v.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,f]),a.jsx(Ot.button,{type:"button",role:"checkbox","aria-checked":$d(c)?"mixed":c,"aria-required":u,"data-state":DX(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:vt(e,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:vt(n,y=>{f(b=>$d(b)?!0:!b),m&&h&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})});TX.displayName=kX;var yR=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=t;return a.jsx(IAe,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(TX,{...f,ref:e,__scopeCheckbox:n}),p&&a.jsx(RX,{__scopeCheckbox:n})]})})});yR.displayName=ij;var OX="CheckboxIndicator",PX=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=vR(OX,n);return a.jsx(Ca,{present:r||$d(s.checked)||s.checked===!0,children:a.jsx(Ot.span,{"data-state":DX(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});PX.displayName=OX;var MX="CheckboxBubbleInput",RX=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:p,setBubbleInput:h}=vR(MX,t),m=Tn(n,h),g=ej(s),v=cS(r);x.useEffect(()=>{const b=p;if(!b)return;const N=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(N,"checked").set,C=!i.current;if(g!==s&&E){const T=new Event("click",{bubbles:C});b.indeterminate=$d(s),E.call(b,$d(s)?!1:s),b.dispatchEvent(T)}},[p,g,s,i]);const y=x.useRef($d(s)?!1:s);return a.jsx(Ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:d,form:f,...e,tabIndex:-1,ref:m,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});RX.displayName=MX;function LAe(t){return typeof t=="function"}function $d(t){return t==="indeterminate"}function DX(t){return $d(t)?"indeterminate":t?"checked":"unchecked"}const Ur=x.forwardRef(({className:t,...e},n)=>a.jsx(yR,{ref:n,className:Xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(PX,{className:Xe("flex items-center justify-center text-current"),children:a.jsx(AP,{className:"h-4 w-4"})})}));Ur.displayName=yR.displayName;var sj="Switch",[FAe]=Ts(sj),[BAe,$Ae]=FAe(sj),IX=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[p,h]=x.useState(null),m=Tn(e,N=>h(N)),g=x.useRef(!1),v=p?d||!!p.closest("form"):!0,[y,b]=ao({prop:i,defaultProp:s??!1,onChange:u,caller:sj});return a.jsxs(BAe,{scope:n,checked:y,disabled:l,children:[a.jsx(Ot.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":$X(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:m,onClick:vt(t.onClick,N=>{b(S=>!S),v&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})}),v&&a.jsx(BX,{control:p,bubbles:!g.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});IX.displayName=sj;var LX="SwitchThumb",FX=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=$Ae(LX,n);return a.jsx(Ot.span,{"data-state":$X(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});FX.displayName=LX;var zAe="SwitchBubbleInput",BX=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=x.useRef(null),l=Tn(o,s),c=ej(n),u=cS(e);return x.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const m=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(m)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});BX.displayName=zAe;function $X(t){return t?"checked":"unchecked"}var zX=IX,qAe=FX;const ks=x.forwardRef(({className:t,...e},n)=>a.jsx(zX,{className:Xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(qAe,{className:Xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ks.displayName=zX.displayName;var qX="AlertDialog",[UAe]=Ts(qX,[M9]),Cu=M9(),UX=t=>{const{__scopeAlertDialog:e,...n}=t,r=Cu(e);return a.jsx(QN,{...r,...n,modal:!0})};UX.displayName=qX;var HAe="AlertDialogTrigger",VAe=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Cu(n);return a.jsx(P9,{...i,...r,ref:e})});VAe.displayName=HAe;var WAe="AlertDialogPortal",HX=t=>{const{__scopeAlertDialog:e,...n}=t,r=Cu(e);return a.jsx(JN,{...r,...n})};HX.displayName=WAe;var KAe="AlertDialogOverlay",VX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Cu(n);return a.jsx(_g,{...i,...r,ref:e})});VX.displayName=KAe;var pm="AlertDialogContent",[GAe,YAe]=UAe(pm),XAe=O9("AlertDialogContent"),WX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Cu(n),o=x.useRef(null),l=Tn(e,o),c=x.useRef(null);return a.jsx(qse,{contentName:pm,titleName:KX,docsSlug:"alert-dialog",children:a.jsx(GAe,{scope:n,cancelRef:c,children:a.jsxs(Eg,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:vt(i.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(XAe,{children:r}),a.jsx(ZAe,{contentRef:o})]})})})});WX.displayName=pm;var KX="AlertDialogTitle",GX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Cu(n);return a.jsx(Yx,{...i,...r,ref:e})});GX.displayName=KX;var YX="AlertDialogDescription",XX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Cu(n);return a.jsx(Xx,{...i,...r,ref:e})});XX.displayName=YX;var JAe="AlertDialogAction",JX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Cu(n);return a.jsx(ZN,{...i,...r,ref:e})});JX.displayName=JAe;var ZX="AlertDialogCancel",QX=x.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=YAe(ZX,n),s=Cu(n),o=Tn(e,i);return a.jsx(ZN,{...s,...r,ref:o})});QX.displayName=ZX;var ZAe=({contentRef:t})=>{const e=`\`${pm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${pm}\` by passing a \`${YX}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},QAe=UX,eCe=HX,eJ=VX,tJ=WX,nJ=JX,rJ=QX,iJ=GX,sJ=XX;const yc=QAe,tCe=eCe,aJ=x.forwardRef(({className:t,...e},n)=>a.jsx(eJ,{className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));aJ.displayName=eJ.displayName;const _l=x.forwardRef(({className:t,...e},n)=>a.jsxs(tCe,{children:[a.jsx(aJ,{}),a.jsx(tJ,{ref:n,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));_l.displayName=tJ.displayName;const El=({className:t,...e})=>a.jsx("div",{className:Xe("flex flex-col space-y-2 text-center sm:text-left",t),...e});El.displayName="AlertDialogHeader";const hf=({className:t,...e})=>a.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});hf.displayName="AlertDialogFooter";const Al=x.forwardRef(({className:t,...e},n)=>a.jsx(iJ,{ref:n,className:Xe("text-lg font-semibold",t),...e}));Al.displayName=iJ.displayName;const Cl=x.forwardRef(({className:t,...e},n)=>a.jsx(sJ,{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Cl.displayName=sJ.displayName;const kl=x.forwardRef(({className:t,...e},n)=>a.jsx(nJ,{ref:n,className:Xe(Ly(),t),...e}));kl.displayName=nJ.displayName;const Tl=x.forwardRef(({className:t,...e},n)=>a.jsx(rJ,{ref:n,className:Xe(Ly({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Tl.displayName=rJ.displayName;var ub=t=>t.type==="checkbox",eh=t=>t instanceof Date,ba=t=>t==null;const oJ=t=>typeof t=="object";var Bi=t=>!ba(t)&&!Array.isArray(t)&&oJ(t)&&!eh(t),lJ=t=>Bi(t)&&t.target?ub(t.target)?t.target.checked:t.target.value:t,nCe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,cJ=(t,e)=>t.has(nCe(e)),rCe=t=>{const e=t.constructor&&t.constructor.prototype;return Bi(e)&&e.hasOwnProperty("isPrototypeOf")},xR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gi(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(xR&&(t instanceof Blob||r))&&(n||Bi(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!rCe(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Gi(t[i]));else return t;return e}var aj=t=>/^\w*$/.test(t),mi=t=>t===void 0,bR=t=>Array.isArray(t)?t.filter(Boolean):[],wR=t=>bR(t.replace(/["|']|\]/g,"").split(/\.|\[/)),St=(t,e,n)=>{if(!e||!Bi(t))return n;const r=(aj(e)?[e]:wR(e)).reduce((i,s)=>ba(i)?i:i[s],t);return mi(r)||r===t?mi(t[e])?n:t[e]:r},Ya=t=>typeof t=="boolean",wr=(t,e,n)=>{let r=-1;const i=aj(e)?[e]:wR(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let c=n;if(r!==o){const u=t[l];c=Bi(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Mw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ul={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},NR=le.createContext(null);NR.displayName="HookFormContext";const oj=()=>le.useContext(NR),iCe=t=>{const{children:e,...n}=t;return le.createElement(NR.Provider,{value:n},e)};var uJ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==ul.all&&(e._proxyFormState[o]=!r||ul.all),n&&(n[o]=!0),t[o]}});return i};const SR=typeof window<"u"?le.useLayoutEffect:le.useEffect;function sCe(t){const e=oj(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,l]=le.useState(n._formState),c=le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return SR(()=>n._subscribe({name:i,formState:c.current,exact:s,callback:u=>{!r&&l({...n._formState,...u})}}),[i,r,s]),le.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),le.useMemo(()=>uJ(o,n,c.current,!1),[o,n])}var eo=t=>typeof t=="string",dJ=(t,e,n,r,i)=>eo(t)?(r&&e.watch.add(t),St(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),St(n,s))):(r&&(e.watchAll=!0),n),QO=t=>ba(t)||!oJ(t);function nu(t,e,n=new WeakSet){if(QO(t)||QO(e))return t===e;if(eh(t)&&eh(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const l=e[s];if(eh(o)&&eh(l)||Bi(o)&&Bi(l)||Array.isArray(o)&&Array.isArray(l)?!nu(o,l,n):o!==l)return!1}}return!0}function aCe(t){const e=oj(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o,compute:l}=t||{},c=le.useRef(i),u=le.useRef(l),d=le.useRef(void 0);u.current=l;const f=le.useMemo(()=>n._getWatch(r,c.current),[n,r]),[p,h]=le.useState(u.current?u.current(f):f);return SR(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:m=>{if(!s){const g=dJ(r,n._names,m.values||n._formValues,!1,c.current);if(u.current){const v=u.current(g);nu(v,d.current)||(h(v),d.current=v)}else h(g)}}}),[n,s,r,o]),le.useEffect(()=>n._removeUnmounted()),p}function oCe(t){const e=oj(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s,defaultValue:o}=t,l=cJ(i._names.array,n),c=le.useMemo(()=>St(i._formValues,n,St(i._defaultValues,n,o)),[i,n,o]),u=aCe({control:i,name:n,defaultValue:c,exact:!0}),d=sCe({control:i,name:n,exact:!0}),f=le.useRef(t),p=le.useRef(void 0),h=le.useRef(i.register(n,{...t.rules,value:u,...Ya(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const m=le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!St(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!St(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!St(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!St(d.validatingFields,n)},error:{enumerable:!0,get:()=>St(d.errors,n)}}),[d,n]),g=le.useCallback(N=>h.current.onChange({target:{value:lJ(N),name:n},type:Mw.CHANGE}),[n]),v=le.useCallback(()=>h.current.onBlur({target:{value:St(i._formValues,n),name:n},type:Mw.BLUR}),[n,i._formValues]),y=le.useCallback(N=>{const S=St(i._fields,n);S&&N&&(S._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:E=>N.setCustomValidity(E),reportValidity:()=>N.reportValidity()})},[i._fields,n]),b=le.useMemo(()=>({name:n,value:u,...Ya(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:g,onBlur:v,ref:y}),[n,r,d.disabled,g,v,y,u]);return le.useEffect(()=>{const N=i._options.shouldUnregister||s,S=p.current;S&&S!==n&&!l&&i.unregister(S),i.register(n,{...f.current.rules,...Ya(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(C,T)=>{const _=St(i._fields,C);_&&_._f&&(_._f.mount=T)};if(E(n,!0),N){const C=Gi(St(i._options.defaultValues,n,f.current.defaultValue));wr(i._defaultValues,n,C),mi(St(i._formValues,n))&&wr(i._formValues,n,C)}return!l&&i.register(n),p.current=n,()=>{(l?N&&!i._state.action:N)?i.unregister(n):E(n,!1)}},[n,i,l,s]),le.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),le.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const lCe=t=>t.render(oCe(t));var fJ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},fy=t=>Array.isArray(t)?t:[t],V8=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function hJ(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Bi(i)&&s){const o=hJ(i,s);Bi(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var xa=t=>Bi(t)&&!Object.keys(t).length,jR=t=>t.type==="file",dl=t=>typeof t=="function",Rw=t=>{if(!xR)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},pJ=t=>t.type==="select-multiple",_R=t=>t.type==="radio",cCe=t=>_R(t)||ub(t),CC=t=>Rw(t)&&t.isConnected;function uCe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=mi(t)?r++:t[e[r++]];return t}function dCe(t){for(const e in t)if(t.hasOwnProperty(e)&&!mi(t[e]))return!1;return!0}function Mi(t,e){const n=Array.isArray(e)?e:aj(e)?[e]:wR(e),r=n.length===1?t:uCe(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Bi(r)&&xa(r)||Array.isArray(r)&&dCe(r))&&Mi(t,n.slice(0,-1)),t}var fCe=t=>{for(const e in t)if(dl(t[e]))return!0;return!1};function mJ(t){return Array.isArray(t)||Bi(t)&&!fCe(t)}function e5(t,e={}){for(const n in t)mJ(t[n])?(e[n]=Array.isArray(t[n])?[]:{},e5(t[n],e[n])):mi(t[n])||(e[n]=!0);return e}function qp(t,e,n){n||(n=e5(e));for(const r in t)mJ(t[r])?mi(e)||QO(n[r])?n[r]=e5(t[r],Array.isArray(t[r])?[]:{}):qp(t[r],ba(e)?{}:e[r],n[r]):n[r]=!nu(t[r],e[r]);return n}const W8={value:!1,isValid:!1},K8={value:!0,isValid:!0};var gJ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!mi(t[0].attributes.value)?mi(t[0].value)||t[0].value===""?K8:{value:t[0].value,isValid:!0}:K8:W8}return W8},vJ=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>mi(t)?t:e?t===""?NaN:t&&+t:n&&eo(t)?new Date(t):r?r(t):t;const G8={isValid:!1,value:null};var yJ=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,G8):G8;function Y8(t){const e=t.ref;return jR(e)?e.files:_R(e)?yJ(t.refs).value:pJ(e)?[...e.selectedOptions].map(({value:n})=>n):ub(e)?gJ(t.refs).value:vJ(mi(e.value)?t.ref.value:e.value,t)}var hCe=(t,e,n,r)=>{const i={};for(const s of t){const o=St(e,s);o&&wr(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Dw=t=>t instanceof RegExp,Rv=t=>mi(t)?t:Dw(t)?t.source:Bi(t)?Dw(t.value)?t.value.source:t.value:t,X8=t=>({isOnSubmit:!t||t===ul.onSubmit,isOnBlur:t===ul.onBlur,isOnChange:t===ul.onChange,isOnAll:t===ul.all,isOnTouch:t===ul.onTouched});const J8="AsyncFunction";var pCe=t=>!!t&&!!t.validate&&!!(dl(t.validate)&&t.validate.constructor.name===J8||Bi(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===J8)),mCe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Z8=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const hy=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=St(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(hy(l,e))break}else if(Bi(l)&&hy(l,e))break}}};function Q8(t,e,n){const r=St(t,n);if(r||aj(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=St(e,s),l=St(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};i.pop()}return{name:n}}var gCe=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return xa(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||ul.all))},vCe=(t,e,n)=>!t||!e||t===e||fy(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),yCe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,xCe=(t,e)=>!bR(St(t,e)).length&&Mi(t,e),bCe=(t,e,n)=>{const r=fy(St(t,n));return wr(r,"root",e[n]),wr(t,n,r),t};function ez(t,e,n="validate"){if(eo(t)||Array.isArray(t)&&t.every(eo)||Ya(t)&&!t)return{type:n,message:eo(t)?t:"",ref:e}}var kp=t=>Bi(t)&&!Dw(t)?t:{value:t,message:""},tz=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:p,pattern:h,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=St(n,g);if(!y||e.has(g))return{};const N=l?l[0]:o,S=O=>{i&&N.reportValidity&&(N.setCustomValidity(Ya(O)?"":O||""),N.reportValidity())},E={},C=_R(o),T=ub(o),_=C||T,j=(v||jR(o))&&mi(o.value)&&mi(b)||Rw(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=fJ.bind(null,g,r,E),k=(O,M,I,B=Fc.maxLength,U=Fc.minLength)=>{const D=O?M:I;E[g]={type:O?B:U,message:D,ref:o,...P(O?B:U,D)}};if(s?!Array.isArray(b)||!b.length:c&&(!_&&(j||ba(b))||Ya(b)&&!b||T&&!gJ(l).isValid||C&&!yJ(l).isValid)){const{value:O,message:M}=eo(c)?{value:!!c,message:c}:kp(c);if(O&&(E[g]={type:Fc.required,message:M,ref:N,...P(Fc.required,M)},!r))return S(M),E}if(!j&&(!ba(f)||!ba(p))){let O,M;const I=kp(p),B=kp(f);if(!ba(b)&&!isNaN(b)){const U=o.valueAsNumber||b&&+b;ba(I.value)||(O=U>I.value),ba(B.value)||(M=U<B.value)}else{const U=o.valueAsDate||new Date(b),D=ee=>new Date(new Date().toDateString()+" "+ee),z=o.type=="time",H=o.type=="week";eo(I.value)&&b&&(O=z?D(b)>D(I.value):H?b>I.value:U>new Date(I.value)),eo(B.value)&&b&&(M=z?D(b)<D(B.value):H?b<B.value:U<new Date(B.value))}if((O||M)&&(k(!!O,I.message,B.message,Fc.max,Fc.min),!r))return S(E[g].message),E}if((u||d)&&!j&&(eo(b)||s&&Array.isArray(b))){const O=kp(u),M=kp(d),I=!ba(O.value)&&b.length>+O.value,B=!ba(M.value)&&b.length<+M.value;if((I||B)&&(k(I,O.message,M.message),!r))return S(E[g].message),E}if(h&&!j&&eo(b)){const{value:O,message:M}=kp(h);if(Dw(O)&&!b.match(O)&&(E[g]={type:Fc.pattern,message:M,ref:o,...P(Fc.pattern,M)},!r))return S(M),E}if(m){if(dl(m)){const O=await m(b,n),M=ez(O,N);if(M&&(E[g]={...M,...P(Fc.validate,M.message)},!r))return S(M.message),E}else if(Bi(m)){let O={};for(const M in m){if(!xa(O)&&!r)break;const I=ez(await m[M](b,n),N,M);I&&(O={...I,...P(M,I.message)},S(I.message),r&&(E[g]=O))}if(!xa(O)&&(E[g]={ref:N,...O},!r))return E}}return S(!0),E};const wCe={mode:ul.onSubmit,reValidateMode:ul.onChange,shouldFocusError:!0};function NCe(t={}){let e={...wCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:dl(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Bi(e.defaultValues)||Bi(e.values)?Gi(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Gi(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const p={array:V8(),state:V8()},h=e.criteriaMode===ul.all,m=se=>ge=>{clearTimeout(u),u=setTimeout(se,ge)},g=async se=>{if(!e.disabled&&(d.isValid||f.isValid||se)){const ge=e.resolver?xa((await T()).errors):await j(r,!0);ge!==n.isValid&&p.state.next({isValid:ge})}},v=(se,ge)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((se||Array.from(l.mount)).forEach(Ne=>{Ne&&(ge?wr(n.validatingFields,Ne,ge):Mi(n.validatingFields,Ne))}),p.state.next({validatingFields:n.validatingFields,isValidating:!xa(n.validatingFields)}))},y=(se,ge=[],Ne,De,Le=!0,Pe=!0)=>{if(De&&Ne&&!e.disabled){if(o.action=!0,Pe&&Array.isArray(St(r,se))){const qe=Ne(St(r,se),De.argA,De.argB);Le&&wr(r,se,qe)}if(Pe&&Array.isArray(St(n.errors,se))){const qe=Ne(St(n.errors,se),De.argA,De.argB);Le&&wr(n.errors,se,qe),xCe(n.errors,se)}if((d.touchedFields||f.touchedFields)&&Pe&&Array.isArray(St(n.touchedFields,se))){const qe=Ne(St(n.touchedFields,se),De.argA,De.argB);Le&&wr(n.touchedFields,se,qe)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=qp(i,s)),p.state.next({name:se,isDirty:k(se,ge),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else wr(s,se,ge)},b=(se,ge)=>{wr(n.errors,se,ge),p.state.next({errors:n.errors})},N=se=>{n.errors=se,p.state.next({errors:n.errors,isValid:!1})},S=(se,ge,Ne,De)=>{const Le=St(r,se);if(Le){const Pe=St(s,se,mi(Ne)?St(i,se):Ne);mi(Pe)||De&&De.defaultChecked||ge?wr(s,se,ge?Pe:Y8(Le._f)):I(se,Pe),o.mount&&g()}},E=(se,ge,Ne,De,Le)=>{let Pe=!1,qe=!1;const ut={name:se};if(!e.disabled){if(!Ne||De){(d.isDirty||f.isDirty)&&(qe=n.isDirty,n.isDirty=ut.isDirty=k(),Pe=qe!==ut.isDirty);const it=nu(St(i,se),ge);qe=!!St(n.dirtyFields,se),it?Mi(n.dirtyFields,se):wr(n.dirtyFields,se,!0),ut.dirtyFields=n.dirtyFields,Pe=Pe||(d.dirtyFields||f.dirtyFields)&&qe!==!it}if(Ne){const it=St(n.touchedFields,se);it||(wr(n.touchedFields,se,Ne),ut.touchedFields=n.touchedFields,Pe=Pe||(d.touchedFields||f.touchedFields)&&it!==Ne)}Pe&&Le&&p.state.next(ut)}return Pe?ut:{}},C=(se,ge,Ne,De)=>{const Le=St(n.errors,se),Pe=(d.isValid||f.isValid)&&Ya(ge)&&n.isValid!==ge;if(e.delayError&&Ne?(c=m(()=>b(se,Ne)),c(e.delayError)):(clearTimeout(u),c=null,Ne?wr(n.errors,se,Ne):Mi(n.errors,se)),(Ne?!nu(Le,Ne):Le)||!xa(De)||Pe){const qe={...De,...Pe&&Ya(ge)?{isValid:ge}:{},errors:n.errors,name:se};n={...n,...qe},p.state.next(qe)}},T=async se=>{v(se,!0);const ge=await e.resolver(s,e.context,hCe(se||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(se),ge},_=async se=>{const{errors:ge}=await T(se);if(se)for(const Ne of se){const De=St(ge,Ne);De?wr(n.errors,Ne,De):Mi(n.errors,Ne)}else n.errors=ge;return ge},j=async(se,ge,Ne={valid:!0})=>{for(const De in se){const Le=se[De];if(Le){const{_f:Pe,...qe}=Le;if(Pe){const ut=l.array.has(Pe.name),it=Le._f&&pCe(Le._f);it&&d.validatingFields&&v([Pe.name],!0);const pt=await tz(Le,l.disabled,s,h,e.shouldUseNativeValidation&&!ge,ut);if(it&&d.validatingFields&&v([Pe.name]),pt[Pe.name]&&(Ne.valid=!1,ge))break;!ge&&(St(pt,Pe.name)?ut?bCe(n.errors,pt,Pe.name):wr(n.errors,Pe.name,pt[Pe.name]):Mi(n.errors,Pe.name))}!xa(qe)&&await j(qe,ge,Ne)}}return Ne.valid},P=()=>{for(const se of l.unMount){const ge=St(r,se);ge&&(ge._f.refs?ge._f.refs.every(Ne=>!CC(Ne)):!CC(ge._f.ref))&&ue(se)}l.unMount=new Set},k=(se,ge)=>!e.disabled&&(se&&ge&&wr(s,se,ge),!nu(ee(),i)),O=(se,ge,Ne)=>dJ(se,l,{...o.mount?s:mi(ge)?i:eo(se)?{[se]:ge}:ge},Ne,ge),M=se=>bR(St(o.mount?s:i,se,e.shouldUnregister?St(i,se,[]):[])),I=(se,ge,Ne={})=>{const De=St(r,se);let Le=ge;if(De){const Pe=De._f;Pe&&(!Pe.disabled&&wr(s,se,vJ(ge,Pe)),Le=Rw(Pe.ref)&&ba(ge)?"":ge,pJ(Pe.ref)?[...Pe.ref.options].forEach(qe=>qe.selected=Le.includes(qe.value)):Pe.refs?ub(Pe.ref)?Pe.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(Le)?qe.checked=!!Le.find(ut=>ut===qe.value):qe.checked=Le===qe.value||!!Le)}):Pe.refs.forEach(qe=>qe.checked=qe.value===Le):jR(Pe.ref)?Pe.ref.value="":(Pe.ref.value=Le,Pe.ref.type||p.state.next({name:se,values:Gi(s)})))}(Ne.shouldDirty||Ne.shouldTouch)&&E(se,Le,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&H(se)},B=(se,ge,Ne)=>{for(const De in ge){if(!ge.hasOwnProperty(De))return;const Le=ge[De],Pe=se+"."+De,qe=St(r,Pe);(l.array.has(se)||Bi(Le)||qe&&!qe._f)&&!eh(Le)?B(Pe,Le,Ne):I(Pe,Le,Ne)}},U=(se,ge,Ne={})=>{const De=St(r,se),Le=l.array.has(se),Pe=Gi(ge);wr(s,se,Pe),Le?(p.array.next({name:se,values:Gi(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Ne.shouldDirty&&p.state.next({name:se,dirtyFields:qp(i,s),isDirty:k(se,Pe)})):De&&!De._f&&!ba(Pe)?B(se,Pe,Ne):I(se,Pe,Ne),Z8(se,l)&&p.state.next({...n,name:se}),p.state.next({name:o.mount?se:void 0,values:Gi(s)})},D=async se=>{o.mount=!0;const ge=se.target;let Ne=ge.name,De=!0;const Le=St(r,Ne),Pe=it=>{De=Number.isNaN(it)||eh(it)&&isNaN(it.getTime())||nu(it,St(s,Ne,it))},qe=X8(e.mode),ut=X8(e.reValidateMode);if(Le){let it,pt;const It=ge.type?Y8(Le._f):lJ(se),mt=se.type===Mw.BLUR||se.type===Mw.FOCUS_OUT,yn=!mCe(Le._f)&&!e.resolver&&!St(n.errors,Ne)&&!Le._f.deps||yCe(mt,St(n.touchedFields,Ne),n.isSubmitted,ut,qe),pn=Z8(Ne,l,mt);wr(s,Ne,It),mt?(!ge||!ge.readOnly)&&(Le._f.onBlur&&Le._f.onBlur(se),c&&c(0)):Le._f.onChange&&Le._f.onChange(se);const Ct=E(Ne,It,mt),en=!xa(Ct)||pn;if(!mt&&p.state.next({name:Ne,type:se.type,values:Gi(s)}),yn)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?mt&&g():mt||g()),en&&p.state.next({name:Ne,...pn?{}:Ct});if(!mt&&pn&&p.state.next({...n}),e.resolver){const{errors:qn}=await T([Ne]);if(Pe(It),De){const Vt=Q8(n.errors,r,Ne),fn=Q8(qn,r,Vt.name||Ne);it=fn.error,Ne=fn.name,pt=xa(qn)}}else v([Ne],!0),it=(await tz(Le,l.disabled,s,h,e.shouldUseNativeValidation))[Ne],v([Ne]),Pe(It),De&&(it?pt=!1:(d.isValid||f.isValid)&&(pt=await j(r,!0)));De&&(Le._f.deps&&(!Array.isArray(Le._f.deps)||Le._f.deps.length>0)&&H(Le._f.deps),C(Ne,pt,it,Ct))}},z=(se,ge)=>{if(St(n.errors,ge)&&se.focus)return se.focus(),1},H=async(se,ge={})=>{let Ne,De;const Le=fy(se);if(e.resolver){const Pe=await _(mi(se)?se:Le);Ne=xa(Pe),De=se?!Le.some(qe=>St(Pe,qe)):Ne}else se?(De=(await Promise.all(Le.map(async Pe=>{const qe=St(r,Pe);return await j(qe&&qe._f?{[Pe]:qe}:qe)}))).every(Boolean),!(!De&&!n.isValid)&&g()):De=Ne=await j(r);return p.state.next({...!eo(se)||(d.isValid||f.isValid)&&Ne!==n.isValid?{}:{name:se},...e.resolver||!se?{isValid:Ne}:{},errors:n.errors}),ge.shouldFocus&&!De&&hy(r,z,se?Le:l.mount),De},ee=(se,ge)=>{let Ne={...o.mount?s:i};return ge&&(Ne=hJ(ge.dirtyFields?n.dirtyFields:n.touchedFields,Ne)),mi(se)?Ne:eo(se)?St(Ne,se):se.map(De=>St(Ne,De))},ae=(se,ge)=>({invalid:!!St((ge||n).errors,se),isDirty:!!St((ge||n).dirtyFields,se),error:St((ge||n).errors,se),isValidating:!!St(n.validatingFields,se),isTouched:!!St((ge||n).touchedFields,se)}),F=se=>{se&&fy(se).forEach(ge=>Mi(n.errors,ge)),p.state.next({errors:se?n.errors:{}})},q=(se,ge,Ne)=>{const De=(St(r,se,{_f:{}})._f||{}).ref,Le=St(n.errors,se)||{},{ref:Pe,message:qe,type:ut,...it}=Le;wr(n.errors,se,{...it,...ge,ref:De}),p.state.next({name:se,errors:n.errors,isValid:!1}),Ne&&Ne.shouldFocus&&De&&De.focus&&De.focus()},Z=(se,ge)=>dl(se)?p.state.subscribe({next:Ne=>"values"in Ne&&se(O(void 0,ge),Ne)}):O(se,ge,!0),te=se=>p.state.subscribe({next:ge=>{vCe(se.name,ge.name,se.exact)&&gCe(ge,se.formState||d,Qe,se.reRenderRoot)&&se.callback({values:{...s},...n,...ge,defaultValues:i})}}).unsubscribe,ce=se=>(o.mount=!0,f={...f,...se.formState},te({...se,formState:f})),ue=(se,ge={})=>{for(const Ne of se?fy(se):l.mount)l.mount.delete(Ne),l.array.delete(Ne),ge.keepValue||(Mi(r,Ne),Mi(s,Ne)),!ge.keepError&&Mi(n.errors,Ne),!ge.keepDirty&&Mi(n.dirtyFields,Ne),!ge.keepTouched&&Mi(n.touchedFields,Ne),!ge.keepIsValidating&&Mi(n.validatingFields,Ne),!e.shouldUnregister&&!ge.keepDefaultValue&&Mi(i,Ne);p.state.next({values:Gi(s)}),p.state.next({...n,...ge.keepDirty?{isDirty:k()}:{}}),!ge.keepIsValid&&g()},ve=({disabled:se,name:ge})=>{(Ya(se)&&o.mount||se||l.disabled.has(ge))&&(se?l.disabled.add(ge):l.disabled.delete(ge))},oe=(se,ge={})=>{let Ne=St(r,se);const De=Ya(ge.disabled)||Ya(e.disabled);return wr(r,se,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:se}},name:se,mount:!0,...ge}}),l.mount.add(se),Ne?ve({disabled:Ya(ge.disabled)?ge.disabled:e.disabled,name:se}):S(se,!0,ge.value),{...De?{disabled:ge.disabled||e.disabled}:{},...e.progressive?{required:!!ge.required,min:Rv(ge.min),max:Rv(ge.max),minLength:Rv(ge.minLength),maxLength:Rv(ge.maxLength),pattern:Rv(ge.pattern)}:{},name:se,onChange:D,onBlur:D,ref:Le=>{if(Le){oe(se,ge),Ne=St(r,se);const Pe=mi(Le.value)&&Le.querySelectorAll&&Le.querySelectorAll("input,select,textarea")[0]||Le,qe=cCe(Pe),ut=Ne._f.refs||[];if(qe?ut.find(it=>it===Pe):Pe===Ne._f.ref)return;wr(r,se,{_f:{...Ne._f,...qe?{refs:[...ut.filter(CC),Pe,...Array.isArray(St(i,se))?[{}]:[]],ref:{type:Pe.type,name:se}}:{ref:Pe}}}),S(se,!1,void 0,Pe)}else Ne=St(r,se,{}),Ne._f&&(Ne._f.mount=!1),(e.shouldUnregister||ge.shouldUnregister)&&!(cJ(l.array,se)&&o.action)&&l.unMount.add(se)}}},pe=()=>e.shouldFocusError&&hy(r,z,l.mount),xe=se=>{Ya(se)&&(p.state.next({disabled:se}),hy(r,(ge,Ne)=>{const De=St(r,Ne);De&&(ge.disabled=De._f.disabled||se,Array.isArray(De._f.refs)&&De._f.refs.forEach(Le=>{Le.disabled=De._f.disabled||se}))},0,!1))},X=(se,ge)=>async Ne=>{let De;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Le=Gi(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:qe}=await T();n.errors=Pe,Le=Gi(qe)}else await j(r);if(l.disabled.size)for(const Pe of l.disabled)Mi(Le,Pe);if(Mi(n.errors,"root"),xa(n.errors)){p.state.next({errors:{}});try{await se(Le,Ne)}catch(Pe){De=Pe}}else ge&&await ge({...n.errors},Ne),pe(),setTimeout(pe);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xa(n.errors)&&!De,submitCount:n.submitCount+1,errors:n.errors}),De)throw De},Se=(se,ge={})=>{St(r,se)&&(mi(ge.defaultValue)?U(se,Gi(St(i,se))):(U(se,ge.defaultValue),wr(i,se,Gi(ge.defaultValue))),ge.keepTouched||Mi(n.touchedFields,se),ge.keepDirty||(Mi(n.dirtyFields,se),n.isDirty=ge.defaultValue?k(se,Gi(St(i,se))):k()),ge.keepError||(Mi(n.errors,se),d.isValid&&g()),p.state.next({...n}))},W=(se,ge={})=>{const Ne=se?Gi(se):i,De=Gi(Ne),Le=xa(se),Pe=Le?i:De;if(ge.keepDefaultValues||(i=Ne),!ge.keepValues){if(ge.keepDirtyValues){const qe=new Set([...l.mount,...Object.keys(qp(i,s))]);for(const ut of Array.from(qe))St(n.dirtyFields,ut)?wr(Pe,ut,St(s,ut)):U(ut,St(Pe,ut))}else{if(xR&&mi(se))for(const qe of l.mount){const ut=St(r,qe);if(ut&&ut._f){const it=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(Rw(it)){const pt=it.closest("form");if(pt){pt.reset();break}}}}if(ge.keepFieldsRef)for(const qe of l.mount)U(qe,St(Pe,qe));else r={}}s=e.shouldUnregister?ge.keepDefaultValues?Gi(i):{}:Gi(Pe),p.array.next({values:{...Pe}}),p.state.next({values:{...Pe}})}l={mount:ge.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!ge.keepIsValid||!!ge.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:ge.keepSubmitCount?n.submitCount:0,isDirty:Le?!1:ge.keepDirty?n.isDirty:!!(ge.keepDefaultValues&&!nu(se,i)),isSubmitted:ge.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Le?{}:ge.keepDirtyValues?ge.keepDefaultValues&&s?qp(i,s):n.dirtyFields:ge.keepDefaultValues&&se?qp(i,se):ge.keepDirty?n.dirtyFields:{},touchedFields:ge.keepTouched?n.touchedFields:{},errors:ge.keepErrors?n.errors:{},isSubmitSuccessful:ge.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},G=(se,ge)=>W(dl(se)?se(s):se,ge),_e=(se,ge={})=>{const Ne=St(r,se),De=Ne&&Ne._f;if(De){const Le=De.refs?De.refs[0]:De.ref;Le.focus&&(Le.focus(),ge.shouldSelect&&dl(Le.select)&&Le.select())}},Qe=se=>{n={...n,...se}},Re={control:{register:oe,unregister:ue,getFieldState:ae,handleSubmit:X,setError:q,_subscribe:te,_runSchema:T,_focusError:pe,_getWatch:O,_getDirty:k,_setValid:g,_setFieldArray:y,_setDisabledField:ve,_setErrors:N,_getFieldArray:M,_reset:W,_resetDefaultValues:()=>dl(e.defaultValues)&&e.defaultValues().then(se=>{G(se,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:xe,_subjects:p,_proxyFormState:d,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(se){o=se},get _defaultValues(){return i},get _names(){return l},set _names(se){l=se},get _formState(){return n},get _options(){return e},set _options(se){e={...e,...se}}},subscribe:ce,trigger:H,register:oe,handleSubmit:X,watch:Z,setValue:U,getValues:ee,reset:G,resetField:Se,clearErrors:F,unregister:ue,setError:q,setFocus:_e,getFieldState:ae};return{...Re,formControl:Re}}function ER(t={}){const e=le.useRef(void 0),n=le.useRef(void 0),[r,i]=le.useState({isDirty:!1,isValidating:!1,isLoading:dl(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:dl(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!dl(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=NCe(t);e.current={...l,formState:r}}const s=e.current.control;return s._options=t,SR(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),s._formState.isReady=!0,o},[s]),le.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),le.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),le.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),le.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),le.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),le.useEffect(()=>{t.values&&!nu(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),le.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=uJ(r,s),e.current}const nz=(t,e,n)=>{if(t&&"reportValidity"in t){const r=St(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},xJ=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?nz(r.ref,n,t):r.refs&&r.refs.forEach(i=>nz(i,n,t))}},SCe=(t,e)=>{e.shouldUseNativeValidation&&xJ(t,e);const n={};for(const r in t){const i=St(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(jCe(e.names||Object.keys(t),r)){const o=Object.assign({},St(n,r));wr(o,"root",s),wr(n,r,o)}else wr(n,r,s)}return n},jCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var _Ce=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=fJ(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},ECe=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve((function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&xJ({},s),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:SCe(_Ce(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}},ir;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ir||(ir={}));var rz;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(rz||(rz={}));const Ft=ir.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),od=t=>{switch(typeof t){case"undefined":return Ft.undefined;case"string":return Ft.string;case"number":return Number.isNaN(t)?Ft.nan:Ft.number;case"boolean":return Ft.boolean;case"function":return Ft.function;case"bigint":return Ft.bigint;case"symbol":return Ft.symbol;case"object":return Array.isArray(t)?Ft.array:t===null?Ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ft.promise:typeof Map<"u"&&t instanceof Map?Ft.map:typeof Set<"u"&&t instanceof Set?Ft.set:typeof Date<"u"&&t instanceof Date?Ft.date:Ft.object;default:return Ft.unknown}},ct=ir.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Su extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof Su))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ir.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Su.create=t=>new Su(t);const t5=(t,e)=>{let n;switch(t.code){case ct.invalid_type:t.received===Ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ct.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ir.jsonStringifyReplacer)}`;break;case ct.unrecognized_keys:n=`Unrecognized key(s) in object: ${ir.joinValues(t.keys,", ")}`;break;case ct.invalid_union:n="Invalid input";break;case ct.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ir.joinValues(t.options)}`;break;case ct.invalid_enum_value:n=`Invalid enum value. Expected ${ir.joinValues(t.options)}, received '${t.received}'`;break;case ct.invalid_arguments:n="Invalid function arguments";break;case ct.invalid_return_type:n="Invalid function return type";break;case ct.invalid_date:n="Invalid date";break;case ct.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ir.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ct.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ct.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ct.custom:n="Invalid input";break;case ct.invalid_intersection_types:n="Intersection results could not be merged";break;case ct.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ct.not_finite:n="Number must be finite";break;default:n=e.defaultError,ir.assertNever(t)}return{message:n}};let ACe=t5;function CCe(){return ACe}const kCe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}};function kt(t,e){const n=CCe(),r=kCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===t5?void 0:t5].filter(i=>!!i)});t.common.issues.push(r)}class oo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return jn;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return oo.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return jn;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const jn=Object.freeze({status:"aborted"}),Gv=t=>({status:"dirty",value:t}),Go=t=>({status:"valid",value:t}),iz=t=>t.status==="aborted",sz=t=>t.status==="dirty",ug=t=>t.status==="valid",Iw=t=>typeof Promise<"u"&&t instanceof Promise;var qt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(qt||(qt={}));class Jd{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const az=(t,e)=>{if(ug(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Su(t.common.issues);return this._error=n,this._error}}};function $n(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:i}}class rr{get description(){return this._def.description}_getType(e){return od(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:od(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new oo,ctx:{common:e.parent.common,data:e.data,parsedType:od(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Iw(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:od(e)},i=this._parseSync({data:e,path:r.path,parent:r});return az(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:od(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return ug(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>ug(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:od(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Iw(i)?i:Promise.resolve(i));return az(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:ct.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new fg({schema:this,typeName:En.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return zd.create(this,this._def)}nullable(){return hg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oc.create(this)}promise(){return $w.create(this,this._def)}or(e){return Fw.create([this,e],this._def)}and(e){return Bw.create(this,e,this._def)}transform(e){return new fg({...$n(this._def),schema:this,typeName:En.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new i5({...$n(this._def),innerType:this,defaultValue:n,typeName:En.ZodDefault})}brand(){return new ZCe({typeName:En.ZodBranded,type:this,...$n(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new s5({...$n(this._def),innerType:this,catchValue:n,typeName:En.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return AR.create(this,e)}readonly(){return a5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const TCe=/^c[^\s-]{8,}$/i,OCe=/^[0-9a-z]+$/,PCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RCe=/^[a-z0-9_-]{21}$/i,DCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ICe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,LCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,FCe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let kC;const BCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$Ce=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",VCe=new RegExp(`^${bJ}$`);function wJ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function WCe(t){return new RegExp(`^${wJ(t)}$`)}function KCe(t){let e=`${bJ}T${wJ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function GCe(t,e){return!!((e==="v4"||!e)&&BCe.test(t)||(e==="v6"||!e)&&zCe.test(t))}function YCe(t,e){if(!DCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function XCe(t,e){return!!((e==="v4"||!e)&&$Ce.test(t)||(e==="v6"||!e)&&qCe.test(t))}class Td extends rr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ft.string){const s=this._getOrReturnCtx(e);return kt(s,{code:ct.invalid_type,expected:Ft.string,received:s.parsedType}),jn}const r=new oo;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?kt(i,{code:ct.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&kt(i,{code:ct.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")LCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"email",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")kC||(kC=new RegExp(FCe,"u")),kC.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"emoji",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")MCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"uuid",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")RCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"nanoid",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")TCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cuid",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")OCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cuid2",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")PCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"ulid",code:ct.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),kt(i,{validation:"url",code:ct.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"regex",code:ct.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?KCe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?VCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?WCe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?ICe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"duration",code:ct.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?GCe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"ip",code:ct.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?YCe(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"jwt",code:ct.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?XCe(e.data,s.version)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"cidr",code:ct.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?UCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"base64",code:ct.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?HCe.test(e.data)||(i=this._getOrReturnCtx(e,i),kt(i,{validation:"base64url",code:ct.invalid_string,message:s.message}),r.dirty()):ir.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ct.invalid_string,...qt.errToObj(r)})}_addCheck(e){return new Td({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...qt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...qt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...qt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...qt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...qt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...qt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...qt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...qt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...qt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...qt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...qt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...qt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...qt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...qt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...qt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...qt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...qt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...qt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...qt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...qt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...qt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...qt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...qt.errToObj(n)})}nonempty(e){return this.min(1,qt.errToObj(e))}trim(){return new Td({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Td({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Td({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Td.create=t=>new Td({checks:[],typeName:En.ZodString,coerce:t?.coerce??!1,...$n(t)});function JCe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class wx extends rr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ft.number){const s=this._getOrReturnCtx(e);return kt(s,{code:ct.invalid_type,expected:Ft.number,received:s.parsedType}),jn}let r;const i=new oo;for(const s of this._def.checks)s.kind==="int"?ir.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?JCe(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.not_finite,message:s.message}),i.dirty()):ir.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,qt.toString(n))}setLimit(e,n,r,i){return new wx({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:qt.toString(i)}]})}_addCheck(e){return new wx({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:qt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:qt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:qt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ir.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}wx.create=t=>new wx({checks:[],typeName:En.ZodNumber,coerce:t?.coerce||!1,...$n(t)});class Nx extends rr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ft.bigint)return this._getInvalidInput(e);let r;const i=new oo;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),kt(r,{code:ct.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ir.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return kt(n,{code:ct.invalid_type,expected:Ft.bigint,received:n.parsedType}),jn}gte(e,n){return this.setLimit("min",e,!0,qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,qt.toString(n))}setLimit(e,n,r,i){return new Nx({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:qt.toString(i)}]})}_addCheck(e){return new Nx({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:qt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Nx.create=t=>new Nx({checks:[],typeName:En.ZodBigInt,coerce:t?.coerce??!1,...$n(t)});class n5 extends rr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ft.boolean){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.boolean,received:r.parsedType}),jn}return Go(e.data)}}n5.create=t=>new n5({typeName:En.ZodBoolean,coerce:t?.coerce||!1,...$n(t)});class Lw extends rr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ft.date){const s=this._getOrReturnCtx(e);return kt(s,{code:ct.invalid_type,expected:Ft.date,received:s.parsedType}),jn}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return kt(s,{code:ct.invalid_date}),jn}const r=new oo;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),kt(i,{code:ct.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ir.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lw({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:qt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:qt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Lw.create=t=>new Lw({checks:[],coerce:t?.coerce||!1,typeName:En.ZodDate,...$n(t)});class oz extends rr{_parse(e){if(this._getType(e)!==Ft.symbol){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.symbol,received:r.parsedType}),jn}return Go(e.data)}}oz.create=t=>new oz({typeName:En.ZodSymbol,...$n(t)});class lz extends rr{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.undefined,received:r.parsedType}),jn}return Go(e.data)}}lz.create=t=>new lz({typeName:En.ZodUndefined,...$n(t)});class cz extends rr{_parse(e){if(this._getType(e)!==Ft.null){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.null,received:r.parsedType}),jn}return Go(e.data)}}cz.create=t=>new cz({typeName:En.ZodNull,...$n(t)});class uz extends rr{constructor(){super(...arguments),this._any=!0}_parse(e){return Go(e.data)}}uz.create=t=>new uz({typeName:En.ZodAny,...$n(t)});class dz extends rr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Go(e.data)}}dz.create=t=>new dz({typeName:En.ZodUnknown,...$n(t)});class Zd extends rr{_parse(e){const n=this._getOrReturnCtx(e);return kt(n,{code:ct.invalid_type,expected:Ft.never,received:n.parsedType}),jn}}Zd.create=t=>new Zd({typeName:En.ZodNever,...$n(t)});class fz extends rr{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.void,received:r.parsedType}),jn}return Go(e.data)}}fz.create=t=>new fz({typeName:En.ZodVoid,...$n(t)});class oc extends rr{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ft.array)return kt(n,{code:ct.invalid_type,expected:Ft.array,received:n.parsedType}),jn;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(kt(n,{code:o?ct.too_big:ct.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(kt(n,{code:ct.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(kt(n,{code:ct.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new Jd(n,o,n.path,l)))).then(o=>oo.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new Jd(n,o,n.path,l)));return oo.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new oc({...this._def,minLength:{value:e,message:qt.toString(n)}})}max(e,n){return new oc({...this._def,maxLength:{value:e,message:qt.toString(n)}})}length(e,n){return new oc({...this._def,exactLength:{value:e,message:qt.toString(n)}})}nonempty(e){return this.min(1,e)}}oc.create=(t,e)=>new oc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:En.ZodArray,...$n(e)});function Up(t){if(t instanceof Di){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zd.create(Up(r))}return new Di({...t._def,shape:()=>e})}else return t instanceof oc?new oc({...t._def,type:Up(t.element)}):t instanceof zd?zd.create(Up(t.unwrap())):t instanceof hg?hg.create(Up(t.unwrap())):t instanceof $h?$h.create(t.items.map(e=>Up(e))):t}class Di extends rr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ir.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ft.object){const u=this._getOrReturnCtx(e);return kt(u,{code:ct.invalid_type,expected:Ft.object,received:u.parsedType}),jn}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Zd&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Jd(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Zd){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(kt(i,{code:ct.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Jd(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,p=await d.value;u.push({key:f,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>oo.mergeObjectSync(r,u)):oo.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return qt.errToObj,new Di({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:qt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Di({...this._def,unknownKeys:"strip"})}passthrough(){return new Di({...this._def,unknownKeys:"passthrough"})}extend(e){return new Di({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Di({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:En.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Di({...this._def,catchall:e})}pick(e){const n={};for(const r of ir.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Di({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ir.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Di({...this._def,shape:()=>n})}deepPartial(){return Up(this)}partial(e){const n={};for(const r of ir.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Di({...this._def,shape:()=>n})}required(e){const n={};for(const r of ir.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof zd;)s=s._def.innerType;n[r]=s}return new Di({...this._def,shape:()=>n})}keyof(){return NJ(ir.objectKeys(this.shape))}}Di.create=(t,e)=>new Di({shape:()=>t,unknownKeys:"strip",catchall:Zd.create(),typeName:En.ZodObject,...$n(e)});Di.strictCreate=(t,e)=>new Di({shape:()=>t,unknownKeys:"strict",catchall:Zd.create(),typeName:En.ZodObject,...$n(e)});Di.lazycreate=(t,e)=>new Di({shape:t,unknownKeys:"strip",catchall:Zd.create(),typeName:En.ZodObject,...$n(e)});class Fw extends rr{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Su(l.ctx.common.issues));return kt(n,{code:ct.invalid_union,unionErrors:o}),jn}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(c=>new Su(c));return kt(n,{code:ct.invalid_union,unionErrors:l}),jn}}get options(){return this._def.options}}Fw.create=(t,e)=>new Fw({options:t,typeName:En.ZodUnion,...$n(e)});function r5(t,e){const n=od(t),r=od(e);if(t===e)return{valid:!0,data:t};if(n===Ft.object&&r===Ft.object){const i=ir.objectKeys(e),s=ir.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const c=r5(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===Ft.array&&r===Ft.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],c=r5(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Ft.date&&r===Ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Bw extends rr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(iz(s)||iz(o))return jn;const l=r5(s.value,o.value);return l.valid?((sz(s)||sz(o))&&n.dirty(),{status:n.value,value:l.data}):(kt(r,{code:ct.invalid_intersection_types}),jn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Bw.create=(t,e,n)=>new Bw({left:t,right:e,typeName:En.ZodIntersection,...$n(n)});class $h extends rr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.array)return kt(r,{code:ct.invalid_type,expected:Ft.array,received:r.parsedType}),jn;if(r.data.length<this._def.items.length)return kt(r,{code:ct.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jn;!this._def.rest&&r.data.length>this._def.items.length&&(kt(r,{code:ct.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Jd(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>oo.mergeArray(n,o)):oo.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new $h({...this._def,rest:e})}}$h.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $h({items:t,typeName:En.ZodTuple,rest:null,...$n(e)})};class hz extends rr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.map)return kt(r,{code:ct.invalid_type,expected:Ft.map,received:r.parsedType}),jn;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new Jd(r,l,r.path,[u,"key"])),value:s._parse(new Jd(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return jn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return jn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}hz.create=(t,e,n)=>new hz({valueType:e,keyType:t,typeName:En.ZodMap,...$n(n)});class Sx extends rr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.set)return kt(r,{code:ct.invalid_type,expected:Ft.set,received:r.parsedType}),jn;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(kt(r,{code:ct.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(kt(r,{code:ct.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return jn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>s._parse(new Jd(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Sx({...this._def,minSize:{value:e,message:qt.toString(n)}})}max(e,n){return new Sx({...this._def,maxSize:{value:e,message:qt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Sx.create=(t,e)=>new Sx({valueType:t,minSize:null,maxSize:null,typeName:En.ZodSet,...$n(e)});class pz extends rr{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}pz.create=(t,e)=>new pz({getter:t,typeName:En.ZodLazy,...$n(e)});class mz extends rr{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return kt(n,{received:n.data,code:ct.invalid_literal,expected:this._def.value}),jn}return{status:"valid",value:e.data}}get value(){return this._def.value}}mz.create=(t,e)=>new mz({value:t,typeName:En.ZodLiteral,...$n(e)});function NJ(t,e){return new dg({values:t,typeName:En.ZodEnum,...$n(e)})}class dg extends rr{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return kt(n,{expected:ir.joinValues(r),received:n.parsedType,code:ct.invalid_type}),jn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return kt(n,{received:n.data,code:ct.invalid_enum_value,options:r}),jn}return Go(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return dg.create(e,{...this._def,...n})}exclude(e,n=this._def){return dg.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}dg.create=NJ;class gz extends rr{_parse(e){const n=ir.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ft.string&&r.parsedType!==Ft.number){const i=ir.objectValues(n);return kt(r,{expected:ir.joinValues(i),received:r.parsedType,code:ct.invalid_type}),jn}if(this._cache||(this._cache=new Set(ir.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ir.objectValues(n);return kt(r,{received:r.data,code:ct.invalid_enum_value,options:i}),jn}return Go(e.data)}get enum(){return this._def.values}}gz.create=(t,e)=>new gz({values:t,typeName:En.ZodNativeEnum,...$n(e)});class $w extends rr{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.promise&&n.common.async===!1)return kt(n,{code:ct.invalid_type,expected:Ft.promise,received:n.parsedType}),jn;const r=n.parsedType===Ft.promise?n.data:Promise.resolve(n.data);return Go(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$w.create=(t,e)=>new $w({type:t,typeName:En.ZodPromise,...$n(e)});class fg extends rr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===En.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return jn;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?jn:c.status==="dirty"||n.value==="dirty"?Gv(c.value):c});{if(n.value==="aborted")return jn;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?jn:l.status==="dirty"||n.value==="dirty"?Gv(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?jn:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?jn:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ug(o))return jn;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ug(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):jn);ir.assertNever(i)}}fg.create=(t,e,n)=>new fg({schema:t,typeName:En.ZodEffects,effect:e,...$n(n)});fg.createWithPreprocess=(t,e,n)=>new fg({schema:e,effect:{type:"preprocess",transform:t},typeName:En.ZodEffects,...$n(n)});class zd extends rr{_parse(e){return this._getType(e)===Ft.undefined?Go(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zd.create=(t,e)=>new zd({innerType:t,typeName:En.ZodOptional,...$n(e)});class hg extends rr{_parse(e){return this._getType(e)===Ft.null?Go(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hg.create=(t,e)=>new hg({innerType:t,typeName:En.ZodNullable,...$n(e)});class i5 extends rr{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ft.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}i5.create=(t,e)=>new i5({innerType:t,typeName:En.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$n(e)});class s5 extends rr{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Iw(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Su(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Su(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}s5.create=(t,e)=>new s5({innerType:t,typeName:En.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$n(e)});class vz extends rr{_parse(e){if(this._getType(e)!==Ft.nan){const r=this._getOrReturnCtx(e);return kt(r,{code:ct.invalid_type,expected:Ft.nan,received:r.parsedType}),jn}return{status:"valid",value:e.data}}}vz.create=t=>new vz({typeName:En.ZodNaN,...$n(t)});class ZCe extends rr{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class AR extends rr{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?jn:s.status==="dirty"?(n.dirty(),Gv(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?jn:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new AR({in:e,out:n,typeName:En.ZodPipeline})}}class a5 extends rr{_parse(e){const n=this._def.innerType._parse(e),r=i=>(ug(i)&&(i.value=Object.freeze(i.value)),i);return Iw(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}a5.create=(t,e)=>new a5({innerType:t,typeName:En.ZodReadonly,...$n(e)});var En;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(En||(En={}));const Dv=Td.create,QCe=n5.create;Zd.create;oc.create;const eke=Di.create;Fw.create;Bw.create;$h.create;dg.create;$w.create;zd.create;hg.create;const tke=iCe,SJ=x.createContext({}),Tp=({...t})=>a.jsx(SJ.Provider,{value:{name:t.name},children:a.jsx(lCe,{...t})}),lj=()=>{const t=x.useContext(SJ),e=x.useContext(jJ),{getFieldState:n,formState:r}=oj(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},jJ=x.createContext({}),zf=x.forwardRef(({className:t,...e},n)=>{const r=x.useId();return a.jsx(jJ.Provider,{value:{id:r},children:a.jsx("div",{ref:n,className:Xe("space-y-2",t),...e})})});zf.displayName="FormItem";const qf=x.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=lj();return a.jsx(ye,{ref:n,className:Xe(r&&"text-destructive",t),htmlFor:i,...e})});qf.displayName="FormLabel";const Yv=x.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=lj();return a.jsx(XN,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});Yv.displayName="FormControl";const nke=x.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=lj();return a.jsx("p",{ref:n,id:r,className:Xe("text-sm text-muted-foreground",t),...e})});nke.displayName="FormDescription";const Hp=x.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=lj(),o=i?String(i?.message??""):e;return o?a.jsx("p",{ref:r,id:s,className:Xe("text-sm font-medium text-destructive",t),...n,children:o}):null});Hp.displayName="FormMessage";const _J={100:{allowedTypes:["AUTONOMO","PARTICULAR"],allowedPeriods:["ANUAL"]},200:{allowedTypes:["EMPRESA"],allowedPeriods:["ANUAL"]},202:{allowedTypes:["EMPRESA"],allowedPeriods:["ESPECIAL_FRACCIONADO"],labels:["Abril","Octubre","Diciembre"]},130:{allowedTypes:["AUTONOMO"],allowedPeriods:["TRIMESTRAL"]},131:{allowedTypes:["AUTONOMO"],allowedPeriods:["TRIMESTRAL"]},303:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]},390:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},347:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},349:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]},720:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},190:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},180:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["ANUAL"]},111:{allowedTypes:["AUTONOMO","EMPRESA"],allowedPeriods:["MENSUAL","TRIMESTRAL"]}},cj={100:{name:"IRPF - Declaración de la Renta"},111:{name:"Retenciones - Modelo 111"},130:{name:"IRPF - Pago fraccionado (actividades económicas)"},131:{name:"IRPF - Pago fraccionado (estimación directa)"},180:{name:"Retenciones - Alquileres"},190:{name:"Retenciones - Resumen anual"},200:{name:"Impuesto sobre Sociedades"},202:{name:"Pagos fraccionados IS"},303:{name:"IVA - Autoliquidación"},347:{name:"Operaciones con terceras personas"},349:{name:"Operaciones intracomunitarias"},390:{name:"IVA - Resumen anual"},720:{name:"Bienes en el extranjero"}};function rke(t){return _J[t]?.allowedPeriods??[]}function ike(t){return t.endDate?!1:!!t.activeFlag}function ske(t,e){return e.length===0?Object.entries(_J).filter(([,n])=>n.allowedTypes.includes(t)).map(([n,r])=>({code:n,name:`Modelo ${n}`,allowedTypes:r.allowedTypes,allowedPeriods:r.allowedPeriods,labels:r.labels??null,isActive:!0,createdAt:"",updatedAt:""})):e.filter(n=>n.allowedTypes.some(r=>r===t))}function ake(t,e){const n=e.find(r=>r.code===t);return n?n.name:`Modelo ${t}`}function v0(t,e){const n=e.find(r=>r.code===t);return n?n.allowedPeriods:rke(t)}function oke(t){return ike({endDate:t.endDate,activeFlag:t.activeFlag})}const lke=eke({taxModelCode:Dv().min(1,"Selecciona un modelo"),periodicity:Dv().min(1,"Selecciona la periodicidad"),startDate:Dv().min(1,"La fecha de alta es obligatoria").refine(t=>!Number.isNaN(Date.parse(t)),"Fecha de alta inválida"),endDate:Dv().optional().refine(t=>!t||!Number.isNaN(Date.parse(t)),"Fecha de baja inválida"),activeFlag:QCe(),notes:Dv().max(1e3,"Máximo 1000 caracteres").optional()}).superRefine((t,e)=>{if(t.endDate){const n=Date.parse(t.startDate);Date.parse(t.endDate)<n&&e.addIssue({path:["endDate"],code:ct.custom,message:"La fecha de baja debe ser posterior a la fecha de alta"})}});function Iv(t){if(!t)return"";const e=typeof t=="string"?new Date(t):t;if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`}const cke={ANUAL:"Anual",TRIMESTRAL:"Trimestral",MENSUAL:"Mensual",ESPECIAL_FRACCIONADO:"Pagos fraccionados (Abr/Oct/Dic)"};function uke({open:t,mode:e,clientType:n,assignedCodes:r,taxModelsConfig:i,assignment:s,onClose:o,onSubmit:l,isSubmitting:c}){const u=ER({resolver:ECe(lke),defaultValues:{taxModelCode:s?.taxModelCode??"",periodicity:s?.periodicity??"",startDate:Iv(s?.startDate)||"",endDate:Iv(s?.endDate)||"",activeFlag:s?s.activeFlag&&!s.endDate:!0,notes:s?.notes??""}}),d=x.useMemo(()=>e==="edit"&&s?r.filter(S=>S!==s.taxModelCode):r,[r,s,e]),f=x.useMemo(()=>ske(n,i).filter(S=>!d.includes(S.code)),[n,i,d]),p=u.watch("taxModelCode"),h=v0(p,i),m=u.watch("periodicity"),g=u.watch("endDate"),v=u.watch("activeFlag");x.useEffect(()=>{if(!t){u.reset({taxModelCode:s?.taxModelCode??"",periodicity:s?.periodicity??"",startDate:Iv(s?.startDate)||"",endDate:Iv(s?.endDate)||"",activeFlag:s?s.activeFlag&&!s.endDate:!0,notes:s?.notes??""});return}if(!s&&f.length>0){u.setValue("taxModelCode",f[0].code);const S=v0(f[0].code,i);S.length>0&&u.setValue("periodicity",S[0]),u.getValues("startDate")||u.setValue("startDate",Iv(new Date))}},[t,s,f,i,u]),x.useEffect(()=>{if(p){const S=v0(p,i);S.length>0&&!S.includes(m)&&u.setValue("periodicity",S[0])}},[p,m,u,i]),x.useEffect(()=>{g&&v&&u.setValue("activeFlag",!1)},[g,v,u]);const y=x.useMemo(()=>{const S=v0(p,i),E=i.find(C=>C.code===p)?.labels;return{periods:S,labels:E}},[p,i]),b=u.handleSubmit(async S=>{const E={taxModelCode:S.taxModelCode,periodicity:S.periodicity,startDate:S.startDate,endDate:S.endDate?S.endDate:null,activeFlag:S.endDate?!1:S.activeFlag,notes:S.notes?.trim()?S.notes.trim():null};await l(E,s?.id),o()}),N=p?ake(p,i):null;return a.jsx(Un,{open:t,onOpenChange:S=>!c&&!S?o():void 0,children:a.jsxs(zn,{className:"sm:max-w-lg",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:e==="create"?"Añadir impuesto":`Editar modelo ${p||""}`}),a.jsx(Qn,{children:"Gestiona los modelos fiscales asignados a este cliente."})]}),a.jsx(tke,{...u,children:a.jsxs("form",{className:"space-y-4",onSubmit:b,children:[a.jsx(Tp,{control:u.control,name:"taxModelCode",render:({field:S})=>a.jsxs(zf,{children:[a.jsx(qf,{children:"Modelo"}),a.jsxs(un,{disabled:c||f.length===0,value:S.value,onValueChange:E=>S.onChange(E.toUpperCase()),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona un modelo"})}),a.jsx(an,{children:f.map(E=>a.jsxs(Ke,{value:E.code,children:[E.code," — ",E.name]},E.code))})]}),a.jsx(Hp,{})]})}),a.jsx(Tp,{control:u.control,name:"periodicity",render:({field:S})=>a.jsxs(zf,{children:[a.jsx(qf,{children:"Periodicidad"}),a.jsxs(un,{disabled:c||h.length===0,value:S.value,onValueChange:E=>S.onChange(E.toUpperCase()),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona periodicidad"})}),a.jsx(an,{children:h.map(E=>a.jsx(Ke,{value:E,children:cke[E]},E))})]}),y.labels&&y.labels.length>0&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Presentaciones en: ",y.labels.join(", ")]}),m&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[m==="MENSUAL"&&"Se generarán periodos M01..M12 cada año.",m==="TRIMESTRAL"&&"Se generarán 1T, 2T, 3T y 4T cada año.",m==="ANUAL"&&"Una presentación anual por ejercicio."]}),a.jsx(Hp,{})]})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(Tp,{control:u.control,name:"startDate",render:({field:S})=>a.jsxs(zf,{children:[a.jsx(qf,{children:"Fecha de alta"}),a.jsx(Yv,{children:a.jsx(Ie,{type:"date",...S,disabled:c})}),a.jsx(Hp,{})]})}),a.jsx(Tp,{control:u.control,name:"endDate",render:({field:S})=>a.jsxs(zf,{children:[a.jsx(qf,{children:"Fecha de baja"}),a.jsx(Yv,{children:a.jsx(Ie,{type:"date",value:S.value??"",onChange:E=>S.onChange(E.target.value||""),disabled:c})}),a.jsx(Hp,{})]})})]}),a.jsx(Tp,{control:u.control,name:"activeFlag",render:({field:S})=>a.jsxs(zf,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(qf,{className:"text-base",children:"Activo"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"El impuesto permanecerá activo mientras no tenga fecha de baja."})]}),a.jsx(Yv,{children:a.jsx(ks,{checked:S.value,onCheckedChange:S.onChange,disabled:!!g||c})})]})}),a.jsx(Tp,{control:u.control,name:"notes",render:({field:S})=>a.jsxs(zf,{children:[a.jsx(qf,{children:"Notas"}),a.jsx(Yv,{children:a.jsx(la,{placeholder:N?`Notas internas sobre el modelo ${N}`:"Notas internas",...S,disabled:c})}),a.jsx(Hp,{})]})}),a.jsxs(oi,{children:[a.jsx(re,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancelar"}),a.jsx(re,{type:"submit",disabled:c||f.length===0,children:c?"Guardando...":"Guardar"})]})]})})]})})}const dke={ANUAL:"default",TRIMESTRAL:"secondary",MENSUAL:"outline",ESPECIAL_FRACCIONADO:"destructive"},fke={ANUAL:"Anual",TRIMESTRAL:"Trimestral",MENSUAL:"Mensual",ESPECIAL_FRACCIONADO:"Especial fraccionado"};function yz(t){if(!t)return"—";const e=new Date(t);return Number.isNaN(e.getTime())?"—":e.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}function hke({assignment:t,onEdit:e,onDelete:n,onToggleActive:r,disabled:i,selectable:s,selected:o,onSelectChange:l}){const c=oke(t),u=t.periodicity,d=dke[u]??"default",f=fke[u]??u,p=!!t.endDate;return a.jsxs(Gt,{children:[a.jsx(Me,{className:"w-10",children:s?a.jsx(Ur,{checked:o,onCheckedChange:h=>l?.(!!h,t)}):null}),a.jsx(Me,{className:"font-medium",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:`${t.taxModelCode}`}),t.taxModel?.name&&a.jsx("span",{className:"text-xs text-muted-foreground",children:t.taxModel.name})]})}),a.jsx(Me,{children:a.jsx(Ge,{variant:d,children:f})}),a.jsx(Me,{children:yz(t.startDate)}),a.jsx(Me,{children:yz(t.endDate)}),a.jsx(Me,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ks,{checked:c,disabled:i||p,onCheckedChange:h=>r(t,h)}),a.jsx("span",{className:"text-sm text-muted-foreground",children:c?"Activo":p?"Baja":"Inactivo"})]})}),a.jsx(Me,{className:"max-w-sm truncate text-sm text-muted-foreground",children:t.notes||"—"}),a.jsxs(Me,{className:"flex items-center gap-2",children:[a.jsx(re,{variant:"secondary",size:"icon",onClick:()=>e(t),disabled:i,children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"destructive",size:"icon",onClick:()=>n(t),disabled:i,children:a.jsx(ei,{className:"h-4 w-4"})})]})]})}function pke(t){return ht("GET",`/api/clients/${t}`)}function mke(){return ht("GET","/api/tax-models-config")}function gke(t){return ht("POST","/api/clients",t)}function vke(t,e){return ht("PATCH",`/api/clients/${t}`,e)}function yke(t,e){return ht("POST",`/api/clients/${t}/tax-assignments`,e)}function xke(t,e){return ht("PATCH",`/api/tax-assignments/${t}`,e)}function bke(t,e){return ht("DELETE",`/api/tax-assignments/${t}${e?"?hard=1":""}`)}function xz(t,e){const n={codes:e?.codes,assignmentIds:e?.assignmentIds,hard:e?.hard??!0};return ht("POST",`/api/clients/${t}/tax-assignments/delete`,n)}function TC(t){return[...t].sort((e,n)=>{const r=new Date(n.startDate).getTime()-new Date(e.startDate).getTime();return r!==0?r:e.taxModelCode.localeCompare(n.taxModelCode)})}function wke({clientId:t,clientType:e,assignments:n,taxModelsConfig:r,onAssignmentsChange:i,disabled:s}){const{toast:o}=nr(),[l,c]=x.useState(!1),[u,d]=x.useState("create"),[f,p]=x.useState(null),[h,m]=x.useState(null),[g,v]=x.useState(new Set),[y,b]=x.useState(!0),N=x.useMemo(()=>n.map(M=>M.taxModelCode),[n]),S=yt({mutationFn:async M=>{if(!t)throw new Error("El cliente debe guardarse antes de añadir impuestos");return await yke(t,M)},onSuccess:M=>{i(I=>TC([...I,M])),t&&Lt.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Impuesto asignado",description:`El modelo ${M.taxModelCode} se asignó correctamente.`})},onError:M=>{o({title:"No se pudo asignar el impuesto",description:M?.message??"Intenta de nuevo más tarde",variant:"destructive"})}}),E=yt({mutationFn:async({assignmentId:M,payload:I})=>await xke(M,I),onSuccess:M=>{i(I=>TC(I.map(B=>B.id===M.id?M:B))),t&&Lt.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Asignación actualizada",description:`Modelo ${M.taxModelCode} actualizado correctamente.`})},onError:M=>{o({title:"No se pudo actualizar el impuesto",description:M?.message??"Intenta de nuevo más tarde",variant:"destructive"})}}),C=yt({mutationFn:async M=>await bke(M,y),onSuccess:M=>{M.softDeleted?(i(I=>TC(I.map(B=>B.id===M.assignment.id?M.assignment:B))),t&&Lt.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Asignación desactivada",description:M.message})):(i(I=>I.filter(B=>B.id!==M.assignment.id)),o({title:"Asignación eliminada",description:M.message}))},onError:M=>{o({title:"No se pudo eliminar el impuesto",description:M?.message??"Intenta de nuevo más tarde",variant:"destructive"})}}),T=()=>{d("create"),p(null),c(!0)},_=M=>{d("edit"),p(M),c(!0)},j=M=>{m(M)},P=(M,I)=>{E.mutate({assignmentId:M.id,payload:{activeFlag:I}})},k=S.isPending||E.isPending,O=(M,I)=>{v(B=>{const U=new Set(B);return M?U.add(I.id):U.delete(I.id),U})};return a.jsxs(Fe,{children:[a.jsxs(Je,{className:"flex flex-row items-center justify-between",children:[a.jsx(et,{children:"Asignaciones fiscales"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(re,{onClick:T,disabled:!t||s,children:"Añadir impuesto"}),a.jsxs("div",{className:"flex items-center gap-2 pl-2 border-l",children:[a.jsx(ks,{id:"hard-delete",checked:y,onCheckedChange:b}),a.jsx(ye,{htmlFor:"hard-delete",className:"text-xs text-muted-foreground",children:"Borrado definitivo"})]}),a.jsx(re,{variant:"outline",disabled:!t||s||n.length===0,onClick:async()=>{if(!(!t||!window.confirm("¿Eliminar todas las asignaciones fiscales de este cliente? Los modelos con histórico se desactivarán.")))try{const I=await xz(t,{hard:y});Array.isArray(I.assignments)?i(()=>I.assignments):i(()=>[]),Lt.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Limpieza completada",description:`${I.deleted} eliminadas, ${I.deactivated} desactivadas`})}catch(I){o({title:"Error",description:I?.message??"No se pudo limpiar",variant:"destructive"})}},children:"Borrar modelos"}),a.jsx(re,{variant:"destructive",disabled:!t||s||g.size===0,onClick:async()=>{if(!t)return;const M=Array.from(g);if(window.confirm(`¿Eliminar/desactivar modelos seleccionados? (${M.length} registros)`))try{const B=await xz(t,{assignmentIds:M,hard:y});v(new Set),Array.isArray(B.assignments)?i(()=>B.assignments):Lt.invalidateQueries({queryKey:["client-detail",t]}),o({title:"Selección procesada",description:`${B.deleted} eliminadas, ${B.deactivated} desactivadas`})}catch(B){o({title:"Error",description:B?.message??"No se pudo procesar la selección",variant:"destructive"})}},children:"Borrar seleccionados"})]})]}),a.jsx(Be,{children:t?n.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay impuestos asignados. Añade un modelo fiscal para empezar a controlar sus obligaciones."}):a.jsx("div",{className:"overflow-x-auto rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{className:"w-10"}),a.jsx($e,{children:"Modelo"}),a.jsx($e,{children:"Periodicidad"}),a.jsx($e,{children:"Alta"}),a.jsx($e,{children:"Baja"}),a.jsx($e,{children:"Activo"}),a.jsx($e,{children:"Notas"}),a.jsx($e,{className:"w-[120px] text-right",children:"Acciones"})]})}),a.jsx(ai,{children:n.map(M=>a.jsx(hke,{assignment:M,onEdit:_,onDelete:j,onToggleActive:P,selectable:!0,selected:g.has(M.id),onSelectChange:O,disabled:s||E.isPending||C.isPending},M.id))})]})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Guarda los datos del cliente para gestionar sus modelos fiscales."})}),a.jsx(uke,{open:l,mode:u,clientType:e,assignedCodes:N,taxModelsConfig:r,assignment:f,onClose:()=>c(!1),onSubmit:async(M,I)=>{u==="create"?await S.mutateAsync(M):I&&await E.mutateAsync({assignmentId:I,payload:M})},isSubmitting:k}),a.jsx(yc,{open:!!h,onOpenChange:M=>!M&&m(null),children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Eliminar asignación fiscal?"}),a.jsxs(Cl,{children:["Esta acción eliminará la asignación del modelo"," ",a.jsx("strong",{children:h?.taxModelCode}),". Si existen históricos, se dará de baja automáticamente."]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Borrado definitivo"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Si está activado, se eliminará también el histórico asociado a este modelo."})]}),a.jsx(ks,{checked:y,onCheckedChange:b})]}),a.jsxs(hf,{children:[a.jsx(Tl,{disabled:C.isPending,onClick:()=>m(null),children:"Cancelar"}),a.jsx(kl,{onClick:()=>h&&C.mutate(h.id),disabled:C.isPending,children:C.isPending?"Eliminando...":"Eliminar"})]})]})})]})}const Nke=Jh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),fu=x.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:Xe(Nke({variant:e}),t),...n}));fu.displayName="Alert";const Ske=x.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:Xe("mb-1 font-medium leading-none tracking-tight",t),...e}));Ske.displayName="AlertTitle";const hu=x.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Xe("text-sm [&_p]:leading-relaxed",t),...e}));hu.displayName="AlertDescription";var CR="Progress",kR=100,[jke]=Ts(CR),[_ke,Eke]=jke(CR),EJ=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=Ake,...o}=t;(i||i===0)&&!bz(i)&&console.error(Cke(`${i}`,"Progress"));const l=bz(i)?i:kR;r!==null&&!wz(r,l)&&console.error(kke(`${r}`,"Progress"));const c=wz(r,l)?r:null,u=zw(c)?s(c,l):void 0;return a.jsx(_ke,{scope:n,value:c,max:l,children:a.jsx(Ot.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":kJ(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});EJ.displayName=CR;var AJ="ProgressIndicator",CJ=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Eke(AJ,n);return a.jsx(Ot.div,{"data-state":kJ(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});CJ.displayName=AJ;function Ake(t,e){return`${Math.round(t/e*100)}%`}function kJ(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function zw(t){return typeof t=="number"}function bz(t){return zw(t)&&!isNaN(t)&&t>0}function wz(t,e){return zw(t)&&!isNaN(t)&&t<=e&&t>=0}function Cke(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kR}\`.`}function kke(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var TJ=EJ,Tke=CJ;const pg=x.forwardRef(({className:t,value:e,...n},r)=>a.jsx(TJ,{ref:r,className:Xe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(Tke,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));pg.displayName=TJ.displayName;function Oke({open:t,onOpenChange:e}){const{toast:n}=nr(),r=Hs(),[i,s]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(!1),p=async()=>{try{const b=localStorage.getItem("token");if(console.log("🔐 Token disponible:",b?"Sí":"No"),!b)throw new Error("No hay sesión activa. Por favor, inicia sesión nuevamente.");const N=await fetch("/api/clients/import-template",{headers:{Authorization:`Bearer ${b}`},credentials:"include"});if(console.log("📡 Respuesta del servidor:",N.status,N.statusText),!N.ok){const T=await N.json().catch(()=>({error:"Error desconocido"}));throw console.error("❌ Error del servidor:",T),new Error(T.error||"Error al descargar la plantilla")}const S=await N.blob(),E=window.URL.createObjectURL(S),C=document.createElement("a");C.href=E,C.download="plantilla-importacion-clientes.xlsx",document.body.appendChild(C),C.click(),window.URL.revokeObjectURL(E),document.body.removeChild(C),n({title:"Plantilla descargada",description:"El archivo Excel se ha descargado correctamente"})}catch(b){n({title:"Error al descargar",description:b?.message||"No se pudo descargar la plantilla",variant:"destructive"})}},h=b=>{b.target.files&&b.target.files[0]&&(s(b.target.files[0]),u(null))},m=x.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?f(!0):b.type==="dragleave"&&f(!1)},[]),g=x.useCallback(b=>{if(b.preventDefault(),b.stopPropagation(),f(!1),b.dataTransfer.files&&b.dataTransfer.files[0]){const N=b.dataTransfer.files[0];N.name.endsWith(".xlsx")||N.name.endsWith(".xls")?(s(N),u(null)):n({title:"Archivo no válido",description:"Por favor selecciona un archivo Excel (.xlsx o .xls)",variant:"destructive"})}},[n]),v=async()=>{if(!i){n({title:"Sin archivo",description:"Por favor selecciona un archivo Excel",variant:"destructive"});return}l(!0),u(null);try{const b=new FormData;b.append("file",i);const N=await fetch("/api/clients/import-excel",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:b}),S=await N.json();if(!N.ok)throw S.result&&u(S.result),new Error(S.error||"Error en la importación");u(S.result),r.invalidateQueries({queryKey:["/api/clients"]}),n({title:"Importación exitosa",description:`${S.result.imported} clientes nuevos, ${S.result.updated} actualizados`})}catch(b){n({title:"Error en la importación",description:b?.message||"No se pudo importar el archivo",variant:"destructive"})}finally{l(!1)}},y=()=>{s(null),u(null),l(!1),e(!1)};return a.jsx(Un,{open:t,onOpenChange:y,children:a.jsxs(zn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsxs(Vn,{className:"flex items-center gap-2",children:[a.jsx(Oy,{className:"h-5 w-5"}),"Importar Clientes desde Excel"]}),a.jsx(Qn,{children:"Descarga la plantilla, complétala con los datos de tus clientes y sube el archivo para importarlos."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"1. Descargar plantilla Excel"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Plantilla con instrucciones y ejemplos incluidos"})]}),a.jsxs(re,{onClick:p,variant:"outline",className:"gap-2",children:[a.jsx(Cs,{className:"h-4 w-4"}),"Descargar"]})]}),a.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 transition-colors ${d?"border-primary bg-primary/5":"border-muted-foreground/25"}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:g,children:[a.jsx("input",{type:"file",id:"file-upload",accept:".xlsx,.xls",onChange:h,className:"hidden"}),a.jsxs("div",{className:"text-center",children:[a.jsx(sa,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-lg font-medium mb-2",children:"2. Subir archivo completado"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Arrastra el archivo aquí o haz clic para seleccionarlo"}),a.jsx("label",{htmlFor:"file-upload",children:a.jsx(re,{variant:"outline",type:"button",className:"cursor-pointer",asChild:!0,children:a.jsx("span",{children:"Seleccionar archivo"})})})]}),i&&a.jsxs("div",{className:"mt-4 p-3 bg-primary/10 rounded-md flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oy,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"text-sm font-medium",children:i.name}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(i.size/1024).toFixed(1)," KB)"]})]}),a.jsx(re,{variant:"ghost",size:"sm",onClick:()=>s(null),className:"h-8 w-8 p-0",children:a.jsx(jh,{className:"h-4 w-4"})})]})]}),o&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Importando clientes..."}),a.jsx("span",{children:"Por favor espera"})]}),a.jsx(pg,{value:void 0,className:"h-2"})]}),c&&a.jsxs("div",{className:"space-y-3",children:[c.success?a.jsxs(fu,{className:"border-green-200 bg-green-50",children:[a.jsx(ml,{className:"h-4 w-4 text-green-600"}),a.jsxs(hu,{className:"text-green-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Importación completada exitosamente"}),a.jsxs("ul",{className:"text-sm space-y-1",children:[a.jsxs("li",{children:["✓ ",c.imported," clientes nuevos importados"]}),a.jsxs("li",{children:["✓ ",c.updated," clientes actualizados"]})]})]})]}):a.jsxs(fu,{variant:"destructive",children:[a.jsx(qo,{className:"h-4 w-4"}),a.jsxs(hu,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Importación con errores"}),a.jsxs("p",{className:"text-sm",children:["Registros importados: ",c.imported+c.updated]})]})]}),c.errors&&c.errors.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-sm font-medium text-destructive",children:["Errores encontrados (",c.errors.length,"):"]}),a.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-md p-3 bg-destructive/5",children:a.jsx("ul",{className:"space-y-1 text-sm",children:c.errors.map((b,N)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-destructive",children:"•"}),a.jsx("span",{className:"flex-1",children:b})]},N))})})]})]}),a.jsx(fu,{children:a.jsxs(hu,{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-2",children:"💡 Información importante:"}),a.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[a.jsx("li",{children:"• Los clientes existentes (mismo NIF/CIF) serán actualizados"}),a.jsx("li",{children:"• Los modelos fiscales se asignarán automáticamente"}),a.jsx("li",{children:"• Los campos obligatorios deben estar completos"}),a.jsx("li",{children:'• Revisa la hoja "Instrucciones" en la plantilla para más detalles'})]})]})})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:y,children:"Cerrar"}),a.jsx(re,{onClick:v,disabled:!i||o,className:"gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"h-4 w-4"}),"Importar Clientes"]})})]})]})})}const Nz=[{value:"AUTONOMO",label:"Autónomo"},{value:"EMPRESA",label:"Empresa"},{value:"PARTICULAR",label:"Particular"}],nm="__none__";function Wc(t){if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`}function Xv(){return Wc(new Date().toISOString())}const Sz={razonSocial:"",nifCif:"",tipo:"AUTONOMO",email:"",telefono:"",direccion:"",responsableAsignado:nm,fechaAlta:Xv(),fechaBaja:"",isActive:!0,notes:""};function Pke(t){return{razonSocial:t.razonSocial.trim(),nifCif:t.nifCif.trim(),tipo:t.tipo,email:t.email.trim()?t.email.trim():null,telefono:t.telefono.trim()?t.telefono.trim():null,direccion:t.direccion.trim()?t.direccion.trim():null,responsableAsignado:t.responsableAsignado===nm?null:t.responsableAsignado,isActive:t.isActive,fechaAlta:t.fechaAlta||null,fechaBaja:t.fechaBaja||null,notes:t.notes.trim()?t.notes.trim():null}}function Mke(){const{toast:t}=nr(),[e,n]=x.useState(""),[r,i]=x.useState("todos"),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState("general"),[f,p]=x.useState(null),[h,m]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState([]),[N,S]=x.useState([]),[E,C]=x.useState(""),[T,_]=x.useState(Sz),{data:j=[],isLoading:P}=At({queryKey:["/api/clients",{view:"list"}],queryFn:()=>ht("GET","/api/clients?full=0"),staleTime:6e4}),{data:k=[]}=At({queryKey:["/api/users"],staleTime:5*6e4}),O=x.useMemo(()=>{const W=new Map;return(k||[]).forEach(G=>W.set(G.id,G.username)),W},[k]),{data:M=[],isLoading:I,error:B}=At({queryKey:["tax-models-config"],queryFn:()=>mke()});console.log("📋 Tax Models Config:",M?.length,"modelos",M),console.log("📋 Loading:",I,"Error:",B);const{data:U,isFetching:D}=At({queryKey:["client-detail",g],queryFn:()=>pke(g),enabled:!!(g&&s)});x.useEffect(()=>{if(!U)return;m(U),b(U.taxAssignments??[]),_({razonSocial:U.razonSocial??"",nifCif:U.nifCif??"",tipo:U.tipo||"AUTONOMO",email:U.email??"",telefono:U.telefono??"",direccion:U.direccion??"",responsableAsignado:U.responsableAsignado??nm,fechaAlta:Wc(U.fechaAlta)||Xv(),fechaBaja:Wc(U.fechaBaja),isActive:U.isActive??!0,notes:U.notes??""});const W=U.employees?.map(_e=>_e.userId)??[],G=U.employees?.find(_e=>_e.isPrimary)?.userId??"";S(W),C(G)},[U]);const z=yt({mutationFn:async W=>await gke(W),onSuccess:W=>{Lt.invalidateQueries({queryKey:["/api/clients"]}),p({...W,tipo:W.tipo,fechaAlta:W.fechaAlta,fechaBaja:W.fechaBaja}),m(W),_({razonSocial:W.razonSocial??"",nifCif:W.nifCif??"",tipo:W.tipo||"AUTONOMO",email:W.email??"",telefono:W.telefono??"",direccion:W.direccion??"",responsableAsignado:W.responsableAsignado??nm,fechaAlta:Wc(W.fechaAlta)||Xv(),fechaBaja:Wc(W.fechaBaja),isActive:W.isActive??!0,notes:W.notes??""}),v(W.id),b(W.taxAssignments??[]),d("fiscal"),t({title:"Cliente creado exitosamente"})},onError:W=>{t({title:"No se pudo crear el cliente",description:W?.message??"Intenta de nuevo",variant:"destructive"})}}),H=yt({mutationFn:async({id:W,payload:G})=>await vke(W,G),onSuccess:W=>{Lt.invalidateQueries({queryKey:["/api/clients"]}),m(W),_({razonSocial:W.razonSocial??"",nifCif:W.nifCif??"",tipo:W.tipo||"AUTONOMO",email:W.email??"",telefono:W.telefono??"",direccion:W.direccion??"",responsableAsignado:W.responsableAsignado??nm,fechaAlta:Wc(W.fechaAlta)||Xv(),fechaBaja:Wc(W.fechaBaja),isActive:W.isActive??!0,notes:W.notes??""}),b(W.taxAssignments??[]),p(G=>G?{...G,...W}:null),t({title:"Cliente actualizado exitosamente"})},onError:W=>{t({title:"No se pudo actualizar el cliente",description:W?.message??"Intenta de nuevo",variant:"destructive"})}}),ee=yt({mutationFn:async W=>await ht("DELETE",`/api/clients/${W}`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/clients"]}),t({title:"Cliente eliminado exitosamente"}),s&&Z()}}),ae=yt({mutationFn:async W=>await ht("PATCH",`/api/clients/${W}/toggle-active`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/clients"]}),t({title:"Estado del cliente actualizado"})},onError:()=>{t({title:"Error al cambiar el estado del cliente",variant:"destructive"})}}),F=yt({mutationFn:async({clientId:W,employeeIds:G,primaryId:_e})=>await ht("PUT",`/api/clients/${W}/employees`,{employeeIds:G,primaryEmployeeId:_e}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/clients"]})}}),q=x.useMemo(()=>j.filter(W=>{const G=W.razonSocial.toLowerCase().includes(e.toLowerCase())||W.nifCif.toLowerCase().includes(e.toLowerCase()),_e=r==="todos"||W.tipo.toUpperCase()===r.toUpperCase();return G&&_e}),[j,e,r]),Z=()=>{o(!1),setTimeout(()=>{te()},200)},te=()=>{_(Sz),S([]),C(""),p(null),m(null),v(null),b([]),d("general")},ce=()=>{te(),o(!0)},ue=W=>{p(W),_({razonSocial:W.razonSocial,nifCif:W.nifCif,tipo:(W.tipo||"AUTONOMO").toUpperCase(),email:W.email??"",telefono:W.telefono??"",direccion:W.direccion??"",responsableAsignado:W.responsableAsignado??nm,fechaAlta:Wc(W.fechaAlta)||Xv(),fechaBaja:Wc(W.fechaBaja),isActive:W.isActive??!0,notes:W.notes??""});const G=W.employees?.map(Qe=>Qe.userId)??[],_e=W.employees?.find(Qe=>Qe.isPrimary)?.userId??"";S(G),C(_e),b(W.taxAssignments??[]),v(W.id),d("general"),o(!0)},ve=async W=>{W.preventDefault();const G=Pke(T);try{let _e=f?.id||h?.id||g;_e?_e=(await H.mutateAsync({id:_e,payload:G})).id:_e=(await z.mutateAsync(G)).id,_e&&await F.mutateAsync({clientId:_e,employeeIds:N,primaryId:N.length>0?E||N[0]:""})}catch(_e){t({title:"Error al guardar el cliente",description:_e?.message??"Intenta de nuevo más tarde",variant:"destructive"})}},oe=()=>{if(!j||j.length===0)return;const W=eAe.unparse(j),G=new Blob([W],{type:"text/csv"}),_e=window.URL.createObjectURL(G),Qe=document.createElement("a");Qe.href=_e,Qe.download=`clientes_${new Date().toISOString().split("T")[0]}.csv`,Qe.click(),t({title:"Exportación completada"})},pe=W=>W&&O.get(W)||"Sin asignar",xe=async W=>{await ee.mutateAsync(W)},X=z.isPending||H.isPending||F.isPending,Se=h?.id??f?.id??null;return P?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(Fn,{className:"h-9 w-48"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(Fn,{className:"h-10 flex-1"}),a.jsx(Fn,{className:"h-10 w-32"}),a.jsx(Fn,{className:"h-10 w-32"})]}),a.jsx(Fe,{children:a.jsx(Be,{className:"p-6",children:[...Array(5)].map((W,G)=>a.jsx(Fn,{className:"h-12 w-full mb-2"},G))})})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Clientes"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestión de clientes y contactos"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(re,{variant:"outline",onClick:()=>c(!0),className:"gap-2",children:[a.jsx(Oy,{className:"h-4 w-4"}),"Importar desde Excel"]}),a.jsxs(Un,{open:s,onOpenChange:W=>{W?o(!0):Z()},children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:ce,"data-testid":"button-add-client",children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Nuevo Cliente"]})}),a.jsxs(zn,{className:"max-w-4xl",children:[a.jsxs(Hn,{className:"space-y-1",children:[a.jsx(Vn,{children:f?"Editar Cliente":"Nuevo Cliente"}),a.jsx(Qn,{children:f?"Actualiza la información del cliente":"Completa la información para crear un nuevo cliente"})]}),a.jsxs("form",{id:"client-editor-form",onSubmit:ve,className:"space-y-6 mt-6",children:[a.jsxs(Wo,{value:u,onValueChange:W=>d(W),children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs(co,{children:[a.jsx(vn,{value:"general",children:"📋 Datos del cliente"}),a.jsxs(vn,{value:"fiscal",disabled:!Se,children:["💼 Datos fiscales y contables",!Se&&a.jsx("span",{className:"ml-2 text-xs opacity-60",children:"(guarda primero)"})]})]}),a.jsx(re,{type:"submit",disabled:X,className:"shrink-0",children:X?"Guardando...":"Guardar cambios"})]}),a.jsx(Rn,{value:"general",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"razonSocial",children:"Razón Social *"}),a.jsx(Ie,{id:"razonSocial",value:T.razonSocial,onChange:W=>_(G=>({...G,razonSocial:W.target.value})),required:!0,"data-testid":"input-razon-social"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nifCif",children:"NIF/CIF *"}),a.jsx(Ie,{id:"nifCif",value:T.nifCif,onChange:W=>_(G=>({...G,nifCif:W.target.value})),required:!0,"data-testid":"input-nif-cif"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"tipo",children:"Tipo *"}),a.jsxs(un,{value:T.tipo,onValueChange:W=>_(G=>({...G,tipo:W})),children:[a.jsx(sn,{"data-testid":"select-tipo",children:a.jsx(dn,{})}),a.jsx(an,{children:Nz.map(W=>a.jsx(Ke,{value:W.value,children:W.label},W.value))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"fechaAlta",children:"Fecha de alta"}),a.jsx(Ie,{id:"fechaAlta",type:"date",value:T.fechaAlta,onChange:W=>_(G=>({...G,fechaAlta:W.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"fechaBaja",children:"Fecha de baja"}),a.jsx(Ie,{id:"fechaBaja",type:"date",value:T.fechaBaja,onChange:W=>_(G=>({...G,fechaBaja:W.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"email",children:"Email"}),a.jsx(Ie,{id:"email",type:"email",value:T.email,onChange:W=>_(G=>({...G,email:W.target.value})),"data-testid":"input-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"telefono",children:"Teléfono"}),a.jsx(Ie,{id:"telefono",value:T.telefono,onChange:W=>_(G=>({...G,telefono:W.target.value})),"data-testid":"input-telefono"})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsx(ye,{htmlFor:"direccion",children:"Dirección"}),a.jsx(Ie,{id:"direccion",value:T.direccion,onChange:W=>_(G=>({...G,direccion:W.target.value}))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsx(ye,{htmlFor:"notes",children:"Notas internas"}),a.jsx(la,{id:"notes",value:T.notes,onChange:W=>_(G=>({...G,notes:W.target.value})),rows:3})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4",children:[a.jsxs("div",{children:[a.jsxs(ye,{className:"flex items-center gap-2 text-sm font-semibold",children:[a.jsx(S1,{className:"h-4 w-4"}),"Cliente activo"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Desactiva el cliente cuando ya no se gestione para mantener el histórico."})]}),a.jsx(ks,{checked:T.isActive,onCheckedChange:W=>_(G=>({...G,isActive:W}))})]})}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsxs("div",{children:[a.jsxs(ye,{className:"flex items-center gap-2 text-base font-semibold",children:[a.jsx(Use,{className:"h-5 w-5"}),"Responsables del cliente"]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Selecciona uno o varios empleados. El marcado como "Principal" será el responsable principal del cliente.'})]}),a.jsx("div",{className:"border rounded-md p-4 space-y-3 max-h-64 overflow-y-auto",children:k.map(W=>{const G=N.includes(W.id),_e=E===W.id;return a.jsxs("div",{className:"flex items-center justify-between gap-3 p-2 rounded-md hover:bg-muted/40",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ur,{id:`employee-${W.id}`,checked:G,onCheckedChange:Qe=>{if(Qe){const ze=[...N,W.id];S(ze),ze.length===1&&C(W.id)}else S(ze=>ze.filter(Re=>Re!==W.id)),_e&&C(ze=>N.filter(se=>se!==W.id)[0]||"")}}),a.jsxs(ye,{htmlFor:`employee-${W.id}`,className:"text-sm font-medium cursor-pointer flex items-center gap-2",children:[W.username,_e&&a.jsx(Ge,{variant:"default",className:"text-xs bg-primary",children:"⭐ Principal"})]})]}),G&&!_e&&a.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>C(W.id),className:"text-xs",children:"Marcar como principal"})]},W.id)})}),N.length===0&&a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:a.jsx("p",{className:"text-xs text-amber-800",children:"⚠️ Selecciona al menos un responsable para asignar al cliente. El primero seleccionado será el principal por defecto."})}),N.length>0&&!E&&a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:a.jsx("p",{className:"text-xs text-amber-800",children:"⚠️ Marca un empleado como principal para establecer el responsable principal del cliente."})})]})]})}),a.jsxs(Rn,{value:"fiscal",children:[D&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(Fn,{className:"h-8 w-48"}),a.jsx(Fn,{className:"h-64 w-full"})]}),!D&&a.jsx(wke,{clientId:Se??void 0,clientType:T.tipo,assignments:y,taxModelsConfig:M,disabled:!Se,onAssignmentsChange:W=>b(G=>W(G))})]})]}),a.jsx(oi,{className:"flex items-center justify-between",children:a.jsx(re,{type:"button",variant:"outline",onClick:Z,disabled:X,children:"Cancelar"})})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Ag,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ie,{placeholder:"Buscar por razón social o NIF/CIF",value:e,onChange:W=>n(W.target.value),className:"pl-8"})]}),a.jsxs(un,{value:r,onValueChange:i,children:[a.jsx(sn,{className:"w-40",children:a.jsx(dn,{placeholder:"Filtrar por tipo"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"todos",children:"Todos"}),Nz.map(W=>a.jsx(Ke,{value:W.value,children:W.label},W.value))]})]})]}),a.jsxs(re,{variant:"outline",onClick:oe,children:[a.jsx(Cs,{className:"mr-2 h-4 w-4"}),"Exportar CSV"]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Listado de clientes"})}),a.jsx(Be,{className:"p-0",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Cliente"}),a.jsx($e,{children:"Tipo"}),a.jsx($e,{children:"Responsable"}),a.jsx($e,{children:"Teléfono"}),a.jsx($e,{children:"Email"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{className:"text-right w-[150px]",children:"Acciones"})]})}),a.jsxs(ai,{children:[q.map(W=>a.jsxs(Gt,{children:[a.jsx(Me,{children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:W.razonSocial}),a.jsx("span",{className:"text-xs text-muted-foreground",children:W.nifCif})]})}),a.jsx(Me,{children:W.tipo?.toUpperCase()}),a.jsx(Me,{children:pe(W.responsableAsignado)}),a.jsx(Me,{children:W.telefono||"—"}),a.jsx(Me,{children:W.email||"—"}),a.jsx(Me,{children:a.jsx(Ge,{variant:W.isActive?"default":"outline",children:W.isActive?"Activo":"Inactivo"})}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>ue(W),children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>ae.mutate(W.id),title:W.isActive?"Desactivar":"Activar",children:W.isActive?a.jsx(S1,{className:"h-4 w-4"}):a.jsx(Eh,{className:"h-4 w-4"})}),a.jsx(re,{variant:"destructive",size:"icon",onClick:()=>xe(W.id),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},W.id)),q.length===0&&a.jsx(Gt,{children:a.jsx(Me,{colSpan:7,className:"text-center text-muted-foreground py-6",children:"No se encontraron clientes con los filtros seleccionados."})})]})]})})]}),a.jsx(Oke,{open:l,onOpenChange:c})]})}var OJ=["PageUp","PageDown"],PJ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],MJ={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ug="Slider",[o5,Rke,Dke]=Jx(Ug),[RJ]=Ts(Ug,[Dke]),[Ike,uj]=RJ(Ug),DJ=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:h=!1,form:m,...g}=t,v=x.useRef(new Set),y=x.useRef(0),N=o==="horizontal"?Lke:Fke,[S=[],E]=ao({prop:d,defaultProp:u,onChange:k=>{[...v.current][y.current]?.focus(),f(k)}}),C=x.useRef(S);function T(k){const O=Uke(S,k);P(k,O)}function _(k){P(k,y.current)}function j(){const k=C.current[y.current];S[y.current]!==k&&p(S)}function P(k,O,{commit:M}={commit:!1}){const I=Kke(s),B=Gke(Math.round((k-r)/s)*s+r,I),U=bx(B,[r,i]);E((D=[])=>{const z=zke(D,U,O);if(Wke(z,c*s)){y.current=z.indexOf(U);const H=String(z)!==String(D);return H&&M&&p(z),H?z:D}else return D})}return a.jsx(Ike,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:i,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:m,children:a.jsx(o5.Provider,{scope:t.__scopeSlider,children:a.jsx(o5.Slot,{scope:t.__scopeSlider,children:a.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:e,onPointerDown:vt(g.onPointerDown,()=>{l||(C.current=S)}),min:r,max:i,inverted:h,onSlideStart:l?void 0:T,onSlideMove:l?void 0:_,onSlideEnd:l?void 0:j,onHomeKeyDown:()=>!l&&P(r,0,{commit:!0}),onEndKeyDown:()=>!l&&P(i,S.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:O})=>{if(!l){const B=OJ.includes(k.key)||k.shiftKey&&PJ.includes(k.key)?10:1,U=y.current,D=S[U],z=s*B*O;P(D+z,U,{commit:!0})}}})})})})});DJ.displayName=Ug;var[IJ,LJ]=RJ(Ug,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Lke=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[f,p]=x.useState(null),h=Tn(e,N=>p(N)),m=x.useRef(void 0),g=Qh(i),v=g==="ltr",y=v&&!s||!v&&s;function b(N){const S=m.current||f.getBoundingClientRect(),E=[0,S.width],T=TR(E,y?[n,r]:[r,n]);return m.current=S,T(N-S.left)}return a.jsx(IJ,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:a.jsx(FJ,{dir:g,"data-orientation":"horizontal",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const S=b(N.clientX);o?.(S)},onSlideMove:N=>{const S=b(N.clientX);l?.(S)},onSlideEnd:()=>{m.current=void 0,c?.()},onStepKeyDown:N=>{const E=MJ[y?"from-left":"from-right"].includes(N.key);u?.({event:N,direction:E?-1:1})}})})}),Fke=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=x.useRef(null),f=Tn(e,d),p=x.useRef(void 0),h=!i;function m(g){const v=p.current||d.current.getBoundingClientRect(),y=[0,v.height],N=TR(y,h?[r,n]:[n,r]);return p.current=v,N(g-v.top)}return a.jsx(IJ,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:a.jsx(FJ,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=m(g.clientY);s?.(v)},onSlideMove:g=>{const v=m(g.clientY);o?.(v)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:g=>{const y=MJ[h?"from-bottom":"from-top"].includes(g.key);c?.({event:g,direction:y?-1:1})}})})}),FJ=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=uj(Ug,n);return a.jsx(Ot.span,{...u,ref:e,onKeyDown:vt(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):OJ.concat(PJ).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:vt(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():r(f)}),onPointerMove:vt(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:vt(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),s(f))})})}),BJ="SliderTrack",$J=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=uj(BJ,n);return a.jsx(Ot.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});$J.displayName=BJ;var l5="SliderRange",zJ=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=uj(l5,n),s=LJ(l5,n),o=x.useRef(null),l=Tn(e,o),c=i.values.length,u=i.values.map(p=>HJ(p,i.min,i.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return a.jsx(Ot.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:l,style:{...t.style,[s.startEdge]:d+"%",[s.endEdge]:f+"%"}})});zJ.displayName=l5;var c5="SliderThumb",qJ=x.forwardRef((t,e)=>{const n=Rke(t.__scopeSlider),[r,i]=x.useState(null),s=Tn(e,l=>i(l)),o=x.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return a.jsx(Bke,{...t,ref:s,index:o})}),Bke=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=uj(c5,n),l=LJ(c5,n),[c,u]=x.useState(null),d=Tn(e,b=>u(b)),f=c?o.form||!!c.closest("form"):!0,p=cS(c),h=o.values[r],m=h===void 0?0:HJ(h,o.min,o.max),g=qke(r,o.values.length),v=p?.[l.size],y=v?Hke(v,m,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${m}% + ${y}px)`},children:[a.jsx(o5.ItemSlot,{scope:t.__scopeSlider,children:a.jsx(Ot.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:d,style:h===void 0?{display:"none"}:t.style,onFocus:vt(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&a.jsx(UJ,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},r)]})});qJ.displayName=c5;var $ke="RadioBubbleInput",UJ=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),s=Tn(i,r),o=ej(e);return x.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const f=new Event("input",{bubbles:!0});d.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(Ot.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});UJ.displayName=$ke;function zke(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function HJ(t,e,n){const s=100/(n-e)*(t-e);return bx(s,[0,100])}function qke(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Uke(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Hke(t,e,n){const r=t/2,s=TR([0,50],[0,r]);return(r-s(e)*n)*n}function Vke(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Wke(t,e){if(e>0){const n=Vke(t);return Math.min(...n)>=e}return!0}function TR(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Kke(t){return(String(t).split(".")[1]||"").length}function Gke(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var VJ=DJ,Yke=$J,Xke=zJ,Jke=qJ;const WJ=x.forwardRef(({className:t,...e},n)=>a.jsxs(VJ,{ref:n,className:Xe("relative flex w-full touch-none select-none items-center",t),...e,children:[a.jsx(Yke,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(Xke,{className:"absolute h-full bg-primary"})}),a.jsx(Jke,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));WJ.displayName=VJ.displayName;function tr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function lo(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ia(t,e){const n=tr(t);return isNaN(e)?lo(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function bl(t,e){const n=tr(t);if(isNaN(e))return lo(t,NaN);if(!e)return n;const r=n.getDate(),i=lo(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const OR=6048e5,Zke=864e5;let Qke={};function db(){return Qke}function dc(t,e){const n=db(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=tr(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function zh(t){return dc(t,{weekStartsOn:1})}function KJ(t){const e=tr(t),n=e.getFullYear(),r=lo(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=zh(r),s=lo(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=zh(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function mg(t){const e=tr(t);return e.setHours(0,0,0,0),e}function qw(t){const e=tr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zl(t,e){const n=mg(t),r=mg(e),i=+n-qw(n),s=+r-qw(r);return Math.round((i-s)/Zke)}function eTe(t){const e=KJ(t),n=lo(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),zh(n)}function u5(t,e){const n=e*7;return ia(t,n)}function tTe(t,e){return bl(t,e*12)}function nTe(t){let e;return t.forEach(function(n){const r=tr(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function rTe(t){let e;return t.forEach(n=>{const r=tr(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function ja(t,e){const n=mg(t),r=mg(e);return+n==+r}function PR(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function iTe(t){if(!PR(t)&&typeof t!="number")return!1;const e=tr(t);return!isNaN(Number(e))}function jx(t,e){const n=tr(t),r=tr(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function sTe(t,e,n){const r=dc(t,n),i=dc(e,n),s=+r-qw(r),o=+i-qw(i);return Math.round((s-o)/OR)}function MR(t){const e=tr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Ea(t){const e=tr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function GJ(t){const e=tr(t),n=lo(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function RR(t,e){const n=db(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=tr(t),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function YJ(t){return RR(t,{weekStartsOn:1})}const aTe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oTe=(t,e,n)=>{let r;const i=aTe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function mm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lTe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cTe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uTe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dTe={date:mm({formats:lTe,defaultWidth:"full"}),time:mm({formats:cTe,defaultWidth:"full"}),dateTime:mm({formats:uTe,defaultWidth:"full"})},fTe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hTe=(t,e,n,r)=>fTe[t];function Kl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n?.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n?.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const pTe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mTe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gTe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bTe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wTe={ordinalNumber:bTe,era:Kl({values:pTe,defaultWidth:"wide"}),quarter:Kl({values:mTe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kl({values:gTe,defaultWidth:"wide"}),day:Kl({values:vTe,defaultWidth:"wide"}),dayPeriod:Kl({values:yTe,defaultWidth:"wide",formattingValues:xTe,defaultFormattingWidth:"wide"})};function Gl(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?STe(l,f=>f.test(o)):NTe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function NTe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function STe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XJ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const jTe=/^(\d+)(th|st|nd|rd)?/i,_Te=/\d+/i,ETe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ATe={any:[/^b/i,/^(a|c)/i]},CTe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kTe={any:[/1/i,/2/i,/3/i,/4/i]},TTe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OTe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},PTe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MTe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RTe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DTe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ITe={ordinalNumber:XJ({matchPattern:jTe,parsePattern:_Te,valueCallback:t=>parseInt(t,10)}),era:Gl({matchPatterns:ETe,defaultMatchWidth:"wide",parsePatterns:ATe,defaultParseWidth:"any"}),quarter:Gl({matchPatterns:CTe,defaultMatchWidth:"wide",parsePatterns:kTe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gl({matchPatterns:TTe,defaultMatchWidth:"wide",parsePatterns:OTe,defaultParseWidth:"any"}),day:Gl({matchPatterns:PTe,defaultMatchWidth:"wide",parsePatterns:MTe,defaultParseWidth:"any"}),dayPeriod:Gl({matchPatterns:RTe,defaultMatchWidth:"any",parsePatterns:DTe,defaultParseWidth:"any"})},JJ={code:"en-US",formatDistance:oTe,formatLong:dTe,formatRelative:hTe,localize:wTe,match:ITe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function LTe(t){const e=tr(t);return Zl(e,GJ(e))+1}function ZJ(t){const e=tr(t),n=+zh(e)-+eTe(e);return Math.round(n/OR)+1}function QJ(t,e){const n=tr(t),r=n.getFullYear(),i=db(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=lo(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=dc(o,e),c=lo(t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=dc(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function FTe(t,e){const n=db(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=QJ(t,e),s=lo(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),dc(s,e)}function eZ(t,e){const n=tr(t),r=+dc(n,e)-+FTe(n,e);return Math.round(r/OR)+1}function Nr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Zu={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Nr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Nr(n+1,2)},d(t,e){return Nr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Nr(t.getHours()%12||12,e.length)},H(t,e){return Nr(t.getHours(),e.length)},m(t,e){return Nr(t.getMinutes(),e.length)},s(t,e){return Nr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Nr(i,e.length)}},Op={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jz={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Zu.y(t,e)},Y:function(t,e,n,r){const i=QJ(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Nr(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Nr(s,e.length)},R:function(t,e){const n=KJ(t);return Nr(n,e.length)},u:function(t,e){const n=t.getFullYear();return Nr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Nr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Nr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Zu.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Nr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=eZ(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Nr(i,e.length)},I:function(t,e,n){const r=ZJ(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Nr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Zu.d(t,e)},D:function(t,e,n){const r=LTe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Nr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Nr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Nr(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Nr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Op.noon:r===0?i=Op.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Op.evening:r>=12?i=Op.afternoon:r>=4?i=Op.morning:i=Op.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Zu.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Zu.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Nr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Nr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Zu.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Zu.s(t,e)},S:function(t,e){return Zu.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Ez(r);case"XXXX":case"XX":return Uf(r);case"XXXXX":case"XXX":default:return Uf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Ez(r);case"xxxx":case"xx":return Uf(r);case"xxxxx":case"xxx":default:return Uf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_z(r,":");case"OOOO":default:return"GMT"+Uf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_z(r,":");case"zzzz":default:return"GMT"+Uf(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Nr(r,e.length)},T:function(t,e,n){const r=t.getTime();return Nr(r,e.length)}};function _z(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Nr(s,2)}function Ez(t,e){return t%60===0?(t>0?"-":"+")+Nr(Math.abs(t)/60,2):Uf(t,e)}function Uf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Nr(Math.trunc(r/60),2),s=Nr(r%60,2);return n+i+e+s}const Az=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tZ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BTe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Az(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Az(r,e)).replace("{{time}}",tZ(i,e))},$Te={p:tZ,P:BTe},zTe=/^D+$/,qTe=/^Y+$/,UTe=["D","DD","YY","YYYY"];function HTe(t){return zTe.test(t)}function VTe(t){return qTe.test(t)}function WTe(t,e,n){const r=KTe(t,e,n);if(console.warn(r),UTe.includes(t))throw new RangeError(r)}function KTe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const GTe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YTe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XTe=/^'([^]*?)'?$/,JTe=/''/g,ZTe=/[a-zA-Z]/;function _s(t,e,n){const r=db(),i=n?.locale??r.locale??JJ,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=tr(t);if(!iTe(l))throw new RangeError("Invalid time value");let c=e.match(YTe).map(d=>{const f=d[0];if(f==="p"||f==="P"){const p=$Te[f];return p(d,i.formatLong)}return d}).join("").match(GTe).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:QTe(d)};if(jz[f])return{isToken:!0,value:d};if(f.match(ZTe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!n?.useAdditionalWeekYearTokens&&VTe(f)||!n?.useAdditionalDayOfYearTokens&&HTe(f))&&WTe(f,e,String(t));const p=jz[f[0]];return p(l,f,i.localize,u)}).join("")}function QTe(t){const e=t.match(XTe);return e?e[1].replace(JTe,"'"):t}function eOe(t){const e=tr(t),n=e.getFullYear(),r=e.getMonth(),i=lo(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function tOe(t){return Math.trunc(+tr(t)/1e3)}function nOe(t){const e=tr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function rOe(t,e){return sTe(nOe(t),Ea(t),e)+1}function d5(t,e){const n=tr(t),r=tr(e);return n.getTime()>r.getTime()}function nZ(t,e){const n=tr(t),r=tr(e);return+n<+r}function DR(t,e){const n=tr(t),r=tr(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function iOe(t,e){const n=tr(t),r=tr(e);return n.getFullYear()===r.getFullYear()}function OC(t,e){return ia(t,-e)}function PC(t,e){const n=tr(t),r=n.getFullYear(),i=n.getDate(),s=lo(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=eOe(s);return n.setMonth(e,Math.min(i,o)),n}function Cz(t,e){const n=tr(t);return isNaN(+n)?lo(t,NaN):(n.setFullYear(e),n)}const sOe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},aOe=(t,e,n)=>{let r;const i=sOe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},oOe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},lOe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},cOe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uOe={date:mm({formats:oOe,defaultWidth:"full"}),time:mm({formats:lOe,defaultWidth:"full"}),dateTime:mm({formats:cOe,defaultWidth:"full"})},dOe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},fOe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},hOe=(t,e,n,r)=>e.getHours()!==1?fOe[t]:dOe[t],pOe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},mOe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},gOe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},vOe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},yOe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},xOe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},bOe=(t,e)=>Number(t)+"º",wOe={ordinalNumber:bOe,era:Kl({values:pOe,defaultWidth:"wide"}),quarter:Kl({values:mOe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Kl({values:gOe,defaultWidth:"wide"}),day:Kl({values:vOe,defaultWidth:"wide"}),dayPeriod:Kl({values:yOe,defaultWidth:"wide",formattingValues:xOe,defaultFormattingWidth:"wide"})},NOe=/^(\d+)(º)?/i,SOe=/\d+/i,jOe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},_Oe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},EOe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},AOe={any:[/1/i,/2/i,/3/i,/4/i]},COe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},kOe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},TOe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},OOe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},POe={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},MOe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},ROe={ordinalNumber:XJ({matchPattern:NOe,parsePattern:SOe,valueCallback:function(t){return parseInt(t,10)}}),era:Gl({matchPatterns:jOe,defaultMatchWidth:"wide",parsePatterns:_Oe,defaultParseWidth:"any"}),quarter:Gl({matchPatterns:EOe,defaultMatchWidth:"wide",parsePatterns:AOe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gl({matchPatterns:COe,defaultMatchWidth:"wide",parsePatterns:kOe,defaultParseWidth:"any"}),day:Gl({matchPatterns:TOe,defaultMatchWidth:"wide",parsePatterns:OOe,defaultParseWidth:"any"}),dayPeriod:Gl({matchPatterns:POe,defaultMatchWidth:"any",parsePatterns:MOe,defaultParseWidth:"any"})},Ro={code:"es",formatDistance:aOe,formatLong:uOe,formatRelative:hOe,localize:wOe,match:ROe,options:{weekStartsOn:1,firstWeekContainsDate:1}};var hn=function(){return hn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hn.apply(this,arguments)};function DOe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rZ(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function fb(t){return t.mode==="multiple"}function hb(t){return t.mode==="range"}function dj(t){return t.mode==="single"}var IOe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function LOe(t,e){return _s(t,"LLLL y",e)}function FOe(t,e){return _s(t,"d",e)}function BOe(t,e){return _s(t,"LLLL",e)}function $Oe(t){return"".concat(t)}function zOe(t,e){return _s(t,"cccccc",e)}function qOe(t,e){return _s(t,"yyyy",e)}var UOe=Object.freeze({__proto__:null,formatCaption:LOe,formatDay:FOe,formatMonthCaption:BOe,formatWeekNumber:$Oe,formatWeekdayName:zOe,formatYearCaption:qOe}),HOe=function(t,e,n){return _s(t,"do MMMM (EEEE)",n)},VOe=function(){return"Month: "},WOe=function(){return"Go to next month"},KOe=function(){return"Go to previous month"},GOe=function(t,e){return _s(t,"cccc",e)},YOe=function(t){return"Week n. ".concat(t)},XOe=function(){return"Year: "},JOe=Object.freeze({__proto__:null,labelDay:HOe,labelMonthDropdown:VOe,labelNext:WOe,labelPrevious:KOe,labelWeekNumber:YOe,labelWeekday:GOe,labelYearDropdown:XOe});function ZOe(){var t="buttons",e=IOe,n=JJ,r={},i={},s=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:UOe,labels:JOe,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:o,today:l,mode:"default"}}function QOe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,s=t.fromDate,o=t.toDate;return r?s=Ea(r):e&&(s=new Date(e,0,1)),i?o=MR(i):n&&(o=new Date(n,11,31)),{fromDate:s?mg(s):void 0,toDate:o?mg(o):void 0}}var iZ=x.createContext(void 0);function e5e(t){var e,n=t.initialProps,r=ZOe(),i=QOe(n),s=i.fromDate,o=i.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(dj(n)||fb(n)||hb(n))&&(c=n.onSelect);var u=hn(hn(hn({},r),n),{captionLayout:l,classNames:hn(hn({},r.classNames),n.classNames),components:hn({},n.components),formatters:hn(hn({},r.formatters),n.formatters),fromDate:s,labels:hn(hn({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:hn(hn({},r.modifiers),n.modifiers),modifiersClassNames:hn(hn({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:hn(hn({},r.styles),n.styles),toDate:o});return a.jsx(iZ.Provider,{value:u,children:t.children})}function Br(){var t=x.useContext(iZ);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function sZ(t){var e=Br(),n=e.locale,r=e.classNames,i=e.styles,s=e.formatters.formatCaption;return a.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:n})})}function t5e(t){return a.jsx("svg",hn({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aZ(t){var e,n,r=t.onChange,i=t.value,s=t.children,o=t.caption,l=t.className,c=t.style,u=Br(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:t5e;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),a.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:s}),a.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function n5e(t){var e,n=Br(),r=n.fromDate,i=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});var f=[];if(iOe(r,i))for(var p=Ea(r),h=r.getMonth();h<=i.getMonth();h++)f.push(PC(p,h));else for(var p=Ea(new Date),h=0;h<=11;h++)f.push(PC(p,h));var m=function(v){var y=Number(v.target.value),b=PC(Ea(t.displayMonth),y);t.onChange(b)},g=(e=u?.Dropdown)!==null&&e!==void 0?e:aZ;return a.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:f.map(function(v){return a.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function r5e(t){var e,n=t.displayMonth,r=Br(),i=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!i)return a.jsx(a.Fragment,{});if(!s)return a.jsx(a.Fragment,{});for(var h=i.getFullYear(),m=s.getFullYear(),g=h;g<=m;g++)p.push(Cz(GJ(new Date),g));var v=function(b){var N=Cz(Ea(n),Number(b.target.value));t.onChange(N)},y=(e=u?.Dropdown)!==null&&e!==void 0?e:aZ;return a.jsx(y,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:o}),children:p.map(function(b){return a.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function i5e(t,e){var n=x.useState(t),r=n[0],i=n[1],s=e===void 0?r:e;return[s,i]}function s5e(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,s=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(s&&jx(s,i)<0){var u=-1*(c-1);i=bl(s,u)}return o&&jx(i,o)<0&&(i=o),Ea(i)}function a5e(){var t=Br(),e=s5e(t),n=i5e(e,t.month),r=n[0],i=n[1],s=function(o){var l;if(!t.disableNavigation){var c=Ea(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,s]}function o5e(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Ea(t),s=Ea(bl(i,r)),o=jx(s,i),l=[],c=0;c<o;c++){var u=bl(i,c);l.push(u)}return n&&(l=l.reverse()),l}function l5e(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,l=Ea(t);if(!n)return bl(l,o);var c=jx(n,t);if(!(c<s))return bl(l,o)}}function c5e(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,o=r?s:1,l=Ea(t);if(!n)return bl(l,-o);var c=jx(l,n);if(!(c<=0))return bl(l,-o)}}var oZ=x.createContext(void 0);function u5e(t){var e=Br(),n=a5e(),r=n[0],i=n[1],s=o5e(r,e),o=l5e(r,e),l=c5e(r,e),c=function(f){return s.some(function(p){return DR(f,p)})},u=function(f,p){c(f)||(p&&nZ(f,p)?i(bl(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(oZ.Provider,{value:d,children:t.children})}function pb(){var t=x.useContext(oZ);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function kz(t){var e,n=Br(),r=n.classNames,i=n.styles,s=n.components,o=pb().goToMonth,l=function(d){o(bl(d,t.displayIndex?-t.displayIndex:0))},c=(e=s?.CaptionLabel)!==null&&e!==void 0?e:sZ,u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth});return a.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[a.jsx("div",{className:r.vhidden,children:u}),a.jsx(n5e,{onChange:l,displayMonth:t.displayMonth}),a.jsx(r5e,{onChange:l,displayMonth:t.displayMonth})]})}function d5e(t){return a.jsx("svg",hn({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function f5e(t){return a.jsx("svg",hn({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Uw=x.forwardRef(function(t,e){var n=Br(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];t.className&&s.push(t.className);var o=s.join(" "),l=hn(hn({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),a.jsx("button",hn({},t,{ref:e,type:"button",className:o,style:l}))});function h5e(t){var e,n,r=Br(),i=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return a.jsx(a.Fragment,{});var p=u(t.previousMonth,{locale:s}),h=[o.nav_button,o.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:s}),g=[o.nav_button,o.nav_button_next].join(" "),v=(e=f?.IconRight)!==null&&e!==void 0?e:f5e,y=(n=f?.IconLeft)!==null&&n!==void 0?n:d5e;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&a.jsx(Uw,{name:"previous-month","aria-label":p,className:h,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?a.jsx(v,{className:o.nav_icon,style:l.nav_icon}):a.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&a.jsx(Uw,{name:"next-month","aria-label":m,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?a.jsx(y,{className:o.nav_icon,style:l.nav_icon}):a.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function Tz(t){var e=Br().numberOfMonths,n=pb(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(m){return DR(t.displayMonth,m)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),p=function(){r&&s(r)},h=function(){i&&s(i)};return a.jsx(h5e,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:p,onNextClick:h})}function p5e(t){var e,n=Br(),r=n.classNames,i=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(e=l?.CaptionLabel)!==null&&e!==void 0?e:sZ,u;return i?u=a.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=a.jsx(kz,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=a.jsxs(a.Fragment,{children:[a.jsx(kz,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),a.jsx(Tz,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(Tz,{displayMonth:t.displayMonth,id:t.id})]}),a.jsx("div",{className:r.caption,style:s.caption,children:u})}function m5e(t){var e=Br(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?a.jsx("tfoot",{className:i,style:r.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:n})})}):a.jsx(a.Fragment,{})}function g5e(t,e,n){for(var r=n?zh(new Date):dc(new Date,{locale:t,weekStartsOn:e}),i=[],s=0;s<7;s++){var o=ia(r,s);i.push(o)}return i}function v5e(){var t=Br(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,s=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=g5e(i,s,o);return a.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&a.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return a.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},f)})]})}function y5e(){var t,e=Br(),n=e.classNames,r=e.styles,i=e.components,s=(t=i?.HeadRow)!==null&&t!==void 0?t:v5e;return a.jsx("thead",{style:r.head,className:n.head,children:a.jsx(s,{})})}function x5e(t){var e=Br(),n=e.locale,r=e.formatters.formatDay;return a.jsx(a.Fragment,{children:r(t.date,{locale:n})})}var IR=x.createContext(void 0);function b5e(t){if(!fb(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(IR.Provider,{value:e,children:t.children})}return a.jsx(w5e,{initialProps:t.initialProps,children:t.children})}function w5e(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,s=e.max,o=function(u,d,f){var p,h;(p=e.onDayClick)===null||p===void 0||p.call(e,u,d,f);var m=!!(d.selected&&i&&r?.length===i);if(!m){var g=!!(!d.selected&&s&&r?.length===s);if(!g){var v=r?rZ([],r):[];if(d.selected){var y=v.findIndex(function(b){return ja(u,b)});v.splice(y,1)}else v.push(u);(h=e.onSelect)===null||h===void 0||h.call(e,v,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=s&&r.length>s-1,f=r.some(function(p){return ja(p,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return a.jsx(IR.Provider,{value:c,children:n})}function LR(){var t=x.useContext(IR);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function N5e(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?ja(i,t)&&ja(r,t)?void 0:ja(i,t)?{from:i,to:void 0}:ja(r,t)?void 0:d5(r,t)?{from:t,to:i}:{from:r,to:t}:i?d5(t,i)?{from:i,to:t}:{from:t,to:i}:r?nZ(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var FR=x.createContext(void 0);function S5e(t){if(!hb(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(FR.Provider,{value:e,children:t.children})}return a.jsx(j5e,{initialProps:t.initialProps,children:t.children})}function j5e(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},s=i.from,o=i.to,l=e.min,c=e.max,u=function(h,m,g){var v,y;(v=e.onDayClick)===null||v===void 0||v.call(e,h,m,g);var b=N5e(h,r);(y=e.onSelect)===null||y===void 0||y.call(e,b,h,m,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],ja(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:OC(s,l-1),before:ia(s,l-1)}),s&&o&&d.disabled.push({after:s,before:ia(s,l-1)}),!s&&o&&d.disabled.push({after:OC(o,l-1),before:ia(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:ia(s,-c+1)}),d.disabled.push({after:ia(s,c-1)})),s&&o){var f=Zl(o,s)+1,p=c-f;d.disabled.push({before:OC(s,p)}),d.disabled.push({after:ia(o,p)})}!s&&o&&(d.disabled.push({before:ia(o,-c+1)}),d.disabled.push({after:ia(o,c-1)}))}return a.jsx(FR.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function BR(){var t=x.useContext(FR);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function o1(t){return Array.isArray(t)?rZ([],t):t!==void 0?[t]:[]}function _5e(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=o1(i)}),e}var wl;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(wl||(wl={}));var E5e=wl.Selected,Bc=wl.Disabled,A5e=wl.Hidden,C5e=wl.Today,MC=wl.RangeEnd,RC=wl.RangeMiddle,DC=wl.RangeStart,k5e=wl.Outside;function T5e(t,e,n){var r,i=(r={},r[E5e]=o1(t.selected),r[Bc]=o1(t.disabled),r[A5e]=o1(t.hidden),r[C5e]=[t.today],r[MC]=[],r[RC]=[],r[DC]=[],r[k5e]=[],r);return t.fromDate&&i[Bc].push({before:t.fromDate}),t.toDate&&i[Bc].push({after:t.toDate}),fb(t)?i[Bc]=i[Bc].concat(e.modifiers[Bc]):hb(t)&&(i[Bc]=i[Bc].concat(n.modifiers[Bc]),i[DC]=n.modifiers[DC],i[RC]=n.modifiers[RC],i[MC]=n.modifiers[MC]),i}var lZ=x.createContext(void 0);function O5e(t){var e=Br(),n=LR(),r=BR(),i=T5e(e,n,r),s=_5e(e.modifiers),o=hn(hn({},i),s);return a.jsx(lZ.Provider,{value:o,children:t.children})}function cZ(){var t=x.useContext(lZ);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function P5e(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function M5e(t){return!!(t&&typeof t=="object"&&"from"in t)}function R5e(t){return!!(t&&typeof t=="object"&&"after"in t)}function D5e(t){return!!(t&&typeof t=="object"&&"before"in t)}function I5e(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function L5e(t,e){var n,r=e.from,i=e.to;if(r&&i){var s=Zl(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var o=Zl(t,r)>=0&&Zl(i,t)>=0;return o}return i?ja(i,t):r?ja(r,t):!1}function F5e(t){return PR(t)}function B5e(t){return Array.isArray(t)&&t.every(PR)}function $5e(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(F5e(n))return ja(t,n);if(B5e(n))return n.includes(t);if(M5e(n))return L5e(t,n);if(I5e(n))return n.dayOfWeek.includes(t.getDay());if(P5e(n)){var r=Zl(n.before,t),i=Zl(n.after,t),s=r>0,o=i<0,l=d5(n.before,n.after);return l?o&&s:s||o}return R5e(n)?Zl(t,n.after)>0:D5e(n)?Zl(n.before,t)>0:typeof n=="function"?n(t):!1})}function $R(t,e,n){var r=Object.keys(e).reduce(function(s,o){var l=e[o];return $5e(t,l)&&s.push(o),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!DR(t,n)&&(i.outside=!0),i}function z5e(t,e){for(var n=Ea(t[0]),r=MR(t[t.length-1]),i,s,o=n;o<=r;){var l=$R(o,e),c=!l.disabled&&!l.hidden;if(!c){o=ia(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),i||(i=o),o=ia(o,1)}return s||i}var q5e=365;function uZ(t,e){var n=e.moveBy,r=e.direction,i=e.context,s=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,p={day:ia,week:u5,month:bl,year:tTe,startOfWeek:function(v){return i.ISOWeek?zh(v):dc(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return i.ISOWeek?YJ(v):RR(v,{locale:f,weekStartsOn:c})}},h=p[n](t,r==="after"?1:-1);r==="before"&&u?h=nTe([u,h]):r==="after"&&d&&(h=rTe([d,h]));var m=!0;if(s){var g=$R(h,s);m=!g.disabled&&!g.hidden}return m?h:l.count>q5e?l.lastFocused:uZ(h,{moveBy:n,direction:r,context:i,modifiers:s,retry:hn(hn({},l),{count:l.count+1})})}var dZ=x.createContext(void 0);function U5e(t){var e=pb(),n=cZ(),r=x.useState(),i=r[0],s=r[1],o=x.useState(),l=o[0],c=o[1],u=z5e(e.displayMonths,n),d=i??(l&&e.isDateDisplayed(l))?l:u,f=function(){c(i),s(void 0)},p=function(v){s(v)},h=Br(),m=function(v,y){if(i){var b=uZ(i,{moveBy:v,direction:y,context:h,modifiers:n});ja(i,b)||(e.goToDate(b,i),p(b))}},g={focusedDay:i,focusTarget:d,blur:f,focus:p,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return a.jsx(dZ.Provider,{value:g,children:t.children})}function zR(){var t=x.useContext(dZ);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function H5e(t,e){var n=cZ(),r=$R(t,n,e);return r}var qR=x.createContext(void 0);function V5e(t){if(!dj(t.initialProps)){var e={selected:void 0};return a.jsx(qR.Provider,{value:e,children:t.children})}return a.jsx(W5e,{initialProps:t.initialProps,children:t.children})}function W5e(t){var e=t.initialProps,n=t.children,r=function(s,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,o,l)},i={selected:e.selected,onDayClick:r};return a.jsx(qR.Provider,{value:i,children:n})}function fZ(){var t=x.useContext(qR);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function K5e(t,e){var n=Br(),r=fZ(),i=LR(),s=BR(),o=zR(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,p=o.focus,h=o.focusMonthBefore,m=o.focusMonthAfter,g=o.focusYearBefore,v=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,N=function(D){var z,H,ee,ae;dj(n)?(z=r.onDayClick)===null||z===void 0||z.call(r,t,e,D):fb(n)?(H=i.onDayClick)===null||H===void 0||H.call(i,t,e,D):hb(n)?(ee=s.onDayClick)===null||ee===void 0||ee.call(s,t,e,D):(ae=n.onDayClick)===null||ae===void 0||ae.call(n,t,e,D)},S=function(D){var z;p(t),(z=n.onDayFocus)===null||z===void 0||z.call(n,t,e,D)},E=function(D){var z;f(),(z=n.onDayBlur)===null||z===void 0||z.call(n,t,e,D)},C=function(D){var z;(z=n.onDayMouseEnter)===null||z===void 0||z.call(n,t,e,D)},T=function(D){var z;(z=n.onDayMouseLeave)===null||z===void 0||z.call(n,t,e,D)},_=function(D){var z;(z=n.onDayPointerEnter)===null||z===void 0||z.call(n,t,e,D)},j=function(D){var z;(z=n.onDayPointerLeave)===null||z===void 0||z.call(n,t,e,D)},P=function(D){var z;(z=n.onDayTouchCancel)===null||z===void 0||z.call(n,t,e,D)},k=function(D){var z;(z=n.onDayTouchEnd)===null||z===void 0||z.call(n,t,e,D)},O=function(D){var z;(z=n.onDayTouchMove)===null||z===void 0||z.call(n,t,e,D)},M=function(D){var z;(z=n.onDayTouchStart)===null||z===void 0||z.call(n,t,e,D)},I=function(D){var z;(z=n.onDayKeyUp)===null||z===void 0||z.call(n,t,e,D)},B=function(D){var z;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),u();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),d();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?g():h();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?v():m();break;case"Home":D.preventDefault(),D.stopPropagation(),y();break;case"End":D.preventDefault(),D.stopPropagation(),b();break}(z=n.onDayKeyDown)===null||z===void 0||z.call(n,t,e,D)},U={onClick:N,onFocus:S,onBlur:E,onKeyDown:B,onKeyUp:I,onMouseEnter:C,onMouseLeave:T,onPointerEnter:_,onPointerLeave:j,onTouchCancel:P,onTouchEnd:k,onTouchMove:O,onTouchStart:M};return U}function G5e(){var t=Br(),e=fZ(),n=LR(),r=BR(),i=dj(t)?e.selected:fb(t)?n.selected:hb(t)?r.selected:void 0;return i}function Y5e(t){return Object.values(wl).includes(t)}function X5e(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(Y5e(r)){var s=t.classNames["day_".concat(r)];s&&n.push(s)}}),n}function J5e(t,e){var n=hn({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=hn(hn({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Z5e(t,e,n){var r,i,s,o=Br(),l=zR(),c=H5e(t,e),u=K5e(t,c),d=G5e(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var C;c.outside||l.focusedDay&&f&&ja(l.focusedDay,t)&&((C=n.current)===null||C===void 0||C.focus())},[l.focusedDay,t,n,f,c.outside]);var p=X5e(o,c).join(" "),h=J5e(o,c),m=!!(c.outside&&!o.showOutsideDays||c.hidden),g=(s=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:x5e,v=a.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),y={style:h,className:p,children:v,role:"gridcell"},b=l.focusTarget&&ja(l.focusTarget,t)&&!c.outside,N=l.focusedDay&&ja(l.focusedDay,t),S=hn(hn(hn({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=N||b?0:-1,r)),u),E={isButton:f,isHidden:m,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:y};return E}function Q5e(t){var e=x.useRef(null),n=Z5e(t.date,t.displayMonth,e);return n.isHidden?a.jsx("div",{role:"gridcell"}):n.isButton?a.jsx(Uw,hn({name:"day",ref:e},n.buttonProps)):a.jsx("div",hn({},n.divProps))}function ePe(t){var e=t.number,n=t.dates,r=Br(),i=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return a.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var f=c(Number(e),{locale:l}),p=function(h){i(e,n,h)};return a.jsx(Uw,{name:"week-number","aria-label":f,className:o.weeknumber,style:s.weeknumber,onClick:p,children:d})}function tPe(t){var e,n,r=Br(),i=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l?.Day)!==null&&e!==void 0?e:Q5e,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:ePe,d;return o&&(d=a.jsx("td",{className:s.cell,style:i.cell,children:a.jsx(u,{number:t.weekNumber,dates:t.dates})})),a.jsxs("tr",{className:s.row,style:i.row,children:[d,t.dates.map(function(f){return a.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:a.jsx(c,{displayMonth:t.displayMonth,date:f})},tOe(f))})]})}function Oz(t,e,n){for(var r=n?.ISOWeek?YJ(e):RR(e,n),i=n?.ISOWeek?zh(t):dc(t,n),s=Zl(r,i),o=[],l=0;l<=s;l++)o.push(ia(i,l));var c=o.reduce(function(u,d){var f=n?.ISOWeek?ZJ(d):eZ(d,n),p=u.find(function(h){return h.weekNumber===f});return p?(p.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function nPe(t,e){var n=Oz(Ea(t),MR(t),e);if(e?.useFixedWeeks){var r=rOe(t,e);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],o=u5(s,6-r),l=Oz(u5(s,1),o,e);n.push.apply(n,l)}}return n}function rPe(t){var e,n,r,i=Br(),s=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,p=i.firstWeekContainsDate,h=i.ISOWeek,m=nPe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:s,weekStartsOn:f,firstWeekContainsDate:p}),g=(e=d?.Head)!==null&&e!==void 0?e:y5e,v=(n=d?.Row)!==null&&n!==void 0?n:tPe,y=(r=d?.Footer)!==null&&r!==void 0?r:m5e;return a.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&a.jsx(g,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:m.map(function(b){return a.jsx(v,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),a.jsx(y,{displayMonth:t.displayMonth})]})}function iPe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sPe=iPe()?x.useLayoutEffect:x.useEffect,IC=!1,aPe=0;function Pz(){return"react-day-picker-".concat(++aPe)}function oPe(t){var e,n=t??(IC?Pz():null),r=x.useState(n),i=r[0],s=r[1];return sPe(function(){i===null&&s(Pz())},[]),x.useEffect(function(){IC===!1&&(IC=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function lPe(t){var e,n,r=Br(),i=r.dir,s=r.classNames,o=r.styles,l=r.components,c=pb().displayMonths,u=oPe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[s.month],p=o.month,h=t.displayIndex===0,m=t.displayIndex===c.length-1,g=!h&&!m;i==="rtl"&&(e=[h,m],m=e[0],h=e[1]),h&&(f.push(s.caption_start),p=hn(hn({},p),o.caption_start)),m&&(f.push(s.caption_end),p=hn(hn({},p),o.caption_end)),g&&(f.push(s.caption_between),p=hn(hn({},p),o.caption_between));var v=(n=l?.Caption)!==null&&n!==void 0?n:p5e;return a.jsxs("div",{className:f.join(" "),style:p,children:[a.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),a.jsx(rPe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function cPe(t){var e=Br(),n=e.classNames,r=e.styles;return a.jsx("div",{className:n.months,style:r.months,children:t.children})}function uPe(t){var e,n,r=t.initialProps,i=Br(),s=zR(),o=pb(),l=x.useState(!1),c=l[0],u=l[1];x.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=hn(hn({},i.styles.root),i.style),p=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var v;return hn(hn({},m),(v={},v[g]=r[g],v))},{}),h=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:cPe;return a.jsx("div",hn({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:a.jsx(h,{children:o.displayMonths.map(function(m,g){return a.jsx(lPe,{displayIndex:g,displayMonth:m},g)})})}))}function dPe(t){var e=t.children,n=DOe(t,["children"]);return a.jsx(e5e,{initialProps:n,children:a.jsx(u5e,{children:a.jsx(V5e,{initialProps:n,children:a.jsx(b5e,{initialProps:n,children:a.jsx(S5e,{initialProps:n,children:a.jsx(O5e,{children:a.jsx(U5e,{children:e})})})})})})})}function fPe(t){return a.jsx(dPe,hn({},t,{children:a.jsx(uPe,{initialProps:t})}))}function f5({className:t,classNames:e,showOutsideDays:n=!0,...r}){return a.jsx(fPe,{showOutsideDays:n,className:Xe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Xe(Ly({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Xe(Ly({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:i,...s})=>a.jsx(Hse,{className:Xe("h-4 w-4",i),...s}),IconRight:({className:i,...s})=>a.jsx(R9,{className:Xe("h-4 w-4",i),...s})},...r})}f5.displayName="Calendar";var fj="Popover",[hZ]=Ts(fj,[rf]),mb=rf(),[hPe,pf]=hZ(fj),pZ=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,l=mb(e),c=x.useRef(null),[u,d]=x.useState(!1),[f,p]=ao({prop:r,defaultProp:i??!1,onChange:s,caller:fj});return a.jsx(uS,{...l,children:a.jsx(hPe,{scope:e,contentId:Es(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:n})})};pZ.displayName=fj;var mZ="PopoverAnchor",pPe=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=pf(mZ,n),s=mb(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return x.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(tb,{...s,...r,ref:e})});pPe.displayName=mZ;var gZ="PopoverTrigger",vZ=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=pf(gZ,n),s=mb(n),o=Tn(e,i.triggerRef),l=a.jsx(Ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":NZ(i.open),...r,ref:o,onClick:vt(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:a.jsx(tb,{asChild:!0,...s,children:l})});vZ.displayName=gZ;var UR="PopoverPortal",[mPe,gPe]=hZ(UR,{forceMount:void 0}),yZ=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=pf(UR,e);return a.jsx(mPe,{scope:e,forceMount:n,children:a.jsx(Ca,{present:n||s.open,children:a.jsx(wP,{asChild:!0,container:i,children:r})})})};yZ.displayName=UR;var gg="PopoverContent",xZ=x.forwardRef((t,e)=>{const n=gPe(gg,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=pf(gg,t.__scopePopover);return a.jsx(Ca,{present:r||s.open,children:s.modal?a.jsx(yPe,{...i,ref:e}):a.jsx(xPe,{...i,ref:e})})});xZ.displayName=gg;var vPe=_P("PopoverContent.RemoveScroll"),yPe=x.forwardRef((t,e)=>{const n=pf(gg,t.__scopePopover),r=x.useRef(null),i=Tn(e,r),s=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return NP(o)},[]),a.jsx(jP,{as:vPe,allowPinchZoom:!0,children:a.jsx(bZ,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:vt(t.onCloseAutoFocus,o=>{o.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:vt(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:vt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),xPe=x.forwardRef((t,e)=>{const n=pf(gg,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return a.jsx(bZ,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),bZ=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,p=pf(gg,n),h=mb(n);return SP(),a.jsx(EP,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:a.jsx(YN,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:a.jsx(dS,{"data-state":NZ(p.open),role:"dialog",id:p.contentId,...h,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),wZ="PopoverClose",bPe=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=pf(wZ,n);return a.jsx(Ot.button,{type:"button",...r,ref:e,onClick:vt(t.onClick,()=>i.onOpenChange(!1))})});bPe.displayName=wZ;var wPe="PopoverArrow",NPe=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=mb(n);return a.jsx(fS,{...i,...r,ref:e})});NPe.displayName=wPe;function NZ(t){return t?"open":"closed"}var SPe=pZ,jPe=vZ,_Pe=yZ,SZ=xZ;const rm=SPe,im=jPe,th=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>a.jsx(_Pe,{children:a.jsx(SZ,{ref:i,align:e,sideOffset:n,className:Xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));th.displayName=SZ.displayName;function EPe({taskId:t,currentUser:e}){const{toast:n}=nr(),[r,i]=x.useState(""),[s,o]=x.useState(null),[l,c]=x.useState(""),[u,d]=x.useState(null),[f,p]=x.useState(!1),{data:h,isLoading:m}=At({queryKey:[`/api/tasks/${t}/comments`],enabled:!!t}),g=yt({mutationFn:async T=>await ht("POST",`/api/tasks/${t}/comments`,{contenido:T}),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario agregado exitosamente"}),i(""),p(!1)},onError:()=>{n({title:"Error al agregar comentario",variant:"destructive"}),p(!1)}}),v=yt({mutationFn:async({id:T,content:_})=>await ht("PATCH",`/api/tasks/${t}/comments/${T}`,{contenido:_}),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario actualizado exitosamente"}),o(null),c("")},onError:()=>{n({title:"Error al actualizar comentario",variant:"destructive"})}}),y=yt({mutationFn:async T=>await ht("DELETE",`/api/tasks/${t}/comments/${T}`),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/comments`]}),n({title:"Comentario eliminado exitosamente"}),d(null)},onError:()=>{n({title:"Error al eliminar comentario",variant:"destructive"})}}),b=()=>{if(!r.trim()){n({title:"El comentario no puede estar vacío",variant:"destructive"});return}p(!0),g.mutate(r)},N=T=>{if(!l.trim()){n({title:"El comentario no puede estar vacío",variant:"destructive"});return}v.mutate({id:T,content:l})},S=T=>{y.mutate(T)},E=(T,_)=>{o(T),c(_)},C=()=>{o(null),c("")};return m?a.jsx("div",{className:"space-y-4",children:[...Array(3)].map((T,_)=>a.jsxs("div",{className:"flex gap-3 animate-pulse",children:[a.jsx("div",{className:"w-10 h-10 bg-secondary rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-secondary rounded w-1/4"}),a.jsx("div",{className:"h-12 bg-secondary rounded"})]})]},_))}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[a.jsxs("div",{className:"flex gap-3 mb-3",children:[a.jsx(P1,{className:"h-10 w-10",children:a.jsx(M1,{children:e?.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:e?.username||"Anónimo"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ahora"})]})]}),a.jsx(la,{value:r,onChange:T=>i(T.target.value),placeholder:"Escribe un comentario...",rows:3,className:"resize-none"}),a.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[a.jsx(re,{onClick:()=>i(""),variant:"outline",size:"sm",children:"Cancelar"}),a.jsxs(re,{onClick:b,size:"sm",disabled:!r.trim()||f,children:[f&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),a.jsx(Zx,{className:"w-4 h-4 mr-2"}),"Comentar"]})]})]}),a.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(T=>a.jsxs("div",{className:"border rounded-lg p-4 bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(P1,{className:"h-10 w-10",children:a.jsx(M1,{children:T.usuario?.username?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium",children:T.usuario?.username||"Anónimo"}),e?.id===T.usuarioId&&a.jsx(Ge,{variant:"secondary",className:"text-xs",children:"Tú"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[_s(new Date(T.createdAt),"PPpp",{locale:Ro}),new Date(T.updatedAt).getTime()>new Date(T.createdAt).getTime()&&a.jsx("span",{className:"ml-2",children:"(editado)"})]})]}),e?.id===T.usuarioId&&a.jsx("div",{className:"flex gap-1",children:s===T.id?a.jsxs(a.Fragment,{children:[a.jsxs(re,{onClick:()=>N(T.id),size:"sm",variant:"ghost",disabled:v.isPending,children:[v.isPending&&a.jsx(Id,{className:"w-4 h-4 animate-spin"}),!v.isPending&&"Guardar"]}),a.jsx(re,{onClick:C,size:"sm",variant:"ghost",children:"Cancelar"})]}):a.jsxs(a.Fragment,{children:[a.jsx(re,{onClick:()=>E(T.id,T.contenido),size:"sm",variant:"ghost",children:a.jsx(Vse,{className:"w-4 h-4"})}),a.jsx(re,{onClick:()=>d(T.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",children:a.jsx(ei,{className:"w-4 h-4"})})]})})]}),s===T.id?a.jsx(la,{value:l,onChange:_=>c(_.target.value),rows:3,className:"resize-none"}):a.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:T.contenido})]},T.id)):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("p",{children:"No hay comentarios aún"}),a.jsx("p",{className:"text-xs",children:"Sé el primero en comentar"})]})}),a.jsx(yc,{open:!!u,onOpenChange:()=>d(null),children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"Eliminar comentario"}),a.jsx(Cl,{children:"¿Estás seguro de que deseas eliminar este comentario? Esta acción no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:()=>u&&S(u),className:"bg-destructive hover:bg-destructive/90",disabled:y.isPending,children:[y.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const APe=t=>t.startsWith("image/")?a.jsx(CP,{className:"w-4 h-4"}):t.startsWith("audio/")?a.jsx(Wse,{className:"w-4 h-4"}):t.startsWith("video/")?a.jsx(Kse,{className:"w-4 h-4"}):t.includes("pdf")||t.includes("word")||t.includes("spreadsheet")?a.jsx(Qr,{className:"w-4 h-4"}):t.includes("zip")||t.includes("compressed")||t.includes("archive")?a.jsx(Gse,{className:"w-4 h-4"}):a.jsx(D9,{className:"w-4 h-4"}),CPe=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]};function kPe({taskId:t}){const{toast:e}=nr(),n=x.useRef(null),[r,i]=x.useState(null),[s,o]=x.useState(!1),{data:l,isLoading:c}=At({queryKey:[`/api/tasks/${t}/attachments`],enabled:!!t}),u=yt({mutationFn:async v=>{const y=new FormData;y.append("file",v);const b=await fetch(`/api/tasks/${t}/attachments`,{method:"POST",body:y,headers:{}});if(!b.ok)throw new Error("Upload failed");return b.json()},onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/attachments`]}),e({title:"Archivo cargado exitosamente"}),n.current&&(n.current.value="")},onError:()=>{e({title:"Error al cargar archivo",variant:"destructive"})}}),d=yt({mutationFn:async v=>await ht("DELETE",`/api/tasks/${t}/attachments/${v}`),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/attachments`]}),e({title:"Archivo eliminado exitosamente"}),i(null)},onError:()=>{e({title:"Error al eliminar archivo",variant:"destructive"})}}),f=v=>{if(v.size>10485760){e({title:"Archivo demasiado grande",description:"El archivo no puede superar 10MB",variant:"destructive"});return}u.mutate(v)},p=v=>{const y=v.target.files?.[0];y&&f(y)},h=v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?o(!0):v.type==="dragleave"&&o(!1)},m=v=>{v.preventDefault(),v.stopPropagation(),o(!1);const y=v.dataTransfer.files?.[0];y&&f(y)},g=v=>{const y=document.createElement("a");y.href=v.filePath,y.download=v.originalName,document.body.appendChild(y),y.click(),document.body.removeChild(y)};return c?a.jsx("div",{className:"space-y-4",children:[...Array(2)].map((v,y)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-secondary rounded-lg animate-pulse",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-primary rounded w-1/3"}),a.jsx("div",{className:"h-3 bg-primary rounded w-1/4"})]})]},y))}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:m,className:`border-2 border-dashed rounded-lg p-6 text-center transition-all ${s?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[a.jsx("input",{ref:n,type:"file",onChange:p,className:"hidden",disabled:u.isPending}),a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(sa,{className:"w-8 h-8 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Arrastra archivos aquí o haz clic para seleccionar"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Máximo 10MB por archivo"})]}),a.jsxs(re,{onClick:()=>n.current?.click(),size:"sm",className:"mt-2",disabled:u.isPending,children:[u.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),u.isPending?"Cargando...":"Seleccionar archivo"]})]})]}),a.jsx("div",{className:"space-y-2",children:l&&l.length>0?l.map(v=>a.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 text-muted-foreground",children:APe(v.fileType)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:v.originalName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:CPe(v.fileSize)})]}),a.jsx(Ge,{variant:"secondary",className:"text-xs flex-shrink-0",children:v.fileType.split("/")[1]?.toUpperCase()||"FILE"}),a.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[a.jsx(re,{onClick:()=>g(v),size:"sm",variant:"ghost",title:"Descargar",children:a.jsx(Cs,{className:"w-4 h-4"})}),a.jsx(re,{onClick:()=>i(v.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",title:"Eliminar",children:a.jsx(ei,{className:"w-4 h-4"})})]})]},v.id)):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(D9,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay archivos adjuntos"}),a.jsx("p",{className:"text-xs",children:"Carga tu primer archivo"})]})}),a.jsx(yc,{open:!!r,onOpenChange:()=>i(null),children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"Eliminar archivo"}),a.jsx(Cl,{children:"¿Estás seguro de que deseas eliminar este archivo? Esta acción no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:()=>r&&d.mutate(r),className:"bg-destructive hover:bg-destructive/90",disabled:d.isPending,children:[d.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const y0=t=>{const e=Math.floor(t/60),n=t%60;return`${e}h ${n}m`};function TPe({taskId:t,estimatedMinutes:e=null}){const{toast:n}=nr(),[r,i]=x.useState(!1),[s,o]=x.useState(0),[l,c]=x.useState(!1),[u,d]=x.useState(""),[f,p]=x.useState(""),[h,m]=x.useState(null),{data:g,isLoading:v}=At({queryKey:[`/api/tasks/${t}/time-entries`],enabled:!!t});x.useEffect(()=>{let P;return r&&(P=setInterval(()=>{o(k=>k+1)},1e3)),()=>clearInterval(P)},[r]);const y=yt({mutationFn:async P=>await ht("POST",`/api/tasks/${t}/time-entries`,P),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/time-entries`]}),n({title:"Tiempo registrado exitosamente"}),C()},onError:()=>{n({title:"Error al registrar tiempo",variant:"destructive"})}}),b=yt({mutationFn:async P=>await ht("DELETE",`/api/tasks/${t}/time-entries/${P}`),onSuccess:()=>{Lt.invalidateQueries({queryKey:[`/api/tasks/${t}/time-entries`]}),n({title:"Tiempo eliminado exitosamente"}),m(null)},onError:()=>{n({title:"Error al eliminar tiempo",variant:"destructive"})}}),N=()=>{i(!r)},S=()=>{if(s===0){n({title:"El temporizador está en cero",variant:"destructive"});return}const P=Math.round(s/60);y.mutate({duration:P,description:"Tiempo registrado desde el temporizador"}),i(!1),o(0)},E=()=>{if(!u||parseInt(u)<=0){n({title:"Ingresa una cantidad válida de minutos",variant:"destructive"});return}y.mutate({duration:parseInt(u),description:f||"Tiempo registrado manualmente"})},C=()=>{d(""),p(""),c(!1)},T=(g||[]).reduce((P,k)=>P+k.duration,0),_=e&&e>0?Math.round(T/e*100):0,j=e&&T>e;return v?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-32 bg-secondary rounded-lg animate-pulse"}),a.jsx("div",{className:"h-48 bg-secondary rounded-lg animate-pulse"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Temporizador"})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"text-6xl font-mono font-bold",children:[String(Math.floor(s/3600)).padStart(2,"0"),":",String(Math.floor(s%3600/60)).padStart(2,"0"),":",String(s%60).padStart(2,"0")]})}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx(re,{onClick:N,size:"sm",variant:r?"destructive":"default",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Yse,{className:"w-4 h-4 mr-2"}),"Pausar"]}):a.jsxs(a.Fragment,{children:[a.jsx(I9,{className:"w-4 h-4 mr-2"}),"Iniciar"]})}),a.jsxs(re,{onClick:S,size:"sm",variant:"outline",disabled:s===0||y.isPending,children:[y.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),a.jsx(Xse,{className:"w-4 h-4 mr-2"}),"Registrar"]})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{className:"text-lg",children:"Resumen"})}),a.jsxs(Be,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tiempo Total:"}),a.jsx("span",{className:"text-2xl font-bold",children:y0(T)})]}),e&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Tiempo Estimado:"}),a.jsx("span",{className:"text-lg font-semibold",children:y0(e)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Progreso:"}),a.jsxs(Ge,{variant:j?"destructive":"default",className:"text-xs",children:[_,"%",j&&" (+exceso)"]})]}),a.jsx("div",{className:"w-full bg-secondary h-2 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all ${j?"bg-destructive":"bg-primary"}`,style:{width:`${Math.min(_,100)}%`}})}),j&&a.jsxs("p",{className:"text-xs text-destructive",children:["Has excedido el tiempo estimado por"," ",y0(T-e)]})]})]})]}),a.jsxs(Un,{open:l,onOpenChange:c,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{variant:"outline",className:"w-full",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Agregar Tiempo Manualmente"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Agregar Tiempo Manualmente"}),a.jsx(Qn,{children:"Registra tiempo que hayas trabajado fuera del temporizador"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"minutes",children:"Minutos"}),a.jsx(Ie,{id:"minutes",type:"number",value:u,onChange:P=>d(P.target.value),placeholder:"0",min:"1"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"description",children:"Descripción (opcional)"}),a.jsx(Ie,{id:"description",value:f,onChange:P=>p(P.target.value),placeholder:"Describe qué hiciste..."})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(re,{variant:"outline",onClick:()=>C(),children:"Cancelar"}),a.jsxs(re,{onClick:E,disabled:y.isPending,children:[y.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),"Agregar"]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{className:"text-lg flex items-center gap-2",children:[a.jsx(Uo,{className:"w-4 h-4"}),"Historial de Tiempo"]})}),a.jsx(Be,{children:g&&g.length>0?a.jsx("div",{className:"space-y-2",children:g.map(P=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:y0(P.duration)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:P.description}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_s(new Date(P.createdAt),"PPp",{locale:Ro})})]}),a.jsx(re,{onClick:()=>m(P.id),size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",children:a.jsx(ei,{className:"w-4 h-4"})})]},P.id))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Uo,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay registros de tiempo"})]})})]}),a.jsx(yc,{open:!!h,onOpenChange:()=>m(null),children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"Eliminar registro de tiempo"}),a.jsx(Cl,{children:"¿Estás seguro de que deseas eliminar este registro? Esta acción no se puede deshacer."})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:()=>h&&b.mutate(h),className:"bg-destructive hover:bg-destructive/90",disabled:b.isPending,children:[b.isPending&&a.jsx(Id,{className:"w-4 h-4 mr-2 animate-spin"}),"Eliminar"]})]})]})})]})}const Mz={BAJA:"#94a3b8",MEDIA:"#f59e0b",ALTA:"#ef4444"},Rz={PENDIENTE:"#64748b",EN_PROGRESO:"#3b82f6",COMPLETADA:"#10b981",CANCELADA:"#ef4444"},OPe=["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#06b6d4","#64748b"];function PPe({task:t,isOpen:e,onClose:n,clients:r=[],users:i=[]}){const{toast:s}=nr(),[o,l]=x.useState("details"),[c,u]=x.useState(!1),[d,f]=x.useState({titulo:t?.titulo||"",descripcion:t?.descripcion||"",clienteId:t?.clienteId||"",asignadoA:t?.asignadoA||"",prioridad:t?.prioridad||"MEDIA",estado:t?.estado||"PENDIENTE",visibilidad:t?.visibilidad||"GENERAL",fechaVencimiento:t?.fechaVencimiento||"",progreso:t?.progreso||0,color:t?.color||null,etiquetas:t?.etiquetas||[],estimatedMinutes:t?.estimatedMinutes||null}),[p,h]=x.useState(t?.fechaInicio?new Date(t.fechaInicio):void 0),[m,g]=x.useState(t?.fechaVencimiento?new Date(t.fechaVencimiento):void 0),v=yt({mutationFn:async N=>{if(!t?.id)throw new Error("No task ID");return await ht("PATCH",`/api/tasks/${t.id}`,N)},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/tasks"]}),s({title:"Tarea actualizada exitosamente"}),u(!1)},onError:()=>{s({title:"Error al actualizar tarea",variant:"destructive"})}}),y=()=>{const N={...d,fechaInicio:p?.toISOString(),fechaVencimiento:m?.toISOString()};v.mutate(N)},b=()=>{t&&(f({titulo:t.titulo,descripcion:t.descripcion||"",clienteId:t.clienteId||"",asignadoA:t.asignadoA||"",prioridad:t.prioridad,estado:t.estado,visibilidad:t.visibilidad,fechaVencimiento:t.fechaVencimiento||"",progreso:t.progreso||0,color:t.color||null,etiquetas:t.etiquetas||[],estimatedMinutes:t.estimatedMinutes||null}),h(t.fechaInicio?new Date(t.fechaInicio):void 0),g(t.fechaVencimiento?new Date(t.fechaVencimiento):void 0)),u(!1)};return t?a.jsx(Un,{open:e,onOpenChange:n,children:a.jsxs(zn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(Hn,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[c?a.jsx(Ie,{value:d.titulo,onChange:N=>f({...d,titulo:N.target.value}),className:"text-xl font-semibold",placeholder:"Título de la tarea"}):a.jsx(Vn,{className:"text-2xl",children:t.titulo}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsxs(Ge,{variant:"outline",children:["#",t.id.slice(0,8)]}),a.jsx(Ge,{style:{backgroundColor:Rz[t.estado]+"20",color:Rz[t.estado]},children:t.estado.replace("_"," ")}),a.jsx(Ge,{style:{backgroundColor:Mz[t.prioridad]+"20",color:Mz[t.prioridad]},children:t.prioridad})]})]}),a.jsx("div",{className:"flex gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsxs(re,{onClick:y,size:"sm",children:[a.jsx(nS,{className:"w-4 h-4 mr-2"}),"Guardar"]}),a.jsxs(re,{onClick:b,variant:"outline",size:"sm",children:[a.jsx(jh,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]}):a.jsx(re,{onClick:()=>u(!0),size:"sm",children:"Editar"})})]})}),a.jsxs(Wo,{value:o,onValueChange:l,className:"mt-4",children:[a.jsxs(co,{className:"grid w-full grid-cols-6",children:[a.jsxs(vn,{value:"details",children:[a.jsx(om,{className:"w-4 h-4 mr-2"}),"Detalles"]}),a.jsxs(vn,{value:"subtasks",children:[a.jsx(om,{className:"w-4 h-4 mr-2"}),"Subtareas"]}),a.jsxs(vn,{value:"comments",children:[a.jsx(s4,{className:"w-4 h-4 mr-2"}),"Comentarios"]}),a.jsxs(vn,{value:"attachments",children:[a.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Adjuntos"]}),a.jsxs(vn,{value:"time",children:[a.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Tiempo"]}),a.jsxs(vn,{value:"activity",children:[a.jsx(Ah,{className:"w-4 h-4 mr-2"}),"Historial"]})]}),a.jsx(Rn,{value:"details",className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(ye,{children:"Descripción"}),c?a.jsx(la,{value:d.descripcion,onChange:N=>f({...d,descripcion:N.target.value}),rows:4,placeholder:"Descripción de la tarea..."}):a.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-wrap",children:t.descripcion||"Sin descripción"})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Cliente"}),c?a.jsxs(un,{value:d.clienteId,onValueChange:N=>f({...d,clienteId:N}),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar cliente"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"",children:"Sin cliente"}),r.map(N=>a.jsx(Ke,{value:N.id,children:N.razonSocial},N.id))]})]}):a.jsx("p",{className:"text-sm mt-1",children:r.find(N=>N.id===t.clienteId)?.razonSocial||"Sin cliente"})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Asignado a"}),c?a.jsxs(un,{value:d.asignadoA,onValueChange:N=>f({...d,asignadoA:N}),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar usuario"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"",children:"Sin asignar"}),i.map(N=>a.jsx(Ke,{value:N.id,children:N.username},N.id))]})]}):a.jsx("p",{className:"text-sm mt-1",children:i.find(N=>N.id===t.asignadoA)?.username||"Sin asignar"})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Prioridad"}),c?a.jsxs(un,{value:d.prioridad,onValueChange:N=>f({...d,prioridad:N}),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"BAJA",children:"Baja"}),a.jsx(Ke,{value:"MEDIA",children:"Media"}),a.jsx(Ke,{value:"ALTA",children:"Alta"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.prioridad})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Estado"}),c?a.jsxs(un,{value:d.estado,onValueChange:N=>f({...d,estado:N}),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(Ke,{value:"EN_PROGRESO",children:"En Progreso"}),a.jsx(Ke,{value:"COMPLETADA",children:"Completada"}),a.jsx(Ke,{value:"CANCELADA",children:"Cancelada"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.estado.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Fecha de Inicio"}),c?a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsxs(re,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[a.jsx(j1,{className:"mr-2 h-4 w-4"}),p?_s(p,"PPP",{locale:Ro}):a.jsx("span",{children:"Seleccionar fecha"})]})}),a.jsx(th,{className:"w-auto p-0",children:a.jsx(f5,{mode:"single",selected:p,onSelect:h,locale:Ro,initialFocus:!0})})]}):a.jsx("p",{className:"text-sm mt-1",children:t.fechaInicio?_s(new Date(t.fechaInicio),"PPP",{locale:Ro}):"Sin fecha"})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Fecha de Vencimiento"}),c?a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsxs(re,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[a.jsx(j1,{className:"mr-2 h-4 w-4"}),m?_s(m,"PPP",{locale:Ro}):a.jsx("span",{children:"Seleccionar fecha"})]})}),a.jsx(th,{className:"w-auto p-0",children:a.jsx(f5,{mode:"single",selected:m,onSelect:g,locale:Ro,initialFocus:!0})})]}):a.jsx("p",{className:"text-sm mt-1",children:t.fechaVencimiento?_s(new Date(t.fechaVencimiento),"PPP",{locale:Ro}):"Sin fecha"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs(ye,{children:["Progreso: ",d.progreso,"%"]}),c?a.jsx(WJ,{value:[d.progreso],onValueChange:N=>f({...d,progreso:N[0]}),max:100,step:5,className:"mt-2"}):a.jsx("div",{className:"w-full bg-secondary h-2 rounded-full mt-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${t.progreso||0}%`}})})]}),c&&a.jsxs("div",{className:"col-span-2",children:[a.jsxs(ye,{className:"flex items-center gap-2",children:[a.jsx(kP,{className:"w-4 h-4"}),"Color de la Tarea"]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[OPe.map(N=>a.jsx("button",{onClick:()=>f({...d,color:N}),className:"w-8 h-8 rounded-full border-2 transition-all hover:scale-110",style:{backgroundColor:N,borderColor:d.color===N?"#000":"transparent"}},N)),a.jsx("button",{onClick:()=>f({...d,color:null}),className:"w-8 h-8 rounded-full border-2 bg-white transition-all hover:scale-110",style:{borderColor:d.color?"#e5e7eb":"#000"},children:a.jsx(jh,{className:"w-4 h-4 mx-auto text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Tiempo Estimado (minutos)"}),c?a.jsx(Ie,{type:"number",value:d.estimatedMinutes||"",onChange:N=>f({...d,estimatedMinutes:N.target.value?parseInt(N.target.value):null}),placeholder:"0"}):a.jsx("p",{className:"text-sm mt-1",children:t.estimatedMinutes?`${t.estimatedMinutes} min`:"No estimado"})]}),a.jsxs("div",{children:[a.jsx(ye,{children:"Visibilidad"}),c?a.jsxs(un,{value:d.visibilidad,onValueChange:N=>f({...d,visibilidad:N}),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"GENERAL",children:"General"}),a.jsx(Ke,{value:"PERSONAL",children:"Personal"})]})]}):a.jsx("p",{className:"text-sm mt-1",children:t.visibilidad})]})]})}),a.jsx(Rn,{value:"subtasks",children:a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(om,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Función de subtareas próximamente"})]})}),a.jsx(Rn,{value:"comments",children:t?.id?a.jsx(EPe,{taskId:t.id,currentUser:i?.[0]}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(s4,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(Rn,{value:"attachments",children:t?.id?a.jsx(kPe,{taskId:t.id}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Kd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(Rn,{value:"time",children:t?.id?a.jsx(TPe,{taskId:t.id,estimatedMinutes:t.estimatedMinutes}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Uo,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No se puede cargar la tarea"})]})}),a.jsx(Rn,{value:"activity",children:a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Ah,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Función de historial próximamente"})]})})]})]})}):null}function MPe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const hj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Hg(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function HR(t){return"nodeType"in t}function Oa(t){var e,n;return t?Hg(t)?t:HR(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function VR(t){const{Document:e}=Oa(t);return t instanceof e}function gb(t){return Hg(t)?!1:t instanceof Oa(t).HTMLElement}function jZ(t){return t instanceof Oa(t).SVGElement}function Vg(t){return t?Hg(t)?t.document:HR(t)?VR(t)?t:gb(t)||jZ(t)?t.ownerDocument:document:document:document}const fc=hj?x.useLayoutEffect:x.useEffect;function WR(t){const e=x.useRef(t);return fc(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function RPe(){const t=x.useRef(null),e=x.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=x.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function _x(t,e){e===void 0&&(e=[t]);const n=x.useRef(t);return fc(()=>{n.current!==t&&(n.current=t)},e),n}function vb(t,e){const n=x.useRef();return x.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Hw(t){const e=WR(t),n=x.useRef(null),r=x.useCallback(i=>{i!==n.current&&e?.(i,n.current),n.current=i},[]);return[n,r]}function h5(t){const e=x.useRef();return x.useEffect(()=>{e.current=t},[t]),e.current}let LC={};function yb(t,e){return x.useMemo(()=>{if(e)return e;const n=LC[t]==null?0:LC[t]+1;return LC[t]=n,t+"-"+n},[t,e])}function _Z(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=s[c];d!=null&&(s[c]=d+t*u)}return s},{...e})}}const gm=_Z(1),Ex=_Z(-1);function DPe(t){return"clientX"in t&&"clientY"in t}function KR(t){if(!t)return!1;const{KeyboardEvent:e}=Oa(t.target);return e&&t instanceof e}function IPe(t){if(!t)return!1;const{TouchEvent:e}=Oa(t.target);return e&&t instanceof e}function p5(t){if(IPe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return DPe(t)?{x:t.clientX,y:t.clientY}:null}const vg=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[vg.Translate.toString(t),vg.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Dz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function LPe(t){return t.matches(Dz)?t:t.querySelector(Dz)}const FPe={display:"none"};function BPe(t){let{id:e,value:n}=t;return le.createElement("div",{id:e,style:FPe},n)}function $Pe(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return le.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function zPe(){const[t,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const EZ=x.createContext(null);function qPe(t){const e=x.useContext(EZ);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function UPe(){const[t]=x.useState(()=>new Set),e=x.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[x.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const HPe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},VPe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function WPe(t){let{announcements:e=VPe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=HPe}=t;const{announce:s,announcement:o}=zPe(),l=yb("DndLiveRegion"),[c,u]=x.useState(!1);if(x.useEffect(()=>{u(!0)},[]),qPe(x.useMemo(()=>({onDragStart(f){let{active:p}=f;s(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:h}=f;e.onDragMove&&s(e.onDragMove({active:p,over:h}))},onDragOver(f){let{active:p,over:h}=f;s(e.onDragOver({active:p,over:h}))},onDragEnd(f){let{active:p,over:h}=f;s(e.onDragEnd({active:p,over:h}))},onDragCancel(f){let{active:p,over:h}=f;s(e.onDragCancel({active:p,over:h}))}}),[s,e])),!c)return null;const d=le.createElement(le.Fragment,null,le.createElement(BPe,{id:r,value:i.draggable}),le.createElement($Pe,{id:l,announcement:o}));return n?_d.createPortal(d,n):d}var Yi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Yi||(Yi={}));function Vw(){}function yg(t,e){return x.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function GR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Nl=Object.freeze({x:0,y:0});function AZ(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function CZ(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function KPe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Iz(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function kZ(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Lz(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const TZ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Lz(e,e.left,e.top),s=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=AZ(Lz(c),i);s.push({id:l,data:{droppableContainer:o,value:u}})}}return s.sort(CZ)},OZ=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=Iz(e),s=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=Iz(c),d=i.reduce((p,h,m)=>p+AZ(u[m],h),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:o,value:f}})}}return s.sort(CZ)};function GPe(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const c=e.width*e.height,u=t.width*t.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const YPe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const c=GPe(l,e);c>0&&i.push({id:o,data:{droppableContainer:s,value:c}})}}return i.sort(KPe)};function XPe(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function PZ(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Nl}function JPe(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const ZPe=JPe(1);function QPe(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function eMe(t,e,n){const r=QPe(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,c=t.left-o-(1-i)*parseFloat(n),u=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const tMe={ignoreTransform:!1};function Wg(t,e){e===void 0&&(e=tMe);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=Oa(t).getComputedStyle(t);u&&(n=eMe(n,u,d))}const{top:r,left:i,width:s,height:o,bottom:l,right:c}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:c}}function Fz(t){return Wg(t,{ignoreTransform:!0})}function nMe(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function rMe(t,e){return e===void 0&&(e=Oa(t).getComputedStyle(t)),e.position==="fixed"}function iMe(t,e){e===void 0&&(e=Oa(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function pj(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(VR(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!gb(i)||jZ(i)||n.includes(i))return n;const s=Oa(t).getComputedStyle(i);return i!==t&&iMe(i,s)&&n.push(i),rMe(i,s)?n:r(i.parentNode)}return t?r(t):n}function MZ(t){const[e]=pj(t,1);return e??null}function FC(t){return!hj||!t?null:Hg(t)?t:HR(t)?VR(t)||t===Vg(t).scrollingElement?window:gb(t)?t:null:null}function RZ(t){return Hg(t)?t.scrollX:t.scrollLeft}function DZ(t){return Hg(t)?t.scrollY:t.scrollTop}function m5(t){return{x:RZ(t),y:DZ(t)}}var as;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(as||(as={}));function IZ(t){return!hj||!t?!1:t===document.scrollingElement}function LZ(t){const e={x:0,y:0},n=IZ(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const sMe={x:.2,y:.2};function aMe(t,e,n,r,i){let{top:s,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),i===void 0&&(i=sMe);const{isTop:u,isBottom:d,isLeft:f,isRight:p}=LZ(t),h={x:0,y:0},m={x:0,y:0},g={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+g.height?(h.y=as.Backward,m.y=r*Math.abs((e.top+g.height-s)/g.height)):!d&&c>=e.bottom-g.height&&(h.y=as.Forward,m.y=r*Math.abs((e.bottom-g.height-c)/g.height)),!p&&l>=e.right-g.width?(h.x=as.Forward,m.x=r*Math.abs((e.right-g.width-l)/g.width)):!f&&o<=e.left+g.width&&(h.x=as.Backward,m.x=r*Math.abs((e.left+g.width-o)/g.width)),{direction:h,speed:m}}function oMe(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function FZ(t){return t.reduce((e,n)=>gm(e,m5(n)),Nl)}function lMe(t){return t.reduce((e,n)=>e+RZ(n),0)}function cMe(t){return t.reduce((e,n)=>e+DZ(n),0)}function uMe(t,e){if(e===void 0&&(e=Wg),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);MZ(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const dMe=[["x",["left","right"],lMe],["y",["top","bottom"],cMe]];class YR{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pj(n),i=FZ(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of dMe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),d=i[s]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class py{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function fMe(t){const{EventTarget:e}=Oa(t);return t instanceof e?t:Vg(t)}function BC(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Oo;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Oo||(Oo={}));function Bz(t){t.preventDefault()}function hMe(t){t.stopPropagation()}var Xn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Xn||(Xn={}));const BZ={start:[Xn.Space,Xn.Enter],cancel:[Xn.Esc],end:[Xn.Space,Xn.Enter,Xn.Tab]},pMe=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Xn.Right:return{...n,x:n.x+25};case Xn.Left:return{...n,x:n.x-25};case Xn.Down:return{...n,y:n.y+25};case Xn.Up:return{...n,y:n.y-25}}};class mj{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new py(Vg(n)),this.windowListeners=new py(Oa(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Oo.Resize,this.handleCancel),this.windowListeners.add(Oo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Oo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&uMe(r),n(Nl)}handleKeyDown(e){if(KR(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=BZ,coordinateGetter:o=pMe,scrollBehavior:l="smooth"}=i,{code:c}=e;if(s.end.includes(c)){this.handleEnd(e);return}if(s.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Nl;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(e,{active:n,context:r.current,currentCoordinates:d});if(f){const p=Ex(f,d),h={x:0,y:0},{scrollableAncestors:m}=r.current;for(const g of m){const v=e.code,{isTop:y,isRight:b,isLeft:N,isBottom:S,maxScroll:E,minScroll:C}=LZ(g),T=oMe(g),_={x:Math.min(v===Xn.Right?T.right-T.width/2:T.right,Math.max(v===Xn.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(v===Xn.Down?T.bottom-T.height/2:T.bottom,Math.max(v===Xn.Down?T.top:T.top+T.height/2,f.y))},j=v===Xn.Right&&!b||v===Xn.Left&&!N,P=v===Xn.Down&&!S||v===Xn.Up&&!y;if(j&&_.x!==f.x){const k=g.scrollLeft+p.x,O=v===Xn.Right&&k<=E.x||v===Xn.Left&&k>=C.x;if(O&&!p.y){g.scrollTo({left:k,behavior:l});return}O?h.x=g.scrollLeft-k:h.x=v===Xn.Right?g.scrollLeft-E.x:g.scrollLeft-C.x,h.x&&g.scrollBy({left:-h.x,behavior:l});break}else if(P&&_.y!==f.y){const k=g.scrollTop+p.y,O=v===Xn.Down&&k<=E.y||v===Xn.Up&&k>=C.y;if(O&&!p.x){g.scrollTo({top:k,behavior:l});return}O?h.y=g.scrollTop-k:h.y=v===Xn.Down?g.scrollTop-E.y:g.scrollTop-C.y,h.y&&g.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(e,gm(Ex(f,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mj.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=BZ,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function $z(t){return!!(t&&"distance"in t)}function zz(t){return!!(t&&"delay"in t)}class XR{constructor(e,n,r){var i;r===void 0&&(r=fMe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Vg(o),this.documentListeners=new py(this.document),this.listeners=new py(r),this.windowListeners=new py(Oa(o)),this.initialCoordinates=(i=p5(s))!=null?i:Nl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Oo.Resize,this.handleCancel),this.windowListeners.add(Oo.DragStart,Bz),this.windowListeners.add(Oo.VisibilityChange,this.handleCancel),this.windowListeners.add(Oo.ContextMenu,Bz),this.documentListeners.add(Oo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zz(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if($z(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Oo.Click,hMe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Oo.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const c=(n=p5(e))!=null?n:Nl,u=Ex(i,c);if(!r&&l){if($z(l)){if(l.tolerance!=null&&BC(u,l.tolerance))return this.handleCancel();if(BC(u,l.distance))return this.handleStart()}if(zz(l)&&BC(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Xn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const mMe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gj extends XR{constructor(e){const{event:n}=e,r=Vg(n.target);super(e,mMe,r)}}gj.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const gMe={move:{name:"mousemove"},end:{name:"mouseup"}};var g5;(function(t){t[t.RightClick=2]="RightClick"})(g5||(g5={}));class $Z extends XR{constructor(e){super(e,gMe,Vg(e.event.target))}}$Z.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===g5.RightClick?!1:(r?.({event:n}),!0)}}];const $C={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zZ extends XR{constructor(e){super(e,$C)}static setup(){return window.addEventListener($C.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener($C.move.name,e)};function e(){}}}zZ.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var my;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(my||(my={}));var Ww;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ww||(Ww={}));function vMe(t){let{acceleration:e,activator:n=my.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=Ww.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=t;const h=xMe({delta:f,disabled:!s}),[m,g]=RPe(),v=x.useRef({x:0,y:0}),y=x.useRef({x:0,y:0}),b=x.useMemo(()=>{switch(n){case my.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case my.DraggableRect:return i}},[n,i,c]),N=x.useRef(null),S=x.useCallback(()=>{const C=N.current;if(!C)return;const T=v.current.x*y.current.x,_=v.current.y*y.current.y;C.scrollBy(T,_)},[]),E=x.useMemo(()=>l===Ww.TreeOrder?[...u].reverse():u,[l,u]);x.useEffect(()=>{if(!s||!u.length||!b){g();return}for(const C of E){if(r?.(C)===!1)continue;const T=u.indexOf(C),_=d[T];if(!_)continue;const{direction:j,speed:P}=aMe(C,_,b,e,p);for(const k of["x","y"])h[k][j[k]]||(P[k]=0,j[k]=0);if(P.x>0||P.y>0){g(),N.current=C,m(S,o),v.current=P,y.current=j;return}}v.current={x:0,y:0},y.current={x:0,y:0},g()},[e,S,r,g,s,o,JSON.stringify(b),JSON.stringify(h),m,u,E,d,JSON.stringify(p)])}const yMe={x:{[as.Backward]:!1,[as.Forward]:!1},y:{[as.Backward]:!1,[as.Forward]:!1}};function xMe(t){let{delta:e,disabled:n}=t;const r=h5(e);return vb(i=>{if(n||!r||!i)return yMe;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[as.Backward]:i.x[as.Backward]||s.x===-1,[as.Forward]:i.x[as.Forward]||s.x===1},y:{[as.Backward]:i.y[as.Backward]||s.y===-1,[as.Forward]:i.y[as.Forward]||s.y===1}}},[n,e,r])}function bMe(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return vb(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function wMe(t,e){return x.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Ax;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ax||(Ax={}));var v5;(function(t){t.Optimized="optimized"})(v5||(v5={}));const qz=new Map;function NMe(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=x.useState(null),{frequency:l,measure:c,strategy:u}=i,d=x.useRef(t),f=v(),p=_x(f),h=x.useCallback(function(y){y===void 0&&(y=[]),!p.current&&o(b=>b===null?y:b.concat(y.filter(N=>!b.includes(N))))},[p]),m=x.useRef(null),g=vb(y=>{if(f&&!n)return qz;if(!y||y===qz||d.current!==t||s!=null){const b=new Map;for(let N of t){if(!N)continue;if(s&&s.length>0&&!s.includes(N.id)&&N.rect.current){b.set(N.id,N.rect.current);continue}const S=N.node.current,E=S?new YR(c(S),S):null;N.rect.current=E,E&&b.set(N.id,E)}return b}return y},[t,s,n,f,c]);return x.useEffect(()=>{d.current=t},[t]),x.useEffect(()=>{f||h()},[n,f]),x.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),x.useEffect(()=>{f||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{h(),m.current=null},l))},[l,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:s!=null};function v(){switch(u){case Ax.Always:return!1;case Ax.BeforeDragging:return n;default:return!n}}}function qZ(t,e){return vb(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function SMe(t,e){return qZ(t,e)}function jMe(t){let{callback:e,disabled:n}=t;const r=WR(e),i=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function vj(t){let{callback:e,disabled:n}=t;const r=WR(e),i=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return x.useEffect(()=>()=>i?.disconnect(),[i]),i}function _Me(t){return new YR(Wg(t),t)}function Uz(t,e,n){e===void 0&&(e=_Me);const[r,i]=x.useState(null);function s(){i(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=e(t);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=jMe({callback(c){if(t)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){s();break}}}}),l=vj({callback:s});return fc(()=>{s(),t?(l?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[t]),r}function EMe(t){const e=qZ(t);return PZ(t,e)}const Hz=[];function AMe(t){const e=x.useRef(t),n=vb(r=>t?r&&r!==Hz&&t&&e.current&&t.parentNode===e.current.parentNode?r:pj(t):Hz,[t]);return x.useEffect(()=>{e.current=t},[t]),n}function CMe(t){const[e,n]=x.useState(null),r=x.useRef(t),i=x.useCallback(s=>{const o=FC(s.target);o&&n(l=>l?(l.set(o,m5(o)),new Map(l)):null)},[]);return x.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(c=>{const u=FC(c);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,m5(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(c=>{const u=FC(c);u?.removeEventListener("scroll",i)})}},[i,t]),x.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>gm(s,o),Nl):FZ(t):Nl,[t,e])}function Vz(t,e){e===void 0&&(e=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},e),x.useEffect(()=>{const r=t!==Nl;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ex(t,n.current):Nl}function kMe(t){x.useEffect(()=>{if(!hj)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function TMe(t,e){return x.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function UZ(t){return x.useMemo(()=>t?nMe(t):null,[t])}const Wz=[];function OMe(t,e){e===void 0&&(e=Wg);const[n]=t,r=UZ(n?Oa(n):null),[i,s]=x.useState(Wz);function o(){s(()=>t.length?t.map(c=>IZ(c)?r:new YR(e(c),c)):Wz)}const l=vj({callback:o});return fc(()=>{l?.disconnect(),o(),t.forEach(c=>l?.observe(c))},[t]),i}function PMe(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return gb(e)?e:t}function MMe(t){let{measure:e}=t;const[n,r]=x.useState(null),i=x.useCallback(u=>{for(const{target:d}of u)if(gb(d)){r(f=>{const p=e(d);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),s=vj({callback:i}),o=x.useCallback(u=>{const d=PMe(u);s?.disconnect(),d&&s?.observe(d),r(d?e(d):null)},[e,s]),[l,c]=Hw(o);return x.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const RMe=[{sensor:gj,options:{}},{sensor:mj,options:{}}],DMe={current:{}},l1={draggable:{measure:Fz},droppable:{measure:Fz,strategy:Ax.WhileDragging,frequency:v5.Optimized},dragOverlay:{measure:Wg}};class gy extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const IMe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gy,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:l1,measureDroppableContainers:Vw,windowRect:null,measuringScheduled:!1},LMe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vw,draggableNodes:new Map,over:null,measureDroppableContainers:Vw},yj=x.createContext(LMe),HZ=x.createContext(IMe);function FMe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gy}}}function BMe(t,e){switch(e.type){case Yi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Yi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Yi.DragEnd:case Yi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yi.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new gy(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Yi.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new gy(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Yi.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new gy(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function $Me(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=x.useContext(yj),s=h5(r),o=h5(n?.id);return x.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!KR(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=LPe(d);if(f){f.focus();break}}})}},[r,e,i,o,s]),null}function zMe(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function qMe(t){return x.useMemo(()=>({draggable:{...l1.draggable,...t?.draggable},droppable:{...l1.droppable,...t?.droppable},dragOverlay:{...l1.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function UMe(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=x.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;fc(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const u=e?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=PZ(d,r);if(o||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=MZ(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const VZ=x.createContext({...Nl,scaleX:1,scaleY:1});var ld;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ld||(ld={}));const JR=x.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=RMe,collisionDetection:f=YPe,measuring:p,modifiers:h,...m}=e;const g=x.useReducer(BMe,void 0,FMe),[v,y]=g,[b,N]=UPe(),[S,E]=x.useState(ld.Uninitialized),C=S===ld.Initialized,{draggable:{active:T,nodes:_,translate:j},droppable:{containers:P}}=v,k=T!=null?_.get(T):null,O=x.useRef({initial:null,translated:null}),M=x.useMemo(()=>{var on;return T!=null?{id:T,data:(on=k?.data)!=null?on:DMe,rect:O}:null},[T,k]),I=x.useRef(null),[B,U]=x.useState(null),[D,z]=x.useState(null),H=_x(m,Object.values(m)),ee=yb("DndDescribedBy",o),ae=x.useMemo(()=>P.getEnabled(),[P]),F=qMe(p),{droppableRects:q,measureDroppableContainers:Z,measuringScheduled:te}=NMe(ae,{dragging:C,dependencies:[j.x,j.y],config:F.droppable}),ce=bMe(_,T),ue=x.useMemo(()=>D?p5(D):null,[D]),ve=ar(),oe=SMe(ce,F.draggable.measure);UMe({activeNode:T!=null?_.get(T):null,config:ve.layoutShiftCompensation,initialRect:oe,measure:F.draggable.measure});const pe=Uz(ce,F.draggable.measure,oe),xe=Uz(ce?ce.parentElement:null),X=x.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=P.getNodeFor((n=X.current.over)==null?void 0:n.id),W=MMe({measure:F.dragOverlay.measure}),G=(r=W.nodeRef.current)!=null?r:ce,_e=C?(i=W.rect)!=null?i:pe:null,Qe=!!(W.nodeRef.current&&W.rect),ze=EMe(Qe?null:pe),Re=UZ(G?Oa(G):null),se=AMe(C?Se??ce:null),ge=OMe(se),Ne=zMe(h,{transform:{x:j.x-ze.x,y:j.y-ze.y,scaleX:1,scaleY:1},activatorEvent:D,active:M,activeNodeRect:pe,containerNodeRect:xe,draggingNodeRect:_e,over:X.current.over,overlayNodeRect:W.rect,scrollableAncestors:se,scrollableAncestorRects:ge,windowRect:Re}),De=ue?gm(ue,j):null,Le=CMe(se),Pe=Vz(Le),qe=Vz(Le,[pe]),ut=gm(Ne,Pe),it=_e?ZPe(_e,Ne):null,pt=M&&it?f({active:M,collisionRect:it,droppableRects:q,droppableContainers:ae,pointerCoordinates:De}):null,It=kZ(pt,"id"),[mt,yn]=x.useState(null),pn=Qe?Ne:gm(Ne,qe),Ct=XPe(pn,(s=mt?.rect)!=null?s:null,pe),en=x.useRef(null),qn=x.useCallback((on,Nt)=>{let{sensor:me,options:Y}=Nt;if(I.current==null)return;const Ce=_.get(I.current);if(!Ce)return;const ot=on.nativeEvent,mn=new me({active:I.current,activeNode:Ce,event:ot,options:Y,context:X,onAbort(lt){if(!_.get(lt))return;const{onDragAbort:_t}=H.current,ln={id:lt};_t?.(ln),b({type:"onDragAbort",event:ln})},onPending(lt,ft,_t,ln){if(!_.get(lt))return;const{onDragPending:Wn}=H.current,or={id:lt,constraint:ft,initialCoordinates:_t,offset:ln};Wn?.(or),b({type:"onDragPending",event:or})},onStart(lt){const ft=I.current;if(ft==null)return;const _t=_.get(ft);if(!_t)return;const{onDragStart:ln}=H.current,Ut={activatorEvent:ot,active:{id:ft,data:_t.data,rect:O}};_d.unstable_batchedUpdates(()=>{ln?.(Ut),E(ld.Initializing),y({type:Yi.DragStart,initialCoordinates:lt,active:ft}),b({type:"onDragStart",event:Ut}),U(en.current),z(ot)})},onMove(lt){y({type:Yi.DragMove,coordinates:lt})},onEnd:gt(Yi.DragEnd),onCancel:gt(Yi.DragCancel)});en.current=mn;function gt(lt){return async function(){const{active:_t,collisions:ln,over:Ut,scrollAdjustedTranslate:Wn}=X.current;let or=null;if(_t&&Wn){const{cancelDrop:ki}=H.current;or={activatorEvent:ot,active:_t,collisions:ln,delta:Wn,over:Ut},lt===Yi.DragEnd&&typeof ki=="function"&&await Promise.resolve(ki(or))&&(lt=Yi.DragCancel)}I.current=null,_d.unstable_batchedUpdates(()=>{y({type:lt}),E(ld.Uninitialized),yn(null),U(null),z(null),en.current=null;const ki=lt===Yi.DragEnd?"onDragEnd":"onDragCancel";if(or){const ps=H.current[ki];ps?.(or),b({type:ki,event:or})}})}}},[_]),Vt=x.useCallback((on,Nt)=>(me,Y)=>{const Ce=me.nativeEvent,ot=_.get(Y);if(I.current!==null||!ot||Ce.dndKit||Ce.defaultPrevented)return;const mn={active:ot};on(me,Nt.options,mn)===!0&&(Ce.dndKit={capturedBy:Nt.sensor},I.current=Y,qn(me,Nt))},[_,qn]),fn=wMe(d,Vt);kMe(d),fc(()=>{pe&&S===ld.Initializing&&E(ld.Initialized)},[pe,S]),x.useEffect(()=>{const{onDragMove:on}=H.current,{active:Nt,activatorEvent:me,collisions:Y,over:Ce}=X.current;if(!Nt||!me)return;const ot={active:Nt,activatorEvent:me,collisions:Y,delta:{x:ut.x,y:ut.y},over:Ce};_d.unstable_batchedUpdates(()=>{on?.(ot),b({type:"onDragMove",event:ot})})},[ut.x,ut.y]),x.useEffect(()=>{const{active:on,activatorEvent:Nt,collisions:me,droppableContainers:Y,scrollAdjustedTranslate:Ce}=X.current;if(!on||I.current==null||!Nt||!Ce)return;const{onDragOver:ot}=H.current,mn=Y.get(It),gt=mn&&mn.rect.current?{id:mn.id,rect:mn.rect.current,data:mn.data,disabled:mn.disabled}:null,lt={active:on,activatorEvent:Nt,collisions:me,delta:{x:Ce.x,y:Ce.y},over:gt};_d.unstable_batchedUpdates(()=>{yn(gt),ot?.(lt),b({type:"onDragOver",event:lt})})},[It]),fc(()=>{X.current={activatorEvent:D,active:M,activeNode:ce,collisionRect:it,collisions:pt,droppableRects:q,draggableNodes:_,draggingNode:G,draggingNodeRect:_e,droppableContainers:P,over:mt,scrollableAncestors:se,scrollAdjustedTranslate:ut},O.current={initial:_e,translated:it}},[M,ce,pt,it,_,G,_e,q,P,mt,se,ut]),vMe({...ve,delta:j,draggingRect:it,pointerCoordinates:De,scrollableAncestors:se,scrollableAncestorRects:ge});const nn=x.useMemo(()=>({active:M,activeNode:ce,activeNodeRect:pe,activatorEvent:D,collisions:pt,containerNodeRect:xe,dragOverlay:W,draggableNodes:_,droppableContainers:P,droppableRects:q,over:mt,measureDroppableContainers:Z,scrollableAncestors:se,scrollableAncestorRects:ge,measuringConfiguration:F,measuringScheduled:te,windowRect:Re}),[M,ce,pe,D,pt,xe,W,_,P,q,mt,Z,se,ge,F,te,Re]),vr=x.useMemo(()=>({activatorEvent:D,activators:fn,active:M,activeNodeRect:pe,ariaDescribedById:{draggable:ee},dispatch:y,draggableNodes:_,over:mt,measureDroppableContainers:Z}),[D,fn,M,pe,y,ee,_,mt,Z]);return le.createElement(EZ.Provider,{value:N},le.createElement(yj.Provider,{value:vr},le.createElement(HZ.Provider,{value:nn},le.createElement(VZ.Provider,{value:Ct},u)),le.createElement($Me,{disabled:l?.restoreFocus===!1})),le.createElement(WPe,{...l,hiddenTextDescribedById:ee}));function ar(){const on=B?.autoScrollEnabled===!1,Nt=typeof c=="object"?c.enabled===!1:c===!1,me=C&&!on&&!Nt;return typeof c=="object"?{...c,enabled:me}:{enabled:me}}}),HMe=x.createContext(null),Kz="button",VMe="Draggable";function WZ(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=yb(VMe),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=x.useContext(yj),{role:h=Kz,roleDescription:m="draggable",tabIndex:g=0}=i??{},v=c?.id===e,y=x.useContext(v?VZ:HMe),[b,N]=Hw(),[S,E]=Hw(),C=TMe(o,e),T=_x(n);fc(()=>(f.set(e,{id:e,key:s,node:b,activatorNode:S,data:T}),()=>{const j=f.get(e);j&&j.key===s&&f.delete(e)}),[f,e]);const _=x.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&h===Kz?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[r,h,g,v,m,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:_,isDragging:v,listeners:r?void 0:C,node:b,over:p,setNodeRef:N,setActivatorNodeRef:E,transform:y}}function WMe(){return x.useContext(HZ)}const KMe="Droppable",GMe={timeout:25};function KZ(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=yb(KMe),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=x.useContext(yj),d=x.useRef({disabled:n}),f=x.useRef(!1),p=x.useRef(null),h=x.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...GMe,...i},y=_x(g??r),b=x.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),h.current=null},v)},[v]),N=vj({callback:b,disabled:m||!o}),S=x.useCallback((_,j)=>{N&&(j&&(N.unobserve(j),f.current=!1),_&&N.observe(_))},[N]),[E,C]=Hw(S),T=_x(e);return x.useEffect(()=>{!N||!E.current||(N.disconnect(),f.current=!1,N.observe(E.current))},[E,N]),x.useEffect(()=>(l({type:Yi.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:p,data:T}}),()=>l({type:Yi.UnregisterDroppable,key:s,id:r})),[r]),x.useEffect(()=>{n!==d.current.disabled&&(l({type:Yi.SetDroppableDisabled,id:r,key:s,disabled:n}),d.current.disabled=n)},[r,s,n,l]),{active:o,rect:p,isOver:c?.id===r,node:E,over:c,setNodeRef:C}}function ZR(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function YMe(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function x0(t){return t!==null&&t>=0}function XMe(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function JMe(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const GZ=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=ZR(e,r,n),o=e[i],l=s[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},b0={scaleX:1,scaleY:1},YZ=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const l=(e=s[n])!=null?e:r;if(!l)return null;if(i===n){const u=s[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...b0}:null}const c=ZMe(s,i,n);return i>n&&i<=o?{x:0,y:-l.height-c,...b0}:i<n&&i>=o?{x:0,y:l.height+c,...b0}:{x:0,y:0,...b0}};function ZMe(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const XZ="Sortable",JZ=le.createContext({activeIndex:-1,containerId:XZ,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:GZ,disabled:{draggable:!1,droppable:!1}});function ZZ(t){let{children:e,id:n,items:r,strategy:i=GZ,disabled:s=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=WMe(),f=yb(XZ,n),p=l.rect!==null,h=x.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),m=o!=null,g=o?h.indexOf(o.id):-1,v=u?h.indexOf(u.id):-1,y=x.useRef(h),b=!XMe(h,y.current),N=v!==-1&&g===-1||b,S=JMe(s);fc(()=>{b&&m&&d(h)},[b,h,m,d]),x.useEffect(()=>{y.current=h},[h]);const E=x.useMemo(()=>({activeIndex:g,containerId:f,disabled:S,disableTransforms:N,items:h,overIndex:v,useDragOverlay:p,sortedRects:YMe(h,c),strategy:i}),[g,f,S.draggable,S.droppable,N,h,v,c,p,i]);return le.createElement(JZ.Provider,{value:E},e)}const QMe=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return ZR(n,r,i).indexOf(e)},eRe=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==s&&i===o?!1:n?!0:o!==i&&e===c},tRe={duration:200,easing:"ease"},QZ="transform",nRe=vg.Transition.toString({property:QZ,duration:0,easing:"linear"}),rRe={roleDescription:"sortable"};function iRe(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=x.useState(null),l=x.useRef(n);return fc(()=>{if(!e&&n!==l.current&&r.current){const c=i.current;if(c){const u=Wg(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[e,n,r,i]),x.useEffect(()=>{s&&o(null)},[s]),s}function eQ(t){let{animateLayoutChanges:e=eRe,attributes:n,disabled:r,data:i,getNewIndex:s=QMe,id:o,strategy:l,resizeObserverConfig:c,transition:u=tRe}=t;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:m,sortedRects:g,overIndex:v,useDragOverlay:y,strategy:b}=x.useContext(JZ),N=sRe(r,h),S=d.indexOf(o),E=x.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...i}),[f,i,S,d]),C=x.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:T,node:_,isOver:j,setNodeRef:P}=KZ({id:o,data:E,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:k,activatorEvent:O,activeNodeRect:M,attributes:I,setNodeRef:B,listeners:U,isDragging:D,over:z,setActivatorNodeRef:H,transform:ee}=WZ({id:o,data:E,attributes:{...rRe,...n},disabled:N.draggable}),ae=MPe(P,B),F=!!k,q=F&&!m&&x0(p)&&x0(v),Z=!y&&D,te=Z&&q?ee:null,ue=q?te??(l??b)({rects:g,activeNodeRect:M,activeIndex:p,overIndex:v,index:S}):null,ve=x0(p)&&x0(v)?s({id:o,items:d,activeIndex:p,overIndex:v}):S,oe=k?.id,pe=x.useRef({activeId:oe,items:d,newIndex:ve,containerId:f}),xe=d!==pe.current.items,X=e({active:k,containerId:f,isDragging:D,isSorting:F,id:o,index:S,items:d,newIndex:pe.current.newIndex,previousItems:pe.current.items,previousContainerId:pe.current.containerId,transition:u,wasDragging:pe.current.activeId!=null}),Se=iRe({disabled:!X,index:S,node:_,rect:T});return x.useEffect(()=>{F&&pe.current.newIndex!==ve&&(pe.current.newIndex=ve),f!==pe.current.containerId&&(pe.current.containerId=f),d!==pe.current.items&&(pe.current.items=d)},[F,ve,f,d]),x.useEffect(()=>{if(oe===pe.current.activeId)return;if(oe!=null&&pe.current.activeId==null){pe.current.activeId=oe;return}const G=setTimeout(()=>{pe.current.activeId=oe},50);return()=>clearTimeout(G)},[oe]),{active:k,activeIndex:p,attributes:I,data:E,rect:T,index:S,newIndex:ve,items:d,isOver:j,isSorting:F,isDragging:D,listeners:U,node:_,overIndex:v,over:z,setNodeRef:ae,setActivatorNodeRef:H,setDroppableNodeRef:P,setDraggableNodeRef:B,transform:Se??ue,transition:W()};function W(){if(Se||xe&&pe.current.newIndex===S)return nRe;if(!(Z&&!KR(O)||!u)&&(F||X))return vg.Transition.toString({...u,property:QZ})}}function sRe(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(r=t?.droppable)!=null?r:e.droppable}}function Kw(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const aRe=[Xn.Down,Xn.Right,Xn.Up,Xn.Left],tQ=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:l}}=e;if(aRe.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=i.get(f.id);if(p)switch(t.code){case Xn.Down:r.top<p.top&&c.push(f);break;case Xn.Up:r.top>p.top&&c.push(f);break;case Xn.Left:r.left>p.left&&c.push(f);break;case Xn.Right:r.left<p.left&&c.push(f);break}});const u=OZ({collisionRect:r,droppableRects:i,droppableContainers:c});let d=kZ(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const f=s.get(n.id),p=s.get(d),h=p?i.get(p.id):null,m=p?.node.current;if(m&&h&&f&&p){const v=pj(m).some((C,T)=>l[T]!==C),y=nQ(f,p),b=oRe(f,p),N=v||!y?{x:0,y:0}:{x:b?r.width-h.width:0,y:b?r.height-h.height:0},S={x:h.left,y:h.top};return N.x&&N.y?S:Ex(S,N)}}}};function nQ(t,e){return!Kw(t)||!Kw(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function oRe(t,e){return!Kw(t)||!Kw(e)||!nQ(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Gz={PENDIENTE:{label:"Pendiente",color:"bg-slate-100",icon:qo},EN_PROGRESO:{label:"En Progreso",color:"bg-blue-100",icon:Uo},COMPLETADA:{label:"Completada",color:"bg-green-100",icon:ml},CANCELADA:{label:"Cancelada",color:"bg-red-100",icon:qo}};function lRe({task:t,onTaskClick:e,users:n}){const{attributes:r,listeners:i,setNodeRef:s,transform:o,transition:l,isDragging:c}=eQ({id:t.id}),u={transform:vg.Transform.toString(o),transition:l,opacity:c?.5:1},d={BAJA:"text-slate-500",MEDIA:"text-amber-500",ALTA:"text-red-500"},f=n?.find(h=>h.id===t.asignadoA),p=t.fechaVencimiento&&new Date(t.fechaVencimiento)<new Date;return a.jsx("div",{ref:s,style:u,...r,...i,className:"mb-3 cursor-grab active:cursor-grabbing",children:a.jsx(Fe,{className:`border-l-4 hover:shadow-md transition-all ${c?"shadow-lg":""}`,style:{borderLeftColor:t.color||"#cbd5e1",backgroundColor:t.color?`${t.color}15`:void 0},onClick:()=>e?.(t),children:a.jsxs(Be,{className:"p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-medium text-sm flex-1 break-words",children:t.titulo}),t.progreso!==void 0&&t.progreso>0&&a.jsxs(Ge,{variant:"outline",className:"text-xs flex-shrink-0",children:[t.progreso,"%"]})]}),t.descripcion&&a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:t.descripcion}),a.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[a.jsx(Ge,{variant:"secondary",className:`text-xs ${d[t.prioridad]}`,children:t.prioridad}),p&&a.jsx(Ge,{variant:"destructive",className:"text-xs",children:"Vencida"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[t.fechaVencimiento&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(j1,{className:"w-3 h-3"}),a.jsx("span",{children:_s(new Date(t.fechaVencimiento),"dd MMM",{locale:Ro})})]}),f&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:f.username[0]})]}),t.progreso!==void 0&&a.jsx("div",{className:"w-full bg-secondary h-1 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-primary h-full transition-all",style:{width:`${t.progreso}%`}})})]})})})}function cRe({onTaskClick:t,clients:e=[],users:n=[]}){const{toast:r}=nr(),[i,s]=x.useState([]),{isLoading:o,data:l}=At({queryKey:["/api/tasks"]});x.useEffect(()=>{l&&s(l)},[l]);const c=yt({mutationFn:async({taskId:p,estado:h})=>await ht("PATCH",`/api/tasks/${p}`,{estado:h}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/tasks"]})},onError:()=>{r({title:"Error al actualizar tarea",variant:"destructive"}),Lt.invalidateQueries({queryKey:["/api/tasks"]})}}),u=GR(yg(gj),yg(mj,{coordinateGetter:tQ})),d=x.useMemo(()=>({PENDIENTE:i.filter(p=>p.estado==="PENDIENTE"),EN_PROGRESO:i.filter(p=>p.estado==="EN_PROGRESO"),COMPLETADA:i.filter(p=>p.estado==="COMPLETADA")}),[i]),f=p=>{const{active:h,over:m}=p;if(!m)return;const g=i.find(y=>y.id===h.id),v=m.id;!g||!Object.keys(Gz).includes(v)||g.estado!==v&&(s(y=>y.map(b=>b.id===g.id?{...b,estado:v}:b)),c.mutate({taskId:g.id,estado:v}))};return o?a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(p=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-8 bg-secondary rounded-lg animate-pulse"}),[1,2,3].map(h=>a.jsx("div",{className:"h-24 bg-secondary rounded-lg animate-pulse"},h))]},p))}):a.jsx(JR,{sensors:u,collisionDetection:TZ,onDragEnd:f,children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(Gz).map(([p,h])=>{const m=d[p]||[],g=h.icon;return a.jsxs(Fe,{className:`${h.color} min-h-96`,children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(g,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:h.label})]}),a.jsx(Ge,{variant:"secondary",className:"text-xs",children:m.length})]})}),a.jsx(Be,{children:a.jsx(ZZ,{items:m.map(v=>v.id),strategy:YZ,children:a.jsx("div",{className:"space-y-2",children:m.length>0?m.map(v=>a.jsx(lRe,{task:v,onTaskClick:t,users:n},v.id)):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{className:"text-xs",children:"Sin tareas"})})})})})]},p)})})})}function uRe(){const{toast:t}=nr(),{user:e}=Zh(),[n,r]=x.useState("table"),[i,s]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,f]=x.useState({titulo:"",descripcion:"",clienteId:"",asignadoA:"",prioridad:"MEDIA",estado:"PENDIENTE",visibilidad:"GENERAL",fechaVencimiento:""}),{data:p,isLoading:h}=At({queryKey:["/api/tasks"]}),{data:m}=At({queryKey:["/api/clients"]}),{data:g}=At({queryKey:["/api/users"]}),v=yt({mutationFn:async _=>await ht("POST","/api/tasks",_),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/tasks"]}),t({title:"Tarea creada exitosamente"}),s(!1),N()}}),y=yt({mutationFn:async({id:_,estado:j})=>await ht("PATCH",`/api/tasks/${_}`,{estado:j}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/tasks"]})}}),b=p?.filter(_=>_.visibilidad==="GENERAL"?!0:_.visibilidad==="PERSONAL"?e?.role==="ADMIN"||_.asignadoA===e?.id:!1)||[],N=()=>{f({titulo:"",descripcion:"",clienteId:"",asignadoA:"",prioridad:"MEDIA",estado:"PENDIENTE",visibilidad:"GENERAL",fechaVencimiento:""})},S=_=>{_.preventDefault(),v.mutate(d)},E=_=>{l(_),u(!0)},C=_=>{const j={BAJA:"text-muted-foreground bg-muted",MEDIA:"text-chart-2 bg-chart-2/10",ALTA:"text-destructive bg-destructive/10"};return a.jsx(Ge,{variant:"outline",className:j[_],children:_})},T=_=>{const j={PENDIENTE:{color:"text-muted-foreground bg-muted",icon:Uo},EN_PROGRESO:{color:"text-chart-2 bg-chart-2/10",icon:Wd},COMPLETADA:{color:"text-chart-3 bg-chart-3/10",icon:ml}},P=j[_]||j.PENDIENTE,k=P.icon;return a.jsxs(Ge,{variant:"outline",className:P.color,children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),_.replace("_"," ")]})};return h?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(Fn,{className:"h-9 w-48"}),a.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((_,j)=>a.jsx(Fn,{className:"h-64"},j))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Tareas"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestión de tareas generales y personales"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Wo,{value:n,onValueChange:_=>r(_),children:a.jsxs(co,{children:[a.jsxs(vn,{value:"table","data-testid":"button-view-table",children:[a.jsx(Jse,{className:"h-4 w-4 mr-2"}),"Tabla"]}),a.jsxs(vn,{value:"kanban","data-testid":"button-view-kanban",children:[a.jsx(Zse,{className:"h-4 w-4 mr-2"}),"Tablero"]})]})}),a.jsxs(Un,{open:i,onOpenChange:s,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:N,"data-testid":"button-add-task",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nueva Tarea"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Nueva Tarea"}),a.jsx(Qn,{children:"Crea una nueva tarea general o personal"})]}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(ye,{htmlFor:"titulo",children:"Título *"}),a.jsx(Ie,{id:"titulo",value:d.titulo,onChange:_=>f({...d,titulo:_.target.value}),required:!0,"data-testid":"input-titulo"})]}),a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(ye,{htmlFor:"descripcion",children:"Descripción"}),a.jsx(la,{id:"descripcion",value:d.descripcion,onChange:_=>f({...d,descripcion:_.target.value}),"data-testid":"textarea-descripcion"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"cliente",children:"Cliente"}),a.jsxs(un,{value:d.clienteId||"none",onValueChange:_=>f({...d,clienteId:_==="none"?"":_}),children:[a.jsx(sn,{"data-testid":"select-cliente",children:a.jsx(dn,{placeholder:"Sin cliente"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"none",children:"Sin cliente"}),m?.map(_=>a.jsx(Ke,{value:_.id,children:_.razonSocial},_.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"asignado",children:"Asignado a"}),a.jsxs(un,{value:d.asignadoA||"none",onValueChange:_=>f({...d,asignadoA:_==="none"?"":_}),children:[a.jsx(sn,{"data-testid":"select-asignado",children:a.jsx(dn,{placeholder:"Sin asignar"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"none",children:"Sin asignar"}),g?.map(_=>a.jsx(Ke,{value:_.id,children:_.username},_.id))]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"prioridad",children:"Prioridad"}),a.jsxs(un,{value:d.prioridad,onValueChange:_=>f({...d,prioridad:_}),children:[a.jsx(sn,{"data-testid":"select-prioridad",children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"BAJA",children:"Baja"}),a.jsx(Ke,{value:"MEDIA",children:"Media"}),a.jsx(Ke,{value:"ALTA",children:"Alta"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"visibilidad",children:"Visibilidad"}),a.jsxs(un,{value:d.visibilidad,onValueChange:_=>f({...d,visibilidad:_}),children:[a.jsx(sn,{"data-testid":"select-visibilidad",children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"GENERAL",children:"General"}),a.jsx(Ke,{value:"PERSONAL",children:"Personal"})]})]})]}),a.jsxs("div",{className:"space-y-2 col-span-2",children:[a.jsx(ye,{htmlFor:"fechaVencimiento",children:"Fecha de Vencimiento"}),a.jsx(Ie,{id:"fechaVencimiento",type:"date",value:d.fechaVencimiento,onChange:_=>f({...d,fechaVencimiento:_.target.value}),"data-testid":"input-fecha-vencimiento"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{s(!1),N()},children:"Cancelar"}),a.jsx(re,{type:"submit","data-testid":"button-submit-task",children:"Crear Tarea"})]})]})]})]})]})]}),n==="table"?a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{children:["Lista de Tareas (",b.length,")"]})}),a.jsx(Be,{children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Título"}),a.jsx($e,{children:"Cliente"}),a.jsx($e,{children:"Asignado"}),a.jsx($e,{children:"Prioridad"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Vencimiento"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:b.length===0?a.jsx(Gt,{children:a.jsx(Me,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No hay tareas registradas"})}):b.map(_=>a.jsxs(Gt,{"data-testid":`row-task-${_.id}`,className:"cursor-pointer hover:bg-muted/50",onClick:()=>E(_),children:[a.jsx(Me,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[_.visibilidad==="PERSONAL"&&a.jsx(TP,{className:"h-3 w-3 text-muted-foreground"}),_.titulo]})}),a.jsx(Me,{children:_.client?.razonSocial||"-"}),a.jsx(Me,{children:_.assignedUser?.username||"-"}),a.jsx(Me,{children:C(_.prioridad)}),a.jsx(Me,{children:T(_.estado)}),a.jsx(Me,{children:_.fechaVencimiento?new Date(_.fechaVencimiento).toLocaleDateString():"-"}),a.jsx(Me,{className:"text-right",onClick:j=>j.stopPropagation(),children:a.jsxs(un,{value:_.estado,onValueChange:j=>y.mutate({id:_.id,estado:j}),children:[a.jsx(sn,{className:"w-[140px]","data-testid":`select-estado-${_.id}`,children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(Ke,{value:"EN_PROGRESO",children:"En Progreso"}),a.jsx(Ke,{value:"COMPLETADA",children:"Completada"})]})]})})]},_.id))})]})})]}):a.jsx(cRe,{onTaskClick:E,clients:m,users:g}),a.jsx(PPe,{task:o,isOpen:c,onClose:()=>{u(!1),l(null)},clients:m,users:g})]})}function dRe(){nr();const{user:t}=Zh(),[,e]=es(),[n,r]=x.useState(""),[i,s]=x.useState(null),{data:o,isLoading:l}=At({queryKey:["/api/manuals"]}),c=t?.permissions||[],u=Array.isArray(c)&&c.includes("manuals:create"),d=Array.isArray(c)&&c.includes("manuals:update"),f=u||d,p=o?.filter(h=>h.titulo.toLowerCase().includes(n.toLowerCase())||h.categoria?.toLowerCase().includes(n.toLowerCase()))||[];return l?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(Fn,{className:"h-9 w-48"}),a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((h,m)=>a.jsx(Fn,{className:"h-48"},m))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Manuales"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Base de conocimientos y documentación interna"})]}),f&&a.jsxs(re,{onClick:()=>e("/manuales/nuevo"),"data-testid":"button-nuevo-manual",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nuevo Manual"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ag,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ie,{placeholder:"Buscar manuales...",value:n,onChange:h=>r(h.target.value),className:"pl-10","data-testid":"input-search-manuals"})]}),p.length===0?a.jsx(Fe,{children:a.jsxs(Be,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx(Qr,{className:"h-16 w-16 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay manuales disponibles"}),a.jsx("p",{className:"text-muted-foreground text-center mb-4",children:f?"Comienza creando tu primer manual":"Aún no se han publicado manuales"})]})}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(h=>a.jsxs(Fe,{className:"hover-elevate cursor-pointer",onClick:()=>e(`/manuales/${h.id}`),"data-testid":`card-manual-${h.id}`,children:[a.jsxs(Je,{children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Qr,{className:"h-8 w-8 text-primary"}),h.publicado?a.jsx(Ge,{variant:"outline",className:"text-chart-3 bg-chart-3/10",children:"Publicado"}):a.jsx(Ge,{variant:"outline",className:"text-muted-foreground bg-muted",children:"Borrador"})]}),a.jsx(et,{className:"mt-4",children:h.titulo}),a.jsx(Zt,{children:h.categoria||"Sin categoría"})]}),a.jsxs(Be,{children:[h.etiquetas&&h.etiquetas.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.etiquetas.slice(0,3).map(m=>a.jsx(Ge,{variant:"secondary",className:"text-xs",children:m},m))}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[a.jsx("span",{children:new Date(h.fechaCreacion).toLocaleDateString()}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:m=>{m.stopPropagation(),e(`/manuales/${h.id}`)},"data-testid":`button-view-${h.id}`,children:a.jsx(ou,{className:"h-4 w-4"})}),f&&a.jsxs(a.Fragment,{children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:m=>{m.stopPropagation(),e(`/manuales/${h.id}/editar`)},"data-testid":`button-edit-${h.id}`,children:a.jsx(ec,{className:"h-4 w-4"})}),d&&a.jsx(re,{variant:"ghost",size:"icon",onClick:async m=>{if(m.stopPropagation(),!!window.confirm(`¿Eliminar el manual "${h.titulo}"?`))try{s(h.id),await ht("DELETE",`/api/manuals/${encodeURIComponent(h.id)}`),Lt.setQueryData(["/api/manuals"],v=>Array.isArray(v)?v.filter(y=>y.id!==h.id):v),await Lt.invalidateQueries({queryKey:["/api/manuals"],exact:!0})}catch(v){Lt.invalidateQueries({queryKey:["/api/manuals"],exact:!0});const y=v?.message||"No se pudo eliminar";alert(y)}finally{s(null)}},disabled:i===h.id,"data-testid":`button-delete-${h.id}`,title:"Eliminar",children:a.jsx(ei,{className:"h-4 w-4"})})]})]})]})]})]},h.id))})]})}var y5=["Enter"," "],fRe=["ArrowDown","PageUp","Home"],rQ=["ArrowUp","PageDown","End"],hRe=[...fRe,...rQ],pRe={ltr:[...y5,"ArrowRight"],rtl:[...y5,"ArrowLeft"]},mRe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xb="Menu",[Cx,gRe,vRe]=Jx(xb),[ap,iQ]=Ts(xb,[vRe,rf,xS]),xj=rf(),sQ=xS(),[yRe,op]=ap(xb),[xRe,bb]=ap(xb),aQ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,l=xj(e),[c,u]=x.useState(null),d=x.useRef(!1),f=Za(s),p=Qh(i);return x.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),a.jsx(uS,{...l,children:a.jsx(yRe,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(xRe,{scope:e,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:o,children:r})})})};aQ.displayName=xb;var bRe="MenuAnchor",QR=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=xj(n);return a.jsx(tb,{...i,...r,ref:e})});QR.displayName=bRe;var eD="MenuPortal",[wRe,oQ]=ap(eD,{forceMount:void 0}),lQ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=op(eD,e);return a.jsx(wRe,{scope:e,forceMount:n,children:a.jsx(Ca,{present:n||s.open,children:a.jsx(wP,{asChild:!0,container:i,children:r})})})};lQ.displayName=eD;var Bo="MenuContent",[NRe,tD]=ap(Bo),cQ=x.forwardRef((t,e)=>{const n=oQ(Bo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=op(Bo,t.__scopeMenu),o=bb(Bo,t.__scopeMenu);return a.jsx(Cx.Provider,{scope:t.__scopeMenu,children:a.jsx(Ca,{present:r||s.open,children:a.jsx(Cx.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(SRe,{...i,ref:e}):a.jsx(jRe,{...i,ref:e})})})})}),SRe=x.forwardRef((t,e)=>{const n=op(Bo,t.__scopeMenu),r=x.useRef(null),i=Tn(e,r);return x.useEffect(()=>{const s=r.current;if(s)return NP(s)},[]),a.jsx(nD,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:vt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),jRe=x.forwardRef((t,e)=>{const n=op(Bo,t.__scopeMenu);return a.jsx(nD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_Re=_P("MenuContent.ScrollLock"),nD=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,disableOutsideScroll:m,...g}=t,v=op(Bo,n),y=bb(Bo,n),b=xj(n),N=sQ(n),S=gRe(n),[E,C]=x.useState(null),T=x.useRef(null),_=Tn(e,T,v.onContentChange),j=x.useRef(0),P=x.useRef(""),k=x.useRef(0),O=x.useRef(null),M=x.useRef("right"),I=x.useRef(0),B=m?jP:x.Fragment,U=m?{as:_Re,allowPinchZoom:!0}:void 0,D=H=>{const ee=P.current+H,ae=S().filter(ue=>!ue.disabled),F=document.activeElement,q=ae.find(ue=>ue.ref.current===F)?.textValue,Z=ae.map(ue=>ue.textValue),te=LRe(Z,ee,q),ce=ae.find(ue=>ue.textValue===te)?.ref.current;(function ue(ve){P.current=ve,window.clearTimeout(j.current),ve!==""&&(j.current=window.setTimeout(()=>ue(""),1e3))})(ee),ce&&setTimeout(()=>ce.focus())};x.useEffect(()=>()=>window.clearTimeout(j.current),[]),SP();const z=x.useCallback(H=>M.current===O.current?.side&&BRe(H,O.current?.area),[]);return a.jsx(NRe,{scope:n,searchRef:P,onItemEnter:x.useCallback(H=>{z(H)&&H.preventDefault()},[z]),onItemLeave:x.useCallback(H=>{z(H)||(T.current?.focus(),C(null))},[z]),onTriggerLeave:x.useCallback(H=>{z(H)&&H.preventDefault()},[z]),pointerGraceTimerRef:k,onPointerGraceIntentChange:x.useCallback(H=>{O.current=H},[]),children:a.jsx(B,{...U,children:a.jsx(EP,{asChild:!0,trapped:i,onMountAutoFocus:vt(s,H=>{H.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(YN,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,children:a.jsx(gW,{asChild:!0,...N,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:C,onEntryFocus:vt(c,H=>{y.isUsingKeyboardRef.current||H.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(dS,{role:"menu","aria-orientation":"vertical","data-state":_Q(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:vt(g.onKeyDown,H=>{const ae=H.target.closest("[data-radix-menu-content]")===H.currentTarget,F=H.ctrlKey||H.altKey||H.metaKey,q=H.key.length===1;ae&&(H.key==="Tab"&&H.preventDefault(),!F&&q&&D(H.key));const Z=T.current;if(H.target!==Z||!hRe.includes(H.key))return;H.preventDefault();const ce=S().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);rQ.includes(H.key)&&ce.reverse(),DRe(ce)}),onBlur:vt(t.onBlur,H=>{H.currentTarget.contains(H.target)||(window.clearTimeout(j.current),P.current="")}),onPointerMove:vt(t.onPointerMove,kx(H=>{const ee=H.target,ae=I.current!==H.clientX;if(H.currentTarget.contains(ee)&&ae){const F=H.clientX>I.current?"right":"left";M.current=F,I.current=H.clientX}}))})})})})})})});cQ.displayName=Bo;var ERe="MenuGroup",rD=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ot.div,{role:"group",...r,ref:e})});rD.displayName=ERe;var ARe="MenuLabel",uQ=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ot.div,{...r,ref:e})});uQ.displayName=ARe;var Gw="MenuItem",Yz="menu.itemSelect",bj=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=x.useRef(null),o=bb(Gw,t.__scopeMenu),l=tD(Gw,t.__scopeMenu),c=Tn(e,s),u=x.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const p=new CustomEvent(Yz,{bubbles:!0,cancelable:!0});f.addEventListener(Yz,h=>r?.(h),{once:!0}),Qse(f,p),p.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(dQ,{...i,ref:c,disabled:n,onClick:vt(t.onClick,d),onPointerDown:f=>{t.onPointerDown?.(f),u.current=!0},onPointerUp:vt(t.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:vt(t.onKeyDown,f=>{const p=l.searchRef.current!=="";n||p&&f.key===" "||y5.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});bj.displayName=Gw;var dQ=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=tD(Gw,n),l=sQ(n),c=x.useRef(null),u=Tn(e,c),[d,f]=x.useState(!1),[p,h]=x.useState("");return x.useEffect(()=>{const m=c.current;m&&h((m.textContent??"").trim())},[s.children]),a.jsx(Cx.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:a.jsx(vW,{asChild:!0,...l,focusable:!r,children:a.jsx(Ot.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:vt(t.onPointerMove,kx(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:vt(t.onPointerLeave,kx(m=>o.onItemLeave(m))),onFocus:vt(t.onFocus,()=>f(!0)),onBlur:vt(t.onBlur,()=>f(!1))})})})}),CRe="MenuCheckboxItem",fQ=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return a.jsx(vQ,{scope:t.__scopeMenu,checked:n,children:a.jsx(bj,{role:"menuitemcheckbox","aria-checked":Yw(n)?"mixed":n,...i,ref:e,"data-state":sD(n),onSelect:vt(i.onSelect,()=>r?.(Yw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});fQ.displayName=CRe;var hQ="MenuRadioGroup",[kRe,TRe]=ap(hQ,{value:void 0,onValueChange:()=>{}}),pQ=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Za(r);return a.jsx(kRe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:a.jsx(rD,{...i,ref:e})})});pQ.displayName=hQ;var mQ="MenuRadioItem",gQ=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=TRe(mQ,t.__scopeMenu),s=n===i.value;return a.jsx(vQ,{scope:t.__scopeMenu,checked:s,children:a.jsx(bj,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":sD(s),onSelect:vt(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});gQ.displayName=mQ;var iD="MenuItemIndicator",[vQ,ORe]=ap(iD,{checked:!1}),yQ=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=ORe(iD,n);return a.jsx(Ca,{present:r||Yw(s.checked)||s.checked===!0,children:a.jsx(Ot.span,{...i,ref:e,"data-state":sD(s.checked)})})});yQ.displayName=iD;var PRe="MenuSeparator",xQ=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Ot.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});xQ.displayName=PRe;var MRe="MenuArrow",bQ=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=xj(n);return a.jsx(fS,{...i,...r,ref:e})});bQ.displayName=MRe;var RRe="MenuSub",[rVe,wQ]=ap(RRe),Jv="MenuSubTrigger",NQ=x.forwardRef((t,e)=>{const n=op(Jv,t.__scopeMenu),r=bb(Jv,t.__scopeMenu),i=wQ(Jv,t.__scopeMenu),s=tD(Jv,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:t.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(QR,{asChild:!0,...u,children:a.jsx(dQ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":_Q(n.open),...t,ref:_h(e,i.onTriggerChange),onClick:f=>{t.onClick?.(f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:vt(t.onPointerMove,kx(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:vt(t.onPointerLeave,kx(f=>{d();const p=n.content?.getBoundingClientRect();if(p){const h=n.content?.dataset.side,m=h==="right",g=m?-5:5,v=p[m?"left":"right"],y=p[m?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+g,y:f.clientY},{x:v,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:v,y:p.bottom}],side:h}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:vt(t.onKeyDown,f=>{const p=s.searchRef.current!=="";t.disabled||p&&f.key===" "||pRe[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});NQ.displayName=Jv;var SQ="MenuSubContent",jQ=x.forwardRef((t,e)=>{const n=oQ(Bo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=op(Bo,t.__scopeMenu),o=bb(Bo,t.__scopeMenu),l=wQ(SQ,t.__scopeMenu),c=x.useRef(null),u=Tn(e,c);return a.jsx(Cx.Provider,{scope:t.__scopeMenu,children:a.jsx(Ca,{present:r||s.open,children:a.jsx(Cx.Slot,{scope:t.__scopeMenu,children:a.jsx(nD,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{o.isUsingKeyboardRef.current&&c.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:vt(t.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:vt(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:vt(t.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),p=mRe[o.dir].includes(d.key);f&&p&&(s.onOpenChange(!1),l.trigger?.focus(),d.preventDefault())})})})})})});jQ.displayName=SQ;function _Q(t){return t?"open":"closed"}function Yw(t){return t==="indeterminate"}function sD(t){return Yw(t)?"indeterminate":t?"checked":"unchecked"}function DRe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function IRe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function LRe(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=IRe(t,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function FRe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],c=e[o],u=l.x,d=l.y,f=c.x,p=c.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(i=!i)}return i}function BRe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return FRe(n,e)}function kx(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $Re=aQ,zRe=QR,qRe=lQ,URe=cQ,HRe=rD,VRe=uQ,WRe=bj,KRe=fQ,GRe=pQ,YRe=gQ,XRe=yQ,JRe=xQ,ZRe=bQ,QRe=NQ,eDe=jQ,wj="DropdownMenu",[tDe]=Ts(wj,[iQ]),fa=iQ(),[nDe,EQ]=tDe(wj),AQ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=t,c=fa(e),u=x.useRef(null),[d,f]=ao({prop:i,defaultProp:s??!1,onChange:o,caller:wj});return a.jsx(nDe,{scope:e,triggerId:Es(),triggerRef:u,contentId:Es(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:l,children:a.jsx($Re,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};AQ.displayName=wj;var CQ="DropdownMenuTrigger",kQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=EQ(CQ,n),o=fa(n);return a.jsx(zRe,{asChild:!0,...o,children:a.jsx(Ot.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:_h(e,s.triggerRef),onPointerDown:vt(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:vt(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});kQ.displayName=CQ;var rDe="DropdownMenuPortal",TQ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=fa(e);return a.jsx(qRe,{...r,...n})};TQ.displayName=rDe;var OQ="DropdownMenuContent",PQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=EQ(OQ,n),s=fa(n),o=x.useRef(!1);return a.jsx(URe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:vt(t.onCloseAutoFocus,l=>{o.current||i.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:vt(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PQ.displayName=OQ;var iDe="DropdownMenuGroup",sDe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(HRe,{...i,...r,ref:e})});sDe.displayName=iDe;var aDe="DropdownMenuLabel",MQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(VRe,{...i,...r,ref:e})});MQ.displayName=aDe;var oDe="DropdownMenuItem",RQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(WRe,{...i,...r,ref:e})});RQ.displayName=oDe;var lDe="DropdownMenuCheckboxItem",DQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(KRe,{...i,...r,ref:e})});DQ.displayName=lDe;var cDe="DropdownMenuRadioGroup",uDe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(GRe,{...i,...r,ref:e})});uDe.displayName=cDe;var dDe="DropdownMenuRadioItem",IQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(YRe,{...i,...r,ref:e})});IQ.displayName=dDe;var fDe="DropdownMenuItemIndicator",LQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(XRe,{...i,...r,ref:e})});LQ.displayName=fDe;var hDe="DropdownMenuSeparator",FQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(JRe,{...i,...r,ref:e})});FQ.displayName=hDe;var pDe="DropdownMenuArrow",mDe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(ZRe,{...i,...r,ref:e})});mDe.displayName=pDe;var gDe="DropdownMenuSubTrigger",BQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(QRe,{...i,...r,ref:e})});BQ.displayName=gDe;var vDe="DropdownMenuSubContent",$Q=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=fa(n);return a.jsx(eDe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$Q.displayName=vDe;var yDe=AQ,xDe=kQ,bDe=TQ,zQ=PQ,qQ=MQ,UQ=RQ,HQ=DQ,VQ=IQ,WQ=LQ,KQ=FQ,GQ=BQ,YQ=$Q;const x5=yDe,b5=xDe,wDe=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>a.jsxs(GQ,{ref:i,className:Xe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,a.jsx(R9,{className:"ml-auto"})]}));wDe.displayName=GQ.displayName;const NDe=x.forwardRef(({className:t,...e},n)=>a.jsx(YQ,{ref:n,className:Xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));NDe.displayName=YQ.displayName;const Xw=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(bDe,{children:a.jsx(zQ,{ref:r,sideOffset:e,className:Xe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Xw.displayName=zQ.displayName;const Xa=x.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(UQ,{ref:r,className:Xe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));Xa.displayName=UQ.displayName;const SDe=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>a.jsxs(HQ,{ref:i,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(WQ,{children:a.jsx(AP,{className:"h-4 w-4"})})}),e]}));SDe.displayName=HQ.displayName;const jDe=x.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(VQ,{ref:r,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(WQ,{children:a.jsx(eae,{className:"h-2 w-2 fill-current"})})}),e]}));jDe.displayName=VQ.displayName;const _De=x.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(qQ,{ref:r,className:Xe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));_De.displayName=qQ.displayName;const Jw=x.forwardRef(({className:t,...e},n)=>a.jsx(KQ,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",t),...e}));Jw.displayName=KQ.displayName;function EDe({open:t,filingData:e,onConfirm:n,onCancel:r}){const{toast:i}=nr(),[s,o]=x.useState(new Date().toISOString().split("T")[0]),[l,c]=x.useState([]),[u,d]=x.useState(!1),[f,p]=x.useState({}),h=b=>{const N=Array.from(b.target.files||[]);if(N.filter(C=>C.type!=="application/pdf").length>0){i({title:"Archivos inválidos",description:"Solo se permiten archivos PDF",variant:"destructive"});return}if(N.filter(C=>C.size>10*1024*1024).length>0){i({title:"Archivos muy grandes",description:"El tamaño máximo por archivo es 10MB",variant:"destructive"});return}c(C=>[...C,...N]),p(C=>({...C,files:void 0}))},m=b=>{c(N=>N.filter((S,E)=>E!==b))},g=()=>{const b={};if(!s)b.date="La fecha de presentación es obligatoria";else{const N=new Date(s),S=new Date;S.setHours(23,59,59,999),N>S&&(b.date="La fecha de presentación no puede ser futura")}return p(b),Object.keys(b).length===0},v=async()=>{if(g()){d(!0);try{await n(s,l),o(new Date().toISOString().split("T")[0]),c([]),p({})}catch(b){i({title:"Error al presentar",description:b?.message||"No se pudo completar la presentación",variant:"destructive"})}finally{d(!1)}}},y=()=>{o(new Date().toISOString().split("T")[0]),c([]),p({}),r()};return e?a.jsx(Un,{open:t,onOpenChange:b=>!b&&!u&&y(),children:a.jsxs(zn,{className:"max-w-2xl",onInteractOutside:b=>b.preventDefault(),children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Marcar como Presentado"}),a.jsx(Qn,{children:"Complete la información de presentación del modelo fiscal. Todos los campos son obligatorios."})]}),a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsx("div",{className:"rounded-lg border p-4 bg-muted/50",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Cliente:"}),a.jsx("p",{className:"font-medium",children:e.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Modelo:"}),a.jsx("p",{className:"font-medium",children:e.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Periodo:"}),a.jsx("p",{className:"font-medium",children:e.periodLabel})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Año:"}),a.jsx("p",{className:"font-medium",children:e.year})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"presented-date",className:"text-sm font-medium",children:"Fecha de presentación *"}),a.jsx(Ie,{id:"presented-date",type:"date",value:s,onChange:b=>{o(b.target.value),p(N=>({...N,date:void 0}))},max:new Date().toISOString().split("T")[0],className:f.date?"border-destructive":""}),f.date&&a.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[a.jsx(qo,{className:"h-3 w-3"}),f.date]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Documentos de presentación (opcional)"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Adjunte los justificantes de presentación si ya los tiene disponibles (solo archivos PDF, máximo 10MB cada uno). Podrá añadirlos más tarde si aún no los tiene."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("input",{type:"file",id:"file-upload",accept:".pdf,application/pdf",multiple:!0,onChange:h,className:"hidden"}),a.jsxs(re,{type:"button",variant:"outline",onClick:()=>document.getElementById("file-upload")?.click(),className:"w-full",disabled:u,children:[a.jsx(sa,{className:"h-4 w-4 mr-2"}),"Seleccionar archivos PDF"]})]}),l.length>0&&a.jsx("div",{className:"space-y-2",children:l.map((b,N)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx(Qr,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:b.name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[(b.size/1024).toFixed(1)," KB"]})]})]}),a.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:()=>m(N),disabled:u,className:"h-8 w-8 flex-shrink-0",children:a.jsx(jh,{className:"h-4 w-4"})})]},N))}),l.length===0&&a.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(qo,{className:"h-3 w-3"}),"Sin documentos adjuntos. Podrá añadirlos más tarde desde la tarjeta."]})]})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:y,disabled:u,children:"Cancelar"}),a.jsx(re,{onClick:v,disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):l.length===0?"Presentar sin documentos":`Presentar con ${l.length} documento(s)`})]})]})}):null}function ADe({open:t,filingData:e,onClose:n}){const{toast:r}=nr(),[i,s]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(!1);x.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{if(e){u(!0);try{const N=await fetch(`/api/documents?clientId=${e.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(N.ok){const E=(await N.json()).filter(C=>{try{return JSON.parse(C.description||"{}").filingId===e.id}catch{return!1}});s(E.map(C=>({id:C.id,name:C.name,fileName:C.file_name||"documento.pdf",fileSize:C.file_size||0,createdAt:C.created_at})))}if(e.notes)try{const S=JSON.parse(e.notes);S.history&&Array.isArray(S.history)&&l(S.history)}catch{l([])}}catch{r({title:"Error",description:"No se pudieron cargar los detalles",variant:"destructive"})}finally{u(!1)}}},f=async(N,S)=>{try{const E=await fetch(`/api/documents/${N}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!E.ok)throw new Error("Error al descargar");const C=await E.blob(),T=window.URL.createObjectURL(C),_=document.createElement("a");_.href=T,_.download=S,document.body.appendChild(_),_.click(),window.URL.revokeObjectURL(T),document.body.removeChild(_),r({title:"Descarga iniciada",description:`Descargando ${S}`})}catch{r({title:"Error",description:"No se pudo descargar el documento",variant:"destructive"})}},p=async()=>{for(const N of i)await f(N.id,N.fileName),await new Promise(S=>setTimeout(S,500))},h=async N=>{if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{if(!(await fetch(`/api/documents/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw new Error("Error al eliminar");r({title:"Documento eliminado",description:"El documento ha sido eliminado correctamente"}),await d()}catch{r({title:"Error",description:"No se pudo eliminar el documento",variant:"destructive"})}},m=async()=>{const N=document.createElement("input");N.type="file",N.multiple=!0,N.accept=".pdf,.jpg,.jpeg,.png,.doc,.docx",N.onchange=async S=>{const E=Array.from(S.target.files||[]);if(E.length!==0){u(!0);try{const C={filingId:e.id,clientId:e.clientId,taxModelCode:e.taxModelCode,periodId:e.periodId,periodLabel:e.periodLabel||"",year:new Date().getFullYear(),filingStatus:e.status,linkedAt:new Date().toISOString()};for(const T of E){const _=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({name:T.name,file_name:T.name,type:"tax_filing_document",description:JSON.stringify(C),clientId:e.clientId,category:"TAX_FILING"})});if(!_.ok)throw new Error(`Error al crear documento: ${T.name}`);const j=await _.json(),P=new FormData;if(P.append("file",T),!(await fetch(`/api/documents/${j.id}/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:P})).ok)throw new Error(`Error al subir archivo: ${T.name}`)}r({title:"Documentos subidos",description:`${E.length} documento(s) subido(s) correctamente`}),await d()}catch(C){r({title:"Error",description:C.message||"No se pudieron subir los documentos",variant:"destructive"})}finally{u(!1)}}},N.click()},g=N=>({NOT_STARTED:"PENDIENTE",IN_PROGRESS:"CALCULADO",PRESENTED:"PRESENTADO"})[N]||N,v=N=>{const S={NOT_STARTED:"bg-red-100 text-red-700",IN_PROGRESS:"bg-amber-100 text-amber-700",PRESENTED:"bg-green-100 text-green-700"};return a.jsx(Ge,{className:S[N]||"bg-gray-100 text-gray-700",children:g(N)})},y=N=>new Date(N).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),b=N=>N<1024?`${N} B`:N<1024*1024?`${(N/1024).toFixed(1)} KB`:`${(N/(1024*1024)).toFixed(1)} MB`;return e?a.jsx(Un,{open:t,onOpenChange:n,children:a.jsxs(zn,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[a.jsx(Hn,{children:a.jsx(Vn,{children:"Detalles de Presentación Fiscal"})}),c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs(Wo,{defaultValue:"info",className:"space-y-4",children:[a.jsxs(co,{className:"grid w-full grid-cols-3",children:[a.jsxs(vn,{value:"info",children:[a.jsx(OP,{className:"h-4 w-4 mr-2"}),"Información"]}),a.jsxs(vn,{value:"documents",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Documentos (",i.length,")"]}),a.jsxs(vn,{value:"history",children:[a.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Historial"]})]}),a.jsxs(Rn,{value:"info",className:"space-y-4",children:[a.jsx("div",{className:"rounded-lg border p-4 space-y-3",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliente"}),a.jsx("p",{className:"font-medium",children:e.clientName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Modelo"}),a.jsx("p",{className:"font-medium",children:e.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Periodo"}),a.jsx("p",{className:"font-medium",children:e.periodLabel})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Año"}),a.jsx("p",{className:"font-medium",children:e.year})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Estado actual"}),a.jsx("div",{className:"mt-1",children:v(e.status)})]}),e.presentedAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha de presentación"}),a.jsx("p",{className:"font-medium",children:new Date(e.presentedAt).toLocaleDateString("es-ES")})]})]})}),a.jsxs("div",{className:"rounded-lg border p-4",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Resumen"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("p",{children:["📄 ",i.length," documento(s) adjunto(s)"]}),a.jsxs("p",{children:["📅 ",o.length," cambio(s) de estado registrado(s)"]}),e.presentedAt&&a.jsxs("p",{children:["✅ Presentado hace ",Math.floor((Date.now()-new Date(e.presentedAt).getTime())/(1e3*60*60*24))," día(s)"]})]})]})]}),a.jsxs(Rn,{value:"documents",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs(re,{variant:"default",size:"sm",onClick:m,disabled:c,children:[a.jsx(sa,{className:"h-4 w-4 mr-2"}),"Subir documentos"]}),i.length>0&&a.jsxs(re,{variant:"outline",size:"sm",onClick:p,children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Descargar todos"]})]}),i.length===0?a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(Qr,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay documentos adjuntos"})]}):a.jsx("div",{className:"space-y-2",children:i.map(N=>a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/50 transition",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Qr,{className:"h-10 w-10 text-red-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:N.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.fileName," • ",b(N.fileSize)]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Subido el ",y(N.createdAt)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>f(N.id,N.fileName),title:"Descargar documento",children:a.jsx(Cs,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>h(N.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",title:"Eliminar documento",children:a.jsx(ei,{className:"h-4 w-4"})})]})]},N.id))})]}),a.jsx(Rn,{value:"history",className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx(Ah,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No hay historial de cambios disponible"})]}):a.jsx("div",{className:"space-y-3",children:o.map((N,S)=>a.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-card",children:[a.jsx("div",{className:"mt-1",children:v(N.status)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-medium",children:["Cambio a ",g(N.status)]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:y(N.timestamp)}),N.userName&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["por ",N.userName]})]})]},S))})})]})]})}):null}function Nj(){const[t,e]=es(),n=t?.startsWith("/impuestos/calendario")?"calendar":t?.startsWith("/impuestos/modelos")?"models":t?.startsWith("/impuestos/reportes")?"reports":"control",r=i=>{if(i==="control")return e("/impuestos/control");if(i==="calendar")return e("/impuestos/calendario");if(i==="models")return e("/impuestos/modelos");if(i==="reports")return e("/impuestos/reportes")};return a.jsx(Wo,{value:n,onValueChange:r,className:"space-y-6",children:a.jsxs(co,{className:"h-auto grid grid-cols-2 md:grid-cols-4 gap-1 p-1",children:[a.jsxs(vn,{value:"control",children:[a.jsx(tae,{className:"h-4 w-4 mr-2"}),"Control de impuestos"]}),a.jsxs(vn,{value:"calendar",children:[a.jsx(j1,{className:"h-4 w-4 mr-2"}),"Calendario fiscal"]}),a.jsxs(vn,{value:"models",children:[a.jsx(PP,{className:"h-4 w-4 mr-2"}),"Modelos"]}),a.jsxs(vn,{value:"reports",children:[a.jsx(nae,{className:"h-4 w-4 mr-2"}),"Reportes"]})]})})}async function Sj(){const t=localStorage.getItem("token"),e=await fetch("/api/tax-models",{method:"GET",headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:"Error al obtener modelos"}));throw new Error(n.error||"No se pudieron obtener los modelos")}return e.json()}async function CDe(t){const e=localStorage.getItem("token"),n=await fetch("/api/tax-models",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({error:"Error al crear modelo"}));throw new Error(r.error||"No se pudo crear el modelo")}return n.json()}async function kDe(t,e){const n=localStorage.getItem("token"),r=await fetch(`/api/tax-models/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},credentials:"include",body:JSON.stringify(e)});if(!r.ok){const i=await r.json().catch(()=>({error:"Error al actualizar modelo"}));throw new Error(i.error||"No se pudo actualizar el modelo")}return r.json()}async function TDe(t){const e=localStorage.getItem("token"),n=await fetch(`/api/tax-models/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!n.ok){const r=await n.json().catch(()=>({error:"Error al eliminar modelo"}));throw new Error(r.error||"No se pudo eliminar el modelo")}}const ODe=[{value:"ALL",label:"Todas"},{value:"MONTHLY",label:"Mensual"},{value:"QUARTERLY",label:"Trimestral"},{value:"ANNUAL",label:"Anual"},{value:"SPECIAL",label:"Especial 202"}];function PDe(){const{toast:t}=nr(),[e,n]=x.useState(new Date().getFullYear()),[r,i]=x.useState("all"),[s,o]=x.useState("all"),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,p]=x.useState(""),[h,m]=x.useState(""),[g,v]=x.useState("ALL"),[y,b]=x.useState(!1),[N,S]=x.useState(null),[E,C]=x.useState(null),T=GR(yg($Z,{activationConstraint:{distance:6}}),yg(zZ,{activationConstraint:{delay:120,tolerance:8}}));x.useEffect(()=>(window.openFilingDetails=ee=>{C({id:ee.id,clientId:ee.clientId,clientName:ee.clientName,taxModelCode:ee.taxModelCode,periodLabel:ee.periodLabel||"",year:e,status:ee.status,presentedAt:void 0,notes:void 0})},window.replaceFilingDocuments=ee=>{S({filingId:ee.id,clientId:ee.clientId,clientName:ee.clientName,taxModelCode:ee.taxModelCode,periodId:ee.periodId,periodLabel:ee.periodLabel||"",year:e,previousStatus:ee.status})},()=>{delete window.openFilingDetails,delete window.replaceFilingDocuments}),[e]);const _=At({queryKey:["/api/clients"],staleTime:6e4}),j=At({queryKey:["/api/tax/filings",e,r,s,u,f,h,l,y],queryFn:async()=>{const ee=new URLSearchParams;ee.set("year",String(e)),r&&r!=="all"&&ee.set("clientId",r),s!=="all"&&ee.set("status",s),u&&u!=="ALL"&&ee.set("model",u),f&&ee.set("gestorId",f),h&&ee.set("periodId",h),l&&ee.set("q",l.trim()),y&&ee.set("includeClosedPeriods","true");const ae=`/api/tax/filings${ee.toString()?`?${ee.toString()}`:""}`,F=await fetch(ae,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!F.ok)throw new Error("No se pudieron cargar los datos");return F.json()},staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),P=At({queryKey:["/api/tax/periods",e],queryFn:async()=>{const ee=await fetch(`/api/tax/periods?year=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!ee.ok)throw new Error("No se pudieron cargar periodos");return ee.json()},staleTime:6e4});x.useEffect(()=>{if(!h)return;(P.data??[]).some(F=>F.id===h&&(g==="ALL"||F.kind===g))||m("")},[g,h,P.data]);const k=yt({mutationFn:async({id:ee,status:ae,presentedAt:F})=>ht("PATCH",`/api/tax/filings/${ee}`,{status:ae,presentedAt:F??null}),onError:ee=>{t({title:"Error",description:ee?.message??"No se pudo actualizar el estado",variant:"destructive"}),j.refetch()},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1})}}),O=j.data??[],M=ee=>{const ae=(ee||"").toUpperCase();return ae==="PRESENTADO"?"PRESENTADO":ae==="CALCULADO"||ae==="IN_PROGRESS"||ae==="COMPLETADO"||ae==="COMPLETED"?"CALCULADO":"PENDIENTE"},{data:I=[]}=At({queryKey:["/api/tax-models"],queryFn:Sj}),B=x.useMemo(()=>{const ee=I.map(q=>({code:q.code,name:q.name})),ae=Object.entries(cj).map(([q,Z])=>({code:q,name:Z.name})),F=new Map;return ae.forEach(q=>F.set(q.code,q)),ee.forEach(q=>F.set(q.code,q)),Array.from(F.values()).sort((q,Z)=>q.code.localeCompare(Z.code))},[I]),U=x.useMemo(()=>{const ee={PENDIENTE:[],CALCULADO:[],PRESENTADO:[]};return O.forEach(ae=>{const F=String(ae.periodKind??"").toUpperCase();if(g!=="ALL"&&F!==g)return;const q=M(ae.status);if(s==="all"||q===s){const Z=q in ee?q:"PENDIENTE";ee[Z].push({...ae,status:Z})}}),ee},[O,s,g]),D=ee=>{const ae=String(ee.active.id),F=ee.over?.id;if(!F)return;const q=O.find(Z=>Z.id===ae);if(!(!q||q.status===F)){if(F==="PRESENTADO"){S({filingId:q.id,clientId:q.clientId,clientName:q.clientName,taxModelCode:q.taxModelCode,periodId:q.periodId,periodLabel:q.periodLabel||"",year:e,previousStatus:q.status});return}if(Lt.setQueriesData({queryKey:["/api/tax/filings"],exact:!1},Z=>Array.isArray(Z)?Z.map(te=>te.id===q.id?{...te,status:F}:te):Z),q.status==="PRESENTADO"){window.prompt("Motivo del cambio de estado (salir de Presentado)"),k.mutate({id:q.id,status:F,presentedAt:null});return}k.mutate({id:q.id,status:F})}},z=async(ee,ae)=>{if(!N)return;const F=N.previousStatus==="PRESENTADO";try{if(F){const ce=await fetch(`/api/documents?clientId=${N.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(ce.ok){const ve=(await ce.json()).filter(oe=>{try{return JSON.parse(oe.description||"{}").filingId===N.filingId}catch{return!1}});for(const oe of ve)await fetch(`/api/documents/${oe.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({status:"archived"})})}}const q=[];for(const ce of ae){const ue={filingId:N.filingId,clientId:N.clientId,taxModelCode:N.taxModelCode,periodId:N.periodId,periodLabel:N.periodLabel,year:N.year,filingStatus:"PRESENTED",linkedAt:new Date().toISOString()},ve=await fetch("/api/documents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({type:"tax_filing_document",name:`${N.taxModelCode} - ${N.periodLabel} - ${ce.name}`,description:JSON.stringify(ue),clientId:N.clientId})});if(!ve.ok)throw new Error("Error al crear documento");const oe=await ve.json();q.push(oe.id);const pe=new FormData;if(pe.append("file",ce),!(await fetch(`/api/documents/${oe.id}/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:pe})).ok)throw new Error("Error al subir archivo")}const te={history:[{status:"PRESENTED",timestamp:new Date().toISOString()}],documentIds:q};await ht("PATCH",`/api/tax/filings/${N.filingId}`,{status:"PRESENTED",presentedAt:ee,notes:JSON.stringify(te)}),Lt.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1}),t({title:F?"Documentos reemplazados":"Presentación registrada",description:F?`Documentos del modelo ${N.taxModelCode} reemplazados correctamente (${ae.length} nuevo(s))`:`Modelo ${N.taxModelCode} marcado como presentado con ${ae.length} documento(s)`}),S(null)}catch(q){throw t({title:"Error",description:q?.message||"No se pudo completar la presentación",variant:"destructive"}),q}},H=()=>{S(null)};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificación fiscal con la misma experiencia consistente que Administración."})]}),a.jsx(Nj,{}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Impuestos 360"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tablero de presentaciones fiscales"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx(Ie,{placeholder:"Buscar cliente, NIF o modelo...",value:l,onChange:ee=>c(ee.target.value),className:"w-64"}),a.jsx(re,{variant:"ghost",onClick:()=>c(""),children:"Limpiar"}),a.jsx(Ie,{type:"number",value:e,onChange:ee=>n(Number(ee.target.value)),className:"w-24"}),a.jsxs(un,{value:g,onValueChange:ee=>v(ee),children:[a.jsx(sn,{className:"w-40",children:a.jsx(dn,{placeholder:"Periodicidad"})}),a.jsx(an,{children:ODe.map(ee=>a.jsx(Ke,{value:ee.value,children:ee.label},ee.value))})]}),a.jsxs(un,{value:h,onValueChange:m,children:[a.jsx(sn,{className:"w-64",children:a.jsx(dn,{placeholder:"Periodo"})}),a.jsx(an,{children:(P.data??[]).filter(ee=>g==="ALL"?!0:ee.kind===g).map(ee=>a.jsxs(Ke,{value:ee.id,children:[ee.label," / ",ee.year]},ee.id))})]}),a.jsxs(un,{value:s,onValueChange:ee=>o(ee),children:[a.jsx(sn,{className:"w-40",children:a.jsx(dn,{placeholder:"Estado"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todos"}),a.jsx(Ke,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(Ke,{value:"CALCULADO",children:"Calculado"}),a.jsx(Ke,{value:"PRESENTADO",children:"Presentado"})]})]}),a.jsxs(un,{value:r,onValueChange:i,children:[a.jsx(sn,{className:"w-64",children:a.jsx(dn,{placeholder:"Cliente"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todos"}),(_.data??[]).map(ee=>a.jsx(Ke,{value:ee.id,children:ee.razonSocial},ee.id))]})]}),a.jsxs(un,{value:u||"ALL",onValueChange:ee=>d(ee),children:[a.jsx(sn,{className:"w-56",children:a.jsx(dn,{placeholder:"Modelo"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ALL",children:"Todos"}),B.map(ee=>a.jsxs(Ke,{value:ee.code,children:[ee.code," · ",ee.name]},ee.code))]})]}),a.jsx(Ie,{placeholder:"Gestor (ID)",value:f,onChange:ee=>p(ee.target.value),className:"w-40"}),a.jsx(re,{variant:"outline",onClick:async()=>{if((P.data??[]).length===0&&window.confirm("No hay periodos para este año. ¿Crear año fiscal ahora?")){const F=await fetch("/api/tax/periods/create-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:e})});if(F.ok)await P.refetch(),t({title:"Año fiscal creado",description:`Se han creado periodos base para ${e}`});else{try{const q=await F.json();t({title:"Error",description:q?.error||"No se pudo crear el año fiscal",variant:"destructive"})}catch{t({title:"Error",description:"No se pudo crear el año fiscal",variant:"destructive"})}return}}const ee=await fetch("/api/tax/filings/ensure-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:e})});if(ee.ok){try{const ae=await ee.json();t({title:"Tarjetas generadas",description:`Año ${e}`})}catch{}j.refetch()}else try{const ae=await ee.json();t({title:"Error",description:ae?.error||"No se pudieron generar las tarjetas",variant:"destructive"})}catch{t({title:"Error",description:"No se pudieron generar las tarjetas",variant:"destructive"})}},children:"Generar tarjetas"}),a.jsxs("div",{className:"flex items-center gap-2 border-l pl-2",children:[a.jsx("input",{type:"checkbox",id:"includeClosedPeriods",checked:y,onChange:ee=>b(ee.target.checked),className:"h-4 w-4 rounded border-gray-300"}),a.jsx("label",{htmlFor:"includeClosedPeriods",className:"text-sm font-medium cursor-pointer",children:"Incluir periodos cerrados"})]})]})]}),j.isLoading?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Fn,{className:"h-12 w-full"}),a.jsx(Fn,{className:"h-[420px] w-full"})]}):O.length===0?a.jsxs("div",{className:"rounded-xl border p-12 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"No hay tarjetas para este año."}),a.jsxs("p",{className:"mt-1",children:["Usa el botón ",a.jsx("span",{className:"font-semibold",children:"Generar tarjetas"})," para crearlas a partir de las asignaciones activas."]})]}):a.jsx(JR,{sensors:T,collisionDetection:OZ,onDragEnd:D,children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(zC,{title:"Pendiente",accent:"bg-red-50 border-red-200",badge:"bg-red-100 text-red-700",items:U.PENDIENTE}),a.jsx(zC,{title:"Calculado",accent:"bg-amber-50 border-amber-200",badge:"bg-amber-100 text-amber-700",items:U.CALCULADO}),a.jsx(zC,{title:"Presentado",accent:"bg-emerald-50 border-emerald-200",badge:"bg-emerald-100 text-emerald-700",items:U.PRESENTADO})]})}),a.jsx(EDe,{open:!!N,filingData:N,onConfirm:z,onCancel:H}),a.jsx(ADe,{open:!!E,filingData:E,onClose:()=>C(null)})]})}function zC({title:t,accent:e,badge:n,items:r}){const i=t.toUpperCase(),{setNodeRef:s,isOver:o}=KZ({id:i});return a.jsxs("div",{ref:s,id:i,className:`relative flex h-full min-h-[320px] flex-col gap-3 rounded-xl border p-4 ${e} ${o?"ring-2 ring-primary/40":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:t}),a.jsx(Ge,{variant:"secondary",className:"bg-background text-muted-foreground",children:r.length})]}),a.jsx(RDe,{items:r,renderItem:l=>a.jsx(MDe,{item:l,badgeClass:n},l.id)})]})}function MDe({item:t,badgeClass:e}){const n=t.calendarStatus==="CERRADO",{attributes:r,listeners:i,setNodeRef:s,transform:o,isDragging:l}=WZ({id:t.id,disabled:n}),c=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`}:void 0,[u,d]=x.useState(!1),[f,p]=x.useState(0),[h,m]=x.useState(!1),{toast:g}=nr();x.useEffect(()=>{t.status==="PRESENTADO"&&v()},[t.id,t.status]);const v=async()=>{try{const C=await fetch(`/api/documents?clientId=${t.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(C.ok){const _=(await C.json()).filter(j=>{try{return JSON.parse(j.description||"{}").filingId===t.id}catch{return!1}});p(_.length)}}catch{}},y=async()=>{m(!0);try{const C=await fetch(`/api/documents?clientId=${t.clientId}&type=tax_filing_document`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(C.ok){const _=(await C.json()).filter(j=>{try{return JSON.parse(j.description||"{}").filingId===t.id}catch{return!1}});if(_.length===0){g({title:"Sin documentos",description:"No hay documentos adjuntos para descargar",variant:"destructive"});return}for(const j of _){const P=await fetch(`/api/documents/${j.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(P.ok){const k=await P.blob(),O=window.URL.createObjectURL(k),M=document.createElement("a");M.href=O,M.download=j.file_name||`documento-${j.id}.pdf`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(O),document.body.removeChild(M)}await new Promise(k=>setTimeout(k,300))}g({title:"Descarga completada",description:`${_.length} documento(s) descargado(s)`})}}catch{g({title:"Error",description:"No se pudieron descargar los documentos",variant:"destructive"})}finally{m(!1)}},b=()=>{typeof window.openFilingDetails=="function"&&window.openFilingDetails(t)},N=()=>{typeof window.replaceFilingDocuments=="function"&&window.replaceFilingDocuments(t)},S=async C=>{try{if(C==="PRESENTADO"){const T=window.prompt("Fecha de presentación (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!T)return;await ht("PATCH",`/api/tax/filings/${t.id}`,{status:C,presentedAt:T}),g({title:"Actualizado",description:`Marcado como PRESENTADO (${T})`})}else await ht("PATCH",`/api/tax/filings/${t.id}`,{status:C,presentedAt:null}),g({title:"Actualizado",description:`Estado cambiado a ${C}`});Lt.invalidateQueries({queryKey:["/api/tax/filings"],exact:!1})}catch(T){g({title:"Error",description:T?.message||"No se pudo actualizar",variant:"destructive"})}},E=cj[t.taxModelCode];return a.jsxs("div",{ref:s,id:t.id,...n?{}:i,...n?{}:r,style:c,className:`rounded-lg border transition-all duration-200 ${n?"bg-gray-50 border-gray-300 opacity-60 cursor-not-allowed":l?"bg-white opacity-80 ring-2 ring-primary/50 shadow-lg":"bg-white shadow-sm hover:shadow-md"} ${u?"p-4 shadow-xl":"p-3"}`,children:[a.jsxs("div",{className:"cursor-pointer select-none",onClick:C=>{l||(C.stopPropagation(),d(!u))},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm font-semibold text-foreground",children:t.clientName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(Ge,{variant:"outline",className:`text-xs font-mono ${e}`,children:t.taxModelCode}),a.jsx("span",{className:"text-xs text-muted-foreground",children:t.periodLabel||"Sin periodo"})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[a.jsx(Ge,{variant:t.status==="PRESENTADO"?"default":"secondary",className:"text-xs whitespace-nowrap",children:t.status}),n&&a.jsx(Ge,{variant:"outline",className:"text-xs bg-gray-200 text-gray-700",children:"CERRADO"}),t.status==="PRESENTADO"&&f>0&&a.jsxs(Ge,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200 flex items-center gap-1",children:[a.jsx(Kd,{className:"h-3 w-3"}),f]}),t.status==="PRESENTADO"&&f===0&&a.jsxs(Ge,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700 border-amber-200 flex items-center gap-1",children:[a.jsx(sa,{className:"h-3 w-3"}),"Sin docs"]}),u&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"Click para cerrar"})]})]}),t.status==="PRESENTADO"&&f===0&&!u&&a.jsxs(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),N()},className:"w-full text-xs bg-amber-50 border-amber-300 hover:bg-amber-100 text-amber-900 flex items-center justify-center gap-2",children:[a.jsx(sa,{className:"h-3 w-3"}),"Subir documentos ahora"]})]}),t.status==="PRESENTADO"&&!u&&a.jsx("div",{className:"absolute top-2 right-2",onClick:C=>C.stopPropagation(),children:a.jsxs(x5,{children:[a.jsx(b5,{asChild:!0,children:a.jsx(re,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-70 hover:opacity-100",disabled:h,children:a.jsx(L9,{className:"h-4 w-4"})})}),a.jsxs(Xw,{align:"end",className:"w-56",children:[a.jsxs(Xa,{onClick:b,className:"gap-2",children:[a.jsx(ou,{className:"h-4 w-4"}),"Ver detalles e historial"]}),f>0&&a.jsxs(a.Fragment,{children:[a.jsxs(Xa,{onClick:y,className:"gap-2",disabled:h,children:[a.jsx(Cs,{className:"h-4 w-4"}),"Descargar documentos (",f,")"]}),a.jsx(Jw,{}),a.jsxs(Xa,{onClick:N,className:"gap-2",children:[a.jsx(Yc,{className:"h-4 w-4"}),"Reemplazar documentos"]})]}),f===0&&a.jsxs(a.Fragment,{children:[a.jsx(Xa,{disabled:!0,className:"text-xs text-muted-foreground italic",children:"Sin documentos adjuntos"}),a.jsx(Jw,{}),a.jsxs(Xa,{onClick:N,className:"gap-2 text-blue-600",children:[a.jsx(sa,{className:"h-4 w-4"}),"Subir documentos ahora"]})]})]})]})})]}),u&&a.jsxs("div",{className:"mt-4 space-y-3 border-t pt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Información del Modelo"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Modelo:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.taxModelCode})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Nombre:"}),a.jsx("span",{className:"ml-1 font-medium",children:E?.name||"N/A"})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Datos del Cliente"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Razón Social:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"NIF/CIF:"}),a.jsx("span",{className:"ml-1 font-mono font-medium",children:t.nifCif})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"ID Cliente:"}),a.jsx("span",{className:"ml-1 font-mono text-muted-foreground",children:t.clientId})]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Periodo Fiscal"}),a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Periodo:"}),a.jsx("span",{className:"ml-1 font-medium",children:t.periodLabel||"Sin asignar"})]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"ID Periodo:"}),a.jsx("span",{className:"ml-1 font-mono text-muted-foreground",children:t.periodId})]})]}),t.status==="PRESENTADO"&&a.jsxs("div",{className:"space-y-2 border-t pt-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Documentos Adjuntos"}),f>0&&a.jsxs(Ge,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:[f," archivo(s)"]})]}),f===0?a.jsxs("div",{className:"text-xs text-muted-foreground italic bg-amber-50 border border-amber-200 rounded p-3",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"h-3 w-3"}),"No hay documentos adjuntos todavía"]}),a.jsxs(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),N()},className:"mt-2 w-full text-xs bg-white hover:bg-amber-100",children:[a.jsx(sa,{className:"h-3 w-3 mr-1"}),"Subir documentos"]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-xs text-green-700 bg-green-50 border border-green-200 rounded p-2 flex items-center gap-2",children:[a.jsx(Kd,{className:"h-3 w-3"}),f," documento(s) adjunto(s)"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),y()},disabled:h,className:"flex-1 text-xs",children:[a.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Descargar"]}),a.jsxs(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),b()},className:"flex-1 text-xs",children:[a.jsx(ou,{className:"h-3 w-3 mr-1"}),"Ver detalles"]})]})]})]}),a.jsxs("div",{className:"space-y-2 border-t pt-3",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Cambiar Estado"}),n?a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Este periodo está cerrado. No se pueden realizar cambios."}):a.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.status!=="PENDIENTE"&&a.jsx(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),S("PENDIENTE")},className:"flex-1 text-xs",children:"→ Pendiente"}),t.status!=="CALCULADO"&&a.jsx(re,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),S("CALCULADO")},className:"flex-1 text-xs",children:"→ Calculado"}),t.status!=="PRESENTADO"&&a.jsx(re,{size:"sm",onClick:C=>{C.stopPropagation(),S("PRESENTADO")},className:"flex-1 text-xs",children:"→ Presentado"})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground border-t pt-2",children:a.jsxs("span",{className:"font-mono",children:["ID: ",t.id]})})]})]})}function RDe({items:t,renderItem:e}){const n=x.useRef(null);return t.length===0?a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"mt-6 text-center text-xs text-muted-foreground",children:"Sin asignaciones."})}):a.jsx("div",{ref:n,className:"flex-1 overflow-auto space-y-3",children:t.map(r=>a.jsx("div",{children:e(r)},r.id))})}async function DDe(){const t=localStorage.getItem("token"),e=await fetch("/api/tax/calendar/download-template",{method:"GET",headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(!e.ok){const s=await e.json().catch(()=>({error:"Error al descargar la plantilla"}));throw new Error(s.error||"No se pudo descargar la plantilla")}const n=await e.blob(),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="plantilla-calendario-fiscal.xlsx",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),document.body.removeChild(i)}async function IDe(t){const e=localStorage.getItem("token"),n=new FormData;n.append("file",t);const r=await fetch("/api/tax/calendar/import-excel",{method:"POST",headers:{Authorization:`Bearer ${e}`},credentials:"include",body:n}),i=await r.json();if(!r.ok){if(i.result)return i.result;throw new Error(i.error||"Error al importar el archivo")}return i.result}function LDe({open:t,onClose:e,onImportSuccess:n}){const{toast:r}=nr(),[i,s]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(null),d=h=>{const m=h.target.files?.[0];if(m){if(!(m.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||m.name.endsWith(".xlsx"))){r({title:"Archivo inválido",description:"Por favor selecciona un archivo Excel (.xlsx)",variant:"destructive"});return}s(m),u(null)}},f=async()=>{if(!i){r({title:"No hay archivo",description:"Por favor selecciona un archivo Excel para importar",variant:"destructive"});return}l(!0);try{const h=await IDe(i);u(h),h.success?(r({title:"Importación exitosa",description:`Se importaron ${h.imported} periodos correctamente`}),n()):r({title:"Importación con errores",description:"Revisa el detalle de errores a continuación",variant:"destructive"})}catch(h){r({title:"Error en la importación",description:h?.message||"No se pudo procesar el archivo",variant:"destructive"}),u({imported:0,errors:[h?.message||"Error desconocido"],duplicates:[],success:!1})}finally{l(!1)}},p=()=>{s(null),u(null),e()};return a.jsx(Un,{open:t,onOpenChange:p,children:a.jsxs(zn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Importar Calendario Fiscal desde Excel"}),a.jsx(Qn,{children:"Sube un archivo Excel con los periodos fiscales a importar. Descarga primero la plantilla para conocer el formato correcto."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-md border p-4 bg-muted/50",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Formato del archivo Excel:"}),a.jsxs("ul",{className:"text-sm space-y-1 ml-4 list-disc",children:[a.jsxs("li",{children:[a.jsx("strong",{children:'Hoja "Periodos"'})," con las columnas:"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"modelCode*"})," - Código del modelo (ej: 303, 111, 130)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"period*"})," - Periodo (ej: 1T, 2T, M01, ANUAL)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"year*"})," - Año (ej: 2025)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"startDate*"})," - Fecha inicio (DD/MM/YYYY o YYYY-MM-DD)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"endDate*"})," - Fecha fin (DD/MM/YYYY o YYYY-MM-DD)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"active"})," - SI o NO (por defecto: SI)"]}),a.jsxs("li",{className:"ml-4",children:[a.jsx("code",{className:"bg-background px-1 rounded",children:"locked"})," - SI o NO (por defecto: NO)"]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Los campos marcados con ",a.jsx("code",{children:"*"})," son obligatorios."]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"excel-file",className:"block text-sm font-medium text-foreground",children:"Seleccionar archivo Excel"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"excel-file",type:"file",accept:".xlsx",onChange:d,disabled:o,className:"block w-full text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90 disabled:opacity-50"}),i&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(Oy,{className:"h-4 w-4"}),i.name]})]})]}),c&&a.jsxs("div",{className:"rounded-md border p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[c.success?a.jsx(ml,{className:"h-5 w-5 text-green-600"}):a.jsx(gl,{className:"h-5 w-5 text-destructive"}),a.jsx("h4",{className:"font-semibold",children:c.success?"Importación completada":"Importación con errores"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Registros importados:"})," ",c.imported]}),c.duplicates.length>0&&a.jsxs("div",{children:[a.jsxs("strong",{className:"text-yellow-600",children:["Duplicados omitidos (",c.duplicates.length,"):"]}),a.jsx("ul",{className:"ml-4 mt-1 space-y-1 max-h-32 overflow-y-auto",children:c.duplicates.map((h,m)=>a.jsx("li",{className:"text-yellow-700",children:h},m))})]}),c.errors.length>0&&a.jsxs("div",{children:[a.jsxs("strong",{className:"text-destructive",children:["Errores (",c.errors.length,"):"]}),a.jsx("ul",{className:"ml-4 mt-1 space-y-1 max-h-32 overflow-y-auto",children:c.errors.map((h,m)=>a.jsx("li",{className:"text-destructive",children:h},m))})]})]})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:p,disabled:o,children:c?.success?"Cerrar":"Cancelar"}),!c?.success&&a.jsx(re,{onClick:f,disabled:!i||o,children:o?a.jsxs(a.Fragment,{children:[a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sa,{className:"mr-2 h-4 w-4"}),"Importar"]})})]})]})})}function FDe(){const{toast:t}=nr(),e=Hs(),n=new Date().getFullYear(),[r,i]=x.useState(n),[s,o]=x.useState("TODAS"),[l,c]=x.useState("ALL"),[u,d]=x.useState("TODOS"),[f,p]=x.useState(""),[h,m]=x.useState(!1),[g,v]=x.useState({modelCode:"",period:"",startDate:"",endDate:""}),[y,b]=x.useState({}),[N,S]=x.useState("end"),[E,C]=x.useState("asc"),[T,_]=x.useState("calendar"),[j,P]=x.useState(!1),{data:k=[],refetch:O}=At({queryKey:["/api/tax/calendar",r,s,l,u],queryFn:async()=>{const X=new URLSearchParams;X.set("year",String(r)),l&&l!=="ALL"&&X.set("model",l),s==="MENSUAL"&&X.set("periodicity","monthly"),s==="TRIMESTRAL"&&X.set("periodicity","quarterly"),s==="ANUAL"&&X.set("periodicity","annual"),s==="ESPECIAL"&&X.set("periodicity","special"),u!=="TODOS"&&X.set("status",u);const Se=await fetch(`/api/tax/calendar?${X.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!Se.ok)throw new Error("No se pudo cargar el calendario");return Se.json()},staleTime:3e4}),M=yt({mutationFn:async X=>fetch("/api/tax/calendar/create-year",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:X})}).then(Se=>{if(!Se.ok)throw new Error("No se pudo crear el año");return Se.json()}),onSuccess:()=>{O(),t({title:"Año fiscal creado",description:`Se ha creado el año ${r}`})}}),I=yt({mutationFn:async X=>{const Se=await fetch("/api/tax/calendar/generate-aeat-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({year:X})});if(!Se.ok){const W=await Se.json();throw new Error(W.error||"No se pudo generar el calendario")}return Se.json()},onSuccess:X=>{O(),t({title:"Calendario AEAT generado",description:X.message||"Se han generado todos los periodos fiscales"})},onError:X=>{t({title:"Error",description:X.message||"No se pudo generar el calendario",variant:"destructive"})}}),B=yt({mutationFn:async X=>{if(!(await fetch(`/api/tax/calendar/${X}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"})).ok)throw new Error("No se pudo eliminar el periodo")},onSuccess:()=>{O(),t({title:"Periodo eliminado",description:"El periodo se ha eliminado correctamente"})},onError:X=>{t({title:"Error",description:X.message,variant:"destructive"})}}),U=()=>{window.open(`/api/tax/calendar/${r}.ics`,"_blank")},D=async()=>{try{await DDe(),t({title:"Plantilla descargada",description:"El archivo Excel se ha descargado correctamente"})}catch(X){t({title:"Error al descargar",description:X?.message||"No se pudo descargar la plantilla",variant:"destructive"})}},z=X=>{if(X.status==="PENDIENTE"||X.status==="ABIERTO"||X.status==="CERRADO")return X.status;const Se=new Date,W=new Date(X.startDate),G=new Date(X.endDate);return Se>G?"CERRADO":Se>=W?"ABIERTO":"PENDIENTE"},H=x.useMemo(()=>{const X={PENDIENTE:0,ABIERTO:0,CERRADO:0};for(const Se of k){const W=z(Se);X[W]+=1}return X},[k]),ee=x.useMemo(()=>{let X=[...k];if(u!=="TODOS"&&(X=X.filter(W=>z(W)===u)),X.sort((W,G)=>{let _e=0;return N==="end"&&(_e=new Date(W.endDate).getTime()-new Date(G.endDate).getTime()),N==="start"&&(_e=new Date(W.startDate).getTime()-new Date(G.startDate).getTime()),N==="model"&&(_e=W.modelCode.localeCompare(G.modelCode)),N==="period"&&(_e=W.period.localeCompare(G.period)),E==="asc"?_e:-_e}),!f)return X;const Se=f.toLowerCase();return X.filter(W=>`${W.modelCode}`.toLowerCase().includes(Se)||`${W.period}`.toLowerCase().includes(Se))},[k,f,u]),ae=X=>{const Se=z(X);return Se==="PENDIENTE"?a.jsx(Ge,{className:"bg-red-100 text-red-700",children:"PENDIENTE"}):Se==="ABIERTO"?a.jsx(Ge,{className:"bg-amber-100 text-amber-700",children:"ABIERTO"}):a.jsx(Ge,{className:"bg-gray-200 text-gray-700",children:"CERRADO"})},F=X=>{const Se=new Date,W=new Date(X.startDate),G=new Date(X.endDate);if(Se>=W&&Se<=G)return a.jsxs(Ge,{className:"bg-emerald-600 text-white inline-flex items-center",children:[a.jsx(aae,{className:"h-3 w-3 mr-1"})," En curso"]});const _e=X.daysToStart;if(_e==null)return"—";const Qe=_e<=3?"bg-red-600 text-white":_e<=7?"bg-orange-500 text-white":"bg-primary text-primary-foreground",ze=_e<=3?Dm:_e<=7?a4:oae;return a.jsxs(Ge,{className:`${Qe} inline-flex items-center`,children:[a.jsx(ze,{className:"h-3 w-3 mr-1"})," ",te(_e)]})},q=X=>{const Se=new Date,W=new Date(X.endDate);if(Se>W)return a.jsxs(Ge,{className:"bg-gray-500 text-white inline-flex items-center",children:[a.jsx(gl,{className:"h-3 w-3 mr-1"})," Vencido"]});const G=X.daysToEnd;if(G==null)return"—";const _e=G<=1?"bg-red-700 text-white":G<=3?"bg-red-600 text-white":G<=7?"bg-amber-500 text-white":"bg-emerald-600 text-white",Qe=G<=3?Dm:G<=7?a4:ml;return a.jsxs(Ge,{className:`${_e} inline-flex items-center`,children:[a.jsx(Qe,{className:"h-3 w-3 mr-1"})," ",te(G)]})},Z=(X,Se)=>a.jsxs("button",{type:"button",onClick:()=>{N===Se?C(W=>W==="asc"?"desc":"asc"):(S(Se),C("asc"))},className:"text-left hover:underline inline-flex items-center gap-1",children:[a.jsx("span",{children:X}),N===Se?a.jsx("span",{className:"text-xs",children:E==="asc"?"▲":"▼"}):null]}),te=X=>X===null?"—":`${X} día${Math.abs(X)===1?"":"s"}`,{data:ce=[]}=At({queryKey:["/api/tax-models"],queryFn:Sj}),ue=x.useMemo(()=>{const X=ce.map(G=>({code:G.code,name:G.name})),Se=Object.entries(cj).map(([G,_e])=>({code:G,name:_e.name})),W=new Map;return Se.forEach(G=>W.set(G.code,G)),X.forEach(G=>W.set(G.code,G)),Array.from(W.values()).sort((G,_e)=>G.code.localeCompare(_e.code))},[ce]),ve=X=>{try{const Se=new Date(X),W=Se.getFullYear(),G=String(Se.getMonth()+1).padStart(2,"0"),_e=String(Se.getDate()).padStart(2,"0");return`${W}-${G}-${_e}`}catch{return""}},oe=async X=>{const Se=y[X];if(!Se)return;const W={};if(Se.startDate&&(W.startDate=Se.startDate),Se.endDate&&(W.endDate=Se.endDate),!Object.keys(W).length)return;if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(X)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify(W)})).ok)throw new Error("No se pudo actualizar");b(_e=>{const Qe={..._e};return delete Qe[X],Qe}),O()},pe=async()=>{try{if(!g.modelCode||!g.period||!g.startDate||!g.endDate)throw new Error("Completa todos los campos");const X={modelCode:g.modelCode.toUpperCase(),period:g.period.toUpperCase(),year:r,startDate:g.startDate,endDate:g.endDate},Se=await fetch("/api/tax/calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify(X)});if(!Se.ok){let _e="";try{_e=(await Se.json())?.error||""}catch{}throw new Error(_e||(Se.status===409?"Periodo duplicado (Modelo/Periodo/Año)":"No se pudo crear el periodo"))}m(!1),v({modelCode:"",period:"",startDate:"",endDate:""});const W=X.period,G=X.modelCode;W==="ANUAL"?o("ANUAL"):/^[1234]T$/.test(W)?o("TRIMESTRAL"):/^M(04|10|12)$/.test(W)?o("ESPECIAL"):/^M\d{2}$/.test(W)?o("MENSUAL"):o("TODAS"),c(G),d("TODOS"),t({title:"Periodo creado",description:`${G} ${xe(W)}/${r}`}),await e.invalidateQueries({queryKey:["/api/tax/calendar"]}),await O()}catch(X){t({title:"Error",description:X?.message??"",variant:"destructive"})}},xe=X=>{const Se={M01:"Enero",M02:"Febrero",M03:"Marzo",M04:"Abril",M05:"Mayo",M06:"Junio",M07:"Julio",M08:"Agosto",M09:"Septiembre",M10:"Octubre",M11:"Noviembre",M12:"Diciembre"},W={"1T":"1.º trimestre","2T":"2.º trimestre","3T":"3.º trimestre","4T":"4.º trimestre"};return Se[X]?Se[X]:W[X]?W[X]:X==="ANUAL"?"Anual":X};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificación fiscal con la misma experiencia consistente que Administración."})]}),a.jsx(Nj,{}),a.jsxs(Fe,{className:"shadow-sm",children:[a.jsx(Je,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rae,{className:"h-5 w-5 text-muted-foreground"}),a.jsx(et,{className:"text-xl",children:"Calendario fiscal AEAT"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona los modelos oficiales con sus fechas de apertura y cierre."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(re,{onClick:()=>m(!0),className:"gap-2",children:[a.jsx(Kr,{className:"h-4 w-4"})," Añadir periodo"]}),a.jsxs(x5,{children:[a.jsx(b5,{asChild:!0,children:a.jsxs(re,{variant:"outline",className:"gap-2",children:["Acciones ",a.jsx(tS,{className:"h-4 w-4"})]})}),a.jsxs(Xw,{align:"end",className:"w-56",children:[a.jsxs(Xa,{onClick:()=>{window.confirm(`¿Generar calendario AEAT completo para ${r}?

Esto creará 26 periodos fiscales (trimestres, meses, anuales y especiales) con las fechas oficiales de la Agencia Tributaria.`)&&I.mutate(r)},disabled:I.isPending,className:"gap-2",children:[a.jsx(iae,{className:"h-4 w-4"}),I.isPending?"Generando...":"Generar Calendario AEAT"]}),a.jsxs(Xa,{onClick:()=>M.mutate(r),className:"gap-2",children:[a.jsx(F9,{className:"h-4 w-4"}),"Nuevo año fiscal"]}),a.jsx(Jw,{}),a.jsxs(Xa,{onClick:U,className:"gap-2",children:[a.jsx(Cs,{className:"h-4 w-4"}),"Exportar .ICS"]}),a.jsxs(Xa,{onClick:D,className:"gap-2",children:[a.jsx(Oy,{className:"h-4 w-4"}),"Descargar Plantilla"]}),a.jsxs(Xa,{onClick:()=>P(!0),className:"gap-2",children:[a.jsx(sa,{className:"h-4 w-4"}),"Importar Excel"]})]})]})]})]})}),a.jsxs(Be,{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Año"}),a.jsx(Ie,{type:"number",value:r,onChange:X=>i(Number(X.target.value)),className:"w-24 h-9"})]}),a.jsxs(un,{value:s,onValueChange:X=>o(X),children:[a.jsx(sn,{className:"w-40 h-9",children:a.jsx(dn,{placeholder:"Periodicidad"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"TODAS",children:"Todas"}),a.jsx(Ke,{value:"MENSUAL",children:"Mensual"}),a.jsx(Ke,{value:"TRIMESTRAL",children:"Trimestral"}),a.jsx(Ke,{value:"ANUAL",children:"Anual"}),a.jsx(Ke,{value:"ESPECIAL",children:"Especial 202"})]})]}),a.jsxs(un,{value:u,onValueChange:X=>d(X),children:[a.jsx(sn,{className:"w-40 h-9",children:a.jsx(dn,{placeholder:"Estado"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"TODOS",children:"Todos"}),a.jsx(Ke,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(Ke,{value:"ABIERTO",children:"Abierto"}),a.jsx(Ke,{value:"CERRADO",children:"Cerrado"})]})]}),a.jsxs(un,{value:l,onValueChange:c,children:[a.jsx(sn,{className:"w-60 h-9",children:a.jsx(dn,{placeholder:"Filtrar por modelo (ej. 303)"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ALL",children:"Todos los modelos"}),ue.map(X=>a.jsxs(Ke,{value:X.code,children:[X.code," · ",X.name]},X.code))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ag,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(Ie,{className:"pl-8 w-64 h-9",placeholder:"Buscar modelo o periodo",value:f,onChange:X=>p(X.target.value)})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[a.jsxs(Ge,{className:"bg-red-100 text-red-700",children:["Pendiente ",H.PENDIENTE]}),a.jsxs(Ge,{className:"bg-amber-100 text-amber-700",children:["Abierto ",H.ABIERTO]}),a.jsxs(Ge,{className:"bg-gray-200 text-gray-700",children:["Cerrado ",H.CERRADO]})]})]}),ee.length>0?a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("div",{className:"grid grid-cols-10 text-xs text-muted-foreground px-2",children:[a.jsx("div",{children:Z("Modelo","model")}),a.jsx("div",{children:Z("Periodo","period")}),a.jsx("div",{children:"Estado"}),a.jsx("div",{children:Z("Fecha inicio","start")}),a.jsx("div",{children:"Inicio en"}),a.jsx("div",{children:Z("Fecha fin","end")}),a.jsx("div",{children:"Finaliza en"}),a.jsx("div",{children:"Activo"}),a.jsx("div",{children:"Bloqueado"}),a.jsx("div",{className:"text-center"})]}),ee.map(X=>{const Se=y[X.id]||{},W=Se.startDate??ve(X.startDate),G=Se.endDate??ve(X.endDate),_e=z(X),Qe=_e==="PENDIENTE"?"border-l-4 border-l-red-400":_e==="ABIERTO"?"border-l-4 border-l-amber-400":"border-l-4 border-l-gray-400",ze=_e==="CERRADO",Re=!!X.locked,se=ze||Re;return a.jsxs("div",{className:`grid grid-cols-10 items-center rounded-lg border p-3 bg-card/50 hover:bg-card transition group ${Qe}`,children:[a.jsx("div",{className:"font-medium flex items-center gap-2",children:a.jsx(Ge,{variant:"outline",className:"bg-muted",children:X.modelCode})}),a.jsxs("div",{children:[xe(X.period)," / ",X.year]}),a.jsx("div",{children:ae(X)}),a.jsx("div",{children:a.jsx(Ie,{type:"date",value:W,onChange:ge=>b(Ne=>({...Ne,[X.id]:{...Ne[X.id],startDate:ge.target.value}})),onBlur:()=>oe(X.id),className:"h-8",disabled:se})}),a.jsx("div",{children:F(X)}),a.jsx("div",{children:a.jsx(Ie,{type:"date",value:G,onChange:ge=>b(Ne=>({...Ne,[X.id]:{...Ne[X.id],endDate:ge.target.value}})),onBlur:()=>oe(X.id),className:"h-8",disabled:se})}),a.jsx("div",{children:q(X)}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(ks,{checked:!!X.active,onCheckedChange:async ge=>{try{if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(X.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({active:ge})})).ok)throw new Error("No se pudo actualizar");O()}catch(Ne){t({title:"Error",description:Ne?.message??"",variant:"destructive"})}}})}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(re,{variant:se?"default":"ghost",size:"icon",className:`h-8 w-8 ${ze?"bg-amber-600 hover:bg-amber-700":""}`,onClick:async()=>{const ge=!Re;try{if(!(await fetch(`/api/tax/calendar/${encodeURIComponent(X.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include",body:JSON.stringify({locked:ge})})).ok)throw new Error("No se pudo actualizar");O(),t({title:ze?ge?"Periodo bloqueado manualmente":"Auto-bloqueo desactivado temporalmente":ge?"Periodo bloqueado":"Periodo desbloqueado",description:ze?ge?"El periodo CERRADO permanece bloqueado":"Puedes editar el periodo CERRADO temporalmente":ge?"Las fechas ya no se pueden editar":"Ahora puedes editar las fechas"})}catch(Ne){t({title:"Error",description:Ne?.message??"",variant:"destructive"})}},title:ze?Re?"Auto-bloqueado + Manual - Click para desbloquear":"Auto-bloqueado - Click para bloquear también manualmente":Re?"Bloqueado manualmente - Click para desbloquear":"Desbloqueado - Click para bloquear",children:se?a.jsx(TP,{className:"h-4 w-4"}):a.jsx(sae,{className:"h-4 w-4"})})}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs(x5,{children:[a.jsx(b5,{asChild:!0,children:a.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:a.jsx(L9,{className:"h-4 w-4"})})}),a.jsxs(Xw,{align:"end",children:[a.jsxs(Xa,{onClick:()=>{if(se){t({title:"Periodo bloqueado",description:"Debe desbloquear el periodo primero para editarlo",variant:"destructive"});return}v({modelCode:X.modelCode,period:X.period,startDate:ve(X.startDate),endDate:ve(X.endDate)}),m(!0)},className:"gap-2",children:[a.jsx(mc,{className:"h-4 w-4"}),"Editar"]}),a.jsxs(Xa,{onClick:async()=>{if(se){t({title:"Periodo bloqueado",description:"Debe desbloquear el periodo primero para eliminarlo",variant:"destructive"});return}window.confirm("¿Eliminar este periodo?")&&B.mutate(X.id)},className:"gap-2 text-destructive focus:text-destructive",children:[a.jsx(ei,{className:"h-4 w-4"}),"Eliminar"]})]})]})})]},X.id)})]}):a.jsxs("div",{className:"py-16 text-center text-sm text-muted-foreground border rounded-xl",children:[a.jsx("p",{children:"No hay periodos configurados para este año."}),a.jsxs("p",{className:"mt-1",children:["Utiliza el botón ",a.jsx("span",{className:"font-medium",children:"“Añadir periodo”"})," para empezar."]})]})]})]}),a.jsx(Un,{open:h,onOpenChange:m,children:a.jsxs(zn,{children:[a.jsx(Hn,{children:a.jsx(Vn,{children:"Crear periodo"})}),a.jsxs("div",{className:"grid gap-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Modelo"}),a.jsxs(un,{value:g.modelCode||void 0,onValueChange:X=>v({...g,modelCode:X}),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona"})}),a.jsx(an,{children:ue.map(X=>a.jsxs(Ke,{value:X.code,children:[X.code," · ",X.name]},X.code))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Periodo"}),a.jsxs(un,{value:g.period||void 0,onValueChange:X=>v({...g,period:X}),children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ANUAL",children:"Anual"}),Array.from({length:12},(X,Se)=>`M${String(Se+1).padStart(2,"0")}`).map(X=>a.jsx(Ke,{value:X,children:xe(X)},X)),["1T","2T","3T","4T"].map(X=>a.jsx(Ke,{value:X,children:X},X))]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Fecha inicio"}),a.jsx(Ie,{type:"date",value:g.startDate,onChange:X=>v({...g,startDate:X.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs",children:"Fecha fin"}),a.jsx(Ie,{type:"date",value:g.endDate,onChange:X=>v({...g,endDate:X.target.value})})]})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),a.jsx(re,{onClick:pe,children:"Guardar"})]})]})}),a.jsx(LDe,{open:j,onClose:()=>P(!1),onImportSuccess:()=>{O(),P(!1)}})]})}const Xz=[{value:"AUTONOMO",label:"Autónomo"},{value:"EMPRESA",label:"Empresa"},{value:"PARTICULAR",label:"Particular"}],Jz=[{value:"MENSUAL",label:"Mensual"},{value:"TRIMESTRAL",label:"Trimestral"},{value:"ANUAL",label:"Anual"},{value:"ESPECIAL_FRACCIONADO",label:"Especial Fraccionado"}];function BDe(){const{toast:t}=nr(),[e,n]=x.useState([]),[r,i]=x.useState(!0),[s,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[f,p]=x.useState(null),[h,m]=x.useState(!1),[g,v]=x.useState({code:"",name:"",allowedTypes:[],allowedPeriods:[]});x.useEffect(()=>{y()},[]);const y=async()=>{try{i(!0);const _=await Sj();n(_)}catch(_){t({title:"Error al cargar modelos",description:_.message,variant:"destructive"})}finally{i(!1)}},b=_=>{_?(d(_),v({code:_.code,name:_.name,allowedTypes:_.allowedTypes,allowedPeriods:_.allowedPeriods})):(d(null),v({code:"",name:"",allowedTypes:[],allowedPeriods:[]})),o(!0)},N=()=>{o(!1),d(null),v({code:"",name:"",allowedTypes:[],allowedPeriods:[]})},S=async()=>{try{if(!g.code||!g.name){t({title:"Campos requeridos",description:"El código y el nombre son obligatorios",variant:"destructive"});return}m(!0),u?(await kDe(u.code,{name:g.name,allowedTypes:g.allowedTypes,allowedPeriods:g.allowedPeriods}),t({title:"Modelo actualizado",description:`El modelo ${g.code} se actualizó correctamente`})):(await CDe(g),t({title:"Modelo creado",description:`El modelo ${g.code} se creó correctamente`})),N(),y()}catch(_){t({title:"Error al guardar",description:_.message,variant:"destructive"})}finally{m(!1)}},E=async()=>{if(f)try{await TDe(f.code),t({title:"Modelo eliminado",description:`El modelo ${f.code} se eliminó correctamente`}),c(!1),p(null),y()}catch(_){t({title:"Error al eliminar",description:_.message,variant:"destructive"})}},C=_=>{v(j=>({...j,allowedTypes:j.allowedTypes.includes(_)?j.allowedTypes.filter(P=>P!==_):[...j.allowedTypes,_]}))},T=_=>{v(j=>({...j,allowedPeriods:j.allowedPeriods.includes(_)?j.allowedPeriods.filter(P=>P!==_):[...j.allowedPeriods,_]}))};return r?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Impuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguimiento y planificación fiscal con la misma experiencia consistente que Administración."})]}),a.jsx(Nj,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Modelos Fiscales"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestiona los modelos fiscales disponibles para asignar a clientes"})]}),a.jsxs(re,{onClick:()=>b(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Nuevo Modelo"]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{className:"w-[100px]",children:"Código"}),a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Tipos de Cliente"}),a.jsx($e,{children:"Periodicidades"}),a.jsx($e,{className:"w-[100px]",children:"Estado"}),a.jsx($e,{className:"w-[100px] text-right",children:"Acciones"})]})}),a.jsx(ai,{children:e.length===0?a.jsx(Gt,{children:a.jsxs(Me,{colSpan:6,className:"text-center text-muted-foreground py-8",children:[a.jsx(Qr,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),"No hay modelos fiscales registrados"]})}):e.map(_=>a.jsxs(Gt,{children:[a.jsx(Me,{className:"font-mono font-semibold",children:_.code}),a.jsx(Me,{children:_.name}),a.jsx(Me,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:_.allowedTypes.map(j=>a.jsx(Ge,{variant:"outline",className:"text-xs",children:Xz.find(P=>P.value===j)?.label||j},j))})}),a.jsx(Me,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:_.allowedPeriods.map(j=>a.jsx(Ge,{variant:"secondary",className:"text-xs",children:Jz.find(P=>P.value===j)?.label||j},j))})}),a.jsx(Me,{children:_.isActive?a.jsx(Ge,{variant:"default",className:"bg-green-600",children:"Activo"}):a.jsx(Ge,{variant:"secondary",children:"Inactivo"})}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{variant:"ghost",size:"sm",onClick:()=>b(_),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{p(_),c(!0)},children:a.jsx(ei,{className:"h-4 w-4 text-destructive"})})]})})]},_.code))})]})}),a.jsx(Un,{open:s,onOpenChange:o,children:a.jsxs(zn,{className:"max-w-2xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:u?"Editar Modelo Fiscal":"Nuevo Modelo Fiscal"}),a.jsx(Qn,{children:u?"Modifica los datos del modelo fiscal":"Completa los datos del nuevo modelo fiscal"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"code",children:"Código del Modelo*"}),a.jsx(Ie,{id:"code",placeholder:"Ej: 303, 111, 130",value:g.code,onChange:_=>v({...g,code:_.target.value.toUpperCase()}),disabled:!!u,maxLength:20}),a.jsx("p",{className:"text-xs text-muted-foreground",children:u?"No se puede modificar el código":"Código único del modelo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"name",children:"Nombre del Modelo*"}),a.jsx(Ie,{id:"name",placeholder:"Ej: IVA - Autoliquidación",value:g.name,onChange:_=>v({...g,name:_.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Tipos de Cliente Permitidos"}),a.jsx("div",{className:"flex flex-col gap-2",children:Xz.map(_=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:_.value,checked:g.allowedTypes.includes(_.value),onCheckedChange:()=>C(_.value)}),a.jsx("label",{htmlFor:_.value,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:_.label})]},_.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Periodicidades Permitidas"}),a.jsx("div",{className:"flex flex-col gap-2",children:Jz.map(_=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:_.value,checked:g.allowedPeriods.includes(_.value),onCheckedChange:()=>T(_.value)}),a.jsx("label",{htmlFor:_.value,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:_.label})]},_.value))})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:N,disabled:h,children:"Cancelar"}),a.jsx(re,{onClick:S,disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar"})]})]})}),a.jsx(yc,{open:l,onOpenChange:c,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsxs(Cl,{children:["Esta acción eliminará permanentemente el modelo"," ",a.jsx("strong",{children:f?.code})," - ",f?.name,".",a.jsx("br",{}),a.jsx("br",{}),"No se podrá eliminar si tiene asignaciones activas a clientes."]})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsx(kl,{onClick:E,className:"bg-destructive",children:"Eliminar"})]})]})})]})}const xc=t=>{const e=new URLSearchParams;return t.year&&e.set("year",String(t.year)),t.periodId&&e.set("periodId",t.periodId),t.model&&e.set("model",t.model),t.assigneeId&&e.set("assigneeId",t.assigneeId),t.clientId&&e.set("clientId",t.clientId),t.status&&e.set("status",t.status),t.page&&e.set("page",String(t.page)),t.size&&e.set("size",String(t.size)),t.granularity&&e.set("granularity",t.granularity),e};function $De(t){return At({queryKey:["/api/tax/reports/kpis",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/kpis?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar KPIs");return n.json()},staleTime:3e4})}function XQ(t){return At({queryKey:["/api/tax/reports/summary/model",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/summary/model?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por modelo");return n.json()},staleTime:3e4})}function zDe(t){return At({queryKey:["/api/tax/reports/trends",t],queryFn:async()=>{const e=xc(t);t.granularity&&e.set("granularity",t.granularity);const n=await fetch(`/api/tax/reports/trends?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar tendencias");return n.json()},staleTime:3e4})}function JQ(t){return At({queryKey:["/api/tax/reports/summary/assignee",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/summary/assignee?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por gestor");return n.json()},staleTime:3e4})}function qDe(t){return At({queryKey:["/api/tax/reports/summary/client",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/summary/client?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar resumen por cliente");return n.json()},staleTime:3e4})}function UDe(t){return At({queryKey:["/api/tax/reports/exceptions",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/exceptions?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar alertas");return n.json()},staleTime:3e4})}function HDe(t){return At({queryKey:["/api/tax/reports/filings",t],queryFn:async()=>{const e=xc(t);e.set("page",String(t.page??1)),e.set("size",String(t.size??50));const n=await fetch(`/api/tax/reports/filings?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar detalle");return n.json()},staleTime:3e4})}function VDe(t,e,n){return At({queryKey:["/api/tax/reports/year-comparison",t,e,n],queryFn:async()=>{const r=new URLSearchParams;r.set("year1",String(t)),r.set("year2",String(e)),n.model&&r.set("model",n.model),n.assigneeId&&r.set("assigneeId",n.assigneeId),n.clientId&&r.set("clientId",n.clientId);const i=await fetch(`/api/tax/reports/year-comparison?${r.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!i.ok)throw new Error("No se pudo cargar comparativa");return i.json()},staleTime:3e4})}function WDe(t){return At({queryKey:["/api/tax/reports/productivity",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/productivity?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar análisis de productividad");return n.json()},staleTime:3e4})}function KDe(t){return At({queryKey:["/api/tax/reports/predictions",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/predictions?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar predicciones");return n.json()},staleTime:3e4})}function GDe(t){return At({queryKey:["/api/tax/reports/temporal-performance",t],queryFn:async()=>{const e=xc(t),n=await fetch(`/api/tax/reports/temporal-performance?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudo cargar rendimiento temporal");return n.json()},staleTime:3e4})}function YDe(t){const e=String(t).toUpperCase();return e==="PENDIENTE"||e==="NOT_STARTED"?"bg-red-100 text-red-700":e==="IN_PROGRESS"||e==="CALCULADO"?"bg-amber-100 text-amber-700":e==="PRESENTED"||e==="PRESENTADO"?"bg-emerald-100 text-emerald-700":"bg-muted"}function vy(t){if(!t)return"—";const e=typeof t=="string"?new Date(t):t;return Number.isNaN(e.getTime())?"—":e.toLocaleDateString("es-ES")}function XDe({filters:t}){const[e,n]=x.useState(1),r=50,{data:i,isLoading:s}=HDe({...t,page:e,size:r}),o=i?.total??0,l=i?.items??[],c=Math.max(1,Math.ceil(o/r));return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:[o," resultados"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(re,{variant:"outline",size:"sm",disabled:e<=1,onClick:()=>n(u=>Math.max(1,u-1)),children:"Anterior"}),a.jsxs("div",{className:"text-sm",children:[e,"/",c]}),a.jsx(re,{variant:"outline",size:"sm",disabled:e>=c,onClick:()=>n(u=>Math.min(c,u+1)),children:"Siguiente"})]})]}),a.jsx("div",{className:"rounded-md border overflow-auto",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Modelo"}),a.jsx($e,{children:"Periodo"}),a.jsx($e,{children:"Gestor"}),a.jsx($e,{children:"Cliente"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Fecha cálculo"}),a.jsx($e,{children:"Fecha presentación"}),a.jsx($e,{children:"Días ciclo"})]})}),a.jsx(ai,{children:s?a.jsx(Gt,{children:a.jsx(Me,{colSpan:8,className:"text-center text-muted-foreground",children:"Cargando…"})}):l.length===0?a.jsx(Gt,{children:a.jsx(Me,{colSpan:8,className:"text-center text-muted-foreground",children:"Sin resultados"})}):l.map(u=>a.jsxs(Gt,{className:"cursor-pointer hover:bg-muted/40",onClick:()=>window.location.href="/impuestos/calendario",children:[a.jsx(Me,{className:"font-medium",children:u.modelCode}),a.jsx(Me,{children:u.periodLabel}),a.jsx(Me,{children:u.gestor||"—"}),a.jsx(Me,{children:u.cliente||"—"}),a.jsx(Me,{children:a.jsx(Ge,{className:YDe(u.status),children:String(u.status).toUpperCase()})}),a.jsx(Me,{children:vy(void 0)}),a.jsx(Me,{children:vy(u.presentedAt)}),a.jsx(Me,{children:u.cycleDays??"—"})]},u.id))})]})})]})}function JDe({filters:t}){const e=XQ(t),n=zDe({year:t.year,model:t.model,granularity:"month"}),r=JQ(t),[i,s]=x.useState(null),[o,l]=x.useState(null),c=x.useMemo(()=>(e.data??[]).map(h=>({model:h.modelCode,pendiente:h.pending,calculado:h.inProgress,presentado:h.presented,total:h.total})),[e.data]),u=x.useMemo(()=>(n.data?.series??[]).map(h=>({x:h.x,presentados:h.presented,lead:h.leadTimeAvg})),[n.data]),d=x.useMemo(()=>(r.data??[]).map(h=>({name:h.assigneeName,avance:h.advancePct,total:h.assigned,completed:h.presented})).sort((h,m)=>m.avance-h.avance),[r.data]),f=["#10B981","#3B82F6","#F59E0B","#EF4444","#8B5CF6","#EC4899"],p=({active:h,payload:m,label:g})=>h&&m&&m.length?a.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-semibold mb-2",children:g}),m.map((v,y)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:v.color}}),a.jsxs("span",{children:[v.name,": ",v.value]})]},y))]}):null;return a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Fe,{className:"md:col-span-2",children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Progreso por modelo (Interactivo)"}),a.jsx(Zt,{children:"Haz clic en una barra para ver detalles"}),i&&a.jsxs(Ge,{className:"mt-2",onClick:()=>s(null),children:["Filtrando: ",i," ✕"]})]}),a.jsxs(Be,{className:"h-80",children:[a.jsx(iy,{width:"100%",height:"100%",children:a.jsxs(KO,{data:c,onClick:h=>{h&&h.activeLabel&&s(h.activeLabel===i?null:h.activeLabel)},children:[a.jsx(hm,{strokeDasharray:"3 3"}),a.jsx(ac,{dataKey:"model"}),a.jsx(Lo,{}),a.jsx(wa,{content:a.jsx(p,{})}),a.jsx(uu,{}),a.jsx(oa,{dataKey:"pendiente",stackId:"a",fill:"#EF4444",name:"Pendientes",cursor:"pointer",children:c.map((h,m)=>a.jsx(Ed,{opacity:i===null||i===h.model?1:.3},`cell-${m}`))}),a.jsx(oa,{dataKey:"calculado",stackId:"a",fill:"#EAB308",name:"Calculados",cursor:"pointer",children:c.map((h,m)=>a.jsx(Ed,{opacity:i===null||i===h.model?1:.3},`cell-${m}`))}),a.jsx(oa,{dataKey:"presentado",stackId:"a",fill:"#22C55E",name:"Presentados",cursor:"pointer",children:c.map((h,m)=>a.jsx(Ed,{opacity:i===null||i===h.model?1:.3},`cell-${m}`))})]})}),i&&a.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-md text-sm",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["📊 Detalle de ",i]}),c.filter(h=>h.model===i).map(h=>a.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[a.jsxs("div",{children:["Total: ",a.jsx("strong",{children:h.total})]}),a.jsxs("div",{children:["Presentados: ",a.jsx("strong",{className:"text-emerald-600",children:h.presentado})]}),a.jsxs("div",{children:["Calculados: ",a.jsx("strong",{className:"text-amber-600",children:h.calculado})]}),a.jsxs("div",{children:["Pendientes: ",a.jsx("strong",{className:"text-rose-600",children:h.pendiente})]})]},h.model))]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Tendencia mensual"}),a.jsx(Zt,{children:"Presentaciones y lead time"})]}),a.jsx(Be,{className:"h-80",children:a.jsx(iy,{width:"100%",height:"100%",children:a.jsxs(GEe,{data:u,children:[a.jsx(hm,{strokeDasharray:"3 3"}),a.jsx(ac,{dataKey:"x",angle:-45,textAnchor:"end",height:60}),a.jsx(Lo,{yAxisId:"left"}),a.jsx(Lo,{yAxisId:"right",orientation:"right"}),a.jsx(wa,{content:a.jsx(p,{})}),a.jsx(uu,{}),a.jsx(Nu,{type:"monotone",dataKey:"presentados",stroke:"#2563EB",yAxisId:"left",strokeWidth:2,dot:{r:4},name:"Presentadas"}),a.jsx(Nu,{type:"monotone",dataKey:"lead",stroke:"#9333EA",yAxisId:"right",strokeWidth:2,dot:{r:4},strokeDasharray:"5 5",name:"Lead Time (días)"})]})})})]}),a.jsxs(Fe,{className:"md:col-span-3",children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Ranking de gestores (Interactivo)"}),a.jsx(Zt,{children:"Haz clic en una barra para destacar un gestor"}),o&&a.jsxs(Ge,{className:"mt-2",onClick:()=>l(null),children:["Filtrando: ",o," ✕"]})]}),a.jsxs(Be,{className:"h-80",children:[a.jsx(iy,{width:"100%",height:"100%",children:a.jsxs(KO,{data:d,layout:"vertical",onClick:h=>{h&&h.activeLabel&&l(h.activeLabel===o?null:h.activeLabel)},children:[a.jsx(hm,{strokeDasharray:"3 3"}),a.jsx(ac,{type:"number",domain:[0,100]}),a.jsx(Lo,{type:"category",dataKey:"name",width:150}),a.jsx(wa,{content:a.jsx(p,{})}),a.jsx(oa,{dataKey:"avance",name:"% Avance",cursor:"pointer",children:d.map((h,m)=>a.jsx(Ed,{fill:f[m%f.length],opacity:o===null||o===h.name?1:.3},`cell-${m}`))})]})}),o&&a.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded-md text-sm",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["👤 Detalle de ",o]}),d.filter(h=>h.name===o).map(h=>a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:["Total asignado: ",a.jsx("strong",{children:h.total})]}),a.jsxs("div",{children:["Completadas: ",a.jsx("strong",{className:"text-emerald-600",children:h.completed})]}),a.jsxs("div",{children:["% Avance: ",a.jsxs("strong",{className:"text-blue-600",children:[h.avance.toFixed(1),"%"]})]})]},h.name))]})]})]})]})}function ZDe({data:t,isLoading:e}){const n=t?.duplicateFilings??[],r=t?.latePresented??[],i=t?.overdueFilings??[];return a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Alertas y excepciones"})}),a.jsx(Be,{className:"space-y-4 text-sm text-muted-foreground",children:e?a.jsx("div",{children:"Cargando alertas…"}):a.jsxs(a.Fragment,{children:[a.jsx(qC,{title:"Vencidas sin presentar",emptyLabel:"Sin vencidos",badgeClass:"bg-destructive/10 text-destructive",items:i.map(s=>({id:`${s.clientId}-${s.taxModelCode}-${s.periodId}`,title:`${s.clientName}`,description:`${s.taxModelCode} · Venció ${vy(s.dueDate)}`}))}),a.jsx(qC,{title:"Presentadas fuera de plazo",emptyLabel:"Sin retrasos",badgeClass:"bg-amber-100 text-amber-700",items:r.map(s=>({id:`${s.clientId}-${s.taxModelCode}-${s.periodId}`,title:`${s.clientName}`,description:`${s.taxModelCode} · entregada ${vy(s.presentedAt)} (límite ${vy(s.dueDate)})`}))}),a.jsx(qC,{title:"Duplicados detectados",emptyLabel:"Sin duplicados",badgeClass:"bg-blue-100 text-blue-700",items:n.map(s=>({id:s.key,title:s.key,description:`${s.count} registros`}))})]})})]})}function qC({title:t,items:e,emptyLabel:n,badgeClass:r}){return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-foreground",children:t}),a.jsx(Ge,{className:r,children:e.length})]}),e.length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-2 text-xs",children:n}):a.jsxs("div",{className:"space-y-1",children:[e.slice(0,6).map(i=>a.jsxs("div",{className:"rounded-md border px-3 py-2",children:[a.jsx("div",{className:"font-medium text-foreground",children:i.title}),a.jsx("div",{className:"text-xs",children:i.description})]},i.id)),e.length>6&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",e.length-6," registros adicionales"]})]})]})}function QDe({filters:t}){const{data:e,isLoading:n}=WDe(t);if(n)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Análisis de Productividad por Gestor"}),a.jsx(Zt,{children:"Rendimiento individual y métricas de eficiencia"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando análisis..."})})]});const r=e??[];return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Análisis de Productividad por Gestor"}),a.jsx(Zt,{children:"Rendimiento individual y métricas de eficiencia"})]}),a.jsx(Be,{className:"space-y-4",children:r.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"Sin datos para mostrar"}):r.map(i=>a.jsxs("div",{className:"rounded-lg border p-4 space-y-3 bg-white hover:shadow-sm transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-base",children:i.gestorName}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[i.total," declaraciones asignadas"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-2xl font-bold ${i.efficiencyScore>=80?"text-emerald-600":i.efficiencyScore>=60?"text-amber-600":"text-rose-600"}`,children:i.efficiencyScore}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Score eficiencia"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Completadas"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-lg font-semibold text-emerald-600",children:i.completed}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["/ ",i.total]})]}),a.jsx(pg,{value:i.completionRate,className:"h-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"A tiempo"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-lg font-semibold text-blue-600",children:i.onTime}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.onTimeRate,"%)"]})]}),a.jsx(pg,{value:i.onTimeRate,className:"h-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"En progreso"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-semibold text-amber-600",children:i.inProgress})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pendientes"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-semibold text-slate-600",children:i.pending})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[a.jsxs(Ge,{variant:"outline",className:"text-xs",children:["⏱️ Proc: ",i.avgProcessingTime,"d"]}),a.jsxs(Ge,{variant:"outline",className:"text-xs",children:["📅 Lead: ",i.avgLeadTime,"d"]}),i.overdue>0&&a.jsxs(Ge,{className:"bg-rose-100 text-rose-700 text-xs",children:["🚨 ",i.overdue," atrasadas"]}),i.late>0&&a.jsxs(Ge,{className:"bg-orange-100 text-orange-700 text-xs",children:["⚠️ ",i.late," tarde"]}),i.workloadScore>10&&a.jsxs(Ge,{className:"bg-purple-100 text-purple-700 text-xs",children:["📊 Carga: ",i.workloadScore]})]})]},i.gestorId??"none"))})]})}function eIe({filters:t}){const{data:e,isLoading:n}=KDe(t);if(n)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Alertas Inteligentes y Predicciones"}),a.jsx(Zt,{children:"Sistema de detección temprana de riesgos"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Analizando riesgos..."})})]});const r=e??{atRiskCount:0,criticalCount:0,alerts:[],riskLevel:"low"},i={high:{color:"bg-rose-50 border-rose-200",textColor:"text-rose-900",icon:Dm,label:"Riesgo Alto",badgeClass:"bg-rose-100 text-rose-700"},medium:{color:"bg-amber-50 border-amber-200",textColor:"text-amber-900",icon:qo,label:"Riesgo Medio",badgeClass:"bg-amber-100 text-amber-700"},low:{color:"bg-emerald-50 border-emerald-200",textColor:"text-emerald-900",icon:OP,label:"Riesgo Bajo",badgeClass:"bg-emerald-100 text-emerald-700"}},s=i[r.riskLevel]||i.low,o=s.icon;return a.jsxs(Fe,{className:s.color,children:[a.jsx(Je,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(o,{className:"h-5 w-5"}),"Alertas Inteligentes y Predicciones"]}),a.jsx(Zt,{children:"Sistema de detección temprana de riesgos"})]}),a.jsx(Ge,{className:s.badgeClass,children:s.label})]})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Situaciones críticas"}),a.jsx("div",{className:"text-3xl font-bold text-rose-600 mt-1",children:r.criticalCount}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Requieren atención inmediata"})]}),a.jsxs("div",{className:"rounded-lg border bg-white p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"En riesgo"}),a.jsx("div",{className:"text-3xl font-bold text-amber-600 mt-1",children:r.atRiskCount}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Necesitan seguimiento"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Alertas detectadas"}),r.alerts.length===0?a.jsx("div",{className:"rounded-md border border-dashed bg-white px-4 py-8 text-center text-sm text-muted-foreground",children:"✅ No se detectaron alertas críticas. Todo en orden."}):a.jsxs("div",{className:"space-y-2",children:[r.alerts.map((l,c)=>a.jsx(fu,{className:`${l.type==="critical"?"bg-rose-50 border-rose-200":"bg-amber-50 border-amber-200"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-0.5",children:l.type==="critical"?"🚨":"⚠️"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(hu,{className:"text-sm",children:l.message}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(Ge,{variant:"outline",className:"text-xs",children:l.status}),l.daysRemaining!==void 0&&a.jsx("span",{className:"text-xs text-muted-foreground",children:l.daysRemaining>=0?`${l.daysRemaining} días restantes`:`${Math.abs(l.daysRemaining)} días de retraso`})]})]})]})},c)),r.alerts.length>=10&&a.jsx("div",{className:"text-xs text-center text-muted-foreground",children:"Mostrando las 10 alertas más críticas"})]})]}),r.riskLevel==="high"&&a.jsxs(fu,{className:"bg-rose-50 border-rose-200",children:[a.jsx(Dm,{className:"h-4 w-4 text-rose-600"}),a.jsxs(hu,{className:"text-sm text-rose-900",children:[a.jsx("strong",{children:"Acción requerida:"})," Se detectaron múltiples situaciones críticas. Recomendamos priorizar las declaraciones con vencimiento inmediato y redistribuir la carga de trabajo si es necesario."]})]}),r.riskLevel==="medium"&&a.jsxs(fu,{className:"bg-amber-50 border-amber-200",children:[a.jsx(qo,{className:"h-4 w-4 text-amber-600"}),a.jsxs(hu,{className:"text-sm text-amber-900",children:[a.jsx("strong",{children:"Seguimiento recomendado:"})," Hay declaraciones que requieren atención. Mantén un seguimiento cercano para evitar retrasos."]})]})]})]})}function tIe({currentYear:t,filters:e}){const[n,r]=x.useState(t-1),[i,s]=x.useState(t),{data:o,isLoading:l}=VDe(n,i,e),c=Array.from({length:10},(h,m)=>t-m);if(l)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Comparativa Temporal"}),a.jsx(Zt,{children:"Análisis año contra año"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando comparativa..."})})]});const u=o?.comparison??{},d=o?.year1??{},f=o?.year2??{},p=({label:h,value1:m,value2:g,change:v,changePct:y,format:b=""})=>{const N=v>0,S=v<0,E=v===0,T=h.includes("Lead")||h.includes("Atrasados")?S:N;return a.jsxs("div",{className:"rounded-lg border p-4 bg-white",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:h}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:n}),a.jsxs("div",{className:"text-2xl font-bold text-slate-700",children:[m,b]})]}),a.jsx("div",{className:"flex items-center",children:E?a.jsx(Gk,{className:"h-5 w-5 text-slate-400"}):T?a.jsx(Wd,{className:"h-5 w-5 text-emerald-500"}):a.jsx(lae,{className:"h-5 w-5 text-rose-500"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:i}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[g,b]})]})]}),a.jsx("div",{className:"mt-2 pt-2 border-t",children:a.jsxs(Ge,{className:`text-xs ${E?"bg-slate-100 text-slate-700":T?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:[N&&"+",v,b," (",N&&"+",y,"%)"]})})]})};return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Comparativa Temporal"}),a.jsx(Zt,{children:"Análisis año contra año de rendimiento"}),a.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[a.jsxs(un,{value:String(n),onValueChange:h=>r(Number(h)),children:[a.jsx(sn,{className:"w-32",children:a.jsx(dn,{})}),a.jsx(an,{children:c.map(h=>a.jsx(Ke,{value:String(h),children:h},h))})]}),a.jsx("span",{className:"text-muted-foreground",children:"vs"}),a.jsxs(un,{value:String(i),onValueChange:h=>s(Number(h)),children:[a.jsx(sn,{className:"w-32",children:a.jsx(dn,{})}),a.jsx(an,{children:c.map(h=>a.jsx(Ke,{value:String(h),children:h},h))})]})]})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(p,{label:"Total de declaraciones",value1:d.total,value2:f.total,change:u.totalChange,changePct:u.totalChangePct}),a.jsx(p,{label:"Presentadas",value1:d.presented,value2:f.presented,change:u.presentedChange,changePct:u.presentedChangePct}),a.jsx(p,{label:"Eficiencia",value1:d.efficiencyScore,value2:f.efficiencyScore,change:u.efficiencyChange,changePct:0,format:"%"}),a.jsx(p,{label:"Lead Time promedio",value1:d.leadTimeAvg,value2:f.leadTimeAvg,change:u.leadTimeChange,changePct:0,format:"d"}),a.jsx(p,{label:"Cumplimiento (a tiempo)",value1:d.onTimePct,value2:f.onTimePct,change:u.onTimeChange,changePct:0,format:"%"}),a.jsx(p,{label:"Atrasados",value1:d.overdue,value2:f.overdue,change:f.overdue-d.overdue,changePct:0})]}),a.jsxs("div",{className:"rounded-lg bg-slate-50 p-4 border",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"📊 Resumen de cambios"}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("div",{children:[u.totalChangePct>0?"📈":u.totalChangePct<0?"📉":"➡️"," ","Volumen de trabajo: ",u.totalChangePct>0?"incrementó":u.totalChangePct<0?"disminuyó":"se mantuvo"," ",Math.abs(u.totalChangePct),"%"]}),a.jsxs("div",{children:[u.efficiencyChange>0?"✅":u.efficiencyChange<0?"⚠️":"➡️"," ","Eficiencia: ",u.efficiencyChange>0?"mejoró":u.efficiencyChange<0?"empeoró":"se mantuvo"," ",Math.abs(u.efficiencyChange).toFixed(1)," puntos"]}),a.jsxs("div",{children:[u.leadTimeChange<0?"⚡":u.leadTimeChange>0?"🐌":"➡️"," ","Lead time: ",u.leadTimeChange<0?"mejoró":u.leadTimeChange>0?"empeoró":"se mantuvo"," (",Math.abs(u.leadTimeChange).toFixed(1)," días)"]})]})]})]})]})}function nIe({filters:t}){const{data:e,isLoading:n}=GDe(t);if(n)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Rendimiento Temporal"}),a.jsx(Zt,{children:"Evolución mensual de métricas clave"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando datos temporales..."})})]});const r=e?.series??[];if(r.length===0)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Rendimiento Temporal"}),a.jsx(Zt,{children:"Evolución mensual de métricas clave"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"No hay suficientes datos para mostrar tendencias"})})]});const i=r.reduce((f,p)=>f+p.presented,0)/r.length,s=r.reduce((f,p)=>f+p.onTimeRate,0)/r.length,o=r.reduce((f,p)=>f+p.avgLeadTime,0)/r.length,l=r[r.length-1],c=r[r.length-2],u=c?((l.presented-c.presented)/c.presented*100).toFixed(1):0,d=c?(l.onTimeRate-c.onTimeRate).toFixed(1):0;return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Rendimiento Temporal"}),a.jsx(Zt,{children:"Evolución mensual de métricas clave"})]}),a.jsxs(Be,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"rounded-lg border bg-blue-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Promedio mensual"}),a.jsx("div",{className:"text-2xl font-bold text-blue-700",children:i.toFixed(0)}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"declaraciones"})]}),a.jsxs("div",{className:"rounded-lg border bg-emerald-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Cumplimiento promedio"}),a.jsxs("div",{className:"text-2xl font-bold text-emerald-700",children:[s.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"entregas a tiempo"})]}),a.jsxs("div",{className:"rounded-lg border bg-purple-50 p-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead time promedio"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[o.toFixed(1),"d"]}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"días de ciclo"})]})]}),c&&a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-slate-50 border text-sm",children:[a.jsx("div",{className:"flex-1",children:a.jsx("span",{className:"font-medium",children:"Último mes vs anterior:"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Presentadas:"}),a.jsxs("span",{className:`font-semibold ${Number(u)>=0?"text-emerald-600":"text-rose-600"}`,children:[Number(u)>=0?"+":"",u,"%"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Cumplimiento:"}),a.jsxs("span",{className:`font-semibold ${Number(d)>=0?"text-emerald-600":"text-rose-600"}`,children:[Number(d)>=0?"+":"",d,"%"]})]})]}),a.jsx("div",{className:"h-80",children:a.jsx(iy,{width:"100%",height:"100%",children:a.jsxs(YEe,{data:r,children:[a.jsx(hm,{strokeDasharray:"3 3"}),a.jsx(ac,{dataKey:"month",angle:-45,textAnchor:"end",height:80}),a.jsx(Lo,{yAxisId:"left"}),a.jsx(Lo,{yAxisId:"right",orientation:"right"}),a.jsx(wa,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"},labelStyle:{fontWeight:"bold"}}),a.jsx(uu,{}),a.jsx(oa,{yAxisId:"left",dataKey:"presented",fill:"#3B82F6",name:"Presentadas"}),a.jsx(oa,{yAxisId:"left",dataKey:"onTime",fill:"#10B981",name:"A tiempo",stackId:"status"}),a.jsx(oa,{yAxisId:"left",dataKey:"late",fill:"#F59E0B",name:"Tarde",stackId:"status"}),a.jsx(Nu,{yAxisId:"right",type:"monotone",dataKey:"avgLeadTime",stroke:"#9333EA",strokeWidth:2,name:"Lead Time (días)",dot:{r:4}}),a.jsx(Nu,{yAxisId:"right",type:"monotone",dataKey:"onTimeRate",stroke:"#059669",strokeWidth:2,strokeDasharray:"5 5",name:"% Cumplimiento",dot:{r:4}})]})})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"📈 Mejor mes"}),(()=>{const f=r.reduce((p,h)=>h.onTimeRate>p.onTimeRate?h:p,r[0]);return a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("div",{className:"font-medium text-foreground",children:f.month}),a.jsxs("div",{children:[f.presented," declaraciones"]}),a.jsxs("div",{className:"text-emerald-600",children:[f.onTimeRate,"% a tiempo"]})]})})()]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"⚠️ Mes con más desafíos"}),(()=>{const f=r.reduce((p,h)=>h.onTimeRate<p.onTimeRate?h:p,r[0]);return a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("div",{className:"font-medium text-foreground",children:f.month}),a.jsxs("div",{children:[f.presented," declaraciones"]}),a.jsxs("div",{className:"text-amber-600",children:[f.onTimeRate,"% a tiempo"]})]})})()]})]})]})]})}function rIe(t){return At({queryKey:["/api/tax/reports/goals",t],queryFn:async()=>{const e=new URLSearchParams;t.year&&e.set("year",String(t.year)),t.model&&e.set("model",t.model),t.assigneeId&&e.set("assigneeId",t.assigneeId);const n=await fetch(`/api/tax/reports/goals?${e.toString()}`,{credentials:"include",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("No se pudieron cargar las metas");return n.json()},staleTime:3e4})}function iIe({filters:t}){const{data:e,isLoading:n}=rIe(t);if(n)return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(o4,{className:"h-5 w-5"}),"Metas y Objetivos"]}),a.jsx(Zt,{children:"Seguimiento de objetivos del periodo"})]}),a.jsx(Be,{children:a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando metas..."})})]});const r=e??[],i=r.filter(d=>d.achieved).length,s=r.length,o=s>0?i/s*100:0,l={achieved:{icon:ml,color:"text-emerald-600",bg:"bg-emerald-50",badge:"bg-emerald-100 text-emerald-700",label:"Lograda"},"on-track":{icon:Wd,color:"text-blue-600",bg:"bg-blue-50",badge:"bg-blue-100 text-blue-700",label:"En camino"},"at-risk":{icon:Dm,color:"text-amber-600",bg:"bg-amber-50",badge:"bg-amber-100 text-amber-700",label:"En riesgo"},"off-track":{icon:gl,color:"text-rose-600",bg:"bg-rose-50",badge:"bg-rose-100 text-rose-700",label:"Fuera de meta"}},c=d=>({efficiency:"Eficiencia",completion:"Completitud",onTime:"Cumplimiento",leadTime:"Lead Time",volume:"Volumen"})[d]||d,u=d=>({efficiency:"%",completion:"%",onTime:"%",leadTime:"d",volume:""})[d]||"";return a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(o4,{className:"h-5 w-5"}),"Metas y Objetivos"]}),a.jsx(Zt,{children:"Seguimiento de objetivos del periodo"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[i,"/",s]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Metas logradas"})]})]})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border p-4 bg-slate-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Logro General"}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[o.toFixed(0),"%"]})]}),a.jsx(pg,{value:o,className:"h-3"})]}),r.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground border border-dashed rounded-md",children:"No hay metas definidas para este periodo"}):a.jsx("div",{className:"space-y-3",children:r.map((d,f)=>{const p=l[d.status]||l["off-track"],h=p.icon,m=d.type==="leadTime";return a.jsxs("div",{className:`rounded-lg border p-4 ${p.bg} transition-all hover:shadow-sm`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(h,{className:`h-5 w-5 mt-0.5 ${p.color}`}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-foreground",children:c(d.type)}),d.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:d.description})]})]}),a.jsx(Ge,{className:p.badge,children:p.label})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Actual"}),a.jsxs("div",{className:"text-lg font-bold",children:[d.currentValue,u(d.type)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Meta"}),a.jsxs("div",{className:"text-lg font-bold",children:[m?"≤":"≥"," ",d.targetValue,u(d.type)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Progreso"}),a.jsxs("div",{className:"text-lg font-bold",children:[d.progress,"%"]})]})]}),a.jsx(pg,{value:d.progress,className:"h-2"}),a.jsx("div",{className:"mt-3 text-xs text-muted-foreground",children:d.achieved?a.jsx("span",{className:"text-emerald-700 font-medium",children:"✓ Meta alcanzada exitosamente"}):d.status==="on-track"?a.jsxs("span",{className:"text-blue-700 font-medium",children:["→ Vas bien, faltan ",m?`${(d.currentValue-d.targetValue).toFixed(1)}${u(d.type)} por reducir`:`${(d.targetValue-d.currentValue).toFixed(1)}${u(d.type)} para alcanzar la meta`]}):d.status==="at-risk"?a.jsx("span",{className:"text-amber-700 font-medium",children:"⚠ Requiere atención para alcanzar la meta"}):a.jsx("span",{className:"text-rose-700 font-medium",children:"✗ Lejos de la meta, se requiere acción correctiva"})})]},f)})}),r.length>0&&a.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-4 border-t",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:r.filter(d=>d.status==="achieved").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Logradas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.filter(d=>d.status==="on-track").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"En camino"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:r.filter(d=>d.status==="at-risk").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"En riesgo"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-rose-600",children:r.filter(d=>d.status==="off-track").length}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fuera meta"})]})]})]})]})}function sIe(){const t=new Date().getFullYear(),[e,n]=x.useState({year:t});x.useEffect(()=>{const p=localStorage.getItem("reports.filters");if(p)try{const h=JSON.parse(p);h?.year&&n(h)}catch{}},[]),x.useEffect(()=>{localStorage.setItem("reports.filters",JSON.stringify(e))},[e]);const r=$De(e),i=XQ(e),s=qDe(e),o=JQ(e),l=UDe(e),{data:c=[]}=At({queryKey:["/api/tax-models"],queryFn:Sj}),u=x.useMemo(()=>{const p=c.map(g=>({code:g.code,name:g.name})),h=Object.entries(cj).map(([g,v])=>({code:g,name:v.name})),m=new Map;return h.forEach(g=>m.set(g.code,g)),p.forEach(g=>m.set(g.code,g)),Array.from(m.values()).sort((g,v)=>g.code.localeCompare(v.code))},[c]),d=x.useMemo(()=>(o.data??[]).filter(h=>h.assigneeId||h.assigneeName).map(h=>({id:h.assigneeId??"none",name:h.assigneeName??"Sin asignar"})),[o.data]),f=x.useMemo(()=>{const p=new URLSearchParams;return p.set("year",String(e.year)),e.model&&p.set("model",e.model),e.status&&p.set("status",e.status),e.assigneeId&&p.set("assigneeId",e.assigneeId),`/api/tax/reports/export?${p.toString()}`},[e]);return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Reportes de Impuestos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Analiza el avance y los riesgos fiscales"})]}),a.jsx(Nj,{}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{className:"text-base",children:"Filtros"}),a.jsx(Zt,{children:"Define el alcance del informe"})]}),a.jsxs(Be,{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Año"}),a.jsx(Ie,{className:"w-24 h-9",type:"number",min:2e3,value:e.year,onChange:p=>n(h=>({...h,year:Number(p.target.value)}))})]}),a.jsxs(un,{value:e.model??"ALL",onValueChange:p=>n(h=>({...h,model:p==="ALL"?void 0:p})),children:[a.jsx(sn,{className:"w-56 h-9",children:a.jsx(dn,{placeholder:"Modelo"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ALL",children:"Todos"}),u.map(p=>a.jsxs(Ke,{value:p.code,children:[p.code," · ",p.name]},p.code))]})]}),a.jsxs(un,{value:e.status??"ALL",onValueChange:p=>n(h=>({...h,status:p==="ALL"?void 0:p})),children:[a.jsx(sn,{className:"w-44 h-9",children:a.jsx(dn,{placeholder:"Estado"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ALL",children:"Todos"}),a.jsx(Ke,{value:"PENDIENTE",children:"Pendiente"}),a.jsx(Ke,{value:"IN_PROGRESS",children:"Calculado"}),a.jsx(Ke,{value:"PRESENTED",children:"Presentado"})]})]}),a.jsxs(un,{value:e.assigneeId??"ALL",onValueChange:p=>n(h=>({...h,assigneeId:p==="ALL"?void 0:p})),children:[a.jsx(sn,{className:"w-56 h-9",children:a.jsx(dn,{placeholder:"Gestor"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ALL",children:"Todos los gestores"}),d.map(p=>a.jsx(Ke,{value:p.id,children:p.name},p.id))]})]}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsx(re,{variant:"outline",onClick:()=>n({year:t}),children:"Limpiar"}),a.jsx(re,{variant:"outline",onClick:()=>window.open(f,"_blank"),children:"📄 CSV"}),a.jsx(re,{variant:"default",onClick:()=>{const p=new URLSearchParams;p.set("year",String(e.year)),e.model&&p.set("model",e.model),e.status&&p.set("status",e.status),e.assigneeId&&p.set("assigneeId",e.assigneeId),window.open(`/api/tax/reports/export-excel?${p.toString()}`,"_blank")},children:"📊 Excel Avanzado"})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[a.jsx(Fe,{className:"bg-gradient-to-br from-red-50 to-red-100",children:a.jsx(Be,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pendientes"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.pending??0})]}),a.jsx("div",{className:"text-red-500 text-4xl",children:"⏳"})]})})}),a.jsx(Fe,{className:"bg-gradient-to-br from-amber-50 to-amber-100",children:a.jsx(Be,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Calculados"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.inProgress??0})]}),a.jsx("div",{className:"text-amber-500 text-4xl",children:"⚙️"})]})})}),a.jsx(Fe,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100",children:a.jsx(Be,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Presentados"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.presented??0})]}),a.jsx("div",{className:"text-emerald-500 text-4xl",children:"✅"})]})})}),a.jsx(Fe,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsx(Be,{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"}),a.jsx("div",{className:"text-3xl font-display font-bold",children:r.data?.total??0})]}),a.jsx("div",{className:"text-slate-500 text-4xl",children:"📊"})]})})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 xl:grid-cols-6",children:[a.jsx(Pp,{title:"% Completado",value:`${r.data?.completionRate??0}%`,color:"bg-blue-50",subtitle:`${r.data?.workload??0} en curso`}),a.jsx(Pp,{title:"Score de Eficiencia",value:`${r.data?.efficiencyScore??0}%`,color:"bg-purple-50",subtitle:"Calidad global"}),a.jsx(Pp,{title:"Cumplimiento",value:`${r.data?.onTimePct??0}%`,color:"bg-green-50",subtitle:`${r.data?.onTimeFilings??0} a tiempo`}),a.jsx(Pp,{title:"Lead Time",value:`${r.data?.leadTimeAvg??0}d`,color:"bg-indigo-50",subtitle:"Tiempo medio"}),a.jsx(Pp,{title:"Procesamiento",value:`${r.data?.processingTimeAvg??0}d`,color:"bg-cyan-50",subtitle:"Tiempo medio"}),a.jsx(Pp,{title:"Atrasadas",value:r.data?.lateFilings??0,color:"bg-orange-50",subtitle:"Fuera de plazo"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsx(Fe,{className:"bg-rose-50 border-rose-200",children:a.jsx(Be,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-rose-700",children:"🚨 Atrasados"}),a.jsx("div",{className:"text-2xl font-bold text-rose-900",children:r.data?.overdue??0})]})})})}),a.jsx(Fe,{className:"bg-orange-50 border-orange-200",children:a.jsx(Be,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-orange-700",children:"⚠️ Vencen en ≤3 días"}),a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:r.data?.dueIn3??0})]})})})}),a.jsx(Fe,{className:"bg-amber-50 border-amber-200",children:a.jsx(Be,{className:"py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-medium text-amber-700",children:"⏰ Vencen en ≤7 días"}),a.jsx("div",{className:"text-2xl font-bold text-amber-900",children:r.data?.dueIn7??0})]})})})})]}),a.jsx(JDe,{filters:e}),a.jsx(iIe,{filters:e}),a.jsx(eIe,{filters:e}),a.jsx(QDe,{filters:e}),a.jsx(tIe,{currentYear:t,filters:{model:e.model,assigneeId:e.assigneeId}}),a.jsx(nIe,{filters:e}),a.jsxs("div",{className:"grid gap-4 xl:grid-cols-3",children:[a.jsx(aIe,{data:s.data??[],isLoading:s.isLoading}),a.jsxs(Fe,{className:"xl:col-span-2",children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Desglose por modelo"}),a.jsx(Zt,{children:"Seguimiento del estado por modelo AEAT"})]}),a.jsx(Be,{className:"space-y-2 text-sm",children:(i.data??[]).length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-6 text-center text-muted-foreground",children:"Sin datos para los filtros seleccionados"}):(i.data??[]).map(p=>a.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-foreground",children:p.modelCode}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total ",p.total]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsxs(Ge,{className:"bg-red-100 text-red-700",children:["P ",p.pending]}),a.jsxs(Ge,{className:"bg-amber-100 text-amber-700",children:["C ",p.inProgress]}),a.jsxs(Ge,{className:"bg-emerald-100 text-emerald-700",children:["PR ",p.presented]}),a.jsxs(Ge,{className:"bg-orange-100 text-orange-700",children:["AT ",p.overdue]}),a.jsxs("span",{className:"text-muted-foreground",children:["Avance ",p.advancePct,"%"]})]})]},p.modelCode))})]})]}),a.jsx(ZDe,{data:l.data,isLoading:l.isLoading}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Detalle de presentaciones"}),a.jsx(Zt,{children:"Listado paginado de declaraciones"})]}),a.jsx(Be,{children:a.jsx(XDe,{filters:e})})]})]})}function Pp({title:t,value:e,color:n,subtitle:r}){return a.jsx(Fe,{className:`${n}`,children:a.jsxs(Be,{className:"py-4",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:t}),a.jsx("div",{className:"text-2xl font-display font-bold",children:e}),r&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r})]})})}function aIe({data:t,isLoading:e}){return a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Clientes prioritarios"}),a.jsx(Zt,{children:"Clientes con más modelos activos"})]}),a.jsx(Be,{className:"space-y-2 text-sm",children:e?a.jsx("div",{children:"Cargando…"}):t.length===0?a.jsx("div",{className:"rounded-md border border-dashed px-3 py-4 text-center text-muted-foreground",children:"Sin clientes en los filtros actuales"}):t.slice().sort((n,r)=>(r.overdue??0)-(n.overdue??0)||r.modelsActive-n.modelsActive).slice(0,6).map(n=>a.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-foreground",children:n.clientName}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.modelsActive," modelo(s) · avance ",Math.round(n.advancePct??0),"%"]})]}),a.jsxs(Ge,{className:n.overdue?"bg-destructive/10 text-destructive":"bg-emerald-100 text-emerald-700",children:[n.overdue??0," atrasos"]})]},n.clientId))})]})}function oIe(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var aD="ScrollArea",[ZQ]=Ts(aD),[lIe,Yo]=ZQ(aD),QQ=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[l,c]=x.useState(null),[u,d]=x.useState(null),[f,p]=x.useState(null),[h,m]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState(0),[N,S]=x.useState(0),[E,C]=x.useState(!1),[T,_]=x.useState(!1),j=Tn(e,k=>c(k)),P=Qh(i);return a.jsx(lIe,{scope:n,type:r,dir:P,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:p,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:E,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:T,onScrollbarYEnabledChange:_,onCornerWidthChange:b,onCornerHeightChange:S,children:a.jsx(Ot.div,{dir:P,...o,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});QQ.displayName=aD;var eee="ScrollAreaViewport",tee=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,o=Yo(eee,n),l=x.useRef(null),c=Tn(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),a.jsx(Ot.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});tee.displayName=eee;var bc="ScrollAreaScrollbar",oD=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Yo(bc,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return x.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?a.jsx(cIe,{...r,ref:e,forceMount:n}):i.type==="scroll"?a.jsx(uIe,{...r,ref:e,forceMount:n}):i.type==="auto"?a.jsx(nee,{...r,ref:e,forceMount:n}):i.type==="always"?a.jsx(lD,{...r,ref:e}):null});oD.displayName=bc;var cIe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Yo(bc,t.__scopeScrollArea),[s,o]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),a.jsx(Ca,{present:n||s,children:a.jsx(nee,{"data-state":s?"visible":"hidden",...r,ref:e})})}),uIe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Yo(bc,t.__scopeScrollArea),s=t.orientation==="horizontal",o=_j(()=>c("SCROLL_END"),100),[l,c]=oIe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),x.useEffect(()=>{const u=i.viewport,d=s?"scrollLeft":"scrollTop";if(u){let f=u[d];const p=()=>{const h=u[d];f!==h&&(c("SCROLL"),o()),f=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[i.viewport,s,c,o]),a.jsx(Ca,{present:n||l!=="hidden",children:a.jsx(lD,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:vt(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:vt(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),nee=x.forwardRef((t,e)=>{const n=Yo(bc,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=x.useState(!1),l=t.orientation==="horizontal",c=_j(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return xg(n.viewport,c),xg(n.content,c),a.jsx(Ca,{present:r||s,children:a.jsx(lD,{"data-state":s?"visible":"hidden",...i,ref:e})})}),lD=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=Yo(bc,t.__scopeScrollArea),s=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=oee(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,h){return gIe(p,o.current,l,h)}return n==="horizontal"?a.jsx(dIe,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,h=Zz(p,l,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=f(p,i.dir))}}):n==="vertical"?a.jsx(fIe,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,h=Zz(p,l);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=f(p))}}):null}),dIe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Yo(bc,t.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=Tn(e,c,s.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(iee,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":jj(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),cee(p,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Qw(o.paddingLeft),paddingEnd:Qw(o.paddingRight)}})}})}),fIe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Yo(bc,t.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=Tn(e,c,s.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(iee,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":jj(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),cee(p,f)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Qw(o.paddingTop),paddingEnd:Qw(o.paddingBottom)}})}})}),[hIe,ree]=ZQ(bc),iee=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...p}=t,h=Yo(bc,n),[m,g]=x.useState(null),v=Tn(e,j=>g(j)),y=x.useRef(null),b=x.useRef(""),N=h.viewport,S=r.content-r.viewport,E=Za(d),C=Za(c),T=_j(f,10);function _(j){if(y.current){const P=j.clientX-y.current.left,k=j.clientY-y.current.top;u({x:P,y:k})}}return x.useEffect(()=>{const j=P=>{const k=P.target;m?.contains(k)&&E(P,S)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[N,m,S,E]),x.useEffect(C,[r,C]),xg(m,T),xg(h.content,T),a.jsx(hIe,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:Za(s),onThumbPointerUp:Za(o),onThumbPositionChange:C,onThumbPointerDown:Za(l),children:a.jsx(Ot.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:vt(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),y.current=m.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),_(j))}),onPointerMove:vt(t.onPointerMove,_),onPointerUp:vt(t.onPointerUp,j=>{const P=j.target;P.hasPointerCapture(j.pointerId)&&P.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),y.current=null})})})}),Zw="ScrollAreaThumb",see=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ree(Zw,t.__scopeScrollArea);return a.jsx(Ca,{present:n||i.hasThumb,children:a.jsx(pIe,{ref:e,...r})})}),pIe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=Yo(Zw,n),o=ree(Zw,n),{onThumbPositionChange:l}=o,c=Tn(e,f=>o.onThumbChange(f)),u=x.useRef(void 0),d=_j(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=s.viewport;if(f){const p=()=>{if(d(),!u.current){const h=vIe(f,l);u.current=h,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[s.viewport,d,l]),a.jsx(Ot.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:vt(t.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),m=f.clientX-h.left,g=f.clientY-h.top;o.onThumbPointerDown({x:m,y:g})}),onPointerUp:vt(t.onPointerUp,o.onThumbPointerUp)})});see.displayName=Zw;var cD="ScrollAreaCorner",aee=x.forwardRef((t,e)=>{const n=Yo(cD,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(mIe,{...t,ref:e}):null});aee.displayName=cD;var mIe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=Yo(cD,n),[s,o]=x.useState(0),[l,c]=x.useState(0),u=!!(s&&l);return xg(i.scrollbarX,()=>{const d=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(d),c(d)}),xg(i.scrollbarY,()=>{const d=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(d),o(d)}),u?a.jsx(Ot.div,{...r,ref:e,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Qw(t){return t?parseInt(t,10):0}function oee(t,e){const n=t/e;return isNaN(n)?0:n}function jj(t){const e=oee(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function gIe(t,e,n,r="ltr"){const i=jj(n),s=i/2,o=e||s,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return lee([c,u],f)(t)}function Zz(t,e,n="ltr"){const r=jj(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=bx(t,c);return lee([0,o],[0,l])(u)}function lee(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function cee(t,e){return t>0&&t<e}var vIe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&e(),n=s,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function _j(t,e){const n=Za(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function xg(t,e){const n=Za(e);qs(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var uee=QQ,yIe=tee,xIe=aee;const uD=x.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(uee,{ref:r,className:Xe("relative overflow-hidden",t),...n,children:[a.jsx(yIe,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(dee,{}),a.jsx(xIe,{})]}));uD.displayName=uee.displayName;const dee=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(oD,{ref:r,orientation:e,className:Xe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(see,{className:"relative flex-1 rounded-full bg-border"})}));dee.displayName=oD.displayName;function bIe({htmlContent:t}){const[e,n]=x.useState([]),[r,i]=x.useState("");x.useEffect(()=>{const c=new DOMParser().parseFromString(t,"text/html").querySelectorAll("h1, h2, h3, h4, h5, h6"),u=[];c.forEach((f,p)=>{const h=parseInt(f.tagName.substring(1)),m=f.textContent||"";let g=f.id;g||(g=`heading-${p}-${m.toLowerCase().replace(/\s+/g,"-").slice(0,30)}`,f.id=g),u.push({id:g,text:m,level:h})}),n(u);const d=new IntersectionObserver(f=>{f.forEach(p=>{p.isIntersecting&&i(p.target.id)})},{rootMargin:"-20% 0px -35% 0px"});return c.forEach(f=>d.observe(f)),()=>d.disconnect()},[t]);const s=o=>{const l=document.getElementById(o);l&&l.scrollIntoView({behavior:"smooth",block:"start"})};return e.length===0?null:a.jsxs(Fe,{className:"sticky top-4",children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(MP,{className:"h-4 w-4"}),"Tabla de Contenidos"]})}),a.jsx(Be,{children:a.jsx(uD,{className:"h-[400px] pr-4",children:a.jsx("div",{className:"space-y-1",children:e.map(o=>a.jsx("button",{onClick:()=>s(o.id),className:`
                  w-full text-left text-sm py-1 px-2 rounded transition-colors
                  ${o.level===1?"font-semibold":""}
                  ${o.level===2?"pl-4":""}
                  ${o.level===3?"pl-8":""}
                  ${o.level>=4?"pl-12":""}
                  ${r===o.id?"bg-primary text-primary-foreground":"hover-elevate text-muted-foreground hover:text-foreground"}
                `,"data-testid":`toc-item-${o.id}`,children:o.text},o.id))})})})]})}const wIe="modulepreload",NIe=function(t){return"/"+t},Qz={},UC=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=c(n.map(u=>{if(u=NIe(u),u in Qz)return;Qz[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":wIe,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Sr(t){"@babel/helpers - typeof";return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(t)}var Sl=Uint8Array,ro=Uint16Array,dD=Int32Array,fD=new Sl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hD=new Sl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),e7=new Sl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fee=function(t,e){for(var n=new ro(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new dD(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},hee=fee(fD,2),SIe=hee.b,w5=hee.r;SIe[28]=258,w5[258]=28;var jIe=fee(hD,0),t7=jIe.r,N5=new ro(32768);for(var Wr=0;Wr<32768;++Wr){var Qu=(Wr&43690)>>1|(Wr&21845)<<1;Qu=(Qu&52428)>>2|(Qu&13107)<<2,Qu=(Qu&61680)>>4|(Qu&3855)<<4,N5[Wr]=((Qu&65280)>>8|(Qu&255)<<8)>>1}var yy=(function(t,e,n){for(var r=t.length,i=0,s=new ro(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new ro(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(n){l=new ro(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],f=o[t[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)l[N5[f]>>c]=u}else for(l=new ro(r),i=0;i<r;++i)t[i]&&(l[i]=N5[o[t[i]-1]++]>>15-t[i]);return l}),qh=new Sl(288);for(var Wr=0;Wr<144;++Wr)qh[Wr]=8;for(var Wr=144;Wr<256;++Wr)qh[Wr]=9;for(var Wr=256;Wr<280;++Wr)qh[Wr]=7;for(var Wr=280;Wr<288;++Wr)qh[Wr]=8;var eN=new Sl(32);for(var Wr=0;Wr<32;++Wr)eN[Wr]=5;var _Ie=yy(qh,9,0),EIe=yy(eN,5,0),pee=function(t){return(t+7)/8|0},AIe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Sl(t.subarray(e,n))},$c=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Lv=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},HC=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:gee,l:0};if(i==1){var o=new Sl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(E,C){return E.f-C.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=n[n[u].f<n[f].f?u++:f++],c=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:l.f+c.f,l,r:c};for(var p=s[0].s,r=1;r<i;++r)s[r].s>p&&(p=s[r].s);var h=new ro(p+1),m=S5(n[d-1],h,0);if(m>e){var r=0,g=0,v=m-e,y=1<<v;for(s.sort(function(C,T){return h[T.s]-h[C.s]||C.f-T.f});r<i;++r){var b=s[r].s;if(h[b]>e)g+=y-(1<<m-h[b]),h[b]=e;else break}for(g>>=v;g>0;){var N=s[r].s;h[N]<e?g-=1<<e-h[N]++-1:++r}for(;r>=0&&g;--r){var S=s[r].s;h[S]==e&&(--h[S],++g)}m=e}return{t:new Sl(h),l:m}},S5=function(t,e,n){return t.s==-1?Math.max(S5(t.l,e,n+1),S5(t.r,e,n+1)):e[t.s]=n},n7=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ro(++e),r=0,i=t[0],s=1,o=function(c){n[r++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[l]}return{c:n.subarray(0,r),n:e}},Fv=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},mee=function(t,e,n){var r=n.length,i=pee(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},r7=function(t,e,n,r,i,s,o,l,c,u,d){$c(e,d++,n),++i[256];for(var f=HC(i,15),p=f.t,h=f.l,m=HC(s,15),g=m.t,v=m.l,y=n7(p),b=y.c,N=y.n,S=n7(g),E=S.c,C=S.n,T=new ro(19),_=0;_<b.length;++_)++T[b[_]&31];for(var _=0;_<E.length;++_)++T[E[_]&31];for(var j=HC(T,7),P=j.t,k=j.l,O=19;O>4&&!P[e7[O-1]];--O);var M=u+5<<3,I=Fv(i,qh)+Fv(s,eN)+o,B=Fv(i,p)+Fv(s,g)+o+14+3*O+Fv(T,P)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&M<=I&&M<=B)return mee(e,d,t.subarray(c,c+u));var U,D,z,H;if($c(e,d,1+(B<I)),d+=2,B<I){U=yy(p,h,0),D=p,z=yy(g,v,0),H=g;var ee=yy(P,k,0);$c(e,d,N-257),$c(e,d+5,C-1),$c(e,d+10,O-4),d+=14;for(var _=0;_<O;++_)$c(e,d+3*_,P[e7[_]]);d+=3*O;for(var ae=[b,E],F=0;F<2;++F)for(var q=ae[F],_=0;_<q.length;++_){var Z=q[_]&31;$c(e,d,ee[Z]),d+=P[Z],Z>15&&($c(e,d,q[_]>>5&127),d+=q[_]>>12)}}else U=_Ie,D=qh,z=EIe,H=eN;for(var _=0;_<l;++_){var te=r[_];if(te>255){var Z=te>>18&31;Lv(e,d,U[Z+257]),d+=D[Z+257],Z>7&&($c(e,d,te>>23&31),d+=fD[Z]);var ce=te&31;Lv(e,d,z[ce]),d+=H[ce],ce>3&&(Lv(e,d,te>>5&8191),d+=hD[ce])}else Lv(e,d,U[te]),d+=D[te]}return Lv(e,d,U[256]),d+D[256]},CIe=new dD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gee=new Sl(0),kIe=function(t,e,n,r,i,s){var o=s.z||t.length,l=new Sl(r+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(r,l.length-i),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=CIe[e-1],p=f>>13,h=f&8191,m=(1<<n)-1,g=s.p||new ro(32768),v=s.h||new ro(m+1),y=Math.ceil(n/3),b=2*y,N=function(W){return(t[W]^t[W+1]<<y^t[W+2]<<b)&m},S=new dD(25e3),E=new ro(288),C=new ro(32),T=0,_=0,j=s.i||0,P=0,k=s.w||0,O=0;j+2<o;++j){var M=N(j),I=j&32767,B=v[M];if(g[I]=B,v[M]=I,k<=j){var U=o-j;if((T>7e3||P>24576)&&(U>423||!u)){d=r7(t,c,0,S,E,C,_,P,O,j-O,d),P=T=_=0,O=j;for(var D=0;D<286;++D)E[D]=0;for(var D=0;D<30;++D)C[D]=0}var z=2,H=0,ee=h,ae=I-B&32767;if(U>2&&M==N(j-ae))for(var F=Math.min(p,U)-1,q=Math.min(32767,j),Z=Math.min(258,U);ae<=q&&--ee&&I!=B;){if(t[j+z]==t[j+z-ae]){for(var te=0;te<Z&&t[j+te]==t[j+te-ae];++te);if(te>z){if(z=te,H=ae,te>F)break;for(var ce=Math.min(ae,te-2),ue=0,D=0;D<ce;++D){var ve=j-ae+D&32767,oe=g[ve],pe=ve-oe&32767;pe>ue&&(ue=pe,B=ve)}}}I=B,B=g[I],ae+=I-B&32767}if(H){S[P++]=268435456|w5[z]<<18|t7[H];var xe=w5[z]&31,X=t7[H]&31;_+=fD[xe]+hD[X],++E[257+xe],++C[X],k=j+z,++T}else S[P++]=t[j],++E[t[j]]}}for(j=Math.max(j,k);j<o;++j)S[P++]=t[j],++E[t[j]];d=r7(t,c,u,S,E,C,_,P,O,j-O,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=v,s.p=g,s.i=j,s.w=k)}else{for(var j=s.w||0;j<o+u;j+=65535){var Se=j+65535;Se>=o&&(c[d/8|0]=u,Se=o),d=mee(c,d+1,t.subarray(j,Se))}s.i=o}return AIe(l,0,r+pee(d)+i)},vee=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},TIe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Sl(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return kIe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},yee=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},OIe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=vee();i.p(e.dictionary),yee(t,2,i.d())}};function j5(t,e){e||(e={});var n=vee();n.p(t);var r=TIe(t,e,e.dictionary?6:2,4);return OIe(r,e),yee(r,r.length-4,n.d()),r}var PIe=typeof TextDecoder<"u"&&new TextDecoder,MIe=0;try{PIe.decode(gee,{stream:!0}),MIe=1}catch{}function RIe(t){if(Array.isArray(t))return t}function DIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function i7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function IIe(t,e){if(t){if(typeof t=="string")return i7(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i7(t,e):void 0}}function LIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s7(t,e){return RIe(t)||DIe(t,e)||IIe(t,e)||LIe()}function a7(t,e="utf8"){return new TextDecoder(e).decode(t)}const FIe=new TextEncoder;function BIe(t){return FIe.encode(t)}const $Ie=1024*8,zIe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),VC={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class pD{constructor(e=$Ie,n={}){br(this,"buffer");br(this,"byteLength");br(this,"byteOffset");br(this,"length");br(this,"offset");br(this,"lastWrittenByte");br(this,"littleEndian");br(this,"_data");br(this,"_mark");br(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof pD)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=VC[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===zIe&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+r));l.reverse();const c=new VC[n](l.buffer);return this.offset+=r,c.reverse(),c}const o=new VC[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return a7(this.readBytes(e))}decodeText(e=1,n="utf8"){return a7(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(BIe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Kg(t){let e=t.length;for(;--e>=0;)t[e]=0}const qIe=3,UIe=258,xee=29,HIe=256,VIe=HIe+1+xee,bee=30,WIe=512,KIe=new Array((VIe+2)*2);Kg(KIe);const GIe=new Array(bee*2);Kg(GIe);const YIe=new Array(WIe);Kg(YIe);const XIe=new Array(UIe-qIe+1);Kg(XIe);const JIe=new Array(xee);Kg(JIe);const ZIe=new Array(bee);Kg(ZIe);const QIe=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var _5=QIe;const e4e=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},t4e=new Uint32Array(e4e()),n4e=(t,e,n,r)=>{const i=t4e,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var Bl=n4e,E5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const r4e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i4e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)r4e(n,r)&&(t[r]=n[r])}}return t},s4e=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},Nee={assign:i4e,flattenChunks:s4e};let See=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{See=!1}const Tx=new Uint8Array(256);for(let t=0;t<256;t++)Tx[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Tx[254]=Tx[254]=1;var a4e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,l=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const o4e=(t,e)=>{if(e<65534&&t.subarray&&See)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var l4e=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let l=Tx[o];if(l>4){s[i++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<n;)o=o<<6|t[r++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return o4e(s,i)},c4e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Tx[t[n]]>e?n:e},A5={string2buf:a4e,buf2string:l4e,utf8border:c4e};function u4e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var d4e=u4e;const w0=16209,f4e=16191;var h4e=function(e,n){let r,i,s,o,l,c,u,d,f,p,h,m,g,v,y,b,N,S,E,C,T,_,j,P;const k=e.state;r=e.next_in,j=e.input,i=r+(e.avail_in-5),s=e.next_out,P=e.output,o=s-(n-e.avail_out),l=s+(e.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,p=k.window,h=k.hold,m=k.bits,g=k.lencode,v=k.distcode,y=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;e:do{m<15&&(h+=j[r++]<<m,m+=8,h+=j[r++]<<m,m+=8),N=g[h&y];t:for(;;){if(S=N>>>24,h>>>=S,m-=S,S=N>>>16&255,S===0)P[s++]=N&65535;else if(S&16){E=N&65535,S&=15,S&&(m<S&&(h+=j[r++]<<m,m+=8),E+=h&(1<<S)-1,h>>>=S,m-=S),m<15&&(h+=j[r++]<<m,m+=8,h+=j[r++]<<m,m+=8),N=v[h&b];n:for(;;){if(S=N>>>24,h>>>=S,m-=S,S=N>>>16&255,S&16){if(C=N&65535,S&=15,m<S&&(h+=j[r++]<<m,m+=8,m<S&&(h+=j[r++]<<m,m+=8)),C+=h&(1<<S)-1,C>c){e.msg="invalid distance too far back",k.mode=w0;break e}if(h>>>=S,m-=S,S=s-o,C>S){if(S=C-S,S>d&&k.sane){e.msg="invalid distance too far back",k.mode=w0;break e}if(T=0,_=p,f===0){if(T+=u-S,S<E){E-=S;do P[s++]=p[T++];while(--S);T=s-C,_=P}}else if(f<S){if(T+=u+f-S,S-=f,S<E){E-=S;do P[s++]=p[T++];while(--S);if(T=0,f<E){S=f,E-=S;do P[s++]=p[T++];while(--S);T=s-C,_=P}}}else if(T+=f-S,S<E){E-=S;do P[s++]=p[T++];while(--S);T=s-C,_=P}for(;E>2;)P[s++]=_[T++],P[s++]=_[T++],P[s++]=_[T++],E-=3;E&&(P[s++]=_[T++],E>1&&(P[s++]=_[T++]))}else{T=s-C;do P[s++]=P[T++],P[s++]=P[T++],P[s++]=P[T++],E-=3;while(E>2);E&&(P[s++]=P[T++],E>1&&(P[s++]=P[T++]))}}else if((S&64)===0){N=v[(N&65535)+(h&(1<<S)-1)];continue n}else{e.msg="invalid distance code",k.mode=w0;break e}break}}else if((S&64)===0){N=g[(N&65535)+(h&(1<<S)-1)];continue t}else if(S&32){k.mode=f4e;break e}else{e.msg="invalid literal/length code",k.mode=w0;break e}break}}while(r<i&&s<l);E=m>>3,r-=E,m-=E<<3,h&=(1<<m)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<l?257+(l-s):257-(s-l),k.hold=h,k.bits=m};const Mp=15,o7=852,l7=592,c7=0,WC=1,u7=2,p4e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),m4e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),g4e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),v4e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),y4e=(t,e,n,r,i,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,p=0,h=0,m=0,g=0,v=0,y=0,b=0,N,S,E,C,T,_=null,j;const P=new Uint16Array(Mp+1),k=new Uint16Array(Mp+1);let O=null,M,I,B;for(u=0;u<=Mp;u++)P[u]=0;for(d=0;d<r;d++)P[e[n+d]]++;for(h=c,p=Mp;p>=1&&P[p]===0;p--);if(h>p&&(h=p),p===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<p&&P[f]===0;f++);for(h<f&&(h=f),v=1,u=1;u<=Mp;u++)if(v<<=1,v-=P[u],v<0)return-1;if(v>0&&(t===c7||p!==1))return-1;for(k[1]=0,u=1;u<Mp;u++)k[u+1]=k[u]+P[u];for(d=0;d<r;d++)e[n+d]!==0&&(o[k[e[n+d]]++]=d);if(t===c7?(_=O=o,j=20):t===WC?(_=p4e,O=m4e,j=257):(_=g4e,O=v4e,j=0),b=0,d=0,u=f,T=s,m=h,g=0,E=-1,y=1<<h,C=y-1,t===WC&&y>o7||t===u7&&y>l7)return 1;for(;;){M=u-g,o[d]+1<j?(I=0,B=o[d]):o[d]>=j?(I=O[o[d]-j],B=_[o[d]-j]):(I=96,B=0),N=1<<u-g,S=1<<m,f=S;do S-=N,i[T+(b>>g)+S]=M<<24|I<<16|B|0;while(S!==0);for(N=1<<u-1;b&N;)N>>=1;if(N!==0?(b&=N-1,b+=N):b=0,d++,--P[u]===0){if(u===p)break;u=e[n+o[d]]}if(u>h&&(b&C)!==E){for(g===0&&(g=h),T+=f,m=u-g,v=1<<m;m+g<p&&(v-=P[m+g],!(v<=0));)m++,v<<=1;if(y+=1<<m,t===WC&&y>o7||t===u7&&y>l7)return 1;E=b&C,i[E]=h<<24|m<<16|T-s|0}}return b!==0&&(i[T+b]=u-g<<24|64<<16|0),l.bits=h,0};var xy=y4e;const x4e=0,jee=1,_ee=2,{Z_FINISH:d7,Z_BLOCK:b4e,Z_TREES:N0,Z_OK:Uh,Z_STREAM_END:w4e,Z_NEED_DICT:N4e,Z_STREAM_ERROR:Vo,Z_DATA_ERROR:Eee,Z_MEM_ERROR:Aee,Z_BUF_ERROR:S4e,Z_DEFLATED:f7}=wee,Ej=16180,h7=16181,p7=16182,m7=16183,g7=16184,v7=16185,y7=16186,x7=16187,b7=16188,w7=16189,tN=16190,zc=16191,KC=16192,N7=16193,GC=16194,S7=16195,j7=16196,_7=16197,E7=16198,S0=16199,j0=16200,A7=16201,C7=16202,k7=16203,T7=16204,O7=16205,YC=16206,P7=16207,M7=16208,Jr=16209,Cee=16210,kee=16211,j4e=852,_4e=592,E4e=15,A4e=E4e,R7=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function C4e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const lp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ej||e.mode>kee?1:0},Tee=t=>{if(lp(t))return Vo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ej,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(j4e),e.distcode=e.distdyn=new Int32Array(_4e),e.sane=1,e.back=-1,Uh},Oee=t=>{if(lp(t))return Vo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Tee(t)},Pee=(t,e)=>{let n;if(lp(t))return Vo;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Vo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Oee(t))},Mee=(t,e)=>{if(!t)return Vo;const n=new C4e;t.state=n,n.strm=t,n.window=null,n.mode=Ej;const r=Pee(t,e);return r!==Uh&&(t.state=null),r},k4e=t=>Mee(t,A4e);let D7=!0,XC,JC;const T4e=t=>{if(D7){XC=new Int32Array(512),JC=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(xy(jee,t.lens,0,288,XC,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;xy(_ee,t.lens,0,32,JC,0,t.work,{bits:5}),D7=!1}t.lencode=XC,t.lenbits=9,t.distcode=JC,t.distbits=5},Ree=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},O4e=(t,e)=>{let n,r,i,s,o,l,c,u,d,f,p,h,m,g,v=0,y,b,N,S,E,C,T,_;const j=new Uint8Array(4);let P,k;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(lp(t)||!t.output||!t.input&&t.avail_in!==0)return Vo;n=t.state,n.mode===zc&&(n.mode=KC),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,f=l,p=c,_=Uh;e:for(;;)switch(n.mode){case Ej:if(n.wrap===0){n.mode=KC;break}for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,j[0]=u&255,j[1]=u>>>8&255,n.check=Bl(n.check,j,2,0),u=0,d=0,n.mode=h7;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Jr;break}if((u&15)!==f7){t.msg="unknown compression method",n.mode=Jr;break}if(u>>>=4,d-=4,T=(u&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){t.msg="invalid window size",n.mode=Jr;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?w7:zc,u=0,d=0;break;case h7:for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==f7){t.msg="unknown compression method",n.mode=Jr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Jr;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(j[0]=u&255,j[1]=u>>>8&255,n.check=Bl(n.check,j,2,0)),u=0,d=0,n.mode=p7;case p7:for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(j[0]=u&255,j[1]=u>>>8&255,j[2]=u>>>16&255,j[3]=u>>>24&255,n.check=Bl(n.check,j,4,0)),u=0,d=0,n.mode=m7;case m7:for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(j[0]=u&255,j[1]=u>>>8&255,n.check=Bl(n.check,j,2,0)),u=0,d=0,n.mode=g7;case g7:if(n.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(j[0]=u&255,j[1]=u>>>8&255,n.check=Bl(n.check,j,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=v7;case v7:if(n.flags&1024&&(h=n.length,h>l&&(h=l),h&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),T)),n.flags&512&&n.wrap&4&&(n.check=Bl(n.check,r,h,s)),l-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=y7;case y7:if(n.flags&2048){if(l===0)break e;h=0;do T=r[s+h++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&h<l);if(n.flags&512&&n.wrap&4&&(n.check=Bl(n.check,r,h,s)),l-=h,s+=h,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=x7;case x7:if(n.flags&4096){if(l===0)break e;h=0;do T=r[s+h++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&h<l);if(n.flags&512&&n.wrap&4&&(n.check=Bl(n.check,r,h,s)),l-=h,s+=h,T)break e}else n.head&&(n.head.comment=null);n.mode=b7;case b7:if(n.flags&512){for(;d<16;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Jr;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=zc;break;case w7:for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}t.adler=n.check=R7(u),u=0,d=0,n.mode=tN;case tN:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,N4e;t.adler=n.check=1,n.mode=zc;case zc:if(e===b4e||e===N0)break e;case KC:if(n.last){u>>>=d&7,d-=d&7,n.mode=YC;break}for(;d<3;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=N7;break;case 1:if(T4e(n),n.mode=S0,e===N0){u>>>=2,d-=2;break e}break;case 2:n.mode=j7;break;case 3:t.msg="invalid block type",n.mode=Jr}u>>>=2,d-=2;break;case N7:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Jr;break}if(n.length=u&65535,u=0,d=0,n.mode=GC,e===N0)break e;case GC:n.mode=S7;case S7:if(h=n.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;i.set(r.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,n.length-=h;break}n.mode=zc;break;case j7:for(;d<14;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Jr;break}n.have=0,n.mode=_7;case _7:for(;n.have<n.ncode;){for(;d<3;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.lens[O[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},_=xy(x4e,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,_){t.msg="invalid code lengths set",n.mode=Jr;break}n.have=0,n.mode=E7;case E7:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,N=v&65535,!(y<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(N<16)u>>>=y,d-=y,n.lens[n.have++]=N;else{if(N===16){for(k=y+2;d<k;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(u>>>=y,d-=y,n.have===0){t.msg="invalid bit length repeat",n.mode=Jr;break}T=n.lens[n.have-1],h=3+(u&3),u>>>=2,d-=2}else if(N===17){for(k=y+3;d<k;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=y,d-=y,T=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=y+7;d<k;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=y,d-=y,T=0,h=11+(u&127),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Jr;break}for(;h--;)n.lens[n.have++]=T}}if(n.mode===Jr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Jr;break}if(n.lenbits=9,P={bits:n.lenbits},_=xy(jee,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,_){t.msg="invalid literal/lengths set",n.mode=Jr;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},_=xy(_ee,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,_){t.msg="invalid distances set",n.mode=Jr;break}if(n.mode=S0,e===N0)break e;case S0:n.mode=j0;case j0:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,h4e(t,p),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,l=t.avail_in,u=n.hold,d=n.bits,n.mode===zc&&(n.back=-1);break}for(n.back=0;v=n.lencode[u&(1<<n.lenbits)-1],y=v>>>24,b=v>>>16&255,N=v&65535,!(y<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(b&&(b&240)===0){for(S=y,E=b,C=N;v=n.lencode[C+((u&(1<<S+E)-1)>>S)],y=v>>>24,b=v>>>16&255,N=v&65535,!(S+y<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=S,d-=S,n.back+=S}if(u>>>=y,d-=y,n.back+=y,n.length=N,b===0){n.mode=O7;break}if(b&32){n.back=-1,n.mode=zc;break}if(b&64){t.msg="invalid literal/length code",n.mode=Jr;break}n.extra=b&15,n.mode=A7;case A7:if(n.extra){for(k=n.extra;d<k;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=C7;case C7:for(;v=n.distcode[u&(1<<n.distbits)-1],y=v>>>24,b=v>>>16&255,N=v&65535,!(y<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if((b&240)===0){for(S=y,E=b,C=N;v=n.distcode[C+((u&(1<<S+E)-1)>>S)],y=v>>>24,b=v>>>16&255,N=v&65535,!(S+y<=d);){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}u>>>=S,d-=S,n.back+=S}if(u>>>=y,d-=y,n.back+=y,b&64){t.msg="invalid distance code",n.mode=Jr;break}n.offset=N,n.extra=b&15,n.mode=k7;case k7:if(n.extra){for(k=n.extra;d<k;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Jr;break}n.mode=T7;case T7:if(c===0)break e;if(h=p-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Jr;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,m=o-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do i[o++]=g[m++];while(--h);n.length===0&&(n.mode=j0);break;case O7:if(c===0)break e;i[o++]=n.length,c--,n.mode=j0;break;case YC:if(n.wrap){for(;d<32;){if(l===0)break e;l--,u|=r[s++]<<d,d+=8}if(p-=c,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Bl(n.check,i,p,o-p):_5(n.check,i,p,o-p)),p=c,n.wrap&4&&(n.flags?u:R7(u))!==n.check){t.msg="incorrect data check",n.mode=Jr;break}u=0,d=0}n.mode=P7;case P7:if(n.wrap&&n.flags){for(;d<32;){if(l===0)break e;l--,u+=r[s++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Jr;break}u=0,d=0}n.mode=M7;case M7:_=w4e;break e;case Jr:_=Eee;break e;case Cee:return Aee;case kee:default:return Vo}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,n.hold=u,n.bits=d,(n.wsize||p!==t.avail_out&&n.mode<Jr&&(n.mode<YC||e!==d7))&&Ree(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?Bl(n.check,i,p,t.next_out-p):_5(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===zc?128:0)+(n.mode===S0||n.mode===GC?256:0),(f===0&&p===0||e===d7)&&_===Uh&&(_=S4e),_},P4e=t=>{if(lp(t))return Vo;let e=t.state;return e.window&&(e.window=null),t.state=null,Uh},M4e=(t,e)=>{if(lp(t))return Vo;const n=t.state;return(n.wrap&2)===0?Vo:(n.head=e,e.done=!1,Uh)},R4e=(t,e)=>{const n=e.length;let r,i,s;return lp(t)||(r=t.state,r.wrap!==0&&r.mode!==tN)?Vo:r.mode===tN&&(i=1,i=_5(i,e,n,0),i!==r.check)?Eee:(s=Ree(t,e,n,n),s?(r.mode=Cee,Aee):(r.havedict=1,Uh))};var D4e=Oee,I4e=Pee,L4e=Tee,F4e=k4e,B4e=Mee,$4e=O4e,z4e=P4e,q4e=M4e,U4e=R4e,H4e="pako inflate (from Nodeca project)",Jc={inflateReset:D4e,inflateReset2:I4e,inflateResetKeep:L4e,inflateInit:F4e,inflateInit2:B4e,inflate:$4e,inflateEnd:z4e,inflateGetHeader:q4e,inflateSetDictionary:U4e,inflateInfo:H4e};function V4e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var W4e=V4e;const Dee=Object.prototype.toString,{Z_NO_FLUSH:K4e,Z_FINISH:G4e,Z_OK:Ox,Z_STREAM_END:ZC,Z_NEED_DICT:QC,Z_STREAM_ERROR:Y4e,Z_DATA_ERROR:I7,Z_MEM_ERROR:X4e}=wee;function wb(t){this.options=Nee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d4e,this.strm.avail_out=0;let n=Jc.inflateInit2(this.strm,e.windowBits);if(n!==Ox)throw new Error(E5[n]);if(this.header=new W4e,Jc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=A5.string2buf(e.dictionary):Dee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Jc.inflateSetDictionary(this.strm,e.dictionary),n!==Ox)))throw new Error(E5[n])}wb.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?G4e:K4e,Dee.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Jc.inflate(n,o),s===QC&&i&&(s=Jc.inflateSetDictionary(n,i),s===Ox?s=Jc.inflate(n,o):s===I7&&(s=QC));n.avail_in>0&&s===ZC&&n.state.wrap>0&&t[n.next_in]!==0;)Jc.inflateReset(n),s=Jc.inflate(n,o);switch(s){case Y4e:case I7:case QC:case X4e:return this.onEnd(s),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||s===ZC))if(this.options.to==="string"){let c=A5.utf8border(n.output,n.next_out),u=n.next_out-c,d=A5.buf2string(n.output,c);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(c,c+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===Ox&&l===0)){if(s===ZC)return s=Jc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};wb.prototype.onData=function(t){this.chunks.push(t)};wb.prototype.onEnd=function(t){t===Ox&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Nee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function J4e(t,e){const n=new wb(e);if(n.push(t),n.err)throw n.msg||E5[n.err];return n.result}var Z4e=wb,Q4e=J4e,eLe={Inflate:Z4e,inflate:Q4e};const{Inflate:tLe,inflate:nLe}=eLe;var L7=tLe,rLe=nLe;const Iee=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;Iee[t]=e}const F7=4294967295;function iLe(t,e,n){let r=t;for(let i=0;i<n;i++)r=Iee[(r^e[i])&255]^r>>>8;return r}function sLe(t,e){return(iLe(F7,t,e)^F7)>>>0}function B7(t,e,n){const r=t.readUint32(),i=sLe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function Lee(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function Fee(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function Bee(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function $ee(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function zee(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+aLe(e[s-i],n[s],n[s-i])&255}}function aLe(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function oLe(t,e,n,r,i,s){switch(t){case 0:Lee(e,n,i);break;case 1:Fee(e,n,i,s);break;case 2:Bee(e,n,r,i);break;case 3:$ee(e,n,r,i,s);break;case 4:zee(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const lLe=new Uint16Array([255]),cLe=new Uint8Array(lLe.buffer),uLe=cLe[0]===255;function dLe(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(r*n*l);let u=0;for(let d=0;d<7;d++){const f=o[d],p=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(p<=0||h<=0)continue;const m=p*l,g=new Uint8Array(m);for(let v=0;v<h;v++){const y=e[u++],b=e.subarray(u,u+m);u+=m;const N=new Uint8Array(m);oLe(y,b,N,g,m,l),g.set(N);for(let S=0;S<p;S++){const E=f.x+S*f.xStep,C=f.y+v*f.yStep;if(!(E>=n||C>=r))for(let T=0;T<l;T++)c[(C*n+E)*l+T]=N[S*l+T]}}}if(s===16){const d=new Uint16Array(c.buffer);if(uLe)for(let f=0;f<d.length;f++)d[f]=fLe(d[f]);return d}else return c}function fLe(t){return(t&255)<<8|t>>8&255}const hLe=new Uint16Array([255]),pLe=new Uint8Array(hLe.buffer),mLe=pLe[0]===255,gLe=new Uint8Array(0);function $7(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*n),c=new Uint8Array(r*l);let u=gLe,d=0,f,p;for(let h=0;h<r;h++){switch(f=e.subarray(d+1,d+1+l),p=c.subarray(h*l,(h+1)*l),e[d]){case 0:Lee(f,p,l);break;case 1:Fee(f,p,l,o);break;case 2:Bee(f,p,u,l);break;case 3:$ee(f,p,u,l,o);break;case 4:zee(f,p,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(mLe)for(let m=0;m<h.length;m++)h[m]=vLe(h[m]);return h}else return c}function vLe(t){return(t&255)<<8|t>>8&255}const c1=Uint8Array.of(137,80,78,71,13,10,26,10);function z7(t){if(!yLe(t.readBytes(c1.length)))throw new Error("wrong PNG signature")}function yLe(t){if(t.length<c1.length)return!1;for(let e=0;e<c1.length;e++)if(t[e]!==c1[e])return!1;return!0}const xLe="tEXt",bLe=0,qee=new TextDecoder("latin1");function wLe(t){if(SLe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const NLe=/^[\u0000-\u00FF]*$/;function SLe(t){if(!NLe.test(t))throw new Error("invalid latin1 text")}function jLe(t,e,n){const r=Uee(e);t[r]=_Le(e,n-r.length-1)}function Uee(t){for(t.mark();t.readByte()!==bLe;);const e=t.offset;t.reset();const n=qee.decode(t.readBytes(e-t.offset-1));return t.skip(1),wLe(n),n}function _Le(t,e){return qee.decode(t.readBytes(e))}const Va={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},ek={UNKNOWN:-1,DEFLATE:0},q7={UNKNOWN:-1,ADAPTIVE:0},tk={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},_0={NONE:0,BACKGROUND:1,PREVIOUS:2},nk={SOURCE:0,OVER:1};class ELe extends pD{constructor(n,r={}){super(n);br(this,"_checkCrc");br(this,"_inflator");br(this,"_png");br(this,"_apng");br(this,"_end");br(this,"_hasPalette");br(this,"_palette");br(this,"_hasTransparency");br(this,"_transparency");br(this,"_compressionMethod");br(this,"_filterMethod");br(this,"_interlaceMethod");br(this,"_colorType");br(this,"_isAnimated");br(this,"_numberOfFrames");br(this,"_numberOfPlays");br(this,"_frames");br(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new L7,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ek.UNKNOWN,this._filterMethod=q7.UNKNOWN,this._interlaceMethod=tk.UNKNOWN,this._colorType=Va.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(z7(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(z7(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case xLe:jLe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?B7(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?B7(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=ALe(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Va.GREYSCALE:i=1;break;case Va.TRUECOLOUR:i=3;break;case Va.INDEXED_COLOUR:i=1;break;case Va.GREYSCALE_ALPHA:i=2;break;case Va.TRUECOLOUR_ALPHA:i=4;break;case Va.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==ek.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Va.GREYSCALE:case Va.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Va.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Va.UNKNOWN:case Va.GREYSCALE_ALPHA:case Va.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=Uee(this),i=this.readUint8();if(i!==ek.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:rLe(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=$7({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case _0.NONE:break;case _0.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case _0.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,l)=>{const c=((o+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,u=(o*r.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(r.blendOp){case nk.SOURCE:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)n.data[c+d]=r.data[u+d]}break;case nk.OVER:for(let o=0;o<r.height;o++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=r.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:r.data[u+d],h=Math.floor(f*p+(1-f)*n.data[c+d]);n.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==q7.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===tk.NO_INTERLACE)this._png.data=$7({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===tk.ADAM7)this._png.data=dLe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:_0.NONE,blendOp:nk.SOURCE,data:n}),this._inflator=new L7,this._writingDataChunks=!1}}function ALe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var U7;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(U7||(U7={}));function CLe(t,e){return new ELe(t,e).decode()}var gn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function rk(){gn.console&&typeof gn.console.log=="function"&&gn.console.log.apply(gn.console,arguments)}var Tr={log:rk,warn:function(t){gn.console&&(typeof gn.console.warn=="function"?gn.console.warn.apply(gn.console,arguments):rk.call(null,arguments))},error:function(t){gn.console&&(typeof gn.console.error=="function"?gn.console.error.apply(gn.console,arguments):rk(t))}};function ik(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Hf(r.response,e,n)},r.onerror=function(){Tr.error("could not download file")},r.send()}function H7(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function E0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Hf=gn.saveAs||((typeof window>"u"?"undefined":Sr(window))!=="object"||window!==gn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=gn.URL||gn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?H7(i.href)?ik(t,e,n):E0(i,i.target="_blank"):E0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){E0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(H7(t))ik(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){E0(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Sr(s)!=="object"&&(Tr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return ik(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(gn.HTMLElement)||gn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Sr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},l.readAsDataURL(t)}else{var c=gn.URL||gn.webkitURL,u=c.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Hee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var u1=gn.atob.bind(gn),V7=gn.btoa.bind(gn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function sk(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Ms(n,r,i,s,e[0],7,-680876936),s=Ms(s,n,r,i,e[1],12,-389564586),i=Ms(i,s,n,r,e[2],17,606105819),r=Ms(r,i,s,n,e[3],22,-1044525330),n=Ms(n,r,i,s,e[4],7,-176418897),s=Ms(s,n,r,i,e[5],12,1200080426),i=Ms(i,s,n,r,e[6],17,-1473231341),r=Ms(r,i,s,n,e[7],22,-45705983),n=Ms(n,r,i,s,e[8],7,1770035416),s=Ms(s,n,r,i,e[9],12,-1958414417),i=Ms(i,s,n,r,e[10],17,-42063),r=Ms(r,i,s,n,e[11],22,-1990404162),n=Ms(n,r,i,s,e[12],7,1804603682),s=Ms(s,n,r,i,e[13],12,-40341101),i=Ms(i,s,n,r,e[14],17,-1502002290),n=Rs(n,r=Ms(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Rs(s,n,r,i,e[6],9,-1069501632),i=Rs(i,s,n,r,e[11],14,643717713),r=Rs(r,i,s,n,e[0],20,-373897302),n=Rs(n,r,i,s,e[5],5,-701558691),s=Rs(s,n,r,i,e[10],9,38016083),i=Rs(i,s,n,r,e[15],14,-660478335),r=Rs(r,i,s,n,e[4],20,-405537848),n=Rs(n,r,i,s,e[9],5,568446438),s=Rs(s,n,r,i,e[14],9,-1019803690),i=Rs(i,s,n,r,e[3],14,-187363961),r=Rs(r,i,s,n,e[8],20,1163531501),n=Rs(n,r,i,s,e[13],5,-1444681467),s=Rs(s,n,r,i,e[2],9,-51403784),i=Rs(i,s,n,r,e[7],14,1735328473),n=Ds(n,r=Rs(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ds(s,n,r,i,e[8],11,-2022574463),i=Ds(i,s,n,r,e[11],16,1839030562),r=Ds(r,i,s,n,e[14],23,-35309556),n=Ds(n,r,i,s,e[1],4,-1530992060),s=Ds(s,n,r,i,e[4],11,1272893353),i=Ds(i,s,n,r,e[7],16,-155497632),r=Ds(r,i,s,n,e[10],23,-1094730640),n=Ds(n,r,i,s,e[13],4,681279174),s=Ds(s,n,r,i,e[0],11,-358537222),i=Ds(i,s,n,r,e[3],16,-722521979),r=Ds(r,i,s,n,e[6],23,76029189),n=Ds(n,r,i,s,e[9],4,-640364487),s=Ds(s,n,r,i,e[12],11,-421815835),i=Ds(i,s,n,r,e[15],16,530742520),n=Is(n,r=Ds(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Is(s,n,r,i,e[7],10,1126891415),i=Is(i,s,n,r,e[14],15,-1416354905),r=Is(r,i,s,n,e[5],21,-57434055),n=Is(n,r,i,s,e[12],6,1700485571),s=Is(s,n,r,i,e[3],10,-1894986606),i=Is(i,s,n,r,e[10],15,-1051523),r=Is(r,i,s,n,e[1],21,-2054922799),n=Is(n,r,i,s,e[8],6,1873313359),s=Is(s,n,r,i,e[15],10,-30611744),i=Is(i,s,n,r,e[6],15,-1560198380),r=Is(r,i,s,n,e[13],21,1309151649),n=Is(n,r,i,s,e[4],6,-145523070),s=Is(s,n,r,i,e[11],10,-1120210379),i=Is(i,s,n,r,e[2],15,718787259),r=Is(r,i,s,n,e[9],21,-343485551),t[0]=Od(n,t[0]),t[1]=Od(r,t[1]),t[2]=Od(i,t[2]),t[3]=Od(s,t[3])}function Aj(t,e,n,r,i,s){return e=Od(Od(e,t),Od(r,s)),Od(e<<i|e>>>32-i,n)}function Ms(t,e,n,r,i,s,o){return Aj(e&n|~e&r,t,e,i,s,o)}function Rs(t,e,n,r,i,s,o){return Aj(e&r|n&~r,t,e,i,s,o)}function Ds(t,e,n,r,i,s,o){return Aj(e^n^r,t,e,i,s,o)}function Is(t,e,n,r,i,s,o){return Aj(n^(e|~r),t,e,i,s,o)}function Vee(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)sk(r,kLe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(sk(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,sk(r,i),r}function kLe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var W7="0123456789abcdef".split("");function TLe(t){for(var e="",n=0;n<4;n++)e+=W7[t>>8*n+4&15]+W7[t>>8*n&15];return e}function OLe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function C5(t){return Vee(t).map(OLe).join("")}var PLe=(function(t){for(var e=0;e<t.length;e++)t[e]=TLe(t[e]);return t.join("")})(Vee("hello"))!="5d41402abc4b2a76b9719d911017c592";function Od(t,e){if(PLe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k5(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}n=t,r=l}else l=r;var f=e.length,p=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[p=(p+1)%256]))%256,l[p]=l[h],l[h]=d,o=l[(l[p]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var K7={print:4,modify:8,copy:16,"annot-forms":32};function Vp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(K7.perm!==void 0)throw new Error("Invalid permission: "+l);i+=K7[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=C5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=k5(this.encryptionKey,this.padding)}function Wp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function G7(t){if(Sr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(l){gn.console&&Tr.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function nN(t){if(!(this instanceof nN))return new nN(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Wee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Vf(t,e,n,r,i){if(!(this instanceof Vf))return new Vf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Wee.call(this,r,i)}function sm(t,e,n,r,i){if(!(this instanceof sm))return new sm(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Wee.call(this,r,i)}function Kt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Sr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=G7;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(R){m=R};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return v};var y=h.__private__.getPageFormat=function(R){return v[R]};i=i||"a4";var b="compat",N="advanced",S=b;function E(){this.saveGraphicsState(),G(new gt(It,0,0,-It,0,_f()*It).toString()+" cm"),this.setFontSize(this.getFontSize()/It),u="n",S=N}function C(){this.restoreGraphicsState(),u="S",S=b}var T=h.__private__.combineFontStyleAndFontWeight=function(R,V){if(R=="bold"&&V=="normal"||R=="bold"&&V==400||R=="normal"&&V=="italic"||R=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(R=V==400||V==="normal"?R==="italic"?"italic":"normal":V!=700&&V!=="bold"||R!=="normal"?(V==700?"bold":V)+""+R:"bold"),R};h.advancedAPI=function(R){var V=S===b;return V&&E.call(this),typeof R!="function"||(R(this),V&&C.call(this)),this},h.compatAPI=function(R){var V=S===N;return V&&C.call(this),typeof R!="function"||(R(this),V&&E.call(this)),this},h.isAdvancedAPI=function(){return S===N};var _,j=function(R){if(S!==N)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=h.roundToPrecision=h.__private__.roundToPrecision=function(R,V){var he=e||V;if(isNaN(R)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(he).replace(/0+$/,"")};_=h.hpf=h.__private__.hpf=typeof c=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return P(R,c)}:c==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return P(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return P(R,16)};var k=h.f2=h.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return P(R,2)},O=h.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return P(R,3)},M=h.scale=h.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return S===b?R*It:S===N?R:void 0},I=function(R){return M((function(V){return S===b?_f()-V:S===N?V:void 0})(R))};h.__private__.setPrecision=h.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var B,U="00000000000000000000000000000000",D=h.__private__.getFileId=function(){return U},z=h.__private__.setFileId=function(R){return U=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ti=new Vp(d.userPermissions,d.userPassword,d.ownerPassword,U)),U};h.setFileId=function(R){return z(R),this},h.getFileId=function(){return D()};var H=h.__private__.convertDateToPDFDate=function(R){var V=R.getTimezoneOffset(),he=V<0?"+":"-",we=Math.floor(Math.abs(V/60)),Ae=Math.abs(V%60),We=[he,Z(we),"'",Z(Ae),"'"].join("");return["D:",R.getFullYear(),Z(R.getMonth()+1),Z(R.getDate()),Z(R.getHours()),Z(R.getMinutes()),Z(R.getSeconds()),We].join("")},ee=h.__private__.convertPDFDateToDate=function(R){var V=parseInt(R.substr(2,4),10),he=parseInt(R.substr(6,2),10)-1,we=parseInt(R.substr(8,2),10),Ae=parseInt(R.substr(10,2),10),We=parseInt(R.substr(12,2),10),nt=parseInt(R.substr(14,2),10);return new Date(V,he,we,Ae,We,nt,0)},ae=h.__private__.setCreationDate=function(R){var V;if(R===void 0&&(R=new Date),R instanceof Date)V=H(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=R}return B=V},F=h.__private__.getCreationDate=function(R){var V=B;return R==="jsDate"&&(V=ee(B)),V};h.setCreationDate=function(R){return ae(R),this},h.getCreationDate=function(R){return F(R)};var q,Z=h.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},te=h.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ce=0,ue=[],ve=[],oe=0,pe=[],xe=[],X=!1,Se=ve;h.__private__.setCustomOutputDestination=function(R){X=!0,Se=R};var W=function(R){X||(Se=R)};h.__private__.resetCustomOutputDestination=function(){X=!1,Se=ve};var G=h.__private__.out=function(R){return R=R.toString(),oe+=R.length+1,Se.push(R),Se},_e=h.__private__.write=function(R){return G(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Qe=h.__private__.getArrayBuffer=function(R){for(var V=R.length,he=new ArrayBuffer(V),we=new Uint8Array(he);V--;)we[V]=R.charCodeAt(V);return he},ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ze};var Re=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(R){return Re=S===N?R/It:R,this};var se,ge=h.__private__.getFontSize=h.getFontSize=function(){return S===b?Re:Re*It},Ne=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(R){return Ne=R,this},h.__private__.getR2L=h.getR2L=function(){return Ne};var De,Le=h.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))se=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');se=R}else se=parseInt(R,10)};h.__private__.getZoomMode=function(){return se};var Pe,qe=h.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');De=R};h.__private__.getPageMode=function(){return De};var ut=h.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Pe=R};h.__private__.getLayoutMode=function(){return Pe},h.__private__.setDisplayMode=h.setDisplayMode=function(R,V,he){return Le(R),ut(V),qe(he),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(R){if(Object.keys(it).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[R]},h.__private__.getDocumentProperties=function(){return it},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(R){for(var V in it)it.hasOwnProperty(V)&&R[V]&&(it[V]=R[V]);return this},h.__private__.setDocumentProperty=function(R,V){if(Object.keys(it).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[R]=V};var pt,It,mt,yn,pn,Ct={},en={},qn=[],Vt={},fn={},nn={},vr={},ar=null,on=0,Nt=[],me=new G7(h),Y=t.hotfixes||[],Ce={},ot={},mn=[],gt=function R(V,he,we,Ae,We,nt){if(!(this instanceof R))return new R(V,he,we,Ae,We,nt);isNaN(V)&&(V=1),isNaN(he)&&(he=0),isNaN(we)&&(we=0),isNaN(Ae)&&(Ae=1),isNaN(We)&&(We=0),isNaN(nt)&&(nt=0),this._matrix=[V,he,we,Ae,We,nt]};Object.defineProperty(gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(R)},gt.prototype.multiply=function(R){var V=R.sx*this.sx+R.shy*this.shx,he=R.sx*this.shy+R.shy*this.sy,we=R.shx*this.sx+R.sy*this.shx,Ae=R.shx*this.shy+R.sy*this.sy,We=R.tx*this.sx+R.ty*this.shx+this.tx,nt=R.tx*this.shy+R.ty*this.sy+this.ty;return new gt(V,he,we,Ae,We,nt)},gt.prototype.decompose=function(){var R=this.sx,V=this.shy,he=this.shx,we=this.sy,Ae=this.tx,We=this.ty,nt=Math.sqrt(R*R+V*V),Dt=(R/=nt)*he+(V/=nt)*we;he-=R*Dt,we-=V*Dt;var Ht=Math.sqrt(he*he+we*we);return Dt/=Ht,R*(we/=Ht)<V*(he/=Ht)&&(R=-R,V=-V,Dt=-Dt,nt=-nt),{scale:new gt(nt,0,0,Ht,0,0),translate:new gt(1,0,0,1,Ae,We),rotate:new gt(R,V,-V,R,0,0),skew:new gt(1,0,Dt,1,0,0)}},gt.prototype.toString=function(R){return this.join(" ")},gt.prototype.inversed=function(){var R=this.sx,V=this.shy,he=this.shx,we=this.sy,Ae=this.tx,We=this.ty,nt=1/(R*we-V*he),Dt=we*nt,Ht=-V*nt,xn=-he*nt,Nn=R*nt;return new gt(Dt,Ht,xn,Nn,-Dt*Ae-xn*We,-Ht*Ae-Nn*We)},gt.prototype.applyToPoint=function(R){var V=R.x*this.sx+R.y*this.shx+this.tx,he=R.x*this.shy+R.y*this.sy+this.ty;return new Sf(V,he)},gt.prototype.applyToRectangle=function(R){var V=this.applyToPoint(R),he=this.applyToPoint(new Sf(R.x+R.w,R.y+R.h));return new nv(V.x,V.y,he.x-V.x,he.y-V.y)},gt.prototype.clone=function(){var R=this.sx,V=this.shy,he=this.shx,we=this.sy,Ae=this.tx,We=this.ty;return new gt(R,V,he,we,Ae,We)},h.Matrix=gt;var lt=h.matrixMult=function(R,V){return V.multiply(R)},ft=new gt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=ft;var _t=function(R,V){if(!fn[R]){var he=(V instanceof Vf?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);V.id=he,fn[R]=he,Vt[he]=V,me.publish("addPattern",V)}};h.ShadingPattern=Vf,h.TilingPattern=sm,h.addShadingPattern=function(R,V){return j("addShadingPattern()"),_t(R,V),this},h.beginTilingPattern=function(R){j("beginTilingPattern()"),rv(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},h.endTilingPattern=function(R,V){j("endTilingPattern()"),V.stream=xe[q].join(`
`),_t(R,V),me.publish("endTilingPattern",V),mn.pop().restore()};var ln,Ut=h.__private__.newObject=function(){var R=Wn();return or(R,!0),R},Wn=h.__private__.newObjectDeferred=function(){return ce++,ue[ce]=function(){return oe},ce},or=function(R,V){return V=typeof V=="boolean"&&V,ue[R]=oe,V&&G(R+" 0 obj"),R},ki=h.__private__.newAdditionalObject=function(){var R={objId:Wn(),content:""};return pe.push(R),R},ps=Wn(),Ws=Wn(),uo=h.__private__.decodeColorString=function(R){var V=R.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length!==5||V[4]!=="k"&&V[4]!=="K"||(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var he=parseFloat(V[0]);V=[he,he,he,"r"]}for(var we="#",Ae=0;Ae<3;Ae++)we+=("0"+Math.floor(255*parseFloat(V[Ae])).toString(16)).slice(-2);return we},Ma=h.__private__.encodeColorString=function(R){var V;typeof R=="string"&&(R={ch1:R});var he=R.ch1,we=R.ch2,Ae=R.ch3,We=R.ch4,nt=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var Dt=new Hee(he);if(Dt.ok)he=Dt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Ht=parseInt(he.substr(1),16);he=Ht>>16&255,we=Ht>>8&255,Ae=255&Ht}if(we===void 0||We===void 0&&he===we&&we===Ae)V=typeof he=="string"?he+" "+nt[0]:R.precision===2?k(he/255)+" "+nt[0]:O(he/255)+" "+nt[0];else if(We===void 0||Sr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return["1.","1.","1.",nt[1]].join(" ");V=typeof he=="string"?[he,we,Ae,nt[1]].join(" "):R.precision===2?[k(he/255),k(we/255),k(Ae/255),nt[1]].join(" "):[O(he/255),O(we/255),O(Ae/255),nt[1]].join(" ")}else V=typeof he=="string"?[he,we,Ae,We,nt[2]].join(" "):R.precision===2?[k(he),k(we),k(Ae),k(We),nt[2]].join(" "):[O(he),O(we),O(Ae),O(We),nt[2]].join(" ");return V},Ra=h.__private__.getFilters=function(){return o},Ks=h.__private__.putStream=function(R){var V=(R=R||{}).data||"",he=R.filters||Ra(),we=R.alreadyAppliedFilters||[],Ae=R.addLength1||!1,We=V.length,nt=R.objectId,Dt=function(zi){return zi};if(d!==null&&nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Dt=ti.encryptor(nt,0));var Ht={};he===!0&&(he=["FlateEncode"]);var xn=R.additionalKeyValues||[],Nn=(Ht=Kt.API.processDataByFilters!==void 0?Kt.API.processDataByFilters(V,he):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(we)?we.join(" "):we.toString());if(Ht.data.length!==0&&(xn.push({key:"Length",value:Ht.data.length}),Ae===!0&&xn.push({key:"Length1",value:We})),Nn.length!=0)if(Nn.split("/").length-1==1)xn.push({key:"Filter",value:Nn});else{xn.push({key:"Filter",value:"["+Nn+"]"});for(var cr=0;cr<xn.length;cr+=1)if(xn[cr].key==="DecodeParms"){for(var ni=[],Oi=0;Oi<Ht.reverseChain.split("/").length-1;Oi+=1)ni.push("null");ni.push(xn[cr].value),xn[cr].value="["+ni.join(" ")+"]"}}G("<<");for(var Dr=0;Dr<xn.length;Dr++)G("/"+xn[Dr].key+" "+xn[Dr].value);G(">>"),Ht.data.length!==0&&(G("stream"),G(Dt(Ht.data)),G("endstream"))},fo=h.__private__.putPage=function(R){var V=R.number,he=R.data,we=R.objId,Ae=R.contentsObjId;or(we,!0),G("<</Type /Page"),G("/Parent "+R.rootDictionaryObjId+" 0 R"),G("/Resources "+R.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(_(R.mediaBox.bottomLeftX))+" "+parseFloat(_(R.mediaBox.bottomLeftY))+" "+_(R.mediaBox.topRightX)+" "+_(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&G("/CropBox ["+_(R.cropBox.bottomLeftX)+" "+_(R.cropBox.bottomLeftY)+" "+_(R.cropBox.topRightX)+" "+_(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&G("/BleedBox ["+_(R.bleedBox.bottomLeftX)+" "+_(R.bleedBox.bottomLeftY)+" "+_(R.bleedBox.topRightX)+" "+_(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&G("/TrimBox ["+_(R.trimBox.bottomLeftX)+" "+_(R.trimBox.bottomLeftY)+" "+_(R.trimBox.topRightX)+" "+_(R.trimBox.topRightY)+"]"),R.artBox!==null&&G("/ArtBox ["+_(R.artBox.bottomLeftX)+" "+_(R.artBox.bottomLeftY)+" "+_(R.artBox.topRightX)+" "+_(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&G("/UserUnit "+R.userUnit),me.publish("putPage",{objId:we,pageContext:Nt[V],pageNumber:V,page:he}),G("/Contents "+Ae+" 0 R"),G(">>"),G("endobj");var We=he.join(`
`);return S===N&&(We+=`
Q`),or(Ae,!0),Ks({data:We,filters:Ra(),objectId:Ae}),G("endobj"),we},ho=h.__private__.putPages=function(){var R,V,he=[];for(R=1;R<=on;R++)Nt[R].objId=Wn(),Nt[R].contentsObjId=Wn();for(R=1;R<=on;R++)he.push(fo({number:R,data:xe[R],objId:Nt[R].objId,contentsObjId:Nt[R].contentsObjId,mediaBox:Nt[R].mediaBox,cropBox:Nt[R].cropBox,bleedBox:Nt[R].bleedBox,trimBox:Nt[R].trimBox,artBox:Nt[R].artBox,userUnit:Nt[R].userUnit,rootDictionaryObjId:ps,resourceDictionaryObjId:Ws}));or(ps,!0),G("<</Type /Pages");var we="/Kids [";for(V=0;V<on;V++)we+=he[V]+" 0 R ";G(we+"]"),G("/Count "+on),G(">>"),G("endobj"),me.publish("postPutPages")},Sc=function(R){me.publish("putFont",{font:R,out:G,newObject:Ut,putStream:Ks}),R.isAlreadyPutted!==!0&&(R.objectNumber=Ut(),G("<<"),G("/Type /Font"),G("/BaseFont /"+Wp(R.postScriptName)),G("/Subtype /Type1"),typeof R.encoding=="string"&&G("/Encoding /"+R.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Ou=function(R){R.objectNumber=Ut();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[_(R.x),_(R.y),_(R.x+R.width),_(R.y+R.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var he=R.pages[1].join(`
`);Ks({data:he,additionalKeyValues:V,objectId:R.objectNumber}),G("endobj")},Gs=function(R,V){V||(V=21);var he=Ut(),we=(function(nt,Dt){var Ht,xn=[],Nn=1/(Dt-1);for(Ht=0;Ht<1;Ht+=Nn)xn.push(Ht);if(xn.push(1),nt[0].offset!=0){var cr={offset:0,color:nt[0].color};nt.unshift(cr)}if(nt[nt.length-1].offset!=1){var ni={offset:1,color:nt[nt.length-1].color};nt.push(ni)}for(var Oi="",Dr=0,zi=0;zi<xn.length;zi++){for(Ht=xn[zi];Ht>nt[Dr+1].offset;)Dr++;var Pi=nt[Dr].offset,gs=(Ht-Pi)/(nt[Dr+1].offset-Pi),vo=nt[Dr].color,pa=nt[Dr+1].color;Oi+=te(Math.round((1-gs)*vo[0]+gs*pa[0]).toString(16))+te(Math.round((1-gs)*vo[1]+gs*pa[1]).toString(16))+te(Math.round((1-gs)*vo[2]+gs*pa[2]).toString(16))}return Oi.trim()})(R.colors,V),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+V+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ks({data:we,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),G("endobj"),R.objectNumber=Ut(),G("<< /ShadingType "+R.type),G("/ColorSpace /DeviceRGB");var We="/Coords ["+_(parseFloat(R.coords[0]))+" "+_(parseFloat(R.coords[1]))+" ";R.type===2?We+=_(parseFloat(R.coords[2]))+" "+_(parseFloat(R.coords[3])):We+=_(parseFloat(R.coords[2]))+" "+_(parseFloat(R.coords[3]))+" "+_(parseFloat(R.coords[4]))+" "+_(parseFloat(R.coords[5])),G(We+="]"),R.matrix&&G("/Matrix ["+R.matrix.toString()+"]"),G("/Function "+he+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},jc=function(R,V){var he=Wn(),we=Ut();V.push({resourcesOid:he,objectOid:we}),R.objectNumber=we;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+R.boundingBox.map(_).join(" ")+"]"}),Ae.push({key:"XStep",value:_(R.xStep)}),Ae.push({key:"YStep",value:_(R.yStep)}),Ae.push({key:"Resources",value:he+" 0 R"}),R.matrix&&Ae.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),Ks({data:R.stream,additionalKeyValues:Ae,objectId:R.objectNumber}),G("endobj")},dp=function(R){for(var V in R.objectNumber=Ut(),G("<<"),R)switch(V){case"opacity":G("/ca "+k(R[V]));break;case"stroke-opacity":G("/CA "+k(R[V]))}G(">>"),G("endobj")},yf=function(R){or(R.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var V in G("/Font <<"),Ct)Ct.hasOwnProperty(V)&&(f===!1||f===!0&&p.hasOwnProperty(V))&&G("/"+V+" "+Ct[V].objectNumber+" 0 R");G(">>")})(),(function(){if(Object.keys(Vt).length>0){for(var V in G("/Shading <<"),Vt)Vt.hasOwnProperty(V)&&Vt[V]instanceof Vf&&Vt[V].objectNumber>=0&&G("/"+V+" "+Vt[V].objectNumber+" 0 R");me.publish("putShadingPatternDict"),G(">>")}})(),(function(V){if(Object.keys(Vt).length>0){for(var he in G("/Pattern <<"),Vt)Vt.hasOwnProperty(he)&&Vt[he]instanceof h.TilingPattern&&Vt[he].objectNumber>=0&&Vt[he].objectNumber<V&&G("/"+he+" "+Vt[he].objectNumber+" 0 R");me.publish("putTilingPatternDict"),G(">>")}})(R.objectOid),(function(){if(Object.keys(nn).length>0){var V;for(V in G("/ExtGState <<"),nn)nn.hasOwnProperty(V)&&nn[V].objectNumber>=0&&G("/"+V+" "+nn[V].objectNumber+" 0 R");me.publish("putGStateDict"),G(">>")}})(),(function(){for(var V in G("/XObject <<"),Ce)Ce.hasOwnProperty(V)&&Ce[V].objectNumber>=0&&G("/"+V+" "+Ce[V].objectNumber+" 0 R");me.publish("putXobjectDict"),G(">>")})(),G(">>"),G("endobj")},fp=function(R){en[R.fontName]=en[R.fontName]||{},en[R.fontName][R.fontStyle]=R.id},hp=function(R,V,he,we,Ae){var We={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:R,fontName:V,fontStyle:he,encoding:we,isStandardFont:Ae||!1,metadata:{}};return me.publish("addFont",{font:We,instance:this}),Ct[We.id]=We,fp(We),We.id},ms=h.__private__.pdfEscape=h.pdfEscape=function(R,V){return(function(he,we){var Ae,We,nt,Dt,Ht,xn,Nn,cr,ni;if(nt=(we=we||{}).sourceEncoding||"Unicode",Ht=we.outputEncoding,(we.autoencode||Ht)&&Ct[pt].metadata&&Ct[pt].metadata[nt]&&Ct[pt].metadata[nt].encoding&&(Dt=Ct[pt].metadata[nt].encoding,!Ht&&Ct[pt].encoding&&(Ht=Ct[pt].encoding),!Ht&&Dt.codePages&&(Ht=Dt.codePages[0]),typeof Ht=="string"&&(Ht=Dt[Ht]),Ht)){for(Nn=!1,xn=[],Ae=0,We=he.length;Ae<We;Ae++)(cr=Ht[he.charCodeAt(Ae)])?xn.push(String.fromCharCode(cr)):xn.push(he[Ae]),xn[Ae].charCodeAt(0)>>8&&(Nn=!0);he=xn.join("")}for(Ae=he.length;Nn===void 0&&Ae!==0;)he.charCodeAt(Ae-1)>>8&&(Nn=!0),Ae--;if(!Nn)return he;for(xn=we.noBOM?[]:[254,255],Ae=0,We=he.length;Ae<We;Ae++){if((ni=(cr=he.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");xn.push(ni),xn.push(cr-(ni<<8))}return String.fromCharCode.apply(void 0,xn)})(R,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xf=h.__private__.beginPage=function(R){xe[++on]=[],Nt[on]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Dn(on),W(xe[q])},at=function(R,V){var he,we,Ae;switch(n=V||n,typeof R=="string"&&(he=y(R.toLowerCase()),Array.isArray(he)&&(we=he[0],Ae=he[1])),Array.isArray(R)&&(we=R[0]*It,Ae=R[1]*It),isNaN(we)&&(we=i[0],Ae=i[1]),(we>14400||Ae>14400)&&(Tr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),we=Math.min(14400,we),Ae=Math.min(14400,Ae)),i=[we,Ae],n.substr(0,1)){case"l":Ae>we&&(i=[Ae,we]);break;case"p":we>Ae&&(i=[Ae,we])}xf(i),Ti(bn),G(gp),ev!==0&&G(ev+" J"),tv!==0&&G(tv+" j"),me.publish("addPage",{pageNumber:on})},zt=function(R){R>0&&R<=on&&(xe.splice(R,1),Nt.splice(R,1),on--,q>on&&(q=on),this.setPage(q))},Dn=function(R){R>0&&R<=on&&(q=R)},lr=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return xe.length-1},Xr=function(R,V,he){var we,Ae=void 0;return he=he||{},R=R!==void 0?R:Ct[pt].fontName,V=V!==void 0?V:Ct[pt].fontStyle,we=R.toLowerCase(),en[we]!==void 0&&en[we][V]!==void 0?Ae=en[we][V]:en[R]!==void 0&&en[R][V]!==void 0?Ae=en[R][V]:he.disableWarning===!1&&Tr.warn("Unable to look up font label for font '"+R+"', '"+V+"'. Refer to getFontList() for available fonts."),Ae||he.noFallback||(Ae=en.times[V])==null&&(Ae=en.times.normal),Ae},ns=h.__private__.putInfo=function(){var R=Ut(),V=function(we){return we};for(var he in d!==null&&(V=ti.encryptor(R,0)),G("<<"),G("/Producer ("+ms(V("jsPDF "+Kt.version))+")"),it)it.hasOwnProperty(he)&&it[he]&&G("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+ms(V(it[he]))+")");G("/CreationDate ("+ms(V(B))+")"),G(">>"),G("endobj")},po=h.__private__.putCatalog=function(R){var V=(R=R||{}).rootDictionaryObjId||ps;switch(Ut(),G("<<"),G("/Type /Catalog"),G("/Pages "+V+" 0 R"),se||(se="fullwidth"),se){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+se;he.substr(he.length-1)==="%"&&(se=parseInt(se)/100),typeof se=="number"&&G("/OpenAction [3 0 R /XYZ null null "+k(se)+"]")}switch(Pe||(Pe="continuous"),Pe){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}De&&G("/PageMode /"+De),me.publish("putCatalog"),G(">>"),G("endobj")},$r=h.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(ce+1)),G("/Root "+ce+" 0 R"),G("/Info "+(ce-1)+" 0 R"),d!==null&&G("/Encrypt "+ti.oid+" 0 R"),G("/ID [ <"+U+"> <"+U+"> ]"),G(">>")},rs=h.__private__.putHeader=function(){G("%PDF-"+m),G("%ºß¬à")},Ys=h.__private__.putXRef=function(){var R="0000000000";G("xref"),G("0 "+(ce+1)),G("0000000000 65535 f ");for(var V=1;V<=ce;V++)typeof ue[V]=="function"?G((R+ue[V]()).slice(-10)+" 00000 n "):ue[V]!==void 0?G((R+ue[V]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},mo=h.__private__.buildDocument=function(){var R;ce=0,oe=0,ve=[],ue=[],pe=[],ps=Wn(),Ws=Wn(),W(ve),me.publish("buildDocument"),rs(),ho(),(function(){me.publish("putAdditionalObjects");for(var he=0;he<pe.length;he++){var we=pe[he];or(we.objId,!0),G(we.content),G("endobj")}me.publish("postPutAdditionalObjects")})(),R=[],(function(){for(var he in Ct)Ct.hasOwnProperty(he)&&(f===!1||f===!0&&p.hasOwnProperty(he))&&Sc(Ct[he])})(),(function(){var he;for(he in nn)nn.hasOwnProperty(he)&&dp(nn[he])})(),(function(){for(var he in Ce)Ce.hasOwnProperty(he)&&Ou(Ce[he])})(),(function(he){var we;for(we in Vt)Vt.hasOwnProperty(we)&&(Vt[we]instanceof Vf?Gs(Vt[we]):Vt[we]instanceof sm&&jc(Vt[we],he))})(R),me.publish("putResources"),R.forEach(yf),yf({resourcesOid:Ws,objectOid:Number.MAX_SAFE_INTEGER}),me.publish("postPutResources"),d!==null&&(ti.oid=Ut(),G("<<"),G("/Filter /Standard"),G("/V "+ti.v),G("/R "+ti.r),G("/U <"+ti.toHexString(ti.U)+">"),G("/O <"+ti.toHexString(ti.O)+">"),G("/P "+ti.P),G(">>"),G("endobj")),ns(),po();var V=oe;return Ys(),$r(),G("startxref"),G(""+V),G("%%EOF"),W(xe[q]),ve.join(`
`)},Dl=h.__private__.getBlob=function(R){return new Blob([Qe(R)],{type:"application/pdf"})},ha=h.output=h.__private__.output=(ln=function(R,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",R){case void 0:return mo();case"save":h.save(V.filename);break;case"arraybuffer":return Qe(mo());case"blob":return Dl(mo());case"bloburi":case"bloburl":if(gn.URL!==void 0&&typeof gn.URL.createObjectURL=="function")return gn.URL&&gn.URL.createObjectURL(Dl(mo()))||void 0;Tr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",we=mo();try{he=V7(we)}catch{he=V7(unescape(encodeURIComponent(we)))}return"data:application/pdf;filename="+V.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(gn)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Ae=V.pdfObjectUrl,We="");var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",Dt=gn.open();return Dt!==null&&Dt.document.write(nt),Dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(gn)==="[object Window]"){var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',xn=gn.open();if(xn!==null){xn.document.write(Ht);var Nn=this;xn.document.documentElement.querySelector("#pdfViewer").onload=function(){xn.document.title=V.filename,xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(gn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',ni=gn.open();if(ni!==null&&(ni.document.write(cr),ni.document.title=V.filename),ni||typeof safari>"u")return ni;break;case"datauri":case"dataurl":return gn.document.location.href=this.output("datauristring",V);default:return null}},ln.foo=function(){try{return ln.apply(this,arguments)}catch(he){var R=he.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var V="Error in function "+R.split(`
`)[0].split("<")[0]+": "+he.message;if(!gn.console)throw new Error(V);gn.console.error(V,he),gn.alert&&alert(V)}},ln.foo.bar=ln,ln.foo),_c=function(R){return Array.isArray(Y)===!0&&Y.indexOf(R)>-1};switch(r){case"pt":It=1;break;case"mm":It=72/25.4;break;case"cm":It=72/2.54;break;case"in":It=72;break;case"px":It=_c("px_scaling")==1?.75:96/72;break;case"pc":case"em":It=12;break;case"ex":It=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);It=r}var ti=null;ae(),z();var bf=h.__private__.getPageInfo=h.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[R].objId,pageNumber:R,pageContext:Nt[R]}},Xg=h.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Nt)if(Nt[V].objId===R)break;return bf(V)},Pu=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Nt[q].objId,pageNumber:q,pageContext:Nt[q]}};h.addPage=function(){return at.apply(this,arguments),this},h.setPage=function(){return Dn.apply(this,arguments),W.call(this,xe[q]),this},h.insertPage=function(R){return this.addPage(),this.movePage(q,R),this},h.movePage=function(R,V){var he,we;if(R>V){he=xe[R],we=Nt[R];for(var Ae=R;Ae>V;Ae--)xe[Ae]=xe[Ae-1],Nt[Ae]=Nt[Ae-1];xe[V]=he,Nt[V]=we,this.setPage(V)}else if(R<V){he=xe[R],we=Nt[R];for(var We=R;We<V;We++)xe[We]=xe[We+1],Nt[We]=Nt[We+1];xe[V]=he,Nt[V]=we,this.setPage(V)}return this},h.deletePage=function(){return zt.apply(this,arguments),this},h.__private__.text=h.text=function(R,V,he,we,Ae){var We,nt,Dt,Ht,xn,Nn,cr,ni,Oi,Dr=(we=we||{}).scope||this;if(typeof R=="number"&&typeof V=="number"&&(typeof he=="string"||Array.isArray(he))){var zi=he;he=V,V=R,R=zi}if(arguments[3]instanceof gt==0?(Dt=arguments[4],Ht=arguments[5],Sr(cr=arguments[3])==="object"&&cr!==null||(typeof Dt=="string"&&(Ht=Dt,Dt=null),typeof cr=="string"&&(Ht=cr,cr=null),typeof cr=="number"&&(Dt=cr,cr=null),we={flags:cr,angle:Dt,align:Ht})):(j("The transform parameter of text() with a Matrix value"),Oi=Ae),isNaN(V)||isNaN(he)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Dr;var Pi,gs="",vo=typeof we.lineHeightFactor=="number"?we.lineHeightFactor:Pt,pa=Dr.internal.scaleFactor;function Ob(fr){return fr=fr.split("	").join(Array(we.TabLen||9).join(" ")),ms(fr,cr)}function bp(fr){for(var Cr,Ni=fr.concat(),qi=[],Pc=Ni.length;Pc--;)typeof(Cr=Ni.shift())=="string"?qi.push(Cr):Array.isArray(fr)&&(Cr.length===1||Cr[1]===void 0&&Cr[2]===void 0)?qi.push(Cr[0]):qi.push([Cr[0],Cr[1],Cr[2]]);return qi}function Ef(fr,Cr){var Ni;if(typeof fr=="string")Ni=Cr(fr)[0];else if(Array.isArray(fr)){for(var qi,Pc,hv=fr.concat(),Sp=[],Rb=hv.length;Rb--;)typeof(qi=hv.shift())=="string"?Sp.push(Cr(qi)[0]):Array.isArray(qi)&&typeof qi[0]=="string"&&(Pc=Cr(qi[0],qi[1],qi[2]),Sp.push([Pc[0],Pc[1],Pc[2]]));Ni=Sp}return Ni}var Iu=!1,Af=!0;if(typeof R=="string")Iu=!0;else if(Array.isArray(R)){var Cf=R.concat();nt=[];for(var kf,Os=Cf.length;Os--;)(typeof(kf=Cf.shift())!="string"||Array.isArray(kf)&&typeof kf[0]!="string")&&(Af=!1);Iu=Af}if(Iu===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Tf=Re/Dr.internal.scaleFactor,Of=Tf*(vo-1);switch(we.baseline){case"bottom":he-=Of;break;case"top":he+=Tf-Of;break;case"hanging":he+=Tf-2*Of;break;case"middle":he+=Tf/2-Of}if((Nn=we.maxWidth||0)>0&&(typeof R=="string"?R=Dr.splitTextToSize(R,Nn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(fr,Cr){return fr.concat(Dr.splitTextToSize(Cr,Nn))},[]))),We={text:R,x:V,y:he,options:we,mutex:{pdfEscape:ms,activeFontKey:pt,fonts:Ct,activeFontSize:Re}},me.publish("preProcessText",We),R=We.text,Dt=(we=We.options).angle,Oi instanceof gt==0&&Dt&&typeof Dt=="number"){Dt*=Math.PI/180,we.rotationDirection===0&&(Dt=-Dt),S===N&&(Dt=-Dt);var iv=Math.cos(Dt),sv=Math.sin(Dt);Oi=new gt(iv,sv,-sv,iv,0,0)}else Dt&&Dt instanceof gt&&(Oi=Dt);S!==N||Oi||(Oi=ft),(xn=we.charSpace||yp)!==void 0&&(gs+=_(M(xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ni=we.horizontalScale)!==void 0&&(gs+=_(100*ni)+` Tz
`),we.lang;var li=-1,Tc=we.renderingMode!==void 0?we.renderingMode:we.stroke,wp=Dr.internal.getCurrentPageInfo().pageContext;switch(Tc){case 0:case!1:case"fill":li=0;break;case 1:case!0:case"stroke":li=1;break;case 2:case"fillThenStroke":li=2;break;case 3:case"invisible":li=3;break;case 4:case"fillAndAddForClipping":li=4;break;case 5:case"strokeAndAddPathForClipping":li=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":li=6;break;case 7:case"addToPathForClipping":li=7}var Pb=wp.usedRenderingMode!==void 0?wp.usedRenderingMode:-1;li!==-1?gs+=li+` Tr
`:Pb!==-1&&(gs+=`0 Tr
`),li!==-1&&(wp.usedRenderingMode=li),Ht=we.align||"left";var yo,Pf=Re*vo,av=Dr.internal.pageSize.getWidth(),ov=Ct[pt];xn=we.charSpace||yp,Nn=we.maxWidth||0,cr=Object.assign({autoencode:!0,noBOM:!0},we.flags);var Lu=[],Mf=function(fr){return Dr.getStringUnitWidth(fr,{font:ov,charSpace:xn,fontSize:Re,doKerning:!1})*Re/pa};if(Object.prototype.toString.call(R)==="[object Array]"){var La;nt=bp(R),Ht!=="left"&&(yo=nt.map(Mf));var Fa,Fu=0;if(Ht==="right"){V-=yo[0],R=[],Os=nt.length;for(var Oc=0;Oc<Os;Oc++)Oc===0?(Fa=Ec(V),La=Ac(he)):(Fa=M(Fu-yo[Oc]),La=-Pf),R.push([nt[Oc],Fa,La]),Fu=yo[Oc]}else if(Ht==="center"){V-=yo[0]/2,R=[],Os=nt.length;for(var Bu=0;Bu<Os;Bu++)Bu===0?(Fa=Ec(V),La=Ac(he)):(Fa=M((Fu-yo[Bu])/2),La=-Pf),R.push([nt[Bu],Fa,La]),Fu=yo[Bu]}else if(Ht==="left"){R=[],Os=nt.length;for(var lv=0;lv<Os;lv++)R.push(nt[lv])}else if(Ht==="justify"&&ov.encoding==="Identity-H"){R=[],Os=nt.length,Nn=Nn!==0?Nn:av;for(var Np=0,wi=0;wi<Os;wi++)if(La=wi===0?Ac(he):-Pf,Fa=wi===0?Ec(V):Np,wi<Os-1){var Mb=M((Nn-yo[wi])/(nt[wi].split(" ").length-1)),Il=nt[wi].split(" ");R.push([Il[0]+" ",Fa,La]),Np=0;for(var Ll=1;Ll<Il.length;Ll++){var cv=(Mf(Il[Ll-1]+" "+Il[Ll])-Mf(Il[Ll]))*pa+Mb;Ll==Il.length-1?R.push([Il[Ll],cv,0]):R.push([Il[Ll]+" ",cv,0]),Np-=cv}}else R.push([nt[wi],Fa,La]);R.push(["",Np,0])}else{if(Ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Os=nt.length,Nn=Nn!==0?Nn:av,wi=0;wi<Os;wi++){La=wi===0?Ac(he):-Pf,Fa=wi===0?Ec(V):0;var uv=nt[wi].split(" ").length-1,dv=uv>0?(Nn-yo[wi])/uv:0;wi<Os-1?Lu.push(_(M(dv))):Lu.push(0),R.push([nt[wi],Fa,La])}}}(typeof we.R2L=="boolean"?we.R2L:Ne)===!0&&(R=Ef(R,function(fr,Cr,Ni){return[fr.split("").reverse().join(""),Cr,Ni]})),We={text:R,x:V,y:he,options:we,mutex:{pdfEscape:ms,activeFontKey:pt,fonts:Ct,activeFontSize:Re}},me.publish("postProcessText",We),R=We.text,Pi=We.mutex.isHex||!1;var fv=Ct[pt].encoding;fv!=="WinAnsiEncoding"&&fv!=="StandardEncoding"||(R=Ef(R,function(fr,Cr,Ni){return[Ob(fr),Cr,Ni]})),nt=bp(R),R=[];for(var $u,zu,qu,Rf=Array.isArray(nt[0])?1:0,Uu="",Df=function(fr,Cr,Ni){var qi="";return Ni instanceof gt?(Ni=typeof we.angle=="number"?lt(Ni,new gt(1,0,0,1,fr,Cr)):lt(new gt(1,0,0,1,fr,Cr),Ni),S===N&&(Ni=lt(new gt(1,0,0,-1,0,0),Ni)),qi=Ni.join(" ")+` Tm
`):qi=_(fr)+" "+_(Cr)+` Td
`,qi},xo=0;xo<nt.length;xo++){switch(Uu="",Rf){case 1:qu=(Pi?"<":"(")+nt[xo][0]+(Pi?">":")"),$u=parseFloat(nt[xo][1]),zu=parseFloat(nt[xo][2]);break;case 0:qu=(Pi?"<":"(")+nt[xo]+(Pi?">":")"),$u=Ec(V),zu=Ac(he)}Lu!==void 0&&Lu[xo]!==void 0&&(Uu=Lu[xo]+` Tw
`),xo===0?R.push(Uu+Df($u,zu,Oi)+qu):Rf===0?R.push(Uu+qu):Rf===1&&R.push(Uu+Df($u,zu,Oi)+qu)}R=Rf===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Fl=`BT
/`;return Fl+=pt+" "+Re+` Tf
`,Fl+=_(Re*vo)+` TL
`,Fl+=wf+`
`,Fl+=gs,Fl+=R,G(Fl+="ET"),p[pt]=!0,Dr};var pp=h.__private__.clip=h.clip=function(R){return G(R==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return pp("evenodd")},h.__private__.discardPath=h.discardPath=function(){return G("n"),this};var xi=h.__private__.isValidStyle=function(R){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(V=!0),V};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(R){return xi(R)&&(u=R),this};var mp=h.__private__.getStyle=h.getStyle=function(R){var V=u;switch(R){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=R}return V},Mu=h.close=function(){return G("h"),this};h.stroke=function(){return G("S"),this},h.fill=function(R){return tn("f",R),this},h.fillEvenOdd=function(R){return tn("f*",R),this},h.fillStroke=function(R){return tn("B",R),this},h.fillStrokeEvenOdd=function(R){return tn("B*",R),this};var tn=function(R,V){Sr(V)==="object"?dr(V,R):G(R)},Ru=function(R){R===null||S===N&&R===void 0||(R=mp(R),G(R))};function bi(R,V,he,we,Ae){var We=new sm(V||this.boundingBox,he||this.xStep,we||this.yStep,this.gState,Ae||this.matrix);We.stream=this.stream;var nt=R+"$$"+this.cloneIndex+++"$$";return _t(nt,We),We}var dr=function(R,V){var he=fn[R.key],we=Vt[he];if(we instanceof Vf)G("q"),G(Du(V)),we.gState&&h.setGState(we.gState),G(R.matrix.toString()+" cm"),G("/"+he+" sh"),G("Q");else if(we instanceof sm){var Ae=new gt(1,0,0,-1,0,_f());R.matrix&&(Ae=Ae.multiply(R.matrix||ft),he=bi.call(we,R.key,R.boundingBox,R.xStep,R.yStep,Ae).id),G("q"),G("/Pattern cs"),G("/"+he+" scn"),we.gState&&h.setGState(we.gState),G(V),G("Q")}},Du=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Da=h.moveTo=function(R,V){return G(_(M(R))+" "+_(I(V))+" m"),this},Jo=h.lineTo=function(R,V){return G(_(M(R))+" "+_(I(V))+" l"),this},go=h.curveTo=function(R,V,he,we,Ae,We){return G([_(M(R)),_(I(V)),_(M(he)),_(I(we)),_(M(Ae)),_(I(We)),"c"].join(" ")),this};h.__private__.line=h.line=function(R,V,he,we,Ae){if(isNaN(R)||isNaN(V)||isNaN(he)||isNaN(we)||!xi(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return S===b?this.lines([[he-R,we-V]],R,V,[1,1],Ae||"S"):this.lines([[he-R,we-V]],R,V,[1,1]).stroke()},h.__private__.lines=h.lines=function(R,V,he,we,Ae,We){var nt,Dt,Ht,xn,Nn,cr,ni,Oi,Dr,zi,Pi,gs;if(typeof R=="number"&&(gs=he,he=V,V=R,R=gs),we=we||[1,1],We=We||!1,isNaN(V)||isNaN(he)||!Array.isArray(R)||!Array.isArray(we)||!xi(Ae)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Da(V,he),nt=we[0],Dt=we[1],xn=R.length,zi=V,Pi=he,Ht=0;Ht<xn;Ht++)(Nn=R[Ht]).length===2?(zi=Nn[0]*nt+zi,Pi=Nn[1]*Dt+Pi,Jo(zi,Pi)):(cr=Nn[0]*nt+zi,ni=Nn[1]*Dt+Pi,Oi=Nn[2]*nt+zi,Dr=Nn[3]*Dt+Pi,zi=Nn[4]*nt+zi,Pi=Nn[5]*Dt+Pi,go(cr,ni,Oi,Dr,zi,Pi));return We&&Mu(),Ru(Ae),this},h.path=function(R){for(var V=0;V<R.length;V++){var he=R[V],we=he.c;switch(he.op){case"m":Da(we[0],we[1]);break;case"l":Jo(we[0],we[1]);break;case"c":go.apply(this,we);break;case"h":Mu()}}return this},h.__private__.rect=h.rect=function(R,V,he,we,Ae){if(isNaN(R)||isNaN(V)||isNaN(he)||isNaN(we)||!xi(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return S===b&&(we=-we),G([_(M(R)),_(I(V)),_(M(he)),_(M(we)),"re"].join(" ")),Ru(Ae),this},h.__private__.triangle=h.triangle=function(R,V,he,we,Ae,We,nt){if(isNaN(R)||isNaN(V)||isNaN(he)||isNaN(we)||isNaN(Ae)||isNaN(We)||!xi(nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-R,we-V],[Ae-he,We-we],[R-Ae,V-We]],R,V,[1,1],nt,!0),this},h.__private__.roundedRect=h.roundedRect=function(R,V,he,we,Ae,We,nt){if(isNaN(R)||isNaN(V)||isNaN(he)||isNaN(we)||isNaN(Ae)||isNaN(We)||!xi(nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Dt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*he),We=Math.min(We,.5*we),this.lines([[he-2*Ae,0],[Ae*Dt,0,Ae,We-We*Dt,Ae,We],[0,we-2*We],[0,We*Dt,-Ae*Dt,We,-Ae,We],[2*Ae-he,0],[-Ae*Dt,0,-Ae,-We*Dt,-Ae,-We],[0,2*We-we],[0,-We*Dt,Ae*Dt,-We,Ae,-We]],R+Ae,V,[1,1],nt,!0),this},h.__private__.ellipse=h.ellipse=function(R,V,he,we,Ae){if(isNaN(R)||isNaN(V)||isNaN(he)||isNaN(we)||!xi(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*he,nt=4/3*(Math.SQRT2-1)*we;return Da(R+he,V),go(R+he,V-nt,R+We,V-we,R,V-we),go(R-We,V-we,R-he,V-nt,R-he,V),go(R-he,V+nt,R-We,V+we,R,V+we),go(R+We,V+we,R+he,V+nt,R+he,V),Ru(Ae),this},h.__private__.circle=h.circle=function(R,V,he,we){if(isNaN(R)||isNaN(V)||isNaN(he)||!xi(we))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,V,he,he,we)},h.setFont=function(R,V,he){return he&&(V=T(V,he)),pt=Xr(R,V,{disableWarning:!1}),this};var wt=h.__private__.getFont=h.getFont=function(){return Ct[Xr.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var R,V,he={};for(R in en)if(en.hasOwnProperty(R))for(V in he[R]=[],en[R])en[R].hasOwnProperty(V)&&he[R].push(V);return he},h.addFont=function(R,V,he,we,Ae){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(he=T(he,we)),hp.call(this,R,V,he,Ae=Ae||"Identity-H")};var Pt,bn=t.lineWidth||.200025,jt=h.__private__.getLineWidth=h.getLineWidth=function(){return bn},Ti=h.__private__.setLineWidth=h.setLineWidth=function(R){return bn=R,G(_(M(R))+" w"),this};h.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(R,V){if(R=R||[],V=V||0,isNaN(V)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(he){return _(M(he))}).join(" "),V=_(M(V)),G("["+R+"] "+V+" d"),this};var Ia=h.__private__.getLineHeight=h.getLineHeight=function(){return Re*Pt};h.__private__.getLineHeight=h.getLineHeight=function(){return Re*Pt};var Jg=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Pt=R),this},Zg=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Pt};Jg(t.lineHeight);var Ec=h.__private__.getHorizontalCoordinate=function(R){return M(R)},Ac=h.__private__.getVerticalCoordinate=function(R){return S===N?R:Nt[q].mediaBox.topRightY-Nt[q].mediaBox.bottomLeftY-M(R)},Kj=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(R){return _(Ec(R))},Gj=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(R){return _(Ac(R))},gp=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return uo(gp)},h.__private__.setStrokeColor=h.setDrawColor=function(R,V,he,we){return gp=Ma({ch1:R,ch2:V,ch3:he,ch4:we,pdfColorType:"draw",precision:2}),G(gp),this};var Qg=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return uo(Qg)},h.__private__.setFillColor=h.setFillColor=function(R,V,he,we){return Qg=Ma({ch1:R,ch2:V,ch3:he,ch4:we,pdfColorType:"fill",precision:2}),G(Qg),this};var wf=t.textColor||"0 g",vp=h.__private__.getTextColor=h.getTextColor=function(){return uo(wf)};h.__private__.setTextColor=h.setTextColor=function(R,V,he,we){return wf=Ma({ch1:R,ch2:V,ch3:he,ch4:we,pdfColorType:"text",precision:3}),this};var yp=t.charSpace,Yj=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(yp||0)};h.__private__.setCharSpace=h.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return yp=R,this};var ev=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(R){var V=h.CapJoinStyles[R];if(V===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ev=V,G(V+" J"),this};var tv=0;h.__private__.setLineJoin=h.setLineJoin=function(R){var V=h.CapJoinStyles[R];if(V===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tv=V,G(V+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(_(M(R))+" M"),this},h.GState=nN,h.setGState=function(R){(R=typeof R=="string"?nn[vr[R]]:Nf(null,R)).equals(ar)||(G("/"+R.id+" gs"),ar=R)};var Nf=function(R,V){if(!R||!vr[R]){var he=!1;for(var we in nn)if(nn.hasOwnProperty(we)&&nn[we].equals(V)){he=!0;break}if(he)V=nn[we];else{var Ae="GS"+(Object.keys(nn).length+1).toString(10);nn[Ae]=V,V.id=Ae}return R&&(vr[R]=V.id),me.publish("addGState",V),V}};h.addGState=function(R,V){return Nf(R,V),this},h.saveGraphicsState=function(){return G("q"),qn.push({key:pt,size:Re,color:wf}),this},h.restoreGraphicsState=function(){G("Q");var R=qn.pop();return pt=R.key,Re=R.size,wf=R.color,ar=null,this},h.setCurrentTransformationMatrix=function(R){return G(R.toString()+" cm"),this},h.comment=function(R){return G("#"+R),this};var Sf=function(R,V){var he=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(We){isNaN(We)||(he=parseFloat(We))}});var we=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return we},set:function(We){isNaN(We)||(we=parseFloat(We))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(We){Ae=We.toString()}}),this},nv=function(R,V,he,we){Sf.call(this,R,V),this.type="rect";var Ae=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(nt){isNaN(nt)||(Ae=parseFloat(nt))}});var We=we||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(nt){isNaN(nt)||(We=parseFloat(nt))}}),this},xp=function(){this.page=on,this.currentPage=q,this.pages=xe.slice(0),this.pagesContext=Nt.slice(0),this.x=mt,this.y=yn,this.matrix=pn,this.width=Eb(q),this.height=Cc(q),this.outputDestination=Se,this.id="",this.objectNumber=-1};xp.prototype.restore=function(){on=this.page,q=this.currentPage,Nt=this.pagesContext,xe=this.pages,mt=this.x,yn=this.y,pn=this.matrix,Ab(q,this.width),kc(q,this.height),Se=this.outputDestination};var rv=function(R,V,he,we,Ae){mn.push(new xp),on=q=0,xe=[],mt=R,yn=V,pn=Ae,xf([he,we])};for(var jf in h.beginFormObject=function(R,V,he,we,Ae){return rv(R,V,he,we,Ae),this},h.endFormObject=function(R){return(function(V){if(ot[V])mn.pop().restore();else{var he=new xp,we="Xo"+(Object.keys(Ce).length+1).toString(10);he.id=we,ot[V]=we,Ce[we]=he,me.publish("addFormObject",he),mn.pop().restore()}})(R),this},h.doFormObject=function(R,V){var he=Ce[ot[R]];return G("q"),G(V.toString()+" cm"),G("/"+he.id+" Do"),G("Q"),this},h.getFormObject=function(R){var V=Ce[ot[R]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},h.save=function(R,V){return R=R||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(Hf(Dl(mo()),R),typeof Hf.unload=="function"&&gn.setTimeout&&setTimeout(Hf.unload,911),this):new Promise(function(he,we){try{var Ae=Hf(Dl(mo()),R);typeof Hf.unload=="function"&&gn.setTimeout&&setTimeout(Hf.unload,911),he(Ae)}catch(We){we(We.message)}})},Kt.API)Kt.API.hasOwnProperty(jf)&&(jf==="events"&&Kt.API.events.length?(function(R,V){var he,we,Ae;for(Ae=V.length-1;Ae!==-1;Ae--)he=V[Ae][0],we=V[Ae][1],R.subscribe.apply(R,[he].concat(typeof we=="function"?[we]:we))})(me,Kt.API.events):h[jf]=Kt.API[jf]);function Eb(R){return Nt[R].mediaBox.topRightX-Nt[R].mediaBox.bottomLeftX}function Ab(R,V){Nt[R].mediaBox.topRightX=V+Nt[R].mediaBox.bottomLeftX}function Cc(R){return Nt[R].mediaBox.topRightY-Nt[R].mediaBox.bottomLeftY}function kc(R,V){Nt[R].mediaBox.topRightY=V+Nt[R].mediaBox.bottomLeftY}var Cb=h.getPageWidth=function(R){return Eb(R=R||q)/It},kb=h.setPageWidth=function(R,V){Ab(R,V*It)},_f=h.getPageHeight=function(R){return Cc(R=R||q)/It},Tb=h.setPageHeight=function(R,V){kc(R,V*It)};return h.internal={pdfEscape:ms,getStyle:mp,getFont:wt,getFontSize:ge,getCharSpace:Yj,getTextColor:vp,getLineHeight:Ia,getLineHeightFactor:Zg,getLineWidth:jt,write:_e,getHorizontalCoordinate:Ec,getVerticalCoordinate:Ac,getCoordinateString:Kj,getVerticalCoordinateString:Gj,collections:{},newObject:Ut,newAdditionalObject:ki,newObjectDeferred:Wn,newObjectDeferredBegin:or,getFilters:Ra,putStream:Ks,events:me,scaleFactor:It,pageSize:{getWidth:function(){return Cb(q)},setWidth:function(R){kb(q,R)},getHeight:function(){return _f(q)},setHeight:function(R){Tb(q,R)}},encryptionOptions:d,encryption:ti,getEncryptor:function(R){return d!==null?ti.encryptor(R,0):function(V){return V}},output:ha,getNumberOfPages:lr,pages:xe,out:G,f2:k,f3:O,getPageInfo:bf,getPageInfoByObjId:Xg,getCurrentPageInfo:Pu,getPDFVersion:g,Point:Sf,Rectangle:nv,Matrix:gt,hasHotfix:_c},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Cb(q)},set:function(R){kb(q,R)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return _f(q)},set:function(R){Tb(q,R)},enumerable:!0,configurable:!0}),function(R){for(var V=0,he=ze.length;V<he;V++){var we=hp.call(this,R[V][0],R[V][1],R[V][2],ze[V][3],!0);f===!1&&(p[we]=!0);var Ae=R[V][0].split("-");fp({id:we,fontName:Ae[0],fontStyle:Ae[1]||""})}me.publish("addFonts",{fonts:Ct,dictionary:en})}.call(h,ze),pt="F1",at(i,n),me.publish("initialized"),h}Vp.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Vp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Vp.prototype.processOwnerPassword=function(t,e){return k5(C5(e).substr(0,5),t)},Vp.prototype.encryptor=function(t,e){var n=C5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return k5(n,r)}},nN.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Sr(t)!==Sr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Kt.API={events:[]},Kt.version="3.0.3";var hi=Kt.API,mD=1,cp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(t){return t.toFixed(2)},ed=function(t){return t.toFixed(5)};hi.__acroform__={};var Pa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Y7=function(t){return t*mD},$l=function(t){var e=new Gee,n=Rt.internal.getHeight(t)||0,r=Rt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Sn(r)),Number(Sn(n))],e},MLe=hi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},RLe=hi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},DLe=hi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ei=hi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DLe(t,e-1)},Ai=hi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return MLe(t,e-1)},Ci=hi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return RLe(t,e-1)},ILe=hi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(s)||0,[Number(Sn(c.lowerLeft_X)),Number(Sn(c.lowerLeft_Y)),Number(Sn(c.upperRight_X)),Number(Sn(c.upperRight_Y))]},LLe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=T5(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Sn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=$l(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},T5=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var s=n,o=Rt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Rt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(k,O,M){if(k+1<i.length){var I=O+" "+i[k+1][0];return A0(I,t,M).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=A0("3",t,s).height,p=t.multiline?o-s:(o-f)/2,h=p+=2,m=0,g=0,v=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+A0(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",b=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var S=!1;if(i[N].length!==1&&v!==i[N].length-1){if((f+2)*(b+2)+2>o)continue e;y+=i[N][v],S=!0,g=N,N--}else{y=(y+=i[N][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var E=parseInt(N),C=c(E,y,s),T=N>=i.length-1;if(C&&!T){y+=" ",v=0;continue}if(C||T){if(T)g=E;else if(t.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(b+2)+2>o)continue e;g=E}}for(var _="",j=m;j<=g;j++){var P=i[j];if(t.multiline){if(j===g){_+=P[v]+" ",v=(v+1)%P.length;continue}if(j===m){_+=P[P.length-1]+" ";continue}}_+=P[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=A0(_,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=Sn(u)+" "+Sn(h)+` Td
`,e+="("+cp(_)+`) Tj
`,e+=-Sn(u)+` 0 Td
`,h=-(s+2),d=0,m=S?g:g+1,b++,y=""}break}return r.text=e,r.fontSize=s,r},A0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},FLe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},BLe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},$Le=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ol.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(FLe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mD=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Yee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&BLe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=ILe(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Rt.createDefaultAppearanceStream(l),Sr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=LLe(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var h=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(i,l)),f+="/"+o+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,l)),f+="/"+o+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&(function(g,v){for(var y in g)if(g.hasOwnProperty(y)){var b=y,N=g[y];v.internal.newObjectDeferredBegin(N.objId,!0),Sr(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete g[b]}})(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Kee=hi.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Sr(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+cp(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ak=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+cp(r(t))+")"},Ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ql.prototype.toString=function(){return this.objId+" 0 R"},Ql.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ql.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Kee(i,this.objId,this.scope)}):i instanceof Ql?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Gee=function(){Ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Pa(Gee,Ql);var Yee=function(){Ql.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cp(n(t))+")"}},set:function(n){t=n}})};Pa(Yee,Ql);var Ol=function t(){Ql.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ei(e,3)},set:function(y){y?this.F=Ai(e,3):this.F=Ci(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof rN)return;s="FieldObject"+t.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+cp(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/mD:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof rN||this instanceof yh))return ak(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ls==0?ak(p,this.objId,this.scope):p},set:function(y){y=y.toString(),p=this instanceof ls==0?y.substr(0,1)==="("?Rp(y.substr(1,y.length-2)):Rp(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ls==1?Rp(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof ls==1?"/"+y:y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ls==0?ak(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof ls==0?y.substr(0,1)==="("?Rp(y.substr(1,y.length-2)):Rp(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ls==1?Rp(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof ls==1?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,1)},set:function(y){y?this.Ff=Ai(this.Ff,1):this.Ff=Ci(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,2)},set:function(y){y?this.Ff=Ai(this.Ff,2):this.Ff=Ci(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,3)},set:function(y){y?this.Ff=Ai(this.Ff,3):this.Ff=Ci(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};Pa(Ol,Ql);var vm=function(){Ol.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Kee(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=(function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,18)},set:function(n){n?this.Ff=Ai(this.Ff,18):this.Ff=Ci(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ai(this.Ff,19):this.Ff=Ci(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,20)},set:function(n){n?(this.Ff=Ai(this.Ff,20),e.sort()):this.Ff=Ci(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,22)},set:function(n){n?this.Ff=Ai(this.Ff,22):this.Ff=Ci(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(n){n?this.Ff=Ai(this.Ff,23):this.Ff=Ci(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,27)},set:function(n){n?this.Ff=Ai(this.Ff,27):this.Ff=Ci(this.Ff,27)}}),this.hasAppearanceStream=!1};Pa(vm,Ol);var ym=function(){vm.call(this),this.fontName="helvetica",this.combo=!1};Pa(ym,vm);var xm=function(){ym.call(this),this.combo=!0};Pa(xm,ym);var d1=function(){xm.call(this),this.edit=!0};Pa(d1,xm);var ls=function(){Ol.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,15)},set:function(n){n?this.Ff=Ai(this.Ff,15):this.Ff=Ci(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,16)},set:function(n){n?this.Ff=Ai(this.Ff,16):this.Ff=Ci(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,17)},set:function(n){n?this.Ff=Ai(this.Ff,17):this.Ff=Ci(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(n){n?this.Ff=Ai(this.Ff,26):this.Ff=Ci(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cp(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Sr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Pa(ls,Ol);var f1=function(){ls.call(this),this.pushButton=!0};Pa(f1,ls);var bm=function(){ls.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Pa(bm,ls);var rN=function(){var t,e;Ol.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+cp(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Sr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pa(rN,Ol),bm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},bm.prototype.createOption=function(t){var e=new rN;return e.Parent=this,e.optionName=t,this.Kids.push(e),zLe.call(this.scope,e),e};var h1=function(){ls.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};Pa(h1,ls);var yh=function(){Ol.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,13)},set:function(e){e?this.Ff=Ai(this.Ff,13):this.Ff=Ci(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,21)},set:function(e){e?this.Ff=Ai(this.Ff,21):this.Ff=Ci(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,23)},set:function(e){e?this.Ff=Ai(this.Ff,23):this.Ff=Ci(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,24)},set:function(e){e?this.Ff=Ai(this.Ff,24):this.Ff=Ci(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,25)},set:function(e){e?this.Ff=Ai(this.Ff,25):this.Ff=Ci(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,26)},set:function(e){e?this.Ff=Ai(this.Ff,26):this.Ff=Ci(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pa(yh,Ol);var p1=function(){yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ei(this.Ff,14)},set:function(t){t?this.Ff=Ai(this.Ff,14):this.Ff=Ci(this.Ff,14)}}),this.password=!0};Pa(p1,yh);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=T5(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Sn(Rt.internal.getWidth(t))+" "+Sn(Rt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Sn(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=$l(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Rt.internal.getHeight(t),o=Rt.internal.getWidth(t),l=T5(t,t.caption);return i.push("1 g"),i.push("0 0 "+Sn(o)+" "+Sn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Sn(o-1)+" "+Sn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Sn(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(Rt.internal.getWidth(t))+" "+Sn(Rt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Rt.RadioButton.Circle.YesNormal,e.D[t]=Rt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=$l(t);e.scope=t.scope;var n=[],r=Rt.internal.getWidth(t)<=Rt.internal.getHeight(t)?Rt.internal.getWidth(t)/4:Rt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Rt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ed(Rt.internal.getWidth(t)/2)+" "+ed(Rt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=[],r=Rt.internal.getWidth(t)<=Rt.internal.getHeight(t)?Rt.internal.getWidth(t)/4:Rt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Rt.internal.Bezier_C).toFixed(5)),o=Number((r*Rt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ed(Rt.internal.getWidth(t)/2)+" "+ed(Rt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ed(Rt.internal.getWidth(t)/2)+" "+ed(Rt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=[],r=Rt.internal.getWidth(t)<=Rt.internal.getHeight(t)?Rt.internal.getWidth(t)/4:Rt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Rt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ed(Rt.internal.getWidth(t)/2)+" "+ed(Rt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Rt.RadioButton.Cross.YesNormal,e.D[t]=Rt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=$l(t);e.scope=t.scope;var n=[],r=Rt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Sn(Rt.internal.getWidth(t)-2)+" "+Sn(Rt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),n.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),n.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),n.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=Rt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(Rt.internal.getWidth(t))+" "+Sn(Rt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(Rt.internal.getWidth(t)-2)+" "+Sn(Rt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(n.x1.x)+" "+Sn(n.x1.y)+" m"),r.push(Sn(n.x2.x)+" "+Sn(n.x2.y)+" l"),r.push(Sn(n.x4.x)+" "+Sn(n.x4.y)+" m"),r.push(Sn(n.x3.x)+" "+Sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=$l(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(Rt.internal.getWidth(t))+" "+Sn(Rt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Rt.internal.getWidth(t),n=Rt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Rt.internal.getWidth=function(t){var e=0;return Sr(t)==="object"&&(e=Y7(t.Rect[2])),e},Rt.internal.getHeight=function(t){var e=0;return Sr(t)==="object"&&(e=Y7(t.Rect[3])),e};var zLe=hi.addField=function(t){if($Le(this,t),!(t instanceof Ol))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};hi.AcroFormChoiceField=vm,hi.AcroFormListBox=ym,hi.AcroFormComboBox=xm,hi.AcroFormEditBox=d1,hi.AcroFormButton=ls,hi.AcroFormPushButton=f1,hi.AcroFormRadioButton=bm,hi.AcroFormCheckBox=h1,hi.AcroFormTextField=yh,hi.AcroFormPasswordField=p1,hi.AcroFormAppearance=Rt,hi.AcroForm={ChoiceField:vm,ListBox:ym,ComboBox:xm,EditBox:d1,Button:ls,PushButton:f1,RadioButton:bm,CheckBox:h1,TextField:yh,PasswordField:p1,Appearance:Rt},Kt.AcroForm={ChoiceField:vm,ListBox:ym,ComboBox:xm,EditBox:d1,Button:ls,PushButton:f1,RadioButton:bm,CheckBox:h1,TextField:yh,PasswordField:p1,Appearance:Rt};Kt.AcroForm;function Xee(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(k,O){var M,I,B,U,D,z=n;if((O=O||n)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(C(k))for(D in r)for(B=r[D],M=0;M<B.length;M+=1){for(U=!0,I=0;I<B[M].length;I+=1)if(B[M][I]!==void 0&&B[M][I]!==k[I]){U=!1;break}if(U===!0){z=D;break}}else for(D in r)for(B=r[D],M=0;M<B.length;M+=1){for(U=!0,I=0;I<B[M].length;I+=1)if(B[M][I]!==void 0&&B[M][I]!==k.charCodeAt(I)){U=!1;break}if(U===!0){z=D;break}}return z===n&&O!==n&&(z=O),z},s=function k(O){for(var M=this.internal.write,I=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:O.width}),U.push({key:"Height",value:O.height}),O.colorSpace===y.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===y.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var D="",z=0,H=O.transparency.length;z<H;z++)D+=O.transparency[z]+" "+O.transparency[z]+" ";U.push({key:"Mask",value:"["+D+"]"})}O.sMask!==void 0&&U.push({key:"SMask",value:O.objectId+1+" 0 R"});var ee=O.filter!==void 0?["/"+O.filter]:void 0;if(I({data:O.data,additionalKeyValues:U,alreadyAppliedFilters:ee,objectId:O.objectId}),M("endobj"),"sMask"in O&&O.sMask!==void 0){var ae,F=(ae=O.sMaskBitsPerComponent)!==null&&ae!==void 0?ae:O.bitsPerComponent,q={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:O.sMask};"filter"in O&&(q.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(O.width),q.filter=O.filter),k.call(this,q)}if(O.colorSpace===y.INDEXED){var Z=this.internal.newObject();I({data:_(new Uint8Array(O.palette)),objectId:Z}),M("endobj")}},o=function(){var k=this.internal.collections[e+"images"];for(var O in k)s.call(this,k[O])},l=function(){var k,O=this.internal.collections[e+"images"],M=this.internal.write;for(var I in O)M("/I"+(k=O[I]).index,k.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[e+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},p=function(k){return Sr(k)==="object"&&k.nodeType===1},h=function(k,O){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var M=""+k.getAttribute("src");if(M.indexOf("data:image/")===0)return u1(unescape(M).split("base64,").pop());var I=t.loadFile(M,!0);if(I!==void 0)return I}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var B;switch(O){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;default:B="image/jpeg"}return u1(k.toDataURL(B,1).split("base64,").pop())}},m=function(k){var O=this.internal.collections[e+"images"];if(O){for(var M in O)if(k===O[M].alias)return O[M]}},g=function(k,O,M){return k||O||(k=-96,O=-96),k<0&&(k=-1*M.width*72/k/this.internal.scaleFactor),O<0&&(O=-1*M.height*72/O/this.internal.scaleFactor),k===0&&(k=O*M.width/M.height),O===0&&(O=k*M.height/M.width),[k,O]},v=function(k,O,M,I,B,U){var D=g.call(this,M,I,B),z=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,ee=u.call(this);if(M=D[0],I=D[1],ee[B.index]=B,U){U*=Math.PI/180;var ae=Math.cos(U),F=Math.sin(U),q=function(te){return te.toFixed(4)},Z=[q(ae),q(F),q(-1*F),q(ae),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,z(k),H(O+I),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([z(M),"0","0",z(I),"0","0","cm"].join(" "))):this.internal.write([z(M),"0","0",z(I),z(k),H(O+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},y=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(k){var O,M,I=0;if(typeof k=="string")for(M=k.length,O=0;O<M;O++)I=(I<<5)-I+k.charCodeAt(O),I|=0;else if(C(k))for(M=k.byteLength/2,O=0;O<M;O++)I=(I<<5)-I+k[O],I|=0;return I},S=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var O=!0;return k.length===0&&(O=!1),k.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(O=!1),O},E=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var O=k.indexOf(",");return O<0?null:k.substring(0,O).trim().endsWith("base64")?k.substring(O+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var C=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},T=t.__addimage__.binaryStringToUint8Array=function(k){for(var O=k.length,M=new Uint8Array(O),I=0;I<O;I++)M[I]=k.charCodeAt(I);return M},_=t.__addimage__.arrayBufferToBinaryString=function(k){for(var O="",M=C(k)?k:new Uint8Array(k),I=0;I<M.length;I+=8192)O+=String.fromCharCode.apply(null,M.subarray(I,I+8192));return O};t.addImage=function(){var k,O,M,I,B,U,D,z,H;if(typeof arguments[1]=="number"?(O=n,M=arguments[1],I=arguments[2],B=arguments[3],U=arguments[4],D=arguments[5],z=arguments[6],H=arguments[7]):(O=arguments[1],M=arguments[2],I=arguments[3],B=arguments[4],U=arguments[5],D=arguments[6],z=arguments[7],H=arguments[8]),Sr(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var ee=k;k=ee.imageData,O=ee.format||O||n,M=ee.x||M||0,I=ee.y||I||0,B=ee.w||ee.width||B,U=ee.h||ee.height||U,D=ee.alias||D,z=ee.compression||z,H=ee.rotation||ee.angle||H}var ae=this.internal.getFilters();if(z===void 0&&ae.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(M)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=j.call(this,k,O,D,z);return v.call(this,M,I,B,U,F,H),this};var j=function(k,O,M,I){var B,U,D;if(typeof k=="string"&&i(k)===n){k=unescape(k);var z=P(k,!1);(z!==""||(z=t.loadFile(k,!0))!==void 0)&&(k=z)}if(p(k)&&(k=h(k,O)),O=i(k,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((D=M)==null||D.length===0)&&(M=(function(H){return typeof H=="string"||C(H)?N(H):C(H.data)?N(H.data):null})(k)),(B=m.call(this,M))||(k instanceof Uint8Array||O==="RGBA"||(U=k,k=T(k)),B=this["process"+O.toUpperCase()](k,d.call(this),M,(function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in t.image_compression?H:b.NONE})(I),U)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},P=t.__addimage__.convertBase64ToBinaryString=function(k,O){O=typeof O!="boolean"||O;var M,I="";if(typeof k=="string"){var B;M=(B=E(k))!==null&&B!==void 0?B:k;try{I=u1(M)}catch(U){if(O)throw S(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};t.getImageProperties=function(k){var O,M,I="";if(p(k)&&(k=h(k)),typeof k=="string"&&i(k)===n&&((I=P(k,!1))===""&&(I=t.loadFile(k)||""),k=I),M=i(k),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(k instanceof Uint8Array||(k=T(k)),!(O=this["process"+M.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=M,O}})(Kt.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Kt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),b=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+h(y(r.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(y(b))+") >>",g.content=s;var N=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(g.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var S=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var E=this.annotations._nameMap[r.options.name];r.options.pageNumber=E.page,r.options.top=E.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var C=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+C+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:u(r),w:c(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,l,c=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(n,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,l,o,s),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(Kt.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(g){var v=0,y=n,b="",N=0;for(v=0;v<g.length;v+=1)y[g.charCodeAt(v)]!==void 0?(N++,typeof(y=y[g.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(y),y=n,N=0),v===g.length-1&&(y=n,b+=g.charAt(v-(N-1)),v-=N-1,N=0)):(y=n,b+=g.charAt(v-N),v-=N,N=0);return b};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(g,v,y){return o(g)?s(g)===!1?-1:!u(g)||!o(v)&&!o(y)||!o(y)&&l(v)||l(g)&&!o(v)||l(g)&&c(v)||l(g)&&l(v)?0:d(g)&&o(v)&&!l(v)&&o(y)&&u(y)?3:l(g)||!o(y)?1:2:-1},h=function(g){var v=0,y=0,b=0,N="",S="",E="",C=(g=g||"").split("\\s+"),T=[];for(v=0;v<C.length;v+=1){for(T.push(""),y=0;y<C[v].length;y+=1)N=C[v][y],S=C[v][y-1],E=C[v][y+1],o(N)?(b=p(N,S,E),T[v]+=b!==-1?String.fromCharCode(e[N.charCodeAt(0)][b]):N):T[v]+=N;T[v]=f(T[v])}return T.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var g,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var b=0;for(y=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?y.push([h(v[b][0]),v[b][1],v[b][2]]):y.push([h(v[b])]);g=y}else g=h(v);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",m])})(Kt.API),Kt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Kt.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,S){return N.concat(v.splitTextToSize(S,y))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)h<(g=this.getStringUnitWidth(c[b],{font:f})*d)&&(h=g);return h!==0&&(m=c.length),{w:h/=p,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var h,m,g,v,y=[],b=[],N=[],S={},E={},C=[],T=[],_=(p=p||{}).autoSize||!1,j=p.printHeaders!==!1,P=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},e),O=typeof p.padding=="number"?p.padding:3,M=p.headerBackgroundColor||"#c8c8c8",I=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=P,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=I,this.setFontSize(P),f==null)b=y=Object.keys(d[0]),N=y.map(function(){return"left"});else if(Array.isArray(f)&&Sr(f[0])==="object")for(y=f.map(function(ee){return ee.name}),b=f.map(function(ee){return ee.prompt||ee.name||""}),N=f.map(function(ee){return ee.align||"left"}),h=0;h<f.length;h+=1)E[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(b=y=f,N=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<y.length;h+=1){for(S[v=y[h]]=d.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),C.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=S[v],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)C.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[v]=Math.max.apply(null,C)+O+O,C=[]}if(j){var B={};for(h=0;h<y.length;h+=1)B[y[h]]={},B[y[h]].text=b[h],B[y[h]].align=N[h];var U=l.call(this,B,E);T=y.map(function(ee){return new s(c,u,E[ee],U,B[ee].text,void 0,B[ee].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var D=f.reduce(function(ee,ae){return ee[ae.name]=ae.align,ee},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var z=l.call(this,d[h],E);for(g=0;g<y.length;g+=1){var H=d[h][y[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:H},this),o.call(this,new s(c,u,E[y[g]],z,H,h+2,D[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}})(Kt.API);var Jee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Zee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],O5=Xee(Zee),Qee=[100,200,300,400,500,600,700,800,900],qLe=Xee(Qee);function ok(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(s){return Jee[s=s||"normal"]?s:"normal"})(t.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(t.weight),i=(function(s){return typeof O5[s=s||"normal"]=="number"?s:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function X7(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var ULe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Z7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Q7(t){return t.trimLeft()}function HLe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function VLe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C0,eq,tq,Dp,k0,nq,rq,iq,lk=["times"];function sq(t,e,n,r,i){var s=4,o=oq;switch(i){case Kt.API.image_compression.FAST:s=1,o=aq;break;case Kt.API.image_compression.MEDIUM:s=6,o=lq;break;case Kt.API.image_compression.SLOW:s=9,o=cq}t=(function(c,u,d,f){for(var p,h=c.length/u,m=new Uint8Array(c.length+h),g=[WLe,aq,oq,lq,cq],v=0;v<h;v+=1){var y=v*u,b=c.subarray(y,y+u);if(f)m.set(f(b,d,p),y+v);else{for(var N=g.length,S=[],E=0;E<N;E+=1)S[E]=g[E](b,d,p);var C=GLe(S.concat());m.set(S[C],y+v)}p=b}return m})(t,e,Math.ceil(n*r/8),o);var l=j5(t,{level:s});return Kt.API.__addimage__.arrayBufferToBinaryString(l)}function WLe(t){var e=Array.apply([],t);return e.unshift(0),e}function aq(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function oq(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function lq(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,l=n&&n[s]||0;i[s+1]=t[s]+256-(o+l>>>1)&255}return i}function cq(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=KLe(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function KLe(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function GLe(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function ck(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return ete(t,i)>>s&o}function uq(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),l=(1<<r)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(t,s,ete(t,s)&~(l<<o)&65535|c)}function ete(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function YLe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,p=null,h=0,m=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&g||(p=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,S=t[e++],E=S>>6&1,C=1<<1+(7&S),T=l,_=c,j=!1;S>>7&&(j=!0,T=e,_=C,e+=3*C);var P=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x:v,y,width:b,height:N,has_local_palette:j,palette_offset:T,palette_size:_,data_offset:P,data_length:e-P,transparent_index:p,interlaced:!!E,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,M){var I=this.frameInfo(O),B=I.width*I.height,U=new Uint8Array(B);dq(t,I.data_offset,U,B);var D=I.palette_offset,z=I.transparent_index;z===null&&(z=256);var H=I.width,ee=n-H,ae=H,F=4*(I.y*n+I.x),q=4*((I.y+I.height)*n+I.x),Z=F,te=4*ee;I.interlaced===!0&&(te+=4*n*7);for(var ce=8,ue=0,ve=U.length;ue<ve;++ue){var oe=U[ue];if(ae===0&&(ae=H,(Z+=te)>=q&&(te=4*ee+4*n*(ce-1),Z=F+(H+ee)*(ce<<1),ce>>=1)),oe===z)Z+=4;else{var pe=t[D+3*oe],xe=t[D+3*oe+1],X=t[D+3*oe+2];M[Z++]=X,M[Z++]=xe,M[Z++]=pe,M[Z++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(O,M){var I=this.frameInfo(O),B=I.width*I.height,U=new Uint8Array(B);dq(t,I.data_offset,U,B);var D=I.palette_offset,z=I.transparent_index;z===null&&(z=256);var H=I.width,ee=n-H,ae=H,F=4*(I.y*n+I.x),q=4*((I.y+I.height)*n+I.x),Z=F,te=4*ee;I.interlaced===!0&&(te+=4*n*7);for(var ce=8,ue=0,ve=U.length;ue<ve;++ue){var oe=U[ue];if(ae===0&&(ae=H,(Z+=te)>=q&&(te=4*ee+4*n*(ce-1),Z=F+(H+ee)*(ce<<1),ce>>=1)),oe===z)Z+=4;else{var pe=t[D+3*oe],xe=t[D+3*oe+1],X=t[D+3*oe+2];M[Z++]=pe,M[Z++]=xe,M[Z++]=X,M[Z++]=255}--ae}}}function dq(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,f=0,p=0,h=t[e++],m=new Int32Array(4096),g=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var v=f&u;if(f>>=c,d-=c,v!==s){if(v===o)break;for(var y=v<l?v:g,b=0,N=y;N>s;)N=m[N]>>8,++b;var S=N;if(p+b+(y!==v?1:0)>r)return void Tr.log("Warning, gif stream longer than expected.");n[p++]=S;var E=p+=b;for(y!==v&&(n[p++]=S),N=y;b--;)N=m[N],n[--E]=255&N,N>>=8;g!==null&&l<4096&&(m[l++]=g<<8|S,l>=u+1&&c<12&&(++c,u=u<<1|1)),g=v}else l=o+1,u=(1<<(c=i+1))-1,g=null}return p!==r&&Tr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function uk(t){var e,n,r,i,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),g=[],v=0,y=7,b=new Array(64),N=new Array(64),S=new Array(64),E=new Array(256),C=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(F,q){for(var Z=0,te=0,ce=new Array,ue=1;ue<=16;ue++){for(var ve=1;ve<=F[ue];ve++)ce[q[te]]=[],ce[q[te]][0]=Z,ce[q[te]][1]=ue,te++,Z++;Z*=2}return ce}function D(F){for(var q=F[0],Z=F[1]-1;Z>=0;)q&1<<Z&&(v|=1<<y),Z--,--y<0&&(v==255?(z(255),z(0)):z(v),y=7,v=0)}function z(F){g.push(F)}function H(F){z(F>>8&255),z(255&F)}function ee(F,q,Z,te,ce){for(var ue,ve=ce[0],oe=ce[240],pe=(function(Re,se){var ge,Ne,De,Le,Pe,qe,ut,it,pt,It,mt=0;for(pt=0;pt<8;++pt){ge=Re[mt],Ne=Re[mt+1],De=Re[mt+2],Le=Re[mt+3],Pe=Re[mt+4],qe=Re[mt+5],ut=Re[mt+6];var yn=ge+(it=Re[mt+7]),pn=ge-it,Ct=Ne+ut,en=Ne-ut,qn=De+qe,Vt=De-qe,fn=Le+Pe,nn=Le-Pe,vr=yn+fn,ar=yn-fn,on=Ct+qn,Nt=Ct-qn;Re[mt]=vr+on,Re[mt+4]=vr-on;var me=.707106781*(Nt+ar);Re[mt+2]=ar+me,Re[mt+6]=ar-me;var Y=.382683433*((vr=nn+Vt)-(Nt=en+pn)),Ce=.5411961*vr+Y,ot=1.306562965*Nt+Y,mn=.707106781*(on=Vt+en),gt=pn+mn,lt=pn-mn;Re[mt+5]=lt+Ce,Re[mt+3]=lt-Ce,Re[mt+1]=gt+ot,Re[mt+7]=gt-ot,mt+=8}for(mt=0,pt=0;pt<8;++pt){ge=Re[mt],Ne=Re[mt+8],De=Re[mt+16],Le=Re[mt+24],Pe=Re[mt+32],qe=Re[mt+40],ut=Re[mt+48];var ft=ge+(it=Re[mt+56]),_t=ge-it,ln=Ne+ut,Ut=Ne-ut,Wn=De+qe,or=De-qe,ki=Le+Pe,ps=Le-Pe,Ws=ft+ki,uo=ft-ki,Ma=ln+Wn,Ra=ln-Wn;Re[mt]=Ws+Ma,Re[mt+32]=Ws-Ma;var Ks=.707106781*(Ra+uo);Re[mt+16]=uo+Ks,Re[mt+48]=uo-Ks;var fo=.382683433*((Ws=ps+or)-(Ra=Ut+_t)),ho=.5411961*Ws+fo,Sc=1.306562965*Ra+fo,Ou=.707106781*(Ma=or+Ut),Gs=_t+Ou,jc=_t-Ou;Re[mt+40]=jc+ho,Re[mt+24]=jc-ho,Re[mt+8]=Gs+Sc,Re[mt+56]=Gs-Sc,mt++}for(pt=0;pt<64;++pt)It=Re[pt]*se[pt],h[pt]=It>0?It+.5|0:It-.5|0;return h})(F,q),xe=0;xe<64;++xe)m[T[xe]]=pe[xe];var X=m[0]-Z;Z=m[0],X==0?D(te[0]):(D(te[p[ue=32767+X]]),D(f[ue]));for(var Se=63;Se>0&&m[Se]==0;)Se--;if(Se==0)return D(ve),Z;for(var W,G=1;G<=Se;){for(var _e=G;m[G]==0&&G<=Se;)++G;var Qe=G-_e;if(Qe>=16){W=Qe>>4;for(var ze=1;ze<=W;++ze)D(oe);Qe&=15}ue=32767+m[G],D(ce[(Qe<<4)+p[ue]]),D(f[ue]),G++}return Se!=63&&D(ve),Z}function ae(F){F=Math.min(Math.max(F,1),100),s!=F&&((function(q){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ce=o((Z[te]*q+50)/100);ce=Math.min(Math.max(ce,1),255),l[T[te]]=ce}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var oe=o((ue[ve]*q+50)/100);oe=Math.min(Math.max(oe,1),255),c[T[ve]]=oe}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,X=0;X<8;X++)for(var Se=0;Se<8;Se++)u[xe]=1/(l[T[xe]]*pe[X]*pe[Se]*8),d[xe]=1/(c[T[xe]]*pe[X]*pe[Se]*8),xe++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,q){q&&ae(q),g=new Array,v=0,y=7,H(65496),H(65504),H(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),H(1),H(1),z(0),z(0),(function(){H(65499),H(132),z(0);for(var Ne=0;Ne<64;Ne++)z(l[Ne]);z(1);for(var De=0;De<64;De++)z(c[De])})(),(function(Ne,De){H(65472),H(17),z(8),H(De),H(Ne),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)})(F.width,F.height),(function(){H(65476),H(418),z(0);for(var Ne=0;Ne<16;Ne++)z(_[Ne+1]);for(var De=0;De<=11;De++)z(j[De]);z(16);for(var Le=0;Le<16;Le++)z(P[Le+1]);for(var Pe=0;Pe<=161;Pe++)z(k[Pe]);z(1);for(var qe=0;qe<16;qe++)z(O[qe+1]);for(var ut=0;ut<=11;ut++)z(M[ut]);z(17);for(var it=0;it<16;it++)z(I[it+1]);for(var pt=0;pt<=161;pt++)z(B[pt])})(),H(65498),H(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Z=0,te=0,ce=0;v=0,y=7,this.encode.displayName="_encode_";for(var ue,ve,oe,pe,xe,X,Se,W,G,_e=F.data,Qe=F.width,ze=F.height,Re=4*Qe,se=0;se<ze;){for(ue=0;ue<Re;){for(xe=Re*se+ue,Se=-1,W=0,G=0;G<64;G++)X=xe+(W=G>>3)*Re+(Se=4*(7&G)),se+W>=ze&&(X-=Re*(se+1+W-ze)),ue+Se>=Re&&(X-=ue+Se-Re+4),ve=_e[X++],oe=_e[X++],pe=_e[X++],b[G]=(C[ve]+C[oe+256|0]+C[pe+512|0]>>16)-128,N[G]=(C[ve+768|0]+C[oe+1024|0]+C[pe+1280|0]>>16)-128,S[G]=(C[ve+1280|0]+C[oe+1536|0]+C[pe+1792|0]>>16)-128;Z=ee(b,u,Z,e,r),te=ee(N,d,te,n,i),ce=ee(S,d,ce,n,i),ue+=32}se+=8}if(y>=0){var ge=[];ge[1]=y+1,ge[0]=(1<<y+1)-1,D(ge)}return H(65497),new Uint8Array(g)},t=t||50,(function(){for(var F=String.fromCharCode,q=0;q<256;q++)E[q]=F(q)})(),e=U(_,j),n=U(O,M),r=U(P,k),i=U(I,B),(function(){for(var F=1,q=2,Z=1;Z<=15;Z++){for(var te=F;te<q;te++)p[32767+te]=Z,f[32767+te]=[],f[32767+te][1]=Z,f[32767+te][0]=te;for(var ce=-(q-1);ce<=-F;ce++)p[32767+ce]=Z,f[32767+ce]=[],f[32767+ce][1]=Z,f[32767+ce][0]=q-1+ce;F<<=1,q<<=1}})(),(function(){for(var F=0;F<256;F++)C[F]=19595*F,C[F+256|0]=38470*F,C[F+512|0]=7471*F+32768,C[F+768|0]=-11059*F,C[F+1024|0]=-21709*F,C[F+1280|0]=32768*F+8421375,C[F+1536|0]=-27439*F,C[F+1792|0]=-5329*F})(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function nl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function fq(t){function e(j){if(!j)throw Error("assert :P")}function n(j,P,k){for(var O=0;4>O;O++)if(j[P+O]!=k.charCodeAt(O))return!0;return!1}function r(j,P,k,O,M){for(var I=0;I<M;I++)j[P+I]=k[O+I]}function i(j,P,k,O){for(var M=0;M<O;M++)j[P+M]=k}function s(j){return new Int32Array(j)}function o(j,P){for(var k=[],O=0;O<j;O++)k.push(new P);return k}function l(j,P){var k=[];return(function O(M,I,B){for(var U=B[I],D=0;D<U&&(M.push(B.length>I+1?[]:new P),!(B.length<I+1));D++)O(M[D],I+1,B)})(k,0,j),k}var c=function(){var j=this;function P(w,A){for(var L=1<<A-1>>>0;w&L;)L>>>=1;return L?(w&L-1)+L:w}function k(w,A,L,$,K){e(!($%L));do w[A+($-=L)]=K;while(0<$)}function O(w,A,L,$,K){if(e(2328>=K),512>=K)var J=s(512);else if((J=s(K))==null)return 0;return(function(Q,ne,ie,de,je,Oe){var fe,Ee,ke=ne,Ue=1<<ie,Te=s(16),Ve=s(16);for(e(je!=0),e(de!=null),e(Q!=null),e(0<ie),Ee=0;Ee<je;++Ee){if(15<de[Ee])return 0;++Te[de[Ee]]}if(Te[0]==je)return 0;for(Ve[1]=0,fe=1;15>fe;++fe){if(Te[fe]>1<<fe)return 0;Ve[fe+1]=Ve[fe]+Te[fe]}for(Ee=0;Ee<je;++Ee)fe=de[Ee],0<de[Ee]&&(Oe[Ve[fe]++]=Ee);if(Ve[15]==1)return(de=new M).g=0,de.value=Oe[0],k(Q,ke,1,Ue,de),Ue;var Ye,rt=-1,tt=Ue-1,Wt=0,Mt=1,On=1,Bt=1<<ie;for(Ee=0,fe=1,je=2;fe<=ie;++fe,je<<=1){if(Mt+=On<<=1,0>(On-=Te[fe]))return 0;for(;0<Te[fe];--Te[fe])(de=new M).g=fe,de.value=Oe[Ee++],k(Q,ke+Wt,je,Bt,de),Wt=P(Wt,fe)}for(fe=ie+1,je=2;15>=fe;++fe,je<<=1){if(Mt+=On<<=1,0>(On-=Te[fe]))return 0;for(;0<Te[fe];--Te[fe]){if(de=new M,(Wt&tt)!=rt){for(ke+=Bt,Ye=1<<(rt=fe)-ie;15>rt&&!(0>=(Ye-=Te[rt]));)++rt,Ye<<=1;Ue+=Bt=1<<(Ye=rt-ie),Q[ne+(rt=Wt&tt)].g=Ye+ie,Q[ne+rt].value=ke-ne-rt}de.g=fe-ie,de.value=Oe[Ee++],k(Q,ke+(Wt>>ie),je,Bt,de),Wt=P(Wt,fe)}}return Mt!=2*Ve[15]-1?0:Ue})(w,A,L,$,K,J)}function M(){this.value=this.g=0}function I(){this.value=this.g=0}function B(){this.G=o(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Mf,I)}function U(w,A,L,$){e(w!=null),e(A!=null),e(2147483648>$),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=A,w.pa=L,w.Jd=A,w.Yc=L+$,w.Zc=4<=$?L+$-4+1:L,ve(w)}function D(w,A){for(var L=0;0<A--;)L|=pe(w,128)<<A;return L}function z(w,A){var L=D(w,A);return oe(w)?-L:L}function H(w,A,L,$){var K,J=0;for(e(w!=null),e(A!=null),e(4294967288>$),w.Sb=$,w.Ra=0,w.u=0,w.h=0,4<$&&($=4),K=0;K<$;++K)J+=A[L+K]<<8*K;w.Ra=J,w.bb=$,w.oa=A,w.pa=L}function ee(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Fu-8>>>0,++w.bb,w.u-=8;te(w)&&(w.h=1,w.u=0)}function ae(w,A){if(e(0<=A),!w.h&&A<=Fa){var L=Z(w)&La[A];return w.u+=A,ee(w),L}return w.h=1,w.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(w){return w.Ra>>>(w.u&Fu-1)>>>0}function te(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Fu}function ce(w,A){w.u=A,w.h=te(w)}function ue(w){w.u>=Oc&&(e(w.u>=Oc),ee(w))}function ve(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function oe(w){return D(w,1)}function pe(w,A){var L=w.Ca;0>w.b&&ve(w);var $=w.b,K=L*A>>>8,J=(w.I>>>$>K)+0;for(J?(L-=K,w.I-=K+1<<$>>>0):L=K+1,$=L,K=0;256<=$;)K+=8,$>>=8;return $=7^K+Bu[$],w.b-=$,w.Ca=(L<<$)-1,J}function xe(w,A,L){w[A+0]=L>>24&255,w[A+1]=L>>16&255,w[A+2]=L>>8&255,w[A+3]=255&L}function X(w,A){return w[A+0]|w[A+1]<<8}function Se(w,A){return X(w,A)|w[A+2]<<16}function W(w,A){return X(w,A)|X(w,A+2)<<16}function G(w,A){var L=1<<A;return e(w!=null),e(0<A),w.X=s(L),w.X==null?0:(w.Mb=32-A,w.Xa=A,1)}function _e(w,A){e(w!=null),e(A!=null),e(w.Xa==A.Xa),r(A.X,0,w.X,0,1<<A.Xa)}function Qe(){this.X=[],this.Xa=this.Mb=0}function ze(w,A,L,$){e(L!=null),e($!=null);var K=L[0],J=$[0];return K==0&&(K=(w*J+A/2)/A),J==0&&(J=(A*K+w/2)/w),0>=K||0>=J?0:(L[0]=K,$[0]=J,1)}function Re(w,A){return w+(1<<A)-1>>>A}function se(w,A){return((4278255360&w)+(4278255360&A)>>>0&4278255360)+((16711935&w)+(16711935&A)>>>0&16711935)>>>0}function ge(w,A){j[A]=function(L,$,K,J,Q,ne,ie){var de;for(de=0;de<Q;++de){var je=j[w](ne[ie+de-1],K,J+de);ne[ie+de]=se(L[$+de],je)}}}function Ne(){this.ud=this.hd=this.jd=0}function De(w,A){return((4278124286&(w^A))>>>1)+(w&A)>>>0}function Le(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Pe(w,A){return Le(w+(w-A+.5>>1))}function qe(w,A,L){return Math.abs(A-L)-Math.abs(w-L)}function ut(w,A,L,$,K,J,Q){for($=J[Q-1],L=0;L<K;++L)J[Q+L]=$=se(w[A+L],$)}function it(w,A,L,$,K){var J;for(J=0;J<L;++J){var Q=w[A+J],ne=Q>>8&255,ie=16711935&(ie=(ie=16711935&Q)+((ne<<16)+ne));$[K+J]=(4278255360&Q)+ie>>>0}}function pt(w,A){A.jd=255&w,A.hd=w>>8&255,A.ud=w>>16&255}function It(w,A,L,$,K,J){var Q;for(Q=0;Q<$;++Q){var ne=A[L+Q],ie=ne>>>8,de=ne,je=255&(je=(je=ne>>>16)+((w.jd<<24>>24)*(ie<<24>>24)>>>5));de=255&(de=(de+=(w.hd<<24>>24)*(ie<<24>>24)>>>5)+((w.ud<<24>>24)*(je<<24>>24)>>>5)),K[J+Q]=(4278255360&ne)+(je<<16)+de}}function mt(w,A,L,$,K){j[A]=function(J,Q,ne,ie,de,je,Oe,fe,Ee){for(ie=Oe;ie<fe;++ie)for(Oe=0;Oe<Ee;++Oe)de[je++]=K(ne[$(J[Q++])])},j[w]=function(J,Q,ne,ie,de,je,Oe){var fe=8>>J.b,Ee=J.Ea,ke=J.K[0],Ue=J.w;if(8>fe)for(J=(1<<J.b)-1,Ue=(1<<fe)-1;Q<ne;++Q){var Te,Ve=0;for(Te=0;Te<Ee;++Te)Te&J||(Ve=$(ie[de++])),je[Oe++]=K(ke[Ve&Ue]),Ve>>=fe}else j["VP8LMapColor"+L](ie,de,ke,Ue,je,Oe,Q,ne,Ee)}}function yn(w,A,L,$,K){for(L=A+L;A<L;){var J=w[A++];$[K++]=J>>16&255,$[K++]=J>>8&255,$[K++]=255&J}}function pn(w,A,L,$,K){for(L=A+L;A<L;){var J=w[A++];$[K++]=J>>16&255,$[K++]=J>>8&255,$[K++]=255&J,$[K++]=J>>24&255}}function Ct(w,A,L,$,K){for(L=A+L;A<L;){var J=(Q=w[A++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;$[K++]=J,$[K++]=Q}}function en(w,A,L,$,K){for(L=A+L;A<L;){var J=(Q=w[A++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;$[K++]=J,$[K++]=Q}}function qn(w,A,L,$,K){for(L=A+L;A<L;){var J=w[A++];$[K++]=255&J,$[K++]=J>>8&255,$[K++]=J>>16&255}}function Vt(w,A,L,$,K,J){if(J==0)for(L=A+L;A<L;)xe($,((J=w[A++])[0]>>24|J[1]>>8&65280|J[2]<<8&16711680|J[3]<<24)>>>0),K+=32;else r($,K,w,A,L)}function fn(w,A){j[A][0]=j[w+"0"],j[A][1]=j[w+"1"],j[A][2]=j[w+"2"],j[A][3]=j[w+"3"],j[A][4]=j[w+"4"],j[A][5]=j[w+"5"],j[A][6]=j[w+"6"],j[A][7]=j[w+"7"],j[A][8]=j[w+"8"],j[A][9]=j[w+"9"],j[A][10]=j[w+"10"],j[A][11]=j[w+"11"],j[A][12]=j[w+"12"],j[A][13]=j[w+"13"],j[A][14]=j[w+"0"],j[A][15]=j[w+"0"]}function nn(w){return w==Zj||w==Qj||w==$b||w==e2}function vr(){this.eb=[],this.size=this.A=this.fb=0}function ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function on(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new ar,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function me(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Y(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Ce(w,A){var L=w.T,$=A.ba.f.RGBA,K=$.eb,J=$.fb+w.ka*$.A,Q=wo[A.ba.S],ne=w.y,ie=w.O,de=w.f,je=w.N,Oe=w.ea,fe=w.W,Ee=A.cc,ke=A.dc,Ue=A.Mc,Te=A.Nc,Ve=w.ka,Ye=w.ka+w.T,rt=w.U,tt=rt+1>>1;for(Ve==0?Q(ne,ie,null,null,de,je,Oe,fe,de,je,Oe,fe,K,J,null,null,rt):(Q(A.ec,A.fc,ne,ie,Ee,ke,Ue,Te,de,je,Oe,fe,K,J-$.A,K,J,rt),++L);Ve+2<Ye;Ve+=2)Ee=de,ke=je,Ue=Oe,Te=fe,je+=w.Rc,fe+=w.Rc,J+=2*$.A,Q(ne,(ie+=2*w.fa)-w.fa,ne,ie,Ee,ke,Ue,Te,de,je,Oe,fe,K,J-$.A,K,J,rt);return ie+=w.fa,w.j+Ye<w.o?(r(A.ec,A.fc,ne,ie,rt),r(A.cc,A.dc,de,je,tt),r(A.Mc,A.Nc,Oe,fe,tt),L--):1&Ye||Q(ne,ie,null,null,de,je,Oe,fe,de,je,Oe,fe,K,J+$.A,null,null,rt),L}function ot(w,A,L){var $=w.F,K=[w.J];if($!=null){var J=w.U,Q=A.ba.S,ne=Q==Bb||Q==$b;A=A.ba.f.RGBA;var ie=[0],de=w.ka;ie[0]=w.T,w.Kb&&(de==0?--ie[0]:(--de,K[0]-=w.width),w.j+w.ka+w.T==w.o&&(ie[0]=w.o-w.j-de));var je=A.eb;de=A.fb+de*A.A,w=CI($,K[0],w.width,J,ie,je,de+(ne?0:3),A.A),e(L==ie),w&&nn(Q)&&pv(je,de,ne,J,ie,A.A)}return 0}function mn(w){var A=w.ma,L=A.ba.S,$=11>L,K=L==Lb||L==Fb||L==Bb||L==Jj||L==12||nn(L);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!av(A.Oa,w,K?11:12))return 0;if(K&&nn(L)&&Ob(),w.da)alert("todo:use_scaling");else{if($){if(A.Ib=Y,w.Kb){if(L=w.U+1>>1,A.memory=s(w.U+2*L),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+w.U,A.Mc=A.cc,A.Nc=A.dc+L,A.Ib=Ce,Ob()}}else alert("todo:EmitYUV");K&&(A.Jb=ot,$&&vo())}if($&&!HI){for(w=0;256>w;++w)use[w]=89858*(w-128)+qb>>zb,hse[w]=-22014*(w-128)+qb,fse[w]=-45773*(w-128),dse[w]=113618*(w-128)+qb>>zb;for(w=gv;w<r2;++w)A=76283*(w-16)+qb>>zb,pse[w-gv]=li(A,255),mse[w-gv]=li(A+8>>4,15);HI=1}return 1}function gt(w){var A=w.ma,L=w.U,$=w.T;return e(!(1&w.ka)),0>=L||0>=$?0:(L=A.Ib(w,A),A.Jb!=null&&A.Jb(w,A,L),A.Dc+=L,1)}function lt(w){w.ma.memory=null}function ft(w,A,L,$){return ae(w,8)!=47?0:(A[0]=ae(w,14)+1,L[0]=ae(w,14)+1,$[0]=ae(w,1),ae(w,3)!=0?0:!w.h)}function _t(w,A){if(4>w)return w+1;var L=w-2>>1;return(2+(1&w)<<L)+ae(A,L)+1}function ln(w,A){return 120<A?A-120:1<=(L=((L=Xie[A-1])>>4)*w+(8-(15&L)))?L:1;var L}function Ut(w,A,L){var $=Z(L),K=w[A+=255&$].g-8;return 0<K&&(ce(L,L.u+8),$=Z(L),A+=w[A].value,A+=$&(1<<K)-1),ce(L,L.u+w[A].g),w[A].value}function Wn(w,A,L){return L.g+=w.g,L.value+=w.value<<A>>>0,e(8>=L.g),w.g}function or(w,A,L){var $=w.xc;return e((A=$==0?0:w.vc[w.md*(L>>$)+(A>>$)])<w.Wb),w.Ya[A]}function ki(w,A,L,$){var K=w.ab,J=w.c*A,Q=w.C;A=Q+A;var ne=L,ie=$;for($=w.Ta,L=w.Ua;0<K--;){var de=w.gc[K],je=Q,Oe=A,fe=ne,Ee=ie,ke=(ie=$,ne=L,de.Ea);switch(e(je<Oe),e(Oe<=de.nc),de.hc){case 2:wi(fe,Ee,(Oe-je)*ke,ie,ne);break;case 0:var Ue=je,Te=Oe,Ve=ie,Ye=ne,rt=(Bt=de).Ea;Ue==0&&(lv(fe,Ee,null,null,1,Ve,Ye),ut(fe,Ee+1,0,0,rt-1,Ve,Ye+1),Ee+=rt,Ye+=rt,++Ue);for(var tt=1<<Bt.b,Wt=tt-1,Mt=Re(rt,Bt.b),On=Bt.K,Bt=Bt.w+(Ue>>Bt.b)*Mt;Ue<Te;){var Kn=On,Ui=Bt,Pn=1;for(Np(fe,Ee,Ve,Ye-rt,1,Ve,Ye);Pn<rt;){var $t=(Pn&~Wt)+tt;$t>rt&&($t=rt),(0,uv[Kn[Ui++]>>8&15])(fe,Ee+ +Pn,Ve,Ye+Pn-rt,$t-Pn,Ve,Ye+Pn),Pn=$t}Ee+=rt,Ye+=rt,++Ue&Wt||(Bt+=Mt)}Oe!=de.nc&&r(ie,ne-ke,ie,ne+(Oe-je-1)*ke,ke);break;case 1:for(ke=fe,Te=Ee,rt=(fe=de.Ea)-(Ye=fe&~(Ve=(Ee=1<<de.b)-1)),Ue=Re(fe,de.b),tt=de.K,de=de.w+(je>>de.b)*Ue;je<Oe;){for(Wt=tt,Mt=de,On=new Ne,Bt=Te+Ye,Kn=Te+fe;Te<Bt;)pt(Wt[Mt++],On),dv(On,ke,Te,Ee,ie,ne),Te+=Ee,ne+=Ee;Te<Kn&&(pt(Wt[Mt++],On),dv(On,ke,Te,rt,ie,ne),Te+=rt,ne+=rt),++je&Ve||(de+=Ue)}break;case 3:if(fe==ie&&Ee==ne&&0<de.b){for(Te=ie,fe=ke=ne+(Oe-je)*ke-(Ye=(Oe-je)*Re(de.Ea,de.b)),Ee=ie,Ve=ne,Ue=[],Ye=(rt=Ye)-1;0<=Ye;--Ye)Ue[Ye]=Ee[Ve+Ye];for(Ye=rt-1;0<=Ye;--Ye)Te[fe+Ye]=Ue[Ye];Mb(de,je,Oe,ie,ke,ie,ne)}else Mb(de,je,Oe,fe,Ee,ie,ne)}ne=$,ie=L}ie!=L&&r($,L,ne,ie,J)}function ps(w,A){var L=w.V,$=w.Ba+w.c*w.C,K=A-w.C;if(e(A<=w.l.o),e(16>=K),0<K){var J=w.l,Q=w.Ta,ne=w.Ua,ie=J.width;if(ki(w,K,L,$),K=ne=[ne],e((L=w.C)<($=A)),e(J.v<J.va),$>J.o&&($=J.o),L<J.j){var de=J.j-L;L=J.j,K[0]+=de*ie}if(L>=$?L=0:(K[0]+=4*J.v,J.ka=L-J.j,J.U=J.va-J.v,J.T=$-L,L=1),L){if(ne=ne[0],11>(L=w.ca).S){var je=L.f.RGBA,Oe=($=L.S,K=J.U,J=J.T,de=je.eb,je.A),fe=J;for(je=je.fb+w.Ma*je.A;0<fe--;){var Ee=Q,ke=ne,Ue=K,Te=de,Ve=je;switch($){case Ib:fv(Ee,ke,Ue,Te,Ve);break;case Lb:$u(Ee,ke,Ue,Te,Ve);break;case Zj:$u(Ee,ke,Ue,Te,Ve),pv(Te,Ve,0,Ue,1,0);break;case DI:Rf(Ee,ke,Ue,Te,Ve);break;case Fb:Vt(Ee,ke,Ue,Te,Ve,1);break;case Qj:Vt(Ee,ke,Ue,Te,Ve,1),pv(Te,Ve,0,Ue,1,0);break;case Bb:Vt(Ee,ke,Ue,Te,Ve,0);break;case $b:Vt(Ee,ke,Ue,Te,Ve,0),pv(Te,Ve,1,Ue,1,0);break;case Jj:zu(Ee,ke,Ue,Te,Ve);break;case e2:zu(Ee,ke,Ue,Te,Ve),AI(Te,Ve,Ue,1,0);break;case II:qu(Ee,ke,Ue,Te,Ve);break;default:e(0)}ne+=ie,je+=Oe}w.Ma+=J}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=L.height)}}w.C=A,e(w.C<=w.i)}function Ws(w){var A;if(0<w.ua)return 0;for(A=0;A<w.Wb;++A){var L=w.Ya[A].G,$=w.Ya[A].H;if(0<L[1][$[1]+0].g||0<L[2][$[2]+0].g||0<L[3][$[3]+0].g)return 0}return 1}function uo(w,A,L,$,K,J){if(w.Z!=0){var Q=w.qd,ne=w.rd;for(e(Vu[w.Z]!=null);A<L;++A)Vu[w.Z](Q,ne,$,K,$,K,J),Q=$,ne=K,K+=J;w.qd=Q,w.rd=ne}}function Ma(w,A){var L=w.l.ma,$=L.Z==0||L.Z==1?w.l.j:w.C;if($=w.C<$?$:w.C,e(A<=w.l.o),A>$){var K=w.l.width,J=L.ca,Q=L.tb+K*$,ne=w.V,ie=w.Ba+w.c*$,de=w.gc;e(w.ab==1),e(de[0].hc==3),Ll(de[0],$,A,ne,ie,J,Q),uo(L,$,A,J,Q,K)}w.C=w.Ma=A}function Ra(w,A,L,$,K,J,Q){var ne=w.$/$,ie=w.$%$,de=w.m,je=w.s,Oe=L+w.$,fe=Oe;K=L+$*K;var Ee=L+$*J,ke=280+je.ua,Ue=w.Pb?ne:16777216,Te=0<je.ua?je.Wa:null,Ve=je.wc,Ye=Oe<Ee?or(je,ie,ne):null;e(w.C<J),e(Ee<=K);var rt=!1;e:for(;;){for(;rt||Oe<Ee;){var tt=0;if(ne>=Ue){var Wt=Oe-L;e((Ue=w).Pb),Ue.wd=Ue.m,Ue.xd=Wt,0<Ue.s.ua&&_e(Ue.s.Wa,Ue.s.vb),Ue=ne+Zie}if(ie&Ve||(Ye=or(je,ie,ne)),e(Ye!=null),Ye.Qb&&(A[Oe]=Ye.qb,rt=!0),!rt)if(ue(de),Ye.jc){tt=de,Wt=A;var Mt=Oe,On=Ye.pd[Z(tt)&Mf-1];e(Ye.jc),256>On.g?(ce(tt,tt.u+On.g),Wt[Mt]=On.value,tt=0):(ce(tt,tt.u+On.g-256),e(256<=On.value),tt=On.value),tt==0&&(rt=!0)}else tt=Ut(Ye.G[0],Ye.H[0],de);if(de.h)break;if(rt||256>tt){if(!rt)if(Ye.nd)A[Oe]=(Ye.qb|tt<<8)>>>0;else{if(ue(de),rt=Ut(Ye.G[1],Ye.H[1],de),ue(de),Wt=Ut(Ye.G[2],Ye.H[2],de),Mt=Ut(Ye.G[3],Ye.H[3],de),de.h)break;A[Oe]=(Mt<<24|rt<<16|tt<<8|Wt)>>>0}if(rt=!1,++Oe,++ie>=$&&(ie=0,++ne,Q!=null&&ne<=J&&!(ne%16)&&Q(w,ne),Te!=null))for(;fe<Oe;)tt=A[fe++],Te.X[(506832829*tt&4294967295)>>>Te.Mb]=tt}else if(280>tt){if(tt=_t(tt-256,de),Wt=Ut(Ye.G[4],Ye.H[4],de),ue(de),Wt=ln($,Wt=_t(Wt,de)),de.h)break;if(Oe-L<Wt||K-Oe<tt)break e;for(Mt=0;Mt<tt;++Mt)A[Oe+Mt]=A[Oe+Mt-Wt];for(Oe+=tt,ie+=tt;ie>=$;)ie-=$,++ne,Q!=null&&ne<=J&&!(ne%16)&&Q(w,ne);if(e(Oe<=K),ie&Ve&&(Ye=or(je,ie,ne)),Te!=null)for(;fe<Oe;)tt=A[fe++],Te.X[(506832829*tt&4294967295)>>>Te.Mb]=tt}else{if(!(tt<ke))break e;for(rt=tt-280,e(Te!=null);fe<Oe;)tt=A[fe++],Te.X[(506832829*tt&4294967295)>>>Te.Mb]=tt;tt=Oe,e(!(rt>>>(Wt=Te).Xa)),A[tt]=Wt.X[rt],rt=!0}rt||e(de.h==te(de))}if(w.Pb&&de.h&&Oe<K)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&_e(w.s.vb,w.s.Wa);else{if(de.h)break e;Q?.(w,ne>J?J:ne),w.a=0,w.$=Oe-L}return 1}return w.a=3,0}function Ks(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var A=w.Wa;A!=null&&(A.X=null),w.vb=null,e(w!=null)}function fo(){var w=new Ht;return w==null?null:(w.a=0,w.xb=BI,fn("Predictor","VP8LPredictors"),fn("Predictor","VP8LPredictors_C"),fn("PredictorAdd","VP8LPredictorsAdd"),fn("PredictorAdd","VP8LPredictorsAdd_C"),wi=it,dv=It,fv=yn,$u=pn,zu=Ct,qu=en,Rf=qn,j.VP8LMapColor32b=Il,j.VP8LMapColor8b=cv,w)}function ho(w,A,L,$,K){var J=1,Q=[w],ne=[A],ie=$.m,de=$.s,je=null,Oe=0;e:for(;;){if(L)for(;J&&ae(ie,1);){var fe=Q,Ee=ne,ke=$,Ue=1,Te=ke.m,Ve=ke.gc[ke.ab],Ye=ae(Te,2);if(ke.Oc&1<<Ye)J=0;else{switch(ke.Oc|=1<<Ye,Ve.hc=Ye,Ve.Ea=fe[0],Ve.nc=Ee[0],Ve.K=[null],++ke.ab,e(4>=ke.ab),Ye){case 0:case 1:Ve.b=ae(Te,3)+2,Ue=ho(Re(Ve.Ea,Ve.b),Re(Ve.nc,Ve.b),0,ke,Ve.K),Ve.K=Ve.K[0];break;case 3:var rt,tt=ae(Te,8)+1,Wt=16<tt?0:4<tt?1:2<tt?2:3;if(fe[0]=Re(Ve.Ea,Wt),Ve.b=Wt,rt=Ue=ho(tt,1,0,ke,Ve.K)){var Mt,On=tt,Bt=Ve,Kn=1<<(8>>Bt.b),Ui=s(Kn);if(Ui==null)rt=0;else{var Pn=Bt.K[0],$t=Bt.w;for(Ui[0]=Bt.K[0][0],Mt=1;Mt<1*On;++Mt)Ui[Mt]=se(Pn[$t+Mt],Ui[Mt-1]);for(;Mt<4*Kn;++Mt)Ui[Mt]=0;Bt.K[0]=null,Bt.K[0]=Ui,rt=1}}Ue=rt;break;case 2:break;default:e(0)}J=Ue}}if(Q=Q[0],ne=ne[0],J&&ae(ie,1)&&!(J=1<=(Oe=ae(ie,4))&&11>=Oe)){$.a=3;break e}var xt;if(xt=J)t:{var Si,An,Jn,zr=$,vs=Q,Xs=ne,ci=Oe,Ps=L,Js=zr.m,Hi=zr.s,er=[null],yr=1,ui=0,xr=Jie[ci];n:for(;;){if(Ps&&ae(Js,1)){var ys=ae(Js,3)+2,Qo=Re(vs,ys),ji=Re(Xs,ys),ma=Qo*ji;if(!ho(Qo,ji,0,zr,er))break n;for(er=er[0],Hi.xc=ys,Si=0;Si<ma;++Si){var kr=er[Si]>>8&65535;er[Si]=kr,kr>=yr&&(yr=kr+1)}}if(Js.h)break n;for(An=0;5>An;++An){var Vi=LI[An];!An&&0<ci&&(Vi+=1<<ci),ui<Vi&&(ui=Vi)}var $a=o(yr*xr,M),Zs=yr,za=o(Zs,B);if(za==null)var qa=null;else e(65536>=Zs),qa=za;var ga=s(ui);if(qa==null||ga==null||$a==null){zr.a=1;break n}var Ua=$a;for(Si=Jn=0;Si<yr;++Si){var Ir=qa[Si],Ha=Ir.G,el=Ir.H,If=0,Rc=1,xs=0;for(An=0;5>An;++An){Vi=LI[An],Ha[An]=Ua,el[An]=Jn,!An&&0<ci&&(Vi+=1<<ci);i:{var Hb,i2=Vi,Vb=zr,vv=ga,yse=Ua,xse=Jn,s2=0,Wu=Vb.m,bse=ae(Wu,1);if(i(vv,0,0,i2),bse){var wse=ae(Wu,1)+1,Nse=ae(Wu,1),KI=ae(Wu,Nse==0?1:8);vv[KI]=1,wse==2&&(vv[KI=ae(Wu,8)]=1);var Wb=1}else{var GI=s(19),YI=ae(Wu,4)+4;if(19<YI){Vb.a=3;var Kb=0;break i}for(Hb=0;Hb<YI;++Hb)GI[Yie[Hb]]=ae(Wu,3);var a2=void 0,yv=void 0,XI=Vb,Sse=GI,Gb=i2,JI=vv,o2=0,Ku=XI.m,ZI=8,QI=o(128,M);r:for(;O(QI,0,7,Sse,19);){if(ae(Ku,1)){var jse=2+2*ae(Ku,3);if((a2=2+ae(Ku,jse))>Gb)break r}else a2=Gb;for(yv=0;yv<Gb&&a2--;){ue(Ku);var e4=QI[0+(127&Z(Ku))];ce(Ku,Ku.u+e4.g);var jp=e4.value;if(16>jp)JI[yv++]=jp,jp!=0&&(ZI=jp);else{var _se=jp==16,t4=jp-16,Ese=Kie[t4],n4=ae(Ku,Wie[t4])+Ese;if(yv+n4>Gb)break r;for(var Ase=_se?ZI:0;0<n4--;)JI[yv++]=Ase}}o2=1;break r}o2||(XI.a=3),Wb=o2}(Wb=Wb&&!Wu.h)&&(s2=O(yse,xse,8,vv,i2)),Wb&&s2!=0?Kb=s2:(Vb.a=3,Kb=0)}if(Kb==0)break n;if(Rc&&Gie[An]==1&&(Rc=Ua[Jn].g==0),If+=Ua[Jn].g,Jn+=Kb,3>=An){var xv,l2=ga[0];for(xv=1;xv<Vi;++xv)ga[xv]>l2&&(l2=ga[xv]);xs+=l2}}if(Ir.nd=Rc,Ir.Qb=0,Rc&&(Ir.qb=(Ha[3][el[3]+0].value<<24|Ha[1][el[1]+0].value<<16|Ha[2][el[2]+0].value)>>>0,If==0&&256>Ha[0][el[0]+0].value&&(Ir.Qb=1,Ir.qb+=Ha[0][el[0]+0].value<<8)),Ir.jc=!Ir.Qb&&6>xs,Ir.jc){var Yb,Dc=Ir;for(Yb=0;Yb<Mf;++Yb){var Gu=Yb,Yu=Dc.pd[Gu],Xb=Dc.G[0][Dc.H[0]+Gu];256<=Xb.value?(Yu.g=Xb.g+256,Yu.value=Xb.value):(Yu.g=0,Yu.value=0,Gu>>=Wn(Xb,8,Yu),Gu>>=Wn(Dc.G[1][Dc.H[1]+Gu],16,Yu),Gu>>=Wn(Dc.G[2][Dc.H[2]+Gu],0,Yu),Wn(Dc.G[3][Dc.H[3]+Gu],24,Yu))}}}Hi.vc=er,Hi.Wb=yr,Hi.Ya=qa,Hi.yc=$a,xt=1;break t}xt=0}if(!(J=xt)){$.a=3;break e}if(0<Oe){if(de.ua=1<<Oe,!G(de.Wa,Oe)){$.a=1,J=0;break e}}else de.ua=0;var c2=$,r4=Q,Cse=ne,u2=c2.s,d2=u2.xc;if(c2.c=r4,c2.i=Cse,u2.md=Re(r4,d2),u2.wc=d2==0?-1:(1<<d2)-1,L){$.xb=sse;break e}if((je=s(Q*ne))==null){$.a=1,J=0;break e}J=(J=Ra($,je,0,Q,ne,ne,null))&&!ie.h;break e}return J?(K!=null?K[0]=je:(e(je==null),e(L)),$.$=0,L||Ks(de)):Ks(de),J}function Sc(w,A){var L=w.c*w.i,$=L+A+16*A;return e(w.c<=A),w.V=s($),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+L+A,1)}function Ou(w,A){var L=w.C,$=A-L,K=w.V,J=w.Ba+w.c*L;for(e(A<=w.l.o);0<$;){var Q=16<$?16:$,ne=w.l.ma,ie=w.l.width,de=ie*Q,je=ne.ca,Oe=ne.tb+ie*L,fe=w.Ta,Ee=w.Ua;ki(w,Q,K,J),kI(fe,Ee,je,Oe,de),uo(ne,L,L+Q,je,Oe,ie),$-=Q,K+=Q*w.c,L+=Q}e(L==A),w.C=w.Ma=A}function Gs(){this.ub=this.yd=this.td=this.Rb=0}function jc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dp(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function yf(){this.Yb=(function(){var w=[];return(function A(L,$,K){for(var J=K[$],Q=0;Q<J&&(L.push(K.length>$+1?[]:0),!(K.length<$+1));Q++)A(L[Q],$+1,K)})(w,0,[3,11]),w})()}function fp(){this.jb=s(3),this.Wc=l([4,8],yf),this.Xc=l([4,17],yf)}function hp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ms(){this.ld=this.La=this.dd=this.tc=0}function xf(){this.Na=this.la=0}function at(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dn(){this.uc=this.M=this.Nb=0,this.wa=Array(new ms),this.Y=0,this.ya=Array(new zt),this.aa=0,this.l=new ns}function lr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Xr(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new Gs,this.Kc=new jc,this.ed=new hp,this.Qa=new dp,this.Ic=this.$c=this.Aa=0,this.D=new Dn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,F),this.ia=0,this.pb=o(4,at),this.Pa=new fp,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new lr),this.Hd=0,this.rb=Array(new xf),this.sb=0,this.wa=Array(new ms),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zt),this.L=this.aa=0,this.gd=l([4,2],ms),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ns(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function po(){var w=new Xr;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,mv||(mv=mo)),w}function $r(w,A,L){return w.a==0&&(w.a=A,w.sc=L,w.cb=0),0}function rs(w,A,L){return 3<=L&&w[A+0]==157&&w[A+1]==1&&w[A+2]==42}function Ys(w,A){if(w==null)return 0;if(w.a=0,w.sc="OK",A==null)return $r(w,2,"null VP8Io passed to VP8GetHeaders()");var L=A.data,$=A.w,K=A.ha;if(4>K)return $r(w,7,"Truncated header.");var J=L[$+0]|L[$+1]<<8|L[$+2]<<16,Q=w.Od;if(Q.Rb=!(1&J),Q.td=J>>1&7,Q.yd=J>>4&1,Q.ub=J>>5,3<Q.td)return $r(w,3,"Incorrect keyframe parameters.");if(!Q.yd)return $r(w,4,"Frame not displayable.");$+=3,K-=3;var ne=w.Kc;if(Q.Rb){if(7>K)return $r(w,7,"cannot parse picture header");if(!rs(L,$,K))return $r(w,3,"Bad code word");ne.c=16383&(L[$+4]<<8|L[$+3]),ne.Td=L[$+4]>>6,ne.i=16383&(L[$+6]<<8|L[$+5]),ne.Ud=L[$+6]>>6,$+=7,K-=7,w.za=ne.c+15>>4,w.Ub=ne.i+15>>4,A.width=ne.c,A.height=ne.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((J=w.Pa).jb,0,255,J.jb.length),e((J=w.Qa)!=null),J.Cb=0,J.Bb=0,J.Fb=1,i(J.Zb,0,0,J.Zb.length),i(J.Lb,0,0,J.Lb)}if(Q.ub>K)return $r(w,7,"bad partition length");U(J=w.m,L,$,Q.ub),$+=Q.ub,K-=Q.ub,Q.Rb&&(ne.Ld=oe(J),ne.Kd=oe(J)),ne=w.Qa;var ie,de=w.Pa;if(e(J!=null),e(ne!=null),ne.Cb=oe(J),ne.Cb){if(ne.Bb=oe(J),oe(J)){for(ne.Fb=oe(J),ie=0;4>ie;++ie)ne.Zb[ie]=oe(J)?z(J,7):0;for(ie=0;4>ie;++ie)ne.Lb[ie]=oe(J)?z(J,6):0}if(ne.Bb)for(ie=0;3>ie;++ie)de.jb[ie]=oe(J)?D(J,8):255}else ne.Bb=0;if(J.Ka)return $r(w,3,"cannot parse segment header");if((ne=w.ed).zd=oe(J),ne.Tb=D(J,6),ne.wb=D(J,3),ne.Pc=oe(J),ne.Pc&&oe(J)){for(de=0;4>de;++de)oe(J)&&(ne.vd[de]=z(J,6));for(de=0;4>de;++de)oe(J)&&(ne.od[de]=z(J,6))}if(w.L=ne.Tb==0?0:ne.zd?1:2,J.Ka)return $r(w,3,"cannot parse filter header");var je=K;if(K=ie=$,$=ie+je,ne=je,w.Xb=(1<<D(w.m,2))-1,je<3*(de=w.Xb))L=7;else{for(ie+=3*de,ne-=3*de,je=0;je<de;++je){var Oe=L[K+0]|L[K+1]<<8|L[K+2]<<16;Oe>ne&&(Oe=ne),U(w.Jc[+je],L,ie,Oe),ie+=Oe,ne-=Oe,K+=3}U(w.Jc[+de],L,ie,ne),L=ie<$?0:5}if(L!=0)return $r(w,L,"cannot parse partitions");for(L=D(ie=w.m,7),K=oe(ie)?z(ie,4):0,$=oe(ie)?z(ie,4):0,ne=oe(ie)?z(ie,4):0,de=oe(ie)?z(ie,4):0,ie=oe(ie)?z(ie,4):0,je=w.Qa,Oe=0;4>Oe;++Oe){if(je.Cb){var fe=je.Zb[Oe];je.Fb||(fe+=L)}else{if(0<Oe){w.pb[Oe]=w.pb[0];continue}fe=L}var Ee=w.pb[Oe];Ee.Sc[0]=t2[li(fe+K,127)],Ee.Sc[1]=n2[li(fe+0,127)],Ee.Eb[0]=2*t2[li(fe+$,127)],Ee.Eb[1]=101581*n2[li(fe+ne,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=t2[li(fe+de,117)],Ee.Qc[1]=n2[li(fe+ie,127)],Ee.lc=fe+ie}if(!Q.Rb)return $r(w,4,"Not a key frame.");for(oe(J),Q=w.Pa,L=0;4>L;++L){for(K=0;8>K;++K)for($=0;3>$;++$)for(ne=0;11>ne;++ne)de=pe(J,rse[L][K][$][ne])?D(J,8):tse[L][K][$][ne],Q.Wc[L][K].Yb[$][ne]=de;for(K=0;17>K;++K)Q.Xc[L][K]=Q.Wc[L][ise[K]]}return w.kc=oe(J),w.kc&&(w.Bd=D(J,8)),w.cb=1}function mo(w,A,L,$,K,J,Q){var ne=A[K].Yb[L];for(L=0;16>K;++K){if(!pe(w,ne[L+0]))return K;for(;!pe(w,ne[L+1]);)if(ne=A[++K].Yb[0],L=0,K==16)return 16;var ie=A[K+1].Yb;if(pe(w,ne[L+2])){var de=w,je=0;if(pe(de,(fe=ne)[(Oe=L)+3]))if(pe(de,fe[Oe+6])){for(ne=0,Oe=2*(je=pe(de,fe[Oe+8]))+(fe=pe(de,fe[Oe+9+je])),je=0,fe=Qie[Oe];fe[ne];++ne)je+=je+pe(de,fe[ne]);je+=3+(8<<Oe)}else pe(de,fe[Oe+7])?(je=7+2*pe(de,165),je+=pe(de,145)):je=5+pe(de,159);else je=pe(de,fe[Oe+4])?3+pe(de,fe[Oe+5]):2;ne=ie[2]}else je=1,ne=ie[1];ie=Q+ese[K],0>(de=w).b&&ve(de);var Oe,fe=de.b,Ee=(Oe=de.Ca>>1)-(de.I>>fe)>>31;--de.b,de.Ca+=Ee,de.Ca|=1,de.I-=(Oe+1&Ee)<<fe,J[ie]=((je^Ee)-Ee)*$[(0<K)+0]}return 16}function Dl(w){var A=w.rb[w.sb-1];A.la=0,A.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function ha(w,A,L,$,K){K=w[A+L+32*$]+(K>>3),w[A+L+32*$]=-256&K?0>K?0:255:K}function _c(w,A,L,$,K,J){ha(w,A,0,L,$+K),ha(w,A,1,L,$+J),ha(w,A,2,L,$-J),ha(w,A,3,L,$-K)}function ti(w){return(20091*w>>16)+w}function bf(w,A,L,$){var K,J=0,Q=s(16);for(K=0;4>K;++K){var ne=w[A+0]+w[A+8],ie=w[A+0]-w[A+8],de=(35468*w[A+4]>>16)-ti(w[A+12]),je=ti(w[A+4])+(35468*w[A+12]>>16);Q[J+0]=ne+je,Q[J+1]=ie+de,Q[J+2]=ie-de,Q[J+3]=ne-je,J+=4,A++}for(K=J=0;4>K;++K)ne=(w=Q[J+0]+4)+Q[J+8],ie=w-Q[J+8],de=(35468*Q[J+4]>>16)-ti(Q[J+12]),ha(L,$,0,0,ne+(je=ti(Q[J+4])+(35468*Q[J+12]>>16))),ha(L,$,1,0,ie+de),ha(L,$,2,0,ie-de),ha(L,$,3,0,ne-je),J++,$+=32}function Xg(w,A,L,$){var K=w[A+0]+4,J=35468*w[A+4]>>16,Q=ti(w[A+4]),ne=35468*w[A+1]>>16;_c(L,$,0,K+Q,w=ti(w[A+1]),ne),_c(L,$,1,K+J,w,ne),_c(L,$,2,K-J,w,ne),_c(L,$,3,K-Q,w,ne)}function Pu(w,A,L,$,K){bf(w,A,L,$),K&&bf(w,A+16,L,$+4)}function pp(w,A,L,$){Df(w,A+0,L,$,1),Df(w,A+32,L,$+128,1)}function xi(w,A,L,$){var K;for(w=w[A+0]+4,K=0;4>K;++K)for(A=0;4>A;++A)ha(L,$,A,K,w)}function mp(w,A,L,$){w[A+0]&&fr(w,A+0,L,$),w[A+16]&&fr(w,A+16,L,$+4),w[A+32]&&fr(w,A+32,L,$+128),w[A+48]&&fr(w,A+48,L,$+128+4)}function Mu(w,A,L,$){var K,J=s(16);for(K=0;4>K;++K){var Q=w[A+0+K]+w[A+12+K],ne=w[A+4+K]+w[A+8+K],ie=w[A+4+K]-w[A+8+K],de=w[A+0+K]-w[A+12+K];J[0+K]=Q+ne,J[8+K]=Q-ne,J[4+K]=de+ie,J[12+K]=de-ie}for(K=0;4>K;++K)Q=(w=J[0+4*K]+3)+J[3+4*K],ne=J[1+4*K]+J[2+4*K],ie=J[1+4*K]-J[2+4*K],de=w-J[3+4*K],L[$+0]=Q+ne>>3,L[$+16]=de+ie>>3,L[$+32]=Q-ne>>3,L[$+48]=de-ie>>3,$+=64}function tn(w,A,L){var $,K=A-32,J=Ba,Q=255-w[K-1];for($=0;$<L;++$){var ne,ie=J,de=Q+w[A-1];for(ne=0;ne<L;++ne)w[A+ne]=ie[de+w[K+ne]];A+=32}}function Ru(w,A){tn(w,A,4)}function bi(w,A){tn(w,A,8)}function dr(w,A){tn(w,A,16)}function Du(w,A){var L;for(L=0;16>L;++L)r(w,A+32*L,w,A-32,16)}function Da(w,A){var L;for(L=16;0<L;--L)i(w,A,w[A-1],16),A+=32}function Jo(w,A,L){var $;for($=0;16>$;++$)i(A,L+32*$,w,16)}function go(w,A){var L,$=16;for(L=0;16>L;++L)$+=w[A-1+32*L]+w[A+L-32];Jo($>>5,w,A)}function wt(w,A){var L,$=8;for(L=0;16>L;++L)$+=w[A-1+32*L];Jo($>>4,w,A)}function Pt(w,A){var L,$=8;for(L=0;16>L;++L)$+=w[A+L-32];Jo($>>4,w,A)}function bn(w,A){Jo(128,w,A)}function jt(w,A,L){return w+2*A+L+2>>2}function Ti(w,A){var L,$=A-32;for($=new Uint8Array([jt(w[$-1],w[$+0],w[$+1]),jt(w[$+0],w[$+1],w[$+2]),jt(w[$+1],w[$+2],w[$+3]),jt(w[$+2],w[$+3],w[$+4])]),L=0;4>L;++L)r(w,A+32*L,$,0,$.length)}function Ia(w,A){var L=w[A-1],$=w[A-1+32],K=w[A-1+64],J=w[A-1+96];xe(w,A+0,16843009*jt(w[A-1-32],L,$)),xe(w,A+32,16843009*jt(L,$,K)),xe(w,A+64,16843009*jt($,K,J)),xe(w,A+96,16843009*jt(K,J,J))}function Jg(w,A){var L,$=4;for(L=0;4>L;++L)$+=w[A+L-32]+w[A-1+32*L];for($>>=3,L=0;4>L;++L)i(w,A+32*L,$,4)}function Zg(w,A){var L=w[A-1+0],$=w[A-1+32],K=w[A-1+64],J=w[A-1-32],Q=w[A+0-32],ne=w[A+1-32],ie=w[A+2-32],de=w[A+3-32];w[A+0+96]=jt($,K,w[A-1+96]),w[A+1+96]=w[A+0+64]=jt(L,$,K),w[A+2+96]=w[A+1+64]=w[A+0+32]=jt(J,L,$),w[A+3+96]=w[A+2+64]=w[A+1+32]=w[A+0+0]=jt(Q,J,L),w[A+3+64]=w[A+2+32]=w[A+1+0]=jt(ne,Q,J),w[A+3+32]=w[A+2+0]=jt(ie,ne,Q),w[A+3+0]=jt(de,ie,ne)}function Ec(w,A){var L=w[A+1-32],$=w[A+2-32],K=w[A+3-32],J=w[A+4-32],Q=w[A+5-32],ne=w[A+6-32],ie=w[A+7-32];w[A+0+0]=jt(w[A+0-32],L,$),w[A+1+0]=w[A+0+32]=jt(L,$,K),w[A+2+0]=w[A+1+32]=w[A+0+64]=jt($,K,J),w[A+3+0]=w[A+2+32]=w[A+1+64]=w[A+0+96]=jt(K,J,Q),w[A+3+32]=w[A+2+64]=w[A+1+96]=jt(J,Q,ne),w[A+3+64]=w[A+2+96]=jt(Q,ne,ie),w[A+3+96]=jt(ne,ie,ie)}function Ac(w,A){var L=w[A-1+0],$=w[A-1+32],K=w[A-1+64],J=w[A-1-32],Q=w[A+0-32],ne=w[A+1-32],ie=w[A+2-32],de=w[A+3-32];w[A+0+0]=w[A+1+64]=J+Q+1>>1,w[A+1+0]=w[A+2+64]=Q+ne+1>>1,w[A+2+0]=w[A+3+64]=ne+ie+1>>1,w[A+3+0]=ie+de+1>>1,w[A+0+96]=jt(K,$,L),w[A+0+64]=jt($,L,J),w[A+0+32]=w[A+1+96]=jt(L,J,Q),w[A+1+32]=w[A+2+96]=jt(J,Q,ne),w[A+2+32]=w[A+3+96]=jt(Q,ne,ie),w[A+3+32]=jt(ne,ie,de)}function Kj(w,A){var L=w[A+0-32],$=w[A+1-32],K=w[A+2-32],J=w[A+3-32],Q=w[A+4-32],ne=w[A+5-32],ie=w[A+6-32],de=w[A+7-32];w[A+0+0]=L+$+1>>1,w[A+1+0]=w[A+0+64]=$+K+1>>1,w[A+2+0]=w[A+1+64]=K+J+1>>1,w[A+3+0]=w[A+2+64]=J+Q+1>>1,w[A+0+32]=jt(L,$,K),w[A+1+32]=w[A+0+96]=jt($,K,J),w[A+2+32]=w[A+1+96]=jt(K,J,Q),w[A+3+32]=w[A+2+96]=jt(J,Q,ne),w[A+3+64]=jt(Q,ne,ie),w[A+3+96]=jt(ne,ie,de)}function Gj(w,A){var L=w[A-1+0],$=w[A-1+32],K=w[A-1+64],J=w[A-1+96];w[A+0+0]=L+$+1>>1,w[A+2+0]=w[A+0+32]=$+K+1>>1,w[A+2+32]=w[A+0+64]=K+J+1>>1,w[A+1+0]=jt(L,$,K),w[A+3+0]=w[A+1+32]=jt($,K,J),w[A+3+32]=w[A+1+64]=jt(K,J,J),w[A+3+64]=w[A+2+64]=w[A+0+96]=w[A+1+96]=w[A+2+96]=w[A+3+96]=J}function gp(w,A){var L=w[A-1+0],$=w[A-1+32],K=w[A-1+64],J=w[A-1+96],Q=w[A-1-32],ne=w[A+0-32],ie=w[A+1-32],de=w[A+2-32];w[A+0+0]=w[A+2+32]=L+Q+1>>1,w[A+0+32]=w[A+2+64]=$+L+1>>1,w[A+0+64]=w[A+2+96]=K+$+1>>1,w[A+0+96]=J+K+1>>1,w[A+3+0]=jt(ne,ie,de),w[A+2+0]=jt(Q,ne,ie),w[A+1+0]=w[A+3+32]=jt(L,Q,ne),w[A+1+32]=w[A+3+64]=jt($,L,Q),w[A+1+64]=w[A+3+96]=jt(K,$,L),w[A+1+96]=jt(J,K,$)}function Qg(w,A){var L;for(L=0;8>L;++L)r(w,A+32*L,w,A-32,8)}function wf(w,A){var L;for(L=0;8>L;++L)i(w,A,w[A-1],8),A+=32}function vp(w,A,L){var $;for($=0;8>$;++$)i(A,L+32*$,w,8)}function yp(w,A){var L,$=8;for(L=0;8>L;++L)$+=w[A+L-32]+w[A-1+32*L];vp($>>4,w,A)}function Yj(w,A){var L,$=4;for(L=0;8>L;++L)$+=w[A+L-32];vp($>>3,w,A)}function ev(w,A){var L,$=4;for(L=0;8>L;++L)$+=w[A-1+32*L];vp($>>3,w,A)}function tv(w,A){vp(128,w,A)}function Nf(w,A,L){var $=w[A-L],K=w[A+0],J=3*(K-$)+Xj[1020+w[A-2*L]-w[A+L]],Q=Db[112+(J+4>>3)];w[A-L]=Ba[255+$+Db[112+(J+3>>3)]],w[A+0]=Ba[255+K-Q]}function Sf(w,A,L,$){var K=w[A+0],J=w[A+L];return bo[255+w[A-2*L]-w[A-L]]>$||bo[255+J-K]>$}function nv(w,A,L,$){return 4*bo[255+w[A-L]-w[A+0]]+bo[255+w[A-2*L]-w[A+L]]<=$}function xp(w,A,L,$,K){var J=w[A-3*L],Q=w[A-2*L],ne=w[A-L],ie=w[A+0],de=w[A+L],je=w[A+2*L],Oe=w[A+3*L];return 4*bo[255+ne-ie]+bo[255+Q-de]>$?0:bo[255+w[A-4*L]-J]<=K&&bo[255+J-Q]<=K&&bo[255+Q-ne]<=K&&bo[255+Oe-je]<=K&&bo[255+je-de]<=K&&bo[255+de-ie]<=K}function rv(w,A,L,$){var K=2*$+1;for($=0;16>$;++$)nv(w,A+$,L,K)&&Nf(w,A+$,L)}function jf(w,A,L,$){var K=2*$+1;for($=0;16>$;++$)nv(w,A+$*L,1,K)&&Nf(w,A+$*L,1)}function Eb(w,A,L,$){var K;for(K=3;0<K;--K)rv(w,A+=4*L,L,$)}function Ab(w,A,L,$){var K;for(K=3;0<K;--K)jf(w,A+=4,L,$)}function Cc(w,A,L,$,K,J,Q,ne){for(J=2*J+1;0<K--;){if(xp(w,A,L,J,Q))if(Sf(w,A,L,ne))Nf(w,A,L);else{var ie=w,de=A,je=L,Oe=ie[de-2*je],fe=ie[de-je],Ee=ie[de+0],ke=ie[de+je],Ue=ie[de+2*je],Te=27*(Ye=Xj[1020+3*(Ee-fe)+Xj[1020+Oe-ke]])+63>>7,Ve=18*Ye+63>>7,Ye=9*Ye+63>>7;ie[de-3*je]=Ba[255+ie[de-3*je]+Ye],ie[de-2*je]=Ba[255+Oe+Ve],ie[de-je]=Ba[255+fe+Te],ie[de+0]=Ba[255+Ee-Te],ie[de+je]=Ba[255+ke-Ve],ie[de+2*je]=Ba[255+Ue-Ye]}A+=$}}function kc(w,A,L,$,K,J,Q,ne){for(J=2*J+1;0<K--;){if(xp(w,A,L,J,Q))if(Sf(w,A,L,ne))Nf(w,A,L);else{var ie=w,de=A,je=L,Oe=ie[de-je],fe=ie[de+0],Ee=ie[de+je],ke=Db[112+(4+(Ue=3*(fe-Oe))>>3)],Ue=Db[112+(Ue+3>>3)],Te=ke+1>>1;ie[de-2*je]=Ba[255+ie[de-2*je]+Te],ie[de-je]=Ba[255+Oe+Ue],ie[de+0]=Ba[255+fe-ke],ie[de+je]=Ba[255+Ee-Te]}A+=$}}function Cb(w,A,L,$,K,J){Cc(w,A,L,1,16,$,K,J)}function kb(w,A,L,$,K,J){Cc(w,A,1,L,16,$,K,J)}function _f(w,A,L,$,K,J){var Q;for(Q=3;0<Q;--Q)kc(w,A+=4*L,L,1,16,$,K,J)}function Tb(w,A,L,$,K,J){var Q;for(Q=3;0<Q;--Q)kc(w,A+=4,1,L,16,$,K,J)}function R(w,A,L,$,K,J,Q,ne){Cc(w,A,K,1,8,J,Q,ne),Cc(L,$,K,1,8,J,Q,ne)}function V(w,A,L,$,K,J,Q,ne){Cc(w,A,1,K,8,J,Q,ne),Cc(L,$,1,K,8,J,Q,ne)}function he(w,A,L,$,K,J,Q,ne){kc(w,A+4*K,K,1,8,J,Q,ne),kc(L,$+4*K,K,1,8,J,Q,ne)}function we(w,A,L,$,K,J,Q,ne){kc(w,A+4,1,K,8,J,Q,ne),kc(L,$+4,1,K,8,J,Q,ne)}function Ae(){this.ba=new on,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new me,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function We(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dt(){this.ua=0,this.Wa=new Qe,this.vb=new Qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new M}function Ht(){this.xb=this.a=0,this.l=new ns,this.ca=new on,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dt,this.ab=0,this.gc=o(4,nt),this.Oc=0}function xn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ns,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nn(w,A,L,$,K,J,Q){for(w=w==null?0:w[A+0],A=0;A<Q;++A)K[J+A]=w+L[$+A]&255,w=K[J+A]}function cr(w,A,L,$,K,J,Q){var ne;if(w==null)Nn(null,null,L,$,K,J,Q);else for(ne=0;ne<Q;++ne)K[J+ne]=w[A+ne]+L[$+ne]&255}function ni(w,A,L,$,K,J,Q){if(w==null)Nn(null,null,L,$,K,J,Q);else{var ne,ie=w[A+0],de=ie,je=ie;for(ne=0;ne<Q;++ne)de=je+(ie=w[A+ne])-de,je=L[$+ne]+(-256&de?0>de?0:255:de)&255,de=ie,K[J+ne]=je}}function Oi(w,A,L,$){var K=A.width,J=A.o;if(e(w!=null&&A!=null),0>L||0>=$||L+$>J)return null;if(!w.Cc){if(w.ga==null){var Q;if(w.ga=new xn,(Q=w.ga==null)||(Q=A.width*A.o,e(w.Gb.length==0),w.Gb=s(Q),w.Uc=0,w.Gb==null?Q=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Q=1),Q=!Q),!Q){Q=w.ga;var ne=w.Fa,ie=w.P,de=w.qc,je=w.mb,Oe=w.nb,fe=ie+1,Ee=de-1,ke=Q.l;if(e(ne!=null&&je!=null&&A!=null),Vu[0]=null,Vu[1]=Nn,Vu[2]=cr,Vu[3]=ni,Q.ca=je,Q.tb=Oe,Q.c=A.width,Q.i=A.height,e(0<Q.c&&0<Q.i),1>=de)A=0;else if(Q.$a=3&ne[ie+0],Q.Z=ne[ie+0]>>2&3,Q.Lc=ne[ie+0]>>4&3,ie=ne[ie+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||ie)A=0;else if(ke.put=gt,ke.ac=mn,ke.bc=lt,ke.ma=Q,ke.width=A.width,ke.height=A.height,ke.Da=A.Da,ke.v=A.v,ke.va=A.va,ke.j=A.j,ke.o=A.o,Q.$a)e:{e(Q.$a==1),A=fo();t:for(;;){if(A==null){A=0;break e}if(e(Q!=null),Q.mc=A,A.c=Q.c,A.i=Q.i,A.l=Q.l,A.l.ma=Q,A.l.width=Q.c,A.l.height=Q.i,A.a=0,H(A.m,ne,fe,Ee),!ho(Q.c,Q.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Ws(A.s)?(Q.ic=1,ne=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(ne),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(Q.ic=0,A=Sc(A,Q.c)),!A))break t;A=1;break e}Q.mc=null,A=0}else A=Ee>=Q.c*Q.i;Q=!A}if(Q)return null;w.ga.Lc!=1?w.Ga=0:$=J-L}e(w.ga!=null),e(L+$<=J);e:{if(A=(ne=w.ga).c,J=ne.l.o,ne.$a==0){if(fe=w.rc,Ee=w.Vc,ke=w.Fa,ie=w.P+1+L*A,de=w.mb,je=w.nb+L*A,e(ie<=w.P+w.qc),ne.Z!=0)for(e(Vu[ne.Z]!=null),Q=0;Q<$;++Q)Vu[ne.Z](fe,Ee,ke,ie,de,je,A),fe=de,Ee=je,je+=A,ie+=A;else for(Q=0;Q<$;++Q)r(de,je,ke,ie,A),fe=de,Ee=je,je+=A,ie+=A;w.rc=fe,w.Vc=Ee}else{if(e(ne.mc!=null),A=L+$,e((Q=ne.mc)!=null),e(A<=Q.i),Q.C>=A)A=1;else if(ne.ic||vo(),ne.ic){ne=Q.V,fe=Q.Ba,Ee=Q.c;var Ue=Q.i,Te=(ke=1,ie=Q.$/Ee,de=Q.$%Ee,je=Q.m,Oe=Q.s,Q.$),Ve=Ee*Ue,Ye=Ee*A,rt=Oe.wc,tt=Te<Ye?or(Oe,de,ie):null;e(Te<=Ve),e(A<=Ue),e(Ws(Oe));t:for(;;){for(;!je.h&&Te<Ye;){if(de&rt||(tt=or(Oe,de,ie)),e(tt!=null),ue(je),256>(Ue=Ut(tt.G[0],tt.H[0],je)))ne[fe+Te]=Ue,++Te,++de>=Ee&&(de=0,++ie<=A&&!(ie%16)&&Ma(Q,ie));else{if(!(280>Ue)){ke=0;break t}Ue=_t(Ue-256,je);var Wt,Mt=Ut(tt.G[4],tt.H[4],je);if(ue(je),!(Te>=(Mt=ln(Ee,Mt=_t(Mt,je)))&&Ve-Te>=Ue)){ke=0;break t}for(Wt=0;Wt<Ue;++Wt)ne[fe+Te+Wt]=ne[fe+Te+Wt-Mt];for(Te+=Ue,de+=Ue;de>=Ee;)de-=Ee,++ie<=A&&!(ie%16)&&Ma(Q,ie);Te<Ye&&de&rt&&(tt=or(Oe,de,ie))}e(je.h==te(je))}Ma(Q,ie>A?A:ie);break t}!ke||je.h&&Te<Ve?(ke=0,Q.a=je.h?5:3):Q.$=Te,A=ke}else A=Ra(Q,Q.V,Q.Ba,Q.c,Q.i,A,Ou);if(!A){$=0;break e}}L+$>=J&&(w.Cc=1),$=1}if(!$)return null;if(w.Cc&&(($=w.ga)!=null&&($.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+L*K}function Dr(w,A,L,$,K,J){for(;0<K--;){var Q,ne=w,ie=A+(L?1:0),de=w,je=A+(L?0:3);for(Q=0;Q<$;++Q){var Oe=de[je+4*Q];Oe!=255&&(Oe*=32897,ne[ie+4*Q+0]=ne[ie+4*Q+0]*Oe>>23,ne[ie+4*Q+1]=ne[ie+4*Q+1]*Oe>>23,ne[ie+4*Q+2]=ne[ie+4*Q+2]*Oe>>23)}A+=J}}function zi(w,A,L,$,K){for(;0<$--;){var J;for(J=0;J<L;++J){var Q=w[A+2*J+0],ne=15&(de=w[A+2*J+1]),ie=4369*ne,de=(240&de|de>>4)*ie>>16;w[A+2*J+0]=(240&Q|Q>>4)*ie>>16&240|(15&Q|Q<<4)*ie>>16>>4&15,w[A+2*J+1]=240&de|ne}A+=K}}function Pi(w,A,L,$,K,J,Q,ne){var ie,de,je=255;for(de=0;de<K;++de){for(ie=0;ie<$;++ie){var Oe=w[A+ie];J[Q+4*ie]=Oe,je&=Oe}A+=L,Q+=ne}return je!=255}function gs(w,A,L,$,K){var J;for(J=0;J<K;++J)L[$+J]=w[A+J]>>8}function vo(){pv=Dr,AI=zi,CI=Pi,kI=gs}function pa(w,A,L){j[w]=function($,K,J,Q,ne,ie,de,je,Oe,fe,Ee,ke,Ue,Te,Ve,Ye,rt){var tt,Wt=rt-1>>1,Mt=ne[ie+0]|de[je+0]<<16,On=Oe[fe+0]|Ee[ke+0]<<16;e($!=null);var Bt=3*Mt+On+131074>>2;for(A($[K+0],255&Bt,Bt>>16,Ue,Te),J!=null&&(Bt=3*On+Mt+131074>>2,A(J[Q+0],255&Bt,Bt>>16,Ve,Ye)),tt=1;tt<=Wt;++tt){var Kn=ne[ie+tt]|de[je+tt]<<16,Ui=Oe[fe+tt]|Ee[ke+tt]<<16,Pn=Mt+Kn+On+Ui+524296,$t=Pn+2*(Kn+On)>>3;Bt=$t+Mt>>1,Mt=(Pn=Pn+2*(Mt+Ui)>>3)+Kn>>1,A($[K+2*tt-1],255&Bt,Bt>>16,Ue,Te+(2*tt-1)*L),A($[K+2*tt-0],255&Mt,Mt>>16,Ue,Te+(2*tt-0)*L),J!=null&&(Bt=Pn+On>>1,Mt=$t+Ui>>1,A(J[Q+2*tt-1],255&Bt,Bt>>16,Ve,Ye+(2*tt-1)*L),A(J[Q+2*tt+0],255&Mt,Mt>>16,Ve,Ye+(2*tt+0)*L)),Mt=Kn,On=Ui}1&rt||(Bt=3*Mt+On+131074>>2,A($[K+rt-1],255&Bt,Bt>>16,Ue,Te+(rt-1)*L),J!=null&&(Bt=3*On+Mt+131074>>2,A(J[Q+rt-1],255&Bt,Bt>>16,Ve,Ye+(rt-1)*L)))}}function Ob(){wo[Ib]=ase,wo[Lb]=$I,wo[DI]=ose,wo[Fb]=zI,wo[Bb]=qI,wo[Jj]=UI,wo[II]=lse,wo[Zj]=$I,wo[Qj]=zI,wo[$b]=qI,wo[e2]=UI}function bp(w){return w&-16384?0>w?0:255:w>>cse}function Ef(w,A){return bp((19077*w>>8)+(26149*A>>8)-14234)}function Iu(w,A,L){return bp((19077*w>>8)-(6419*A>>8)-(13320*L>>8)+8708)}function Af(w,A){return bp((19077*w>>8)+(33050*A>>8)-17685)}function Cf(w,A,L,$,K){$[K+0]=Ef(w,L),$[K+1]=Iu(w,A,L),$[K+2]=Af(w,A)}function kf(w,A,L,$,K){$[K+0]=Af(w,A),$[K+1]=Iu(w,A,L),$[K+2]=Ef(w,L)}function Os(w,A,L,$,K){var J=Iu(w,A,L);A=J<<3&224|Af(w,A)>>3,$[K+0]=248&Ef(w,L)|J>>5,$[K+1]=A}function Tf(w,A,L,$,K){var J=240&Af(w,A)|15;$[K+0]=240&Ef(w,L)|Iu(w,A,L)>>4,$[K+1]=J}function Of(w,A,L,$,K){$[K+0]=255,Cf(w,A,L,$,K+1)}function iv(w,A,L,$,K){kf(w,A,L,$,K),$[K+3]=255}function sv(w,A,L,$,K){Cf(w,A,L,$,K),$[K+3]=255}function li(w,A){return 0>w?0:w>A?A:w}function Tc(w,A,L){j[w]=function($,K,J,Q,ne,ie,de,je,Oe){for(var fe=je+(-2&Oe)*L;je!=fe;)A($[K+0],J[Q+0],ne[ie+0],de,je),A($[K+1],J[Q+0],ne[ie+0],de,je+L),K+=2,++Q,++ie,je+=2*L;1&Oe&&A($[K+0],J[Q+0],ne[ie+0],de,je)}}function wp(w,A,L){return L==0?w==0?A==0?6:5:A==0?4:0:L}function Pb(w,A,L,$,K){switch(w>>>30){case 3:Df(A,L,$,K,0);break;case 2:xo(A,L,$,K);break;case 1:fr(A,L,$,K)}}function yo(w,A){var L,$,K=A.M,J=A.Nb,Q=w.oc,ne=w.pc+40,ie=w.oc,de=w.pc+584,je=w.oc,Oe=w.pc+600;for(L=0;16>L;++L)Q[ne+32*L-1]=129;for(L=0;8>L;++L)ie[de+32*L-1]=129,je[Oe+32*L-1]=129;for(0<K?Q[ne-1-32]=ie[de-1-32]=je[Oe-1-32]=129:(i(Q,ne-32-1,127,21),i(ie,de-32-1,127,9),i(je,Oe-32-1,127,9)),$=0;$<w.za;++$){var fe=A.ya[A.aa+$];if(0<$){for(L=-1;16>L;++L)r(Q,ne+32*L-4,Q,ne+32*L+12,4);for(L=-1;8>L;++L)r(ie,de+32*L-4,ie,de+32*L+4,4),r(je,Oe+32*L-4,je,Oe+32*L+4,4)}var Ee=w.Gd,ke=w.Hd+$,Ue=fe.ad,Te=fe.Hc;if(0<K&&(r(Q,ne-32,Ee[ke].y,0,16),r(ie,de-32,Ee[ke].f,0,8),r(je,Oe-32,Ee[ke].ea,0,8)),fe.Za){var Ve=Q,Ye=ne-32+16;for(0<K&&($>=w.za-1?i(Ve,Ye,Ee[ke].y[15],4):r(Ve,Ye,Ee[ke+1].y,0,4)),L=0;4>L;L++)Ve[Ye+128+L]=Ve[Ye+256+L]=Ve[Ye+384+L]=Ve[Ye+0+L];for(L=0;16>L;++L,Te<<=2)Ve=Q,Ye=ne+VI[L],Zo[fe.Ob[L]](Ve,Ye),Pb(Te,Ue,16*+L,Ve,Ye)}else if(Ve=wp($,K,fe.Ob[0]),Hu[Ve](Q,ne),Te!=0)for(L=0;16>L;++L,Te<<=2)Pb(Te,Ue,16*+L,Q,ne+VI[L]);for(L=fe.Gc,Ve=wp($,K,fe.Dd),Mc[Ve](ie,de),Mc[Ve](je,Oe),Te=Ue,Ve=ie,Ye=de,255&(fe=0|L)&&(170&fe?Fl(Te,256,Ve,Ye):Cr(Te,256,Ve,Ye)),fe=je,Te=Oe,255&(L>>=8)&&(170&L?Fl(Ue,320,fe,Te):Cr(Ue,320,fe,Te)),K<w.Ub-1&&(r(Ee[ke].y,0,Q,ne+480,16),r(Ee[ke].f,0,ie,de+224,8),r(Ee[ke].ea,0,je,Oe+224,8)),L=8*J*w.B,Ee=w.sa,ke=w.ta+16*$+16*J*w.R,Ue=w.qa,fe=w.ra+8*$+L,Te=w.Ha,Ve=w.Ia+8*$+L,L=0;16>L;++L)r(Ee,ke+L*w.R,Q,ne+32*L,16);for(L=0;8>L;++L)r(Ue,fe+L*w.B,ie,de+32*L,8),r(Te,Ve+L*w.B,je,Oe+32*L,8)}}function Pf(w,A,L,$,K,J,Q,ne,ie){var de=[0],je=[0],Oe=0,fe=ie!=null?ie.kd:0,Ee=ie??new We;if(w==null||12>L)return 7;Ee.data=w,Ee.w=A,Ee.ha=L,A=[A],L=[L],Ee.gb=[Ee.gb];e:{var ke=A,Ue=L,Te=Ee.gb;if(e(w!=null),e(Ue!=null),e(Te!=null),Te[0]=0,12<=Ue[0]&&!n(w,ke[0],"RIFF")){if(n(w,ke[0]+8,"WEBP")){Te=3;break e}var Ve=W(w,ke[0]+4);if(12>Ve||4294967286<Ve){Te=3;break e}if(fe&&Ve>Ue[0]-8){Te=7;break e}Te[0]=Ve,ke[0]+=12,Ue[0]-=12}Te=0}if(Te!=0)return Te;for(Ve=0<Ee.gb[0],L=L[0];;){e:{var Ye=w;Ue=A,Te=L;var rt=de,tt=je,Wt=ke=[0];if((Bt=Oe=[Oe])[0]=0,8>Te[0])Te=7;else{if(!n(Ye,Ue[0],"VP8X")){if(W(Ye,Ue[0]+4)!=10){Te=3;break e}if(18>Te[0]){Te=7;break e}var Mt=W(Ye,Ue[0]+8),On=1+Se(Ye,Ue[0]+12);if(2147483648<=On*(Ye=1+Se(Ye,Ue[0]+15))){Te=3;break e}Wt!=null&&(Wt[0]=Mt),rt!=null&&(rt[0]=On),tt!=null&&(tt[0]=Ye),Ue[0]+=18,Te[0]-=18,Bt[0]=1}Te=0}}if(Oe=Oe[0],ke=ke[0],Te!=0)return Te;if(Ue=!!(2&ke),!Ve&&Oe)return 3;if(J!=null&&(J[0]=!!(16&ke)),Q!=null&&(Q[0]=Ue),ne!=null&&(ne[0]=0),Q=de[0],ke=je[0],Oe&&Ue&&ie==null){Te=0;break}if(4>L){Te=7;break}if(Ve&&Oe||!Ve&&!Oe&&!n(w,A[0],"ALPH")){L=[L],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{Mt=w,Te=A,Ve=L;var Bt=Ee.gb;rt=Ee.na,tt=Ee.P,Wt=Ee.Sa,On=22,e(Mt!=null),e(Ve!=null),Ye=Te[0];var Kn=Ve[0];for(e(rt!=null),e(Wt!=null),rt[0]=null,tt[0]=null,Wt[0]=0;;){if(Te[0]=Ye,Ve[0]=Kn,8>Kn){Te=7;break e}var Ui=W(Mt,Ye+4);if(4294967286<Ui){Te=3;break e}var Pn=8+Ui+1&-2;if(On+=Pn,0<Bt&&On>Bt){Te=3;break e}if(!n(Mt,Ye,"VP8 ")||!n(Mt,Ye,"VP8L")){Te=0;break e}if(Kn[0]<Pn){Te=7;break e}n(Mt,Ye,"ALPH")||(rt[0]=Mt,tt[0]=Ye+8,Wt[0]=Ui),Ye+=Pn,Kn-=Pn}}if(L=L[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],Te!=0)break}L=[L],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(Bt=w,Te=A,Ve=L,rt=Ee.gb[0],tt=Ee.Ja,Wt=Ee.xa,Mt=Te[0],Ye=!n(Bt,Mt,"VP8 "),On=!n(Bt,Mt,"VP8L"),e(Bt!=null),e(Ve!=null),e(tt!=null),e(Wt!=null),8>Ve[0])Te=7;else{if(Ye||On){if(Bt=W(Bt,Mt+4),12<=rt&&Bt>rt-12){Te=3;break e}if(fe&&Bt>Ve[0]-8){Te=7;break e}tt[0]=Bt,Te[0]+=8,Ve[0]-=8,Wt[0]=On}else Wt[0]=5<=Ve[0]&&Bt[Mt+0]==47&&!(Bt[Mt+4]>>5),tt[0]=Ve[0];Te=0}if(L=L[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],A=A[0],Te!=0)break;if(4294967286<Ee.Ja)return 3;if(ne==null||Ue||(ne[0]=Ee.xa?2:1),Q=[Q],ke=[ke],Ee.xa){if(5>L){Te=7;break}ne=Q,fe=ke,Ue=J,w==null||5>L?w=0:5<=L&&w[A+0]==47&&!(w[A+4]>>5)?(Ve=[0],Bt=[0],rt=[0],H(tt=new q,w,A,L),ft(tt,Ve,Bt,rt)?(ne!=null&&(ne[0]=Ve[0]),fe!=null&&(fe[0]=Bt[0]),Ue!=null&&(Ue[0]=rt[0]),w=1):w=0):w=0}else{if(10>L){Te=7;break}ne=ke,w==null||10>L||!rs(w,A+3,L-3)?w=0:(fe=w[A+0]|w[A+1]<<8|w[A+2]<<16,Ue=16383&(w[A+7]<<8|w[A+6]),w=16383&(w[A+9]<<8|w[A+8]),1&fe||3<(fe>>1&7)||!(fe>>4&1)||fe>>5>=Ee.Ja||!Ue||!w?w=0:(Q&&(Q[0]=Ue),ne&&(ne[0]=w),w=1))}if(!w||(Q=Q[0],ke=ke[0],Oe&&(de[0]!=Q||je[0]!=ke)))return 3;ie!=null&&(ie[0]=Ee,ie.offset=A-ie.w,e(4294967286>A-ie.w),e(ie.offset==ie.ha-L));break}return Te==0||Te==7&&Oe&&ie==null?(J!=null&&(J[0]|=Ee.na!=null&&0<Ee.na.length),$!=null&&($[0]=Q),K!=null&&(K[0]=ke),0):Te}function av(w,A,L){var $=A.width,K=A.height,J=0,Q=0,ne=$,ie=K;if(A.Da=w!=null&&0<w.Da,A.Da&&(ne=w.cd,ie=w.bd,J=w.v,Q=w.j,11>L||(J&=-2,Q&=-2),0>J||0>Q||0>=ne||0>=ie||J+ne>$||Q+ie>K))return 0;if(A.v=J,A.j=Q,A.va=J+ne,A.o=Q+ie,A.U=ne,A.T=ie,A.da=w!=null&&0<w.da,A.da){if(!ze(ne,ie,L=[w.ib],J=[w.hb]))return 0;A.ib=L[0],A.hb=J[0]}return A.ob=w!=null&&w.ob,A.Kb=w==null||!w.Sd,A.da&&(A.ob=A.ib<3*$/4&&A.hb<3*K/4,A.Kb=0),1}function ov(w){if(w==null)return 2;if(11>w.S){var A=w.f.RGBA;A.fb+=(w.height-1)*A.A,A.A=-A.A}else A=w.f.kb,w=w.height,A.O+=(w-1)*A.fa,A.fa=-A.fa,A.N+=(w-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(w-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(w-1)*A.lb,A.lb=-A.lb);return 0}function Lu(w,A,L,$){if($==null||0>=w||0>=A)return 2;if(L!=null){if(L.Da){var K=L.cd,J=L.bd,Q=-2&L.v,ne=-2&L.j;if(0>Q||0>ne||0>=K||0>=J||Q+K>w||ne+J>A)return 2;w=K,A=J}if(L.da){if(!ze(w,A,K=[L.ib],J=[L.hb]))return 2;w=K[0],A=J[0]}}$.width=w,$.height=A;e:{var ie=$.width,de=$.height;if(w=$.S,0>=ie||0>=de||!(w>=Ib&&13>w))w=2;else{if(0>=$.Rd&&$.sd==null){Q=J=K=A=0;var je=(ne=ie*WI[w])*de;if(11>w||(J=(de+1)/2*(A=(ie+1)/2),w==12&&(Q=(K=ie)*de)),(de=s(je+2*J+Q))==null){w=1;break e}$.sd=de,11>w?((ie=$.f.RGBA).eb=de,ie.fb=0,ie.A=ne,ie.size=je):((ie=$.f.kb).y=de,ie.O=0,ie.fa=ne,ie.Fd=je,ie.f=de,ie.N=0+je,ie.Ab=A,ie.Cd=J,ie.ea=de,ie.W=0+je+J,ie.Db=A,ie.Ed=J,w==12&&(ie.F=de,ie.J=0+je+2*J),ie.Tc=Q,ie.lb=K)}if(A=1,K=$.S,J=$.width,Q=$.height,K>=Ib&&13>K)if(11>K)w=$.f.RGBA,A&=(ne=Math.abs(w.A))*(Q-1)+J<=w.size,A&=ne>=J*WI[K],A&=w.eb!=null;else{w=$.f.kb,ne=(J+1)/2,je=(Q+1)/2,ie=Math.abs(w.fa),de=Math.abs(w.Ab);var Oe=Math.abs(w.Db),fe=Math.abs(w.lb),Ee=fe*(Q-1)+J;A&=ie*(Q-1)+J<=w.Fd,A&=de*(je-1)+ne<=w.Cd,A=(A&=Oe*(je-1)+ne<=w.Ed)&ie>=J&de>=ne&Oe>=ne,A&=w.y!=null,A&=w.f!=null,A&=w.ea!=null,K==12&&(A&=fe>=J,A&=Ee<=w.Tc,A&=w.F!=null)}else A=0;w=A?0:2}}return w!=0||L!=null&&L.fd&&(w=ov($)),w}var Mf=64,La=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fa=24,Fu=32,Oc=8,Bu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(w){return w},j.Predictor2=function(w,A,L){return A[L+0]},j.Predictor3=function(w,A,L){return A[L+1]},j.Predictor4=function(w,A,L){return A[L-1]},j.Predictor5=function(w,A,L){return De(De(w,A[L+1]),A[L+0])},j.Predictor6=function(w,A,L){return De(w,A[L-1])},j.Predictor7=function(w,A,L){return De(w,A[L+0])},j.Predictor8=function(w,A,L){return De(A[L-1],A[L+0])},j.Predictor9=function(w,A,L){return De(A[L+0],A[L+1])},j.Predictor10=function(w,A,L){return De(De(w,A[L-1]),De(A[L+0],A[L+1]))},j.Predictor11=function(w,A,L){var $=A[L+0];return 0>=qe($>>24&255,w>>24&255,(A=A[L-1])>>24&255)+qe($>>16&255,w>>16&255,A>>16&255)+qe($>>8&255,w>>8&255,A>>8&255)+qe(255&$,255&w,255&A)?$:w},j.Predictor12=function(w,A,L){var $=A[L+0];return(Le((w>>24&255)+($>>24&255)-((A=A[L-1])>>24&255))<<24|Le((w>>16&255)+($>>16&255)-(A>>16&255))<<16|Le((w>>8&255)+($>>8&255)-(A>>8&255))<<8|Le((255&w)+(255&$)-(255&A)))>>>0},j.Predictor13=function(w,A,L){var $=A[L-1];return(Pe((w=De(w,A[L+0]))>>24&255,$>>24&255)<<24|Pe(w>>16&255,$>>16&255)<<16|Pe(w>>8&255,$>>8&255)<<8|Pe(255&w,255&$))>>>0};var lv=j.PredictorAdd0;j.PredictorAdd1=ut,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Np=j.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var wi,Mb=j.ColorIndexInverseTransform,Il=j.MapARGB,Ll=j.VP8LColorIndexInverseTransformAlpha,cv=j.MapAlpha,uv=j.VP8LPredictorsAdd=[];uv.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var dv,fv,$u,zu,qu,Rf,Uu,Df,xo,Fl,fr,Cr,Ni,qi,Pc,hv,Sp,Rb,wI,NI,SI,jI,_I,EI,pv,AI,CI,kI,TI=s(511),OI=s(2041),PI=s(225),MI=s(767),RI=0,Xj=OI,Db=PI,Ba=MI,bo=TI,Ib=0,Lb=1,DI=2,Fb=3,Bb=4,Jj=5,II=6,Zj=7,Qj=8,$b=9,e2=10,Wie=[2,3,7],Kie=[3,3,11],LI=[280,256,256,256,40],Gie=[0,1,1,1,0],Yie=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xie=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jie=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zie=8,t2=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],n2=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],mv=null,Qie=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ese=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],FI=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tse=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nse=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rse=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ise=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hu=[],Zo=[],Mc=[],sse=1,BI=2,Vu=[],wo=[];pa("UpsampleRgbLinePair",Cf,3),pa("UpsampleBgrLinePair",kf,3),pa("UpsampleRgbaLinePair",sv,4),pa("UpsampleBgraLinePair",iv,4),pa("UpsampleArgbLinePair",Of,4),pa("UpsampleRgba4444LinePair",Tf,2),pa("UpsampleRgb565LinePair",Os,2);var ase=j.UpsampleRgbLinePair,ose=j.UpsampleBgrLinePair,$I=j.UpsampleRgbaLinePair,zI=j.UpsampleBgraLinePair,qI=j.UpsampleArgbLinePair,UI=j.UpsampleRgba4444LinePair,lse=j.UpsampleRgb565LinePair,zb=16,qb=1<<zb-1,gv=-227,r2=482,cse=6,HI=0,use=s(256),dse=s(256),fse=s(256),hse=s(256),pse=s(r2-gv),mse=s(r2-gv);Tc("YuvToRgbRow",Cf,3),Tc("YuvToBgrRow",kf,3),Tc("YuvToRgbaRow",sv,4),Tc("YuvToBgraRow",iv,4),Tc("YuvToArgbRow",Of,4),Tc("YuvToRgba4444Row",Tf,2),Tc("YuvToRgb565Row",Os,2);var VI=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ub=[0,2,8],gse=[8,7,6,4,4,2,2,2,1,1,1,1],vse=1;this.WebPDecodeRGBA=function(w,A,L,$,K){var J=Lb,Q=new Ae,ne=new on;Q.ba=ne,ne.S=J,ne.width=[ne.width],ne.height=[ne.height];var ie=ne.width,de=ne.height,je=new Nt;if(je==null||w==null)var Oe=2;else e(je!=null),Oe=Pf(w,A,L,je.width,je.height,je.Pd,je.Qd,je.format,null);if(Oe!=0?ie=0:(ie!=null&&(ie[0]=je.width[0]),de!=null&&(de[0]=je.height[0]),ie=1),ie){ne.width=ne.width[0],ne.height=ne.height[0],$!=null&&($[0]=ne.width),K!=null&&(K[0]=ne.height);e:{if($=new ns,(K=new We).data=w,K.w=A,K.ha=L,K.kd=1,A=[0],e(K!=null),((w=Pf(K.data,K.w,K.ha,null,null,null,A,null,K))==0||w==7)&&A[0]&&(w=4),(A=w)==0){if(e(Q!=null),$.data=K.data,$.w=K.w+K.offset,$.ha=K.ha-K.offset,$.put=gt,$.ac=mn,$.bc=lt,$.ma=Q,K.xa){if((w=fo())==null){Q=1;break e}if((function(fe,Ee){var ke=[0],Ue=[0],Te=[0];t:for(;;){if(fe==null)return 0;if(Ee==null)return fe.a=2,0;if(fe.l=Ee,fe.a=0,H(fe.m,Ee.data,Ee.w,Ee.ha),!ft(fe.m,ke,Ue,Te)){fe.a=3;break t}if(fe.xb=BI,Ee.width=ke[0],Ee.height=Ue[0],!ho(ke[0],Ue[0],1,fe,null))break t;return 1}return e(fe.a!=0),0})(w,$)){if($=(A=Lu($.width,$.height,Q.Oa,Q.ba))==0){t:{$=w;n:for(;;){if($==null){$=0;break t}if(e($.s.yc!=null),e($.s.Ya!=null),e(0<$.s.Wb),e((L=$.l)!=null),e((K=L.ma)!=null),$.xb!=0){if($.ca=K.ba,$.tb=K.tb,e($.ca!=null),!av(K.Oa,L,Fb)){$.a=2;break n}if(!Sc($,L.width)||L.da)break n;if((L.da||nn($.ca.S))&&vo(),11>$.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),$.ca.f.kb.F!=null&&vo()),$.Pb&&0<$.s.ua&&$.s.vb.X==null&&!G($.s.vb,$.s.Wa.Xa)){$.a=1;break n}$.xb=0}if(!Ra($,$.V,$.Ba,$.c,$.i,L.o,ps))break n;K.Dc=$.Ma,$=1;break t}e($.a!=0),$=0}$=!$}$&&(A=w.a)}else A=w.a}else{if((w=new po)==null){Q=1;break e}if(w.Fa=K.na,w.P=K.P,w.qc=K.Sa,Ys(w,$)){if((A=Lu($.width,$.height,Q.Oa,Q.ba))==0){if(w.Aa=0,L=Q.Oa,e((K=w)!=null),L!=null){if(0<(ie=0>(ie=L.Md)?0:100<ie?255:255*ie/100)){for(de=je=0;4>de;++de)12>(Oe=K.pb[de]).lc&&(Oe.ia=ie*gse[0>Oe.lc?0:Oe.lc]>>3),je|=Oe.ia;je&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=L.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}(function(fe,Ee){if(fe==null)return 0;if(Ee==null)return $r(fe,2,"NULL VP8Io parameter in VP8Decode().");if(!fe.cb&&!Ys(fe,Ee))return 0;if(e(fe.cb),Ee.ac==null||Ee.ac(Ee)){Ee.ob&&(fe.L=0);var ke=Ub[fe.L];if(fe.L==2?(fe.yb=0,fe.zb=0):(fe.yb=Ee.v-ke>>4,fe.zb=Ee.j-ke>>4,0>fe.yb&&(fe.yb=0),0>fe.zb&&(fe.zb=0)),fe.Va=Ee.o+15+ke>>4,fe.Hb=Ee.va+15+ke>>4,fe.Hb>fe.za&&(fe.Hb=fe.za),fe.Va>fe.Ub&&(fe.Va=fe.Ub),0<fe.L){var Ue=fe.ed;for(ke=0;4>ke;++ke){var Te;if(fe.Qa.Cb){var Ve=fe.Qa.Lb[ke];fe.Qa.Fb||(Ve+=Ue.Tb)}else Ve=Ue.Tb;for(Te=0;1>=Te;++Te){var Ye=fe.gd[ke][Te],rt=Ve;if(Ue.Pc&&(rt+=Ue.vd[0],Te&&(rt+=Ue.od[0])),0<(rt=0>rt?0:63<rt?63:rt)){var tt=rt;0<Ue.wb&&(tt=4<Ue.wb?tt>>2:tt>>1)>9-Ue.wb&&(tt=9-Ue.wb),1>tt&&(tt=1),Ye.dd=tt,Ye.tc=2*rt+tt,Ye.ld=40<=rt?2:15<=rt?1:0}else Ye.tc=0;Ye.La=Te}}}ke=0}else $r(fe,6,"Frame setup failed"),ke=fe.a;if(ke=ke==0){if(ke){fe.$c=0,0<fe.Aa||(fe.Ic=vse);t:{ke=fe.Ic,Ue=4*(tt=fe.za);var Wt=32*tt,Mt=tt+1,On=0<fe.L?tt*(0<fe.Aa?2:1):0,Bt=(fe.Aa==2?2:1)*tt;if((Ye=Ue+832+(Te=3*(16*ke+Ub[fe.L])/2*Wt)+(Ve=fe.Fa!=null&&0<fe.Fa.length?fe.Kc.c*fe.Kc.i:0))!=Ye)ke=0;else{if(Ye>fe.Vb){if(fe.Vb=0,fe.Ec=s(Ye),fe.Fc=0,fe.Ec==null){ke=$r(fe,1,"no memory during frame initialization.");break t}fe.Vb=Ye}Ye=fe.Ec,rt=fe.Fc,fe.Ac=Ye,fe.Bc=rt,rt+=Ue,fe.Gd=o(Wt,lr),fe.Hd=0,fe.rb=o(Mt+1,xf),fe.sb=1,fe.wa=On?o(On,ms):null,fe.Y=0,fe.D.Nb=0,fe.D.wa=fe.wa,fe.D.Y=fe.Y,0<fe.Aa&&(fe.D.Y+=tt),e(!0),fe.oc=Ye,fe.pc=rt,rt+=832,fe.ya=o(Bt,zt),fe.aa=0,fe.D.ya=fe.ya,fe.D.aa=fe.aa,fe.Aa==2&&(fe.D.aa+=tt),fe.R=16*tt,fe.B=8*tt,tt=(Wt=Ub[fe.L])*fe.R,Wt=Wt/2*fe.B,fe.sa=Ye,fe.ta=rt+tt,fe.qa=fe.sa,fe.ra=fe.ta+16*ke*fe.R+Wt,fe.Ha=fe.qa,fe.Ia=fe.ra+8*ke*fe.B+Wt,fe.$c=0,rt+=Te,fe.mb=Ve?Ye:null,fe.nb=Ve?rt:null,e(rt+Ve<=fe.Fc+fe.Vb),Dl(fe),i(fe.Ac,fe.Bc,0,Ue),ke=1}}if(ke){if(Ee.ka=0,Ee.y=fe.sa,Ee.O=fe.ta,Ee.f=fe.qa,Ee.N=fe.ra,Ee.ea=fe.Ha,Ee.Vd=fe.Ia,Ee.fa=fe.R,Ee.Rc=fe.B,Ee.F=null,Ee.J=0,!RI){for(ke=-255;255>=ke;++ke)TI[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)OI[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)PI[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)MI[255+ke]=0>ke?0:255<ke?255:ke;RI=1}Uu=Mu,Df=Pu,Fl=pp,fr=xi,Cr=mp,xo=Xg,Ni=Cb,qi=kb,Pc=R,hv=V,Sp=_f,Rb=Tb,wI=he,NI=we,SI=rv,jI=jf,_I=Eb,EI=Ab,Zo[0]=Jg,Zo[1]=Ru,Zo[2]=Ti,Zo[3]=Ia,Zo[4]=Zg,Zo[5]=Ac,Zo[6]=Ec,Zo[7]=Kj,Zo[8]=gp,Zo[9]=Gj,Hu[0]=go,Hu[1]=dr,Hu[2]=Du,Hu[3]=Da,Hu[4]=wt,Hu[5]=Pt,Hu[6]=bn,Mc[0]=yp,Mc[1]=bi,Mc[2]=Qg,Mc[3]=wf,Mc[4]=ev,Mc[5]=Yj,Mc[6]=tv,ke=1}else ke=0}ke&&(ke=(function(Kn,Ui){for(Kn.M=0;Kn.M<Kn.Va;++Kn.M){var Pn,$t=Kn.Jc[Kn.M&Kn.Xb],xt=Kn.m,Si=Kn;for(Pn=0;Pn<Si.za;++Pn){var An=xt,Jn=Si,zr=Jn.Ac,vs=Jn.Bc+4*Pn,Xs=Jn.zc,ci=Jn.ya[Jn.aa+Pn];if(Jn.Qa.Bb?ci.$b=pe(An,Jn.Pa.jb[0])?2+pe(An,Jn.Pa.jb[2]):pe(An,Jn.Pa.jb[1]):ci.$b=0,Jn.kc&&(ci.Ad=pe(An,Jn.Bd)),ci.Za=!pe(An,145)+0,ci.Za){var Ps=ci.Ob,Js=0;for(Jn=0;4>Jn;++Jn){var Hi,er=Xs[0+Jn];for(Hi=0;4>Hi;++Hi){er=nse[zr[vs+Hi]][er];for(var yr=FI[pe(An,er[0])];0<yr;)yr=FI[2*yr+pe(An,er[yr])];er=-yr,zr[vs+Hi]=er}r(Ps,Js,zr,vs,4),Js+=4,Xs[0+Jn]=er}}else er=pe(An,156)?pe(An,128)?1:3:pe(An,163)?2:0,ci.Ob[0]=er,i(zr,vs,er,4),i(Xs,0,er,4);ci.Dd=pe(An,142)?pe(An,114)?pe(An,183)?1:3:2:0}if(Si.m.Ka)return $r(Kn,7,"Premature end-of-partition0 encountered.");for(;Kn.ja<Kn.za;++Kn.ja){if(Si=$t,An=(xt=Kn).rb[xt.sb-1],zr=xt.rb[xt.sb+xt.ja],Pn=xt.ya[xt.aa+xt.ja],vs=xt.kc?Pn.Ad:0)An.la=zr.la=0,Pn.Za||(An.Na=zr.Na=0),Pn.Hc=0,Pn.Gc=0,Pn.ia=0;else{var ui,xr;if(An=zr,zr=Si,vs=xt.Pa.Xc,Xs=xt.ya[xt.aa+xt.ja],ci=xt.pb[Xs.$b],Jn=Xs.ad,Ps=0,Js=xt.rb[xt.sb-1],er=Hi=0,i(Jn,Ps,0,384),Xs.Za)var ys=0,Qo=vs[3];else{yr=s(16);var ji=An.Na+Js.Na;if(ji=mv(zr,vs[1],ji,ci.Eb,0,yr,0),An.Na=Js.Na=(0<ji)+0,1<ji)Uu(yr,0,Jn,Ps);else{var ma=yr[0]+3>>3;for(yr=0;256>yr;yr+=16)Jn[Ps+yr]=ma}ys=1,Qo=vs[0]}var kr=15&An.la,Vi=15&Js.la;for(yr=0;4>yr;++yr){var $a=1&Vi;for(ma=xr=0;4>ma;++ma)kr=kr>>1|($a=(ji=mv(zr,Qo,ji=$a+(1&kr),ci.Sc,ys,Jn,Ps))>ys)<<7,xr=xr<<2|(3<ji?3:1<ji?2:Jn[Ps+0]!=0),Ps+=16;kr>>=4,Vi=Vi>>1|$a<<7,Hi=(Hi<<8|xr)>>>0}for(Qo=kr,ys=Vi>>4,ui=0;4>ui;ui+=2){for(xr=0,kr=An.la>>4+ui,Vi=Js.la>>4+ui,yr=0;2>yr;++yr){for($a=1&Vi,ma=0;2>ma;++ma)ji=$a+(1&kr),kr=kr>>1|($a=0<(ji=mv(zr,vs[2],ji,ci.Qc,0,Jn,Ps)))<<3,xr=xr<<2|(3<ji?3:1<ji?2:Jn[Ps+0]!=0),Ps+=16;kr>>=2,Vi=Vi>>1|$a<<5}er|=xr<<4*ui,Qo|=kr<<4<<ui,ys|=(240&Vi)<<ui}An.la=Qo,Js.la=ys,Xs.Hc=Hi,Xs.Gc=er,Xs.ia=43690&er?0:ci.ia,vs=!(Hi|er)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[Pn.$b][Pn.Za],xt.wa[xt.Y+xt.ja].La|=!vs),Si.Ka)return $r(Kn,7,"Premature end-of-file encountered.")}if(Dl(Kn),xt=Ui,Si=1,Pn=($t=Kn).D,An=0<$t.L&&$t.M>=$t.zb&&$t.M<=$t.Va,$t.Aa==0)t:{if(Pn.M=$t.M,Pn.uc=An,yo($t,Pn),Si=1,Pn=(xr=$t.D).Nb,An=(er=Ub[$t.L])*$t.R,zr=er/2*$t.B,yr=16*Pn*$t.R,ma=8*Pn*$t.B,vs=$t.sa,Xs=$t.ta-An+yr,ci=$t.qa,Jn=$t.ra-zr+ma,Ps=$t.Ha,Js=$t.Ia-zr+ma,Vi=(kr=xr.M)==0,Hi=kr>=$t.Va-1,$t.Aa==2&&yo($t,xr),xr.uc)for($a=(ji=$t).D.M,e(ji.D.uc),xr=ji.yb;xr<ji.Hb;++xr){ys=xr,Qo=$a;var Zs=(za=(xs=ji).D).Nb;ui=xs.R;var za=za.wa[za.Y+ys],qa=xs.sa,ga=xs.ta+16*Zs*ui+16*ys,Ua=za.dd,Ir=za.tc;if(Ir!=0)if(e(3<=Ir),xs.L==1)0<ys&&jI(qa,ga,ui,Ir+4),za.La&&EI(qa,ga,ui,Ir),0<Qo&&SI(qa,ga,ui,Ir+4),za.La&&_I(qa,ga,ui,Ir);else{var Ha=xs.B,el=xs.qa,If=xs.ra+8*Zs*Ha+8*ys,Rc=xs.Ha,xs=xs.Ia+8*Zs*Ha+8*ys;Zs=za.ld,0<ys&&(qi(qa,ga,ui,Ir+4,Ua,Zs),hv(el,If,Rc,xs,Ha,Ir+4,Ua,Zs)),za.La&&(Rb(qa,ga,ui,Ir,Ua,Zs),NI(el,If,Rc,xs,Ha,Ir,Ua,Zs)),0<Qo&&(Ni(qa,ga,ui,Ir+4,Ua,Zs),Pc(el,If,Rc,xs,Ha,Ir+4,Ua,Zs)),za.La&&(Sp(qa,ga,ui,Ir,Ua,Zs),wI(el,If,Rc,xs,Ha,Ir,Ua,Zs))}}if($t.ia&&alert("todo:DitherRow"),xt.put!=null){if(xr=16*kr,kr=16*(kr+1),Vi?(xt.y=$t.sa,xt.O=$t.ta+yr,xt.f=$t.qa,xt.N=$t.ra+ma,xt.ea=$t.Ha,xt.W=$t.Ia+ma):(xr-=er,xt.y=vs,xt.O=Xs,xt.f=ci,xt.N=Jn,xt.ea=Ps,xt.W=Js),Hi||(kr-=er),kr>xt.o&&(kr=xt.o),xt.F=null,xt.J=null,$t.Fa!=null&&0<$t.Fa.length&&xr<kr&&(xt.J=Oi($t,xt,xr,kr-xr),xt.F=$t.mb,xt.F==null&&xt.F.length==0)){Si=$r($t,3,"Could not decode alpha data.");break t}xr<xt.j&&(er=xt.j-xr,xr=xt.j,e(!(1&er)),xt.O+=$t.R*er,xt.N+=$t.B*(er>>1),xt.W+=$t.B*(er>>1),xt.F!=null&&(xt.J+=xt.width*er)),xr<kr&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=xr-xt.j,xt.U=xt.va-xt.v,xt.T=kr-xr,Si=xt.put(xt))}Pn+1!=$t.Ic||Hi||(r($t.sa,$t.ta-An,vs,Xs+16*$t.R,An),r($t.qa,$t.ra-zr,ci,Jn+8*$t.B,zr),r($t.Ha,$t.Ia-zr,Ps,Js+8*$t.B,zr))}if(!Si)return $r(Kn,6,"Output aborted.")}return 1})(fe,Ee)),Ee.bc!=null&&Ee.bc(Ee),ke&=1}return ke?(fe.cb=0,ke):0})(w,$)||(A=w.a)}}else A=w.a}A==0&&Q.Oa!=null&&Q.Oa.fd&&(A=ov(Q.ba))}Q=A}J=Q!=0?null:11>J?ne.f.RGBA.eb:ne.f.kb.y}else J=null;return J};var WI=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(j,P){for(var k="",O=0;O<4;O++)k+=String.fromCharCode(j[P++]);return k}function d(j,P){return j[P+0]|j[P+1]<<8}function f(j,P){return(j[P+0]|j[P+1]<<8|j[P+2]<<16)>>>0}function p(j,P){return(j[P+0]|j[P+1]<<8|j[P+2]<<16|j[P+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],v=new c,y=t,b=(function(j,P){var k={},O=0,M=!1,I=0,B=0;if(k.frames=[],!(function(F,q){for(var Z=0;Z<4;Z++)if(F[q+Z]!="RIFF".charCodeAt(Z))return!0;return!1})(j,P)){for(p(j,P+=4),P+=8;P<j.length;){var U=u(j,P),D=p(j,P+=4);P+=4;var z=D+(1&D);switch(U){case"VP8 ":case"VP8L":k.frames[O]===void 0&&(k.frames[O]={}),(ae=k.frames[O]).src_off=M?B:P-8,ae.src_size=I+D+8,O++,M&&(M=!1,I=0,B=0);break;case"VP8X":(ae=k.header={}).feature_flags=j[P];var H=P+4;ae.canvas_width=1+f(j,H),H+=3,ae.canvas_height=1+f(j,H),H+=3;break;case"ALPH":M=!0,I=z+8,B=P-8;break;case"ANIM":(ae=k.header).bgcolor=p(j,P),H=P+4,ae.loop_count=d(j,H),H+=2;break;case"ANMF":var ee,ae;(ae=k.frames[O]={}).offset_x=2*f(j,P),P+=3,ae.offset_y=2*f(j,P),P+=3,ae.width=1+f(j,P),P+=3,ae.height=1+f(j,P),P+=3,ae.duration=f(j,P),P+=3,ee=j[P++],ae.dispose=1&ee,ae.blend=ee>>1&1}U!="ANMF"&&(P+=z)}return k}})(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var N=b.header?b.header:null,S=b.frames?b.frames:null;if(N){N.loop_counter=N.loop_count,h=[N.canvas_height],m=[N.canvas_width];for(var E=0;E<S.length&&S[E].blend!=0;E++);}var C=S[0],T=v.WebPDecodeRGBA(y,C.src_off,C.src_size,m,h);C.rgba=T,C.imgwidth=m[0],C.imgheight=h[0];for(var _=0;_<m[0]*h[0]*4;_++)g[_]=T[_];return this.width=m,this.height=h,this.data=g,this}(function(t){var e,n,r,i,s,o,l,c,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=F;Object.defineProperty(this,"pdf",{get:function(){return q}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(W){Z=!!W}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(W){te=!!W}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(W){isNaN(W)||(ce=W)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(W){isNaN(W)||(ue=W)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(W){var G;typeof W=="number"?G=[W,W,W,W]:((G=new Array(4))[0]=W[0],G[1]=W.length>=2?W[1]:G[0],G[2]=W.length>=3?W[2]:G[0],G[3]=W.length>=4?W[3]:G[1]),u.margin=G}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(W){ve=W}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(W){oe=W}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(W){pe=W}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(W){W instanceof d&&(u=W)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(W){u.path=W}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(W){xe=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var G;G=p(W),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var G=p(W);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var X=null,Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(W){X=null,Se=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var G;if(this.ctx.font=W,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(W))!==null){var _e=G[1];G[2];var Qe=G[3],ze=G[4];G[5];var Re=G[6],se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(se==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:se==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var ge=(function(It){var mt,yn,pn=[],Ct=It.trim();if(Ct==="")return lk;if(Ct in J7)return[J7[Ct]];for(;Ct!=="";){switch(yn=null,mt=(Ct=Q7(Ct)).charAt(0)){case'"':case"'":yn=HLe(Ct.substring(1),mt);break;default:yn=VLe(Ct)}if(yn===null||(pn.push(yn[0]),(Ct=Q7(yn[1]))!==""&&Ct.charAt(0)!==","))return lk;Ct=Ct.replace(/^,/,"")}return pn})(Re);if(this.fontFaces){var Ne=(function(It,mt){if(X===null){var yn=(function(pn){var Ct=[];return Object.keys(pn).forEach(function(en){pn[en].forEach(function(qn){var Vt=null;switch(qn){case"bold":Vt={family:en,weight:"bold"};break;case"italic":Vt={family:en,style:"italic"};break;case"bolditalic":Vt={family:en,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:en}}Vt!==null&&(Vt.ref={name:en,style:qn},Ct.push(Vt))})}),Ct})(It.getFontList());X=(function(pn){for(var Ct={},en=0;en<pn.length;++en){var qn=ok(pn[en]),Vt=qn.family,fn=qn.stretch,nn=qn.style,vr=qn.weight;Ct[Vt]=Ct[Vt]||{},Ct[Vt][fn]=Ct[Vt][fn]||{},Ct[Vt][fn][nn]=Ct[Vt][fn][nn]||{},Ct[Vt][fn][nn][vr]=qn}return Ct})(yn.concat(mt))}return X})(this.pdf,this.fontFaces),De=ge.map(function(It){return{family:It,stretch:"normal",weight:Qe,style:_e}}),Le=(function(It,mt,yn){for(var pn=(yn=yn||{}).defaultFontFamily||"times",Ct=Object.assign({},ULe,yn.genericFontFamilies||{}),en=null,qn=null,Vt=0;Vt<mt.length;++Vt)if(Ct[(en=ok(mt[Vt])).family]&&(en.family=Ct[en.family]),It.hasOwnProperty(en.family)){qn=It[en.family];break}if(!(qn=qn||It[pn]))throw new Error("Could not find a font-family for the rule '"+Z7(en)+"' and default family '"+pn+"'.");if(qn=(function(fn,nn){if(nn[fn])return nn[fn];var vr=O5[fn],ar=vr<=O5.normal?-1:1,on=X7(nn,Zee,vr,ar);if(!on)throw new Error("Could not find a matching font-stretch value for "+fn);return on})(en.stretch,qn),qn=(function(fn,nn){if(nn[fn])return nn[fn];for(var vr=Jee[fn],ar=0;ar<vr.length;++ar)if(nn[vr[ar]])return nn[vr[ar]];throw new Error("Could not find a matching font-style for "+fn)})(en.style,qn),!(qn=(function(fn,nn){if(nn[fn])return nn[fn];if(fn===400&&nn[500])return nn[500];if(fn===500&&nn[400])return nn[400];var vr=qLe[fn],ar=X7(nn,Qee,vr,fn<400?-1:1);if(!ar)throw new Error("Could not find a matching font-weight for value "+fn);return ar})(en.weight,qn)))throw new Error("Failed to resolve a font for the rule '"+Z7(en)+"'.");return qn})(Ne,De);this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var Pe="";(Qe==="bold"||parseInt(Qe,10)>=700||_e==="bold")&&(Pe="bold"),_e==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var qe="",ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},it=0;it<ge.length;it++){if(this.pdf.internal.getFont(ge[it],Pe,{noFallback:!0,disableWarning:!0})!==void 0){qe=ge[it];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(ge[it],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=ge[it],Pe="bold";else if(this.pdf.internal.getFont(ge[it],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=ge[it],Pe="normal";break}}if(qe===""){for(var pt=0;pt<ge.length;pt++)if(ut[ge[pt]]){qe=ut[ge[pt]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,q){if(isNaN(F)||isNaN(q))throw Tr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(F,q));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(F,q)},f.prototype.closePath=function(){var F=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Sr(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){F=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},f.prototype.lineTo=function(F,q){if(isNaN(F)||isNaN(q))throw Tr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(F,q));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,q,Z,te){if(isNaN(Z)||isNaN(te)||isNaN(F)||isNaN(q))throw Tr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new o(Z,te)),ue=this.ctx.transform.applyToPoint(new o(F,q));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},f.prototype.bezierCurveTo=function(F,q,Z,te,ce,ue){if(isNaN(ce)||isNaN(ue)||isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te))throw Tr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(ce,ue)),oe=this.ctx.transform.applyToPoint(new o(F,q)),pe=this.ctx.transform.applyToPoint(new o(Z,te));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:pe.x,y2:pe.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},f.prototype.arc=function(F,q,Z,te,ce,ue){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te)||isNaN(ce))throw Tr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(F,q));F=ve.x,q=ve.y;var oe=this.ctx.transform.applyToPoint(new o(0,Z)),pe=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(oe.x-pe.x,2)+Math.pow(oe.y-pe.y,2))}Math.abs(ce-te)>=2*Math.PI&&(te=0,ce=2*Math.PI),this.path.push({type:"arc",x:F,y:q,radius:Z,startAngle:te,endAngle:ce,counterclockwise:ue})},f.prototype.arcTo=function(F,q,Z,te,ce){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,q,Z,te){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te))throw Tr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,q),this.lineTo(F+Z,q),this.lineTo(F+Z,q+te),this.lineTo(F,q+te),this.lineTo(F,q),this.lineTo(F+Z,q),this.lineTo(F,q)},f.prototype.fillRect=function(F,q,Z,te){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te))throw Tr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,q,Z,te),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},f.prototype.strokeRect=function(F,q,Z,te){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te))throw Tr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(F,q,Z,te),this.stroke())},f.prototype.clearRect=function(F,q,Z,te){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te))throw Tr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,q,Z,te))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(F){var q,Z,te,ce;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))q=0,Z=0,te=0,ce=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ue!==null)q=parseInt(ue[1]),Z=parseInt(ue[2]),te=parseInt(ue[3]),ce=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)q=parseInt(ue[1]),Z=parseInt(ue[2]),te=parseInt(ue[3]),ce=parseFloat(ue[4]);else{if(ce=1,typeof F=="string"&&F.charAt(0)!=="#"){var ve=new Hee(F);F=ve.ok?ve.toHex():"#000000"}F.length===4?(q=F.substring(1,2),q+=q,Z=F.substring(2,3),Z+=Z,te=F.substring(3,4),te+=te):(q=F.substring(1,3),Z=F.substring(3,5),te=F.substring(5,7)),q=parseInt(q,16),Z=parseInt(Z,16),te=parseInt(te,16)}}return{r:q,g:Z,b:te,a:ce,style:F}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,q,Z,te){if(isNaN(q)||isNaN(Z)||typeof F!="string")throw Tr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!h.call(this)){var ce=z(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;O.call(this,{text:F,x:q,y:Z,scale:ue,angle:ce,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(F,q,Z,te){if(isNaN(q)||isNaN(Z)||typeof F!="string")throw Tr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){te=isNaN(te)?void 0:te;var ce=z(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;O.call(this,{text:F,x:q,y:Z,scale:ue,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(F){if(typeof F!="string")throw Tr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Z=this.pdf.internal.scaleFactor,te=q.internal.getFontSize(),ce=q.getStringUnitWidth(F)*te/q.internal.scaleFactor;return new function(ue){var ve=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:ce*=Math.round(96*Z/72*1e4)/1e4})},f.prototype.scale=function(F,q){if(isNaN(F)||isNaN(q))throw Tr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(F,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.rotate=function(F){if(isNaN(F))throw Tr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(F,q){if(isNaN(F)||isNaN(q))throw Tr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,F,q);this.ctx.transform=this.ctx.transform.multiply(Z)},f.prototype.transform=function(F,q,Z,te,ce,ue){if(isNaN(F)||isNaN(q)||isNaN(Z)||isNaN(te)||isNaN(ce)||isNaN(ue))throw Tr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new c(F,q,Z,te,ce,ue);this.ctx.transform=this.ctx.transform.multiply(ve)},f.prototype.setTransform=function(F,q,Z,te,ce,ue){F=isNaN(F)?1:F,q=isNaN(q)?0:q,Z=isNaN(Z)?0:Z,te=isNaN(te)?1:te,ce=isNaN(ce)?0:ce,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(F,q,Z,te,ce,ue)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,q,Z,te,ce,ue,ve,oe,pe){var xe=this.pdf.getImageProperties(F),X=1,Se=1,W=1,G=1;te!==void 0&&oe!==void 0&&(W=oe/te,G=pe/ce,X=xe.width/te*oe/te,Se=xe.height/ce*pe/ce),ue===void 0&&(ue=q,ve=Z,q=0,Z=0),te!==void 0&&oe===void 0&&(oe=te,pe=ce),te===void 0&&oe===void 0&&(oe=xe.width,pe=xe.height);for(var _e,Qe=this.ctx.transform.decompose(),ze=z(Qe.rotate.shx),Re=new c,se=(Re=(Re=(Re=Re.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new l(ue-q*W,ve-Z*G,te*X,ce*Se)),ge=v.call(this,se),Ne=[],De=0;De<ge.length;De+=1)Ne.indexOf(ge[De])===-1&&Ne.push(ge[De]);if(N(Ne),this.autoPaging)for(var Le=Ne[0],Pe=Ne[Ne.length-1],qe=Le;qe<Pe+1;qe++){this.pdf.setPage(qe);var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=qe===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=qe===1?0:pt+(qe-2)*It;if(this.ctx.clip_path.length!==0){var yn=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(_e,this.posX+this.margin[3],-mt+it+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=yn}var pn=JSON.parse(JSON.stringify(se));pn=b([pn],this.posX+this.margin[3],-mt+it+this.ctx.prevPageLastElemOffset)[0];var Ct=(qe>Le||qe<Pe)&&g.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,It,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",pn.x,pn.y,pn.w,pn.h,null,null,ze),Ct&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",se.x,se.y,se.w,se.h,null,null,ze)};var v=function(F,q,Z){var te=[];q=q||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":te.push(Math.floor((F.y+ce)/Z)+1);break;case"arc":te.push(Math.floor((F.y+ce-F.radius)/Z)+1),te.push(Math.floor((F.y+ce+F.radius)/Z)+1);break;case"qct":var ue=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);te.push(Math.floor((ue.y+ce)/Z)+1),te.push(Math.floor((ue.y+ue.h+ce)/Z)+1);break;case"bct":var ve=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);te.push(Math.floor((ve.y+ce)/Z)+1),te.push(Math.floor((ve.y+ve.h+ce)/Z)+1);break;case"rect":te.push(Math.floor((F.y+ce)/Z)+1),te.push(Math.floor((F.y+F.h+ce)/Z)+1)}for(var oe=0;oe<te.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<te[oe];)y.call(this);return te},y=function(){var F=this.fillStyle,q=this.strokeStyle,Z=this.font,te=this.lineCap,ce=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=q,this.font=Z,this.lineCap=te,this.lineWidth=ce,this.lineJoin=ue},b=function(F,q,Z){for(var te=0;te<F.length;te++)switch(F[te].type){case"bct":F[te].x2+=q,F[te].y2+=Z;case"qct":F[te].x1+=q,F[te].y1+=Z;default:F[te].x+=q,F[te].y+=Z}return F},N=function(F){return F.sort(function(q,Z){return q-Z})},S=function(F,q){for(var Z,te,ce=this.fillStyle,ue=this.strokeStyle,ve=this.lineCap,oe=this.lineWidth,pe=Math.abs(oe*this.ctx.transform.scaleX),xe=this.lineJoin,X=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),W=[],G=0;G<Se.length;G++)if(Se[G].x!==void 0)for(var _e=v.call(this,Se[G]),Qe=0;Qe<_e.length;Qe+=1)W.indexOf(_e[Qe])===-1&&W.push(_e[Qe]);for(var ze=0;ze<W.length;ze++)for(;this.pdf.internal.getNumberOfPages()<W[ze];)y.call(this);if(N(W),this.autoPaging)for(var Re=W[0],se=W[W.length-1],ge=Re;ge<se+1;ge++){this.pdf.setPage(ge),this.fillStyle=ce,this.strokeStyle=ue,this.lineCap=ve,this.lineWidth=pe,this.lineJoin=xe;var Ne=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=ge===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=ge===1?0:Le+(ge-2)*Pe;if(this.ctx.clip_path.length!==0){var ut=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Z,this.posX+this.margin[3],-qe+De+this.ctx.prevPageLastElemOffset),E.call(this,F,!0),this.path=ut}if(te=JSON.parse(JSON.stringify(X)),this.path=b(te,this.posX+this.margin[3],-qe+De+this.ctx.prevPageLastElemOffset),q===!1||ge===0){var it=(ge>Re||ge<se)&&g.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,Pe,null).clip().discardPath()),E.call(this,F,q),it&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=pe,E.call(this,F,q),this.lineWidth=oe;this.path=X},E=function(F,q){if((F!=="stroke"||q||!m.call(this))&&(F==="stroke"||q||!h.call(this))){for(var Z,te,ce=[],ue=this.path,ve=0;ve<ue.length;ve++){var oe=ue[ve];switch(oe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:oe,deltas:[],abs:[]});break;case"lt":var pe=ce.length;if(ue[ve-1]&&!isNaN(ue[ve-1].x)&&(Z=[oe.x-ue[ve-1].x,oe.y-ue[ve-1].y],pe>0)){for(;pe>=0;pe--)if(ce[pe-1].close!==!0&&ce[pe-1].begin!==!0){ce[pe-1].deltas.push(Z),ce[pe-1].abs.push(oe);break}}break;case"bct":Z=[oe.x1-ue[ve-1].x,oe.y1-ue[ve-1].y,oe.x2-ue[ve-1].x,oe.y2-ue[ve-1].y,oe.x-ue[ve-1].x,oe.y-ue[ve-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var xe=ue[ve-1].x+2/3*(oe.x1-ue[ve-1].x),X=ue[ve-1].y+2/3*(oe.y1-ue[ve-1].y),Se=oe.x+2/3*(oe.x1-oe.x),W=oe.y+2/3*(oe.y1-oe.y),G=oe.x,_e=oe.y;Z=[xe-ue[ve-1].x,X-ue[ve-1].y,Se-ue[ve-1].x,W-ue[ve-1].y,G-ue[ve-1].x,_e-ue[ve-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(oe)}}te=q?null:F==="stroke"?"stroke":"fill";for(var Qe=!1,ze=0;ze<ce.length;ze++)if(ce[ze].arc)for(var Re=ce[ze].abs,se=0;se<Re.length;se++){var ge=Re[se];ge.type==="arc"?_.call(this,ge.x,ge.y,ge.radius,ge.startAngle,ge.endAngle,ge.counterclockwise,void 0,q,!Qe):M.call(this,ge.x,ge.y),Qe=!0}else if(ce[ze].close===!0)this.pdf.internal.out("h"),Qe=!1;else if(ce[ze].begin!==!0){var Ne=ce[ze].start.x,De=ce[ze].start.y;I.call(this,ce[ze].deltas,Ne,De),Qe=!0}te&&j.call(this,te),q&&P.call(this)}},C=function(F){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Z;case"top":return F+q-Z;case"hanging":return F+q-2*Z;case"middle":return F+q/2-Z;default:return F}},T=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(q,Z){this.colorStops.push([q,Z])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(F,q,Z,te,ce,ue,ve,oe,pe){for(var xe=U.call(this,Z,te,ce,ue),X=0;X<xe.length;X++){var Se=xe[X];X===0&&(pe?k.call(this,Se.x1+F,Se.y1+q):M.call(this,Se.x1+F,Se.y1+q)),B.call(this,F,q,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}oe?P.call(this):j.call(this,ve)},j=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},P=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(F,q){this.pdf.internal.out(n(F)+" "+r(q)+" m")},O=function(F){var q;switch(F.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var Z=this.pdf.getTextDimensions(F.text),te=C.call(this,F.y),ce=T.call(this,te)-Z.h,ue=this.ctx.transform.applyToPoint(new o(F.x,te)),ve=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var pe,xe,X,Se=this.ctx.transform.applyToRectangle(new l(F.x,te,Z.w,Z.h)),W=oe.applyToRectangle(new l(F.x,ce,Z.w,Z.h)),G=v.call(this,W),_e=[],Qe=0;Qe<G.length;Qe+=1)_e.indexOf(G[Qe])===-1&&_e.push(G[Qe]);if(N(_e),this.autoPaging)for(var ze=_e[0],Re=_e[_e.length-1],se=ze;se<Re+1;se++){this.pdf.setPage(se);var ge=se===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[2],Le=De-this.margin[0],Pe=this.pdf.internal.pageSize.width-this.margin[1],qe=Pe-this.margin[3],ut=se===1?0:Ne+(se-2)*Le;if(this.ctx.clip_path.length!==0){var it=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(pe,this.posX+this.margin[3],-1*ut+ge),E.call(this,"fill",!0),this.path=it}var pt=b([JSON.parse(JSON.stringify(W))],this.posX+this.margin[3],-ut+ge+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*F.scale),X=this.lineWidth,this.lineWidth=X*F.scale);var It=this.autoPaging!=="text";if(It||pt.y+pt.h<=De){if(It||pt.y>=ge&&pt.x<=Pe){var mt=It?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Pe-pt.x)[0],yn=b([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-ut+ge+this.ctx.prevPageLastElemOffset)[0],pn=It&&(se>ze||se<Re)&&g.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Le,null).clip().discardPath()),this.pdf.text(mt,yn.x,yn.y,{angle:F.angle,align:q,renderingMode:F.renderingMode}),pn&&this.pdf.restoreGraphicsState()}}else pt.y<De&&(this.ctx.prevPageLastElemOffset+=De-pt.y);F.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=X)}else F.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*F.scale),X=this.lineWidth,this.lineWidth=X*F.scale),this.pdf.text(F.text,ue.x+this.posX,ue.y+this.posY,{angle:F.angle,align:q,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=X)},M=function(F,q,Z,te){Z=Z||0,te=te||0,this.pdf.internal.out(n(F+Z)+" "+r(q+te)+" l")},I=function(F,q,Z){return this.pdf.lines(F,q,Z,null,null)},B=function(F,q,Z,te,ce,ue,ve,oe){this.pdf.internal.out([e(i(Z+F)),e(s(te+q)),e(i(ce+F)),e(s(ue+q)),e(i(ve+F)),e(s(oe+q)),"c"].join(" "))},U=function(F,q,Z,te){for(var ce=2*Math.PI,ue=Math.PI/2;q>Z;)q-=ce;var ve=Math.abs(Z-q);ve<ce&&te&&(ve=ce-ve);for(var oe=[],pe=te?-1:1,xe=q;ve>1e-5;){var X=xe+pe*Math.min(ve,ue);oe.push(D.call(this,F,xe,X)),ve-=Math.abs(X-xe),xe=X}return oe},D=function(F,q,Z){var te=(Z-q)/2,ce=F*Math.cos(te),ue=F*Math.sin(te),ve=ce,oe=-ue,pe=ve*ve+oe*oe,xe=pe+ve*ce+oe*ue,X=4/3*(Math.sqrt(2*pe*xe)-xe)/(ve*ue-oe*ce),Se=ve-X*oe,W=oe+X*ve,G=Se,_e=-W,Qe=te+q,ze=Math.cos(Qe),Re=Math.sin(Qe);return{x1:F*Math.cos(q),y1:F*Math.sin(q),x2:Se*ze-W*Re,y2:Se*Re+W*ze,x3:G*ze-_e*Re,y3:G*Re+_e*ze,x4:F*Math.cos(Z),y4:F*Math.sin(Z)}},z=function(F){return 180*F/Math.PI},H=function(F,q,Z,te,ce,ue){var ve=F+.5*(Z-F),oe=q+.5*(te-q),pe=ce+.5*(Z-ce),xe=ue+.5*(te-ue),X=Math.min(F,ce,ve,pe),Se=Math.max(F,ce,ve,pe),W=Math.min(q,ue,oe,xe),G=Math.max(q,ue,oe,xe);return new l(X,W,Se-X,G-W)},ee=function(F,q,Z,te,ce,ue,ve,oe){var pe,xe,X,Se,W,G,_e,Qe,ze,Re,se,ge,Ne,De,Le=Z-F,Pe=te-q,qe=ce-Z,ut=ue-te,it=ve-ce,pt=oe-ue;for(xe=0;xe<41;xe++)ze=(_e=(X=F+(pe=xe/40)*Le)+pe*((W=Z+pe*qe)-X))+pe*(W+pe*(ce+pe*it-W)-_e),Re=(Qe=(Se=q+pe*Pe)+pe*((G=te+pe*ut)-Se))+pe*(G+pe*(ue+pe*pt-G)-Qe),xe==0?(se=ze,ge=Re,Ne=ze,De=Re):(se=Math.min(se,ze),ge=Math.min(ge,Re),Ne=Math.max(Ne,ze),De=Math.max(De,Re));return new l(Math.round(se),Math.round(ge),Math.round(Ne-se),Math.round(De-ge))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,q,Z=(F=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:q}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Kt.API),(function(t){var e=function(o){var l,c,u,d,f,p,h,m,g,v;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(v=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(p+33,h+33,m+33,g+33,v+33)):c.push(122);return(function(y,b){for(var N=b;N>0;N--)y.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,u,d,f,p=String,h="length",m=255,g="charCodeAt",v="slice",y="replace";for(o[v](-2),o=o[v](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[v](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[g](d)-33)+614125*(o[g](d+1)-33)+7225*(o[g](d+2)-33)+85*(o[g](d+3)-33)+(o[g](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return(function(b,N){for(var S=N;S>0;S--)b.pop()})(u,l[h]),p.fromCharCode.apply(p,u)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=j5(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}})(Kt.API),(function(t){t.loadFile=function(e,n,r){return(function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,d){var f=new XMLHttpRequest,p=0,h=function(m){var g=m.length,v=[],y=String.fromCharCode;for(p=0;p<g;p+=1)v.push(y(255&m.charCodeAt(p)));return v.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)})(i,s,o)}catch{}return l})(e,n,r)},t.loadImageFile=t.loadFile})(Kt.API),(function(t){function e(){return(gn.html2canvas?Promise.resolve(gn.html2canvas):UC(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(gn.DOMPurify?Promise.resolve(gn.DOMPurify):UC(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=Sr(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],g=m.src.find(function(v){return v.format==="truetype"});g&&u.addFont(g.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),p=u.call(f,l,c);return o.convert(p,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Kt.getPageSize=function(l,c,u){if(Sr(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,g=0,v=0;if(h.hasOwnProperty(p))g=h[p][1]/f,v=h[p][0]/f;else try{g=u[1],v=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",v>g&&(m=v,v=g,g=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>v&&(m=v,v=g,g=m)}return{width:v,height:g,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ok):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}})(Kt.API),Kt.API.addJS=function(t){return tq=t,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),eq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+tq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&eq!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(Kt.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=(function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,g={width:0,height:0,numcomponents:1},v=4;v<m;v+=2){if(v+=h,e.indexOf(f.charCodeAt(v+1))!==-1){p=256*f.charCodeAt(v+5)+f.charCodeAt(v+6),g={width:256*f.charCodeAt(v+7)+f.charCodeAt(v+8),height:p,numcomponents:f.charCodeAt(v+9)};break}h=256*f.charCodeAt(v+2)+f.charCodeAt(v+3)}return g})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}})(Kt.API),Kt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=CLe(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;i=u&&c===1?(function(_){for(var j=_.width,P=_.height,k=_.data,O=_.palette,M=_.depth,I=!1,B=[],U=[],D=void 0,z=!1,H=0,ee=0;ee<O.length;ee++){var ae=s7(O[ee],4),F=ae[0],q=ae[1],Z=ae[2],te=ae[3];B.push(F,q,Z),te!=null&&(te===0?(H++,U.length<1&&U.push(ee)):te<255&&(z=!0))}if(z||H>1){I=!0,U=void 0;var ce=j*P;D=new Uint8Array(ce);for(var ue=new DataView(k.buffer),ve=0;ve<ce;ve++){var oe=ck(ue,ve,M),pe=s7(O[oe],4)[3];D[ve]=pe}}else H===0&&(U=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:I?8:void 0,colorBytes:k,alphaBytes:D,needSMask:I,palette:B,mask:U}})(s):c===2||c===4?(function(_){for(var j=_.data,P=_.width,k=_.height,O=_.channels,M=_.depth,I=O===2?"DeviceGray":"DeviceRGB",B=O-1,U=P*k,D=B,z=U*D,H=1*U,ee=Math.ceil(z*M/8),ae=Math.ceil(H*M/8),F=new Uint8Array(ee),q=new Uint8Array(ae),Z=new DataView(j.buffer),te=new DataView(F.buffer),ce=new DataView(q.buffer),ue=!1,ve=0;ve<U;ve++){for(var oe=ve*O,pe=0;pe<D;pe++)uq(te,ck(Z,oe+pe,M),ve*D+pe,M);var xe=ck(Z,oe+D,M);xe<(1<<M)-1&&(ue=!0),uq(ce,xe,1*ve,M)}return{colorSpace:I,colorsPerPixel:B,sMaskBitsPerComponent:ue?M:void 0,colorBytes:F,alphaBytes:q,needSMask:ue}})(s):(function(_){var j=_.data,P=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:P,colorsPerPixel:P==="DeviceGray"?1:3,colorBytes:j instanceof Uint16Array?(function(k){for(var O=k.length,M=new Uint8Array(2*O),I=new DataView(M.buffer,M.byteOffset,M.byteLength),B=0;B<O;B++)I.setUint16(2*B,k[B],!1);return M})(j):j,needSMask:!1}})(s);var f,p,h,m=i,g=m.colorSpace,v=m.colorsPerPixel,y=m.sMaskBitsPerComponent,b=m.colorBytes,N=m.alphaBytes,S=m.needSMask,E=m.palette,C=m.mask,T=null;return r!==Kt.API.image_compression.NONE&&typeof j5=="function"?(T=(function(_){var j;switch(_){case Kt.API.image_compression.FAST:j=11;break;case Kt.API.image_compression.MEDIUM:j=13;break;case Kt.API.image_compression.SLOW:j=14;break;default:j=12}return j})(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(T," /Colors ").concat(v," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=sq(b,Math.ceil(o*v*d/8),v,d,r),S&&(h=sq(N,Math.ceil(o*y/8),1,y,r))):(f=void 0,p=void 0,t=b,S&&(h=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:f,decodeParameters:p,transparency:C,palette:E,sMask:h,predictor:T,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:g}}},(function(t){t.processGIF89A=function(e,n,r,i){var s=new YLe(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new uk(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A})(Kt.API),nl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},nl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Tr.log("bit decode error:"+n)}},nl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},nl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},nl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},nl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},nl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},nl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},nl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},nl.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,i){var s=new nl(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new uk(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}})(Kt.API),fq.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,i){var s=new fq(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new uk(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}})(Kt.API),Kt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=r[u],f=r[u+1],p=r[u+2],h=r[u+3];s[l++]=d,s[l++]=f,s[l++]=p,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Kt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dp=Kt.API,k0=Dp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,h=t.length,m=0,g=l[0]||c,v=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(p=f&&Sr(u[r])==="object"&&!isNaN(parseInt(u[r][m],10))?u[r][m]/d:0,v.push((l[r]||g)/c+p)),m=r;return v},nq=Dp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Dp.processArabic&&(t=Dp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:k0.apply(this,arguments).reduce(function(s,o){return s+o},0)},rq=function(t,e,n,r){for(var i=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<n;)l+=e[s],s++;i.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>r&&(i.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},iq=function(t,e,n){n||(n={});var r,i,s,o,l,c,u,d=[],f=[d],p=n.textIndent||0,h=0,m=0,g=t.split(" "),v=k0.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(c).join(" "),b=[];g.map(function(S){(S=S.split(/\s*\n/)).length>1?b=b.concat(S.map(function(E,C){return(C&&E.length?`
`:"")+E})):b.push(S[0])}),g=b,c=nq.apply(this,[y,n])}for(s=0,o=g.length;s<o;s++){var N=0;if(r=g[s],c&&r[0]==`
`&&(r=r.substr(1),N=1),p+h+(m=(i=k0.apply(this,[r,n])).reduce(function(S,E){return S+E},0))>e||N){if(m>e){for(l=rq.apply(this,[r,i,e-(p+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(S,E){return S+E},0)}else d=[r];f.push(d),p=m+c,h=v}else d.push(r),p+=h+m,h=v}return u=c?function(S,E){return(E?y:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},Dp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var l,c,u=[];for(l=0,c=r.length;l<c;l++)u=u.concat(iq.apply(this,[r[l],o,s]));return u},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=t.__fontmetrics__.compress=function(p){var h,m,g,v,y=["{"];for(var b in p){if(h=p[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=o(b).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(g=o(h).slice(3),v="-"):(g=o(h).slice(2),v=""),g=v+g.slice(0,-1)+i[g.slice(-1)];else{if(Sr(h)!=="object")throw new Error("Don't know what to do with value type "+Sr(h)+".");g=l(h)}y.push(m+g)}return y.push("}"),y.join("")},c=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,v,y={},b=1,N=y,S=[],E="",C="",T=p.length-1,_=1;_<T;_+=1)(v=p[_])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(S.push([N,g]),N={},g=void 0):v=="}"?((m=S.pop())[0][m[1]]=N,g=void 0,N=m[0]):v=="-"?b=-1:g===void 0?r.hasOwnProperty(v)?(E+=r[v],g=parseInt(E,16)*b,b=1,E=""):E+=v:r.hasOwnProperty(v)?(C+=r[v],N[g]=parseInt(C,16)*b,b=1,g=void 0,C=""):C+=v;return y},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var h=p.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])})(Kt.API),(function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(u1(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])})(Kt),Kt.API.addSvgAsImage=function(t,e,n,r,i,s,o,l){if(isNaN(e)||isNaN(n))throw Tr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Tr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(gn.canvg?Promise.resolve(gn.canvg):UC(()=>import("./index.es-BZfUCev9.js"),__vite__mapDeps([0,1,2]))).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,n,r,i,o,l)})},Kt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Kt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function p(m,g){var v,y=!1;for(v=0;v<m.length;v+=1)m[v]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)n[l[f]].value=n[l[f]].defaultValue,n[l[f]].explicitSet=!1}if(Sr(t)==="object"){for(i in t)if(s=t[i],p(l,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&p(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Kt.API),(function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=s.length;f<p;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},r=function(s){var o,l,c,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<p;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var v=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Wp(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Wp(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+Wp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var m=u();d({data:p,addLength1:!0,objectId:m}),c("endobj");var g=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var v=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Wp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Wp(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},p=f.pdfEscape,h=f.activeFontKey,m=f.fonts,g=h,v="",y=0,b="",N=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(b=l,g=h,Array.isArray(l)&&(b=l[0]),y=0;y<b.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),o||b[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?v+=b[y]:v+="";var S="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?S=p(v,g).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(S=n(v,m[g])),f.isHex=!0,{text:S,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])})(Kt),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Kt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,l,c,u,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,N=0;this.__bidiEngine__={};var S=function(k){var O=k.charCodeAt(),M=O>>8,I=g[M];return I!==void 0?f[256*I+(255&O)]:M===252||M===253?"AL":y.test(M)?"L":M===8?"R":"N"},E=function(k){for(var O,M=0;M<k.length;M++){if((O=S(k.charAt(M)))==="L")return!1;if(O==="R")return!0}return!1},C=function(k,O,M,I){var B,U,D,z,H=O[I];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(H="AN");break;case"AL":b=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":I<1||I+1>=O.length||(B=M[I-1])!=="EN"&&B!=="AN"||(U=O[I+1])!=="EN"&&U!=="AN"?H="N":b&&(U="AN"),H=U===B?U:"N";break;case"ES":H=(B=I>0?M[I-1]:"B")==="EN"&&I+1<O.length&&O[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&M[I-1]==="EN"){H="EN";break}if(b){H="N";break}for(D=I+1,z=O.length;D<z&&O[D]==="ET";)D++;H=D<z&&O[D]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(z=O.length,D=I+1;D<z&&O[D]==="NSM";)D++;if(D<z){var ee=k[I],ae=ee>=1425&&ee<=2303||ee===64286;if(B=O[D],ae&&(B==="R"||B==="AL")){H="R";break}}}H=I<1||(B=O[I-1])==="B"?"N":M[I-1];break;case"B":b=!1,i=!0,H=N;break;case"S":s=!0,H="N"}return H},T=function(k,O,M){var I=k.split("");return M&&_(I,M,{hiLevel:N}),I.reverse(),O&&O.reverse(),I.join("")},_=function(k,O,M){var I,B,U,D,z,H=-1,ee=k.length,ae=0,F=[],q=N?h:p,Z=[];for(b=!1,i=!1,s=!1,B=0;B<ee;B++)Z[B]=S(k[B]);for(U=0;U<ee;U++){if(z=ae,F[U]=C(k,Z,F,U),I=240&(ae=q[z][m[F[U]]]),ae&=15,O[U]=D=q[ae][5],I>0)if(I===16){for(B=H;B<U;B++)O[B]=1;H=-1}else H=-1;if(q[ae][6])H===-1&&(H=U);else if(H>-1){for(B=H;B<U;B++)O[B]=D;H=-1}Z[U]==="B"&&(O[U]=0),M.hiLevel|=D}s&&(function(te,ce,ue){for(var ve=0;ve<ue;ve++)if(te[ve]==="S"){ce[ve]=N;for(var oe=ve-1;oe>=0&&te[oe]==="WS";oe--)ce[oe]=N}})(Z,O,ee)},j=function(k,O,M,I,B){if(!(B.hiLevel<k)){if(k===1&&N===1&&!i)return O.reverse(),void(M&&M.reverse());for(var U,D,z,H,ee=O.length,ae=0;ae<ee;){if(I[ae]>=k){for(z=ae+1;z<ee&&I[z]>=k;)z++;for(H=ae,D=z-1;H<D;H++,D--)U=O[H],O[H]=O[D],O[D]=U,M&&(U=M[H],M[H]=M[D],M[D]=U);ae=z}ae++}}},P=function(k,O,M){var I=k.split(""),B={hiLevel:N};return M||(M=[]),_(I,M,B),(function(U,D,z){if(z.hiLevel!==0&&d)for(var H,ee=0;ee<U.length;ee++)D[ee]===1&&(H=v.indexOf(U[ee]))>=0&&(U[ee]=v[H+1])})(I,M,B),j(2,I,O,M,B),j(1,I,O,M,B),I.join("")};return this.__bidiEngine__.doBidiReorder=function(k,O,M){if((function(B,U){if(U)for(var D=0;D<B.length;D++)U[D]=D;l===void 0&&(l=E(B)),u===void 0&&(u=E(B))})(k,O),o||!c||u)if(o&&c&&l^u)N=l?1:0,k=T(k,O,M);else if(!o&&c&&u)N=l?1:0,k=P(k,O,M),k=T(k,O);else if(!o||l||c||u){if(o&&!c&&l^u)k=T(k,O),l?(N=0,k=P(k,O,M)):(N=1,k=P(k,O,M),k=T(k,O));else if(o&&l&&!c&&u)N=1,k=P(k,O,M),k=T(k,O);else if(!o&&!c&&l^u){var I=d;l?(N=1,k=P(k,O,M),N=0,d=!1,k=P(k,O,M),d=I):(N=0,k=P(k,O,M),k=T(k,O),N=1,d=!1,k=P(k,O,M),d=I,k=T(k,O))}}else N=0,k=P(k,O,M);else N=l?1:0,k=P(k,O,M);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([n.doBidiReorder(i[l])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])})(Kt),Kt.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Qd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new u3e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new XLe(this.contents),this.head=new ZLe(this),this.name=new r3e(this),this.cmap=new tte(this),this.toUnicode={},this.hhea=new QLe(this),this.maxp=new i3e(this),this.hmtx=new s3e(this),this.post=new t3e(this),this.os2=new e3e(this),this.loca=new c3e(this),this.glyf=new a3e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var Pl,Qd=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,l,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t})(),XLe=(function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,l,c,u,d,f,p,h,m,g;for(g in h=Object.keys(n).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(i=new Qd).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(o),i.writeShort(d),s=16*h,u=i.pos+s,l=null,m=[],n)for(p=n[g],i.writeString(g),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),m=m.concat(p),g==="head"&&(l=u),u+=p.length;u%4;)m.push(0),u++;return i.write(m),r=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=nte.call(n);n.length%4;)n.push(0);for(s=new Qd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),JLe={}.hasOwnProperty,wc=function(t,e){for(var n in e)JLe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pl=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var ZLe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Qd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),hq=(function(){function t(e,n){var r,i,s,o,l,c,u,d,f,p,h,m,g,v,y,b,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,s=(function(){var S,E;for(E=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)E.push(e.readUInt16());return E})(),e.pos+=2,g=(function(){var S,E;for(E=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)E.push(e.readUInt16());return E})(),u=(function(){var S,E;for(E=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)E.push(e.readUInt16());return E})(),d=(function(){var S,E;for(E=[],c=S=0;0<=p?S<p:S>p;c=0<=p?++S:--S)E.push(e.readUInt16());return E})(),i=(this.length-e.pos+this.offset)/2,l=(function(){var S,E;for(E=[],c=S=0;0<=i?S<i:S>i;c=0<=i?++S:--S)E.push(e.readUInt16());return E})(),c=y=0,N=s.length;y<N;c=++y)for(v=s[c],r=b=m=g[c];m<=v?b<=v:b>=v;r=m<=v?++b:--b)d[c]===0?o=r+u[c]:(o=l[d[c]/2+(r-m)-(p-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=f}return t.encode=function(e,n){var r,i,s,o,l,c,u,d,f,p,h,m,g,v,y,b,N,S,E,C,T,_,j,P,k,O,M,I,B,U,D,z,H,ee,ae,F,q,Z,te,ce,ue,ve,oe,pe,xe,X;switch(I=new Qd,o=Object.keys(e).sort(function(Se,W){return Se-W}),n){case"macroman":for(g=0,v=(function(){var Se=[];for(m=0;m<256;++m)Se.push(0);return Se})(),b={0:0},s={},B=0,H=o.length;B<H;B++)b[oe=e[i=o[B]]]==null&&(b[oe]=++g),s[i]={old:e[i],new:b[e[i]]},v[i]=b[e[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(v),{charMap:s,subtable:I.data,maxGlyphID:g+1};case"unicode":for(O=[],f=[],N=0,b={},r={},y=u=null,U=0,ee=o.length;U<ee;U++)b[E=e[i=o[U]]]==null&&(b[E]=++N),r[i]={old:E,new:b[E]},l=b[E]-i,y!=null&&l===u||(y&&f.push(y),O.push(i),u=l),y=i;for(y&&f.push(y),f.push(65535),O.push(65535),P=2*(j=O.length),_=2*Math.pow(Math.log(j)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,T=2*j-_,c=[],C=[],h=[],m=D=0,ae=O.length;D<ae;m=++D){if(k=O[m],d=f[m],k===65535){c.push(0),C.push(0);break}if(k-(M=r[k].new)>=32768)for(c.push(0),C.push(2*(h.length+j-m)),i=z=k;k<=d?z<=d:z>=d;i=k<=d?++z:--z)h.push(r[i].new);else c.push(M-k),C.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*j+2*h.length),I.writeUInt16(0),I.writeUInt16(P),I.writeUInt16(_),I.writeUInt16(p),I.writeUInt16(T),ue=0,F=f.length;ue<F;ue++)i=f[ue],I.writeUInt16(i);for(I.writeUInt16(0),ve=0,q=O.length;ve<q;ve++)i=O[ve],I.writeUInt16(i);for(pe=0,Z=c.length;pe<Z;pe++)l=c[pe],I.writeUInt16(l);for(xe=0,te=C.length;xe<te;xe++)S=C[xe],I.writeUInt16(S);for(X=0,ce=h.length;X<ce;X++)g=h[X],I.writeUInt16(g);return{charMap:r,subtable:I.data,maxGlyphID:N+1}}},t})(),tte=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new hq(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=hq.encode(e,n),(i=new Qd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t})(),QLe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),e3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),t3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}.call(this)}},t})(),n3e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},r3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,l,c,u,d,f,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),l=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=r.length;d<f;s=++d)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new n3e(u,i),c[p=i.nameID]==null&&(c[p]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),i3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),s3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,d;for(d=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)d.push(e.readInt16());return d})(),this.widths=function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],p.push(s.advance);return p}.call(this),r=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(r));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),nte=[].slice,a3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(l=new Qd(n.read(i))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new l3e(l,u,f,c,d):new o3e(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,l,c;for(o=[],s=[],l=0,c=n.length;l<c;l++)i=e[n[l]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t})(),o3e=(function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),l3e=(function(){function t(e,n,r,i,s){var o,l;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Qd(nte.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),c3e=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return wc(t,Pl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}.call(this):function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t})(),u3e=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,l,c,u,d,f,p,h,m,g,v,y;for(i in r=tte.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},y=r.charMap)h[(c=y[i]).old]=c.new;for(m in p=r.maxGlyphID,o)m in h||(h[m]=p++);return d=(function(b){var N,S;for(N in S={},b)S[b[N]]=N;return S})(h),f=Object.keys(d).sort(function(b,N){return b-N}),g=(function(){var b,N,S;for(S=[],b=0,N=f.length;b<N;b++)l=f[b],S.push(d[l]);return S})(),s=this.font.glyf.encode(o,g,h),u=this.font.loca.encode(s.offsets,g),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t})();Kt.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+(function(){var l,c,u;for(u=[],l=0,c=n.length;l<c;l++)r=n[l],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e})();function d3e(){const t=$P(),[,e]=es(),{user:n}=Zh(),{data:r,isLoading:i}=At({queryKey:["/api/manuals",t.id]}),{data:s=[]}=At({queryKey:["/api/manuals",t.id,"attachments"],enabled:!!t.id}),o=n?.roleName||n?.role,l=["Administrador","Gestor","ADMIN","GESTOR"].includes(String(o)),[c,u]=x.useState(!1),{toast:d}=nr(),f=async()=>{if(!(!r||!window.confirm(`¿Eliminar el manual "${r.titulo}"? Esta acción no se puede deshacer.`)))try{await ht("DELETE",`/api/manuals/${encodeURIComponent(r.id)}`),Lt.setQueryData(["/api/manuals"],g=>Array.isArray(g)?g.filter(v=>v.id!==r.id):g),await Lt.invalidateQueries({queryKey:["/api/manuals"],exact:!0}),d({title:"Manual eliminado"}),e("/manuales")}catch(g){d({title:"No se pudo eliminar",description:g?.message??"",variant:"destructive"})}},p=m=>m<1024?m+" B":m<1024*1024?(m/1024).toFixed(1)+" KB":(m/(1024*1024)).toFixed(1)+" MB",h=()=>{if(!r)return;const m=new Kt;m.setFontSize(20),m.text(r.titulo,20,20),m.setFontSize(12);const g=r.contenidoHtml.replace(/<[^>]*>/g,""),v=m.splitTextToSize(g,170);m.text(v,20,40),m.save(`${r.titulo}.pdf`)};return i?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(Fn,{className:"h-9 w-48"}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(Fn,{className:"h-8 w-3/4"})}),a.jsx(Be,{children:a.jsx(Fn,{className:"h-64 w-full"})})]})]}):r?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e("/manuales"),"data-testid":"button-back",children:a.jsx(ju,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:r.titulo})}),a.jsxs(re,{variant:"outline",onClick:h,"data-testid":"button-export-pdf",children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Exportar PDF"]}),l&&a.jsxs(a.Fragment,{children:[a.jsxs(re,{variant:"outline",onClick:()=>u(m=>!m),"data-testid":"button-expand",children:[c?a.jsx(cae,{className:"h-4 w-4 mr-2"}):a.jsx(uae,{className:"h-4 w-4 mr-2"}),c?"Reducir":"Expandir"]}),a.jsxs(re,{variant:"destructive",onClick:f,"data-testid":"button-delete",children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),"Eliminar"]}),a.jsxs(re,{onClick:()=>e(`/manuales/${r.id}/editar`),"data-testid":"button-edit",children:[a.jsx(ec,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]}),a.jsxs("div",{className:c?"grid gap-6 grid-cols-1":"grid gap-6 xl:grid-cols-[minmax(0,1fr)_320px]",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Fe,{children:[a.jsxs(Je,{className:"px-6 pt-6 pb-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(et,{className:"text-2xl",children:r.titulo}),r.categoria&&a.jsx("p",{className:"text-muted-foreground",children:r.categoria})]}),r.publicado?a.jsx(Ge,{variant:"outline",className:"text-chart-3 bg-chart-3/10",children:"Publicado"}):a.jsx(Ge,{variant:"outline",className:"text-muted-foreground bg-muted",children:"Borrador"})]}),r.etiquetas&&r.etiquetas.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:r.etiquetas.map(m=>a.jsx(Ge,{variant:"secondary",children:m},m))})]}),a.jsxs(Be,{className:"p-0",children:[a.jsx("div",{className:"prose lg:prose-base max-w-none px-6 pb-6 md:px-8 md:pb-8 [&_.editor-table]:border-collapse [&_.editor-table]:w-full [&_.editor-table]:my-4 [&_.editor-table_th]:border-2 [&_.editor-table_th]:border-black [&_.editor-table_th]:p-2 [&_.editor-table_th]:bg-muted [&_.editor-table_th]:font-semibold [&_.editor-table_th]:text-left [&_.editor-table_td]:border-2 [&_.editor-table_td]:border-black [&_.editor-table_td]:p-2",dangerouslySetInnerHTML:{__html:r.contenidoHtml}}),a.jsxs("div",{className:"px-6 md:px-8 mt-4 pt-4 border-t text-sm text-muted-foreground",children:["Creado el ",new Date(r.fechaCreacion).toLocaleDateString(),r.fechaActualizacion!==r.fechaCreacion&&a.jsxs(a.Fragment,{children:[" · Actualizado el ",new Date(r.fechaActualizacion).toLocaleDateString()]})]})]})]}),s.length>0&&a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{className:"text-lg flex items-center gap-2",children:[a.jsx(Kd,{className:"h-4 w-4"}),"Adjuntos (",s.length,")"]})}),a.jsx(Be,{children:a.jsx("div",{className:"space-y-2",children:s.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover-elevate cursor-pointer",onClick:()=>window.open(m.filePath,"_blank"),"data-testid":`attachment-${m.id}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kd,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:m.originalName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:p(m.fileSize)})]})]}),a.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"})]},m.id))})})]})]}),a.jsx("div",{className:"lg:sticky lg:top-8 lg:h-fit",children:a.jsx(bIe,{htmlContent:r.contenidoHtml})})]})]}):a.jsx("div",{className:"p-8",children:a.jsx(Fe,{children:a.jsxs(Be,{className:"flex flex-col items-center justify-center py-16",children:[a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Manual no encontrado"}),a.jsx(re,{onClick:()=>e("/manuales"),children:"Volver a Manuales"})]})})})}function ws(t){this.content=t}ws.prototype={constructor:ws,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ws(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ws(n)},addToStart:function(t,e){return new ws([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ws(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ws(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ws.from(t),t.size?new ws(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ws.from(t),t.size?new ws(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ws.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ws.from=function(t){if(t instanceof ws)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ws(e)};function rte(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=rte(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function ite(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let u=0,d=Math.min(o.text.length,l.text.length);for(;u<d&&o.text[o.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let u=ite(o.content,l.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class Ze{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let c=this.content[o],u=l+c.nodeSize;if(u>e&&r(c,i+l,s||null,o)!==!1&&c.content.size){let d=l+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,n-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ze(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],c=o+l.nodeSize;c>e&&((o<e||c>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=c}return new Ze(r,i)}cutByIndex(e,n){return e==n?Ze.empty:e==0&&n==this.content.length?this:new Ze(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ze(i,s)}addToStart(e){return new Ze([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ze(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return rte(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return ite(this,e,n,r)}findIndex(e){if(e==0)return T0(0,e);if(e==this.size)return T0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?T0(n+1,s):T0(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ze.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ze(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ze.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ze(n||e,r)}static from(e){if(!e)return Ze.empty;if(e instanceof Ze)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ze([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ze.empty=new Ze([],0);const dk={index:0,offset:0};function T0(t,e){return dk.index=t,dk.offset=e,dk}function iN(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!iN(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!iN(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Pr=class P5{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&iN(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return P5.none;if(e instanceof P5)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Pr.none=[];class sN extends Error{}class bt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=ate(this.content,e+this.openStart,n);return r&&new bt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new bt(ste(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return bt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new bt(Ze.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new bt(e,r,i)}}bt.empty=new bt(Ze.empty,0,0);function ste(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(ste(s.content,e-i-1,n-i-1)))}function ate(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=ate(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function f3e(t,e,n){if(n.openStart>t.depth)throw new sN("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new sN("Inconsistent open depths");return ote(t,e,n,0)}function ote(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=ote(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return bh(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=h3e(n,t);return bh(s,cte(t,o,l,e,r))}else return bh(s,aN(t,e,r))}function lte(t,e){if(!e.type.compatibleContent(t.type))throw new sN("Cannot join "+e.type.name+" onto "+t.type.name)}function M5(t,e,n){let r=t.node(n);return lte(r,e.node(n)),r}function xh(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function by(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(xh(t.nodeAfter,r),s++));for(let l=s;l<o;l++)xh(i.child(l),r);e&&e.depth==n&&e.textOffset&&xh(e.nodeBefore,r)}function bh(t,e){return t.type.checkContent(e),t.copy(e)}function cte(t,e,n,r,i){let s=t.depth>i&&M5(t,e,i+1),o=r.depth>i&&M5(n,r,i+1),l=[];return by(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(lte(s,o),xh(bh(s,cte(t,e,n,r,i+1)),l)):(s&&xh(bh(s,aN(t,e,i+1)),l),by(e,n,i,l),o&&xh(bh(o,aN(n,r,i+1)),l)),by(r,null,i,l),new Ze(l)}function aN(t,e,n){let r=[];if(by(null,t,n,r),t.depth>n){let i=M5(t,e,n+1);xh(bh(i,aN(t,e,n+1)),r)}return by(e,null,n,r),new Ze(r)}function h3e(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ze.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Px{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Pr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new oN(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:c}=o.content.findIndex(s),u=s-c;if(r.push(o,l,i+c),!u||(o=o.child(l),o.isText))break;s=u-1,i+=c+1}return new Px(n,r,s)}static resolveCached(e,n){let r=pq.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else pq.set(e,r=new p3e);let i=r.elts[r.i]=Px.resolve(e,n);return r.i=(r.i+1)%m3e,i}}class p3e{constructor(){this.elts=[],this.i=0}}const m3e=12,pq=new WeakMap;class oN{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const g3e=Object.create(null);let qd=class R5{constructor(e,n,r,i=Pr.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ze.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&iN(this.attrs,n||e.defaultAttrs||g3e)&&Pr.sameSet(this.marks,r||Pr.none)}copy(e=null){return e==this.content?this:new R5(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new R5(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return bt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),u=i.node(o).content.cut(i.pos-l,s.pos-l);return new bt(u,i.depth-o,s.depth-o)}replace(e,n,r){return f3e(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Px.resolveCached(this,e)}resolveNoCache(e){return Px.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ute(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ze.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Pr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ze.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};qd.prototype.text=void 0;class lN extends qd{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ute(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lN(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lN(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ute(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Hh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new v3e(e,n);if(r.next==null)return Hh.empty;let i=dte(r);r.next&&r.err("Unexpected trailing text");let s=j3e(S3e(i));return _3e(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let c=o.matchFragment(e,r);if(c&&(!n||c.validEnd))return Ze.from(l.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:d,next:f}=o.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=s(f,l.concat(d));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Hh.empty=new Hh(!0);class v3e{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dte(t){let e=[];do e.push(y3e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function y3e(t){let e=[];do e.push(x3e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function x3e(t){let e=N3e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=b3e(t,e);else break;return e}function mq(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function b3e(t,e){let n=mq(t),r=n;return t.eat(",")&&(t.next!="}"?r=mq(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function w3e(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function N3e(t){if(t.eat("(")){let e=dte(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=w3e(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function S3e(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,c){let u={term:c,to:l};return e[o].push(u),u}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(o.type=="seq")for(let c=0;;c++){let u=s(o.exprs[c],l);if(c==o.exprs.length-1)return u;i(u,l=n())}else if(o.type=="star"){let c=n();return r(l,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return i(s(o.expr,l),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let u=0;u<o.min;u++){let d=n();i(s(o.expr,c),d),c=d}if(o.max==-1)i(s(o.expr,c),c);else for(let u=o.min;u<o.max;u++){let d=n();r(c,d),i(s(o.expr,c),d),c=d}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function fte(t,e){return e-t}function gq(t,e){let n=[];return r(e),n.sort(fte);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&n.indexOf(c)==-1&&r(c)}}}function j3e(t){let e=Object.create(null);return n(gq(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let d=0;d<i.length;d++)i[d][0]==l&&(u=i[d][1]);gq(t,c).forEach(d=>{u||i.push([l,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=e[r.join(",")]=new Hh(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(fte);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function _3e(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:u}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hte(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function pte(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function mte(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function gte(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new A3e(t,r,e[r]);return n}let vq=class vte{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gte(e,r.attrs),this.defaultAttrs=hte(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pte(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qd(this,this.computeAttrs(e),Ze.from(n),Pr.setFrom(r))}createChecked(e=null,n,r){return n=Ze.from(n),this.checkContent(n),new qd(this,this.computeAttrs(e),n,Pr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ze.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ze.empty,!0);return s?new qd(this,e,n.append(s),Pr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mte(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Pr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new vte(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function E3e(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class A3e{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?E3e(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Cj{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=gte(e,i.attrs),this.excluded=null;let s=hte(this.attrs);this.instance=s?new Pr(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Pr(this,pte(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Cj(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){mte(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class yte{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ws.from(e.nodes),n.marks=ws.from(e.marks||{}),this.nodes=vq.compile(this.spec.nodes,this),this.marks=Cj.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Hh.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?yq(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:yq(this,o.split(" "))}this.nodeFromJSON=i=>qd.fromJSON(this,i),this.markFromJSON=i=>Pr.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof vq){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new lN(r,r.defaultAttrs,e,Pr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function yq(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let c=t.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function C3e(t){return t.tag!=null}function k3e(t){return t.style!=null}let wy=class D5{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(C3e(i))this.tags.push(i);else if(k3e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new bq(this,n,!1);return r.addAll(e,Pr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new bq(this,n,!0);return r.addAll(e,Pr.none,n.from,n.to),bt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(P3e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=wq(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=wq(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new D5(e,D5.schemaRules(e)))}};const xte={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},T3e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bte={ol:!0,ul:!0},Mx=1,I5=2,Ny=4;function xq(t,e,n){return e!=null?(e?Mx:0)|(e==="full"?I5:0):t&&t.whitespace=="pre"?Mx|I5:n&~Ny}class O0{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Pr.none,this.match=s||(o&Ny?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ze.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Mx)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ze.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ze.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xte.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class bq{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=xq(null,n.preserveWhitespace,0)|(r?Ny:0);i?s=new O0(i.type,i.attrs,Pr.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new O0(null,null,Pr.none,!0,null,o):s=new O0(e.schema.topNodeType,null,Pr.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&I5?"full":this.localPreserveWS||(i.options&Mx)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;bte.hasOwnProperty(o)&&this.parser.normalizeLists&&O3e(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(c?c.ignore:T3e.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if(xte.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=c&&c.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],u=c.findWrapping(e);if(u&&(!i||i.length>u.length+l)&&(i=u,s=c,!u.length))break;if(c.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Pr.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Nq(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=xq(e,s,o.options);o.options&Ny&&o.content.length==0&&(l|=Ny);let c=Pr.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Nq(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new O0(e,n,c,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Mx)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function O3e(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&bte.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function P3e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function wq(t){let e={};for(let n in t)e[n]=t[n];return e}function Nq(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:d}=l.edge(c);if(u==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class up{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=fk(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let u=o.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let u=o.marks[c++],d=this.serializeMark(u,o.isInline,n);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=m1(fk(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&m1(fk(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return m1(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new up(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Sq(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Sq(e.marks)}}function Sq(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function fk(t){return t.document||window.document}const jq=new WeakMap;function M3e(t){let e=jq.get(t);return e===void 0&&jq.set(t,e=R3e(t)),e}function R3e(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function m1(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=M3e(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,c=n?t.createElementNS(n,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let p=f.indexOf(" ");p>0?c.setAttributeNS(f.slice(0,p),f.slice(p+1),u[f]):f=="style"&&c.style?c.style.cssText=u[f]:c.setAttribute(f,u[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:h,contentDOM:m}=m1(t,p,n,r);if(c.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:c,contentDOM:l}}const wte=65535,Nte=Math.pow(2,16);function D3e(t,e){return t+e*Nte}function _q(t){return t&wte}function I3e(t){return(t-(t&wte))/Nte}const Ste=1,jte=2,g1=4,_te=8;class L5{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&_te)>0}get deletedBefore(){return(this.delInfo&(Ste|g1))>0}get deletedAfter(){return(this.delInfo&(jte|g1))>0}get deletedAcross(){return(this.delInfo&g1)>0}}class to{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&to.empty)return to.empty}recover(e){let n=0,r=_q(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+I3e(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>e)break;let u=this.ranges[l+s],d=this.ranges[l+o],f=c+u;if(e<=f){let p=u?e==c?-1:e==f?1:n:n,h=c+i+(p<0?0:d);if(r)return h;let m=e==(n<0?c:f)?null:D3e(l/3,e-c),g=e==c?jte:e==f?Ste:g1;return(n<0?e!=c:e!=f)&&(g|=_te),new L5(h,g,m)}i+=d-u}return r?e+i:new L5(e+i,0,null)}touches(e,n){let r=0,i=_q(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+s],d=c+u;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),u=this.ranges[i+n],d=this.ranges[i+r];e(l,l+u,c,c+d),s+=d-u}}invert(){return new to(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?to.empty:new to(e<0?[0,-e,0]:[0,0,e])}}to.empty=new to([]);class Rx{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Rx(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Rx;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new L5(e,i,null)}}const hk=Object.create(null);class Vs{getMap(){return to.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=hk[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in hk)throw new RangeError("Duplicate use of step JSON ID "+e);return hk[e]=n,n.prototype.jsonID=e,n}}class Li{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Li(e,null)}static fail(e){return new Li(null,e)}static fromReplace(e,n,r,i){try{return Li.ok(e.replace(n,r,i))}catch(s){if(s instanceof sN)return Li.fail(s.message);throw s}}}function gD(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(gD(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ze.fromArray(r)}class Pd extends Vs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new bt(gD(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Li.fromReplace(e,this.from,this.to,s)}invert(){return new pl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Pd(n.pos,r.pos,this.mark)}merge(e){return e instanceof Pd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Pd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Pd(n.from,n.to,e.markFromJSON(n.mark))}}Vs.jsonID("addMark",Pd);class pl extends Vs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new bt(gD(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Li.fromReplace(e,this.from,this.to,r)}invert(){return new Pd(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pl(n.pos,r.pos,this.mark)}merge(e){return e instanceof pl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pl(n.from,n.to,e.markFromJSON(n.mark))}}Vs.jsonID("removeMark",pl);class Md extends Vs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Li.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Li.fromReplace(e,this.pos,this.pos+1,new bt(Ze.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Md(this.pos,n.marks[i]);return new Md(this.pos,this.mark)}}return new Vh(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Md(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Md(n.pos,e.markFromJSON(n.mark))}}Vs.jsonID("addNodeMark",Md);class Vh extends Vs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Li.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Li.fromReplace(e,this.pos,this.pos+1,new bt(Ze.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Md(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Vh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Vh(n.pos,e.markFromJSON(n.mark))}}Vs.jsonID("removeNodeMark",Vh);class cs extends Vs{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&F5(e,this.from,this.to)?Li.fail("Structure replace would overwrite content"):Li.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new to([this.from,this.to-this.from,this.slice.size])}invert(e){return new cs(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new cs(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof cs)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?bt.empty:new bt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new cs(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?bt.empty:new bt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new cs(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new cs(n.from,n.to,bt.fromJSON(e,n.slice),!!n.structure)}}Vs.jsonID("replace",cs);class us extends Vs{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(F5(e,this.from,this.gapFrom)||F5(e,this.gapTo,this.to)))return Li.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Li.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Li.fromReplace(e,this.from,this.to,r):Li.fail("Content does not fit in gap")}getMap(){return new to([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new us(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new us(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new us(n.from,n.to,n.gapFrom,n.gapTo,bt.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vs.jsonID("replaceAround",us);function F5(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function L3e(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(c,u,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(u,e),h=Math.min(u+c.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(o&&o.to==p&&o.mark.eq(f[g])?o.to=h:i.push(o=new pl(p,h,f[g])));l&&l.to==p?l.to=h:s.push(l=new Pd(p,h,r))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function F3e(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof Cj){let u=o.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let u=Math.min(l+o.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=u,p.step=s):i.push({style:f,from:Math.max(l,e),to:u,step:s})}}}),i.forEach(o=>t.step(new pl(o.from,o.to,o.style)))}function vD(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),d=l+u.nodeSize,f=r.matchType(u.type);if(!f)o.push(new cs(l,d,bt.empty));else{r=f;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||t.step(new pl(l,d,u.marks[p]));if(i&&u.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(u.text);)m||(m=new bt(Ze.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new cs(l+p.index,l+p.index+p[0].length,m))}}l=d}if(!r.validEnd){let c=r.fillBefore(Ze.empty,!0);t.replace(l,l,new bt(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function B3e(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Gg(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!B3e(i,s,o))break}return null}function $3e(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),c=o,u=l,d=Ze.empty,f=0;for(let m=s,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=Ze.from(r.node(m).copy(d)),f++):c--;let p=Ze.empty,h=0;for(let m=s,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=Ze.from(i.node(m).copy(p)),h++):u++;t.step(new us(c,u,o,l,new bt(d.append(p),f,h),d.size-f,!0))}function yD(t,e,n=null,r=t){let i=z3e(t,e),s=i&&q3e(r,e);return s?i.map(Eq).concat({type:e,attrs:n}).concat(s.map(Eq)):null}function Eq(t){return{type:t,attrs:null}}function z3e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function q3e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:o}function U3e(t,e,n){let r=Ze.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ze.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new us(i,s,i,s,new bt(r,0,0),n.length,!0))}function H3e(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&V3e(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?u=!1:!h&&m&&(u=!0)}u===!1&&Ate(t,o,l,s),vD(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let d=t.mapping.slice(s),f=d.map(l,1),p=d.map(l+o.nodeSize,1);return t.step(new us(f,p,f+1,p-1,new bt(Ze.from(r.create(c,null,o.marks)),0,0),1,!0)),u===!0&&Ete(t,o,l,s),!1}})}function Ete(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function Ate(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function V3e(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function W3e(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new us(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new bt(Ze.from(o),0,0),1,!0))}function pu(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>s;u--,d--){let f=i.node(u),p=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[d+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let l=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function K3e(t,e,n=1,r){let i=t.doc.resolve(e),s=Ze.empty,o=Ze.empty;for(let l=i.depth,c=i.depth-n,u=n-1;l>c;l--,u--){s=Ze.from(i.node(l).copy(s));let d=r&&r[u];o=Ze.from(d?d.type.create(d.attrs,o):i.node(l).copy(o))}t.step(new cs(e,e,new bt(s.append(o),n,n),!0))}function mf(t,e){let n=t.resolve(e),r=n.index();return Cte(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function G3e(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Cte(t,e){return!!(t&&e&&!t.isLeaf&&G3e(t,e))}function kj(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&Cte(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Y3e(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);Ate(t,d.node(),d.before(),l)}o.inlineContent&&vD(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let c=t.mapping.slice(l),u=c.map(e-n);if(t.step(new cs(u,c.map(e+n,-1),bt.empty,!0)),r===!0){let d=t.doc.resolve(u);Ete(t,d.node(),d.before(),t.steps.length)}return t}function X3e(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function kte(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),u=r.node(o),d=!1;if(s==1)d=u.canReplace(c,c,i);else{let f=u.contentMatchAt(c).findWrapping(i.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Tj(t,e,n=e,r=bt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Tte(i,s,r)?new cs(e,n,r):new J3e(i,s,r).fit()}function Tte(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class J3e{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ze.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ze.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new bt(s,o,l);return e>-1?new us(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new cs(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=pk(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],d,f=null;if(n==1&&(o?u.matchType(o.type)||(f=u.fillBefore(Ze.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(n==2&&o&&(d=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=pk(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new bt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=pk(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new bt(Zv(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new bt(Zv(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-e,u=0,d=[],{match:f,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;u<l.childCount;){let g=l.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||c==0||g.content.size)&&(f=v,d.push(Ote(g.mark(p.allowedMarks(g.marks)),u==1?c:0,u==l.childCount?h:-1)))}let m=u==l.childCount;m||(h=-1),this.placed=Qv(this.placed,n,Ze.from(d)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?e==0?bt.empty:new bt(Zv(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new bt(Zv(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!mk(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=mk(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],d=mk(e,l,u,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Qv(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Qv(this.placed,this.depth,Ze.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ze.empty,!0);n.childCount&&(this.placed=Qv(this.placed,this.frontier.length,n))}}function Zv(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Zv(t.firstChild.content,e-1,n)))}function Qv(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Qv(t.lastChild.content,e-1,n)))}function pk(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Ote(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Ote(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ze.empty,!0)))),t.copy(r)}function mk(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!Z3e(n,s.content,o)?l:null}function Z3e(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Q3e(t){return t.spec.defining||t.spec.definingForContent}function eFe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Tte(i,s,r))return t.step(new cs(e,n,r));let o=Mte(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(p)>-1?l=p:i.before(p)==h&&o.splice(1,0,-p)}let c=o.indexOf(l),u=[],d=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(u.push(m),h==r.openStart)break;p=m.content}for(let p=d-1;p>=0;p--){let h=u[p],m=Q3e(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(l)-1)))d=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+d+1)%(r.openStart+1),m=u[h];if(m)for(let g=0;g<o.length;g++){let v=o[(g+c)%o.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),N=i.index(v-1);if(b.canReplaceWith(N,N,m.type,m.marks))return t.replace(i.before(v),y?s.after(v):n,new bt(Pte(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=o[p];h<0||(e=i.before(h),n=s.after(h))}}function Pte(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Pte(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ze.empty,!0))}return t}function tFe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=X3e(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new bt(Ze.from(r),0,0))}function nFe(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=Mte(r,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function Mte(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class wm extends Vs{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Li.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Li.fromReplace(e,this.pos,this.pos+1,new bt(Ze.from(i),0,n.isLeaf?0:1))}getMap(){return to.empty}invert(e){return new wm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new wm(n.pos,n.attr,n.value)}}Vs.jsonID("attr",wm);class Dx extends Vs{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Li.ok(r)}getMap(){return to.empty}invert(e){return new Dx(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Dx(n.attr,n.value)}}Vs.jsonID("docAttr",Dx);let bg=class extends Error{};bg=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};bg.prototype=Object.create(Error.prototype);bg.prototype.constructor=bg;bg.prototype.name="TransformError";class xD{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Rx}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new bg(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=bt.empty){let i=Tj(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new bt(Ze.from(r),0,0))}delete(e,n){return this.replace(e,n,bt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return eFe(this,e,n,r),this}replaceRangeWith(e,n,r){return tFe(this,e,n,r),this}deleteRange(e,n){return nFe(this,e,n),this}lift(e,n){return $3e(this,e,n),this}join(e,n=1){return Y3e(this,e,n),this}wrap(e,n){return U3e(this,e,n),this}setBlockType(e,n=e,r,i=null){return H3e(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return W3e(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new wm(e,n,r)),this}setDocAttribute(e,n){return this.step(new Dx(e,n)),this}addNodeMark(e,n){return this.step(new Md(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Pr)n.isInSet(r.marks)&&this.step(new Vh(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Vh(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return K3e(this,e,n,r),this}addMark(e,n,r){return L3e(this,e,n,r),this}removeMark(e,n,r){return F3e(this,e,n,r),this}clearIncompatible(e,n,r){return vD(this,e,n,r),this}}const gk=Object.create(null);class cn{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Rte(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=bt.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:u}=o[l],d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(u.pos),l?bt.empty:n),l==0&&kq(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=e.mapping.slice(r),u=c.map(o.pos),d=c.map(l.pos);s?e.deleteRange(u,d):(e.replaceRangeWith(u,d,n),kq(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Qt(e):Kp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Kp(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Kp(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new so(e.node(0))}static atStart(e){return Kp(e,e,0,0,1)||new so(e)}static atEnd(e){return Kp(e,e,e.content.size,e.childCount,-1)||new so(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=gk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in gk)throw new RangeError("Duplicate use of selection JSON ID "+e);return gk[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Qt.between(this.$anchor,this.$head).getBookmark()}}cn.prototype.visible=!0;class Rte{constructor(e,n){this.$from=e,this.$to=n}}let Aq=!1;function Cq(t){!Aq&&!t.parent.inlineContent&&(Aq=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Qt extends cn{constructor(e,n=e){Cq(e),Cq(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return cn.near(r);let i=e.resolve(n.map(this.anchor));return new Qt(i.parent.inlineContent?i:r,r)}replace(e,n=bt.empty){if(super.replace(e,n),n==bt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Qt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Oj(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Qt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=cn.findFrom(n,r,!0)||cn.findFrom(n,-r,!0);if(s)n=s.$head;else return cn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(cn.findFrom(e,-r,!0)||cn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Qt(e,n)}}cn.jsonID("text",Qt);class Oj{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Oj(e.map(this.anchor),e.map(this.head))}resolve(e){return Qt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Jt extends cn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?cn.near(s):new Jt(s)}content(){return new bt(Ze.from(this.node),0,0)}eq(e){return e instanceof Jt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new bD(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Jt(e.resolve(n.anchor))}static create(e,n){return new Jt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Jt.prototype.visible=!1;cn.jsonID("node",Jt);class bD{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Oj(r,r):new bD(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Jt.isSelectable(r)?new Jt(n):cn.near(n)}}class so extends cn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=bt.empty){if(n==bt.empty){e.delete(0,e.doc.content.size);let r=cn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new so(e)}map(e){return new so(e)}eq(e){return e instanceof so}getBookmark(){return rFe}}cn.jsonID("all",so);const rFe={map(){return this},resolve(t){return new so(t)}};function Kp(t,e,n,r,i,s=!1){if(e.inlineContent)return Qt.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&Jt.isSelectable(l))return Jt.create(t,n-(i<0?l.nodeSize:0))}else{let c=Kp(t,l,n+i,i<0?l.childCount:0,i,s);if(c)return c}n+=l.nodeSize*i}return null}function kq(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof cs||i instanceof us))return;let s=t.mapping.maps[r],o;s.forEach((l,c,u,d)=>{o==null&&(o=d)}),t.setSelection(cn.near(t.doc.resolve(o),n))}const Tq=1,P0=2,Oq=4;class iFe extends xD{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Tq)&~P0,this.storedMarks=null,this}get selectionSet(){return(this.updated&Tq)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=P0,this}ensureMarks(e){return Pr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&P0)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~P0,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Pr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(cn.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Oq,this}get scrolledIntoView(){return(this.updated&Oq)>0}}function Pq(t,e){return!e||!t?t:t.bind(e)}class ey{constructor(e,n,r){this.name=e,this.init=Pq(n.init,r),this.apply=Pq(n.apply,r)}}const sFe=[new ey("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new ey("selection",{init(t,e){return t.selection||cn.atStart(e.doc)},apply(t){return t.selection}}),new ey("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new ey("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class vk{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=sFe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ey(r.key,r.spec.state,r))})}}class am{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,u=i?i[o].state:this,d=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,u,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new am(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new iFe(this)}static create(e){let n=new vk(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new am(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new vk(this.schema,e.plugins),r=n.fields,i=new am(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new vk(e.schema,e.plugins),s=new am(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=qd.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=cn.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],u=c.spec.state;if(c.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=u.fromJSON.call(c,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Dte(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Dte(i,e,{})),n[r]=i}return n}class Yr{constructor(e){this.spec=e,this.props={},e.props&&Dte(e.props,this,this.props),this.key=e.key?e.key.key:Ite("plugin")}getState(e){return e[this.key]}}const yk=Object.create(null);function Ite(t){return t in yk?t+"$"+ ++yk[t]:(yk[t]=0,t+"$")}class yi{constructor(e="key"){this.key=Ite(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const wD=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Lte(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Fte=(t,e,n)=>{let r=Lte(t,n);if(!r)return!1;let i=ND(r);if(!i){let o=r.blockRange(),l=o&&Gg(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(Kte(t,i,e,-1))return!0;if(r.parent.content.size==0&&(wg(s,"end")||Jt.isSelectable(s)))for(let o=r.depth;;o--){let l=Tj(t.doc,r.before(o),r.after(o),bt.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(wg(s,"end")?cn.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Jt.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},aFe=(t,e,n)=>{let r=Lte(t,n);if(!r)return!1;let i=ND(r);return i?Bte(t,i,e):!1},oFe=(t,e,n)=>{let r=zte(t,n);if(!r)return!1;let i=SD(r);return i?Bte(t,i,e):!1};function Bte(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,l=o,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let u=Tj(t.doc,s,c,bt.empty);if(!u||u.from!=s||u instanceof cs&&u.slice.size>=c-s)return!1;if(n){let d=t.tr.step(u);d.setSelection(Qt.create(d.doc,s)),n(d.scrollIntoView())}return!0}function wg(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $te=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=ND(r)}let o=s&&s.nodeBefore;return!o||!Jt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Jt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function ND(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function zte(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const qte=(t,e,n)=>{let r=zte(t,n);if(!r)return!1;let i=SD(r);if(!i)return!1;let s=i.nodeAfter;if(Kte(t,i,e,1))return!0;if(r.parent.content.size==0&&(wg(s,"start")||Jt.isSelectable(s))){let o=Tj(t.doc,r.before(),r.after(),bt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(wg(s,"start")?cn.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Jt.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Ute=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=SD(r)}let o=s&&s.nodeAfter;return!o||!Jt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Jt.create(t.doc,s.pos)).scrollIntoView()),!0)};function SD(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const lFe=(t,e)=>{let n=t.selection,r=n instanceof Jt,i;if(r){if(n.node.isTextblock||!mf(t.doc,n.from))return!1;i=n.from}else if(i=kj(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Jt.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},cFe=(t,e)=>{let n=t.selection,r;if(n instanceof Jt){if(n.node.isTextblock||!mf(t.doc,n.to))return!1;r=n.to}else if(r=kj(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},uFe=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Gg(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Hte=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function jD(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const dFe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=jD(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),c=t.tr.replaceWith(l,l,o.createAndFill());c.setSelection(cn.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},Vte=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof so||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=jD(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Qt.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},Wte=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(pu(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Gg(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function fFe(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Jt&&e.selection.node.isBlock)return!r.parentOffset||!pu(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,c=!1,u=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){c=r.end(h)==r.pos+(r.depth-h),u=r.start(h)==r.pos-(r.depth-h),l=jD(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(c&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Qt||e.selection instanceof so)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=pu(d.doc,f,s.length,s);if(p||(s[0]=l?{type:l}:null,p=pu(d.doc,f,s.length,s)),!p)return!1;if(d.split(f,s.length,s),!c&&u&&r.node(o).type!=l){let h=d.mapping.map(r.before(o)),m=d.doc.resolve(h);l&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&d.setNodeMarkup(d.mapping.map(r.before(o)),l)}return n&&n(d.scrollIntoView()),!0}}const hFe=fFe(),pFe=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Jt.create(t.doc,i))),!0)};function mFe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||mf(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Kte(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&mFe(t,e,n))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,m=Ze.empty;for(let y=o.length-1;y>=0;y--)m=Ze.from(o[y].create(null,m));m=Ze.from(i.copy(m));let g=t.tr.step(new us(e.pos-1,h,e.pos,h,new bt(m,1,0),o.length,!0)),v=g.doc.resolve(h+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&mf(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&c?null:cn.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&Gg(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&wg(s,"start",!0)&&wg(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let y=Ze.empty;for(let N=m.length-1;N>=0;N--)y=Ze.from(m[N].copy(y));let b=t.tr.step(new us(e.pos-m.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new bt(y,m.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function Gte(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Qt.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const gFe=Gte(-1),vFe=Gte(1);function yFe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&yD(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Mq(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(u),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];s.setBlockType(l,c,t,e)}r(s.scrollIntoView())}return!0}}function _D(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}_D(wD,Fte,$te);_D(wD,qte,Ute);_D(Hte,Vte,Wte,hFe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function xFe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return bFe(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function bFe(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);s=new oN(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new oN(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=yD(s,n,r,e);return l?(t&&wFe(t,e,l,i,n),!0):!1}function wFe(t,e,n,r,i){let s=Ze.empty;for(let d=n.length-1;d>=0;d--)s=Ze.from(n[d].type.create(n[d].attrs,s));t.step(new us(e.start-(r?2:0),e.end,e.start,e.end,new bt(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let l=n.length-o,c=e.start+n.length-(r?2:0),u=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&pu(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(d).nodeSize;return t}function NFe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?SFe(e,n,t,s):jFe(e,n,s):!0:!1}}function SFe(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new us(s-1,o,s,o,new bt(Ze.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new oN(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Gg(r);if(l==null)return!1;i.lift(r,l);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return mf(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function jFe(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(l?0:1),d+1,o.content.append(c?Ze.empty:Ze.from(i))))return!1;let f=s.pos,p=f+o.nodeSize;return r.step(new us(f-(l?1:0),p+(c?1:0),f+1,p-1,new bt((l?Ze.empty:Ze.from(i.copy(Ze.empty))).append(c?Ze.empty:Ze.from(i.copy(Ze.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function _Fe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=t)return!1;if(n){let u=c.lastChild&&c.lastChild.type==l.type,d=Ze.from(u?t.create():null),f=new bt(Ze.from(t.create(null,Ze.from(l.type.create(null,d)))),u?3:1,0),p=s.start,h=s.end;n(e.tr.step(new us(p-(u?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}const Ns=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ng=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let B5=null;const Xc=function(t,e,n){let r=B5||(B5=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},EFe=function(){B5=null},Wh=function(t,e,n,r){return n&&(Rq(t,e,n,r,-1)||Rq(t,e,n,r,1))},AFe=/^(img|br|input|textarea|hr)$/i;function Rq(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Do(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Nb(t)||AFe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ns(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Do(t):0}else return!1}}function Do(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function CFe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Do(t)}else if(t.parentNode&&!Nb(t))e=Ns(t),t=t.parentNode;else return null}}function kFe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Nb(t))e=Ns(t)+1,t=t.parentNode;else return null}}function TFe(t,e,n){for(let r=e==0,i=e==Do(t);r||i;){if(t==n)return!0;let s=Ns(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Do(t)}}function Nb(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Pj=function(t){return t.focusNode&&Wh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Wf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function OFe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function PFe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Do(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Do(r.startContainer),r.startOffset)}}}const hc=typeof navigator<"u"?navigator:null,Dq=typeof document<"u"?document:null,gf=hc&&hc.userAgent||"",$5=/Edge\/(\d+)/.exec(gf),Yte=/MSIE \d/.exec(gf),z5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gf),Aa=!!(Yte||z5||$5),Ud=Yte?document.documentMode:z5?+z5[1]:$5?+$5[1]:0,$o=!Aa&&/gecko\/(\d+)/i.test(gf);$o&&+(/Firefox\/(\d+)/.exec(gf)||[0,0])[1];const q5=!Aa&&/Chrome\/(\d+)/.exec(gf),zs=!!q5,Xte=q5?+q5[1]:0,ca=!Aa&&!!hc&&/Apple Computer/.test(hc.vendor),Sg=ca&&(/Mobile\/\w+/.test(gf)||!!hc&&hc.maxTouchPoints>2),Po=Sg||(hc?/Mac/.test(hc.platform):!1),MFe=hc?/Win/.test(hc.platform):!1,au=/Android \d/.test(gf),Sb=!!Dq&&"webkitFontSmoothing"in Dq.documentElement.style,RFe=Sb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function DFe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function qc(t,e){return typeof t=="number"?t:t[e]}function IFe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Iq(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Ng(o);continue}let l=o,c=l==s.body,u=c?DFe(s):IFe(l),d=0,f=0;if(e.top<u.top+qc(r,"top")?f=-(u.top-e.top+qc(i,"top")):e.bottom>u.bottom-qc(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+qc(i,"top")-u.top:e.bottom-u.bottom+qc(i,"bottom")),e.left<u.left+qc(r,"left")?d=-(u.left-e.left+qc(i,"left")):e.right>u.right-qc(r,"right")&&(d=e.right-u.right+qc(i,"right")),d||f)if(c)s.defaultView.scrollBy(d,f);else{let h=l.scrollLeft,m=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let g=l.scrollLeft-h,v=l.scrollTop-m;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let p=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:Ng(o)}}function LFe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,i=c.top;break}}return{refDOM:r,refTop:i,stack:Jte(t.dom)}}function Jte(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ng(r));return e}function FFe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Zte(n,r==0?0:r-e)}function Zte(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ip=null;function BFe(t){if(t.setActive)return t.setActive();if(Ip)return t.focus(Ip);let e=Jte(t);t.focus(Ip==null?{get preventScroll(){return Ip={preventScroll:!0},!0}}:void 0),Ip||(Ip=!1,Zte(e,0))}function Qte(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,c,u;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Xc(d).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(s=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!c&&m.left<=e.left&&m.right>=e.left&&(c=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=f+1)}}return!n&&c&&(n=c,i=u,r=0),n&&n.nodeType==3?$Fe(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Qte(n,i)}function $Fe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=sd(r,1);if(s.top!=s.bottom&&ED(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function ED(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function zFe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function qFe(t,e,n){let{node:r,offset:i}=Qte(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function UFe(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?i=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function ene(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(ED(e,u))return ene(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function HFe(t,e){let n=t.dom.ownerDocument,r,i=0,s=PFe(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!ED(e,u)||(o=ene(t.dom,e,u),!o))return null}if(ca)for(let u=o;r&&u;u=Ng(u))u.draggable&&(r=void 0);if(o=zFe(o,e),r){if($o&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;Sb&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=UFe(t,r,i,e))}l==null&&(l=qFe(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function Lq(t){return t.top<t.bottom||t.left<t.right}function sd(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Lq(r))return r}return Array.prototype.find.call(n,Lq)||t.getBoundingClientRect()}const VFe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tne(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Sb||$o;if(r.nodeType==3)if(o&&(VFe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=sd(Xc(r,i,i),n);if($o&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=sd(Xc(r,i-1,i-1),-1);if(u.top==c.top){let d=sd(Xc(r,i,i+1),-1);if(d.top!=c.top)return Bv(d,d.left<u.left)}}return c}else{let c=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:u++,Bv(sd(Xc(r,c,u),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Do(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return xk(c.getBoundingClientRect(),!1)}if(s==null&&i<Do(r)){let c=r.childNodes[i];if(c.nodeType==1)return xk(c.getBoundingClientRect(),!0)}return xk(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Do(r))){let c=r.childNodes[i-1],u=c.nodeType==3?Xc(c,Do(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return Bv(sd(u,1),!1)}if(s==null&&i<Do(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?Xc(c,0,o?0:1):c.nodeType==1?c:null:null;if(u)return Bv(sd(u,-1),!0)}return Bv(sd(r.nodeType==3?Xc(r):r,-n),n>=0)}function Bv(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function xk(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function nne(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function WFe(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return nne(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=tne(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Xc(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const KFe=/[\u0590-\u08ac]/;function GFe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!KFe.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:nne(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),v=m&&!h.contains(m.nodeType==1?m:m.parentNode)||c==m&&u==g;try{l.collapse(d,f),c&&(c!=d||u!=f)&&l.extend&&l.extend(c,u)}catch{}return p!=null&&(l.caretBidiLevel=p),v}):r.pos==r.start()||r.pos==r.end()}let Fq=null,Bq=null,$q=!1;function YFe(t,e,n){return Fq==e&&Bq==n?$q:(Fq=e,Bq=n,$q=n=="up"||n=="down"?WFe(t,e,n):GFe(t,e,n))}const zo=0,zq=1,nh=2,pc=3;class jb{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=zo,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ns(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof ine){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof rne&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ns(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ns(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let c=this.children[l],u=o+c.size;if(i==-1&&e<=u){let d=o+c.border;if(e>=d&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=o;for(let f=l;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Ns(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Ns(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],v=m+g.size;if(s>m&&o<v)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=v}let l=this.domFromPos(e,e?-1:1),c=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if(($o||ca)&&e==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(l=c={node:v.parentNode,offset:Ns(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if($o&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&ca)&&Wh(l.node,l.offset,d.anchorNode,d.anchorOffset)&&Wh(c.node,c.offset,d.focusNode,d.focusOffset))return;let p=!1;if((u.extend||e==n)&&!(f&&$o)){u.collapse(l.node,l.offset);try{e!=n&&u.extend(c.node,c.offset),p=!0}catch{}}if(!p){if(e>n){let m=l;l=c,c=m}let h=document.createRange();h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,c=o-s.border;if(e>=l&&n<=c){this.dirty=e==r||n==o?nh:zq,e==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=pc:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?nh:pc}r=o}this.dirty=nh}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?nh:zq;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class rne extends jb{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==zo&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class XFe extends jb{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Kh extends jb{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=up.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Kh(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&pc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=pc&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=zo){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=zo}}slice(e,n,r){let i=Kh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=H5(s,n,o,r)),e>0&&(s=H5(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Hd extends jb{constructor(e,n,r,i,s,o,l,c,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],c,u=l&&l(n,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=up.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=one(d,r,n),u?c=new JFe(e,n,r,i,d,f||null,p,u,s,o+1):n.isText?new Mj(e,n,r,i,d,p,s):new Hd(e,n,r,i,d,f||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ze.empty)}return e}matchesNode(e,n,r){return this.dirty==zo&&e.eq(this.node)&&cN(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new QFe(this,o&&o.node,e);n6e(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?Pr.none:this.node.child(d).marks,r,e),c.placeWidget(u,e,i)},(u,d,f,p)=>{c.syncToMarks(u.marks,r,e);let h;c.findNodeMatch(u,d,f,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,d,f,h,e)||c.updateNextNode(u,d,f,e,p,i)||c.addNode(u,d,f,e,i),i+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==nh)&&(o&&this.protectLocalComposition(e,o),sne(this.contentDOM,this.children,e),Sg&&r6e(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Qt)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=i6e(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new XFe(this,s,n,i);e.input.compositionNodes.push(o),this.children=H5(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==pc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=zo}updateOuterDeco(e){if(cN(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ane(this.dom,this.nodeDOM,U5(this.outerDeco,this.node,n),U5(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function qq(t,e,n,r,i){one(r,e,t);let s=new Hd(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Mj extends Hd{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==pc||this.dirty!=zo&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=zo||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=zo,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Mj(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=pc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ine extends jb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==zo&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class JFe extends Hd{constructor(e,n,r,i,s,o,l,c,u,d){super(e,n,r,i,s,o,l,u,d),this.spec=c}update(e,n,r,i){if(this.dirty==pc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function sne(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=Uq(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Kh){let c=r?r.previousSibling:t.lastChild;sne(o.contentDOM,o.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=Uq(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Sy=function(t){t&&(this.nodeName=t)};Sy.prototype=Object.create(null);const rh=[new Sy];function U5(t,e,n){if(t.length==0)return rh;let r=n?rh[0]:new Sy,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Sy(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&i.length==1&&i.push(r=new Sy(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return i}function ane(t,e,n,r){if(n==rh&&r==rh)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=rh[0]),i=c}ZFe(i,l||rh[0],o)}return i}function ZFe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function one(t,e,n){return ane(t,t,rh,U5(e,n,t.nodeType!=1))}function cN(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Uq(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class QFe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=e6e(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=zo,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Kh.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==pc&&o.dom==o.contentDOM&&(o.dirty=nh),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Hd){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let d=c.dom,f,p=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=pc&&cN(n,c.outerDeco));if(!p&&c.update(e,n,r,i))return this.destroyBetween(this.index,l),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(c,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=nh,f.updateChildren(i,o+1),f.dirty=zo),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!cN(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Hd.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Hd.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new rne(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Kh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Mj)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ca||zs)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ine(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function e6e(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof Kh)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function t6e(t,e){return t.type.side-e.type.side}function n6e(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);r(d,i,e.forChild(s,d),u),s+=d.nodeSize}return}let o=0,l=[],c=null;for(let u=0;;){let d,f;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(d?(f||(f=[d])).push(v):d=v)}if(d)if(f){f.sort(t6e);for(let v=0;v<f.length;v++)n(f[v],u,!!c)}else n(d,u,!!c);let p,h;if(c)h=-1,p=c,c=null;else if(u<t.childCount)h=u,p=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=s&&l.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let m=s+p.nodeSize;if(p.isText){let v=m;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<l.length;y++)l[y].to<v&&(v=l[y].to);v<m&&(c=p.cut(v-s),p=p.cut(0,v-s),m=v,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let g=p.isInline&&!p.isLeaf?l.filter(v=>!v.inline):l.slice();r(p,g,e.forChild(s,p),h),s=m}}function r6e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function i6e(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=n){if(s>=r&&c.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?c.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&c.length>=r+e.length-l&&c.slice(r-l,r-l+e.length)==e)return r}}return-1}function H5(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let c=t[o],u=l,d=l+=c.size;u>=n||d<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,r)),i&&(s.push(i),i=void 0),d>n&&s.push(c.slice(n-u,c.size,r)))}return s}function AD(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,u;if(Pj(n)){for(c=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Jt.isSelectable(f)&&i.parent&&!(f.isInline&&TFe(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;u=new Jt(o==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=o,p=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,o]=p==t.state.selection.anchor?[p,f]:[f,p],l=r.resolve(o)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let f=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=CD(t,d,l,f)}return u}function lne(t){return t.editable?t.hasFocus():une(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function mu(t,e=!1){let n=t.state.selection;if(cne(t,n),!!lne(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zs){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Wh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)a6e(t);else{let{anchor:r,head:i}=n,s,o;Hq&&!(n instanceof Qt)&&(n.$from.parent.inlineContent||(s=Vq(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Vq(t,n.to))),t.docView.setSelection(r,i,t,e),Hq&&(s&&Wq(s),o&&Wq(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&s6e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Hq=ca||zs&&Xte<63;function Vq(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ca&&i&&i.contentEditable=="false")return bk(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return bk(i);if(s)return bk(s)}}function bk(t){return t.contentEditable="true",ca&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Wq(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function s6e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!lne(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function a6e(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ns(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Aa&&Ud<=11&&(n.disabled=!0,n.disabled=!1)}function cne(t,e){if(e instanceof Jt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Kq(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Kq(t)}function Kq(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function CD(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Qt.between(e,n,r)}function Gq(t){return t.editable&&!t.hasFocus()?!1:une(t)}function une(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function o6e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Wh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function V5(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&cn.findFrom(s,e)}function cd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Yq(t,e,n){let r=t.state.selection;if(r instanceof Qt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return cd(t,new Qt(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=V5(t.state,e);return i&&i instanceof Jt?cd(t,i):!1}else if(!(Po&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Jt.isSelectable(s)?cd(t,new Jt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Sb?cd(t,new Qt(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Jt&&r.node.isInline)return cd(t,new Qt(e>0?r.$to:r.$from));{let i=V5(t.state,e);return i?cd(t,i):!1}}}function uN(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jy(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Lp(t,e){return e<0?l6e(t):c6e(t)}function l6e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for($o&&n.nodeType==1&&r<uN(n)&&jy(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(jy(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(dne(n))break;{let l=n.previousSibling;for(;l&&jy(l,-1);)i=n.parentNode,s=Ns(l),l=l.previousSibling;if(l)n=l,r=uN(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?W5(t,n,r):i&&W5(t,i,s)}function c6e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=uN(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(jy(l,1))s=n,o=++r;else break}else{if(dne(n))break;{let l=n.nextSibling;for(;l&&jy(l,1);)s=l.parentNode,o=Ns(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=uN(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&W5(t,s,o)}function dne(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function u6e(t,e){for(;t&&e==t.childNodes.length&&!Nb(t);)e=Ns(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function d6e(t,e){for(;t&&!e&&!Nb(t);)e=Ns(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function W5(t,e,n){if(e.nodeType!=3){let s,o;(o=u6e(e,n))?(e=o,n=0):(s=d6e(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Pj(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&mu(t)},50)}function Xq(t,e){let n=t.state.doc.resolve(e);if(!(zs||MFe)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Jq(t,e,n){let r=t.state.selection;if(r instanceof Qt&&!r.empty||n.indexOf("s")>-1||Po&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=V5(t.state,e);if(o&&o instanceof Jt)return cd(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof so?cn.near(o,e):cn.findFrom(o,e);return l?cd(t,l):!1}return!1}function Zq(t,e){if(!(t.state.selection instanceof Qt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Qq(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function f6e(t){if(!ca||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Qq(t,r,"true"),setTimeout(()=>Qq(t,r,"false"),20)}return!1}function h6e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function p6e(t,e){let n=e.keyCode,r=h6e(e);if(n==8||Po&&n==72&&r=="c")return Zq(t,-1)||Lp(t,-1);if(n==46&&!e.shiftKey||Po&&n==68&&r=="c")return Zq(t,1)||Lp(t,1);if(n==13||n==27)return!0;if(n==37||Po&&n==66&&r=="c"){let i=n==37?Xq(t,t.state.selection.from)=="ltr"?-1:1:-1;return Yq(t,i,r)||Lp(t,i)}else if(n==39||Po&&n==70&&r=="c"){let i=n==39?Xq(t,t.state.selection.from)=="ltr"?1:-1:1;return Yq(t,i,r)||Lp(t,i)}else{if(n==38||Po&&n==80&&r=="c")return Jq(t,-1,r)||Lp(t,-1);if(n==40||Po&&n==78&&r=="c")return f6e(t)||Jq(t,1,r)||Lp(t,1);if(r==(Po?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function kD(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||up.fromSchema(t.state.schema),l=vne(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let u=c.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=gne[u.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let m=l.createElement(d[h]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:p,slice:e}}function fne(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let c=!!e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",p=>{e=p(e,s||r,t)}),s)return l=new bt(Ze.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{l=p(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)l=f;else{let p=i.marks(),{schema:h}=t.state,m=up.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=y6e(n),Sb&&x6e(o);let u=o&&o.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||wy.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!m6e.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)l=b6e(eU(l,+d[1],+d[2]),d[4]);else if(l=bt.maxOpen(g6e(l.content,i),!0),l.openStart||l.openEnd){let f=0,p=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;p<l.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);l=eU(l,f,p)}return t.someProp("transformPasted",f=>{l=f(l,t,c)}),l}const m6e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function g6e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),u;if(!c)return o=null;if(u=o.length&&s.length&&pne(c,s,l,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=mne(o[o.length-1],s.length));let d=hne(l,c);o.push(d),i=i.matchType(d.type),s=c}}),o)return Ze.from(o)}return t}function hne(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ze.from(t));return t}function pne(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=pne(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ze.from(hne(n,t,i+1))))}}function mne(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,mne(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ze.empty,!0);return t.copy(n.append(r))}function K5(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=K5(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Ze.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function eU(t,e,n){return e<t.openStart&&(t=new bt(K5(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new bt(K5(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const gne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tU=null;function vne(){return tU||(tU=document.implementation.createHTMLDocument("title"))}let wk=null;function v6e(t){let e=window.trustedTypes;return e?(wk||(wk=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),wk.createHTML(t)):t}function y6e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=vne().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&gne[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=v6e(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function x6e(t){let e=t.querySelectorAll(zs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function b6e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=Ze.from(c.create(r[l+1],i)),s++,o++}return new bt(i,s,o)}const ua={},da={},w6e={touchstart:!0,touchmove:!0};class N6e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function S6e(t){for(let e in ua){let n=ua[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{_6e(t,r)&&!TD(t,r)&&(t.editable||!(r.type in da))&&n(t,r)},w6e[e]?{passive:!0}:void 0)}ca&&t.dom.addEventListener("input",()=>null),G5(t)}function Rd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function j6e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function G5(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>TD(t,r))})}function TD(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function _6e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function E6e(t,e){!TD(t,e)&&ua[e.type]&&(t.editable||!(e.type in da))&&ua[e.type](t,e)}da.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!xne(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(au&&zs&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Sg&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Wf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||p6e(t,n)?n.preventDefault():Rd(t,"key")};da.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};da.keypress=(t,e)=>{let n=e;if(xne(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Po&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Qt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Rj(t){return{left:t.clientX,top:t.clientY}}function A6e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function OD(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Nm(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function C6e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Jt.isSelectable(r)?(Nm(t,new Jt(n)),!0):!1}function k6e(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Jt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Jt.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Nm(t,Jt.create(t.state.doc,i)),!0):!1}function T6e(t,e,n,r,i){return OD(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?k6e(t,n):C6e(t,n))}function O6e(t,e,n,r){return OD(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function P6e(t,e,n,r){return OD(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||M6e(t,n,r)}function M6e(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Nm(t,Qt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Nm(t,Qt.create(r,l+1,l+1+o.content.size));else if(Jt.isSelectable(o))Nm(t,Jt.create(r,l));else continue;return!0}}function PD(t){return dN(t)}const yne=Po?"metaKey":"ctrlKey";ua.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=PD(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&A6e(n,t.input.lastClick)&&!n[yne]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(Rj(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new R6e(t,o,n,!!r)):(s=="doubleClick"?O6e:P6e)(t,o.pos,o.inside,n)?n.preventDefault():Rd(t,"pointer"))};class R6e{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[yne],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const l=i?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Jt&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&$o&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Rd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>mu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Rj(e))),this.updateAllowDefault(e),this.allowDefault||!n?Rd(this.view,"pointer"):T6e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ca&&this.mightDrag&&!this.mightDrag.node.isAtom||zs&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Nm(this.view,cn.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Rd(this.view,"pointer")}move(e){this.updateAllowDefault(e),Rd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ua.touchstart=t=>{t.input.lastTouch=Date.now(),PD(t),Rd(t,"pointer")};ua.touchmove=t=>{t.input.lastTouch=Date.now(),Rd(t,"pointer")};ua.contextmenu=t=>PD(t);function xne(t,e){return t.composing?!0:ca&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const D6e=au?5e3:-1;da.compositionstart=da.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Qt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),dN(t,!0),t.markCursor=null;else if(dN(t,!e.selection.empty),$o&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}bne(t,D6e)};da.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,bne(t,20))};function bne(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>dN(t),e))}function wne(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=L6e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function I6e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=CFe(e.focusNode,e.focusOffset),r=kFe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function L6e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function dN(t,e=!1){if(!(au&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),wne(t),e||t.docView&&t.docView.dirty){let n=AD(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function F6e(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ix=Aa&&Ud<15||Sg&&RFe<604;ua.copy=da.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ix?null:n.clipboardData,o=r.content(),{dom:l,text:c}=kD(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):F6e(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function B6e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function $6e(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lx(t,r.value,null,i,e):Lx(t,r.textContent,r.innerHTML,i,e)},50)}function Lx(t,e,n,r,i){let s=fne(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||bt.empty)))return!0;if(!s)return!1;let o=B6e(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Nne(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}da.paste=(t,e)=>{let n=e;if(t.composing&&!au)return;let r=Ix?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Lx(t,Nne(r),r.getData("text/html"),i,n)?n.preventDefault():$6e(t,n)};class Sne{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const z6e=Po?"altKey":"ctrlKey";function jne(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[z6e]}ua.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Rj(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Jt?i.to-1:i.to))){if(r&&r.mightDrag)o=Jt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Jt.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:c,text:u,slice:d}=kD(t,l);(!n.dataTransfer.files.length||!zs||Xte>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ix?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ix||n.dataTransfer.setData("text/plain",u),t.dragging=new Sne(d,jne(t,n),o)};ua.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};da.dragover=da.dragenter=(t,e)=>e.preventDefault();da.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Rj(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",m=>{o=m(o,t,!1)}):o=fne(t,Nne(n.dataTransfer),Ix?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&jne(t,n));if(t.someProp("handleDrop",m=>m(t,n,o||bt.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let c=o?kte(t.state.doc,s.pos,o):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(l){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let d=u.mapping.map(c),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=u.doc;if(f?u.replaceRangeWith(d,d,o.content.firstChild):u.replaceRange(d,d,o),u.doc.eq(p))return;let h=u.doc.resolve(d);if(f&&Jt.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new Jt(h));else{let m=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((g,v,y,b)=>m=b),u.setSelection(CD(t,h,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};ua.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&mu(t)},20))};ua.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ua.beforeinput=(t,e)=>{if(zs&&au&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Wf(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in da)ua[t]=da[t];function Fx(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class fN{constructor(e,n){this.toDOM=e,this.spec=n||wh,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Zi(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof fN&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fx(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Vd{constructor(e,n){this.attrs=e,this.spec=n||wh}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Zi(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Vd&&Fx(this.attrs,e.attrs)&&Fx(this.spec,e.spec)}static is(e){return e.type instanceof Vd}destroy(){}}class MD{constructor(e,n){this.attrs=e,this.spec=n||wh}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Zi(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof MD&&Fx(this.attrs,e.attrs)&&Fx(this.spec,e.spec)}destroy(){}}class Zi{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Zi(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Zi(e,e,new fN(n,r))}static inline(e,n,r,i){return new Zi(e,n,new Vd(r,i))}static node(e,n,r,i){return new Zi(e,n,new MD(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vd}get widget(){return this.type instanceof fN}}const Gp=[],wh={};class Or{constructor(e,n){this.local=e.length?e:Gp,this.children=n.length?n:Gp}static create(e,n){return n.length?hN(n,e,0,wh):Fs}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==Fs||e.maps.length==0?this:this.mapInner(e,n,0,0,r||wh)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,r,i);c&&c.type.valid(n,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?q6e(this.children,o||[],e,n,r,i,s):o?new Or(o.sort(Nh),Gp):Fs}add(e,n){return n.length?this==Fs?Or.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,c)=>{let u=c+r,d;if(d=Ene(n,l,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,d,u+1):i.splice(s,0,c,c+l.nodeSize,hN(d,l,u+1,wh)),s+=3}});let o=_ne(s?Ane(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Or(o.length?this.local.concat(o).sort(Nh):this.local,i||this.children)}remove(e){return e.length==0||this==Fs?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,c=r[s+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<c&&(e[d]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,l+1);u!=Fs?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Or(i,r):Fs}forChild(e,n){if(this==Fs)return this;if(n.isLeaf)return Or.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof Vd){let u=Math.max(s,c.from)-s,d=Math.min(o,c.to)-s;u<d&&(i||(i=[])).push(c.copy(u,d))}}if(i){let l=new Or(i.sort(Nh),Gp);return r?new hd([l,r]):l}return r||Fs}eq(e){if(this==e)return!0;if(!(e instanceof Or)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return RD(this.localsInner(e))}localsInner(e){if(this==Fs)return Gp;if(e.inlineContent||!this.local.some(Vd.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vd||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Or.empty=new Or([],[]);Or.removeOverlap=RD;const Fs=Or.empty;class hd{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,wh));return hd.from(r)}forChild(e,n){if(n.isLeaf)return Or.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Fs&&(s instanceof hd?r=r.concat(s.members):r.push(s))}return hd.from(r)}eq(e){if(!(e instanceof hd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?RD(r?n:n.sort(Nh)):Gp}static from(e){switch(e.length){case 0:return Fs;case 1:return e[0];default:return new hd(e.every(n=>n instanceof Or)?e:e.reduce((n,r)=>n.concat(r instanceof Or?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function q6e(t,e,n,r,i,s,o){let l=t.slice();for(let u=0,d=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((p,h,m,g)=>{let v=g-m-(h-p);for(let y=0;y<l.length;y+=3){let b=l[y+1];if(b<0||p>b+d-f)continue;let N=l[y]+d-f;h>=N?l[y+1]=p<=N?-2:-1:p>=d&&v&&(l[y]+=v,l[y+1]+=v)}f+=v}),d=n.maps[u].map(d,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let d=n.map(t[u]+s),f=d-i;if(f<0||f>=r.content.size){c=!0;continue}let p=n.map(t[u+1]+s,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(f),v=r.maybeChild(m);if(v&&g==f&&g+v.nodeSize==h){let y=l[u+2].mapInner(n,v,d+1,t[u]+s+1,o);y!=Fs?(l[u]=f,l[u+1]=h,l[u+2]=y):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=U6e(l,t,e,n,i,s,o),d=hN(u,r,0,o);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let h=d.children[f];for(;p<l.length&&l[p]<h;)p+=3;l.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Or(e.sort(Nh),l)}function _ne(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Zi(i.from+e,i.to+e,i.type))}return n}function U6e(t,e,n,r,i,s,o){function l(c,u){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(r,i,u);f?n.push(f):o.onRemove&&o.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)l(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return n}function Ene(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Ane(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function hN(t,e,n,r){let i=[],s=!1;e.forEach((l,c)=>{let u=Ene(t,l,c+n);if(u){s=!0;let d=hN(u,l,n+c+1,r);d!=Fs&&i.push(c,c+l.nodeSize,d)}});let o=_ne(s?Ane(t):t,-n).sort(Nh);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Or(o,i):Fs}function Nh(t,e){return t.from-e.from||t.to-e.to}function RD(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),nU(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),nU(e,i,r.copy(s.from,r.to)));break}}}return e}function nU(t,e,n){for(;e<t.length&&Nh(n,t[e])>0;)e++;t.splice(e,0,n)}function Nk(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Fs&&e.push(r)}),t.cursorWrapper&&e.push(Or.create(t.state.doc,[t.cursorWrapper.deco])),hd.from(e)}const H6e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},V6e=Aa&&Ud<=11;class W6e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class K6e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new W6e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Aa&&Ud<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),V6e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,H6e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Gq(this.view)){if(this.suppressingSelectionUpdates)return mu(this.view);if(Aa&&Ud<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Wh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ng(s))n.add(s);for(let s=e.anchorNode;s;s=Ng(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Gq(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],c);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if($o&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||X6e(e,f)!=h)&&p.remove()}}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Pj(r)&&(u=AD(e))&&u.eq(cn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,mu(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),G6e(e)),this.handleDOMChange(s,o,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||mu(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Aa&&Ud<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?Ns(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?Ns(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let rU=new WeakMap,iU=!1;function G6e(t){if(!rU.has(t)&&(rU.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=$o,iU)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iU=!0}}function sU(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Wh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Y6e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return sU(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?sU(t,n):null}function X6e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function J6e(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],Pj(c)||u.push({node:c.focusNode,offset:c.focusOffset})),zs&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=r.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let f=t.state.doc,p=t.someProp("domParser")||wy.fromSchema(t.state.schema),h=f.resolve(o),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Z6e,context:h});if(u&&u[0].pos!=null){let v=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=v),m={anchor:v+o,head:y+o}}return{doc:g,sel:m,from:o,to:l}}function Z6e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ca&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ca&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Q6e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function eBe(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=AD(t,T);if(_&&!t.state.selection.eq(_)){if(zs&&au&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,Wf(13,"Enter"))))return;let j=t.state.tr.setSelection(_);T=="pointer"?j.setMeta("pointer",!0):T=="key"&&j.scrollIntoView(),s&&j.setMeta("composition",s),t.dispatch(j)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c=t.state.selection,u=J6e(t,e,n),d=t.state.doc,f=d.slice(u.from,u.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=rBe(f.content,u.doc.content,u.from,p,h);if(m&&t.input.domChangeCount++,(Sg&&t.input.lastIOSEnter>Date.now()-225||au)&&i.some(T=>T.nodeType==1&&!Q6e.test(T.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",T=>T(t,Wf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&c instanceof Qt&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let T=aU(t,t.state.doc,u.sel);if(T&&!T.eq(t.state.selection)){let _=t.state.tr.setSelection(T);s&&_.setMeta("composition",s),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Qt&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Aa&&Ud<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),v=u.doc.resolveNoCache(m.endB-u.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA;if((Sg&&t.input.lastIOSEnter>Date.now()-225&&(!b||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&g.pos<v.pos&&!/\S/.test(u.doc.textBetween(g.pos,v.pos,"","")))&&t.someProp("handleKeyDown",T=>T(t,Wf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&nBe(d,m.start,m.endA,g,v)&&t.someProp("handleKeyDown",T=>T(t,Wf(8,"Backspace")))){au&&zs&&t.domObserver.suppressSelectionUpdates();return}zs&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),au&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,v=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Wf(13,"Enter"))})},20));let N=m.start,S=m.endA,E=T=>{let _=T||t.state.tr.replace(N,S,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let j=aU(t,_.doc,u.sel);j&&!(zs&&t.composing&&j.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(j.head==N||j.head==_.mapping.map(S)-1)||Aa&&j.empty&&j.head==N)&&_.setSelection(j)}return s&&_.setMeta("composition",s),_.scrollIntoView()},C;if(b)if(g.pos==v.pos){Aa&&Ud<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>mu(t),20));let T=E(t.state.tr.delete(N,S)),_=d.resolve(m.start).marksAcross(d.resolve(m.endA));_&&T.ensureMarks(_),t.dispatch(T)}else if(m.endA==m.endB&&(C=tBe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let T=E(t.state.tr);C.type=="add"?T.addMark(N,S,C.mark):T.removeMark(N,S,C.mark),t.dispatch(T)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let T=g.parent.textBetween(g.parentOffset,v.parentOffset),_=()=>E(t.state.tr.insertText(T,N,S));t.someProp("handleTextInput",j=>j(t,N,S,T,_))||t.dispatch(_())}else t.dispatch(E());else t.dispatch(E())}function aU(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:CD(t,e.resolve(n.anchor),e.resolve(n.head))}function tBe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=d=>d.mark(l.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(Ze.from(u).eq(t))return{mark:l,type:o}}function nBe(t,e,n,r,i){if(n-e<=i.pos-r.pos||Sk(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Sk(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Sk(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Sk(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function rBe(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));r-=o+c-s}if(o<s&&t.size<e.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&oU(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<t.size&&oU(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function oU(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Cne{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new N6e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fU),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=uU(this),cU(this),this.nodeViews=dU(this),this.docView=qq(this.state.doc,lU(this),Nk(this),this.dom,this),this.domObserver=new K6e(this,(r,i,s,o)=>eBe(this,r,i,s,o)),this.domObserver.start(),S6e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&G5(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fU),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(wne(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=dU(this);sBe(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&G5(this),this.editable=uU(this),cU(this);let c=Nk(this),u=lU(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,u,c);(f||!e.selection.eq(i.selection))&&(o=!0);let p=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&LFe(this);if(o){this.domObserver.stop();let h=f&&(Aa||zs)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&iBe(i.selection,e.selection);if(f){let m=zs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=I6e(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=qq(e.doc,u,c,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&o6e(this))?mu(this,h):(cne(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&FFe(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Jt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Iq(this,n.getBoundingClientRect(),e)}else Iq(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Sne(e.slice,e.move,i<0?void 0:Jt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Aa){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&BFe(this.dom),mu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return HFe(this,e)}coordsAtPos(e,n=1){return tne(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return YFe(this,n||this.state,e)}pasteHTML(e,n){return Lx(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lx(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return kD(this,e)}destroy(){this.docView&&(j6e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Nk(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,EFe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return E6e(this,e)}domSelectionRange(){let e=this.domSelection();return e?ca&&this.root.nodeType===11&&OFe(this.dom.ownerDocument)==this.dom&&Y6e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Cne.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function lU(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Zi.node(0,t.state.doc.content.size,e)]}function cU(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Zi.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function uU(t){return!t.someProp("editable",e=>e(t.state)===!1)}function iBe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function dU(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function sBe(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function fU(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ef={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pN={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aBe=typeof navigator<"u"&&/Mac/.test(navigator.platform),oBe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ss=0;Ss<10;Ss++)ef[48+Ss]=ef[96+Ss]=String(Ss);for(var Ss=1;Ss<=24;Ss++)ef[Ss+111]="F"+Ss;for(var Ss=65;Ss<=90;Ss++)ef[Ss]=String.fromCharCode(Ss+32),pN[Ss]=String.fromCharCode(Ss);for(var jk in ef)pN.hasOwnProperty(jk)||(pN[jk]=ef[jk]);function lBe(t){var e=aBe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||oBe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?pN:ef)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const cBe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),uBe=typeof navigator<"u"&&/Win/.test(navigator.platform);function dBe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))cBe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function fBe(t){let e=Object.create(null);for(let n in t)e[dBe(n)]=t[n];return e}function _k(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function hBe(t){return new Yr({props:{handleKeyDown:DD(t)}})}function DD(t){let e=fBe(t);return function(n,r){let i=lBe(r),s,o=e[_k(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[_k(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(uBe&&r.ctrlKey&&r.altKey)&&(s=ef[r.keyCode])&&s!=i){let l=e[_k(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var pBe=Object.defineProperty,ID=(t,e)=>{for(var n in e)pBe(t,n,{get:e[n],enumerable:!0})};function Dj(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Ij=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>{const d=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!t,c=t||i.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,p])=>[f,(...m)=>{const g=this.buildProps(c,e),v=p(...m)(g);return o.push(v),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:Dj({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)(o)]))}};return o}},kne={};ID(kne,{blur:()=>mBe,clearContent:()=>gBe,clearNodes:()=>vBe,command:()=>yBe,createParagraphNear:()=>xBe,cut:()=>bBe,deleteCurrentNode:()=>wBe,deleteNode:()=>NBe,deleteRange:()=>SBe,deleteSelection:()=>jBe,enter:()=>_Be,exitCode:()=>EBe,extendMarkRange:()=>ABe,first:()=>CBe,focus:()=>TBe,forEach:()=>OBe,insertContent:()=>PBe,insertContentAt:()=>DBe,joinBackward:()=>FBe,joinDown:()=>LBe,joinForward:()=>BBe,joinItemBackward:()=>$Be,joinItemForward:()=>zBe,joinTextblockBackward:()=>qBe,joinTextblockForward:()=>UBe,joinUp:()=>IBe,keyboardShortcut:()=>VBe,lift:()=>WBe,liftEmptyBlock:()=>KBe,liftListItem:()=>GBe,newlineInCode:()=>YBe,resetAttributes:()=>XBe,scrollIntoView:()=>JBe,selectAll:()=>ZBe,selectNodeBackward:()=>QBe,selectNodeForward:()=>e$e,selectParentNode:()=>t$e,selectTextblockEnd:()=>n$e,selectTextblockStart:()=>r$e,setContent:()=>i$e,setMark:()=>w$e,setMeta:()=>N$e,setNode:()=>S$e,setNodeSelection:()=>j$e,setTextSelection:()=>_$e,sinkListItem:()=>E$e,splitBlock:()=>A$e,splitListItem:()=>C$e,toggleList:()=>k$e,toggleMark:()=>T$e,toggleNode:()=>O$e,toggleWrap:()=>P$e,undoInputRule:()=>M$e,unsetAllMarks:()=>R$e,unsetMark:()=>D$e,updateAttributes:()=>I$e,wrapIn:()=>L$e,wrapInList:()=>F$e});var mBe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),gBe=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),vBe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:d}=e,f=u.resolve(d.map(c)),p=u.resolve(d.map(c+l.nodeSize)),h=f.blockRange(p);if(!h)return;const m=Gg(h);if(l.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},yBe=t=>e=>t(e),xBe=()=>({state:t,dispatch:e})=>Vte(t,e),bBe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Qt(r.doc.resolve(Math.max(o-1,0)))),!0},wBe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),c=i.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1};function $i(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var NBe=t=>({tr:e,state:n,dispatch:r})=>{const i=$i(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),u=s.after(o);e.delete(c,u).scrollIntoView()}return!0}return!1},SBe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},jBe=()=>({state:t,dispatch:e})=>wD(t,e),_Be=()=>({commands:t})=>t.keyboardShortcut("Enter"),EBe=()=>({state:t,dispatch:e})=>dFe(t,e);function LD(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function mN(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:LD(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Tne(t,e,n={}){return t.find(r=>r.type===e&&mN(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function hU(t,e,n={}){return!!Tne(t,e,n)}function FD(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!Tne([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,c=o+1,u=l+i.node.nodeSize;for(;o>0&&hU([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&hU([...t.parent.child(c).marks],e,n);)u+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function ku(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var ABe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=ku(t,r.schema),{doc:o,selection:l}=n,{$from:c,from:u,to:d}=l;if(i){const f=FD(c,s,e);if(f&&f.from<=u&&f.to>=d){const p=Qt.create(o,f.from,f.to);n.setSelection(p)}}return!0},CBe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function One(t){return t instanceof Qt}function ih(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Pne(t,e=null){if(!e)return null;const n=cn.atStart(t),r=cn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Qt.create(t,ih(0,i,s),ih(t.content.size,i,s)):Qt.create(t,ih(e,i,s),ih(e,i,s))}function kBe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function BD(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var TBe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(BD()||kBe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!One(n.state.selection))return o(),!0;const l=Pne(i.doc,t)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},OBe=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),PBe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Mne=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Mne(r)}return t};function M0(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Mne(n)}function Bx(t,e,n){if(t instanceof qd||t instanceof Ze)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ze.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Bx("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const c=new yte({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?wy.fromSchema(c).parseSlice(M0(t),n.parseOptions):wy.fromSchema(c).parse(M0(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=wy.fromSchema(e);return n.slice?s.parseSlice(M0(t),n.parseOptions).content:s.parse(M0(t),n.parseOptions)}return Bx("",e,n)}function MBe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof cs||i instanceof us))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,c,u,d)=>{o===0&&(o=d)}),t.setSelection(cn.near(t.doc.resolve(o),n))}var RBe=t=>!("type"in t),DBe=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Bx(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(v){c(v)}try{l=Bx(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(v){return c(v),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((RBe(l)?l:[l]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,h=h?v.isBlock:!1}),d===f&&h){const{parent:v}=r.doc.resolve(d);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(d-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Ze){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,f)}else{g=l;const v=r.doc.resolve(d),y=v.node(),b=v.parentOffset===0,N=y.isText||y.isTextblock,S=y.content.size>0;b&&N&&S&&(d=Math.max(0,d-1)),r.replaceWith(d,f,g)}n.updateSelection&&MBe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},IBe=()=>({state:t,dispatch:e})=>lFe(t,e),LBe=()=>({state:t,dispatch:e})=>cFe(t,e),FBe=()=>({state:t,dispatch:e})=>Fte(t,e),BBe=()=>({state:t,dispatch:e})=>qte(t,e),$Be=()=>({state:t,dispatch:e,tr:n})=>{try{const r=kj(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},zBe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=kj(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qBe=()=>({state:t,dispatch:e})=>aFe(t,e),UBe=()=>({state:t,dispatch:e})=>oFe(t,e);function Rne(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function HBe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))BD()||Rne()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var VBe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=HBe(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return c?.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function tf(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?$i(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(i,p+f.nodeSize);l.push({node:f,from:h,to:m})});const c=i-r,u=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>mN(f.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((f,p)=>f+p.to-p.from,0)>=c}var WBe=(t,e={})=>({state:n,dispatch:r})=>{const i=$i(t,n.schema);return tf(n,i,e)?uFe(n,r):!1},KBe=()=>({state:t,dispatch:e})=>Wte(t,e),GBe=t=>({state:e,dispatch:n})=>{const r=$i(t,e.schema);return NFe(r)(e,n)},YBe=()=>({state:t,dispatch:e})=>Hte(t,e);function Lj(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function pU(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var XBe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Lj(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=$i(t,r.schema)),l==="mark"&&(o=ku(t,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,pU(u.attrs,e)),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&n.addMark(d,d+u.nodeSize,o.create(pU(f.attrs,e)))})})}),!0):!1},JBe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),ZBe=()=>({tr:t,dispatch:e})=>{if(e){const n=new so(t.doc);t.setSelection(n)}return!0},QBe=()=>({state:t,dispatch:e})=>$te(t,e),e$e=()=>({state:t,dispatch:e})=>Ute(t,e),t$e=()=>({state:t,dispatch:e})=>pFe(t,e),n$e=()=>({state:t,dispatch:e})=>vFe(t,e),r$e=()=>({state:t,dispatch:e})=>gFe(t,e);function Y5(t,e,n={},r={}){return Bx(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var i$e=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const u=Y5(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function Dne(t,e){const n=ku(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function Ine(t,e){const n=new xD(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function s$e(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function X5(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function a$e(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Lne(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Fj(t){return e=>Lne(e.$from,t)}function Xt(t,e,n){return t.config[e]===void 0&&t.parent?Xt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Xt(t.parent,e,n):null}):t.config[e]}function $D(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Xt(e,"addExtensions",n);return r?[e,...$D(r())]:e}).flat(10)}function zD(t,e){const n=up.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function Fne(t){return typeof t=="function"}function mr(t,e=void 0,...n){return Fne(t)?e?t.bind(e)(...n):t(...n):t}function o$e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function $x(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Bne(t){const e=[],{nodeExtensions:n,markExtensions:r}=$x(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},c=Xt(o,"addGlobalAttributes",l);if(!c)return;c().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=Xt(o,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([d,f])=>{const p={...s,...f};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,e.push({type:o.name,name:d,attribute:p})})}),e}function Rr(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],u=l.filter(d=>!c.includes(d));r[i]=[...c,...u].join(" ")}else if(i==="style"){const l=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());u.set(f,p)}),l.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());u.set(f,p)}),r[i]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=s}),r},{})}function gN(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Rr(n,r),{})}function l$e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function mU(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):l$e(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function gU(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&o$e(n)?!1:n!=null))}function c$e(t,e){var n;const r=Bne(t),{nodeExtensions:i,markExtensions:s}=$x(t),o=(n=i.find(u=>Xt(u,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(u=>{const d=r.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((y,b)=>{const N=Xt(b,"extendNodeSchema",f);return{...y,...N?N(u):{}}},{}),h=gU({...p,content:mr(Xt(u,"content",f)),marks:mr(Xt(u,"marks",f)),group:mr(Xt(u,"group",f)),inline:mr(Xt(u,"inline",f)),atom:mr(Xt(u,"atom",f)),selectable:mr(Xt(u,"selectable",f)),draggable:mr(Xt(u,"draggable",f)),code:mr(Xt(u,"code",f)),whitespace:mr(Xt(u,"whitespace",f)),linebreakReplacement:mr(Xt(u,"linebreakReplacement",f)),defining:mr(Xt(u,"defining",f)),isolating:mr(Xt(u,"isolating",f)),attrs:Object.fromEntries(d.map(y=>{var b,N;return[y.name,{default:(b=y?.attribute)==null?void 0:b.default,validate:(N=y?.attribute)==null?void 0:N.validate}]}))}),m=mr(Xt(u,"parseHTML",f));m&&(h.parseDOM=m.map(y=>mU(y,d)));const g=Xt(u,"renderHTML",f);g&&(h.toDOM=y=>g({node:y,HTMLAttributes:gN(y,d)}));const v=Xt(u,"renderText",f);return v&&(h.toText=v),[u.name,h]})),c=Object.fromEntries(s.map(u=>{const d=r.filter(v=>v.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((v,y)=>{const b=Xt(y,"extendMarkSchema",f);return{...v,...b?b(u):{}}},{}),h=gU({...p,inclusive:mr(Xt(u,"inclusive",f)),excludes:mr(Xt(u,"excludes",f)),group:mr(Xt(u,"group",f)),spanning:mr(Xt(u,"spanning",f)),code:mr(Xt(u,"code",f)),attrs:Object.fromEntries(d.map(v=>{var y,b;return[v.name,{default:(y=v?.attribute)==null?void 0:y.default,validate:(b=v?.attribute)==null?void 0:b.validate}]}))}),m=mr(Xt(u,"parseHTML",f));m&&(h.parseDOM=m.map(v=>mU(v,d)));const g=Xt(u,"renderHTML",f);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:gN(v,d)})),[u.name,h]}));return new yte({topNode:o,nodes:l,marks:c})}function u$e(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function qD(t){return t.sort((n,r)=>{const i=Xt(n,"priority")||100,s=Xt(r,"priority")||100;return i>s?-1:i<s?1:0})}function $ne(t){const e=qD($D(t)),n=u$e(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function zne(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(c,u,d,f)=>{var p;c.isBlock&&u>r&&(l+=s);const h=o?.[c.type.name];if(h)return d&&(l+=h({node:c,pos:u,parent:d,index:f,range:e})),!1;c.isText&&(l+=(p=c?.text)==null?void 0:p.slice(Math.max(r,u)-u,i-u))}),l}function d$e(t,e){const n={from:0,to:t.content.size};return zne(t,n,e)}function qne(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function f$e(t,e){const n=$i(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Une(t,e){const n=Lj(typeof e=="string"?e:e.name,t.schema);return n==="node"?f$e(t,e):n==="mark"?Dne(t,e):{}}function h$e(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function p$e(t){const e=h$e(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Hne(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),d=e.slice(s).map(c),f=e.invert().map(u,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:u,to:d}})})}),p$e(r)}function UD(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=FD(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var m$e=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===e?o=l:s-=1}return[o,s]};function Ek(t,e){return e.nodes[t]||e.marks[t]||null}function v1(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var g$e=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var c,u;const d=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function J5(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?ku(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>mN(f.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(h,v),b=Math.min(m,v+g.nodeSize),N=b-y;o+=N,l.push(...g.marks.map(S=>({mark:S,from:y,to:b})))})}),o===0)return!1;const c=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>mN(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),u=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,p)=>f+p.to-p.from,0);return(c>0?c+u:c)>=o}function v$e(t,e,n={}){if(!e)return tf(t,null,n)||J5(t,null,n);const r=Lj(e,t.schema);return r==="node"?tf(t,e,n):r==="mark"?J5(t,e,n):!1}var y$e=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Fj(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},x$e=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function vU(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function yU(t,e){const{nodeExtensions:n}=$x(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=mr(Xt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Bj(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Bj(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Vne(t){return t instanceof Jt}function b$e(t,e,n){var r;const{selection:i}=e;let s=null;if(One(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(u=>u.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,c.pos,(d,f,p)=>{if(u)return!1;if(d.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));u=h&&m}return!u}),u})}var w$e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,c=ku(t,r.schema);if(i)if(o){const u=Dne(r,c);n.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(p,h)=>{const m=Math.max(h,d),g=Math.min(h+p.nodeSize,f);p.marks.find(y=>y.type===c)?p.marks.forEach(y=>{c===y.type&&n.addMark(m,g,c.create({...y.attrs,...e}))}):n.addMark(m,g,c.create(e))})});return b$e(r,n,c)},N$e=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),S$e=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=$i(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>Mq(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Mq(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},j$e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=ih(t,0,r.content.size),s=Jt.create(r,i);e.setSelection(s)}return!0},_$e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Qt.atStart(r).from,l=Qt.atEnd(r).to,c=ih(i,o,l),u=ih(s,o,l),d=Qt.create(r,c,u);e.setSelection(d)}return!0},E$e=t=>({state:e,dispatch:n})=>{const r=$i(t,e.schema);return _Fe(r)(e,n)};function xU(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var A$e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:c}=s,u=i.extensionManager.attributes,d=v1(u,l.node().type.name,l.node().attrs);if(s instanceof Jt&&s.node.isBlock)return!l.parentOffset||!pu(o,l.pos)?!1:(r&&(t&&xU(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,p=l.depth===0?void 0:s$e(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&p?[{type:p,attrs:d}]:void 0,m=pu(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&pu(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:d}]:void 0),r){if(m&&(s instanceof Qt&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),p&&!f&&!l.parentOffset&&l.parent.type!==p)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&xU(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},C$e=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=$i(t,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const f=c.node(-1);if(f.type!==l)return!1;const p=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let y=Ze.empty;const b=c.index(-1)?1:c.index(-2)?2:3;for(let _=c.depth-b;_>=c.depth-3;_-=1)y=Ze.from(c.node(_).copy(y));const N=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,S={...v1(p,c.node().type.name,c.node().attrs),...e},E=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;y=y.append(Ze.from(l.createAndFill(null,E)||void 0));const C=c.before(c.depth-(b-1));n.replace(C,c.after(-N),new bt(y,4-b,0));let T=-1;n.doc.nodesBetween(C,n.doc.content.size,(_,j)=>{if(T>-1)return!1;_.isTextblock&&_.content.size===0&&(T=j+1)}),T>-1&&n.setSelection(Qt.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const h=u.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...v1(p,f.type.name,f.attrs),...e},g={...v1(p,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,u.pos);const v=h?[{type:l,attrs:m},{type:h,attrs:g}]:[{type:l,attrs:m}];if(!pu(n.doc,c.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=r,{splittableMarks:N}=s.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(n.split(c.pos,2,v).scrollIntoView(),!S||!i)return!0;const E=S.filter(C=>N.includes(C.type.name));n.ensureMarks(E)}return!0},Ak=(t,e)=>{const n=Fj(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&mf(t.doc,n.pos)&&t.join(n.pos),!0},Ck=(t,e)=>{const n=Fj(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&mf(t.doc,r)&&t.join(r),!0},k$e=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:u,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=$i(t,o.schema),m=$i(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:b}=g,N=y.blockRange(b),S=v||g.$to.parentOffset&&g.$from.marks();if(!N)return!1;const E=Fj(C=>yU(C.type.name,f))(g);if(N.depth>=1&&E&&N.depth-E.depth<=1){if(E.node.type===h)return u.liftListItem(m);if(yU(E.node.type.name,f)&&h.validContent(E.node.content)&&l)return c().command(()=>(s.setNodeMarkup(E.pos,h),!0)).command(()=>Ak(s,h)).command(()=>Ck(s,h)).run()}return!n||!S||!l?c().command(()=>d().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>Ak(s,h)).command(()=>Ck(s,h)).run():c().command(()=>{const C=d().wrapInList(h,r),T=S.filter(_=>p.includes(_.type.name));return s.ensureMarks(T),C?!0:u.clearNodes()}).wrapInList(h,r).command(()=>Ak(s,h)).command(()=>Ck(s,h)).run()},T$e=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ku(t,r.schema);return J5(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},O$e=(t,e,n={})=>({state:r,commands:i})=>{const s=$i(t,r.schema),o=$i(e,r.schema),l=tf(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...n})},P$e=(t,e={})=>({state:n,commands:r})=>{const i=$i(t,n.schema);return tf(n,i,e)?r.lift(i):r.wrapIn(i,e)},M$e=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},R$e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},D$e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,c=ku(t,r.schema),{$from:u,empty:d,ranges:f}=l;if(!i)return!0;if(d&&o){let{from:p,to:h}=l;const m=(s=u.marks().find(v=>v.type===c))==null?void 0:s.attrs,g=FD(u,c,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,c)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0},I$e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Lj(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=$i(t,r.schema)),l==="mark"&&(o=ku(t,r.schema)),i&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,p,h,m;n.selection.empty?r.doc.nodesBetween(u,d,(g,v)=>{s&&s===g.type&&(h=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,p=g)}):r.doc.nodesBetween(u,d,(g,v)=>{v<u&&s&&s===g.type&&(h=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,p=g),v>=u&&v<=d&&(s&&s===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(y=>{if(o===y.type){const b=Math.max(v,u),N=Math.min(v+g.nodeSize,d);n.addMark(b,N,o.create({...y.attrs,...e}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(g=>{o===g.type&&n.addMark(h,m,o.create({...g.attrs,...e}))}))}),!0):!1},L$e=(t,e={})=>({state:n,dispatch:r})=>{const i=$i(t,n.schema);return yFe(i,e)(n,r)},F$e=(t,e={})=>({state:n,dispatch:r})=>{const i=$i(t,n.schema);return xFe(i,e)(n,r)},B$e=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},$j=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},$$e=(t,e)=>{if(LD(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function R0(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=g$e(u)+s;return o.forEach(p=>{if(d)return;const h=$$e(f,p.find);if(!h)return;const m=c.state.tr,g=Dj({state:c.state,transaction:m}),v={from:r-(h[0].length-s.length),to:i},{commands:y,chain:b,can:N}=new Ij({editor:n,state:g});p.handler({state:g,range:v,match:h,commands:y,chain:b,can:N})===null||!m.steps.length||(p.undoable&&m.setMeta(l,{transform:m,from:r,to:i,text:s}),c.dispatch(m),d=!0)}),d}function z$e(t){const{editor:e,rules:n}=t,r=new Yr({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=zD(Ze.from(d),o.schema);const{from:f}=c,p=f+d.length;R0({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return R0({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&R0({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?R0({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function q$e(t){return Object.prototype.toString.call(t).slice(8,-1)}function D0(t){return q$e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Wne(t,e){const n={...t};return D0(t)&&D0(e)&&Object.keys(e).forEach(r=>{D0(e[r])&&D0(t[r])?n[r]=Wne(t[r],e[r]):n[r]=e[r]}),n}var HD=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...mr(Xt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mr(Xt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Wne(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Tu=class Kne extends HD{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new Kne(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>u?.type.name===n.name))return!1;const c=o.find(u=>u?.type.name===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function U$e(t){return typeof t=="number"}var H$e=class{constructor(t){this.find=t.find,this.handler=t.handler}},V$e=(t,e,n)=>{if(LD(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function W$e(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:c,chain:u,can:d}=new Ij({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{var g,v,y,b,N;if((v=(g=h.type)==null?void 0:g.spec)!=null&&v.code||!(h.isText||h.isTextblock||h.isInline))return;const S=(N=(b=(y=h.content)==null?void 0:y.size)!=null?b:h.nodeSize)!=null?N:0,E=Math.max(r,m),C=Math.min(i,m+S);if(E>=C)return;const T=h.isText?h.text||"":h.textBetween(E-m,C-m,void 0,"￼");V$e(T,s.find,o).forEach(j=>{if(j.index===void 0)return;const P=E+j.index+1,k=P+j[0].length,O={from:n.tr.mapping.map(P),to:n.tr.mapping.map(k)},M=s.handler({state:n,range:O,match:j,commands:c,chain:u,can:d,pasteEvent:o,dropEvent:l});f.push(M)})}),f.every(h=>h!==null)}var I0=null,K$e=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function G$e(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:d,from:f,to:p,rule:h,pasteEvt:m})=>{const g=d.tr,v=Dj({state:d,transaction:g});if(!(!W$e({editor:e,state:v,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new Yr({view(f){const p=m=>{var g;r=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,r&&(I0=e)},h=()=>{I0&&(I0=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(s=r===f.dom.parentElement,l=p,!s){const h=I0;h?.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)==null?void 0:h.getData("text/html");return o=p,i=!!m?.includes("data-pm-slice"),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:E}=y;typeof E=="string"?E=E:E=zD(Ze.from(E),h.schema);const{from:C}=y,T=C+E.length,_=K$e(E);return c({rule:d,state:h,from:C,to:{b:T},pasteEvt:_})}const N=p.doc.content.findDiffStart(h.doc.content),S=p.doc.content.findDiffEnd(h.doc.content);if(!(!U$e(N)||!S||N===S.b))return c({rule:d,state:h,from:N,to:S,pasteEvt:o})}}))}var zj=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=$ne(t),this.schema=c$e(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ek(e.name,this.schema)},r=Xt(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return qD([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Ek(r.name,this.schema)},s=[],o=Xt(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&Xt(r,"exitable",i)&&(l.ArrowRight=()=>Tu.handleExit({editor:t,mark:r})),o){const p=Object.fromEntries(Object.entries(o()).map(([h,m])=>[h,()=>m({editor:t})]));l={...l,...p}}const c=hBe(l);s.push(c);const u=Xt(r,"addInputRules",i);if(vU(r,t.options.enableInputRules)&&u){const p=u();if(p&&p.length){const h=z$e({editor:t,rules:p}),m=Array.isArray(h)?h:[h];s.push(...m)}}const d=Xt(r,"addPasteRules",i);if(vU(r,t.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const h=G$e({editor:t,rules:p});s.push(...h)}}const f=Xt(r,"addProseMirrorPlugins",i);if(f){const p=f();s.push(...p)}return s})}get attributes(){return Bne(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=$x(this.extensions);return Object.fromEntries(e.filter(n=>!!Xt(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:$i(n.name,this.schema)},s=Xt(n,"addNodeView",i);if(!s)return[];const o=(l,c,u,d,f)=>{const p=gN(l,r);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=$x(this.extensions);return Object.fromEntries(e.filter(n=>!!Xt(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ku(n.name,this.schema)},s=Xt(n,"addMarkView",i);if(!s)return[];const o=(l,c,u)=>{const d=gN(l,r);return s()({mark:l,view:c,inline:u,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{o8e(l,t,f)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Ek(e.name,this.schema)};e.type==="mark"&&((n=mr(Xt(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Xt(e,"onBeforeCreate",r),s=Xt(e,"onCreate",r),o=Xt(e,"onUpdate",r),l=Xt(e,"onSelectionUpdate",r),c=Xt(e,"onTransaction",r),u=Xt(e,"onFocus",r),d=Xt(e,"onBlur",r),f=Xt(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};zj.resolve=$ne;zj.sort=qD;zj.flatten=$D;var Y$e={};ID(Y$e,{ClipboardTextSerializer:()=>Yne,Commands:()=>Xne,Delete:()=>Jne,Drop:()=>Zne,Editable:()=>Qne,FocusEvents:()=>tre,Keymap:()=>nre,Paste:()=>rre,Tabindex:()=>ire,focusEventsPluginKey:()=>ere});var Ar=class Gne extends HD{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Gne(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Yne=Ar.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yr({key:new yi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),l=Math.max(...s.map(d=>d.$to.pos)),c=qne(n);return zne(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),Xne=Ar.create({name:"commands",addCommands(){return{...kne}}}),Jne=Ar.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,l,c,u;if((u=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const d=Ine(t.before,[t,...e]);Hne(d).forEach(h=>{d.mapping.mapResult(h.oldRange.from).deletedAfter&&d.mapping.mapResult(h.oldRange.to).deletedBefore&&d.before.nodesBetween(h.oldRange.from,h.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=h.oldRange.from<=g&&v<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:h.oldRange,newRange:h.newRange,partial:!y,editor:this.editor,transaction:t,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((h,m)=>{var g,v;if(h instanceof pl){const y=p.slice(m).map(h.from,-1),b=p.slice(m).map(h.to),N=p.invert().map(y,-1),S=p.invert().map(b),E=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(T=>T.eq(h.mark)),C=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(T=>T.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:N,to:S},newRange:{from:y,to:b},partial:!!(C||E),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),Zne=Ar.create({name:"drop",addProseMirrorPlugins(){return[new Yr({key:new yi("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Qne=Ar.create({name:"editable",addProseMirrorPlugins(){return[new Yr({key:new yi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ere=new yi("focusEvents"),tre=Ar.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yr({key:ere,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),nre=Ar.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:d,$anchor:f}=c,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?l.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,v=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?v===f.pos:cn.atStart(u).from===p;return!d||!h.type.isTextblock||h.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return BD()||Rne()?s:i},addProseMirrorPlugins(){return[new Yr({key:new yi("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,c=cn.atStart(e.doc).from,u=cn.atEnd(e.doc).to;if(s||!(o===c&&l===u)||!Bj(n.doc))return;const p=n.tr,h=Dj({state:n,transaction:p}),{commands:m}=new Ij({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),rre=Ar.create({name:"paste",addProseMirrorPlugins(){return[new Yr({key:new yi("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ire=Ar.create({name:"tabindex",addProseMirrorPlugins(){return[new Yr({key:new yi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),X$e=class Yp{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Yp(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Yp(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Yp(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const c=new Yp(l,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new Yp(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(c=>n[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},J$e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Z$e(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Q$e=class extends B$e{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=Pne(e,this.options.autofocus);this.editorState=am.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Z$e(J$e,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=Fne(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[Qne,Yne.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Xne,tre,nre,ire,Zne,rre,Jne].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new zj(r,this)}createCommandManager(){this.commandManager=new Ij({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Y5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Y5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new Cne(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),l=o?.getMeta("focus"),c=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return Une(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return v$e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return zD(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return d$e(this.state.doc,{blockSeparator:e,textSerializers:{...qne(this.schema),...n}})}get isEmpty(){return Bj(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new X$e(e,this)}get $doc(){return this.$pos(0)}};function Gh(t){return new $j({find:t.find,handler:({state:e,range:n,match:r})=>{const i=mr(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),u=n.from+l.indexOf(o),d=u+o.length;if(UD(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u);const p=n.from+c+o.length;s.addMark(n.from+c,p,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function sre(t){return new $j({find:t.find,handler:({state:e,range:n,match:r})=>{const i=mr(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const c=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=o+u;d>l?d=l:l=d+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(d,l,c)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:t.undoable})}function Z5(t){return new $j({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=mr(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function jg(t){return new $j({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=mr(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),u=c&&yD(c,t.type,s);if(!u)return null;if(o.wrap(c,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(v=>h.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&mf(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)},undoable:t.undoable})}function e8e(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Jt){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var t8e={};ID(t8e,{createAtomBlockMarkdownSpec:()=>n8e,createBlockMarkdownSpec:()=>r8e,createInlineMarkdownSpec:()=>a8e,parseAttributes:()=>VD,parseIndentedBlocks:()=>Q5,renderNestedMarkdownContent:()=>KD,serializeAttributes:()=>WD});function VD(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,u,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),h=n[p];h&&(e[u]=h.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function WD(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function n8e(t){const{nodeName:e,name:n,parseAttributes:r=VD,serializeAttributes:i=WD,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...s,...d.attributes};return f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${c}(?:\\s|$)`,"m"),h=(f=d.match(p))==null?void 0:f.index;return h!==void 0?h:-1},tokenize(d,f,p){const h=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(h);if(!m)return;const g=m[1]||"",v=r(g);if(!o.find(b=>!(b in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:d=>{const f=u(d.attrs||{}),p=i(f),h=p?` {${p}}`:"";return`:::${c}${h} :::`}}}function r8e(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=VD,serializeAttributes:s=WD,defaultAttributes:o={},content:l="block",allowedAttributes:c}=t,u=n||e,d=f=>{if(!c)return f;const p={};return c.forEach(h=>{h in f&&(p[h]=f[h])}),p};return{parseMarkdown:(f,p)=>{let h;if(r){const g=r(f);h=typeof g=="string"?[{type:"text",text:g}]:g}else l==="block"?h=p.parseChildren(f.tokens||[]):h=p.parseInline(f.tokens||[]);const m={...o,...f.attributes};return p.createNode(e,m,h)},markdownTokenizer:{name:e,level:"block",start(f){var p;const h=new RegExp(`^:::${u}`,"m"),m=(p=f.match(h))==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,p,h){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=f.match(g);if(!v)return;const[y,b=""]=v,N=i(b);let S=1;const E=y.length;let C="";const T=/^:::([\w-]*)(\s.*)?/gm,_=f.slice(E);for(T.lastIndex=0;;){const j=T.exec(_);if(j===null)break;const P=j.index,k=j[1];if(!((m=j[2])!=null&&m.endsWith(":::"))){if(k)S+=1;else if(S-=1,S===0){const O=_.slice(0,P);C=O.trim();const M=f.slice(0,E+P+j[0].length);let I=[];if(C)if(l==="block")for(I=h.blockTokens(O),I.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=h.inlineTokens(B.text))});I.length>0;){const B=I[I.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))I.pop();else break}else I=h.inlineTokens(C);return{type:e,raw:M,attributes:N,content:C,tokens:I}}}}}},renderMarkdown:(f,p)=>{const h=d(f.attrs||{}),m=s(h),g=m?` {${m}}`:"",v=p.renderChildren(f.content||[],`

`);return`:::${u}${g}

${v}

:::`}}}function i8e(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function s8e(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function a8e(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=i8e,serializeAttributes:s=s8e,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=t,u=n||e,d=p=>{if(!c)return p;const h={};return c.forEach(m=>{m in p&&(h[m]=p[m])}),h},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,h)=>{const m={...o,...p.attributes};if(l)return h.createNode(e,m);const g=r?r(p):p.content||"";return g?h.createNode(e,m,[h.createTextNode(g)]):h.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(p){const h=l?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=p.match(h),g=m?.index;return g!==void 0?g:-1},tokenize(p,h,m){const g=l?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),v=p.match(g);if(!v)return;let y="",b="";if(l){const[,S]=v;b=S}else{const[,S,E]=v;b=S,y=E||""}const N=i(b.trim());return{type:e,raw:v[0],content:y.trim(),attributes:N}}},renderMarkdown:p=>{let h="";r?h=r(p):p.content&&p.content.length>0&&(h=p.content.filter(y=>y.type==="text").map(y=>y.text).join(""));const m=d(p.attrs||{}),g=s(m),v=g?` ${g}`:"";return l?`[${u}${v}]`:`[${u}${v}]${h}[/${u}]`}}}function Q5(t,e,n){var r,i,s,o;const l=t.split(`
`),c=[];let u="",d=0;const f=e.baseIndentSize||2;for(;d<l.length;){const p=l[d],h=p.match(e.itemPattern);if(!h){if(c.length>0)break;if(p.trim()===""){d+=1;continue}else return}const m=e.extractItemData(h),{indentLevel:g,mainContent:v}=m;u=`${u}${p}
`;const y=[v];for(d+=1;d<l.length;){const E=l[d];if(E.trim()===""){const T=l.slice(d+1).findIndex(P=>P.trim()!=="");if(T===-1)break;if((((i=(r=l[d+1+T].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){y.push(E),u=`${u}${E}
`,d+=1;continue}else break}if((((o=(s=E.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)y.push(E),u=`${u}${E}
`,d+=1;else break}let b;const N=y.slice(1);if(N.length>0){const E=N.map(C=>C.slice(g+f)).join(`
`);E.trim()&&(e.customNestedParser?b=e.customNestedParser(E):b=n.blockTokens(E))}const S=e.createToken(m,b);c.push(S)}if(c.length!==0)return{items:c,raw:u.trim()}}function KD(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,l=e.renderChildren([s]),c=[`${i}${l}`];return o&&o.length>0&&o.forEach(u=>{const d=e.renderChildren([u]);if(d){const f=d.split(`
`).map(p=>p?e.indent(p):"").join(`
`);c.push(f)}}),c.join(`
`)}function o8e(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((l,c)=>{const u=s.mapping.map(c),d=s.mapping.map(c)+l.nodeSize;let f=null;if(l.marks.forEach(h=>{if(h!==o)return!1;f=h}),!f)return;let p=!1;if(Object.keys(n).forEach(h=>{n[h]!==f.attrs[h]&&(p=!0)}),p){const h=t.type.create({...t.attrs,...n});s.removeMark(u,d,t.type),s.addMark(u,d,h)}}),s.docChanged&&e.view.dispatch(s)}var hs=class are extends HD{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new are(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function nf(t){return new H$e({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=mr(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];let u=n.to;if(l){const d=c.search(/\S/),f=n.from+c.indexOf(l),p=f+l.length;if(UD(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+d,f),u=n.from+d+l.length,o.addMark(n.from+d,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var kk,bU;function l8e(){return bU||(bU=1,kk=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),kk}var c8e=l8e();const u8e=jr(c8e);var Tk={exports:{}},Ok={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wU;function d8e(){if(wU)return Ok;wU=1;var t=iH(),e=sH();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return Ok.useSyncExternalStoreWithSelector=function(u,d,f,p,h){var m=s(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=l(function(){function y(C){if(!b){if(b=!0,N=C,C=p(C),h!==void 0&&g.hasValue){var T=g.value;if(h(T,C))return S=T}return S=C}if(T=S,r(N,C))return T;var _=p(C);return h!==void 0&&h(T,_)?(N=C,T):(N=C,S=_)}var b=!1,N,S,E=f===void 0?null:f;return[function(){return y(d())},E===null?void 0:function(){return y(E())}]},[d,f,p,h]);var v=i(u,m[0],m[1]);return o(function(){g.hasValue=!0,g.value=v},[v]),c(v),v},Ok}var NU;function f8e(){return NU||(NU=1,Tk.exports=d8e()),Tk.exports}var h8e=f8e(),p8e=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},m8e=({contentComponent:t})=>{const e=rS.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return a.jsx(a.Fragment,{children:Object.values(e)})};function g8e(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Oae.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var v8e=class extends le.Component{constructor(t){var e;super(t),this.editorContentRef=le.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=g8e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:p8e(e,this.editorContentRef),...n}),t?.contentComponent&&a.jsx(m8e,{contentComponent:t.contentComponent})]})}},y8e=x.forwardRef((t,e)=>{const n=le.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return le.createElement(v8e,{key:n,innerRef:e,...t})}),ore=le.memo(y8e),x8e=typeof window<"u"?x.useLayoutEffect:x.useEffect,b8e=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function w8e(t){var e;const[n]=x.useState(()=>new b8e(t.editor)),r=h8e.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:u8e);return x8e(()=>n.watch(t.editor),[t.editor,n]),x.useDebugValue(r),r}var N8e=!1,eP=typeof window>"u",S8e=eP||!!(typeof window<"u"&&window.next),j8e=class lre{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?eP||S8e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new Q$e(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?lre.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function cre(t={},e=[]){const n=x.useRef(t);n.current=t;const[r]=x.useState(()=>new j8e(n)),i=rS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return x.useDebugValue(i),x.useEffect(r.onRender(e)),w8e({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var _8e=x.createContext({editor:null});_8e.Consumer;var E8e=x.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),A8e=()=>x.useContext(E8e);le.forwardRef((t,e)=>{const{onDragStart:n}=A8e(),r=t.as||"div";return a.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});le.createContext({markViewContentRef:()=>{}});var vN=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},C8e=/^\s*>\s$/,k8e=hs.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return vN("blockquote",{...Rr(this.options.HTMLAttributes,t),children:vN("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=[];return t.content.forEach(i=>{const o=e.renderChildren(i).split(`
`).map(l=>`> ${l}`).join(`
`);n.push(o)}),n.flatMap(i=>[i,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[jg({find:C8e,type:this.type})]}}),T8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,O8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,P8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,M8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,R8e=Tu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return vN("strong",{...Rr(this.options.HTMLAttributes,t),children:vN("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gh({find:T8e,type:this.type}),Gh({find:P8e,type:this.type})]},addPasteRules(){return[nf({find:O8e,type:this.type}),nf({find:M8e,type:this.type})]}}),D8e=/(^|[^`])`([^`]+)`(?!`)$/,I8e=/(^|[^`])`([^`]+)`(?!`)/g,L8e=Tu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Rr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gh({find:D8e,type:this.type})]},addPasteRules(){return[nf({find:I8e,type:this.type})]}}),Pk=4,F8e=/^```([a-z]+)?[\s\n]$/,B8e=/^~~~([a-z]+)?[\s\n]$/,ure=hs.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Pk,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Rr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Pk,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const l=" ".repeat(n);return o?t.commands.insertContent(l):t.commands.command(({tr:c})=>{const{from:u,to:d}=i,h=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>l+m).join(`
`);return c.replaceWith(u,d,r.schema.text(h)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Pk,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:l})=>{var c;const{pos:u}=s,d=s.start(),f=s.end(),h=r.doc.textBetween(d,f,`
`,`
`).split(`
`);let m=0,g=0;const v=u-d;for(let C=0;C<h.length;C+=1){if(g+h[C].length>=v){m=C;break}g+=h[C].length+1}const b=((c=h[m].match(/^ */))==null?void 0:c[0])||"",N=Math.min(b.length,n);if(N===0)return!0;let S=d;for(let C=0;C<m;C+=1)S+=h[C].length+1;return l.delete(S,S+N),u-S<=N&&l.setSelection(Qt.create(l.doc,S)),!0}):t.commands.command(({tr:l})=>{const{from:c,to:u}=i,p=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(h=>{var m;const g=((m=h.match(/^ */))==null?void 0:m[0])||"",v=Math.min(g.length,n);return h.slice(v)}).join(`
`);return l.replaceWith(c,u,r.schema.text(p)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(cn.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Z5({find:F8e,type:this.type,getAttributes:t=>({language:t[1]})}),Z5({find:B8e,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yr({key:new yi("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,c=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(Qt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),$8e=ure,z8e=hs.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),q8e=hs.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Rr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:(t,e)=>e.indent(`
`),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&o){const f=c.filter(p=>l.includes(p.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),U8e=hs.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Rr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Z5({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),H8e=hs.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Rr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!e8e(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return Vne(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Qt.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Jt.create(o.doc,c.pos)):o.setSelection(Qt.create(o.doc,c.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=d?.create();f&&(o.insert(u,f),o.setSelection(Qt.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[sre({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),V8e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,W8e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,K8e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,G8e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Y8e=Tu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Rr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gh({find:V8e,type:this.type}),Gh({find:K8e,type:this.type})]},addPasteRules(){return[nf({find:W8e,type:this.type}),nf({find:G8e,type:this.type})]}});const X8e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",J8e="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",tP="numeric",nP="ascii",rP="alpha",_y="asciinumeric",ty="alphanumeric",iP="domain",dre="emoji",Z8e="scheme",Q8e="slashscheme",Mk="whitespace";function eze(t,e){return t in e||(e[t]=[]),e[t]}function sh(t,e,n){e[tP]&&(e[_y]=!0,e[ty]=!0),e[nP]&&(e[_y]=!0,e[rP]=!0),e[_y]&&(e[ty]=!0),e[rP]&&(e[ty]=!0),e[ty]&&(e[iP]=!0),e[dre]&&(e[iP]=!0);for(const r in e){const i=eze(r,n);i.indexOf(t)<0&&i.push(t)}}function tze(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Na(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Na.groups={};Na.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Na.groups;let i;return e&&e.j?i=e:(i=new Na(e),n&&r&&sh(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Na.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new Na,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Na,s){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(tze(o.t,r),n);sh(s,c,r)}else n&&sh(s,n,r);o.t=s}return i.j[t]=o,o}};const Ln=(t,e,n,r,i)=>t.ta(e,n,r,i),di=(t,e,n,r,i)=>t.tr(e,n,r,i),SU=(t,e,n,r,i)=>t.ts(e,n,r,i),st=(t,e,n,r,i)=>t.tt(e,n,r,i),Kc="WORD",sP="UWORD",fre="ASCIINUMERICAL",hre="ALPHANUMERICAL",zx="LOCALHOST",aP="TLD",oP="UTLD",y1="SCHEME",Xp="SLASH_SCHEME",GD="NUM",lP="WS",YD="NL",Ey="OPENBRACE",Ay="CLOSEBRACE",yN="OPENBRACKET",xN="CLOSEBRACKET",bN="OPENPAREN",wN="CLOSEPAREN",NN="OPENANGLEBRACKET",SN="CLOSEANGLEBRACKET",jN="FULLWIDTHLEFTPAREN",_N="FULLWIDTHRIGHTPAREN",EN="LEFTCORNERBRACKET",AN="RIGHTCORNERBRACKET",CN="LEFTWHITECORNERBRACKET",kN="RIGHTWHITECORNERBRACKET",TN="FULLWIDTHLESSTHAN",ON="FULLWIDTHGREATERTHAN",PN="AMPERSAND",MN="APOSTROPHE",RN="ASTERISK",ud="AT",DN="BACKSLASH",IN="BACKTICK",LN="CARET",pd="COLON",XD="COMMA",FN="DOLLAR",ql="DOT",BN="EQUALS",JD="EXCLAMATION",Eo="HYPHEN",Cy="PERCENT",$N="PIPE",zN="PLUS",qN="POUND",ky="QUERY",ZD="QUOTE",pre="FULLWIDTHMIDDLEDOT",QD="SEMI",Ul="SLASH",Ty="TILDE",UN="UNDERSCORE",mre="EMOJI",HN="SYM";var gre=Object.freeze({__proto__:null,ALPHANUMERICAL:hre,AMPERSAND:PN,APOSTROPHE:MN,ASCIINUMERICAL:fre,ASTERISK:RN,AT:ud,BACKSLASH:DN,BACKTICK:IN,CARET:LN,CLOSEANGLEBRACKET:SN,CLOSEBRACE:Ay,CLOSEBRACKET:xN,CLOSEPAREN:wN,COLON:pd,COMMA:XD,DOLLAR:FN,DOT:ql,EMOJI:mre,EQUALS:BN,EXCLAMATION:JD,FULLWIDTHGREATERTHAN:ON,FULLWIDTHLEFTPAREN:jN,FULLWIDTHLESSTHAN:TN,FULLWIDTHMIDDLEDOT:pre,FULLWIDTHRIGHTPAREN:_N,HYPHEN:Eo,LEFTCORNERBRACKET:EN,LEFTWHITECORNERBRACKET:CN,LOCALHOST:zx,NL:YD,NUM:GD,OPENANGLEBRACKET:NN,OPENBRACE:Ey,OPENBRACKET:yN,OPENPAREN:bN,PERCENT:Cy,PIPE:$N,PLUS:zN,POUND:qN,QUERY:ky,QUOTE:ZD,RIGHTCORNERBRACKET:AN,RIGHTWHITECORNERBRACKET:kN,SCHEME:y1,SEMI:QD,SLASH:Ul,SLASH_SCHEME:Xp,SYM:HN,TILDE:Ty,TLD:aP,UNDERSCORE:UN,UTLD:oP,UWORD:sP,WORD:Kc,WS:lP});const Uc=/[a-z]/,$v=/\p{L}/u,Rk=/\p{Emoji}/u,Hc=/\d/,Dk=/\s/,jU="\r",Ik=`
`,nze="️",rze="‍",Lk="￼";let L0=null,F0=null;function ize(t=[]){const e={};Na.groups=e;const n=new Na;L0==null&&(L0=_U(X8e)),F0==null&&(F0=_U(J8e)),st(n,"'",MN),st(n,"{",Ey),st(n,"}",Ay),st(n,"[",yN),st(n,"]",xN),st(n,"(",bN),st(n,")",wN),st(n,"<",NN),st(n,">",SN),st(n,"（",jN),st(n,"）",_N),st(n,"「",EN),st(n,"」",AN),st(n,"『",CN),st(n,"』",kN),st(n,"＜",TN),st(n,"＞",ON),st(n,"&",PN),st(n,"*",RN),st(n,"@",ud),st(n,"`",IN),st(n,"^",LN),st(n,":",pd),st(n,",",XD),st(n,"$",FN),st(n,".",ql),st(n,"=",BN),st(n,"!",JD),st(n,"-",Eo),st(n,"%",Cy),st(n,"|",$N),st(n,"+",zN),st(n,"#",qN),st(n,"?",ky),st(n,'"',ZD),st(n,"/",Ul),st(n,";",QD),st(n,"~",Ty),st(n,"_",UN),st(n,"\\",DN),st(n,"・",pre);const r=di(n,Hc,GD,{[tP]:!0});di(r,Hc,r);const i=di(r,Uc,fre,{[_y]:!0}),s=di(r,$v,hre,{[ty]:!0}),o=di(n,Uc,Kc,{[nP]:!0});di(o,Hc,i),di(o,Uc,o),di(i,Hc,i),di(i,Uc,i);const l=di(n,$v,sP,{[rP]:!0});di(l,Uc),di(l,Hc,s),di(l,$v,l),di(s,Hc,s),di(s,Uc),di(s,$v,s);const c=st(n,Ik,YD,{[Mk]:!0}),u=st(n,jU,lP,{[Mk]:!0}),d=di(n,Dk,lP,{[Mk]:!0});st(n,Lk,d),st(u,Ik,c),st(u,Lk,d),di(u,Dk,d),st(d,jU),st(d,Ik),di(d,Dk,d),st(d,Lk,d);const f=di(n,Rk,mre,{[dre]:!0});st(f,"#"),di(f,Rk,f),st(f,nze,f);const p=st(f,rze);st(p,"#"),di(p,Rk,f);const h=[[Uc,o],[Hc,i]],m=[[Uc,null],[$v,l],[Hc,s]];for(let g=0;g<L0.length;g++)td(n,L0[g],aP,Kc,h);for(let g=0;g<F0.length;g++)td(n,F0[g],oP,sP,m);sh(aP,{tld:!0,ascii:!0},e),sh(oP,{utld:!0,alpha:!0},e),td(n,"file",y1,Kc,h),td(n,"mailto",y1,Kc,h),td(n,"http",Xp,Kc,h),td(n,"https",Xp,Kc,h),td(n,"ftp",Xp,Kc,h),td(n,"ftps",Xp,Kc,h),sh(y1,{scheme:!0,ascii:!0},e),sh(Xp,{slashscheme:!0,ascii:!0},e),t=t.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<t.length;g++){const v=t[g][0],b=t[g][1]?{[Z8e]:!0}:{[Q8e]:!0};v.indexOf("-")>=0?b[iP]=!0:Uc.test(v)?Hc.test(v)?b[_y]=!0:b[nP]=!0:b[tP]=!0,SU(n,v,v,b)}return SU(n,"localhost",zx,{ascii:!0}),n.jd=new Na(HN),{start:n,tokens:Object.assign({groups:e},gre)}}function vre(t,e){const n=sze(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,c=null,u=0,d=null,f=-1,p=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(f=0,p=0,d=l):f>=0&&(f+=n[o].length,p++),u+=n[o].length,s+=n[o].length,o++;s-=f,o-=p,u-=f,i.push({t:d.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function sze(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function td(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new Na(r),s.jr=i.slice(),t.j[c]=s),t=s}return s=new Na(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function _U(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const qx={defaultProtocol:"http",events:null,format:EU,formatHref:EU,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function eI(t,e=null){let n=Object.assign({},qx);t&&(n=Object.assign(n,t instanceof eI?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}eI.prototype={o:qx,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:qx[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function EU(t){return t}function yre(t,e){this.t="token",this.v=t,this.tk=e}yre.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=qx.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),c=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),c&&(o.target=c),u&&(o.rel=u),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:f}}};function qj(t,e){class n extends yre{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const AU=qj("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),CU=qj("text"),aze=qj("nl"),B0=qj("url",{isLink:!0,toHref(t=qx.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==zx&&t[1].t===pd}}),_o=t=>new Na(t);function oze({groups:t}){const e=t.domain.concat([PN,RN,ud,DN,IN,LN,FN,BN,Eo,GD,Cy,$N,zN,qN,Ul,HN,Ty,UN]),n=[MN,pd,XD,ql,JD,Cy,ky,ZD,QD,NN,SN,Ey,Ay,xN,yN,bN,wN,jN,_N,EN,AN,CN,kN,TN,ON],r=[PN,MN,RN,DN,IN,LN,FN,BN,Eo,Ey,Ay,Cy,$N,zN,qN,ky,Ul,HN,Ty,UN],i=_o(),s=st(i,Ty);Ln(s,r,s),Ln(s,t.domain,s);const o=_o(),l=_o(),c=_o();Ln(i,t.domain,o),Ln(i,t.scheme,l),Ln(i,t.slashscheme,c),Ln(o,r,s),Ln(o,t.domain,o);const u=st(o,ud);st(s,ud,u),st(l,ud,u),st(c,ud,u);const d=st(s,ql);Ln(d,r,s),Ln(d,t.domain,s);const f=_o();Ln(u,t.domain,f),Ln(f,t.domain,f);const p=st(f,ql);Ln(p,t.domain,f);const h=_o(AU);Ln(p,t.tld,h),Ln(p,t.utld,h),st(u,zx,h);const m=st(f,Eo);st(m,Eo,m),Ln(m,t.domain,f),Ln(h,t.domain,f),st(h,ql,p),st(h,Eo,m);const g=st(h,pd);Ln(g,t.numeric,AU);const v=st(o,Eo),y=st(o,ql);st(v,Eo,v),Ln(v,t.domain,o),Ln(y,r,s),Ln(y,t.domain,o);const b=_o(B0);Ln(y,t.tld,b),Ln(y,t.utld,b),Ln(b,t.domain,o),Ln(b,r,s),st(b,ql,y),st(b,Eo,v),st(b,ud,u);const N=st(b,pd),S=_o(B0);Ln(N,t.numeric,S);const E=_o(B0),C=_o();Ln(E,e,E),Ln(E,n,C),Ln(C,e,E),Ln(C,n,C),st(b,Ul,E),st(S,Ul,E);const T=st(l,pd),_=st(c,pd),j=st(_,Ul),P=st(j,Ul);Ln(l,t.domain,o),st(l,ql,y),st(l,Eo,v),Ln(c,t.domain,o),st(c,ql,y),st(c,Eo,v),Ln(T,t.domain,E),st(T,Ul,E),st(T,ky,E),Ln(P,t.domain,E),Ln(P,e,E),st(P,Ul,E);const k=[[Ey,Ay],[yN,xN],[bN,wN],[NN,SN],[jN,_N],[EN,AN],[CN,kN],[TN,ON]];for(let O=0;O<k.length;O++){const[M,I]=k[O],B=st(E,M);st(C,M,B),st(B,I,E);const U=_o(B0);Ln(B,e,U);const D=_o();Ln(B,n),Ln(U,e,U),Ln(U,n,D),Ln(D,e,U),Ln(D,n,D),st(U,I,E),st(D,I,E)}return st(i,zx,b),st(i,YD,aze),{start:i,tokens:gre}}function lze(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,c=null,u=null,d=0,f=null,p=-1;for(;i<r&&!(c=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=c||l.go(n[i].t));)c=null,l=u,l.accepts()?(p=0,f=l):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Fk(CU,e,o)),o=[]),i-=p,d-=p;const h=f.t,m=n.slice(i-d,i);s.push(Fk(h,e,m))}}return o.length>0&&s.push(Fk(CU,e,o)),s}function Fk(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const cze=typeof console<"u"&&console&&console.warn||(()=>{}),uze="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Hr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function dze(){return Na.groups={},Hr.scanner=null,Hr.parser=null,Hr.tokenQueue=[],Hr.pluginQueue=[],Hr.customSchemes=[],Hr.initialized=!1,Hr}function kU(t,e=!1){if(Hr.initialized&&cze(`linkifyjs: already initialized - will not register custom scheme "${t}" ${uze}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Hr.customSchemes.push([t,e])}function fze(){Hr.scanner=ize(Hr.customSchemes);for(let t=0;t<Hr.tokenQueue.length;t++)Hr.tokenQueue[t][1]({scanner:Hr.scanner});Hr.parser=oze(Hr.scanner.tokens);for(let t=0;t<Hr.pluginQueue.length;t++)Hr.pluginQueue[t][1]({scanner:Hr.scanner,parser:Hr.parser});return Hr.initialized=!0,Hr}function tI(t){return Hr.initialized||fze(),lze(Hr.parser.start,t,vre(Hr.scanner.start,t))}tI.scan=vre;function xre(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new eI(n),i=tI(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var nI="[\0-   ᠎ -\u2029 　]",hze=new RegExp(nI),pze=new RegExp(`${nI}$`),mze=new RegExp(nI,"g");function gze(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function vze(t){return new Yr({key:new yi("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=Ine(n.doc,[...e]);if(Hne(l).forEach(({newRange:u})=>{const d=a$e(r.doc,u,h=>h.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const h=r.doc.textBetween(u.from,u.to," "," ");if(!pze.test(h))return;f=d[0],p=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&p){const h=p.split(hze).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const v=tI(m).map(y=>y.toObject(t.defaultProtocol));if(!gze(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>t.validate(y.value)).filter(y=>t.shouldAutoLink(y.value)).forEach(y=>{UD(y.from,y.to,r.doc).some(b=>b.mark.type===t.type)||o.addMark(y.from,y.to,t.type.create({href:y.href}))})}}),!!o.steps.length)return o}})}function yze(t){return new Yr({key:new yi("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;o=f.find(p=>p.nodeName==="A")}if(!o)return!1;const l=Une(e.state,t.type.name),c=(i=o?.href)!=null?i:l.href,u=(s=o?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&c?(window.open(c,u),!0):!1}}})}function xze(t){return new Yr({key:new yi("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const u=xre(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!u||i!==void 0&&!i(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Ff(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(mze,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var rI=Tu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){kU(t);return}kU(t.scheme,t.optionalSlashes)})},onDestroy(){dze()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ff(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Ff(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ff(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Rr(this.options.HTMLAttributes,t),0]:["a",Rr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ff(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Ff(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[nf({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=xre(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Ff(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(vze({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ff(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(yze({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(xze({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),bze=rI,wze=Object.defineProperty,Nze=(t,e)=>{for(var n in e)wze(t,n,{get:e[n],enumerable:!0})},Sze="listItem",TU="textStyle",OU=/^\s*([-+*])\s$/,bre=hs.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Rr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Sze,this.editor.getAttributes(TU)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=jg({find:OU,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jg({find:OU,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TU),editor:this.editor})),[t]}}),wre=hs.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Rr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),l=e.parseChildren(o);n.push(...l)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>KD(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),jze={};Nze(jze,{findListItemPos:()=>_b,getNextListDepth:()=>iI,handleBackspace:()=>cP,handleDelete:()=>uP,hasListBefore:()=>Nre,hasListItemAfter:()=>_ze,hasListItemBefore:()=>Sre,listItemHasSubList:()=>jre,nextListIsDeeper:()=>_re,nextListIsHigher:()=>Ere});var _b=(t,e)=>{const{$from:n}=e.selection,r=$i(t,e.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},iI=(t,e)=>{const n=_b(t,e);if(!n)return!1;const[,r]=m$e(e,t,n.$pos.pos+4);return r},Nre=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Sre=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},jre=(t,e,n)=>{if(!n)return!1;const r=$i(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},cP=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!tf(t.state,e)&&Nre(t.state,e,n)){const{$anchor:l}=t.state.selection,c=t.state.doc.resolve(l.before()-1),u=[];c.node().descendants((p,h)=>{p.type.name===e&&u.push({node:p,pos:h})});const d=u.at(-1);if(!d)return!1;const f=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},f.end()).joinForward().run()}if(!tf(t.state,e)||!x$e(t.state))return!1;const r=_b(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=jre(e,t.state,s);return Sre(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},_re=(t,e)=>{const n=iI(t,e),r=_b(t,e);return!r||!n?!1:n>r.depth},Ere=(t,e)=>{const n=iI(t,e),r=_b(t,e);return!r||!n?!1:n<r.depth},uP=(t,e)=>{if(!tf(t.state,e)||!y$e(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:_re(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Ere(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},_ze=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},Are=Ar.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&uP(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&uP(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&cP(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&cP(t,n,r)&&(e=!0)}),e}}}}),PU=/^(\s*)(\d+)\.\s+(.*)$/,Eze=/^\s/;function Aze(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(PU);if(!s)break;const[,o,l,c]=s,u=o.length;let d=c,f=n+1;const p=[i];for(;f<t.length;){const h=t[f];if(h.match(PU))break;if(h.trim()==="")p.push(h),d+=`
`,f+=1;else if(h.match(Eze))p.push(h),d+=`
${h.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(l,10),content:d.trim(),raw:p.join(`
`)}),r=f,n=f}return[e,r]}function Cre(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const d=l.slice(1).join(`
`).trim();if(d){const h=n.blockTokens(d);u.push(...h)}let f=s+1;const p=[];for(;f<t.length&&t[f].indent>e;)p.push(t[f]),f+=1;if(p.length>0){const h=Math.min(...p.map(g=>g.indent)),m=Cre(p,h,n);u.push({type:"list",ordered:!0,start:p[0].number,items:m,raw:p.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=f}else s+=1}return i}function Cze(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var kze="listItem",MU="textStyle",RU=/^(\d+)\.\s$/,kre=hs.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Rr(this.options.HTMLAttributes,n),0]:["ol",Rr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?Cze(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=Aze(i);if(s.length===0)return;const l=Cre(s,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:l,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kze,this.editor.getAttributes(MU)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=jg({find:RU,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jg({find:RU,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(MU)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Tze=/^\s*(\[([( |x])?\])\s$/,Oze=hs.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Rr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return KD(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),u=d=>{var f,p;l.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,l.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",d=>d.preventDefault()),l.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const h=n();if(typeof h!="number")return!1;const m=p.doc.nodeAt(h);return p.setNodeMarkup(h,void 0,{...m?.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,c),Object.entries(e).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:c,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,l.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[jg({find:Tze,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Pze=hs.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Rr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=Q5(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=Q5(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ar.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(bre.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(wre.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Are.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(kre.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Oze.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Pze.configure(this.options.taskList)),t}});var Mze=hs.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Rr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Rze=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Dze=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ize=Tu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Rr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gh({find:Rze,type:this.type})]},addPasteRules(){return[nf({find:Dze,type:this.type})]}}),Lze=hs.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Tre=Tu.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Rr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Fze=Tre;function Bze(t={}){return new Yr({view(e){return new $ze(e,t)}})}class $ze{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*l;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),p=f.width/c.offsetWidth,h=f.height/c.offsetHeight;u=f.left-c.scrollLeft*p,d=f.top-c.scrollTop*h}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-d)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=kte(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class gi extends cn{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return gi.valid(r)?new gi(r):cn.near(r)}content(){return bt.empty}eq(e){return e instanceof gi&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new gi(e.resolve(n.pos))}getBookmark(){return new sI(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!zze(e)||!qze(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&gi.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let c=e.doc.resolve(i);if(gi.valid(c))return c}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Jt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(gi.valid(l))return l}return null}}}gi.prototype.visible=!1;gi.findFrom=gi.findGapCursorFrom;cn.jsonID("gapcursor",gi);class sI{constructor(e){this.pos=e}map(e){return new sI(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return gi.valid(n)?new gi(n):cn.near(n)}}function Ore(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function zze(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Ore(i.type))return!0;if(i.inlineContent)return!1}}return!0}function qze(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Ore(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Uze(){return new Yr({props:{decorations:Kze,createSelectionBetween(t,e,n){return e.pos==n.pos&&gi.valid(n)?new gi(n):null},handleClick:Vze,handleKeyDown:Hze,handleDOMEvents:{beforeinput:Wze}}})}const Hze=DD({ArrowLeft:$0("horiz",-1),ArrowRight:$0("horiz",1),ArrowUp:$0("vert",-1),ArrowDown:$0("vert",1)});function $0(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,c=o.empty;if(o instanceof Qt){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=gi.findGapCursorFrom(l,e,c);return u?(i&&i(r.tr.setSelection(new gi(u))),!0):!1}}function Vze(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!gi.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Jt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new gi(r))),!0)}function Wze(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof gi))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ze.empty;for(let o=r.length-1;o>=0;o--)i=Ze.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new bt(i,0,0));return s.setSelection(Qt.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Kze(t){if(!(t.selection instanceof gi))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Or.create(t.doc,[Zi.widget(t.selection.head,e,{key:"gapcursor"})])}var VN=200,ds=function(){};ds.prototype.append=function(e){return e.length?(e=ds.from(e),!this.length&&e||e.length<VN&&this.leafAppend(e)||this.length<VN&&e.leafPrepend(this)||this.appendInner(e)):this};ds.prototype.prepend=function(e){return e.length?ds.from(e).append(this):this};ds.prototype.appendInner=function(e){return new Gze(this,e)};ds.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ds.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ds.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ds.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ds.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};ds.from=function(e){return e instanceof ds?e:e&&e.length?new Pre(e):ds.empty};var Pre=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=VN)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=VN)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(ds);ds.empty=new Pre([]);var Gze=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ds);const Yze=500;class fl{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,c,u=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),s=i.maps.length),s--,d.push(f);return}if(i){d.push(new nd(f.map));let h=f.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new nd(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(s)):f.selection,c=new fl(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new nd(e.mapping.maps[d],f,n),h;(h=c&&c.merge(p))&&(p=h,d?s.pop():l=l.slice(0,l.length-1)),s.push(p),n&&(o++,n=void 0),i||(c=p)}let u=o-r.depth;return u>Jze&&(l=Xze(l,u),o-=u),new fl(l.append(s),o)}remapping(e,n){let r=new Rx;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new fl(this.items.append(e.map(n=>new nd(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let c=n;this.items.forEach(p=>{let h=s.getMirror(--c);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),v=p.selection&&p.selection.map(s.slice(c+1,h));v&&l++,r.push(new nd(m,g,v))}else r.push(new nd(m))},i);let u=[];for(let p=n;p<o;p++)u.push(new nd(s.maps[p]));let d=this.items.slice(0,i).append(u).append(r),f=new fl(d,l);return f.emptyItemCount()>Yze&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let f=new nd(u.invert(),c,d),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else o.map&&r--},this.items.length,0),new fl(ds.from(i.reverse()),s)}}fl.empty=new fl(ds.empty,0);function Xze(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let nd=class Mre{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Mre(n.getMap().invert(),n,this.selection)}}};class dd{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Jze=20;function Zze(t,e,n,r){let i=n.getMeta(Sh),s;if(i)return i.historyState;n.getMeta(t7e)&&(t=new dd(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Sh))return o.getMeta(Sh).redo?new dd(t.done.addTransform(n,void 0,r,x1(e)),t.undone,DU(n.mapping.maps),t.prevTime,t.prevComposition):new dd(t.done,t.undone.addTransform(n,void 0,r,x1(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Qze(n,t.prevRanges)),u=o?Bk(t.prevRanges,n.mapping):DU(n.mapping.maps);return new dd(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,x1(e)),fl.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new dd(t.done.rebased(n,s),t.undone.rebased(n,s),Bk(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new dd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Bk(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Qze(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function DU(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Bk(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function e7e(t,e,n){let r=x1(e),i=Sh.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new dd(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Sh,{redo:n,historyState:c})}let $k=!1,IU=null;function x1(t){let e=t.plugins;if(IU!=e){$k=!1,IU=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){$k=!0;break}}return $k}const Sh=new yi("history"),t7e=new yi("closeHistory");function n7e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yr({key:Sh,state:{init(){return new dd(fl.empty,fl.empty,null,0,-1)},apply(e,n,r){return Zze(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Dre:r=="historyRedo"?Ire:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Rre(t,e){return(n,r)=>{let i=Sh.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=e7e(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Dre=Rre(!1,!0),Ire=Rre(!0,!0);Ar.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Yr({key:new yi("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(l,c);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,c=s-r,u=l-c,d=l;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>r)}})]}});var r7e=Ar.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Bze(this.options)]}});Ar.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Yr({key:new yi("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return Or.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Zi.node(u,u+c.nodeSize,{class:this.options.className}))}),Or.create(t,s)}}})]}});var i7e=Ar.create({name:"gapCursor",addProseMirrorPlugins(){return[Uze()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=mr(Xt(t,"allowGapCursor",n)))!=null?e:null}}}),s7e=Ar.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yr({key:new yi("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,u=!o.isLeaf&&Bj(o);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=Zi.node(l,l+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Or.create(t,i)}}})]}});Ar.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Yr({key:new yi("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Vne(n.selection)||t.view.dragging?null:Or.create(n.doc,[Zi.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function LU({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var a7e=Ar.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new yi(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new Yr({key:e,appendTransaction:(i,s,o)=>{const{doc:l,tr:c,schema:u}=o,d=e.getState(o),f=l.content.size,p=u.nodes[n];if(d)return c.insert(f,p.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!LU({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged)return s;const o=i.doc.lastChild;return!LU({node:o,types:r})}}})]}}),o7e=Ar.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Dre(t,e),redo:()=>({state:t,dispatch:e})=>Ire(t,e)}},addProseMirrorPlugins(){return[n7e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),l7e=Ar.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(R8e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(k8e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(bre.configure(this.options.bulletList)),this.options.code!==!1&&i.push(L8e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(ure.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(z8e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(r7e.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(i7e.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(q8e.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(U8e.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(o7e.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(H8e.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Y8e.configure(this.options.italic)),this.options.listItem!==!1&&i.push(wre.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Are.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(rI.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(kre.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Mze.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Ize.configure(this.options.strike)),this.options.text!==!1&&i.push(Lze.configure(this.options.text)),this.options.underline!==!1&&i.push(Tre.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(a7e.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Lre=l7e,c7e=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Fre=hs.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Rr(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,i,s,o;const l=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",c=(i=(r=t.attrs)==null?void 0:r.alt)!=null?i:"",u=(o=(s=t.attrs)==null?void 0:s.title)!=null?o:"";return u?`![${c}](${l} "${u}")`:`![${c}](${l})`},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[sre({find:c7e,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),u7e=Fre,Bre=Ar.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),d7e=Bre,f7e=20,$re=(t,e=0)=>{const n=[];return!t.children.length||e>f7e||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...$re(r,e+1))}),n},h7e=t=>{if(!t.children.length)return;const e=$re(t);e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},aI=Tu.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&h7e(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Rr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),p7e=Ar.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),l=s.slice(1).join(":").trim();if(o==="background-color")return l.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),oI=Ar.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),l=s.slice(1).join(":").trim();if(o==="color")return l.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),m7e=Ar.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),g7e=Ar.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),v7e=Ar.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Ar.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(p7e.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(oI.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(m7e.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(g7e.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(v7e.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(aI.configure(this.options.textStyle)),t}});var y7e=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,x7e=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,b7e=Tu.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Rr(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const s=i[2].trim(),o=n.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:o}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Gh({find:y7e,type:this.type})]},addPasteRules(){return[nf({find:x7e,type:this.type})]}}),zk,FU;function w7e(){if(FU)return zk;FU=1;function t(me){return me instanceof Map?me.clear=me.delete=me.set=function(){throw new Error("map is read-only")}:me instanceof Set&&(me.add=me.clear=me.delete=function(){throw new Error("set is read-only")}),Object.freeze(me),Object.getOwnPropertyNames(me).forEach(Y=>{const Ce=me[Y],ot=typeof Ce;(ot==="object"||ot==="function")&&!Object.isFrozen(Ce)&&t(Ce)}),me}class e{constructor(Y){Y.data===void 0&&(Y.data={}),this.data=Y.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(me){return me.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(me,...Y){const Ce=Object.create(null);for(const ot in me)Ce[ot]=me[ot];return Y.forEach(function(ot){for(const mn in ot)Ce[mn]=ot[mn]}),Ce}const i="</span>",s=me=>!!me.scope,o=(me,{prefix:Y})=>{if(me.startsWith("language:"))return me.replace("language:","language-");if(me.includes(".")){const Ce=me.split(".");return[`${Y}${Ce.shift()}`,...Ce.map((ot,mn)=>`${ot}${"_".repeat(mn+1)}`)].join(" ")}return`${Y}${me}`};class l{constructor(Y,Ce){this.buffer="",this.classPrefix=Ce.classPrefix,Y.walk(this)}addText(Y){this.buffer+=n(Y)}openNode(Y){if(!s(Y))return;const Ce=o(Y.scope,{prefix:this.classPrefix});this.span(Ce)}closeNode(Y){s(Y)&&(this.buffer+=i)}value(){return this.buffer}span(Y){this.buffer+=`<span class="${Y}">`}}const c=(me={})=>{const Y={children:[]};return Object.assign(Y,me),Y};class u{constructor(){this.rootNode=c(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Y){this.top.children.push(Y)}openNode(Y){const Ce=c({scope:Y});this.add(Ce),this.stack.push(Ce)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Y){return this.constructor._walk(Y,this.rootNode)}static _walk(Y,Ce){return typeof Ce=="string"?Y.addText(Ce):Ce.children&&(Y.openNode(Ce),Ce.children.forEach(ot=>this._walk(Y,ot)),Y.closeNode(Ce)),Y}static _collapse(Y){typeof Y!="string"&&Y.children&&(Y.children.every(Ce=>typeof Ce=="string")?Y.children=[Y.children.join("")]:Y.children.forEach(Ce=>{u._collapse(Ce)}))}}class d extends u{constructor(Y){super(),this.options=Y}addText(Y){Y!==""&&this.add(Y)}startScope(Y){this.openNode(Y)}endScope(){this.closeNode()}__addSublanguage(Y,Ce){const ot=Y.root;Ce&&(ot.scope=`language:${Ce}`),this.add(ot)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(me){return me?typeof me=="string"?me:me.source:null}function p(me){return g("(?=",me,")")}function h(me){return g("(?:",me,")*")}function m(me){return g("(?:",me,")?")}function g(...me){return me.map(Ce=>f(Ce)).join("")}function v(me){const Y=me[me.length-1];return typeof Y=="object"&&Y.constructor===Object?(me.splice(me.length-1,1),Y):{}}function y(...me){return"("+(v(me).capture?"":"?:")+me.map(ot=>f(ot)).join("|")+")"}function b(me){return new RegExp(me.toString()+"|").exec("").length-1}function N(me,Y){const Ce=me&&me.exec(Y);return Ce&&Ce.index===0}const S=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function E(me,{joinWith:Y}){let Ce=0;return me.map(ot=>{Ce+=1;const mn=Ce;let gt=f(ot),lt="";for(;gt.length>0;){const ft=S.exec(gt);if(!ft){lt+=gt;break}lt+=gt.substring(0,ft.index),gt=gt.substring(ft.index+ft[0].length),ft[0][0]==="\\"&&ft[1]?lt+="\\"+String(Number(ft[1])+mn):(lt+=ft[0],ft[0]==="("&&Ce++)}return lt}).map(ot=>`(${ot})`).join(Y)}const C=/\b\B/,T="[a-zA-Z]\\w*",_="[a-zA-Z_]\\w*",j="\\b\\d+(\\.\\d+)?",P="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",k="\\b(0b[01]+)",O="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",M=(me={})=>{const Y=/^#![ ]*\//;return me.binary&&(me.begin=g(Y,/.*\b/,me.binary,/\b.*/)),r({scope:"meta",begin:Y,end:/$/,relevance:0,"on:begin":(Ce,ot)=>{Ce.index!==0&&ot.ignoreMatch()}},me)},I={begin:"\\\\[\\s\\S]",relevance:0},B={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[I]},U={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[I]},D={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},z=function(me,Y,Ce={}){const ot=r({scope:"comment",begin:me,end:Y,contains:[]},Ce);ot.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const mn=y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return ot.contains.push({begin:g(/[ ]+/,"(",mn,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),ot},H=z("//","$"),ee=z("/\\*","\\*/"),ae=z("#","$"),F={scope:"number",begin:j,relevance:0},q={scope:"number",begin:P,relevance:0},Z={scope:"number",begin:k,relevance:0},te={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[I,{begin:/\[/,end:/\]/,relevance:0,contains:[I]}]},ce={scope:"title",begin:T,relevance:0},ue={scope:"title",begin:_,relevance:0},ve={begin:"\\.\\s*"+_,relevance:0};var pe=Object.freeze({__proto__:null,APOS_STRING_MODE:B,BACKSLASH_ESCAPE:I,BINARY_NUMBER_MODE:Z,BINARY_NUMBER_RE:k,COMMENT:z,C_BLOCK_COMMENT_MODE:ee,C_LINE_COMMENT_MODE:H,C_NUMBER_MODE:q,C_NUMBER_RE:P,END_SAME_AS_BEGIN:function(me){return Object.assign(me,{"on:begin":(Y,Ce)=>{Ce.data._beginMatch=Y[1]},"on:end":(Y,Ce)=>{Ce.data._beginMatch!==Y[1]&&Ce.ignoreMatch()}})},HASH_COMMENT_MODE:ae,IDENT_RE:T,MATCH_NOTHING_RE:C,METHOD_GUARD:ve,NUMBER_MODE:F,NUMBER_RE:j,PHRASAL_WORDS_MODE:D,QUOTE_STRING_MODE:U,REGEXP_MODE:te,RE_STARTERS_RE:O,SHEBANG:M,TITLE_MODE:ce,UNDERSCORE_IDENT_RE:_,UNDERSCORE_TITLE_MODE:ue});function xe(me,Y){me.input[me.index-1]==="."&&Y.ignoreMatch()}function X(me,Y){me.className!==void 0&&(me.scope=me.className,delete me.className)}function Se(me,Y){Y&&me.beginKeywords&&(me.begin="\\b("+me.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",me.__beforeBegin=xe,me.keywords=me.keywords||me.beginKeywords,delete me.beginKeywords,me.relevance===void 0&&(me.relevance=0))}function W(me,Y){Array.isArray(me.illegal)&&(me.illegal=y(...me.illegal))}function G(me,Y){if(me.match){if(me.begin||me.end)throw new Error("begin & end are not supported with match");me.begin=me.match,delete me.match}}function _e(me,Y){me.relevance===void 0&&(me.relevance=1)}const Qe=(me,Y)=>{if(!me.beforeMatch)return;if(me.starts)throw new Error("beforeMatch cannot be used with starts");const Ce=Object.assign({},me);Object.keys(me).forEach(ot=>{delete me[ot]}),me.keywords=Ce.keywords,me.begin=g(Ce.beforeMatch,p(Ce.begin)),me.starts={relevance:0,contains:[Object.assign(Ce,{endsParent:!0})]},me.relevance=0,delete Ce.beforeMatch},ze=["of","and","for","in","not","or","if","then","parent","list","value"],Re="keyword";function se(me,Y,Ce=Re){const ot=Object.create(null);return typeof me=="string"?mn(Ce,me.split(" ")):Array.isArray(me)?mn(Ce,me):Object.keys(me).forEach(function(gt){Object.assign(ot,se(me[gt],Y,gt))}),ot;function mn(gt,lt){Y&&(lt=lt.map(ft=>ft.toLowerCase())),lt.forEach(function(ft){const _t=ft.split("|");ot[_t[0]]=[gt,ge(_t[0],_t[1])]})}}function ge(me,Y){return Y?Number(Y):Ne(me)?0:1}function Ne(me){return ze.includes(me.toLowerCase())}const De={},Le=me=>{console.error(me)},Pe=(me,...Y)=>{console.log(`WARN: ${me}`,...Y)},qe=(me,Y)=>{De[`${me}/${Y}`]||(console.log(`Deprecated as of ${me}. ${Y}`),De[`${me}/${Y}`]=!0)},ut=new Error;function it(me,Y,{key:Ce}){let ot=0;const mn=me[Ce],gt={},lt={};for(let ft=1;ft<=Y.length;ft++)lt[ft+ot]=mn[ft],gt[ft+ot]=!0,ot+=b(Y[ft-1]);me[Ce]=lt,me[Ce]._emit=gt,me[Ce]._multi=!0}function pt(me){if(Array.isArray(me.begin)){if(me.skip||me.excludeBegin||me.returnBegin)throw Le("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ut;if(typeof me.beginScope!="object"||me.beginScope===null)throw Le("beginScope must be object"),ut;it(me,me.begin,{key:"beginScope"}),me.begin=E(me.begin,{joinWith:""})}}function It(me){if(Array.isArray(me.end)){if(me.skip||me.excludeEnd||me.returnEnd)throw Le("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ut;if(typeof me.endScope!="object"||me.endScope===null)throw Le("endScope must be object"),ut;it(me,me.end,{key:"endScope"}),me.end=E(me.end,{joinWith:""})}}function mt(me){me.scope&&typeof me.scope=="object"&&me.scope!==null&&(me.beginScope=me.scope,delete me.scope)}function yn(me){mt(me),typeof me.beginScope=="string"&&(me.beginScope={_wrap:me.beginScope}),typeof me.endScope=="string"&&(me.endScope={_wrap:me.endScope}),pt(me),It(me)}function pn(me){function Y(lt,ft){return new RegExp(f(lt),"m"+(me.case_insensitive?"i":"")+(me.unicodeRegex?"u":"")+(ft?"g":""))}class Ce{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ft,_t){_t.position=this.position++,this.matchIndexes[this.matchAt]=_t,this.regexes.push([_t,ft]),this.matchAt+=b(ft)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ft=this.regexes.map(_t=>_t[1]);this.matcherRe=Y(E(ft,{joinWith:"|"}),!0),this.lastIndex=0}exec(ft){this.matcherRe.lastIndex=this.lastIndex;const _t=this.matcherRe.exec(ft);if(!_t)return null;const ln=_t.findIndex((Wn,or)=>or>0&&Wn!==void 0),Ut=this.matchIndexes[ln];return _t.splice(0,ln),Object.assign(_t,Ut)}}class ot{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ft){if(this.multiRegexes[ft])return this.multiRegexes[ft];const _t=new Ce;return this.rules.slice(ft).forEach(([ln,Ut])=>_t.addRule(ln,Ut)),_t.compile(),this.multiRegexes[ft]=_t,_t}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ft,_t){this.rules.push([ft,_t]),_t.type==="begin"&&this.count++}exec(ft){const _t=this.getMatcher(this.regexIndex);_t.lastIndex=this.lastIndex;let ln=_t.exec(ft);if(this.resumingScanAtSamePosition()&&!(ln&&ln.index===this.lastIndex)){const Ut=this.getMatcher(0);Ut.lastIndex=this.lastIndex+1,ln=Ut.exec(ft)}return ln&&(this.regexIndex+=ln.position+1,this.regexIndex===this.count&&this.considerAll()),ln}}function mn(lt){const ft=new ot;return lt.contains.forEach(_t=>ft.addRule(_t.begin,{rule:_t,type:"begin"})),lt.terminatorEnd&&ft.addRule(lt.terminatorEnd,{type:"end"}),lt.illegal&&ft.addRule(lt.illegal,{type:"illegal"}),ft}function gt(lt,ft){const _t=lt;if(lt.isCompiled)return _t;[X,G,yn,Qe].forEach(Ut=>Ut(lt,ft)),me.compilerExtensions.forEach(Ut=>Ut(lt,ft)),lt.__beforeBegin=null,[Se,W,_e].forEach(Ut=>Ut(lt,ft)),lt.isCompiled=!0;let ln=null;return typeof lt.keywords=="object"&&lt.keywords.$pattern&&(lt.keywords=Object.assign({},lt.keywords),ln=lt.keywords.$pattern,delete lt.keywords.$pattern),ln=ln||/\w+/,lt.keywords&&(lt.keywords=se(lt.keywords,me.case_insensitive)),_t.keywordPatternRe=Y(ln,!0),ft&&(lt.begin||(lt.begin=/\B|\b/),_t.beginRe=Y(_t.begin),!lt.end&&!lt.endsWithParent&&(lt.end=/\B|\b/),lt.end&&(_t.endRe=Y(_t.end)),_t.terminatorEnd=f(_t.end)||"",lt.endsWithParent&&ft.terminatorEnd&&(_t.terminatorEnd+=(lt.end?"|":"")+ft.terminatorEnd)),lt.illegal&&(_t.illegalRe=Y(lt.illegal)),lt.contains||(lt.contains=[]),lt.contains=[].concat(...lt.contains.map(function(Ut){return en(Ut==="self"?lt:Ut)})),lt.contains.forEach(function(Ut){gt(Ut,_t)}),lt.starts&&gt(lt.starts,ft),_t.matcher=mn(_t),_t}if(me.compilerExtensions||(me.compilerExtensions=[]),me.contains&&me.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return me.classNameAliases=r(me.classNameAliases||{}),gt(me)}function Ct(me){return me?me.endsWithParent||Ct(me.starts):!1}function en(me){return me.variants&&!me.cachedVariants&&(me.cachedVariants=me.variants.map(function(Y){return r(me,{variants:null},Y)})),me.cachedVariants?me.cachedVariants:Ct(me)?r(me,{starts:me.starts?r(me.starts):null}):Object.isFrozen(me)?r(me):me}var qn="11.11.1";class Vt extends Error{constructor(Y,Ce){super(Y),this.name="HTMLInjectionError",this.html=Ce}}const fn=n,nn=r,vr=Symbol("nomatch"),ar=7,on=function(me){const Y=Object.create(null),Ce=Object.create(null),ot=[];let mn=!0;const gt="Could not find the language '{}', did you forget to load/include a language module?",lt={disableAutodetect:!0,name:"Plain text",contains:[]};let ft={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function _t(at){return ft.noHighlightRe.test(at)}function ln(at){let zt=at.className+" ";zt+=at.parentNode?at.parentNode.className:"";const Dn=ft.languageDetectRe.exec(zt);if(Dn){const lr=Gs(Dn[1]);return lr||(Pe(gt.replace("{}",Dn[1])),Pe("Falling back to no-highlight mode for this block.",at)),lr?Dn[1]:"no-highlight"}return zt.split(/\s+/).find(lr=>_t(lr)||Gs(lr))}function Ut(at,zt,Dn){let lr="",Xr="";typeof zt=="object"?(lr=at,Dn=zt.ignoreIllegals,Xr=zt.language):(qe("10.7.0","highlight(lang, code, ...args) has been deprecated."),qe("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Xr=at,lr=zt),Dn===void 0&&(Dn=!0);const ns={code:lr,language:Xr};ms("before:highlight",ns);const po=ns.result?ns.result:Wn(ns.language,ns.code,Dn);return po.code=ns.code,ms("after:highlight",po),po}function Wn(at,zt,Dn,lr){const Xr=Object.create(null);function ns(wt,Pt){return wt.keywords[Pt]}function po(){if(!tn.keywords){bi.addText(dr);return}let wt=0;tn.keywordPatternRe.lastIndex=0;let Pt=tn.keywordPatternRe.exec(dr),bn="";for(;Pt;){bn+=dr.substring(wt,Pt.index);const jt=xi.case_insensitive?Pt[0].toLowerCase():Pt[0],Ti=ns(tn,jt);if(Ti){const[Ia,Jg]=Ti;if(bi.addText(bn),bn="",Xr[jt]=(Xr[jt]||0)+1,Xr[jt]<=ar&&(Du+=Jg),Ia.startsWith("_"))bn+=Pt[0];else{const Zg=xi.classNameAliases[Ia]||Ia;Ys(Pt[0],Zg)}}else bn+=Pt[0];wt=tn.keywordPatternRe.lastIndex,Pt=tn.keywordPatternRe.exec(dr)}bn+=dr.substring(wt),bi.addText(bn)}function $r(){if(dr==="")return;let wt=null;if(typeof tn.subLanguage=="string"){if(!Y[tn.subLanguage]){bi.addText(dr);return}wt=Wn(tn.subLanguage,dr,!0,Ru[tn.subLanguage]),Ru[tn.subLanguage]=wt._top}else wt=ki(dr,tn.subLanguage.length?tn.subLanguage:null);tn.relevance>0&&(Du+=wt.relevance),bi.__addSublanguage(wt._emitter,wt.language)}function rs(){tn.subLanguage!=null?$r():po(),dr=""}function Ys(wt,Pt){wt!==""&&(bi.startScope(Pt),bi.addText(wt),bi.endScope())}function mo(wt,Pt){let bn=1;const jt=Pt.length-1;for(;bn<=jt;){if(!wt._emit[bn]){bn++;continue}const Ti=xi.classNameAliases[wt[bn]]||wt[bn],Ia=Pt[bn];Ti?Ys(Ia,Ti):(dr=Ia,po(),dr=""),bn++}}function Dl(wt,Pt){return wt.scope&&typeof wt.scope=="string"&&bi.openNode(xi.classNameAliases[wt.scope]||wt.scope),wt.beginScope&&(wt.beginScope._wrap?(Ys(dr,xi.classNameAliases[wt.beginScope._wrap]||wt.beginScope._wrap),dr=""):wt.beginScope._multi&&(mo(wt.beginScope,Pt),dr="")),tn=Object.create(wt,{parent:{value:tn}}),tn}function ha(wt,Pt,bn){let jt=N(wt.endRe,bn);if(jt){if(wt["on:end"]){const Ti=new e(wt);wt["on:end"](Pt,Ti),Ti.isMatchIgnored&&(jt=!1)}if(jt){for(;wt.endsParent&&wt.parent;)wt=wt.parent;return wt}}if(wt.endsWithParent)return ha(wt.parent,Pt,bn)}function _c(wt){return tn.matcher.regexIndex===0?(dr+=wt[0],1):(go=!0,0)}function ti(wt){const Pt=wt[0],bn=wt.rule,jt=new e(bn),Ti=[bn.__beforeBegin,bn["on:begin"]];for(const Ia of Ti)if(Ia&&(Ia(wt,jt),jt.isMatchIgnored))return _c(Pt);return bn.skip?dr+=Pt:(bn.excludeBegin&&(dr+=Pt),rs(),!bn.returnBegin&&!bn.excludeBegin&&(dr=Pt)),Dl(bn,wt),bn.returnBegin?0:Pt.length}function bf(wt){const Pt=wt[0],bn=zt.substring(wt.index),jt=ha(tn,wt,bn);if(!jt)return vr;const Ti=tn;tn.endScope&&tn.endScope._wrap?(rs(),Ys(Pt,tn.endScope._wrap)):tn.endScope&&tn.endScope._multi?(rs(),mo(tn.endScope,wt)):Ti.skip?dr+=Pt:(Ti.returnEnd||Ti.excludeEnd||(dr+=Pt),rs(),Ti.excludeEnd&&(dr=Pt));do tn.scope&&bi.closeNode(),!tn.skip&&!tn.subLanguage&&(Du+=tn.relevance),tn=tn.parent;while(tn!==jt.parent);return jt.starts&&Dl(jt.starts,wt),Ti.returnEnd?0:Pt.length}function Xg(){const wt=[];for(let Pt=tn;Pt!==xi;Pt=Pt.parent)Pt.scope&&wt.unshift(Pt.scope);wt.forEach(Pt=>bi.openNode(Pt))}let Pu={};function pp(wt,Pt){const bn=Pt&&Pt[0];if(dr+=wt,bn==null)return rs(),0;if(Pu.type==="begin"&&Pt.type==="end"&&Pu.index===Pt.index&&bn===""){if(dr+=zt.slice(Pt.index,Pt.index+1),!mn){const jt=new Error(`0 width match regex (${at})`);throw jt.languageName=at,jt.badRule=Pu.rule,jt}return 1}if(Pu=Pt,Pt.type==="begin")return ti(Pt);if(Pt.type==="illegal"&&!Dn){const jt=new Error('Illegal lexeme "'+bn+'" for mode "'+(tn.scope||"<unnamed>")+'"');throw jt.mode=tn,jt}else if(Pt.type==="end"){const jt=bf(Pt);if(jt!==vr)return jt}if(Pt.type==="illegal"&&bn==="")return dr+=`
`,1;if(Jo>1e5&&Jo>Pt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return dr+=bn,bn.length}const xi=Gs(at);if(!xi)throw Le(gt.replace("{}",at)),new Error('Unknown language: "'+at+'"');const mp=pn(xi);let Mu="",tn=lr||mp;const Ru={},bi=new ft.__emitter(ft);Xg();let dr="",Du=0,Da=0,Jo=0,go=!1;try{if(xi.__emitTokens)xi.__emitTokens(zt,bi);else{for(tn.matcher.considerAll();;){Jo++,go?go=!1:tn.matcher.considerAll(),tn.matcher.lastIndex=Da;const wt=tn.matcher.exec(zt);if(!wt)break;const Pt=zt.substring(Da,wt.index),bn=pp(Pt,wt);Da=wt.index+bn}pp(zt.substring(Da))}return bi.finalize(),Mu=bi.toHTML(),{language:at,value:Mu,relevance:Du,illegal:!1,_emitter:bi,_top:tn}}catch(wt){if(wt.message&&wt.message.includes("Illegal"))return{language:at,value:fn(zt),illegal:!0,relevance:0,_illegalBy:{message:wt.message,index:Da,context:zt.slice(Da-100,Da+100),mode:wt.mode,resultSoFar:Mu},_emitter:bi};if(mn)return{language:at,value:fn(zt),illegal:!1,relevance:0,errorRaised:wt,_emitter:bi,_top:tn};throw wt}}function or(at){const zt={value:fn(at),illegal:!1,relevance:0,_top:lt,_emitter:new ft.__emitter(ft)};return zt._emitter.addText(at),zt}function ki(at,zt){zt=zt||ft.languages||Object.keys(Y);const Dn=or(at),lr=zt.filter(Gs).filter(dp).map(rs=>Wn(rs,at,!1));lr.unshift(Dn);const Xr=lr.sort((rs,Ys)=>{if(rs.relevance!==Ys.relevance)return Ys.relevance-rs.relevance;if(rs.language&&Ys.language){if(Gs(rs.language).supersetOf===Ys.language)return 1;if(Gs(Ys.language).supersetOf===rs.language)return-1}return 0}),[ns,po]=Xr,$r=ns;return $r.secondBest=po,$r}function ps(at,zt,Dn){const lr=zt&&Ce[zt]||Dn;at.classList.add("hljs"),at.classList.add(`language-${lr}`)}function Ws(at){let zt=null;const Dn=ln(at);if(_t(Dn))return;if(ms("before:highlightElement",{el:at,language:Dn}),at.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",at);return}if(at.children.length>0&&(ft.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(at)),ft.throwUnescapedHTML))throw new Vt("One of your code blocks includes unescaped HTML.",at.innerHTML);zt=at;const lr=zt.textContent,Xr=Dn?Ut(lr,{language:Dn,ignoreIllegals:!0}):ki(lr);at.innerHTML=Xr.value,at.dataset.highlighted="yes",ps(at,Dn,Xr.language),at.result={language:Xr.language,re:Xr.relevance,relevance:Xr.relevance},Xr.secondBest&&(at.secondBest={language:Xr.secondBest.language,relevance:Xr.secondBest.relevance}),ms("after:highlightElement",{el:at,result:Xr,text:lr})}function uo(at){ft=nn(ft,at)}const Ma=()=>{fo(),qe("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ra(){fo(),qe("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ks=!1;function fo(){function at(){fo()}if(document.readyState==="loading"){Ks||window.addEventListener("DOMContentLoaded",at,!1),Ks=!0;return}document.querySelectorAll(ft.cssSelector).forEach(Ws)}function ho(at,zt){let Dn=null;try{Dn=zt(me)}catch(lr){if(Le("Language definition for '{}' could not be registered.".replace("{}",at)),mn)Le(lr);else throw lr;Dn=lt}Dn.name||(Dn.name=at),Y[at]=Dn,Dn.rawDefinition=zt.bind(null,me),Dn.aliases&&jc(Dn.aliases,{languageName:at})}function Sc(at){delete Y[at];for(const zt of Object.keys(Ce))Ce[zt]===at&&delete Ce[zt]}function Ou(){return Object.keys(Y)}function Gs(at){return at=(at||"").toLowerCase(),Y[at]||Y[Ce[at]]}function jc(at,{languageName:zt}){typeof at=="string"&&(at=[at]),at.forEach(Dn=>{Ce[Dn.toLowerCase()]=zt})}function dp(at){const zt=Gs(at);return zt&&!zt.disableAutodetect}function yf(at){at["before:highlightBlock"]&&!at["before:highlightElement"]&&(at["before:highlightElement"]=zt=>{at["before:highlightBlock"](Object.assign({block:zt.el},zt))}),at["after:highlightBlock"]&&!at["after:highlightElement"]&&(at["after:highlightElement"]=zt=>{at["after:highlightBlock"](Object.assign({block:zt.el},zt))})}function fp(at){yf(at),ot.push(at)}function hp(at){const zt=ot.indexOf(at);zt!==-1&&ot.splice(zt,1)}function ms(at,zt){const Dn=at;ot.forEach(function(lr){lr[Dn]&&lr[Dn](zt)})}function xf(at){return qe("10.7.0","highlightBlock will be removed entirely in v12.0"),qe("10.7.0","Please use highlightElement now."),Ws(at)}Object.assign(me,{highlight:Ut,highlightAuto:ki,highlightAll:fo,highlightElement:Ws,highlightBlock:xf,configure:uo,initHighlighting:Ma,initHighlightingOnLoad:Ra,registerLanguage:ho,unregisterLanguage:Sc,listLanguages:Ou,getLanguage:Gs,registerAliases:jc,autoDetection:dp,inherit:nn,addPlugin:fp,removePlugin:hp}),me.debugMode=function(){mn=!1},me.safeMode=function(){mn=!0},me.versionString=qn,me.regex={concat:g,lookahead:p,either:y,optional:m,anyNumberOfTimes:h};for(const at in pe)typeof pe[at]=="object"&&t(pe[at]);return Object.assign(me,pe),me},Nt=on({});return Nt.newInstance=()=>on({}),zk=Nt,Nt.HighlightJS=Nt,Nt.default=Nt,zk}var N7e=w7e();const zre=jr(N7e);function qre(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?qre(n.children,r):{text:n.value,classes:r}})}function BU(t){return t.value||t.children||[]}function S7e(t){return!!zre.getLanguage(t)}function $U({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return X5(t,s=>s.type.name===e).forEach(s=>{var o;let l=s.pos+1;const c=s.node.attrs.language||r,u=n.listLanguages(),d=c&&(u.includes(c)||S7e(c)||(o=n.registered)!=null&&o.call(n,c))?BU(n.highlight(c,s.node.textContent)):BU(n.highlightAuto(s.node.textContent));qre(d).forEach(f=>{const p=l+f.text.length;if(f.classes.length){const h=Zi.inline(l,p,{class:f.classes.join(" ")});i.push(h)}l=p})}),Or.create(t,i)}function j7e(t){return typeof t=="function"}function _7e({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>j7e(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Yr({key:new yi("lowlight"),state:{init:(i,{doc:s})=>$U({doc:s,name:t,lowlight:e,defaultLanguage:n}),apply:(i,s,o,l)=>{const c=o.selection.$head.parent.type.name,u=l.selection.$head.parent.type.name,d=X5(o.doc,p=>p.type.name===t),f=X5(l.doc,p=>p.type.name===t);return i.docChanged&&([c,u].includes(t)||f.length!==d.length||i.steps.some(p=>p.from!==void 0&&p.to!==void 0&&d.some(h=>h.pos>=p.from&&h.pos+h.node.nodeSize<=p.to)))?$U({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var E7e=$8e.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],_7e({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}});function A7e(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[E,f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:C.concat([{begin:/\(/,end:/\)/,keywords:S,contains:C.concat(["self"]),relevance:0}]),relevance:0},_={className:"function",begin:"("+o+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(T,_,E,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function C7e(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=A7e(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function k7e(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},s=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,i]};i.contains.push(l);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},p=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=t.SHEBANG({binary:`(${p.join("|")})`,relevance:10}),m={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],v=["true","false"],y={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],N=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],S=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],E=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:v,built_in:[...b,...N,"set","shopt",...S,...E]},contains:[h,t.SHEBANG(),m,f,s,o,y,l,c,u,d,n]}}function T7e(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:y.concat([{begin:/\(/,end:/\)/,keywords:v,contains:y.concat(["self"]),relevance:0}]),relevance:0},N={begin:"("+o+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:h,returnBegin:!0,contains:[t.inherit(p,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(b,N,y,[f,{begin:t.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:f,strings:u,keywords:v}}}function O7e(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+e.optional(i)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},p={className:"title",begin:e.optional(i)+t.IDENT_RE,relevance:0},h=e.optional(i)+t.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},C=[E,f,l,n,t.C_BLOCK_COMMENT_MODE,d,u],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:C.concat([{begin:/\(/,end:/\)/,keywords:S,contains:C.concat(["self"]),relevance:0}]),relevance:0},_={className:"function",begin:"("+o+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:h,returnBegin:!0,contains:[p],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,n,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(T,_,E,C,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function P7e(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:i.concat(s),built_in:e,literal:r},l=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=t.inherit(d,{illegal:/\n/}),p={className:"subst",begin:/\{/,end:/\}/,keywords:o},h=t.inherit(p,{illegal:/\n/}),m={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]},v=t.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});p.contains=[g,m,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.C_BLOCK_COMMENT_MODE],h.contains=[v,m,f,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[u,g,m,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},N=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",S={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+N+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[y,c,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},S]}}const M7e=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),R7e=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],D7e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],I7e=[...R7e,...D7e],L7e=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),F7e=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),B7e=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),$7e=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function z7e(t){const e=t.regex,n=M7e(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+F7e.join("|")+")"},{begin:":(:)?("+B7e.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+$7e.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:L7e.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+I7e.join("|")+")\\b"}]}}function q7e(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function U7e(t){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function H7e(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function V7e(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[r,s,i,o,n,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,f=e.either(c,u,d),p=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:p,className:"attr",starts:{end:/$/,contains:[r,l,s,i,o,n]}}]}}var Jp="[0-9](_*[0-9])*",z0=`\\.(${Jp})`,q0="[0-9a-fA-F](_*[0-9a-fA-F])*",zU={className:"number",variants:[{begin:`(\\b(${Jp})((${z0})|\\.)?|(${z0}))[eE][+-]?(${Jp})[fFdD]?\\b`},{begin:`\\b(${Jp})((${z0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${z0})[fFdD]?\\b`},{begin:`\\b(${Jp})[fFdD]\\b`},{begin:`\\b0[xX]((${q0})\\.?|(${q0})?\\.(${q0}))[pP][+-]?(${Jp})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${q0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Ure(t,e,n){return n===-1?"":t.replace(e,r=>Ure(t,e,n-1))}function W7e(t){const e=t.regex,n="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",r=n+Ure("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),c={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},u={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:c,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[d,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:c,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,zU,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},zU,u]}}const qU="[A-Za-z$_][0-9A-Za-z$_]*",K7e=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],G7e=["true","false","null","undefined","NaN","Infinity"],Hre=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Vre=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Wre=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Y7e=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],X7e=[].concat(Wre,Hre,Vre);function J7e(t){const e=t.regex,n=(z,{after:H})=>{const ee="</"+z[0].slice(1);return z.input.indexOf(ee,H)!==-1},r=qU,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(z,H)=>{const ee=z[0].length+z.index,ae=z.input[ee];if(ae==="<"||ae===","){H.ignoreMatch();return}ae===">"&&(n(z,{after:ee})||H.ignoreMatch());let F;const q=z.input.substring(ee);if(F=q.match(/^\s*=/)){H.ignoreMatch();return}if((F=q.match(/^\s+extends\s+/))&&F.index===0){H.ignoreMatch();return}}},l={$pattern:qU,keyword:K7e,literal:G7e,built_in:X7e,"variable.language":Y7e},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},N=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,{match:/\$\d+/},f];p.contains=N.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(N)});const S=[].concat(b,p.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(S)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:E},T={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},_={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Hre,...Vre]}},j={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},k={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function O(z){return e.concat("(?!",z.join("|"),")")}const M={match:e.concat(/\b/,O([...Wre,"super","import"].map(z=>`${z}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},I={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},B={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:_},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),j,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,b,{match:/\$\d+/},f,_,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},I,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},M,k,T,B,{match:/\$[(.]/}]}}function Z7e(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,i,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Zp="[0-9](_*[0-9])*",U0=`\\.(${Zp})`,H0="[0-9a-fA-F](_*[0-9a-fA-F])*",Q7e={className:"number",variants:[{begin:`(\\b(${Zp})((${U0})|\\.)?|(${U0}))[eE][+-]?(${Zp})[fFdD]?\\b`},{begin:`\\b(${Zp})((${U0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${U0})[fFdD]?\\b`},{begin:`\\b(${Zp})[fFdD]\\b`},{begin:`\\b0[xX]((${H0})\\.?|(${H0})?\\.(${H0}))[pP][+-]?(${Zp})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${H0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function eqe(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(o);const l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(o,{className:"string"}),"self"]}]},u=Q7e,d=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},p=f;return p.variants[1].contains=[f],f.variants[1].contains=[p],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,d,n,r,l,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,t.C_LINE_COMMENT_MODE,d],relevance:0},t.C_LINE_COMMENT_MODE,d,l,c,o,t.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,c]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}const tqe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),nqe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],rqe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],iqe=[...nqe,...rqe],sqe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Kre=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Gre=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),aqe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),oqe=Kre.concat(Gre).sort().reverse();function lqe(t){const e=tqe(t),n=oqe,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",o=[],l=[],c=function(N){return{className:"string",begin:"~?"+N+".*?"+N}},u=function(N,S,E){return{className:N,begin:S,relevance:E}},d={$pattern:/[a-z-]+/,keyword:r,attribute:sqe.join(" ")},f={begin:"\\(",end:"\\)",contains:l,keywords:d,relevance:0};l.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,c("'"),c('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,f,u("variable","@@?"+i,10),u("variable","@\\{"+i+"\\}"),u("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const p=l.concat({begin:/\{/,end:/\}/,contains:o}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(l)},m={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+aqe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:l}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:l,relevance:0}},v={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:p}},y={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,h,u("keyword","all\\b"),u("variable","@\\{"+i+"\\}"),{begin:"\\b("+iqe.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,u("selector-tag",s,0),u("selector-id","#"+s),u("selector-class","\\."+s,0),u("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Kre.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Gre.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:p},{begin:"!important"},e.FUNCTION_DISPATCH]},b={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[y]};return o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,v,b,m,y,h,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function cqe(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},i=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function uqe(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},i={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,i,s,o]}}function dqe(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(u,{contains:[]}),p=t.inherit(d,{contains:[]});u.contains.push(p),d.contains.push(f);let h=[n,c];return[u,d,f,p].forEach(y=>{y.contains=y.contains.concat(h)}),h=h.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,s,u,d,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},i,r,c,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function fqe(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function hqe(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,s,c],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],p=(g,v,y="\\1")=>{const b=y==="\\1"?y:e.concat(y,v);return e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,y,r)},h=(g,v,y)=>e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,y,r),m=[c,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:p("s|tr|y",e.either(...f,{capture:!0}))},{begin:p("s|tr|y","\\(","\\)")},{begin:p("s|tr|y","\\[","\\]")},{begin:p("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=m,o.contains=m,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:m}}function pqe(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=e.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+r},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},c={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=t.inherit(t.APOS_STRING_MODE,{illegal:null}),d=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(c)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(c),"on:begin":(I,B)=>{B.data._beginMatch=I[1]||I[2]},"on:end":(I,B)=>{B.data._beginMatch!==I[1]&&B.ignoreMatch()}},p=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,m={scope:"string",variants:[d,u,f,p]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},v=["false","null","true"],y=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],S={keyword:y,literal:(I=>{const B=[];return I.forEach(U=>{B.push(U),U.toLowerCase()===U?B.push(U.toUpperCase()):B.push(U.toLowerCase())}),B})(v),built_in:b},E=I=>I.map(B=>B.replace(/\|\d+$/,"")),C={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",E(b).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},T=e.concat(r,"\\b(?!\\()"),_={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),T],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,e.concat(/::/,e.lookahead(/(?!class\b)/)),T],scope:{1:"title.class",3:"variable.constant"}},{match:[i,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},j={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},P={relevance:0,begin:/\(/,end:/\)/,keywords:S,contains:[j,o,_,t.C_BLOCK_COMMENT_MODE,m,g,C]},k={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",E(y).join("\\b|"),"|",E(b).join("\\b|"),"\\b)"),r,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[P]};P.contains.push(k);const O=[j,_,t.C_BLOCK_COMMENT_MODE,m,g,C],M={begin:e.concat(/#\[\s*\\?/,e.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:v,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:v,keyword:["new","array"]},contains:["self",...O]},...O,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:S,contains:[M,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},o,k,_,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},C,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:S,contains:["self",M,o,_,t.C_BLOCK_COMMENT_MODE,m,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},m,g]}}function mqe(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function gqe(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function vqe(t){const e=t.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},d={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",h=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,m=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${h}))[eE][+-]?(${p})[jJ]?(?=${m})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${p})[jJ](?=${m})`}]},v={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,g,f,t.HASH_COMMENT_MODE]}]};return u.contains=[f,g,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,v,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,y,f]}]}}function yqe(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function xqe(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function bqe(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=e.concat(r,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[l]}),t.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:o},f={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},p="[1-9](_?[0-9])*|0",h="[0-9](_?[0-9])*",m={className:"number",relevance:0,variants:[{begin:`\\b(${p})(\\.(${h}))?([eE][+-]?(${h})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},C=[f,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:o},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},m,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=C,g.contains=C;const P=[{begin:/^\s*=>/,starts:{end:"$",contains:C}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:C}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(P).concat(u).concat(C)}}function wqe(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),i=e.concat(n,t.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,e.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:l,literal:c,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},s]}}const Nqe=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Sqe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],jqe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],_qe=[...Sqe,...jqe],Eqe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Aqe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Cqe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),kqe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Tqe(t){const e=Nqe(t),n=Cqe,r=Aqe,i="@[a-z-]+",s="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+_qe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+kqe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:Eqe.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function Oqe(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Pqe(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],p=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=d,m=[...u,...c].filter(E=>!d.includes(E)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},v={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={match:e.concat(/\b/,e.either(...h),/\s*\(/),relevance:0,keywords:{built_in:h}};function b(E){return e.concat(/\b/,e.either(...E.map(C=>C.replace(/\s+/,"\\s+"))),/\b/)}const N={scope:"keyword",match:b(p),relevance:0};function S(E,{exceptions:C,when:T}={}){const _=T;return C=C||[],E.map(j=>j.match(/\|\d+$/)||C.includes(j)?j:_(j)?`${j}|0`:j)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:S(m,{when:E=>E.length<3}),literal:s,type:l,built_in:f},contains:[{scope:"type",match:b(o)},N,y,g,r,i,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,v]}}function Yre(t){return t?typeof t=="string"?t:t.source:null}function zv(t){return _r("(?=",t,")")}function _r(...t){return t.map(n=>Yre(n)).join("")}function Mqe(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function ta(...t){return"("+(Mqe(t).capture?"":"?:")+t.map(r=>Yre(r)).join("|")+")"}const lI=t=>_r(/\b/,t,/\w$/.test(t)?/\b/:/\B/),Rqe=["Protocol","Type"].map(lI),UU=["init","self"].map(lI),Dqe=["Any","Self"],qk=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],HU=["false","nil","true"],Iqe=["assignment","associativity","higherThan","left","lowerThan","none","right"],Lqe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],VU=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Xre=ta(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Jre=ta(Xre,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Uk=_r(Xre,Jre,"*"),Zre=ta(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),WN=ta(Zre,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),zl=_r(Zre,WN,"*"),V0=_r(/[A-Z]/,WN,"*"),Fqe=["attached","autoclosure",_r(/convention\(/,ta("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",_r(/objc\(/,zl,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],Bqe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function $qe(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],i={match:[/\./,ta(...Rqe,...UU)],className:{2:"keyword"}},s={match:_r(/\./,ta(...qk)),relevance:0},o=qk.filter(_e=>typeof _e=="string").concat(["_|0"]),l=qk.filter(_e=>typeof _e!="string").concat(Dqe).map(lI),c={variants:[{className:"keyword",match:ta(...l,...UU)}]},u={$pattern:ta(/\b\w+/,/#\w+/),keyword:o.concat(Lqe),literal:HU},d=[i,s,c],f={match:_r(/\./,ta(...VU)),relevance:0},p={className:"built_in",match:_r(/\b/,ta(...VU),/(?=\()/)},h=[f,p],m={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:Uk},{match:`\\.(\\.|${Jre})+`}]},v=[m,g],y="([0-9]_*)+",b="([0-9a-fA-F]_*)+",N={className:"number",relevance:0,variants:[{match:`\\b(${y})(\\.(${y}))?([eE][+-]?(${y}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${y}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},S=(_e="")=>({className:"subst",variants:[{match:_r(/\\/,_e,/[0\\tnr"']/)},{match:_r(/\\/,_e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),E=(_e="")=>({className:"subst",match:_r(/\\/,_e,/[\t ]*(?:[\r\n]|\r\n)/)}),C=(_e="")=>({className:"subst",label:"interpol",begin:_r(/\\/,_e,/\(/),end:/\)/}),T=(_e="")=>({begin:_r(_e,/"""/),end:_r(/"""/,_e),contains:[S(_e),E(_e),C(_e)]}),_=(_e="")=>({begin:_r(_e,/"/),end:_r(/"/,_e),contains:[S(_e),C(_e)]}),j={className:"string",variants:[T(),T("#"),T("##"),T("###"),_(),_("#"),_("##"),_("###")]},P=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],k={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:P},O=_e=>{const Qe=_r(_e,/\//),ze=_r(/\//,_e);return{begin:Qe,end:ze,contains:[...P,{scope:"comment",begin:`#(?!.*${ze})`,end:/$/}]}},M={scope:"regexp",variants:[O("###"),O("##"),O("#"),k]},I={match:_r(/`/,zl,/`/)},B={className:"variable",match:/\$\d+/},U={className:"variable",match:`\\$${WN}+`},D=[I,B,U],z={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:Bqe,contains:[...v,N,j]}]}},H={scope:"keyword",match:_r(/@/,ta(...Fqe),zv(ta(/\(/,/\s+/)))},ee={scope:"meta",match:_r(/@/,zl)},ae=[z,H,ee],F={match:zv(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:_r(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,WN,"+")},{className:"type",match:V0,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:_r(/\s+&\s+/,zv(V0)),relevance:0}]},q={begin:/</,end:/>/,keywords:u,contains:[...r,...d,...ae,m,F]};F.contains.push(q);const Z={match:_r(zl,/\s*:/),keywords:"_|0",relevance:0},te={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",Z,...r,M,...d,...h,...v,N,j,...D,...ae,F]},ce={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,F]},ue={begin:ta(zv(_r(zl,/\s*:/)),zv(_r(zl,/\s+/,zl,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:zl}]},ve={begin:/\(/,end:/\)/,keywords:u,contains:[ue,...r,...d,...v,N,j,...ae,F,te],endsParent:!0,illegal:/["']/},oe={match:[/(func|macro)/,/\s+/,ta(I.match,zl,Uk)],className:{1:"keyword",3:"title.function"},contains:[ce,ve,e],illegal:[/\[/,/%/]},pe={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ce,ve,e],illegal:/\[|%/},xe={match:[/operator/,/\s+/,Uk],className:{1:"keyword",3:"title"}},X={begin:[/precedencegroup/,/\s+/,V0],className:{1:"keyword",3:"title"},contains:[F],keywords:[...Iqe,...HU],end:/}/},Se={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},W={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},G={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,zl,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:u,contains:[ce,...d,{begin:/:/,end:/\{/,keywords:u,contains:[{scope:"title.class.inherited",match:V0},...d],relevance:0}]};for(const _e of j.variants){const Qe=_e.contains.find(Re=>Re.label==="interpol");Qe.keywords=u;const ze=[...d,...h,...v,N,j,...D];Qe.contains=[...ze,{begin:/\(/,end:/\)/,contains:["self",...ze]}]}return{name:"Swift",keywords:u,contains:[...r,oe,pe,Se,W,G,xe,X,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},M,...d,...h,...v,N,j,...D,...ae,F,te]}}const KN="[A-Za-z$_][0-9A-Za-z$_]*",Qre=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],eie=["true","false","null","undefined","NaN","Infinity"],tie=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nie=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rie=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],iie=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],sie=[].concat(rie,tie,nie);function zqe(t){const e=t.regex,n=(z,{after:H})=>{const ee="</"+z[0].slice(1);return z.input.indexOf(ee,H)!==-1},r=KN,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(z,H)=>{const ee=z[0].length+z.index,ae=z.input[ee];if(ae==="<"||ae===","){H.ignoreMatch();return}ae===">"&&(n(z,{after:ee})||H.ignoreMatch());let F;const q=z.input.substring(ee);if(F=q.match(/^\s*=/)){H.ignoreMatch();return}if((F=q.match(/^\s+extends\s+/))&&F.index===0){H.ignoreMatch();return}}},l={$pattern:KN,keyword:Qre,literal:eie,built_in:sie,"variable.language":iie},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},N=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,{match:/\$\d+/},f];p.contains=N.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(N)});const S=[].concat(b,p.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(S)}]),C={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:E},T={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},_={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tie,...nie]}},j={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[C],illegal:/%/},k={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function O(z){return e.concat("(?!",z.join("|"),")")}const M={match:e.concat(/\b/,O([...rie,"super","import"].map(z=>`${z}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},I={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},B={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},C]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[C]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:_},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),j,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,m,g,v,b,{match:/\$\d+/},f,_,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[C,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},I,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[C]},M,k,T,B,{match:/\$[(.]/}]}}function qqe(t){const e=t.regex,n=zqe(t),r=KN,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:KN,keyword:Qre.concat(c),literal:eie,built_in:sie.concat(i),"variable.language":iie},d={className:"meta",begin:"@"+r},f=(g,v,y)=>{const b=g.contains.findIndex(N=>N.label===v);if(b===-1)throw new Error("can not find mode to replace");g.contains.splice(b,1,y)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(d);const p=n.contains.find(g=>g.scope==="attr"),h=Object.assign({},p,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,p,h]),n.contains=n.contains.concat([d,s,o,h]),f(n,"shebang",t.SHEBANG()),f(n,"use_strict",l);const m=n.contains.find(g=>g.label==="func.def");return m.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function Uqe(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,i),/ *#/)},{begin:e.concat(/# */,l,/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,e.either(s,i),/ +/,e.either(o,l),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},f=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),p=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,c,u,d,f,p,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[p]}]}}function Hqe(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,o,i,t.QUOTE_STRING_MODE,c,u,l]}}function Vqe(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=t.inherit(s,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,l,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,c,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function Wqe(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,i]},l=t.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),p={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},m={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},v=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},p,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},m,g,s,o],y=[...v];return y.pop(),y.push(l),h.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:v}}const Kqe={arduino:C7e,bash:k7e,c:T7e,cpp:O7e,csharp:P7e,css:z7e,diff:q7e,go:U7e,graphql:H7e,ini:V7e,java:W7e,javascript:J7e,json:Z7e,kotlin:eqe,less:lqe,lua:cqe,makefile:uqe,markdown:dqe,objectivec:fqe,perl:hqe,php:pqe,"php-template":mqe,plaintext:gqe,python:vqe,"python-repl":yqe,r:xqe,ruby:bqe,rust:wqe,scss:Tqe,shell:Oqe,sql:Pqe,swift:$qe,typescript:qqe,vbnet:Uqe,wasm:Hqe,xml:Vqe,yaml:Wqe},WU={},Gqe="hljs-";function Yqe(t){const e=zre.newInstance();return t&&s(t),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:o,registered:l};function n(c,u,d){const f=d||WU,p=typeof f.prefix=="string"?f.prefix:Gqe;if(!e.getLanguage(c))throw new Error("Unknown language: `"+c+"` is not registered");e.configure({__emitter:Xqe,classPrefix:p});const h=e.highlight(u,{ignoreIllegals:!0,language:c});if(h.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:h.errorRaised});const m=h._emitter.root,g=m.data;return g.language=h.language,g.relevance=h.relevance,m}function r(c,u){const f=(u||WU).subset||i();let p=-1,h=0,m;for(;++p<f.length;){const g=f[p];if(!e.getLanguage(g))continue;const v=n(g,c,u);v.data&&v.data.relevance!==void 0&&v.data.relevance>h&&(h=v.data.relevance,m=v)}return m||{type:"root",children:[],data:{language:void 0,relevance:h}}}function i(){return e.listLanguages()}function s(c,u){if(typeof c=="string")e.registerLanguage(c,u);else{let d;for(d in c)Object.hasOwn(c,d)&&e.registerLanguage(d,c[d])}}function o(c,u){if(typeof c=="string")e.registerAliases(typeof u=="string"?u:[...u],{languageName:c});else{let d;for(d in c)if(Object.hasOwn(c,d)){const f=c[d];e.registerAliases(typeof f=="string"?f:[...f],{languageName:d})}}}function l(c){return!!e.getLanguage(c)}}class Xqe{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(o,l){return l?o+"_".repeat(l):n.options.classPrefix+o}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}var dP,fP;if(typeof WeakMap<"u"){let t=new WeakMap;dP=e=>t.get(e),fP=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;dP=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},fP=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var vi=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==n;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:l,top:c,bottom:u}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,c),right:Math.max(r,l),bottom:Math.max(s,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const l=(t+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(t){return dP(t)||fP(t,Jqe(t))}};function Jqe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Zqe(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let u=0,d=e*n;u<d;u++)r[u]=0;for(let u=0,d=0;u<n;u++){const f=t.child(u);d++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==f.childCount)break;const g=f.child(m),{colspan:v,rowspan:y,colwidth:b}=g.attrs;for(let N=0;N<y;N++){if(N+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:y-N});break}const S=i+N*e;for(let E=0;E<v;E++){r[S+E]==0?r[S+E]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:v-E});const C=b&&b[E];if(C){const T=(S+E)%e*2,_=o[T];_==null||_!=C&&o[T+1]==1?(o[T]=C,o[T+1]=1):_==C&&o[T+1]++}}}i+=v,d+=g.nodeSize}const p=(u+1)*e;let h=0;for(;i<p;)r[i++]==0&&h++;h&&(s||(s=[])).push({type:"missing",row:u,n:h}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const l=new vi(e,n,r,s);let c=!1;for(let u=0;!c&&u<o.length;u+=2)o[u]!=null&&o[u+1]<n&&(c=!0);return c&&Qqe(l,o,t),l}function Zqe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const l=t.child(o);for(let c=0;c<l.childCount;c++){const u=l.child(c);o+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Qqe(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null;const c=o.attrs;for(let u=0;u<c.colspan;u++){const d=(i+u)%t.width,f=e[d*2];f!=null&&(!c.colwidth||c.colwidth[u]!=f)&&((l||(l=eUe(c)))[u]=f)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function eUe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Us(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var md=new yi("selectingCells");function Yg(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function tUe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ml(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Uj(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Yg(e.$head)||nUe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function nUe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function hP(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function rUe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function cI(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function aie(t,e,n){const r=t.node(-1),i=vi.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function Yh(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function oie(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function iUe(t,e,n){const r=Us(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Fr=class Gc extends cn{constructor(e,n=e){const r=e.node(-1),i=vi.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),l=e.node(0),c=i.cellsInRect(o).filter(d=>d!=n.pos-s);c.unshift(n.pos-s);const u=c.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const p=s+d+1;return new Rte(l.resolve(p),l.resolve(p+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(hP(r)&&hP(i)&&cI(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Gc.rowSelection(r,i):s&&this.isColSelection()?Gc.colSelection(r,i):new Gc(r,i)}return Qt.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=vi.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let c=i.top;c<i.bottom;c++){const u=[];for(let d=c*n.width+i.left,f=i.left;f<i.right;f++,d++){const p=n.map[d];if(s[p])continue;s[p]=!0;const h=n.findCell(p);let m=e.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const g=i.left-h.left,v=h.right-i.right;if(g>0||v>0){let y=m.attrs;if(g>0&&(y=Yh(y,0,g)),v>0&&(y=Yh(y,y.colspan-v,v)),h.left<i.left){if(m=m.type.createAndFill(y),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else m=m.type.create(y,m.content)}if(h.top<i.top||h.bottom>i.bottom){const y={...m.attrs,rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)};h.top<i.top?m=m.type.createAndFill(y):m=m.type.create(y,m.content)}u.push(m)}o.push(e.child(c).copy(Ze.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:o;return new bt(Ze.from(l),1,1)}replace(e,n=bt.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:l,$to:c}=i[o],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(c.pos),o?bt.empty:n)}const s=cn.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new bt(Ze.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=vi.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=vi.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.top<=l.top?(o.top>0&&(e=c.resolve(s+i.map[o.left])),l.bottom<i.height&&(n=c.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=c.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=c.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Gc(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=vi.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(e){return e instanceof Gc&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=vi.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),c=e.node(0);return o.left<=l.left?(o.left>0&&(e=c.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(n=c.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=c.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=c.resolve(s+i.map[i.width*(o.top+1)-1]))),new Gc(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Gc(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Gc(e.resolve(n),e.resolve(r))}getBookmark(){return new sUe(this.$anchorCell.pos,this.$headCell.pos)}};Fr.prototype.visible=!1;cn.jsonID("cell",Fr);var sUe=class lie{constructor(e,n){this.anchor=e,this.head=n}map(e){return new lie(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&cI(n,r)?new Fr(n,r):cn.near(r,1)}};function aUe(t){if(!(t.selection instanceof Fr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Zi.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Or.create(t.doc,e)}function oUe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function lUe({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function cUe(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof Jt&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=Fr.create(i,r.from);else if(o=="row"){const l=i.resolve(r.from+1);s=Fr.rowSelection(l,l)}else if(!n){const l=vi.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];s=Fr.create(i,c+1,u)}}else r instanceof Qt&&oUe(r)?s=Qt.create(i,r.from):r instanceof Qt&&lUe(r)&&(s=Qt.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var uUe=new yi("fix-tables");function cie(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){const c=e.child(o);for(let u=l,d=Math.min(i,o+3);u<d;u++)if(t.child(u)==c){l=u+1,n+=c.nodeSize;continue e}r(c,n),l<i&&t.child(l).sameMarkup(c)?cie(t.child(l),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function uie(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=dUe(t,i,s,n))};return e?e.doc!=t.doc&&cie(e.doc,t.doc,0,r):t.doc.descendants(r),n}function dUe(t,e,n,r){const i=vi.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let c=0;c<i.height;c++)s.push(0);for(let c=0;c<i.problems.length;c++){const u=i.problems[c];if(u.type=="collision"){const d=e.nodeAt(u.pos);if(!d)continue;const f=d.attrs;for(let p=0;p<f.rowspan;p++)s[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,Yh(f,f.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=e.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let o,l;for(let c=0;c<s.length;c++)s[c]&&(o==null&&(o=c),l=c);for(let c=0,u=n+1;c<i.height;c++){const d=e.child(c),f=u+d.nodeSize,p=s[c];if(p>0){let h="cell";d.firstChild&&(h=d.firstChild.type.spec.tableRole);const m=[];for(let v=0;v<p;v++){const y=Us(t.schema)[h].createAndFill();y&&m.push(y)}const g=(c==0||o==c-1)&&l==c?u+1:f-1;r.insert(r.mapping.map(g),m)}u=f}return r.setMeta(uUe,{fixTables:!0})}function Nc(t){const e=t.selection,n=Uj(t),r=n.node(-1),i=n.start(-1),s=vi.get(r);return{...e instanceof Fr?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function die(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;iUe(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,oie(u.attrs,i-e.colCount(c))),o+=u.attrs.rowspan-1}else{const c=s==null?Us(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,u=e.positionAt(o,i,r);t.insert(t.mapping.map(n+u),c.createAndFill())}}return t}function fUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t);e(die(t.tr,n,n.left))}return!0}function hUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t);e(die(t.tr,n,n.right))}return!0}function pUe(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const l=o*e.width+i,c=e.map[l],u=n.nodeAt(c),d=u.attrs;if(i>0&&e.map[l-1]==c||i<e.width-1&&e.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,Yh(d,i-e.colCount(c)));else{const f=t.mapping.slice(s).map(r+c);t.delete(f,f+u.nodeSize)}o+=d.rowspan}}function mUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;pUe(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=vi.get(s)}e(r)}return!0}function gUe(t,e,n){var r;const i=Us(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function fie(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let u=0;u<i;u++)o+=r.child(u).nodeSize;const l=[];let c=i>0?-1:0;gUe(e,r,i+c)&&(c=i==0||i==e.height?null:0);for(let u=0,d=e.width*i;u<e.width;u++,d++)if(i>0&&i<e.height&&e.map[d]==e.map[d-e.width]){const f=e.map[d],p=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,{...p,rowspan:p.rowspan+1}),u+=p.colspan-1}else{const f=c==null?Us(r.type.schema).cell:(s=r.nodeAt(e.map[d+c*e.width]))==null?void 0:s.type,p=f?.createAndFill();p&&l.push(p)}return t.insert(o,Us(r.type.schema).row.create(null,l)),t}function vUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t);e(fie(t.tr,n,n.top))}return!0}function yUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t);e(fie(t.tr,n,n.bottom))}return!0}function xUe(t,{map:e,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const o=s+n.child(i).nodeSize,l=t.mapping.maps.length;t.delete(s+r,o+r);const c=new Set;for(let u=0,d=i*e.width;u<e.width;u++,d++){const f=e.map[d];if(!c.has(f)){if(c.add(f),i>0&&f==e.map[d-e.width]){const p=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(l).map(f+r),null,{...p,rowspan:p.rowspan-1}),u+=p.colspan-1}else if(i<e.height&&f==e.map[d+e.width]){const p=n.nodeAt(f),h=p.attrs,m=p.type.create({...h,rowspan:p.attrs.rowspan-1},p.content),g=e.positionAt(i+1,u,n);t.insert(t.mapping.slice(l).map(r+g),m),u+=h.colspan-1}}}}function bUe(t,e){if(!Ml(t))return!1;if(e){const n=Nc(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;xUe(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=vi.get(n.table)}e(r)}return!0}function KU(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function wUe({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,l=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[l]==n[l+1])return!0;s+=t,l+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function GU(t,e){const n=t.selection;if(!(n instanceof Fr)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Nc(t),{map:i}=r;if(wUe(i,r))return!1;if(e){const s=t.tr,o={};let l=Ze.empty,c,u;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const p=i.map[d*i.width+f],h=r.table.nodeAt(p);if(!(o[p]||!h))if(o[p]=!0,c==null)c=p,u=h;else{KU(h)||(l=l.append(h.content));const m=s.mapping.map(p+r.tableStart);s.delete(m,m+h.nodeSize)}}if(c==null||u==null)return!0;if(s.setNodeMarkup(c+r.tableStart,null,{...oie(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const d=c+1+u.content.size,f=KU(u)?c+1:d;s.replaceWith(f+r.tableStart,d+r.tableStart,l)}s.setSelection(new Fr(s.doc.resolve(c+r.tableStart))),e(s)}return!0}function YU(t,e){const n=Us(t.schema);return NUe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function NUe(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof Fr){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=tUe(i.$from),!s)return!1;o=(r=Yg(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let l=s.attrs;const c=[],u=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const d=Nc(e),f=e.tr;for(let h=0;h<d.right-d.left;h++)c.push(u?{...l,colwidth:u&&u[h]?[u[h]]:null}:l);let p;for(let h=d.top;h<d.bottom;h++){let m=d.map.positionAt(h,d.left,d.table);h==d.top&&(m+=s.nodeSize);for(let g=d.left,v=0;g<d.right;g++,v++)g==d.left&&h==d.top||f.insert(p=f.mapping.map(m+d.tableStart,1),t({node:s,row:h,col:g}).createAndFill(c[v]))}f.setNodeMarkup(o,t({node:s,row:d.top,col:d.left}),c[0]),i instanceof Fr&&f.setSelection(new Fr(f.doc.resolve(i.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function SUe(t,e){return function(n,r){if(!Ml(n))return!1;const i=Uj(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof Fr?n.selection.forEachCell((o,l)=>{o.attrs[t]!==e&&s.setNodeMarkup(l,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function jUe(t){return function(e,n){if(!Ml(e))return!1;if(n){const r=Us(e.schema),i=Nc(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(c=>i.table.nodeAt(c));for(let c=0;c<o.length;c++)l[c].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[c],r.cell,l[c].attrs);if(s.steps.length==0)for(let c=0;c<o.length;c++)s.setNodeMarkup(i.tableStart+o[c],r.header_cell,l[c].attrs);n(s)}return!0}}function XU(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Ux(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?jUe(t):function(n,r){if(!Ml(n))return!1;if(r){const i=Us(n.schema),s=Nc(n),o=n.tr,l=XU("row",s,i),c=XU("column",s,i),d=(t==="column"?l:t==="row"?c:!1)?1:0,f=t=="column"?{left:0,top:d,right:1,bottom:s.map.height}:t=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,p=t=="column"?c?i.cell:i.header_cell:t=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(f).forEach(h=>{const m=h+s.tableStart,g=o.doc.nodeAt(m);g&&o.setNodeMarkup(m,p,g.attrs)}),r(o)}return!0}}Ux("row",{useDeprecatedLogic:!0});Ux("column",{useDeprecatedLogic:!0});var _Ue=Ux("cell",{useDeprecatedLogic:!0});function EUe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function JU(t){return function(e,n){if(!Ml(e))return!1;const r=EUe(Uj(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Qt.between(i,rUe(i))).scrollIntoView())}return!0}}function AUe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function W0(t,e){const n=t.selection;if(!(n instanceof Fr))return!1;if(e){const r=t.tr,i=Us(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new bt(i,0,0))}),r.docChanged&&e(r)}return!0}function CUe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let c=0;c<e.childCount;c++){let u=e.child(c).content;const d=c?0:Math.max(0,n-1),f=c<e.childCount-1?0:Math.max(0,r-1);(d||f)&&(u=pP(Us(o).row,new bt(u,d,f)).content),l.push(u)}else if(s=="cell"||s=="header_cell")l.push(n||r?pP(Us(o).row,new bt(e,n,r)).content:e);else return null;return kUe(o,l)}function kUe(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:l,colspan:c}=s.child(o).attrs;for(let u=i;u<i+l;u++)n[u]=(n[u]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ze.empty),n[i]<r){const s=Us(t).cell.createAndFill(),o=[];for(let l=n[i];l<r;l++)o.push(s);e[i]=e[i].append(Ze.from(o))}return{height:e.length,width:r,rows:e}}function pP(t,e){const n=t.createAndFill();return new xD(n).replace(0,n.content.size,e).doc}function TUe({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let l=0;l<n.length;l++){const c=n[l],u=[];for(let d=s[l]||0,f=0;d<r;f++){let p=c.child(f%c.childCount);d+p.attrs.colspan>r&&(p=p.type.createChecked(Yh(p.attrs,p.attrs.colspan,d+p.attrs.colspan-r),p.content)),u.push(p),d+=p.attrs.colspan;for(let h=1;h<p.attrs.rowspan;h++)s[l+h]=(s[l+h]||0)+p.attrs.colspan}o.push(Ze.from(u))}n=o,t=r}if(e!=i){const s=[];for(let o=0,l=0;o<i;o++,l++){const c=[],u=n[l%e];for(let d=0;d<u.childCount;d++){let f=u.child(d);o+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),c.push(f)}s.push(Ze.from(c))}n=s,e=i}return{width:t,height:e,rows:n}}function OUe(t,e,n,r,i,s,o){const l=t.doc.type.schema,c=Us(l);let u,d;if(i>e.width)for(let f=0,p=0;f<e.height;f++){const h=n.child(f);p+=h.nodeSize;const m=[];let g;h.lastChild==null||h.lastChild.type==c.cell?g=u||(u=c.cell.createAndFill()):g=d||(d=c.header_cell.createAndFill());for(let v=e.width;v<i;v++)m.push(g);t.insert(t.mapping.slice(o).map(p-1+r),m)}if(s>e.height){const f=[];for(let m=0,g=(e.height-1)*e.width;m<Math.max(e.width,i);m++){const v=m>=e.width?!1:n.nodeAt(e.map[g+m]).type==c.header_cell;f.push(v?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const p=c.row.create(null,Ze.from(f)),h=[];for(let m=e.height;m<s;m++)h.push(p);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),h)}return!!(u||d)}function ZU(t,e,n,r,i,s,o,l){if(o==0||o==e.height)return!1;let c=!1;for(let u=i;u<s;u++){const d=o*e.width+u,f=e.map[d];if(e.map[d-e.width]==f){c=!0;const p=n.nodeAt(f),{top:h,left:m}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(l).map(f+r),null,{...p.attrs,rowspan:o-h}),t.insert(t.mapping.slice(l).map(e.positionAt(o,m,n)),p.type.createAndFill({...p.attrs,rowspan:h+p.attrs.rowspan-o})),u+=p.attrs.colspan-1}}return c}function QU(t,e,n,r,i,s,o,l){if(o==0||o==e.width)return!1;let c=!1;for(let u=i;u<s;u++){const d=u*e.width+o,f=e.map[d];if(e.map[d-1]==f){c=!0;const p=n.nodeAt(f),h=e.colCount(f),m=t.mapping.slice(l).map(f+r);t.setNodeMarkup(m,null,Yh(p.attrs,o-h,p.attrs.colspan-(o-h))),t.insert(m+p.nodeSize,p.type.createAndFill(Yh(p.attrs,0,o-h))),u+=p.attrs.rowspan-1}}return c}function e9(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=vi.get(s);const{top:l,left:c}=r,u=c+i.width,d=l+i.height,f=t.tr;let p=0;function h(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");o=vi.get(s),p=f.mapping.maps.length}OUe(f,o,s,n,u,d,p)&&h(),ZU(f,o,s,n,c,u,l,p)&&h(),ZU(f,o,s,n,c,u,d,p)&&h(),QU(f,o,s,n,l,d,c,p)&&h(),QU(f,o,s,n,l,d,u,p)&&h();for(let m=l;m<d;m++){const g=o.positionAt(m,c,s),v=o.positionAt(m,u,s);f.replace(f.mapping.slice(p).map(g+n),f.mapping.slice(p).map(v+n),new bt(i.rows[m-l],0,0))}h(),f.setSelection(new Fr(f.doc.resolve(n+o.positionAt(l,c,s)),f.doc.resolve(n+o.positionAt(d-1,u-1,s)))),e(f)}var PUe=DD({ArrowLeft:K0("horiz",-1),ArrowRight:K0("horiz",1),ArrowUp:K0("vert",-1),ArrowDown:K0("vert",1),"Shift-ArrowLeft":G0("horiz",-1),"Shift-ArrowRight":G0("horiz",1),"Shift-ArrowUp":G0("vert",-1),"Shift-ArrowDown":G0("vert",1),Backspace:W0,"Mod-Backspace":W0,Delete:W0,"Mod-Delete":W0});function b1(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function K0(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof Fr)return b1(n,r,cn.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=hie(i,t,e);if(o==null)return!1;if(t=="horiz")return b1(n,r,cn.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(o),c=aie(l,t,e);let u;return c?u=cn.near(c,1):e<0?u=cn.near(n.doc.resolve(l.before(-1)),-1):u=cn.near(n.doc.resolve(l.after(-1)),1),b1(n,r,u)}}}function G0(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof Fr)o=s;else{const c=hie(i,t,e);if(c==null)return!1;o=new Fr(n.doc.resolve(c))}const l=aie(o.$headCell,t,e);return l?b1(n,r,new Fr(o.$anchorCell,l)):!1}}function MUe(t,e){const n=t.state.doc,r=Yg(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Fr(r))),!0):!1}function RUe(t,e,n){if(!Ml(t.state))return!1;let r=CUe(n);const i=t.state.selection;if(i instanceof Fr){r||(r={width:1,height:1,rows:[Ze.from(pP(Us(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=vi.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=TUe(r,l.right-l.left,l.bottom-l.top),e9(t.state,t.dispatch,o,l,r),!0}else if(r){const s=Uj(t.state),o=s.start(-1);return e9(t.state,t.dispatch,o,vi.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function DUe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=t9(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof Fr)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Yg(t.state.selection.$anchor))!=null&&((n=Hk(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(c,u){let d=Hk(t,u);const f=md.getState(t.state)==null;if(!d||!cI(c,d))if(f)d=c;else return;const p=new Fr(c,d);if(f||!t.state.selection.eq(p)){const h=t.state.tr.setSelection(p);f&&h.setMeta(md,c.pos),t.dispatch(h)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",l),md.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(md,-1))}function l(c){const u=c,d=md.getState(t.state);let f;if(d!=null)f=t.state.doc.resolve(d);else if(t9(t,u.target)!=r&&(f=Hk(t,e),!f))return o();f&&s(f,u)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",l)}function hie(t,e,n){if(!(t.state.selection instanceof Qt))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(i),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}function t9(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Hk(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Yg(t.state.doc.resolve(n.pos)):null}var IUe=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),mP(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,mP(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function mP(t,e,n,r,i,s){var o;let l=0,c=!0,u=e.firstChild;const d=t.firstChild;if(d){for(let f=0,p=0;f<d.childCount;f++){const{colspan:h,colwidth:m}=d.child(f).attrs;for(let g=0;g<h;g++,p++){const v=i==p?s:m&&m[g],y=v?v+"px":"";if(l+=v||r,v||(c=!1),u)u.style.width!=y&&(u.style.width=y),u=u.nextSibling;else{const b=document.createElement("col");b.style.width=y,e.appendChild(b)}}}for(;u;){const f=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=f}c?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var no=new yi("tableColumnResizing");function LUe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=IUe,lastColumnResizable:i=!0}={}){const s=new Yr({key:no,state:{init(o,l){var c,u;const d=(u=(c=s.spec)==null?void 0:c.props)==null?void 0:u.nodeViews,f=Us(l.schema).table.name;return r&&d&&(d[f]=(p,h)=>new r(p,n,h)),new FUe(-1,!1)},apply(o,l){return l.apply(o)}},props:{attributes:o=>{const l=no.getState(o);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,l)=>{BUe(o,l,t,i)},mouseleave:o=>{$Ue(o)},mousedown:(o,l)=>{zUe(o,l,e,n)}},decorations:o=>{const l=no.getState(o);if(l&&l.activeHandle>-1)return WUe(o,l.activeHandle)},nodeViews:{}}});return s}var FUe=class w1{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(no);if(r&&r.setHandle!=null)return new w1(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new w1(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return hP(e.doc.resolve(i))||(i=-1),new w1(i,n.dragging)}return n}};function BUe(t,e,n,r){if(!t.editable)return;const i=no.getState(t.state);if(i&&!i.dragging){const s=UUe(e.target);let o=-1;if(s){const{left:l,right:c}=s.getBoundingClientRect();e.clientX-l<=n?o=n9(t,e,"left",n):c-e.clientX<=n&&(o=n9(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const l=t.state.doc.resolve(o),c=l.node(-1),u=vi.get(c),d=l.start(-1);if(u.colCount(l.pos-d)+l.nodeAfter.attrs.colspan-1==u.width-1)return}pie(t,o)}}}function $Ue(t){if(!t.editable)return;const e=no.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&pie(t,-1)}function zUe(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=no.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const l=t.state.doc.nodeAt(o.activeHandle),c=qUe(t,o.activeHandle,l.attrs);t.dispatch(t.state.tr.setMeta(no,{setDragging:{startX:e.clientX,startWidth:c}}));function u(f){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",d);const p=no.getState(t.state);p?.dragging&&(HUe(t,p.activeHandle,r9(p.dragging,f,n)),t.dispatch(t.state.tr.setMeta(no,{setDragging:null})))}function d(f){if(!f.which)return u(f);const p=no.getState(t.state);if(p&&p.dragging){const h=r9(p.dragging,f,n);i9(t,p.activeHandle,h,r)}}return i9(t,o.activeHandle,c,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",d),e.preventDefault(),!0}function qUe(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let l=s.node.childNodes[s.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(l-=r[u],c--);return l/c}function UUe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function n9(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,l=Yg(t.state.doc.resolve(o));if(!l)return-1;if(n=="right")return l.pos;const c=vi.get(l.node(-1)),u=l.start(-1),d=c.map.indexOf(l.pos-u);return d%c.width==0?-1:u+c.map[d-1]}function r9(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function pie(t,e){t.dispatch(t.state.tr.setMeta(no,{setHandle:e}))}function HUe(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=vi.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+l;if(u&&s.map[d]==s.map[d-s.width])continue;const f=s.map[d],p=i.nodeAt(f).attrs,h=p.colspan==1?0:l-s.colCount(f);if(p.colwidth&&p.colwidth[h]==n)continue;const m=p.colwidth?p.colwidth.slice():VUe(p.colspan);m[h]=n,c.setNodeMarkup(o+f,null,{...p,colwidth:m})}c.docChanged&&t.dispatch(c)}function i9(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),l=vi.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let c=t.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&mP(s,c.firstChild,c,r,l,n)}function VUe(t){return Array(t).fill(0)}function WUe(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return Or.empty;const o=vi.get(s),l=i.start(-1),c=o.colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<o.height;u++){const d=c+u*o.width;if((c==o.width-1||o.map[d]!=o.map[d+1])&&(u==0||o.map[d]!=o.map[d-o.width])){const f=o.map[d],p=l+f+s.nodeAt(f).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",(n=no.getState(t))!=null&&n.dragging&&r.push(Zi.node(l+f,l+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(Zi.widget(p,h))}}return Or.create(t.doc,r)}function KUe({allowTableNodeSelection:t=!1}={}){return new Yr({key:md,state:{init(){return null},apply(e,n){const r=e.getMeta(md);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:aUe,handleDOMEvents:{mousedown:DUe},createSelectionBetween(e){return md.getState(e.state)!=null?e.state.selection:null},handleTripleClick:MUe,handleKeyDown:PUe,handlePaste:RUe},appendTransaction(e,n,r){return cUe(r,uie(r,n),t)}})}var uI=hs.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(s=>parseInt(s,10)):null;if(!i){const s=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),o=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(o&&o>-1&&s&&s[o]){const l=s[o].getAttribute("width");return l?[parseInt(l,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Rr(this.options.HTMLAttributes,t),0]}}),dI=hs.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Rr(this.options.HTMLAttributes,t),0]}}),fI=hs.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Rr(this.options.HTMLAttributes,t),0]}});function gP(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function s9(t,e,n,r,i,s){var o;let l=0,c=!0,u=e.firstChild;const d=t.firstChild;if(d!==null)for(let f=0,p=0;f<d.childCount;f+=1){const{colspan:h,colwidth:m}=d.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const v=i===p?s:m&&m[g],y=v?`${v}px`:"";if(l+=v||r,v||(c=!1),u){if(u.style.width!==y){const[b,N]=gP(r,v);u.style.setProperty(b,N)}u=u.nextSibling}else{const b=document.createElement("col"),[N,S]=gP(r,v);b.style.setProperty(N,S),e.appendChild(b)}}}for(;u;){const f=u.nextSibling;(o=u.parentNode)==null||o.removeChild(u),u=f}c?(n.style.width=`${l}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${l}px`)}var GUe=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),s9(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,s9(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function YUe(t,e,n,r){let i=0,s=!0;const o=[],l=t.firstChild;if(!l)return{};for(let f=0,p=0;f<l.childCount;f+=1){const{colspan:h,colwidth:m}=l.child(f).attrs;for(let g=0;g<h;g+=1,p+=1){const v=n===p?r:m&&m[g];i+=v||e,v||(s=!1);const[y,b]=gP(e,v);o.push(["col",{style:`${y}: ${b}`}])}}const c=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:c,tableMinWidth:u}}function a9(t,e){return t.createAndFill()}function XUe(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function JUe(t,e,n,r,i){const s=XUe(t),o=[],l=[];for(let u=0;u<n;u+=1){const d=a9(s.cell);if(d&&l.push(d),r){const f=a9(s.header_cell);f&&o.push(f)}}const c=[];for(let u=0;u<e;u+=1)c.push(s.row.createChecked(null,r&&u===0?o:l));return s.table.createChecked(null,c)}function ZUe(t){return t instanceof Fr}var Y0=({editor:t})=>{const{selection:e}=t.state;if(!ZUe(e))return!1;let n=0;const r=Lne(e.ranges[0].$from,s=>s.type.name==="table");return r?.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},QUe="";function e9e(t){return(t||"").replace(/\s+/g," ").trim()}function t9e(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:QUe;if(!t||!t.content||t.content.length===0)return"";const s=[];t.content.forEach(m=>{const g=[];m.content&&m.content.forEach(v=>{let y="";v.content&&Array.isArray(v.content)&&v.content.length>1?y=v.content.map(E=>e.renderChildren(E)).join(i):y=v.content?e.renderChildren(v.content):"";const b=e9e(y),N=v.type==="tableHeader";g.push({text:b,isHeader:N})}),s.push(g)});const o=s.reduce((m,g)=>Math.max(m,g.length),0);if(o===0)return"";const l=new Array(o).fill(0);s.forEach(m=>{var g;for(let v=0;v<o;v+=1){const b=(((g=m[v])==null?void 0:g.text)||"").length;b>l[v]&&(l[v]=b),l[v]<3&&(l[v]=3)}});const c=(m,g)=>m+" ".repeat(Math.max(0,g-m.length)),u=s[0],d=u.some(m=>m.isHeader);let f=`
`;const p=new Array(o).fill(0).map((m,g)=>d&&u[g]&&u[g].text||"");return f+=`| ${p.map((m,g)=>c(m,l[g])).join(" | ")} |
`,f+=`| ${l.map(m=>"-".repeat(Math.max(3,m))).join(" | ")} |
`,(d?s.slice(1):s).forEach(m=>{f+=`| ${new Array(o).fill(0).map((g,v)=>c(m[v]&&m[v].text||"",l[v])).join(" | ")} |
`}),f}var n9e=t9e,hI=hs.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:GUe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=YUe(t,this.options.cellMinWidth);return["table",Rr(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(s=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>n9e(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=JUe(s.schema,t,e,n);if(i){const l=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Qt.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>fUe(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>hUe(t,e),deleteColumn:()=>({state:t,dispatch:e})=>mUe(t,e),addRowBefore:()=>({state:t,dispatch:e})=>vUe(t,e),addRowAfter:()=>({state:t,dispatch:e})=>yUe(t,e),deleteRow:()=>({state:t,dispatch:e})=>bUe(t,e),deleteTable:()=>({state:t,dispatch:e})=>AUe(t,e),mergeCells:()=>({state:t,dispatch:e})=>GU(t,e),splitCell:()=>({state:t,dispatch:e})=>YU(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Ux("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Ux("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>_Ue(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>GU(t,e)?!0:YU(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>SUe(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>JU(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>JU(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&uie(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Fr.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Y0,"Mod-Backspace":Y0,Delete:Y0,"Mod-Delete":Y0}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[LUe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],KUe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:mr(Xt(t,"tableRole",e))}}});Ar.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(hI.configure(this.options.table)),this.options.tableCell!==!1&&t.push(uI.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(dI.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(fI.configure(this.options.tableRow)),t}});var r9e=fI,i9e=uI,s9e=dI;function a9e({initialData:t,onSave:e,onCancel:n}){const[r,i]=x.useState(t?.length||3),[s,o]=x.useState(t?.[0]?.length||3),[l,c]=x.useState(t||Array(3).fill(null).map(()=>Array(3).fill("")));x.useEffect(()=>{t&&(c(t),i(t.length),o(t[0]?.length||3))},[t]);const u=(g,v,y)=>{const b=[...l];b[g][v]=y,c(b)},d=()=>{const g=[...l,Array(s).fill("")];c(g),i(r+1)},f=()=>{if(r>1){const g=l.slice(0,-1);c(g),i(r-1)}},p=()=>{const g=l.map(v=>[...v,""]);c(g),o(s+1)},h=()=>{if(s>1){const g=l.map(v=>v.slice(0,-1));c(g),o(s-1)}},m=()=>{e(l)};return a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx(ye,{className:"text-sm",children:"Filas:"}),a.jsx(re,{size:"icon",variant:"outline",onClick:f,disabled:r<=1,className:"h-8 w-8","data-testid":"button-remove-row",children:a.jsx(Gk,{className:"h-4 w-4"})}),a.jsx(Ie,{type:"number",value:r,readOnly:!0,className:"w-16 h-8 text-center"}),a.jsx(re,{size:"icon",variant:"outline",onClick:d,className:"h-8 w-8","data-testid":"button-add-row",children:a.jsx(Kr,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx(ye,{className:"text-sm",children:"Columnas:"}),a.jsx(re,{size:"icon",variant:"outline",onClick:h,disabled:s<=1,className:"h-8 w-8","data-testid":"button-remove-column",children:a.jsx(Gk,{className:"h-4 w-4"})}),a.jsx(Ie,{type:"number",value:s,readOnly:!0,className:"w-16 h-8 text-center"}),a.jsx(re,{size:"icon",variant:"outline",onClick:p,className:"h-8 w-8","data-testid":"button-add-column",children:a.jsx(Kr,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"border rounded-md overflow-auto max-h-[400px]","data-testid":"excel-table-grid",children:a.jsx("table",{className:"w-full border-collapse",children:a.jsx("tbody",{children:l.map((g,v)=>a.jsx("tr",{children:g.map((y,b)=>a.jsx("td",{className:"border p-0",children:a.jsx(Ie,{value:y,onChange:N=>u(v,b,N.target.value),className:"border-0 rounded-none focus-visible:ring-0 focus-visible:ring-offset-0","data-testid":`cell-${v}-${b}`,placeholder:v===0?`Columna ${b+1}`:""})},b))},v))})})}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(re,{variant:"outline",onClick:n,"data-testid":"button-cancel-table",children:"Cancelar"}),a.jsx(re,{onClick:m,"data-testid":"button-save-table",children:"Insertar Tabla"})]})]})}const o9e=Yqe(Kqe);function mie({content:t,onChange:e,manualId:n}){const{toast:r}=nr(),[i,s]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(void 0),[p,h]=x.useState(null),[m,g]=x.useState(null),[v,y]=x.useState(""),[b,N]=x.useState(""),[S,E]=x.useState(!1),[C,T]=x.useState(!1),_=cre({extensions:[Lre.configure({codeBlock:!1}),Fre.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:"editor-image"}}),rI.configure({openOnClick:!1}),Bre.configure({types:["heading","paragraph"]}),aI,oI,b7e.configure({multicolor:!0}),E7e.configure({lowlight:o9e}),hI.configure({resizable:!1,HTMLAttributes:{class:"editor-table"}}),fI,dI,uI],content:t,onUpdate:({editor:I})=>{e(I.getHTML())},editorProps:{handleDrop:(I,B,U,D)=>{if(!D&&B.dataTransfer&&B.dataTransfer.files&&B.dataTransfer.files[0]){const z=B.dataTransfer.files[0];if(z.type.startsWith("image/"))return B.preventDefault(),j(z),!0}return!1},handlePaste:(I,B)=>{const U=B.clipboardData?.items;if(U){const D=Array.from(U);for(const z of D)if(z.type.startsWith("image/")){B.preventDefault();const H=z.getAsFile();return H&&j(H),!0}}return!1}}});if(!_)return null;x.useEffect(()=>{try{const I=_.getHTML();(!I||I==="<p></p>"||I===`<p></p>
`)&&t&&typeof t=="string"&&_.commands.setContent(t)}catch{}},[_,t,n]);const j=async I=>{if(!n){r({title:"Error",description:"Debes guardar el manual primero",variant:"destructive"});return}const B=new FormData;B.append("image",I);try{const U=await fetch("/api/manuals/upload-image",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:B});if(!U.ok)throw new Error("Error al subir imagen");const D=await U.json();_.chain().focus().setImage({src:D.url}).run(),r({title:"Imagen insertada correctamente"})}catch{r({title:"Error al subir imagen",variant:"destructive"})}},P=async()=>{let I=m;if(!I){const B=document.getElementById("image-file");B?.files&&B.files[0]&&(I=B.files[0],g(I))}if(!I){r({title:"Error",description:"Selecciona una imagen primero",variant:"destructive"});return}await j(I),s(!1),g(null)},k=()=>{v&&(b?_.chain().focus().insertContent(`<a href="${v}">${b}</a>`).run():_.chain().focus().setLink({href:v}).run(),l(!1),y(""),N(""))},O=["#000000","#374151","#6B7280","#9CA3AF","#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899"],M=I=>{const B=document.createElement("div");B.innerHTML=I;const U=B.querySelector("table");if(!U)return[];const D=[];return U.querySelectorAll("tr").forEach(z=>{const H=[];z.querySelectorAll("th, td").forEach(ee=>{H.push(ee.textContent||"")}),H.length>0&&D.push(H)}),D};return a.jsxs("div",{className:"border rounded-lg",children:[a.jsxs("div",{className:"border-b p-2 flex flex-wrap gap-1 items-center bg-muted/30",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>_.chain().focus().undo().run(),disabled:!_.can().undo(),"data-testid":"button-undo",children:a.jsx(B9,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>_.chain().focus().redo().run(),disabled:!_.can().redo(),"data-testid":"button-redo",children:a.jsx($9,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:_.isActive("bold")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleBold().run(),"data-testid":"button-bold",children:a.jsx(z9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("italic")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleItalic().run(),"data-testid":"button-italic",children:a.jsx(q9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("strike")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleStrike().run(),"data-testid":"button-strike",children:a.jsx(U9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("code")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleCode().run(),"data-testid":"button-code",children:a.jsx(dae,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:_.isActive("heading",{level:1})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleHeading({level:1}).run(),"data-testid":"button-h1",children:a.jsx(H9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("heading",{level:2})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleHeading({level:2}).run(),"data-testid":"button-h2",children:a.jsx(V9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("heading",{level:3})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleHeading({level:3}).run(),"data-testid":"button-h3",children:a.jsx(W9,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:_.isActive("bulletList")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleBulletList().run(),"data-testid":"button-bullet-list",children:a.jsx(MP,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("orderedList")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleOrderedList().run(),"data-testid":"button-ordered-list",children:a.jsx(K9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive("blockquote")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleBlockquote().run(),"data-testid":"button-blockquote",children:a.jsx(G9,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:_.isActive({textAlign:"left"})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().setTextAlign("left").run(),"data-testid":"button-align-left",children:a.jsx(Y9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive({textAlign:"center"})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().setTextAlign("center").run(),"data-testid":"button-align-center",children:a.jsx(X9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive({textAlign:"right"})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().setTextAlign("right").run(),"data-testid":"button-align-right",children:a.jsx(J9,{className:"h-4 w-4"})}),a.jsx(re,{variant:_.isActive({textAlign:"justify"})?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().setTextAlign("justify").run(),"data-testid":"button-align-justify",children:a.jsx(Z9,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsxs("div",{className:"relative",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>E(!S),"data-testid":"button-text-color",children:a.jsx("div",{className:"h-4 w-4 border-2 border-current",style:{backgroundColor:_.getAttributes("textStyle").color||"#000"}})}),S&&a.jsx("div",{className:"absolute top-full mt-1 p-2 bg-background border rounded-lg shadow-lg z-10 grid grid-cols-5 gap-1",children:O.map(I=>a.jsx("button",{className:"h-6 w-6 rounded border hover-elevate",style:{backgroundColor:I},onClick:()=>{_.chain().focus().setColor(I).run(),E(!1)}},I))})]}),a.jsxs("div",{className:"relative",children:[a.jsx(re,{variant:_.isActive("highlight")?"default":"ghost",size:"icon",onClick:()=>T(!C),"data-testid":"button-highlight",children:a.jsx(fae,{className:"h-4 w-4"})}),C&&a.jsx("div",{className:"absolute top-full mt-1 p-2 bg-background border rounded-lg shadow-lg z-10 grid grid-cols-5 gap-1",children:O.slice(4).map(I=>a.jsx("button",{className:"h-6 w-6 rounded border hover-elevate",style:{backgroundColor:I},onClick:()=>{_.chain().focus().toggleHighlight({color:I}).run(),T(!1)}},I))})]}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:_.isActive("codeBlock")?"default":"ghost",size:"icon",onClick:()=>_.chain().focus().toggleCodeBlock().run(),"data-testid":"button-code-block",children:a.jsx(Q9,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>{const B=_.getHTML().match(/<table[\s\S]*?<\/table>/);if(B){const U=M(B[0]);f(U),h(B[0])}else f(void 0),h(null);u(!0)},"data-testid":"button-insert-table",title:"Insertar/Editar tabla",children:a.jsx(eH,{className:"h-4 w-4"})}),a.jsx(ri,{orientation:"vertical",className:"h-6 mx-1"}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>s(!0),"data-testid":"button-insert-image",title:"Insertar imagen",children:a.jsx(CP,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>l(!0),"data-testid":"button-insert-link",title:"Insertar enlace",children:a.jsx(hae,{className:"h-4 w-4"})})]}),a.jsx("style",{children:`
        .ProseMirror {
          outline: none;
          padding: 1rem;
          min-height: 400px;
        }

        /* Estilos de tabla profesionales tipo Word */
        .ProseMirror .editor-table {
          border-collapse: collapse;
          table-layout: fixed;
          width: 100%;
          margin: 1rem 0;
          overflow: hidden;
        }

        .ProseMirror .editor-table td,
        .ProseMirror .editor-table th {
          min-width: 1em;
          border: 2px solid #000000;
          padding: 0.5rem;
          vertical-align: top;
          box-sizing: border-box;
          position: relative;
          background-color: hsl(var(--background));
        }

        .ProseMirror .editor-table th {
          font-weight: 600;
          text-align: left;
          background-color: hsl(var(--muted));
          border: 2px solid #000000;
        }

        .ProseMirror .editor-table .selectedCell {
          background-color: hsl(var(--accent) / 0.3);
        }

        /* Handle de redimensionamiento de columna */
        .ProseMirror .editor-table .column-resize-handle {
          position: absolute;
          right: -2px;
          top: 0;
          bottom: 0;
          width: 4px;
          background-color: hsl(var(--primary));
          cursor: col-resize;
          z-index: 20;
        }

        /* Estilos de imagen mejorados */
        .ProseMirror .editor-image {
          max-width: 100%;
          height: auto;
          display: block;
          margin: 1rem 0;
          border-radius: 0.375rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .ProseMirror .editor-image:hover {
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .ProseMirror .editor-image.ProseMirror-selectednode {
          outline: 2px solid hsl(var(--primary));
          outline-offset: 2px;
        }

        /* Indicador de arrastre */
        .ProseMirror.dragging {
          background-color: hsl(var(--accent) / 0.1);
        }

        /* Estilos de prose mejorados */
        .ProseMirror p {
          margin: 0.5rem 0;
        }

        .ProseMirror h1, .ProseMirror h2, .ProseMirror h3 {
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
        }

        .ProseMirror ul, .ProseMirror ol {
          padding-left: 1.5rem;
        }

        .ProseMirror blockquote {
          border-left: 3px solid hsl(var(--border));
          padding-left: 1rem;
          margin-left: 0;
          font-style: italic;
        }

        .ProseMirror code {
          background-color: hsl(var(--muted));
          padding: 0.125rem 0.25rem;
          border-radius: 0.25rem;
          font-size: 0.875em;
        }

        .ProseMirror pre {
          background-color: hsl(var(--muted));
          border-radius: 0.5rem;
          padding: 1rem;
          overflow-x: auto;
        }

        .ProseMirror pre code {
          background-color: transparent;
          padding: 0;
        }
      `}),a.jsx(ore,{editor:_,className:"focus:outline-none"}),a.jsx(Un,{open:i,onOpenChange:s,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Insertar Imagen"}),a.jsx(Qn,{children:"Sube una imagen desde tu ordenador o arrastra y suelta directamente en el editor"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"image-file",children:"Seleccionar imagen"}),a.jsx(Ie,{id:"image-file",type:"file",accept:"image/*",onChange:I=>g(I.target.files?.[0]||null),"data-testid":"input-image-file"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"💡 También puedes arrastrar imágenes directamente al editor o pegarlas con Ctrl+V"})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(re,{onClick:P,"data-testid":"button-upload-image",children:"Insertar"})]})]})}),a.jsx(Un,{open:o,onOpenChange:l,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Insertar Enlace"}),a.jsx(Qn,{children:"Añade un enlace al documento"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"link-url",children:"URL"}),a.jsx(Ie,{id:"link-url",type:"url",placeholder:"https://example.com",value:v,onChange:I=>y(I.target.value),"data-testid":"input-link-url"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"link-text",children:"Texto (opcional)"}),a.jsx(Ie,{id:"link-text",type:"text",placeholder:"Texto del enlace",value:b,onChange:I=>N(I.target.value),"data-testid":"input-link-text"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),a.jsx(re,{onClick:k,"data-testid":"button-insert-link-confirm",children:"Insertar"})]})]})}),a.jsx(Un,{open:c,onOpenChange:u,children:a.jsxs(zn,{className:"max-w-4xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:p?"Editar Tabla":"Insertar Tabla"}),a.jsxs(Qn,{children:[p?"Modifica la tabla existente.":"Crea una nueva tabla."," La primera fila será el encabezado con fondo gris."]})]}),a.jsx(a9e,{initialData:d,onSave:I=>{if(I.length!==0){if(p){const B=l9e(I),D=_.getHTML().replace(p,B);_.commands.setContent(D)}else{const B=I.length,U=I[0]?.length||2;_.chain().focus().insertTable({rows:B,cols:U,withHeaderRow:!0}).run(),I.forEach((D,z)=>{D.forEach((H,ee)=>{_.commands.goToNextCell(),H&&_.commands.insertContent(H)})})}u(!1),f(void 0),h(null)}},onCancel:()=>{u(!1),f(void 0),h(null)}})]})})]})}function l9e(t){if(t.length===0)return"";let e='<table class="editor-table">';return t.forEach((n,r)=>{e+="<tr>",n.forEach(i=>{r===0?e+=`<th>${i||""}</th>`:e+=`<td>${i||""}</td>`}),e+="</tr>"}),e+="</table>",e}const c9e=[{id:"procedimiento-basico",nombre:"Procedimiento Básico",descripcion:"Plantilla para documentar un procedimiento paso a paso",categoria:"General",etiquetas:["procedimiento"],contenidoHtml:`
      <h1>Título del Procedimiento</h1>
      <p><strong>Objetivo:</strong> Describir el objetivo del procedimiento</p>
      <p><strong>Alcance:</strong> Definir el alcance y limitaciones</p>
      
      <h2>Requisitos Previos</h2>
      <ul>
        <li>Requisito 1</li>
        <li>Requisito 2</li>
        <li>Requisito 3</li>
      </ul>

      <h2>Procedimiento</h2>
      <ol>
        <li><strong>Paso 1:</strong> Descripción detallada del primer paso</li>
        <li><strong>Paso 2:</strong> Descripción detallada del segundo paso</li>
        <li><strong>Paso 3:</strong> Descripción detallada del tercer paso</li>
      </ol>

      <h2>Resultados Esperados</h2>
      <p>Describir los resultados que se deben obtener al completar el procedimiento</p>

      <h2>Solución de Problemas</h2>
      <table>
        <thead>
          <tr>
            <th>Problema</th>
            <th>Causa</th>
            <th>Solución</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Problema 1</td>
            <td>Causa probable</td>
            <td>Solución recomendada</td>
          </tr>
        </tbody>
      </table>
    `},{id:"modelo-fiscal",nombre:"Guía Modelo Fiscal",descripcion:"Plantilla para documentar la presentación de modelos fiscales",categoria:"Fiscal",etiquetas:["fiscal","impuestos"],contenidoHtml:`
      <h1>Modelo [Número] - [Nombre del Modelo]</h1>
      
      <h2>Información General</h2>
      <p><strong>Descripción:</strong> Breve descripción del modelo fiscal</p>
      <p><strong>Periodicidad:</strong> Trimestral / Mensual / Anual</p>
      <p><strong>Plazo de presentación:</strong> Especificar fechas límite</p>

      <h2>¿Quién debe presentarlo?</h2>
      <ul>
        <li>Tipo de contribuyente 1</li>
        <li>Tipo de contribuyente 2</li>
      </ul>

      <h2>Documentación Necesaria</h2>
      <ol>
        <li>Documento 1</li>
        <li>Documento 2</li>
        <li>Documento 3</li>
      </ol>

      <h2>Procedimiento de Cálculo</h2>
      <h3>Paso 1: Cálculo de Base Imponible</h3>
      <p>Explicación detallada</p>

      <h3>Paso 2: Aplicación de Tipos</h3>
      <p>Explicación detallada</p>

      <h3>Paso 3: Deducciones</h3>
      <p>Explicación detallada</p>

      <h2>Presentación Telemática</h2>
      <ol>
        <li>Acceder a la sede electrónica</li>
        <li>Seleccionar el modelo correspondiente</li>
        <li>Completar los datos requeridos</li>
        <li>Revisar y confirmar</li>
      </ol>

      <h2>Notas Importantes</h2>
      <blockquote>
        <p>⚠️ Consideraciones especiales y advertencias</p>
      </blockquote>
    `},{id:"normativa-laboral",nombre:"Normativa Laboral",descripcion:"Plantilla para documentar normativa y procedimientos laborales",categoria:"Laboral",etiquetas:["laboral","normativa"],contenidoHtml:`
      <h1>Normativa Laboral - [Título]</h1>
      
      <h2>Marco Legal</h2>
      <p><strong>Normativa aplicable:</strong></p>
      <ul>
        <li>Ley / Real Decreto 1</li>
        <li>Ley / Real Decreto 2</li>
      </ul>

      <h2>Ámbito de Aplicación</h2>
      <p>Definir a quién aplica esta normativa</p>

      <h2>Obligaciones del Empresario</h2>
      <ol>
        <li>Obligación 1: Descripción</li>
        <li>Obligación 2: Descripción</li>
        <li>Obligación 3: Descripción</li>
      </ol>

      <h2>Derechos del Trabajador</h2>
      <ol>
        <li>Derecho 1: Descripción</li>
        <li>Derecho 2: Descripción</li>
        <li>Derecho 3: Descripción</li>
      </ol>

      <h2>Procedimiento</h2>
      <h3>Paso 1: [Nombre del paso]</h3>
      <p>Descripción detallada</p>

      <h3>Paso 2: [Nombre del paso]</h3>
      <p>Descripción detallada</p>

      <h2>Sanciones</h2>
      <table>
        <thead>
          <tr>
            <th>Infracción</th>
            <th>Tipo</th>
            <th>Sanción</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Infracción leve</td>
            <td>Leve</td>
            <td>Multa de X a Y €</td>
          </tr>
          <tr>
            <td>Infracción grave</td>
            <td>Grave</td>
            <td>Multa de X a Y €</td>
          </tr>
        </tbody>
      </table>
    `},{id:"guia-rapida",nombre:"Guía Rápida",descripcion:"Plantilla para crear guías rápidas de referencia",categoria:"General",etiquetas:["guía","referencia"],contenidoHtml:`
      <h1>Guía Rápida - [Título]</h1>
      
      <h2>Resumen</h2>
      <p>Breve descripción de lo que cubre esta guía</p>

      <h2>Acciones Frecuentes</h2>
      <h3>Acción 1: [Nombre]</h3>
      <ol>
        <li>Paso 1</li>
        <li>Paso 2</li>
        <li>Paso 3</li>
      </ol>

      <h3>Acción 2: [Nombre]</h3>
      <ol>
        <li>Paso 1</li>
        <li>Paso 2</li>
        <li>Paso 3</li>
      </ol>

      <h2>Shortcuts / Atajos</h2>
      <table>
        <thead>
          <tr>
            <th>Acción</th>
            <th>Método Rápido</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Acción 1</td>
            <td>Descripción del atajo</td>
          </tr>
          <tr>
            <td>Acción 2</td>
            <td>Descripción del atajo</td>
          </tr>
        </tbody>
      </table>

      <h2>Preguntas Frecuentes</h2>
      <h3>¿Pregunta 1?</h3>
      <p>Respuesta 1</p>

      <h3>¿Pregunta 2?</h3>
      <p>Respuesta 2</p>

      <h2>Enlaces Útiles</h2>
      <ul>
        <li><a href="#">Recurso 1</a></li>
        <li><a href="#">Recurso 2</a></li>
      </ul>
    `},{id:"politica-empresa",nombre:"Política de Empresa",descripcion:"Plantilla para documentar políticas internas",categoria:"Organización",etiquetas:["política","normativa"],contenidoHtml:`
      <h1>Política de [Título]</h1>
      
      <h2>Propósito</h2>
      <p>Descripción del propósito de esta política</p>

      <h2>Alcance</h2>
      <p>Define a quién aplica esta política</p>

      <h2>Definiciones</h2>
      <ul>
        <li><strong>Término 1:</strong> Definición</li>
        <li><strong>Término 2:</strong> Definición</li>
      </ul>

      <h2>Política</h2>
      <h3>Principios Generales</h3>
      <ol>
        <li>Principio 1</li>
        <li>Principio 2</li>
        <li>Principio 3</li>
      </ol>

      <h3>Normas Específicas</h3>
      <ol>
        <li>Norma 1: Descripción detallada</li>
        <li>Norma 2: Descripción detallada</li>
      </ol>

      <h2>Responsabilidades</h2>
      <table>
        <thead>
          <tr>
            <th>Rol</th>
            <th>Responsabilidad</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Dirección</td>
            <td>Descripción de responsabilidades</td>
          </tr>
          <tr>
            <td>Empleados</td>
            <td>Descripción de responsabilidades</td>
          </tr>
        </tbody>
      </table>

      <h2>Incumplimiento</h2>
      <p>Consecuencias del incumplimiento de esta política</p>

      <h2>Revisión</h2>
      <p>Esta política será revisada [periodicidad]</p>
    `}];function o9(){const t=$P(),[e,n]=es(),{toast:r}=nr(),i=e==="/manuales/nuevo"||t.id==="nuevo",[s,o]=x.useState({titulo:"",categoria:"",etiquetas:[],publicado:!1,contenidoHtml:""}),[l,c]=x.useState(""),[u,d]=x.useState(null),[f,p]=x.useState(!1),{data:h}=At({queryKey:["/api/manuals",t.id],enabled:!i}),{data:m=[]}=At({queryKey:["/api/manuals",t.id,"attachments"],enabled:!i}),{data:g=[]}=At({queryKey:["/api/manuals",t.id,"versions"],enabled:!i});x.useEffect(()=>{h&&!i&&o({titulo:h.titulo,categoria:h.categoria||"",etiquetas:h.etiquetas||[],publicado:h.publicado,contenidoHtml:h.contenidoHtml})},[h,i]);const v=yt({mutationFn:async P=>i?await ht("POST","/api/manuals",P):await ht("PATCH",`/api/manuals/${t.id}`,P),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/manuals"]}),r({title:i?"Manual creado exitosamente":"Manual actualizado exitosamente"}),n("/manuales")}}),y=yt({mutationFn:async P=>{const k=new FormData;k.append("file",P);const O=await fetch(`/api/manuals/${t.id}/attachments`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:k});if(!O.ok)throw new Error("Error al subir adjunto");return O.json()},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/manuals",t.id,"attachments"]}),r({title:"Adjunto subido correctamente"}),d(null)}}),b=yt({mutationFn:async P=>{await ht("DELETE",`/api/manuals/${t.id}/attachments/${P}`)},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/manuals",t.id,"attachments"]}),r({title:"Adjunto eliminado"})}}),N=yt({mutationFn:async P=>await ht("POST",`/api/manuals/${t.id}/versions/restore/${P}`),onSuccess:P=>{Lt.invalidateQueries({queryKey:["/api/manuals"]}),o({titulo:P.titulo,categoria:P.categoria||"",etiquetas:P.etiquetas||[],publicado:P.publicado,contenidoHtml:P.contenidoHtml}),r({title:"Versión restaurada correctamente"})}}),S=(P=!1)=>{if(!s.titulo){r({title:"Error",description:"El título es requerido",variant:"destructive"});return}v.mutate({...s,createVersion:P})},E=()=>{l&&!s.etiquetas.includes(l)&&(o({...s,etiquetas:[...s.etiquetas,l]}),c(""))},C=P=>{o({...s,etiquetas:s.etiquetas.filter(k=>k!==P)})},T=()=>{u&&y.mutate(u)},_=P=>P<1024?P+" B":P<1024*1024?(P/1024).toFixed(1)+" KB":(P/(1024*1024)).toFixed(1)+" MB",j=P=>{o({...s,titulo:s.titulo||P.nombre,categoria:P.categoria,etiquetas:Array.from(new Set([...s.etiquetas,...P.etiquetas])),contenidoHtml:P.contenidoHtml}),p(!1),r({title:"Plantilla aplicada correctamente"})};return a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>n("/manuales"),"data-testid":"button-back",children:a.jsx(ju,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:i?"Nuevo Manual":"Editar Manual"})}),i&&a.jsxs(Un,{open:f,onOpenChange:p,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{variant:"outline","data-testid":"button-use-template",children:[a.jsx(Q9,{className:"h-4 w-4 mr-2"}),"Usar Plantilla"]})}),a.jsxs(zn,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Seleccionar Plantilla"}),a.jsx(Qn,{children:"Elige una plantilla predefinida para comenzar tu manual"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:c9e.map(P=>a.jsx(Fe,{className:"cursor-pointer hover-elevate active-elevate-2",onClick:()=>j(P),"data-testid":`template-${P.id}`,children:a.jsxs(Be,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:P.nombre}),a.jsx(Zt,{className:"text-sm mb-3",children:P.descripcion}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ge,{variant:"outline",children:P.categoria}),P.etiquetas.slice(0,2).map(k=>a.jsx(Ge,{variant:"secondary",children:k},k))]})]})},P.id))})]})]}),a.jsx(re,{variant:"outline",onClick:()=>S(!0),disabled:i,"data-testid":"button-save-version",children:"Guardar Versión"}),a.jsxs(re,{onClick:()=>S(!1),"data-testid":"button-save",children:[a.jsx(nS,{className:"h-4 w-4 mr-2"}),"Guardar"]})]}),a.jsxs(Wo,{defaultValue:"editor",className:"space-y-4",children:[a.jsxs(co,{children:[a.jsxs(vn,{value:"editor","data-testid":"tab-editor",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Editor"]}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs(vn,{value:"attachments","data-testid":"tab-attachments",children:[a.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Adjuntos (",m.length,")"]}),a.jsxs(vn,{value:"versions","data-testid":"tab-versions",children:[a.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Versiones (",g.length,")"]})]})]}),a.jsx(Rn,{value:"editor",className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[a.jsx(Fe,{className:"md:col-span-2",children:a.jsxs(Be,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"titulo",children:"Título *"}),a.jsx(Ie,{id:"titulo",value:s.titulo,onChange:P=>o({...s,titulo:P.target.value}),placeholder:"Título del manual...","data-testid":"input-titulo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Editor de Contenido"}),a.jsx(mie,{content:s.contenidoHtml,onChange:P=>o({...s,contenidoHtml:P}),manualId:t.id})]})]})}),a.jsx(Fe,{children:a.jsxs(Be,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"categoria",children:"Categoría"}),a.jsx(Ie,{id:"categoria",value:s.categoria,onChange:P=>o({...s,categoria:P.target.value}),placeholder:"ej: Fiscal, Laboral","data-testid":"input-categoria"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"etiquetas",children:"Etiquetas"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ie,{id:"etiquetas",value:l,onChange:P=>c(P.target.value),onKeyPress:P=>P.key==="Enter"&&(P.preventDefault(),E()),placeholder:"Añadir etiqueta","data-testid":"input-tag"}),a.jsx(re,{type:"button",onClick:E,"data-testid":"button-add-tag",children:"+"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.etiquetas.map(P=>a.jsxs(Ge,{variant:"secondary",className:"cursor-pointer hover-elevate",onClick:()=>C(P),"data-testid":`badge-tag-${P}`,children:[P," ×"]},P))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ye,{htmlFor:"publicado",children:"Publicado"}),a.jsx(ks,{id:"publicado",checked:s.publicado,onCheckedChange:P=>o({...s,publicado:P}),"data-testid":"switch-publicado"})]})]})})]})}),a.jsx(Rn,{value:"attachments",className:"space-y-4",children:a.jsx(Fe,{children:a.jsxs(Be,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-end gap-4",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(ye,{htmlFor:"attachment-file",children:"Subir Adjunto"}),a.jsx(Ie,{id:"attachment-file",type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.zip,.rar,.txt",onChange:P=>d(P.target.files?.[0]||null),"data-testid":"input-attachment-file"})]}),a.jsxs(re,{onClick:T,disabled:!u||y.isPending,"data-testid":"button-upload-attachment",children:[a.jsx(sa,{className:"h-4 w-4 mr-2"}),"Subir"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(ye,{children:["Adjuntos (",m.length,")"]}),a.jsxs("div",{className:"space-y-2",children:[m.map(P=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover-elevate","data-testid":`attachment-${P.id}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Kd,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:P.originalName}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[_(P.fileSize)," • ",new Date(P.uploadedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>window.open(P.filePath,"_blank"),"data-testid":`button-download-${P.id}`,children:a.jsx(Cs,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>b.mutate(P.id),"data-testid":`button-delete-${P.id}`,children:a.jsx(ei,{className:"h-4 w-4 text-destructive"})})]})]},P.id)),m.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No hay adjuntos todavía"})]})]})]})})}),a.jsx(Rn,{value:"versions",className:"space-y-4",children:a.jsx(Fe,{children:a.jsxs(Be,{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs(ye,{children:["Historial de Versiones (",g.length,")"]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Restaura una versión anterior del manual"})]}),a.jsxs("div",{className:"space-y-2",children:[g.map((P,k)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate","data-testid":`version-${P.id}`,children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium",children:["Versión ",P.versionNumber," - ",P.titulo]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(P.createdAt).toLocaleString()})]}),a.jsxs(re,{variant:"outline",size:"sm",onClick:()=>N.mutate(P.id),disabled:k===0,"data-testid":`button-restore-${P.id}`,children:[a.jsx(Ah,{className:"h-4 w-4 mr-2"}),k===0?"Versión Actual":"Restaurar"]})]},P.id)),g.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:'No hay versiones guardadas. Usa "Guardar Versión" para crear una.'})]})]})})})]})]})}async function u9e(){return ht("GET","/api/system/github/updates")}async function d9e(){return ht("GET","/api/system/github/config")}async function f9e(t){return ht("PUT","/api/system/github/config",t)}async function h9e(t){return ht("POST",`/api/system/github/updates/${t}/apply`)}async function p9e(){return ht("GET","/api/system/github/current-commit")}function gie(){const[t,e]=x.useState(null),[n,r]=x.useState([]),[i,s]=x.useState(null),[o,l]=x.useState(!0),[c,u]=x.useState(!1),[d,f]=x.useState(null),[p,h]=x.useState(null),[m,g]=x.useState({githubRepo:"",githubBranch:"main",autoUpdateEnabled:!1,githubToken:"",githubWebhookSecret:""});x.useEffect(()=>{v();const S=setInterval(v,3e4);return()=>clearInterval(S)},[]);const v=async()=>{try{const[S,E,C]=await Promise.all([d9e(),u9e(),p9e()]);e(S),r(E),s(C),g({githubRepo:S.githubRepo,githubBranch:S.githubBranch,autoUpdateEnabled:S.autoUpdateEnabled,githubToken:"",githubWebhookSecret:""})}catch(S){console.error("Error loading GitHub data:",S)}finally{l(!1)}},y=async()=>{u(!0);try{const S={githubRepo:m.githubRepo,githubBranch:m.githubBranch,autoUpdateEnabled:m.autoUpdateEnabled};m.githubToken&&(S.githubToken=m.githubToken),m.githubWebhookSecret&&(S.githubWebhookSecret=m.githubWebhookSecret);const E=await f9e(S);e(E),g(C=>({...C,githubToken:"",githubWebhookSecret:""}))}catch(S){console.error("Error saving config:",S),alert("Error al guardar la configuración")}finally{u(!1)}},b=async S=>{if(confirm("¿Estás seguro de aplicar esta actualización? La aplicación se reiniciará.")){f(S);try{await h9e(S),alert("Actualización iniciada. Recarga la página en unos segundos."),setTimeout(v,3e3)}catch(E){console.error("Error applying update:",E),alert("Error al aplicar la actualización")}finally{f(null)}}},N=S=>{const C={PENDING:{variant:"outline",icon:Uo,text:"Pendiente"},APPLYING:{variant:"default",icon:Yc,text:"Aplicando..."},COMPLETED:{variant:"secondary",icon:tH,text:"Completada"},FAILED:{variant:"destructive",icon:gl,text:"Fallida"},CHECKING:{variant:"outline",icon:Yc,text:"Verificando"},DOWNLOADING:{variant:"default",icon:Cs,text:"Descargando"},INSTALLING:{variant:"default",icon:Yc,text:"Instalando"},ROLLED_BACK:{variant:"destructive",icon:Dm,text:"Revertida"}}[S]||{variant:"outline",icon:Uo,text:S},T=C.icon;return a.jsxs(Ge,{variant:C.variant,className:"gap-1",children:[a.jsx(T,{className:"h-3 w-3"}),C.text]})};return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Yc,{className:"h-8 w-8 animate-spin text-gray-400"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Actualizaciones desde GitHub"}),a.jsx("p",{className:"text-muted-foreground",children:"Configura el sistema de actualizaciones automáticas desde tu repositorio de GitHub"})]}),i&&a.jsxs(fu,{children:[a.jsx(pae,{className:"h-4 w-4"}),a.jsxs(hu,{children:[a.jsx("div",{className:"font-semibold",children:"Commit actual del servidor:"}),a.jsxs("div",{className:"font-mono text-sm mt-1",children:[i.commitHash.substring(0,7)," en rama ",a.jsx("code",{children:i.branch})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(mae,{className:"h-5 w-5"}),"Configuración de GitHub"]}),a.jsx(Zt,{children:"Configura el repositorio y las opciones de actualización automática"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"githubRepo",children:"Repositorio (owner/repo)"}),a.jsx(Ie,{id:"githubRepo",placeholder:"DigitalNexo/Asesoria-la-Llave-V2",value:m.githubRepo,onChange:S=>g(E=>({...E,githubRepo:S.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ejemplo: DigitalNexo/Asesoria-la-Llave-V2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"githubBranch",children:"Rama"}),a.jsx(Ie,{id:"githubBranch",placeholder:"main",value:m.githubBranch,onChange:S=>g(E=>({...E,githubBranch:S.target.value}))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"githubToken",children:"GitHub Personal Access Token"}),a.jsx(Ie,{id:"githubToken",type:"password",placeholder:"ghp_xxxxxxxxxxxxx (opcional)",value:m.githubToken,onChange:S=>g(E=>({...E,githubToken:S.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Necesario solo para repositorios privados"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"githubWebhookSecret",children:"Webhook Secret"}),a.jsx(Ie,{id:"githubWebhookSecret",type:"password",placeholder:"Tu secret para validar webhooks",value:m.githubWebhookSecret,onChange:S=>g(E=>({...E,githubWebhookSecret:S.target.value}))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Para validar las peticiones del webhook"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[a.jsx(ks,{id:"autoUpdate",checked:m.autoUpdateEnabled,onCheckedChange:S=>g(E=>({...E,autoUpdateEnabled:S}))}),a.jsx(ye,{htmlFor:"autoUpdate",className:"cursor-pointer",children:"Aplicar actualizaciones automáticamente"})]}),a.jsx(re,{onClick:y,disabled:c,children:c?a.jsxs(a.Fragment,{children:[a.jsx(Yc,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar Configuración"})]})]}),t&&t.githubRepo&&a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Configuración del Webhook en GitHub"}),a.jsx(Zt,{children:"Copia esta URL y añádela como webhook en tu repositorio de GitHub"})]}),a.jsx(Be,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Payload URL"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ie,{readOnly:!0,value:"https://digitalnexo.es/api/system/github/webhook",className:"font-mono text-sm"}),a.jsx(re,{variant:"outline",onClick:()=>{navigator.clipboard.writeText("https://digitalnexo.es/api/system/github/webhook"),alert("URL copiada al portapapeles")},children:"Copiar"})]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("p",{children:["Content type: ",a.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"application/json"})]}),a.jsxs("p",{children:["Evento: ",a.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"push"})]})]})]})})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Actualizaciones Disponibles"}),a.jsxs(re,{variant:"outline",size:"sm",onClick:v,children:[a.jsx(Yc,{className:"h-4 w-4 mr-2"}),"Recargar"]})]}),a.jsx(Zt,{children:"Historial de commits recibidos desde GitHub"})]}),a.jsx(Be,{children:n.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Cs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No hay actualizaciones disponibles"}),a.jsx("p",{className:"text-sm",children:"Los commits se detectarán automáticamente cuando hagas push a GitHub"})]}):a.jsx("div",{className:"space-y-3",children:n.map(S=>a.jsx("div",{className:"border rounded-lg p-4 space-y-2",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("code",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:S.commit_hash?.substring(0,7)}),N(S.status),S.auto_applied&&a.jsx(Ge,{variant:"outline",className:"text-xs",children:"Auto"})]}),a.jsx("p",{className:"font-medium",children:S.commit_message}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[a.jsx("span",{children:S.commit_author})," · ",a.jsx("span",{children:new Date(S.commit_date).toLocaleString("es-ES")}),S.branch&&a.jsxs(a.Fragment,{children:[" · ",a.jsx("span",{className:"font-mono",children:S.branch})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[(S.status==="PENDING"||S.status==="FAILED")&&a.jsx(re,{size:"sm",onClick:()=>b(S.id),disabled:d===S.id,children:d===S.id?a.jsx(Yc,{className:"h-4 w-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(I9,{className:"h-4 w-4 mr-1"}),"Aplicar"]})}),S.logs&&a.jsxs(re,{variant:"outline",size:"sm",onClick:()=>h(S),children:[a.jsx(ou,{className:"h-4 w-4 mr-1"}),"Logs"]})]})]})},S.id))})})]}),a.jsx(Un,{open:!!p,onOpenChange:()=>h(null),children:a.jsxs(zn,{className:"max-w-4xl max-h-[80vh]",children:[a.jsxs(Hn,{children:[a.jsxs(Vn,{children:["Logs de Actualización",p&&a.jsx("code",{className:"ml-2 text-sm font-mono",children:p.commit_hash?.substring(0,7)})]}),a.jsx(Qn,{children:p?.commit_message})]}),a.jsxs("div",{className:"overflow-auto",children:[a.jsx("pre",{className:"bg-muted p-4 rounded-lg text-xs font-mono whitespace-pre-wrap",children:p?.logs||"Sin logs disponibles"}),p?.error_message&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"font-semibold text-red-600 mb-2",children:"Error:"}),a.jsx("pre",{className:"bg-red-50 border border-red-200 p-4 rounded-lg text-xs font-mono whitespace-pre-wrap text-red-800",children:p.error_message})]})]})]})})]})}function l9(){const{toast:t}=nr(),[e]=es(),[n,r]=x.useState(!1),[i,s]=x.useState(null),[o,l]=x.useState({username:"",email:"",password:"",roleId:""}),[c,u]=x.useState(!1),[d,f]=x.useState(null),[p,h]=x.useState({name:"",description:""}),[m,g]=x.useState([]),[v,y]=x.useState(!1),[b,N]=x.useState(null),[S,E]=x.useState({nombre:"",host:"",port:"587",user:"",password:"",isPredeterminada:!1,activa:!0}),[C,T]=x.useState(!1),{data:_,isLoading:j}=At({queryKey:["/api/users"]}),{data:P,isLoading:k}=At({queryKey:["/api/activity-logs"]}),{data:O}=At({queryKey:["/api/admin/system-settings"]}),{data:M,isLoading:I}=At({queryKey:["/api/roles"]}),{data:B}=At({queryKey:["/api/permissions"]}),{data:U,isLoading:D}=At({queryKey:["/api/admin/smtp-accounts"]}),{data:z}=At({queryKey:["/api/system/config"]}),[H,ee]=x.useState({backup_db_pattern:"",backup_files_pattern:""});x.useEffect(()=>{if(z){const Y=z.find(ot=>ot.key==="backup_db_pattern"),Ce=z.find(ot=>ot.key==="backup_files_pattern");ee({backup_db_pattern:Y?.value||"",backup_files_pattern:Ce?.value||""})}},[z]);const[ae,F]=x.useState(!1),[q,Z]=x.useState(null),{data:te}=At({queryKey:["/api/system/version"]}),{data:ce,isLoading:ue}=At({queryKey:["/api/system/backups"]}),ve=yt({mutationFn:async Y=>await ht("POST","/api/users",Y),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario creado exitosamente"}),r(!1),Pe()}}),oe=yt({mutationFn:async({id:Y,data:Ce})=>await ht("PATCH",`/api/users/${Y}`,Ce),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario actualizado exitosamente"}),r(!1),Pe()}}),pe=yt({mutationFn:async Y=>await ht("DELETE",`/api/users/${Y}`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/users"]}),t({title:"Usuario eliminado exitosamente"})},onError:Y=>{t({title:"Error al eliminar usuario",description:Y.message,variant:"destructive"})}}),xe=yt({mutationFn:async Y=>await ht("PATCH",`/api/users/${Y}/toggle-active`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/users"]}),t({title:"Estado del usuario actualizado"})},onError:Y=>{t({title:"Error al cambiar estado",description:Y.message,variant:"destructive"})}}),X=yt({mutationFn:async Y=>await ht("PATCH","/api/admin/system-settings",{registrationEnabled:Y}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/system-settings"]}),t({title:"Configuración actualizada exitosamente"})},onError:Y=>{t({title:"Error al actualizar configuración",description:Y.message,variant:"destructive"})}}),Se=yt({mutationFn:async Y=>{const Ce=await ht("POST","/api/roles",Y);return m.length>0&&await ht("POST",`/api/roles/${Ce.id}/permissions`,{permissionIds:m}),Ce},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol creado exitosamente"}),u(!1),it()}}),W=yt({mutationFn:async({id:Y,data:Ce})=>{const ot=await ht("PATCH",`/api/roles/${Y}`,Ce);return await ht("POST",`/api/roles/${Y}/permissions`,{permissionIds:m}),ot},onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol actualizado exitosamente"}),u(!1),it()}}),G=yt({mutationFn:async Y=>await ht("DELETE",`/api/roles/${Y}`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/roles"]}),t({title:"Rol eliminado exitosamente"})},onError:Y=>{t({title:"Error al eliminar rol",description:Y.message,variant:"destructive"})}}),_e=yt({mutationFn:async Y=>await ht("POST","/api/admin/smtp-accounts",Y),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP creada exitosamente"}),y(!1),pt()}}),Qe=yt({mutationFn:async({id:Y,data:Ce})=>await ht("PATCH",`/api/admin/smtp-accounts/${Y}`,Ce),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP actualizada exitosamente"}),y(!1),pt()}}),ze=yt({mutationFn:async Y=>await ht("DELETE",`/api/admin/smtp-accounts/${Y}`,{}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/smtp-accounts"]}),t({title:"Cuenta SMTP eliminada exitosamente"})}}),Re=yt({mutationFn:async Y=>await ht("POST","/api/admin/smtp-accounts/test",Y),onSuccess:()=>{t({title:"Conexión SMTP exitosa",description:"La configuración es válida"})},onError:Y=>{t({title:"Error de conexión SMTP",description:Y.message,variant:"destructive"})}}),se=yt({mutationFn:async({key:Y,value:Ce})=>await ht("PUT",`/api/system/config/${Y}`,{value:Ce}),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/system/config"]}),t({title:"Patrón de backup actualizado exitosamente"})},onError:Y=>{t({title:"Error al actualizar patrón",description:Y.message,variant:"destructive"})}}),[ge,Ne]=x.useState({repoUrl:"",branch:"main"}),{data:De}=At({queryKey:["/api/admin/github-config"]});x.useEffect(()=>{De&&Ne({repoUrl:De.repoUrl||"",branch:De.branch||"main"})},[De]),yt({mutationFn:async Y=>await ht("PUT","/api/admin/github-config",Y),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/github-config"]}),Lt.invalidateQueries({queryKey:["/api/system/version"]}),t({title:"Configuración de GitHub guardada exitosamente"})},onError:Y=>{t({title:"Error al guardar configuración",description:Y.message,variant:"destructive"})}}),yt({mutationFn:async()=>(F(!0),await ht("GET","/api/system/version")),onSuccess:Y=>{F(!1),Lt.invalidateQueries({queryKey:["/api/system/version"]}),Y.updateAvailable?(Z({version:Y.latestVersion,changelog:Y.changelog}),t({title:"Actualización disponible",description:`Versión ${Y.latestVersion} disponible`})):t({title:"Sistema actualizado",description:"Ya tienes la última versión instalada"})},onError:Y=>{F(!1),t({title:"Error al comprobar actualizaciones",description:Y.message,variant:"destructive"})}}),yt({mutationFn:async()=>await ht("POST","/api/system/update",{}),onSuccess:()=>{t({title:"Actualización iniciada",description:"El sistema se actualizará y reiniciará automáticamente"}),Z(null),Lt.invalidateQueries({queryKey:["/api/system/version"]})},onError:Y=>{t({title:"Error al actualizar",description:Y.message,variant:"destructive"})}}),yt({mutationFn:async Y=>await ht("POST",`/api/system/restore/${Y}`,{}),onSuccess:()=>{t({title:"Restauración iniciada",description:"El sistema se restaurará y reiniciará automáticamente"}),Lt.invalidateQueries({queryKey:["/api/system/backups"]})},onError:Y=>{t({title:"Error al restaurar",description:Y.message,variant:"destructive"})}});const Le=Y=>{if(!Y)return"";const Ce=new Date;function ot(ln){const Ut=new Date(ln.getTime());Ut.setHours(0,0,0,0),Ut.setDate(Ut.getDate()+4-(Ut.getDay()||7));const Wn=new Date(Ut.getFullYear(),0,1);return Math.ceil(((Ut.getTime()-Wn.getTime())/864e5+1)/7)}function mn(ln){const Wn=new Date(ln.getFullYear(),ln.getMonth(),1).getDay(),ki=1+(Wn===0?1:Wn===1?0:8-Wn),ps=ln.getDate();return ps<ki?0:Math.floor((ps-ki)/7)+1}const gt=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],lt=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],ft={"{fecha}":Ce.toISOString().split("T")[0].replace(/-/g,""),"{hora}":Ce.toTimeString().split(" ")[0].replace(/:/g,""),"{version}":"1.0.0","{timestamp}":Date.now().toString(),"{YEAR_4}":Ce.getFullYear().toString(),"{YEAR_2}":Ce.getFullYear().toString().slice(-2),"{MONTH_NUMBER}":(Ce.getMonth()+1).toString().padStart(2,"0"),"{MONTH_NAME}":gt[Ce.getMonth()],"{MONTH_DAY_NUMBER}":Ce.getDate().toString().padStart(2,"0"),"{WEEK_DAY_NUMBER}":(Ce.getDay()||7).toString(),"{WEEK_DAY_NAME}":lt[Ce.getDay()],"{HOURS}":Ce.getHours().toString().padStart(2,"0"),"{MINUTES}":Ce.getMinutes().toString().padStart(2,"0"),"{SECONDS}":Ce.getSeconds().toString().padStart(2,"0"),"{WEEK_NUMBER}":ot(Ce).toString(),"{WEEK_NUMBER_IN_THE_MONTH}":mn(Ce).toString()};let _t=Y;return Object.entries(ft).forEach(([ln,Ut])=>{_t=_t.replaceAll(ln,Ut)}),_t},Pe=()=>{l({username:"",email:"",password:"",roleId:M?.[0]?.id||""}),s(null)},qe=Y=>{s(Y),l({username:Y.username,email:Y.email,password:"",roleId:Y.roleId||""}),r(!0)},ut=Y=>{if(Y.preventDefault(),i){const Ce={username:o.username,email:o.email,roleId:o.roleId};o.password&&(Ce.password=o.password),oe.mutate({id:i.id,data:Ce})}else ve.mutate(o)},it=()=>{h({name:"",description:""}),g([]),f(null)},pt=()=>{E({nombre:"",host:"",port:"587",user:"",password:"",isPredeterminada:!1,activa:!0}),N(null)},It=Y=>{N(Y),E({nombre:Y.nombre,host:Y.host,port:Y.port.toString(),user:Y.user,password:"",isPredeterminada:Y.isPredeterminada,activa:Y.activa}),y(!0)},mt=Y=>{if(Y.preventDefault(),b){const Ce={...S};Ce.password||delete Ce.password,Qe.mutate({id:b.id,data:Ce})}else _e.mutate(S)},yn=()=>{T(!0),Re.mutate({host:S.host,port:S.port,user:S.user,password:S.password},{onSettled:()=>T(!1)})},pn=Y=>{f(Y),h({name:Y.name,description:Y.description||""});const Ce=Y.permissions?.map(ot=>ot.permission.id)||[];g(Ce),u(!0)},Ct=Y=>{Y.preventDefault(),d?W.mutate({id:d.id,data:p}):Se.mutate(p)},en=Y=>{g(Ce=>Ce.includes(Y)?Ce.filter(ot=>ot!==Y):[...Ce,Y])},qn=Y=>{if(!Y)return a.jsx(Ge,{variant:"outline",children:"Sin rol"});const Ce=M?.find(mn=>mn.id===Y);if(!Ce)return a.jsx(Ge,{variant:"outline",children:"Sin rol"});const ot=Ce.isSystem?"text-primary bg-primary/10":"text-chart-2 bg-chart-2/10";return a.jsx(Ge,{variant:"outline",className:ot,children:Ce.name})},Vt=Y=>{const Ce={clientes:"text-chart-1 bg-chart-1/10",impuestos:"text-chart-2 bg-chart-2/10",tareas:"text-chart-3 bg-chart-3/10",manuales:"text-chart-4 bg-chart-4/10",usuarios:"text-chart-5 bg-chart-5/10"};return a.jsx(Ge,{variant:"outline",className:Ce[Y]||"text-muted-foreground bg-muted",children:Y})},fn=Y=>Y?Y.startsWith("/admin/sessions")?"sessions":Y.startsWith("/admin/smtp-accounts")?"smtp-accounts":Y.startsWith("/admin/storage-config")?"storage":"users":"users",[nn,vr]=x.useState(()=>fn(e));x.useEffect(()=>{vr(fn(e))},[e]);const[ar,on]=x.useState(!1),{data:Nt,isLoading:me}=At({queryKey:["/api/admin/sessions",ar?"all":"active"],queryFn:async()=>{const Ce=await fetch(ar?"/api/admin/sessions/all":"/api/admin/sessions",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ce.ok)throw new Error("Error al cargar sesiones");return Ce.json()},enabled:nn==="sessions",refetchInterval:5e3});return j||k?a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsx(Fn,{className:"h-9 w-48"}),a.jsx("div",{className:"space-y-4",children:[...Array(5)].map((Y,Ce)=>a.jsx(Fn,{className:"h-16"},Ce))})]}):a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Administración"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestión de usuarios y configuración del sistema"})]}),a.jsxs(Wo,{value:nn,onValueChange:Y=>vr(Y),className:"space-y-6",children:[a.jsxs(co,{className:"h-auto grid grid-cols-2 md:grid-cols-4 gap-1 p-1",children:[a.jsxs(vn,{value:"users","data-testid":"tab-users",children:[a.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Usuarios"]}),a.jsxs(vn,{value:"roles","data-testid":"tab-roles",children:[a.jsx(Kf,{className:"h-4 w-4 mr-2"}),"Roles y Permisos"]}),a.jsxs(vn,{value:"logs","data-testid":"tab-logs",children:[a.jsx(h2,{className:"h-4 w-4 mr-2"}),"Logs de Actividad"]}),a.jsxs(vn,{value:"settings","data-testid":"tab-settings",children:[a.jsx(eS,{className:"h-4 w-4 mr-2"}),"Configuración"]}),a.jsxs(vn,{value:"smtp-accounts","data-testid":"tab-smtp-accounts",children:[a.jsx(RP,{className:"h-4 w-4 mr-2"}),"Cuentas SMTP"]}),a.jsx(vn,{value:"sessions","data-testid":"tab-sessions",children:a.jsxs(ny,{href:"/admin/sessions",className:"flex items-center",children:[a.jsx(Dd,{className:"h-4 w-4 mr-2"}),"Usuarios conectados"]})}),a.jsxs(vn,{value:"system-updates","data-testid":"tab-system-updates",children:[a.jsx(Yc,{className:"h-4 w-4 mr-2"}),"Actualizaciones"]}),a.jsxs(vn,{value:"storage","data-testid":"tab-storage",children:[a.jsx(Kk,{className:"h-4 w-4 mr-2"}),"Almacenamiento"]})]}),a.jsxs(Rn,{value:"users",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestión de Usuarios"}),a.jsxs(Un,{open:n,onOpenChange:r,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:Pe,"data-testid":"button-add-user",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:i?"Editar Usuario":"Nuevo Usuario"}),a.jsx(Qn,{children:i?"Actualiza los datos del usuario":"Crea un nuevo usuario del sistema"})]}),a.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"username",children:"Usuario *"}),a.jsx(Ie,{id:"username",value:o.username,onChange:Y=>l({...o,username:Y.target.value}),required:!0,"data-testid":"input-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"email",children:"Email *"}),a.jsx(Ie,{id:"email",type:"email",value:o.email,onChange:Y=>l({...o,email:Y.target.value}),required:!0,"data-testid":"input-email"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"password",children:i?"Nueva Contraseña (dejar en blanco para no cambiar)":"Contraseña *"}),a.jsx(Ie,{id:"password",type:"password",value:o.password,onChange:Y=>l({...o,password:Y.target.value}),required:!i,"data-testid":"input-password"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"role",children:"Rol *"}),a.jsxs(un,{value:o.roleId,onValueChange:Y=>l({...o,roleId:Y}),children:[a.jsx(sn,{"data-testid":"select-role",children:a.jsx(dn,{placeholder:"Selecciona un rol"})}),a.jsx(an,{children:M?.map(Y=>a.jsx(Ke,{value:Y.id,children:Y.name},Y.id))})]})]}),a.jsxs(oi,{children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{r(!1),Pe()},children:"Cancelar"}),a.jsx(re,{type:"submit","data-testid":"button-submit-user",children:i?"Actualizar":"Crear"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{children:["Usuarios del Sistema (",_?.length||0,")"]})}),a.jsx(Be,{children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Usuario"}),a.jsx($e,{children:"Email"}),a.jsx($e,{children:"Rol"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Fecha de Creación"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:!_||_.length===0?a.jsx(Gt,{children:a.jsx(Me,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No hay usuarios registrados"})}):_.map(Y=>a.jsxs(Gt,{"data-testid":`row-user-${Y.id}`,children:[a.jsx(Me,{className:"font-medium",children:Y.username}),a.jsx(Me,{children:Y.email}),a.jsx(Me,{children:qn(Y.roleId)}),a.jsx(Me,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ge,{variant:Y.isActive?"default":"secondary","data-testid":`badge-status-${Y.id}`,children:Y.isActive?"Activo":"Inactivo"}),a.jsx(ks,{checked:Y.isActive,onCheckedChange:()=>xe.mutate(Y.id),disabled:xe.isPending,"data-testid":`switch-active-${Y.id}`})]})}),a.jsx(Me,{children:new Date(Y.createdAt).toLocaleDateString()}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>qe(Y),"data-testid":`button-edit-${Y.id}`,children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>pe.mutate(Y.id),"data-testid":`button-delete-${Y.id}`,children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},Y.id))})]})})]})]}),a.jsxs(Rn,{value:"roles",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestión de Roles y Permisos"}),a.jsxs(Un,{open:c,onOpenChange:u,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:it,"data-testid":"button-add-role",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nuevo Rol"]})}),a.jsxs(zn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:d?"Editar Rol":"Nuevo Rol"}),a.jsx(Qn,{children:d?"Actualiza el rol y sus permisos":"Crea un nuevo rol personalizado con permisos específicos"})]}),a.jsxs("form",{onSubmit:Ct,className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"role-name",children:"Nombre del Rol *"}),a.jsx(Ie,{id:"role-name",value:p.name,onChange:Y=>h({...p,name:Y.target.value}),required:!0,disabled:d?.isSystem,placeholder:"Ej: Contable Senior","data-testid":"input-role-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"role-description",children:"Descripción"}),a.jsx(Ie,{id:"role-description",value:p.description,onChange:Y=>h({...p,description:Y.target.value}),placeholder:"Descripción del rol...","data-testid":"input-role-description"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ye,{className:"text-base font-semibold",children:"Permisos"}),a.jsx("div",{className:"border rounded-lg p-4 space-y-4 max-h-96 overflow-y-auto",children:Object.entries(B?.reduce((Y,Ce)=>(Y[Ce.resource]||(Y[Ce.resource]=[]),Y[Ce.resource].push(Ce),Y),{})||{}).map(([Y,Ce])=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium capitalize text-sm",children:Y}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pl-4",children:Ce.map(ot=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:ot.id,checked:m.includes(ot.id),onCheckedChange:()=>en(ot.id),"data-testid":`checkbox-permission-${ot.resource}-${ot.action}`}),a.jsx(ye,{htmlFor:ot.id,className:"text-sm font-normal cursor-pointer",children:ot.action})]},ot.id))})]},Y))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.length," permiso(s) seleccionado(s)"]})]}),a.jsxs(oi,{children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{u(!1),it()},children:"Cancelar"}),a.jsx(re,{type:"submit","data-testid":"button-submit-role",children:d?"Actualizar":"Crear"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{children:["Roles del Sistema (",M?.length||0,")"]})}),a.jsx(Be,{children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Nombre del Rol"}),a.jsx($e,{children:"Descripción"}),a.jsx($e,{children:"Usuarios"}),a.jsx($e,{children:"Permisos"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:!M||M.length===0?a.jsx(Gt,{children:a.jsx(Me,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No hay roles configurados"})}):M.map(Y=>a.jsxs(Gt,{"data-testid":`row-role-${Y.id}`,children:[a.jsx(Me,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[Y.name,Y.isSystem&&a.jsxs(Ge,{variant:"outline",className:"text-xs",children:[a.jsx(TP,{className:"h-3 w-3 mr-1"}),"Sistema"]})]})}),a.jsx(Me,{className:"text-muted-foreground",children:Y.description||"-"}),a.jsx(Me,{children:a.jsxs(Ge,{variant:"outline",children:[Y._count?.users||0," usuarios"]})}),a.jsx(Me,{children:a.jsxs(Ge,{variant:"outline",children:[Y.permissions?.length||0," permisos"]})}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>pn(Y),"data-testid":`button-edit-role-${Y.id}`,children:a.jsx(ec,{className:"h-4 w-4"})}),!Y.isSystem&&a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>G.mutate(Y.id),"data-testid":`button-delete-role-${Y.id}`,children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},Y.id))})]})})]})]}),a.jsxs(Rn,{value:"logs",className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Registro de Actividad"}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Actividad Reciente"})}),a.jsx(Be,{className:"p-0",children:!P||P.length===0?a.jsx("div",{className:"text-center text-muted-foreground py-12",children:"No hay actividad registrada"}):a.jsx("div",{className:"divide-y",children:P.slice(0,50).map(Y=>a.jsx("div",{className:"p-4 hover-elevate","data-testid":`row-log-${Y.id}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("p",{className:"font-medium",children:Y.user?.username||"Usuario desconocido"}),Vt(Y.modulo)]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Y.accion}),Y.detalles&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Y.detalles})]}),a.jsx("time",{className:"text-sm text-muted-foreground",children:new Date(Y.fecha).toLocaleString()})]})},Y.id))})})]})]}),a.jsxs(Rn,{value:"settings",className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Configuración del Sistema"}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Control de Acceso"})}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(ye,{htmlFor:"registration-enabled",children:"Permitir registro de nuevos usuarios"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cuando está deshabilitado, solo los administradores pueden crear usuarios"})]}),a.jsx(ks,{id:"registration-enabled",checked:O?.registrationEnabled??!0,onCheckedChange:Y=>X.mutate(Y),"data-testid":"switch-registration"})]})})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Configuración de Backups"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Personaliza los patrones de nombres para los archivos de respaldo"})]}),a.jsxs(Be,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"backup-db-pattern",children:"Patrón para Backup de Base de Datos"}),a.jsx(Ie,{id:"backup-db-pattern",value:H.backup_db_pattern,onChange:Y=>ee({...H,backup_db_pattern:Y.target.value}),placeholder:"backup_db_{fecha}_{hora}","data-testid":"input-backup-db-pattern"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vista previa: ",a.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[Le(H.backup_db_pattern),".sql"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"backup-files-pattern",children:"Patrón para Backup de Archivos"}),a.jsx(Ie,{id:"backup-files-pattern",value:H.backup_files_pattern,onChange:Y=>ee({...H,backup_files_pattern:Y.target.value}),placeholder:"backup_files_{fecha}_{hora}","data-testid":"input-backup-files-pattern"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Vista previa: ",a.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[Le(H.backup_files_pattern),".zip"]})]})]})]}),a.jsxs("div",{className:"bg-muted/50 p-4 rounded-md space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Variables disponibles:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{fecha}"})," - Fecha actual (YYYYMMDD)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{hora}"})," - Hora actual (HHMMSS)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{version}"})," - Versión del sistema"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{timestamp}"})," - Timestamp Unix"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{YEAR_4}"})," - Año 4 dígitos (2025)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{YEAR_2}"})," - Año 2 dígitos (25)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_NUMBER}"})," - Mes numérico (01-12)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_NAME}"})," - Nombre del mes (Enero-Diciembre)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MONTH_DAY_NUMBER}"})," - Día del mes (01-31)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_DAY_NUMBER}"})," - Día semana numérico (1-7)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_DAY_NAME}"})," - Día de la semana (Lunes-Domingo)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{HOURS}"})," - Hora en formato 24h (00-23)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{MINUTES}"})," - Minutos (00-59)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{SECONDS}"})," - Segundos (00-59)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_NUMBER}"})," - Semana ISO-8601 del año (1-53)"]}),a.jsxs("div",{children:[a.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"{WEEK_NUMBER_IN_THE_MONTH}"})," - Semana del mes (0-5)"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{onClick:()=>{se.mutate({key:"backup_db_pattern",value:H.backup_db_pattern})},disabled:!H.backup_db_pattern,"data-testid":"button-save-db-pattern",children:"Guardar Patrón BD"}),a.jsx(re,{onClick:()=>{se.mutate({key:"backup_files_pattern",value:H.backup_files_pattern})},disabled:!H.backup_files_pattern,"data-testid":"button-save-files-pattern",variant:"outline",children:"Guardar Patrón Archivos"})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Personalización"})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"company-name",children:"Nombre de la Empresa"}),a.jsx(Ie,{id:"company-name",defaultValue:"Asesoría La Llave","data-testid":"input-company-name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"logo",children:"Logo de la Empresa"}),a.jsx(Ie,{id:"logo",type:"file",accept:"image/*","data-testid":"input-logo"})]}),a.jsx(re,{"data-testid":"button-save-branding",children:"Guardar Cambios"})]})]})]}),a.jsxs(Rn,{value:"smtp-accounts",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Cuentas SMTP"}),a.jsxs(Un,{open:v,onOpenChange:y,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>pt(),"data-testid":"button-add-smtp-account",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nueva Cuenta SMTP"]})}),a.jsxs(zn,{className:"sm:max-w-[600px]",children:[a.jsxs(Hn,{children:[a.jsxs(Vn,{children:[b?"Editar":"Nueva"," Cuenta SMTP"]}),a.jsx(Qn,{children:"Configure una cuenta SMTP para el envío de notificaciones"})]}),a.jsxs("form",{onSubmit:mt,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx(ye,{htmlFor:"smtp-nombre",children:"Nombre de la Cuenta *"}),a.jsx(Ie,{id:"smtp-nombre",value:S.nombre,onChange:Y=>E({...S,nombre:Y.target.value}),placeholder:"Ej: Gmail Principal",required:!0,"data-testid":"input-smtp-nombre"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"smtp-form-host",children:"Servidor SMTP *"}),a.jsx(Ie,{id:"smtp-form-host",value:S.host,onChange:Y=>E({...S,host:Y.target.value}),placeholder:"smtp.gmail.com",required:!0,"data-testid":"input-smtp-form-host"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"smtp-form-port",children:"Puerto *"}),a.jsx(Ie,{id:"smtp-form-port",type:"number",value:S.port,onChange:Y=>E({...S,port:Y.target.value}),placeholder:"587",required:!0,"data-testid":"input-smtp-form-port"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"smtp-form-user",children:"Usuario *"}),a.jsx(Ie,{id:"smtp-form-user",value:S.user,onChange:Y=>E({...S,user:Y.target.value}),placeholder:"usuario@gmail.com",required:!0,"data-testid":"input-smtp-form-user"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"smtp-form-password",children:"Contraseña *"}),a.jsx(Ie,{id:"smtp-form-password",type:"password",value:S.password,onChange:Y=>E({...S,password:Y.target.value}),placeholder:b?"(dejar vacío para mantener)":"",required:!b,"data-testid":"input-smtp-form-password"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"smtp-predeterminada",checked:S.isPredeterminada,onCheckedChange:Y=>E({...S,isPredeterminada:!!Y}),"data-testid":"checkbox-smtp-predeterminada"}),a.jsx(ye,{htmlFor:"smtp-predeterminada",className:"text-sm",children:"Cuenta Predeterminada"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"smtp-activa",checked:S.activa,onCheckedChange:Y=>E({...S,activa:!!Y}),"data-testid":"checkbox-smtp-activa"}),a.jsx(ye,{htmlFor:"smtp-activa",className:"text-sm",children:"Activa"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{type:"button",variant:"outline",onClick:yn,disabled:!S.host||!S.port||!S.user||!S.password||C,"data-testid":"button-test-smtp",children:C?"Probando...":"Probar Conexión"}),a.jsxs(re,{type:"submit","data-testid":"button-submit-smtp",children:[b?"Actualizar":"Crear"," Cuenta"]})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Cuentas SMTP Configuradas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona múltiples cuentas SMTP para el envío de notificaciones"})]}),a.jsx(Be,{children:D?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Fn,{className:"h-12 w-full"}),a.jsx(Fn,{className:"h-12 w-full"})]}):U&&U.length>0?a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Servidor"}),a.jsx($e,{children:"Puerto"}),a.jsx($e,{children:"Usuario"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Acciones"})]})}),a.jsx(ai,{children:U.map(Y=>a.jsxs(Gt,{children:[a.jsxs(Me,{className:"font-medium",children:[Y.nombre,Y.isPredeterminada&&a.jsx(Ge,{variant:"secondary",className:"ml-2",children:"Predeterminada"})]}),a.jsx(Me,{children:Y.host}),a.jsx(Me,{children:Y.port}),a.jsx(Me,{children:Y.user}),a.jsx(Me,{children:a.jsx(Ge,{variant:Y.activa?"default":"secondary",children:Y.activa?"Activa":"Inactiva"})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>It(Y),"data-testid":`button-edit-smtp-${Y.id}`,children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>ze.mutate(Y.id),"data-testid":`button-delete-smtp-${Y.id}`,children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},Y.id))})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay cuentas SMTP configuradas. Crea una para empezar."})})]})]}),a.jsxs(Rn,{value:"sessions",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Gestión de Sesiones"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitoreo avanzado de sesiones de usuario"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:ar?"default":"outline",size:"sm",onClick:()=>on(!ar),children:ar?"Solo Activas":"Ver Todas"}),a.jsxs(re,{variant:"outline",size:"sm",onClick:async()=>{try{const Y=await ht("POST","/api/admin/sessions/cleanup");Lt.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:"Limpieza completada",description:`${Y.totalCleaned} sesiones procesadas (${Y.deletedCount} eliminadas, ${Y.markedInactiveCount} marcadas como inactivas)`})}catch(Y){t({title:"Error",description:Y.message||String(Y),variant:"destructive"})}},children:[a.jsx(F9,{className:"h-4 w-4 mr-2"}),"Limpiar Sesiones"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Fe,{children:a.jsx(Be,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sesiones Activas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt?.items?.filter(Y=>Y.status==="active").length||0})]}),a.jsx(h2,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Fe,{children:a.jsx(Be,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sesiones Inactivas"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Nt?.items?.filter(Y=>Y.status==="idle").length||0})]}),a.jsx(h2,{className:"h-8 w-8 text-yellow-600"})]})})}),a.jsx(Fe,{children:a.jsx(Be,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sospechosas"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:Nt?.items?.filter(Y=>Y.suspicious).length||0})]}),a.jsx(Kf,{className:"h-8 w-8 text-red-600"})]})})}),a.jsx(Fe,{children:a.jsx(Be,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sesiones"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Nt?.total||0})]}),a.jsx(Dd,{className:"h-8 w-8 text-blue-600"})]})})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{children:[ar?"Todas las Sesiones":"Sesiones Activas"," (",Nt?.total??0,")",ar&&a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Incluye sesiones cerradas)"})]})}),a.jsx(Be,{children:me?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Fn,{className:"h-12 w-full"}),a.jsx(Fn,{className:"h-12 w-full"})]}):!Nt||!Nt.items||Nt.items.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay sesiones"}):a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Usuario"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"IP / Ubicación"}),a.jsx($e,{children:"Dispositivo"}),a.jsx($e,{children:"Última Actividad"}),a.jsx($e,{children:"Duración"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:Nt.items.map(Y=>a.jsxs(Gt,{className:Y.suspicious?"bg-red-50 dark:bg-red-950/20":"",children:[a.jsx(Me,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:Y.user?.username||"—"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Y.user?.role?.name||"—"})]}),Y.suspicious&&a.jsx(Kf,{className:"h-4 w-4 text-red-500"})]})}),a.jsx(Me,{children:a.jsx(Ge,{variant:Y.status==="active"?"default":Y.status==="idle"?"secondary":"outline",className:Y.status==="active"?"bg-green-100 text-green-800":Y.status==="idle"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:Y.status==="active"?"Activo":Y.status==="idle"?"Inactivo":"Cerrado"})}),a.jsx(Me,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-mono text-sm",children:Y.ip}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[Y.location?.city,", ",Y.location?.country,Y.location?.isVpn&&a.jsx("span",{className:"text-red-500 ml-1",children:"(VPN)"})]})]})}),a.jsx(Me,{children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:Y.deviceInfo?.type||"Unknown"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Y.deviceInfo?.platform||"Unknown"})]})}),a.jsx(Me,{children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:Y.lastSeenAt?new Date(Y.lastSeenAt).toLocaleString():"-"}),Y.minutesSinceLastSeen!==void 0&&a.jsx("p",{className:"text-xs text-muted-foreground",children:Y.minutesSinceLastSeen<60?`Hace ${Y.minutesSinceLastSeen} min`:`Hace ${Math.floor(Y.minutesSinceLastSeen/60)}h ${Y.minutesSinceLastSeen%60}min`})]})}),a.jsx(Me,{children:a.jsxs("p",{className:"text-sm",children:[Y.createdAt?Math.floor((Date.now()-new Date(Y.createdAt).getTime())/(1e3*60*60)):0,"h"]})}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-1",children:[a.jsx(re,{variant:"destructive",size:"sm",onClick:async()=>{try{await ht("POST",`/api/admin/sessions/${Y.id}/terminate`),Lt.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:"Sesión terminada",description:`La sesión de ${Y.user?.username} ha sido terminada y el usuario será redirigido al login`})}catch(Ce){t({title:"Error",description:Ce.message||String(Ce),variant:"destructive"})}},children:a.jsx(gl,{className:"h-4 w-4"})}),a.jsx(re,{variant:Y.suspicious?"destructive":"outline",size:"sm",onClick:async()=>{try{const Ce=Y.suspicious?"unflag":"flag";await ht("POST",`/api/admin/sessions/${Y.id}/${Ce}`),Lt.invalidateQueries({queryKey:["/api/admin/sessions"]}),t({title:Y.suspicious?"Marcado como seguro":"Marcado como sospechoso",description:Y.suspicious?"La sesión ya no está marcada como sospechosa":"La sesión ha sido marcada como sospechosa"})}catch(Ce){t({title:"Error",description:Ce.message||String(Ce),variant:"destructive"})}},children:a.jsx(Kf,{className:"h-4 w-4"})})]})})]},Y.id))})]})})]})]}),a.jsx(Rn,{value:"system-updates",className:"space-y-4",children:a.jsx(gie,{})}),a.jsx(Rn,{value:"storage",className:"space-y-4",children:a.jsx(m9e,{})})]})]})}function m9e(){const{toast:t}=nr(),[e,n]=x.useState("LOCAL"),[r,i]=x.useState(!1),[s,o]=x.useState(!1),[l,c]=x.useState({host:"",port:"21",username:"",password:"",basePath:"/uploads"}),[u,d]=x.useState({host:"",shareName:"",username:"",password:"",domain:"",basePath:"/uploads"}),{data:f,isLoading:p}=At({queryKey:["/api/admin/storage-config"]});x.useEffect(()=>{f&&(n(f.type),i(f.active),f.type==="FTP"&&f.config?c({host:f.config.host||"",port:(f.config.port||21).toString(),username:f.config.username||"",password:"",basePath:f.config.basePath||"/uploads"}):f.type==="SMB"&&f.config&&d({host:f.config.host||"",shareName:f.config.shareName||"",username:f.config.username||"",password:"",domain:f.config.domain||"",basePath:f.config.basePath||"/uploads"}))},[f]);const h=yt({mutationFn:async v=>ht("POST","/api/admin/storage-config",v),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/admin/storage-config"]}),t({title:"Configuración guardada",description:"La configuración de almacenamiento se ha actualizado correctamente"})},onError:v=>{t({title:"Error",description:v.message||"No se pudo guardar la configuración",variant:"destructive"})}}),m=async()=>{o(!0);try{const y=await ht("POST","/api/admin/storage-config/test",{type:e,config:e==="FTP"?l:e==="SMB"?u:null});t({title:"Conexión exitosa",description:y.message||"La conexión se estableció correctamente"})}catch(v){t({title:"Error de conexión",description:v.message||"No se pudo conectar al servidor",variant:"destructive"})}finally{o(!1)}},g=()=>{const v=e==="LOCAL"?null:e==="FTP"?{...l,port:parseInt(l.port)}:u;h.mutate({type:e,active:r,config:v})};return p?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Fn,{className:"h-8 w-64"}),a.jsx(Fn,{className:"h-32"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Configuración de Almacenamiento"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configura dónde se almacenan los archivos del sistema"})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs(et,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Proveedor de Almacenamiento"}),f&&a.jsx(Ge,{variant:f.active?"default":"secondary",children:f.active?"Activo":"Inactivo"})]})}),a.jsxs(Be,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Tipo de Almacenamiento"}),a.jsxs(un,{value:e,onValueChange:v=>n(v),children:[a.jsx(sn,{"data-testid":"select-storage-type",children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"LOCAL",children:"Local (Servidor)"}),a.jsx(Ke,{value:"FTP",children:"FTP"}),a.jsx(Ke,{value:"SMB",children:"SMB/CIFS (NAS)"})]})]})]}),e==="LOCAL"&&a.jsx("div",{className:"rounded-lg border p-4 bg-muted/50",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(gae,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium",children:"Almacenamiento Local"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Los archivos se guardan en el servidor en: ",a.jsx("code",{className:"px-1 py-0.5 bg-background rounded text-xs",children:"/uploads"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"No requiere configuración adicional."})]})]})}),e==="FTP"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"ftp-host",children:"Servidor FTP *"}),a.jsx(Ie,{id:"ftp-host",value:l.host,onChange:v=>c({...l,host:v.target.value}),placeholder:"ftp.ejemplo.com","data-testid":"input-ftp-host"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"ftp-port",children:"Puerto *"}),a.jsx(Ie,{id:"ftp-port",type:"number",value:l.port,onChange:v=>c({...l,port:v.target.value}),placeholder:"21","data-testid":"input-ftp-port"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"ftp-username",children:"Usuario *"}),a.jsx(Ie,{id:"ftp-username",value:l.username,onChange:v=>c({...l,username:v.target.value}),"data-testid":"input-ftp-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"ftp-password",children:"Contraseña *"}),a.jsx(Ie,{id:"ftp-password",type:"password",value:l.password,onChange:v=>c({...l,password:v.target.value}),placeholder:"Dejar vacío para mantener actual","data-testid":"input-ftp-password"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"ftp-basePath",children:"Ruta Base"}),a.jsx(Ie,{id:"ftp-basePath",value:l.basePath,onChange:v=>c({...l,basePath:v.target.value}),placeholder:"/uploads","data-testid":"input-ftp-basepath"})]})]}),e==="SMB"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-host",children:"Servidor SMB *"}),a.jsx(Ie,{id:"smb-host",value:u.host,onChange:v=>d({...u,host:v.target.value}),placeholder:"192.168.1.100","data-testid":"input-smb-host"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-share",children:"Nombre del Recurso Compartido *"}),a.jsx(Ie,{id:"smb-share",value:u.shareName,onChange:v=>d({...u,shareName:v.target.value}),placeholder:"archivos","data-testid":"input-smb-share"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-username",children:"Usuario *"}),a.jsx(Ie,{id:"smb-username",value:u.username,onChange:v=>d({...u,username:v.target.value}),"data-testid":"input-smb-username"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-password",children:"Contraseña *"}),a.jsx(Ie,{id:"smb-password",type:"password",value:u.password,onChange:v=>d({...u,password:v.target.value}),placeholder:"Dejar vacío para mantener actual","data-testid":"input-smb-password"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-domain",children:"Dominio (opcional)"}),a.jsx(Ie,{id:"smb-domain",value:u.domain,onChange:v=>d({...u,domain:v.target.value}),placeholder:"WORKGROUP","data-testid":"input-smb-domain"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smb-basePath",children:"Ruta Base"}),a.jsx(Ie,{id:"smb-basePath",value:u.basePath,onChange:v=>d({...u,basePath:v.target.value}),placeholder:"/uploads","data-testid":"input-smb-basepath"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(ye,{htmlFor:"storage-active",className:"font-medium",children:"Activar Configuración"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Esta configuración está activa y se usa para nuevos archivos":"Activa esta configuración para empezar a usarla"})]}),a.jsx(ks,{id:"storage-active",checked:r,onCheckedChange:i,"data-testid":"switch-storage-active"})]}),a.jsxs("div",{className:"flex gap-2",children:[e!=="LOCAL"&&a.jsx(re,{variant:"outline",onClick:m,disabled:s,"data-testid":"button-test-connection",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Gr,{className:"h-4 w-4 mr-2 animate-spin"}),"Probando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ml,{className:"h-4 w-4 mr-2"}),"Probar Conexión"]})}),a.jsx(re,{onClick:g,disabled:h.isPending,"data-testid":"button-save-storage-config",children:h.isPending?"Guardando...":"Guardar Configuración"})]})]})]}),f&&f.type!==e&&a.jsxs(Fe,{className:"border-orange-200 dark:border-orange-900",children:[a.jsx(Je,{children:a.jsxs(et,{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400",children:[a.jsx(l4,{className:"h-5 w-5"}),"Migración de Archivos"]})}),a.jsxs(Be,{children:[a.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Al cambiar el tipo de almacenamiento, los archivos existentes permanecerán en ",f.type,". Puedes migrarlos al nuevo almacenamiento desde la sección de mantenimiento."]}),a.jsxs(re,{variant:"outline",disabled:!0,children:[a.jsx(l4,{className:"h-4 w-4 mr-2"}),"Migrar Archivos (Próximamente)"]})]})]})]})}const g9e={clients:"Clientes",tasks:"Tareas",client_tax:"Impuestos",manuals:"Manuales",users:"Usuarios"},v9e={CREATE:"default",UPDATE:"secondary",DELETE:"destructive"},y9e={CREATE:"Creación",UPDATE:"Actualización",DELETE:"Eliminación"};function x9e(){const[t,e]=x.useState("all"),{data:n=[],isLoading:r}=At({queryKey:["/api/audit",t],queryFn:async()=>{const s=new URLSearchParams;t!=="all"&&s.append("table",t);const o=await fetch(`/api/audit?${s.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error("Error al cargar auditoría");return o.json()}}),i=({anterior:s,nuevo:o})=>{if(!s&&!o)return null;const l=s?JSON.parse(s):{},c=o?JSON.parse(o):{};return a.jsx("div",{className:"mt-2 space-y-1",children:Object.keys({...l,...c}).map(u=>{if(["id","fechaActualizacion","fechaCreacion","created_at","updated_at"].includes(u))return null;const d=l[u],f=c[u];return d===f?null:a.jsxs("div",{className:"text-sm",children:[a.jsxs("span",{className:"font-medium text-muted-foreground",children:[u,":"]})," ",d!==void 0&&a.jsx("span",{className:"line-through text-destructive",children:String(d)}),d!==void 0&&f!==void 0&&" → ",f!==void 0&&a.jsx("span",{className:"text-primary",children:String(f)})]},u)})})};return a.jsxs("div",{className:"container mx-auto py-6 px-4",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Auditoría del Sistema"}),a.jsx("p",{className:"text-muted-foreground",children:"Registro completo de cambios y modificaciones"})]}),a.jsx("div",{className:"mb-6 flex gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vae,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs(un,{value:t,onValueChange:e,children:[a.jsx(sn,{className:"w-[200px]","data-testid":"select-filter-table",children:a.jsx(dn,{placeholder:"Filtrar por módulo"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todos los módulos"}),a.jsx(Ke,{value:"clients",children:"Clientes"}),a.jsx(Ke,{value:"tasks",children:"Tareas"}),a.jsx(Ke,{value:"client_tax",children:"Impuestos"}),a.jsx(Ke,{value:"manuals",children:"Manuales"}),a.jsx(Ke,{value:"users",children:"Usuarios"})]})]})]})}),r?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx("div",{className:"h-4 bg-muted rounded w-1/3 animate-pulse"})}),a.jsx(Be,{children:a.jsx("div",{className:"h-3 bg-muted rounded w-2/3 animate-pulse"})})]},s))}):n.length===0?a.jsx(Fe,{children:a.jsxs(Be,{className:"py-10 text-center",children:[a.jsx(Qr,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No se encontraron registros de auditoría"})]})}):a.jsx("div",{className:"space-y-4",children:n.map(s=>a.jsxs(Fe,{"data-testid":`audit-entry-${s.id}`,children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(et,{className:"text-lg flex items-center gap-2",children:[a.jsx(Ge,{variant:v9e[s.accion],children:y9e[s.accion]}),a.jsx("span",{children:g9e[s.tabla]||s.tabla})]}),a.jsx(Zt,{className:"mt-2",children:s.cambios||"Sin descripción de cambios"})]})})}),a.jsx(Be,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Eh,{className:"h-4 w-4"}),a.jsx("span",{children:s.usuario?.username||"Usuario desconocido"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Uo,{className:"h-4 w-4"}),a.jsx("span",{children:_s(new Date(s.fecha),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:Ro})})]})]}),(s.valorAnterior||s.valorNuevo)&&a.jsx(i,{anterior:s.valorAnterior,nuevo:s.valorNuevo})]})})]},s.id))})]})}const c9=[{key:"{nombre_cliente}",description:"Nombre del cliente"},{key:"{email_cliente}",description:"Email del cliente"},{key:"{fecha_vencimiento}",description:"Fecha de vencimiento"}];function b9e(){const[t,e]=x.useState("plantillas"),{toast:n}=nr(),[r,i]=x.useState(!1),[s,o]=x.useState(null),[l,c]=x.useState({nombre:"",asunto:"",contenidoHTML:""}),[u,d]=x.useState(""),[f,p]=x.useState("all"),[h,m]=x.useState(""),[g,v]=x.useState(!1),{data:y,isLoading:b}=At({queryKey:["/api/notification-templates"]}),{data:N}=At({queryKey:["/api/admin/smtp-accounts"]}),{data:S,isLoading:E}=At({queryKey:["/api/notifications/history"],enabled:t==="historial"}),{data:C,isLoading:T}=At({queryKey:["/api/notifications/scheduled"],enabled:t==="programadas"}),_=yt({mutationFn:async D=>await ht("POST","/api/notification-templates",D),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/notification-templates"]}),i(!1),O(),n({title:"Plantilla creada",description:"La plantilla se ha creado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo crear la plantilla.",variant:"destructive"})}}),j=yt({mutationFn:async({id:D,data:z})=>await ht("PATCH",`/api/notification-templates/${D}`,z),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/notification-templates"]}),i(!1),O(),n({title:"Plantilla actualizada",description:"La plantilla se ha actualizado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo actualizar la plantilla.",variant:"destructive"})}}),P=yt({mutationFn:async D=>await ht("DELETE",`/api/notification-templates/${D}`),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/notification-templates"]}),n({title:"Plantilla eliminada",description:"La plantilla se ha eliminado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo eliminar la plantilla.",variant:"destructive"})}}),k=yt({mutationFn:async D=>g?await ht("POST","/api/notifications/schedule",D):await ht("POST","/api/notifications/send",D),onSuccess:()=>{Lt.invalidateQueries({queryKey:["/api/notifications/history"]}),Lt.invalidateQueries({queryKey:["/api/notifications/scheduled"]}),d(""),p("all"),m(""),v(!1),n({title:g?"Notificación programada":"Notificación enviada",description:g?"La notificación se ha programado correctamente.":"La notificación se ha enviado correctamente."})},onError:()=>{n({title:"Error",description:"No se pudo enviar la notificación.",variant:"destructive"})}}),O=()=>{c({nombre:"",asunto:"",contenidoHTML:""}),o(null)},M=()=>{if(!u)return;const D=y?.find(z=>String(z.id)===u);D&&k.mutate({plantillaId:u,smtpAccountId:h||null,destinatarios:f,asunto:D.asunto,contenido:D.contenidoHTML})},I=D=>{o(D),c({nombre:D.nombre,asunto:D.asunto,contenidoHTML:D.contenidoHTML}),i(!0)},B=D=>{D.preventDefault(),s?j.mutate({id:s.id,data:l}):_.mutate(l)},U=D=>{const z=l.contenidoHTML+" "+D+" ";c({...l,contenidoHTML:z})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-3xl font-display font-bold",children:"Sistema de Notificaciones"})}),a.jsxs(Wo,{value:t,onValueChange:e,className:"space-y-4",children:[a.jsxs(co,{children:[a.jsxs(vn,{value:"plantillas","data-testid":"tab-plantillas",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Plantillas"]}),a.jsxs(vn,{value:"enviar","data-testid":"tab-enviar",children:[a.jsx(Zx,{className:"h-4 w-4 mr-2"}),"Enviar Notificación"]}),a.jsxs(vn,{value:"historial","data-testid":"tab-historial",children:[a.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Historial"]}),a.jsxs(vn,{value:"programadas","data-testid":"tab-programadas",children:[a.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Programadas"]})]}),a.jsxs(Rn,{value:"plantillas",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-display font-semibold",children:"Plantillas de Notificación"}),a.jsxs(Un,{open:r,onOpenChange:i,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>O(),"data-testid":"button-add-template",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nueva Plantilla"]})}),a.jsxs(zn,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsxs(Vn,{children:[s?"Editar":"Nueva"," Plantilla"]}),a.jsx(Qn,{children:"Crea plantillas de notificación reutilizables con variables dinámicas"})]}),a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"template-nombre",children:"Nombre de la Plantilla *"}),a.jsx(Ie,{id:"template-nombre",value:l.nombre,onChange:D=>c({...l,nombre:D.target.value}),placeholder:"Ej: Recordatorio de vencimiento",required:!0,"data-testid":"input-template-nombre"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"template-asunto",children:"Asunto del Email *"}),a.jsx(Ie,{id:"template-asunto",value:l.asunto,onChange:D=>c({...l,asunto:D.target.value}),placeholder:"Ej: Recordatorio: Vencimiento próximo",required:!0,"data-testid":"input-template-asunto"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Variables Disponibles"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c9.map(D=>a.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:()=>U(D.key),"data-testid":`button-variable-${D.key}`,children:[a.jsx(nH,{className:"h-3 w-3 mr-1"}),D.key]},D.key))}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Haz clic en una variable para insertarla en el contenido"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"template-contenido",children:"Contenido HTML *"}),a.jsx(mie,{content:l.contenidoHTML,onChange:D=>c({...l,contenidoHTML:D})})]}),a.jsx(oi,{children:a.jsxs(re,{type:"submit","data-testid":"button-submit-template",children:[s?"Actualizar":"Crear"," Plantilla"]})})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Plantillas Creadas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona tus plantillas de notificación reutilizables"})]}),a.jsx(Be,{children:b?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Fn,{className:"h-12 w-full"}),a.jsx(Fn,{className:"h-12 w-full"})]}):y&&y.length>0?a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Asunto"}),a.jsx($e,{children:"Tipo"}),a.jsx($e,{children:"Variables Usadas"}),a.jsx($e,{children:"Acciones"})]})}),a.jsx(ai,{children:y.map(D=>{const z=c9.filter(H=>D.contenidoHTML.includes(H.key));return a.jsxs(Gt,{children:[a.jsx(Me,{className:"font-medium","data-testid":`text-template-nombre-${D.id}`,children:D.nombre}),a.jsx(Me,{"data-testid":`text-template-asunto-${D.id}`,children:D.asunto}),a.jsx(Me,{"data-testid":`text-template-tipo-${D.id}`,children:a.jsx(Ge,{variant:D.tipo==="RECORDATORIO"?"default":D.tipo==="URGENTE"?"destructive":"secondary",className:"text-xs",children:D.tipo})}),a.jsx(Me,{"data-testid":`text-template-variables-${D.id}`,children:a.jsx("div",{className:"flex flex-wrap gap-1",children:z.length>0?z.map(H=>a.jsx(Ge,{variant:"secondary",className:"text-xs","data-testid":`badge-variable-${H.key.replace(/[{}]/g,"")}-${D.id}`,children:H.key},H.key)):a.jsx("span",{className:"text-sm text-muted-foreground",children:"Sin variables"})})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>I(D),"data-testid":`button-edit-template-${D.id}`,children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>P.mutate(D.id),"data-testid":`button-delete-template-${D.id}`,children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},D.id)})})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay plantillas creadas. Crea una para empezar."})})]})]}),a.jsx(Rn,{value:"enviar",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Enviar Notificación"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Envía notificaciones inmediatas o programadas a tus clientes."})]}),a.jsx(Be,{className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"template-select","data-testid":"label-template-select",children:"Plantilla"}),a.jsxs("select",{id:"template-select",className:"w-full rounded-md border border-input bg-background px-3 py-2","data-testid":"select-template",value:u,onChange:D=>d(D.target.value),children:[a.jsx("option",{value:"",children:"Selecciona una plantilla"}),y?.map(D=>a.jsx("option",{value:D.id,"data-testid":`option-template-${D.id}`,children:D.nombre},D.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{"data-testid":"label-recipients",children:"Destinatarios"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"all-clients",name:"recipients",value:"all",checked:f==="all",onChange:D=>p(D.target.value),"data-testid":"radio-recipients-all"}),a.jsx(ye,{htmlFor:"all-clients",className:"font-normal cursor-pointer",children:"Todos los clientes activos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"autonomos",name:"recipients",value:"AUTONOMO",checked:f==="AUTONOMO",onChange:D=>p(D.target.value),"data-testid":"radio-recipients-autonomo"}),a.jsx(ye,{htmlFor:"autonomos",className:"font-normal cursor-pointer",children:"Solo autónomos"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"radio",id:"empresas",name:"recipients",value:"EMPRESA",checked:f==="EMPRESA",onChange:D=>p(D.target.value),"data-testid":"radio-recipients-empresa"}),a.jsx(ye,{htmlFor:"empresas",className:"font-normal cursor-pointer",children:"Solo empresas"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"smtp-select","data-testid":"label-smtp-select",children:"Cuenta SMTP"}),a.jsxs("select",{id:"smtp-select",className:"w-full rounded-md border border-input bg-background px-3 py-2","data-testid":"select-smtp",value:h,onChange:D=>m(D.target.value),children:[a.jsx("option",{value:"",children:"Usar cuenta predeterminada"}),N?.map(D=>a.jsxs("option",{value:D.id,"data-testid":`option-smtp-${D.id}`,children:[D.nombre," ",D.isPredeterminada?"(Predeterminada)":""]},D.id))]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{"data-testid":"label-preview",children:"Vista Previa"}),a.jsx("div",{className:"border rounded-md p-4 bg-muted/50 min-h-[200px]","data-testid":"div-preview",children:u?a.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:y?.find(D=>String(D.id)===u)?.contenidoHTML?.replace(/{nombre_cliente}/g,'<strong class="text-primary">Cliente Ejemplo</strong>')?.replace(/{email_cliente}/g,'<strong class="text-primary">ejemplo@email.com</strong>')?.replace(/{fecha_vencimiento}/g,'<strong class="text-primary">31/12/2025</strong>')||'<p class="text-sm text-muted-foreground">No se encontró la plantilla</p>'}})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona una plantilla para ver la vista previa"})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"schedule-send","data-testid":"checkbox-schedule",checked:g,onChange:D=>v(D.target.checked)}),a.jsx(ye,{htmlFor:"schedule-send",className:"font-normal cursor-pointer",children:"Programar envío"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(re,{variant:"default","data-testid":"button-send-notification",disabled:!u||k.isPending,onClick:M,children:[a.jsx(RP,{className:"h-4 w-4 mr-2"}),k.isPending?"Enviando...":g?"Programar Envío":"Enviar Ahora"]}),a.jsx(re,{variant:"outline","data-testid":"button-cancel-send",onClick:()=>{d(""),p("all"),m(""),v(!1)},children:"Cancelar"})]})]})]})})]})}),a.jsx(Rn,{value:"historial",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Historial de Notificaciones"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Consulta todas las notificaciones enviadas y su estado."})]}),a.jsxs(Be,{children:[a.jsxs("div",{className:"flex gap-3 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Ie,{placeholder:"Buscar por destinatario...","data-testid":"input-search-history"})}),a.jsxs("select",{className:"rounded-md border border-input bg-background px-3 py-2","data-testid":"select-status-filter",children:[a.jsx("option",{value:"",children:"Todos los estados"}),a.jsx("option",{value:"ENVIADO",children:"Enviado"}),a.jsx("option",{value:"ERROR",children:"Error"}),a.jsx("option",{value:"PENDIENTE",children:"Pendiente"})]})]}),a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Fecha"}),a.jsx($e,{children:"Plantilla"}),a.jsx($e,{children:"Destinatario"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Cuenta SMTP"})]})}),a.jsx(ai,{children:E?a.jsx(Gt,{children:a.jsx(Me,{colSpan:5,className:"text-center py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):S?.length>0?S.map(D=>a.jsxs(Gt,{"data-testid":`row-history-${D.id}`,children:[a.jsx(Me,{"data-testid":`text-history-date-${D.id}`,children:new Date(D.fechaEnvio).toLocaleDateString("es-ES")}),a.jsx(Me,{"data-testid":`text-history-template-${D.id}`,children:D.template?.nombre||"N/A"}),a.jsx(Me,{"data-testid":`text-history-recipients-${D.id}`,children:D.destinatarios==="all"?"Todos":D.destinatarios}),a.jsx(Me,{"data-testid":`text-history-status-${D.id}`,children:a.jsx(Ge,{variant:D.estado==="ENVIADO"?"default":"destructive",children:D.estado})}),a.jsx(Me,{"data-testid":`text-history-smtp-${D.id}`,children:D.smtpAccount?.nombre||"Predeterminada"})]},D.id)):a.jsx(Gt,{children:a.jsx(Me,{colSpan:5,className:"text-center py-8 text-muted-foreground","data-testid":"text-empty-history",children:"No hay notificaciones en el historial"})})})]})]})]})}),a.jsx(Rn,{value:"programadas",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Notificaciones Programadas"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestiona y consulta las notificaciones que están programadas para envío futuro."})]}),a.jsx(Be,{children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Fecha Programada"}),a.jsx($e,{children:"Plantilla"}),a.jsx($e,{children:"Destinatarios"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Acciones"})]})}),a.jsx(ai,{children:T?a.jsx(Gt,{children:a.jsx(Me,{colSpan:5,className:"text-center py-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):C?.length>0?C.map(D=>a.jsxs(Gt,{"data-testid":`row-scheduled-${D.id}`,children:[a.jsx(Me,{"data-testid":`text-scheduled-date-${D.id}`,children:new Date(D.fechaProgramada).toLocaleDateString("es-ES")}),a.jsx(Me,{"data-testid":`text-scheduled-template-${D.id}`,children:D.template?.nombre||"N/A"}),a.jsx(Me,{"data-testid":`text-scheduled-recipients-${D.id}`,children:D.destinatariosSeleccionados==="all"?"Todos":D.destinatariosSeleccionados}),a.jsx(Me,{"data-testid":`text-scheduled-status-${D.id}`,children:a.jsx(Ge,{variant:"secondary",children:D.estado})}),a.jsx(Me,{"data-testid":`div-scheduled-actions-${D.id}`,children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{size:"sm",variant:"outline","data-testid":`button-edit-scheduled-${D.id}`,children:a.jsx(ec,{className:"h-3 w-3"})}),a.jsx(re,{size:"sm",variant:"outline","data-testid":`button-cancel-scheduled-${D.id}`,children:a.jsx(ei,{className:"h-3 w-3"})})]})})]},D.id)):a.jsx(Gt,{children:a.jsx(Me,{colSpan:5,className:"text-center py-8 text-muted-foreground","data-testid":"text-empty-scheduled",children:"No hay notificaciones programadas"})})})]})})]})})]})]})}function w9e(){const[,t]=es();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Documentación"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona presupuestos y documentos de tu negocio"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/presupuestos"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(PP,{className:"w-5 h-5 text-blue-500"}),"Presupuestos"]}),a.jsx(Zt,{className:"mt-2",children:"Crea, gestiona y parametriza presupuestos"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Sistema OFICIAL/ONLINE"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Cálculo automático con tramos"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Parámetros configurables"})]}),a.jsx(re,{className:"w-full",children:"Ir a Presupuestos"})]})]}),a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-green-500"}),"Documentos"]}),a.jsx(Zt,{className:"mt-2",children:"Gestiona documentos, recibos y comprobantes"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Recibos de pago"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Protección de datos (RGPD)"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Domiciliación bancaria"})]}),a.jsx(re,{className:"w-full",children:"Ir a Documentos"})]})]})]})]})}const Xo="/api/gestoria-budgets";async function N9e(t){const e=new URLSearchParams;t?.tipoGestoria&&e.append("tipo",t.tipoGestoria),t?.estado&&e.append("estado",t.estado),t?.nombreCliente&&e.append("nombreCompleto",t.nombreCliente),t?.nifCif&&e.append("cifNif",t.nifCif),t?.email&&e.append("email",t.email),t?.fechaDesde&&e.append("fechaDesde",t.fechaDesde),t?.fechaHasta&&e.append("fechaHasta",t.fechaHasta);const n=await fetch(`${Xo}?${e}`);if(!n.ok)throw new Error("Error al cargar presupuestos");return(await n.json()).data}async function S9e(t){const e=await fetch(`${Xo}/${t}`);if(!e.ok)throw new Error("Error al cargar presupuesto");return(await e.json()).data}async function j9e(t){const e=await fetch(Xo,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.json();throw new Error(r.message||"Error al crear presupuesto")}return(await e.json()).data}async function _9e(t,e){const n=await fetch(`${Xo}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Error al actualizar presupuesto");return(await n.json()).data}async function E9e(t,e){const n=await fetch(`${Xo}/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({calculation:t,tipo:e})});if(!n.ok)throw new Error("Error al calcular presupuesto");return(await n.json()).data}async function A9e(t,e){if(!(await fetch(`${Xo}/${t}/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})})).ok)throw new Error("Error al enviar presupuesto")}async function C9e(t){const e=await fetch(`${Xo}/${t}/accept`,{method:"POST"});if(!e.ok)throw new Error("Error al aceptar presupuesto");return(await e.json()).data}async function k9e(t,e){const n=await fetch(`${Xo}/${t}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({motivoRechazo:e})});if(!n.ok)throw new Error("Error al rechazar presupuesto");return(await n.json()).data}async function T9e(t,e){const n=await fetch(`${Xo}/${t}/convert`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})});if(!n.ok)throw new Error("Error al convertir presupuesto");return(await n.json()).data}async function O9e(t){const e=await fetch(`${Xo}/${t}/can-convert`);if(!e.ok)throw new Error("Error al verificar conversión");return(await e.json()).data}async function P9e(t){const e=await fetch(`${Xo}/config/active/${t}`);if(!e.ok)throw new Error(`No hay configuración activa para ${t}`);return(await e.json()).data}function M9e(t){return At({queryKey:["gestoria-budgets",t],queryFn:()=>N9e(t)})}function vie(t){return At({queryKey:["gestoria-budget",t],queryFn:()=>S9e(t),enabled:!!t})}function R9e(){const t=Hs();return yt({mutationFn:j9e,onSuccess:()=>{t.invalidateQueries({queryKey:["gestoria-budgets"]})}})}function D9e(){const t=Hs();return yt({mutationFn:({id:e,input:n})=>_9e(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function I9e(){return yt({mutationFn:({calculation:t,tipo:e})=>E9e(t,e)})}function L9e(){const t=Hs();return yt({mutationFn:({id:e,options:n})=>A9e(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function F9e(){const t=Hs();return yt({mutationFn:C9e,onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n]})}})}function B9e(){const t=Hs();return yt({mutationFn:({id:e,motivoRechazo:n})=>k9e(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]})}})}function $9e(){const t=Hs();return yt({mutationFn:({id:e,options:n})=>T9e(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:["gestoria-budgets"]}),t.invalidateQueries({queryKey:["gestoria-budget",n.id]}),t.invalidateQueries({queryKey:["clients"]})}})}function z9e(t){return At({queryKey:["can-convert-budget",t],queryFn:()=>O9e(t),enabled:!!t})}function q9e(t){return At({queryKey:["active-config",t],queryFn:()=>P9e(t),enabled:!!t})}function yie(t,e){window.open(`${Xo}/${t}/pdf`,"_blank")}function Vk(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 €":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function U9e(){const[t,e]=x.useState(""),[n,r]=x.useState("all"),[i,s]=x.useState("all"),{data:o,isLoading:l,error:c}=M9e({estado:n!=="all"?n:void 0,tipoGestoria:i!=="all"?i:void 0,nombreCliente:t||void 0}),u=o||[],d=p=>p==="ASESORIA_LA_LLAVE"?a.jsx(Ge,{className:"bg-blue-100 text-blue-700",children:"Asesoría La Llave"}):a.jsx(Ge,{className:"bg-green-100 text-green-700",children:"Gestoría Online"}),f=p=>{const h={BORRADOR:"bg-amber-100 text-amber-700",ENVIADO:"bg-blue-100 text-blue-700",ACEPTADO:"bg-emerald-100 text-emerald-700",RECHAZADO:"bg-red-100 text-red-700",FACTURADO:"bg-purple-100 text-purple-700"},g={BORRADOR:Uo,ENVIADO:qo,ACEPTADO:ml,RECHAZADO:gl,FACTURADO:rH}[p]||Uo;return a.jsxs(Ge,{className:h[p]||"bg-gray-100 text-gray-700",children:[a.jsx(g,{className:"h-3 w-3 mr-1"}),p]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(et,{className:"text-xl",children:"Filtros y búsqueda"}),a.jsx(ny,{href:"/documentacion/presupuestos/nuevo",children:a.jsxs(re,{size:"sm",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nuevo Presupuesto"]})})]})}),a.jsx(Be,{children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[240px]",children:[a.jsx(Ag,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ie,{placeholder:"Buscar por nombre de cliente...",value:t,onChange:p=>e(p.target.value),className:"pl-10"})]}),a.jsxs(un,{value:n,onValueChange:p=>r(p),children:[a.jsx(sn,{className:"w-48",children:a.jsx(dn,{placeholder:"Todos los estados"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todos los estados"}),a.jsx(Ke,{value:"BORRADOR",children:"Borrador"}),a.jsx(Ke,{value:"ENVIADO",children:"Enviado"}),a.jsx(Ke,{value:"ACEPTADO",children:"Aceptado"}),a.jsx(Ke,{value:"RECHAZADO",children:"Rechazado"}),a.jsx(Ke,{value:"FACTURADO",children:"Facturado"})]})]}),a.jsxs(un,{value:i,onValueChange:p=>s(p),children:[a.jsx(sn,{className:"w-56",children:a.jsx(dn,{placeholder:"Todos los tipos"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todos los tipos"}),a.jsx(Ke,{value:"ASESORIA_LA_LLAVE",children:"Asesoría La Llave"}),a.jsx(Ke,{value:"GESTORIA_ONLINE",children:"Gestoría Online"})]})]}),(t||n!=="all"||i!=="all")&&a.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{e(""),r("all"),s("all")},children:"Limpiar filtros"})]})})]}),l?a.jsxs("div",{className:"space-y-3",children:[a.jsx(Fn,{className:"h-24 w-full"}),a.jsx(Fn,{className:"h-24 w-full"}),a.jsx(Fn,{className:"h-24 w-full"})]}):c?a.jsx(Fe,{children:a.jsxs(Be,{className:"p-12 text-center",children:[a.jsx(gl,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),a.jsx("p",{className:"text-lg font-semibold mb-2",children:"Error al cargar los presupuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:c instanceof Error?c.message:"Error desconocido"}),a.jsx(re,{onClick:()=>window.location.reload(),children:"Recargar página"})]})}):u.length===0?a.jsx(Fe,{children:a.jsxs(Be,{className:"p-12 text-center",children:[a.jsx(Qr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-lg font-semibold mb-2",children:"No hay presupuestos"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:t||n!=="all"||i!=="all"?"No se encontraron presupuestos con los filtros aplicados":"Crea tu primer presupuesto para comenzar"}),a.jsx(ny,{href:"/documentacion/presupuestos/nuevo",children:a.jsxs(re,{children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Crear Presupuesto"]})})]})}):a.jsx("div",{className:"space-y-3",children:u.map(p=>a.jsx(Fe,{className:"hover:shadow-md transition-shadow",children:a.jsx(Be,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[a.jsx("h3",{className:"text-lg font-semibold truncate",children:p.nombreCliente}),d(p.tipoGestoria),f(p.estado)]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Número:"})," ",p.numero]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"CIF/NIF:"})," ",p.nifCif]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Fecha:"})," ",_s(new Date(p.fechaCreacion),"dd/MM/yyyy",{locale:Ro})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",p.email]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold",children:Vk(p.totalFinal)}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Contabilidad: ",Vk(p.totalContabilidad),(p.totalLaboral??0)>0&&a.jsxs(a.Fragment,{children:[" + Laboral: ",Vk(p.totalLaboral)]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>yie(p.id,p.numero),children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),"PDF"]}),a.jsx(ny,{href:`/documentacion/presupuestos/${p.id}`,children:a.jsxs(re,{size:"sm",children:[a.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Ver Detalles"]})})]})]})]})})},p.id))})]})}function vf(){const[t,e]=x.useState(null),[n,r]=x.useState(!0),i=x.useCallback(async()=>{r(!0);try{const O=await fetch("/api/gestoria-budgets/config/autonomo");if(!O.ok)throw new Error("Error fetching config");const M=await O.json();e(M.data||M)}catch(O){console.error(O)}finally{r(!1)}},[]);return x.useEffect(()=>{i()},[i]),{config:t,loading:n,refresh:()=>i(),updateConfig:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error updating config");return M.json()},getInvoiceTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers")).json()).data||[]).map(B=>({...B,precio:typeof B.precio=="string"?parseFloat(B.precio):B.precio})),createInvoiceTier:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error creating invoice tier");return M.json()},updateInvoiceTier:async(O,M)=>{const I=await fetch(`/api/gestoria-budgets/config/autonomo/invoice-tiers/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Error updating invoice tier");return I.json()},deleteInvoiceTier:async O=>{const M=await fetch(`/api/gestoria-budgets/config/autonomo/invoice-tiers/${O}`,{method:"DELETE"});if(!M.ok)throw new Error("Error deleting invoice tier");return M.json()},reorderInvoiceTiers:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/invoice-tiers/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:O})});if(!M.ok)throw new Error("Error reordering invoice tiers");return M.json()},getPayrollTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/payroll-tiers")).json()).data||[]).map(B=>({...B,precio:typeof B.precio=="string"?parseFloat(B.precio):B.precio})),createPayrollTier:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/payroll-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error creating payroll tier");return M.json()},updatePayrollTier:async(O,M)=>{const I=await fetch(`/api/gestoria-budgets/config/autonomo/payroll-tiers/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Error updating payroll tier");return I.json()},deletePayrollTier:async O=>{const M=await fetch(`/api/gestoria-budgets/config/autonomo/payroll-tiers/${O}`,{method:"DELETE"});if(!M.ok)throw new Error("Error deleting payroll tier");return M.json()},getBillingTiers:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/billing-tiers")).json()).data||[]).map(B=>({...B,multiplicador:typeof B.multiplicador=="string"?parseFloat(B.multiplicador):B.multiplicador})),createBillingTier:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/billing-tiers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error creating billing tier");return M.json()},updateBillingTier:async(O,M)=>{const I=await fetch(`/api/gestoria-budgets/config/autonomo/billing-tiers/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Error updating billing tier");return I.json()},deleteBillingTier:async O=>{const M=await fetch(`/api/gestoria-budgets/config/autonomo/billing-tiers/${O}`,{method:"DELETE"});if(!M.ok)throw new Error("Error deleting billing tier");return M.json()},getFiscalModels:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/fiscal-models")).json()).data||[]).map(B=>({...B,precio:typeof B.precio=="string"?parseFloat(B.precio):B.precio})),createFiscalModel:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/fiscal-models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error creating fiscal model");return M.json()},updateFiscalModel:async(O,M)=>{const I=await fetch(`/api/gestoria-budgets/config/autonomo/fiscal-models/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Error updating fiscal model");return I.json()},deleteFiscalModel:async O=>{const M=await fetch(`/api/gestoria-budgets/config/autonomo/fiscal-models/${O}`,{method:"DELETE"});if(!M.ok)throw new Error("Error deleting fiscal model");return M.json()},getServices:async()=>((await(await fetch("/api/gestoria-budgets/config/autonomo/services")).json()).data||[]).map(B=>({...B,precio:typeof B.precio=="string"?parseFloat(B.precio):B.precio})),createService:async O=>{const M=await fetch("/api/gestoria-budgets/config/autonomo/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok)throw new Error("Error creating service");return M.json()},updateService:async(O,M)=>{const I=await fetch(`/api/gestoria-budgets/config/autonomo/services/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Error updating service");return I.json()},deleteService:async O=>{const M=await fetch(`/api/gestoria-budgets/config/autonomo/services/${O}`,{method:"DELETE"});if(!M.ok)throw new Error("Error deleting service");return M.json()}}}function H9e({tier:t,onEdit:e,onDelete:n}){const{attributes:r,listeners:i,setNodeRef:s,transform:o,transition:l,isDragging:c}=eQ({id:t.id}),u={transform:vg.Transform.toString(o),transition:l,opacity:c?.5:1};return a.jsxs(Gt,{ref:s,style:u,children:[a.jsx(Me,{children:a.jsx("div",{...r,...i,className:"cursor-grab active:cursor-grabbing",children:a.jsx(yae,{className:"h-5 w-5 text-muted-foreground"})})}),a.jsx(Me,{children:t.orden}),a.jsx(Me,{children:t.minFacturas}),a.jsx(Me,{children:t.maxFacturas??"∞"}),a.jsxs(Me,{children:["€",t.precio.toFixed(2)]}),a.jsx(Me,{children:t.etiqueta}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>e(t),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>n(t),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]})}function V9e({refreshParent:t}){const{getInvoiceTiers:e,createInvoiceTier:n,updateInvoiceTier:r,deleteInvoiceTier:i,reorderInvoiceTiers:s}=vf(),{toast:o}=nr(),[l,c]=x.useState([]),[u,d]=x.useState(!0),[f,p]=x.useState(!1),[h,m]=x.useState(null),[g,v]=x.useState(!1),[y,b]=x.useState(null),[N,S]=x.useState(!1),E=GR(yg(gj),yg(mj,{coordinateGetter:tQ})),[C,T]=x.useState({orden:0,minFacturas:0,maxFacturas:null,precio:0,etiqueta:""}),_=async()=>{d(!0);try{const I=await e();c(I.sort((B,U)=>B.orden-U.orden))}catch(I){o({variant:"destructive",title:"Error",description:I.message||"No se pudieron cargar los tramos"})}finally{d(!1)}};x.useEffect(()=>{_()},[]);const j=async I=>{const{active:B,over:U}=I;if(!U||B.id===U.id)return;const D=l.findIndex(ae=>ae.id===B.id),z=l.findIndex(ae=>ae.id===U.id),H=ZR(l,D,z);c(H);const ee=H.map((ae,F)=>({id:ae.id,orden:F+1}));try{await s(ee),o({title:"Orden actualizado",description:"Los tramos se han reordenado correctamente"}),await _(),t?.()}catch(ae){o({variant:"destructive",title:"Error",description:ae.message||"No se pudo reordenar"}),await _()}},P=I=>{I?(m(I),T({orden:I.orden,minFacturas:I.minFacturas,maxFacturas:I.maxFacturas,precio:I.precio,etiqueta:I.etiqueta||""})):(m(null),T({orden:l.length+1,minFacturas:0,maxFacturas:null,precio:0,etiqueta:""})),p(!0)},k=async()=>{S(!0);try{h?(await r(h.id,C),o({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(C),o({title:"Tramo creado",description:"El nuevo tramo se ha añadido correctamente"})),p(!1),await _(),t?.()}catch(I){o({variant:"destructive",title:"Error",description:I.message||"No se pudo guardar el tramo"})}finally{S(!1)}},O=I=>{b(I),v(!0)},M=async()=>{if(y){S(!0);try{await i(y.id),o({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),v(!1),await _(),t?.()}catch(I){o({variant:"destructive",title:"Error",description:I.message||"No se pudo eliminar el tramo"})}finally{S(!1)}}};return u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.length," tramo",l.length!==1?"s":""," configurado",l.length!==1?"s":""]}),a.jsxs(Un,{open:f,onOpenChange:p,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>P(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Añadir Tramo"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:h?"Editar Tramo":"Nuevo Tramo"}),a.jsx(Qn,{children:"Define el rango de facturas y el precio correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"orden",children:"Orden"}),a.jsx(Ie,{id:"orden",type:"number",value:C.orden,onChange:I=>T({...C,orden:parseInt(I.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"minFacturas",children:"Mín. Facturas"}),a.jsx(Ie,{id:"minFacturas",type:"number",value:C.minFacturas,onChange:I=>T({...C,minFacturas:parseInt(I.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"maxFacturas",children:"Máx. Facturas"}),a.jsx(Ie,{id:"maxFacturas",type:"number",value:C.maxFacturas??"",onChange:I=>T({...C,maxFacturas:I.target.value?parseInt(I.target.value):null}),placeholder:"∞ (dejar vacío)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"precio",children:"Precio (€)"}),a.jsx(Ie,{id:"precio",type:"number",step:"0.01",value:C.precio,onChange:I=>T({...C,precio:parseFloat(I.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ie,{id:"etiqueta",value:C.etiqueta,onChange:I=>T({...C,etiqueta:I.target.value}),placeholder:"Ej: De 0 a 25 facturas"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),a.jsxs(re,{onClick:k,disabled:N,children:[N&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{className:"w-[50px]"}),a.jsx($e,{children:"Orden"}),a.jsx($e,{children:"Min"}),a.jsx($e,{children:"Max"}),a.jsx($e,{children:"Precio"}),a.jsx($e,{children:"Etiqueta"}),a.jsx($e,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(JR,{sensors:E,collisionDetection:TZ,onDragEnd:j,children:a.jsx(ZZ,{items:l.map(I=>I.id),strategy:YZ,children:a.jsx(ai,{children:l.map(I=>a.jsx(H9e,{tier:I,onEdit:P,onDelete:O},I.id))})})})]})}),a.jsx(yc,{open:g,onOpenChange:v,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsx(Cl,{children:"Esta acción eliminará el tramo permanentemente. Los presupuestos que usen este rango se verán afectados."})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:M,disabled:N,children:[N&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function W9e({refreshParent:t}){const{getPayrollTiers:e,createPayrollTier:n,updatePayrollTier:r,deletePayrollTier:i}=vf(),{toast:s}=nr(),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(!1),[p,h]=x.useState(null),[m,g]=x.useState(!1),[v,y]=x.useState(null),[b,N]=x.useState(!1),[S,E]=x.useState({orden:0,minNominas:0,maxNominas:null,precio:0,etiqueta:""}),C=async()=>{u(!0);try{const k=await e();l(k.sort((O,M)=>O.orden-M.orden))}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudieron cargar los tramos"})}finally{u(!1)}};x.useEffect(()=>{C()},[]);const T=k=>{k?(h(k),E({orden:k.orden,minNominas:k.minNominas,maxNominas:k.maxNominas,precio:k.precio,etiqueta:k.etiqueta||""})):(h(null),E({orden:o.length+1,minNominas:0,maxNominas:null,precio:0,etiqueta:""})),f(!0)},_=async()=>{N(!0);try{p?(await r(p.id,S),s({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(S),s({title:"Tramo creado",description:"El nuevo tramo se ha añadido correctamente"})),f(!1),await C(),t?.()}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudo guardar el tramo"})}finally{N(!1)}},j=k=>{y(k),g(!0)},P=async()=>{if(v){N(!0);try{await i(v.id),s({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),g(!1),await C(),t?.()}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudo eliminar el tramo"})}finally{N(!1)}}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," tramo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(Un,{open:d,onOpenChange:f,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>T(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Añadir Tramo"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:p?"Editar Tramo":"Nuevo Tramo"}),a.jsx(Qn,{children:"Define el rango de nóminas y el precio correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"orden",children:"Orden"}),a.jsx(Ie,{id:"orden",type:"number",value:S.orden,onChange:k=>E({...S,orden:parseInt(k.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"minNominas",children:"Mín. Nóminas"}),a.jsx(Ie,{id:"minNominas",type:"number",value:S.minNominas,onChange:k=>E({...S,minNominas:parseInt(k.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"maxNominas",children:"Máx. Nóminas"}),a.jsx(Ie,{id:"maxNominas",type:"number",value:S.maxNominas??"",onChange:k=>E({...S,maxNominas:k.target.value?parseInt(k.target.value):null}),placeholder:"∞ (dejar vacío)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"precio",children:"Precio (€)"}),a.jsx(Ie,{id:"precio",type:"number",step:"0.01",value:S.precio,onChange:k=>E({...S,precio:parseFloat(k.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ie,{id:"etiqueta",value:S.etiqueta,onChange:k=>E({...S,etiqueta:k.target.value}),placeholder:"Ej: De 0 a 3 nóminas"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(re,{onClick:_,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Orden"}),a.jsx($e,{children:"Min"}),a.jsx($e,{children:"Max"}),a.jsx($e,{children:"Precio"}),a.jsx($e,{children:"Etiqueta"}),a.jsx($e,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(ai,{children:o.map(k=>a.jsxs(Gt,{children:[a.jsx(Me,{children:k.orden}),a.jsx(Me,{children:k.minNominas}),a.jsx(Me,{children:k.maxNominas??"∞"}),a.jsxs(Me,{children:["€",k.precio.toFixed(2)]}),a.jsx(Me,{children:k.etiqueta}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>T(k),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>j(k),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},k.id))})]})}),a.jsx(yc,{open:m,onOpenChange:g,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsx(Cl,{children:"Esta acción eliminará el tramo permanentemente. Los presupuestos que usen este rango se verán afectados."})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:P,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function K9e({refreshParent:t}){const{getBillingTiers:e,createBillingTier:n,updateBillingTier:r,deleteBillingTier:i}=vf(),{toast:s}=nr(),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(!1),[p,h]=x.useState(null),[m,g]=x.useState(!1),[v,y]=x.useState(null),[b,N]=x.useState(!1),[S,E]=x.useState({orden:0,minFacturacion:0,maxFacturacion:null,multiplicador:1,etiqueta:""}),C=async()=>{u(!0);try{const k=await e();l(k.sort((O,M)=>O.orden-M.orden))}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudieron cargar los tramos"})}finally{u(!1)}};x.useEffect(()=>{C()},[]);const T=k=>{k?(h(k),E({orden:k.orden,minFacturacion:k.minFacturacion,maxFacturacion:k.maxFacturacion,multiplicador:k.multiplicador,etiqueta:k.etiqueta||""})):(h(null),E({orden:o.length+1,minFacturacion:0,maxFacturacion:null,multiplicador:1,etiqueta:""})),f(!0)},_=async()=>{N(!0);try{p?(await r(p.id,S),s({title:"Tramo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(S),s({title:"Tramo creado",description:"El nuevo tramo se ha añadido correctamente"})),f(!1),await C(),t?.()}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudo guardar el tramo"})}finally{N(!1)}},j=k=>{y(k),g(!0)},P=async()=>{if(v){N(!0);try{await i(v.id),s({title:"Tramo eliminado",description:"El tramo se ha eliminado correctamente"}),g(!1),await C(),t?.()}catch(k){s({variant:"destructive",title:"Error",description:k.message||"No se pudo eliminar el tramo"})}finally{N(!1)}}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," tramo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(Un,{open:d,onOpenChange:f,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>T(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Añadir Tramo"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:p?"Editar Tramo":"Nuevo Tramo"}),a.jsx(Qn,{children:"Define el rango de facturación anual y el multiplicador correspondiente"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"orden",children:"Orden"}),a.jsx(Ie,{id:"orden",type:"number",value:S.orden,onChange:k=>E({...S,orden:parseInt(k.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"minFacturacion",children:"Mín. Facturación (€)"}),a.jsx(Ie,{id:"minFacturacion",type:"number",value:S.minFacturacion,onChange:k=>E({...S,minFacturacion:parseFloat(k.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"maxFacturacion",children:"Máx. Facturación (€)"}),a.jsx(Ie,{id:"maxFacturacion",type:"number",value:S.maxFacturacion??"",onChange:k=>E({...S,maxFacturacion:k.target.value?parseFloat(k.target.value):null}),placeholder:"∞ (dejar vacío)"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"multiplicador",children:"Multiplicador"}),a.jsx(Ie,{id:"multiplicador",type:"number",step:"0.01",value:S.multiplicador,onChange:k=>E({...S,multiplicador:parseFloat(k.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"etiqueta",children:"Etiqueta"}),a.jsx(Ie,{id:"etiqueta",value:S.etiqueta,onChange:k=>E({...S,etiqueta:k.target.value}),placeholder:"Ej: De 0 a 100.000€"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(re,{onClick:_,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Orden"}),a.jsx($e,{children:"Min"}),a.jsx($e,{children:"Max"}),a.jsx($e,{children:"Multiplicador"}),a.jsx($e,{children:"Etiqueta"}),a.jsx($e,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(ai,{children:o.map(k=>a.jsxs(Gt,{children:[a.jsx(Me,{children:k.orden}),a.jsxs(Me,{children:["€",k.minFacturacion.toLocaleString()]}),a.jsx(Me,{children:k.maxFacturacion?`€${k.maxFacturacion.toLocaleString()}`:"∞"}),a.jsxs(Me,{children:[k.multiplicador,"x"]}),a.jsx(Me,{children:k.etiqueta}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>T(k),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>j(k),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},k.id))})]})}),a.jsx(yc,{open:m,onOpenChange:g,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsx(Cl,{children:"Esta acción eliminará el tramo permanentemente. Los presupuestos que usen este rango se verán afectados."})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:P,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function G9e({refreshParent:t}){const{getFiscalModels:e,createFiscalModel:n,updateFiscalModel:r,deleteFiscalModel:i}=vf(),{toast:s}=nr(),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(!1),[p,h]=x.useState(null),[m,g]=x.useState(!1),[v,y]=x.useState(null),[b,N]=x.useState(!1),[S,E]=x.useState({orden:0,codigoModelo:"",nombreModelo:"",precio:0,activo:!0}),C=async()=>{u(!0);try{const O=await e();l(O.sort((M,I)=>M.orden-I.orden))}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudieron cargar los modelos"})}finally{u(!1)}};x.useEffect(()=>{C()},[]);const T=O=>{O?(h(O),E({orden:O.orden,codigoModelo:O.codigoModelo,nombreModelo:O.nombreModelo,precio:O.precio,activo:O.activo})):(h(null),E({orden:o.length+1,codigoModelo:"",nombreModelo:"",precio:0,activo:!0})),f(!0)},_=async()=>{N(!0);try{p?(await r(p.id,S),s({title:"Modelo actualizado",description:"Los cambios se han guardado correctamente"})):(await n(S),s({title:"Modelo creado",description:"El nuevo modelo se ha añadido correctamente"})),f(!1),await C(),t?.()}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudo guardar el modelo"})}finally{N(!1)}},j=O=>{y(O),g(!0)},P=async()=>{if(v){N(!0);try{await i(v.id),s({title:"Modelo eliminado",description:"El modelo se ha eliminado correctamente"}),g(!1),await C(),t?.()}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudo eliminar el modelo"})}finally{N(!1)}}},k=async O=>{try{await r(O.id,{activo:!O.activo}),s({title:"Estado actualizado",description:`Modelo ${O.activo?"desactivado":"activado"}`}),await C(),t?.()}catch(M){s({variant:"destructive",title:"Error",description:M.message||"No se pudo cambiar el estado"})}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," modelo",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(Un,{open:d,onOpenChange:f,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>T(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Añadir Modelo"]})}),a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:p?"Editar Modelo":"Nuevo Modelo"}),a.jsx(Qn,{children:"Configura un modelo fiscal con su precio mensual"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"orden",children:"Orden"}),a.jsx(Ie,{id:"orden",type:"number",value:S.orden,onChange:O=>E({...S,orden:parseInt(O.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"codigoModelo",children:"Código Modelo"}),a.jsx(Ie,{id:"codigoModelo",value:S.codigoModelo,onChange:O=>E({...S,codigoModelo:O.target.value}),placeholder:"Ej: 303"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nombreModelo",children:"Nombre Modelo"}),a.jsx(Ie,{id:"nombreModelo",value:S.nombreModelo,onChange:O=>E({...S,nombreModelo:O.target.value}),placeholder:"Ej: Autoliquidación IVA"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"precio",children:"Precio Mensual (€)"}),a.jsx(Ie,{id:"precio",type:"number",step:"0.01",value:S.precio,onChange:O=>E({...S,precio:parseFloat(O.target.value)})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{id:"activo",checked:S.activo,onCheckedChange:O=>E({...S,activo:O})}),a.jsx(ye,{htmlFor:"activo",children:"Activo"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(re,{onClick:_,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Orden"}),a.jsx($e,{children:"Código"}),a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Precio"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(ai,{children:o.map(O=>a.jsxs(Gt,{children:[a.jsx(Me,{children:O.orden}),a.jsx(Me,{children:a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm",children:O.codigoModelo})}),a.jsx(Me,{children:O.nombreModelo}),a.jsxs(Me,{children:["€",O.precio.toFixed(2)]}),a.jsx(Me,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ks,{checked:O.activo,onCheckedChange:()=>k(O)}),a.jsx(Ge,{variant:O.activo?"default":"secondary",children:O.activo?"Activo":"Inactivo"})]})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>T(O),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>j(O),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},O.id))})]})}),a.jsx(yc,{open:m,onOpenChange:g,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsx(Cl,{children:"Esta acción eliminará el modelo permanentemente. Los presupuestos que usen este modelo se verán afectados."})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:P,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function Y9e({refreshParent:t}){const{getServices:e,createService:n,updateService:r,deleteService:i}=vf(),{toast:s}=nr(),[o,l]=x.useState([]),[c,u]=x.useState(!0),[d,f]=x.useState(!1),[p,h]=x.useState(null),[m,g]=x.useState(!1),[v,y]=x.useState(null),[b,N]=x.useState(!1),[S,E]=x.useState({orden:0,codigo:"",nombre:"",descripcion:"",precio:0,tipoServicio:"MENSUAL",activo:!0}),C=async()=>{u(!0);try{const O=await e();l(O.sort((M,I)=>M.orden-I.orden))}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudieron cargar los servicios"})}finally{u(!1)}};x.useEffect(()=>{C()},[]);const T=O=>{O?(h(O),E({orden:O.orden,codigo:O.codigo,nombre:O.nombre,descripcion:O.descripcion||"",precio:O.precio,tipoServicio:O.tipoServicio,activo:O.activo})):(h(null),E({orden:o.length+1,codigo:"",nombre:"",descripcion:"",precio:0,tipoServicio:"MENSUAL",activo:!0})),f(!0)},_=async()=>{N(!0);try{p?(await r(p.id,S),s({title:"Servicio actualizado",description:"Los cambios se han guardado correctamente"})):(await n(S),s({title:"Servicio creado",description:"El nuevo servicio se ha añadido correctamente"})),f(!1),await C(),t?.()}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudo guardar el servicio"})}finally{N(!1)}},j=O=>{y(O),g(!0)},P=async()=>{if(v){N(!0);try{await i(v.id),s({title:"Servicio eliminado",description:"El servicio se ha eliminado correctamente"}),g(!1),await C(),t?.()}catch(O){s({variant:"destructive",title:"Error",description:O.message||"No se pudo eliminar el servicio"})}finally{N(!1)}}},k=async O=>{try{await r(O.id,{activo:!O.activo}),s({title:"Estado actualizado",description:`Servicio ${O.activo?"desactivado":"activado"}`}),await C(),t?.()}catch(M){s({variant:"destructive",title:"Error",description:M.message||"No se pudo cambiar el estado"})}};return c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.length," servicio",o.length!==1?"s":""," configurado",o.length!==1?"s":""]}),a.jsxs(Un,{open:d,onOpenChange:f,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:()=>T(),children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Añadir Servicio"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:p?"Editar Servicio":"Nuevo Servicio"}),a.jsx(Qn,{children:"Configura un servicio adicional con su precio y tipo"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"orden",children:"Orden"}),a.jsx(Ie,{id:"orden",type:"number",value:S.orden,onChange:O=>E({...S,orden:parseInt(O.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"codigo",children:"Código"}),a.jsx(Ie,{id:"codigo",value:S.codigo,onChange:O=>E({...S,codigo:O.target.value}),placeholder:"Ej: ASESORIA_EXTRA"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nombre",children:"Nombre"}),a.jsx(Ie,{id:"nombre",value:S.nombre,onChange:O=>E({...S,nombre:O.target.value}),placeholder:"Ej: Asesoría Personalizada"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"descripcion",children:"Descripción"}),a.jsx(la,{id:"descripcion",value:S.descripcion,onChange:O=>E({...S,descripcion:O.target.value}),placeholder:"Descripción del servicio",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"precio",children:"Precio (€)"}),a.jsx(Ie,{id:"precio",type:"number",step:"0.01",value:S.precio,onChange:O=>E({...S,precio:parseFloat(O.target.value)})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"tipoServicio",children:"Tipo de Servicio"}),a.jsxs(un,{value:S.tipoServicio,onValueChange:O=>E({...S,tipoServicio:O}),children:[a.jsx(sn,{id:"tipoServicio",children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"MENSUAL",children:"Mensual"}),a.jsx(Ke,{value:"PUNTUAL",children:"Puntual"})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{id:"activo",checked:S.activo,onCheckedChange:O=>E({...S,activo:O})}),a.jsx(ye,{htmlFor:"activo",children:"Activo"})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),a.jsxs(re,{onClick:_,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar"]})]})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Orden"}),a.jsx($e,{children:"Código"}),a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Precio"}),a.jsx($e,{children:"Tipo"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{className:"w-[100px]",children:"Acciones"})]})}),a.jsx(ai,{children:o.map(O=>a.jsxs(Gt,{children:[a.jsx(Me,{children:O.orden}),a.jsx(Me,{children:a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm",children:O.codigo})}),a.jsx(Me,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:O.nombre}),O.descripcion&&a.jsx("div",{className:"text-xs text-muted-foreground",children:O.descripcion})]})}),a.jsxs(Me,{children:["€",O.precio.toFixed(2)]}),a.jsx(Me,{children:a.jsx(Ge,{variant:O.tipoServicio==="MENSUAL"?"default":"outline",children:O.tipoServicio})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ks,{checked:O.activo,onCheckedChange:()=>k(O)}),a.jsx(Ge,{variant:O.activo?"default":"secondary",children:O.activo?"Activo":"Inactivo"})]})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>T(O),children:a.jsx(mc,{className:"h-4 w-4"})}),a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>j(O),children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},O.id))})]})}),a.jsx(yc,{open:m,onOpenChange:g,children:a.jsxs(_l,{children:[a.jsxs(El,{children:[a.jsx(Al,{children:"¿Estás seguro?"}),a.jsx(Cl,{children:"Esta acción eliminará el servicio permanentemente. Los presupuestos que usen este servicio se verán afectados."})]}),a.jsxs(hf,{children:[a.jsx(Tl,{children:"Cancelar"}),a.jsxs(kl,{onClick:P,disabled:b,children:[b&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminar"]})]})]})})]})}function X9e({onSuccess:t}){const{config:e,loading:n,updateConfig:r,refresh:i}=vf(),{toast:s}=nr(),[o,l]=x.useState(!1),[c,u]=x.useState({porcentajePeriodoMensual:20,porcentajeEDN:10,porcentajeModulos:-10,minimoMensual:50});x.useEffect(()=>{e&&u({porcentajePeriodoMensual:e.porcentajePeriodoMensual,porcentajeEDN:e.porcentajeEDN,porcentajeModulos:e.porcentajeModulos,minimoMensual:e.minimoMensual})},[e]);const d=async f=>{f.preventDefault(),l(!0);try{await r(c),s({title:"Configuración actualizada",description:"Los cambios se han guardado correctamente"}),await i(),t?.()}catch(p){s({variant:"destructive",title:"Error",description:p.message||"No se pudo actualizar la configuración"})}finally{l(!1)}};return n?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"porcentajePeriodoMensual",children:"Porcentaje Periodo Mensual (%)"}),a.jsx(Ie,{id:"porcentajePeriodoMensual",type:"number",step:"0.01",value:c.porcentajePeriodoMensual,onChange:f=>u({...c,porcentajePeriodoMensual:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recargo aplicado a presupuestos mensuales"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"porcentajeEDN",children:"Porcentaje EDN (%)"}),a.jsx(Ie,{id:"porcentajeEDN",type:"number",step:"0.01",value:c.porcentajeEDN,onChange:f=>u({...c,porcentajeEDN:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recargo para sistema de tributación EDN"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"porcentajeModulos",children:"Porcentaje Módulos (%)"}),a.jsx(Ie,{id:"porcentajeModulos",type:"number",step:"0.01",value:c.porcentajeModulos,onChange:f=>u({...c,porcentajeModulos:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Descuento para régimen de módulos (valor negativo)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"minimoMensual",children:"Mínimo Mensual (€)"}),a.jsx(Ie,{id:"minimoMensual",type:"number",step:"0.01",value:c.minimoMensual,onChange:f=>u({...c,minimoMensual:parseFloat(f.target.value)}),required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Importe mínimo para presupuestos mensuales"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(re,{type:"submit",disabled:o,children:[o&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardar Cambios"]})})]})}function J9e(){const[t,e]=x.useState("general"),{refresh:n}=vf();return console.log("🎯 Active tab:",t),a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Parámetros de Presupuestos"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestión dinámica de configuración para presupuestos de Autónomos"})]})}),a.jsxs(Wo,{value:t,onValueChange:e,className:"space-y-4",children:[a.jsxs(co,{className:"grid w-full grid-cols-6",children:[a.jsxs(vn,{value:"general",className:"flex items-center gap-2",children:[a.jsx(eS,{className:"h-4 w-4"}),"General"]}),a.jsxs(vn,{value:"facturas",className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"h-4 w-4"}),"Facturas"]}),a.jsxs(vn,{value:"nominas",className:"flex items-center gap-2",children:[a.jsx(Dd,{className:"h-4 w-4"}),"Nóminas"]}),a.jsxs(vn,{value:"facturacion",className:"flex items-center gap-2",children:[a.jsx(Wd,{className:"h-4 w-4"}),"Facturación"]}),a.jsxs(vn,{value:"modelos",className:"flex items-center gap-2",children:[a.jsx(_1,{className:"h-4 w-4"}),"Modelos"]}),a.jsxs(vn,{value:"servicios",className:"flex items-center gap-2",children:[a.jsx(DP,{className:"h-4 w-4"}),"Servicios"]})]}),a.jsx(Rn,{value:"general",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Configuración General"}),a.jsx(Zt,{children:"Porcentajes y mínimos aplicados a todos los presupuestos de Autónomos"})]}),a.jsx(Be,{children:a.jsx(X9e,{onSuccess:n})})]})}),a.jsx(Rn,{value:"facturas",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Tramos de Facturas Mensuales"}),a.jsx(Zt,{children:"Define el precio base según el número de facturas del cliente por mes"})]}),a.jsx(Be,{children:a.jsx(V9e,{refreshParent:n})})]})}),a.jsx(Rn,{value:"nominas",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Tramos de Nóminas Mensuales"}),a.jsx(Zt,{children:"Define el precio por nómina según el volumen mensual"})]}),a.jsx(Be,{children:a.jsx(W9e,{refreshParent:n})})]})}),a.jsx(Rn,{value:"facturacion",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Tramos de Facturación Anual"}),a.jsx(Zt,{children:"Multiplicadores aplicados según la facturación anual del cliente"})]}),a.jsx(Be,{children:a.jsx(K9e,{refreshParent:n})})]})}),a.jsx(Rn,{value:"modelos",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Modelos Fiscales"}),a.jsx(Zt,{children:"Precios de modelos fiscales (303, 111, 115, 130, 100, 349, 347)"})]}),a.jsx(Be,{children:a.jsx(G9e,{refreshParent:n})})]})}),a.jsx(Rn,{value:"servicios",className:"space-y-4",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Servicios Adicionales"}),a.jsx(Zt,{children:"Servicios complementarios mensuales o puntuales"})]}),a.jsx(Be,{children:a.jsx(Y9e,{refreshParent:n})})]})})]})]})}var Z9e=s7e;const u9={common:[{label:"Nombre de contacto",variable:"{{nombre_contacto}}",description:"Nombre del cliente"},{label:"Email",variable:"{{email}}",description:"Correo electrónico"},{label:"Teléfono",variable:"{{telefono}}",description:"Teléfono de contacto"},{label:"Código presupuesto",variable:"{{codigo}}",description:"Ej: AL-2025-0001"},{label:"Fecha",variable:"{{fecha}}",description:"Fecha de emisión"},{label:"Subtotal",variable:"{{subtotal}}",description:"Subtotal sin IVA"},{label:"IVA",variable:"{{iva}}",description:"Total de IVA"},{label:"Total",variable:"{{total}}",description:"Total con IVA"},{label:"Observaciones",variable:"{{observaciones}}",description:"Notas del presupuesto"}],PYME:[{label:"Nombre sociedad",variable:"{{nombre_sociedad}}",description:"Razón social"},{label:"Actividad",variable:"{{actividad}}",description:"Actividad de la empresa"},{label:"Periodo declaraciones",variable:"{{periodo_declaraciones}}",description:"Trimestral/Mensual"},{label:"Facturación anual",variable:"{{facturacion_anual}}",description:"Facturación estimada"},{label:"Número asientos",variable:"{{num_asientos}}",description:"Rango de asientos"},{label:"Nóminas/mes",variable:"{{nominas_mes}}",description:"Número de nóminas"}],AUTONOMO:[{label:"Actividad",variable:"{{actividad}}",description:"Actividad del autónomo"},{label:"Sistema tributación",variable:"{{sistema_tributacion}}",description:"Directo/Módulos"},{label:"Facturación anual",variable:"{{facturacion_anual}}",description:"Facturación estimada"},{label:"Número facturas/año",variable:"{{num_facturas}}",description:"Rango de facturas"},{label:"Nóminas/mes",variable:"{{nominas_mes}}",description:"Número de nóminas"}],RENTA:[{label:"Tipo declaración",variable:"{{tipo_declaracion}}",description:"Tipo de renta"},{label:"Ingresos",variable:"{{ingresos}}",description:"Ingresos anuales"},{label:"Retenciones",variable:"{{retenciones}}",description:"Retenciones IRPF"}],HERENCIAS:[{label:"Título sucesorio",variable:"{{titulo_sucesorio}}",description:"Con/sin testamento"},{label:"Número herederos",variable:"{{num_herederos}}",description:"Cantidad de herederos"},{label:"Herederos menores",variable:"{{herederos_menores}}",description:"Sí/No"},{label:"Fincas Madrid",variable:"{{fincas_madrid}}",description:"Número de fincas"},{label:"Fincas otras",variable:"{{fincas_otras}}",description:"Fincas fuera de Madrid"},{label:"Caudal hereditario",variable:"{{caudal}}",description:"Valor del caudal"},{label:"Tipo proceso",variable:"{{tipo_proceso}}",description:"Amistoso/Judicial"}]},Q9e=({editor:t,onInsertVariable:e,budgetType:n})=>{const[r,i]=x.useState(""),[s,o]=x.useState(""),[l,c]=x.useState("#000000");if(!t)return null;const u=()=>{r&&(t.chain().focus().setLink({href:r}).run(),i(""))},d=()=>{s&&(t.chain().focus().setImage({src:s}).run(),o(""))},f=()=>{t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},p=[...u9.common,...u9[n]||[]];return a.jsx("div",{className:"border-b bg-slate-50 p-2 sticky top-0 z-10",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(re,{size:"sm",variant:t.isActive("bold")?"default":"ghost",onClick:()=>t.chain().focus().toggleBold().run(),title:"Negrita",children:a.jsx(z9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("italic")?"default":"ghost",onClick:()=>t.chain().focus().toggleItalic().run(),title:"Cursiva",children:a.jsx(q9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("underline")?"default":"ghost",onClick:()=>t.chain().focus().toggleUnderline().run(),title:"Subrayado",children:a.jsx(xae,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("strike")?"default":"ghost",onClick:()=>t.chain().focus().toggleStrike().run(),title:"Tachado",children:a.jsx(U9,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(re,{size:"sm",variant:t.isActive("heading",{level:1})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),title:"Título 1",children:a.jsx(H9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("heading",{level:2})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),title:"Título 2",children:a.jsx(V9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("heading",{level:3})?"default":"ghost",onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),title:"Título 3",children:a.jsx(W9,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(re,{size:"sm",variant:t.isActive("bulletList")?"default":"ghost",onClick:()=>t.chain().focus().toggleBulletList().run(),title:"Lista",children:a.jsx(MP,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("orderedList")?"default":"ghost",onClick:()=>t.chain().focus().toggleOrderedList().run(),title:"Lista numerada",children:a.jsx(K9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive("blockquote")?"default":"ghost",onClick:()=>t.chain().focus().toggleBlockquote().run(),title:"Cita",children:a.jsx(G9,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsx(re,{size:"sm",variant:t.isActive({textAlign:"left"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("left").run(),title:"Alinear izquierda",children:a.jsx(Y9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive({textAlign:"center"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("center").run(),title:"Centrar",children:a.jsx(X9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive({textAlign:"right"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("right").run(),title:"Alinear derecha",children:a.jsx(J9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:t.isActive({textAlign:"justify"})?"default":"ghost",onClick:()=>t.chain().focus().setTextAlign("justify").run(),title:"Justificar",children:a.jsx(Z9,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex gap-1 border-r pr-2",children:a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsx(re,{size:"sm",variant:"ghost",title:"Color de texto",children:a.jsx(kP,{className:"h-4 w-4"})})}),a.jsx(th,{className:"w-64",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Color de texto"}),a.jsx(Ie,{type:"color",value:l,onChange:h=>{c(h.target.value),t.chain().focus().setColor(h.target.value).run()}}),a.jsx("div",{className:"grid grid-cols-6 gap-1",children:["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#000080","#808080"].map(h=>a.jsx("button",{className:"w-8 h-8 rounded border",style:{backgroundColor:h},onClick:()=>{c(h),t.chain().focus().setColor(h).run()}},h))})]})})]})}),a.jsxs("div",{className:"flex gap-1 border-r pr-2",children:[a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsx(re,{size:"sm",variant:"ghost",title:"Insertar enlace",children:a.jsx(bae,{className:"h-4 w-4"})})}),a.jsx(th,{className:"w-80",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"URL del enlace"}),a.jsx(Ie,{placeholder:"https://ejemplo.com",value:r,onChange:h=>i(h.target.value),onKeyDown:h=>h.key==="Enter"&&u()}),a.jsx(re,{onClick:u,className:"w-full",children:"Insertar"})]})})]}),a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsx(re,{size:"sm",variant:"ghost",title:"Insertar imagen",children:a.jsx(CP,{className:"h-4 w-4"})})}),a.jsx(th,{className:"w-80",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"URL de la imagen"}),a.jsx(Ie,{placeholder:"https://ejemplo.com/logo.png",value:s,onChange:h=>o(h.target.value),onKeyDown:h=>h.key==="Enter"&&d()}),a.jsx(re,{onClick:d,className:"w-full",children:"Insertar"})]})})]}),a.jsx(re,{size:"sm",variant:"ghost",onClick:f,title:"Insertar tabla",children:a.jsx(eH,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex gap-1 border-r pr-2",children:a.jsxs(rm,{children:[a.jsx(im,{asChild:!0,children:a.jsxs(re,{size:"sm",variant:"ghost",title:"Insertar variable",children:[a.jsx(wae,{className:"h-4 w-4"}),a.jsx("span",{className:"ml-1 text-xs",children:"Variables"})]})}),a.jsx(th,{className:"w-80",children:a.jsx(uD,{className:"h-96",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Variables disponibles"}),p.map(h=>a.jsxs("button",{className:"w-full text-left p-2 hover:bg-slate-100 rounded text-sm",onClick:()=>e(h.variable),children:[a.jsx("div",{className:"font-mono text-xs text-blue-600",children:h.variable}),a.jsx("div",{className:"text-xs text-slate-600",children:h.description})]},h.variable))]})})})]})}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Deshacer",children:a.jsx(B9,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Rehacer",children:a.jsx($9,{className:"h-4 w-4"})})]})]})})};function eHe({initialContent:t="",budgetType:e,onChange:n,onPreview:r}){const i=cre({extensions:[Lre,Fze,d7e.configure({types:["heading","paragraph"]}),u7e,bze.configure({openOnClick:!1}),hI.configure({resizable:!0}),r9e,s9e,i9e,aI,oI,Z9e.configure({placeholder:'Escribe aquí tu plantilla... Usa el menú superior para dar formato y el botón "Variables" para insertar campos dinámicos.'})],content:t,onUpdate:({editor:o})=>{n?.(o.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[600px] p-4"}}}),s=o=>{i?.chain().focus().insertContent(o).run()};return a.jsxs("div",{className:"border rounded-lg bg-white",children:[a.jsx(Q9e,{editor:i,onInsertVariable:s,budgetType:e}),a.jsx(ore,{editor:i,className:"min-h-[600px]"}),r&&a.jsx("div",{className:"border-t p-2 bg-slate-50 flex justify-end",children:a.jsxs(re,{onClick:r,variant:"outline",size:"sm",children:[a.jsx(ou,{className:"h-4 w-4 mr-2"}),"Vista previa PDF"]})})]})}const tHe={PYME:a.jsx(S1,{className:"h-4 w-4"}),AUTONOMO:a.jsx(Eh,{className:"h-4 w-4"}),RENTA:a.jsx(Sae,{className:"h-4 w-4"}),HERENCIAS:a.jsx(Nae,{className:"h-4 w-4"})},nHe={PYME:"Empresas",AUTONOMO:"Autónomos",RENTA:"Renta",HERENCIAS:"Herencias"};function rHe(){const[t,e]=x.useState(!1),[n,r]=x.useState(null),[i,s]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState("PYME"),[d,f]=x.useState("LA_LLAVE"),[p,h]=x.useState(""),[m,g]=x.useState(null),{toast:v}=nr(),y=Hs(),b=(B,U)=>({...{codigo:"PREV-2025-001",fecha:new Date().toLocaleDateString("es-ES"),nombre_contacto:"Juan Pérez García",email:"juan.perez@ejemplo.com",telefono:"666 777 888",subtotal:"150,00 €",iva:"31,50 €",total:"181,50 €",empresa:U==="LA_LLAVE"?"Asesoría La Llave":"Gestoría Online",descripcion:"Este es un presupuesto de ejemplo para visualizar el diseño de la plantilla."},...{PYME:{nombre_sociedad:"Tecnologías Avanzadas SL",actividad:"Desarrollo de software",periodo_declaraciones:"Trimestral",num_asientos:"50",nominas_mes:"5"},AUTONOMO:{sistema_tributacion:"Estimación Directa",facturacion_anual:"45.000,00 €",num_facturas:"120"},RENTA:{tipo_declaracion:"Individual",ingresos:"35.000,00 €",retenciones:"5.250,00 €"},HERENCIAS:{titulo_sucesorio:"Testamento",num_herederos:"3",fincas_madrid:"Sí",caudal:"180.000,00 €",tipo_proceso:"Normal"}}[B]}),N=x.useMemo(()=>{if(!p)return'<p class="text-muted-foreground text-center py-12">El contenido aparecerá aquí...</p>';const B=b(c,d);let U=p;return Object.entries(B).forEach(([D,z])=>{const H=new RegExp(`{{\\s*${D}\\s*}}`,"gi");U=U.replace(H,String(z))}),U=U.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),U},[p,c,d]),{data:S,isLoading:E}=At({queryKey:["/api/budget-templates"]}),C=yt({mutationFn:async B=>{const U=await fetch("/api/budget-templates",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(B)});if(!U.ok)throw new Error("Error al crear plantilla");return U.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/budget-templates"]}),v({title:"✅ Plantilla creada correctamente"}),k()},onError:()=>{v({title:"❌ Error al crear plantilla",variant:"destructive"})}}),T=yt({mutationFn:async({id:B,data:U})=>{const D=await fetch(`/api/budget-templates/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(U)});if(!D.ok)throw new Error("Error al actualizar plantilla");return D.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/budget-templates"]}),v({title:"✅ Plantilla actualizada correctamente"}),k()},onError:()=>{v({title:"❌ Error al actualizar plantilla",variant:"destructive"})}}),_=yt({mutationFn:async B=>{const U=await fetch(`/api/budget-templates/${B}`,{method:"DELETE",credentials:"include"});if(!U.ok)throw new Error("Error al eliminar plantilla");return U.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/budget-templates"]}),v({title:"✅ Plantilla eliminada correctamente"})},onError:()=>{v({title:"❌ Error al eliminar plantilla",variant:"destructive"})}}),j=yt({mutationFn:async({id:B,type:U,brand:D})=>{const z=await fetch(`/api/budget-templates/${B}/set-default`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:U,companyBrand:D})});if(!z.ok)throw new Error("Error al establecer plantilla predeterminada");return z.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/budget-templates"]}),v({title:"✅ Plantilla establecida como predeterminada"})}}),P=B=>{B?(r(B),s(B.name),l(B.description||""),u(B.type),f(B.companyBrand),h(B.htmlContent)):(r(null),s(""),l(""),u("PYME"),f("LA_LLAVE"),h("")),e(!0)},k=()=>{e(!1),r(null),s(""),l(""),h("")},O=()=>{if(!i.trim()){v({title:"El nombre es obligatorio",variant:"destructive"});return}if(!p.trim()){v({title:"El contenido no puede estar vacío",variant:"destructive"});return}const B={name:i,description:o||null,type:c,companyBrand:d,htmlContent:p};n?T.mutate({id:n.id,data:B}):C.mutate(B)},M=B=>{const U={name:`${B.name} (Copia)`,description:B.description,type:B.type,companyBrand:B.companyBrand,htmlContent:B.htmlContent,isDefault:!1};C.mutate(U)},I=B=>{confirm("¿Estás seguro de eliminar esta plantilla?")&&_.mutate(B)};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-end items-center",children:a.jsxs(re,{onClick:()=>P(),children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Nueva Plantilla"]})}),E?a.jsx(Fe,{children:a.jsx(Be,{className:"p-12 text-center",children:a.jsx("p",{children:"Cargando plantillas..."})})}):a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Plantillas disponibles"}),a.jsxs(Zt,{children:[S?.length||0," plantillas configuradas"]})]}),a.jsx(Be,{children:a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Tipo"}),a.jsx($e,{children:"Empresa"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Actualizada"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsxs(ai,{children:[S?.map(B=>a.jsxs(Gt,{children:[a.jsx(Me,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[tHe[B.type],B.name]})}),a.jsx(Me,{children:a.jsx(Ge,{variant:"outline",children:nHe[B.type]})}),a.jsx(Me,{children:a.jsx(Ge,{variant:B.companyBrand==="LA_LLAVE"?"default":"secondary",children:B.companyBrand==="LA_LLAVE"?"Asesoría La Llave":"Gestoría Online"})}),a.jsx(Me,{children:a.jsxs("div",{className:"flex gap-1",children:[B.isDefault&&a.jsxs(Ge,{variant:"default",children:[a.jsx(c4,{className:"h-3 w-3 mr-1"}),"Predeterminada"]}),B.isActive?a.jsx(Ge,{variant:"outline",className:"text-green-600",children:"Activa"}):a.jsx(Ge,{variant:"outline",className:"text-gray-400",children:"Inactiva"})]})}),a.jsx(Me,{className:"text-sm text-muted-foreground",children:new Date(B.updatedAt).toLocaleDateString("es-ES")}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[!B.isDefault&&a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>j.mutate({id:B.id,type:B.type,brand:B.companyBrand}),title:"Establecer como predeterminada",children:a.jsx(c4,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>g(B),title:"Vista previa",children:a.jsx(ou,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>P(B),title:"Editar",children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>M(B),title:"Duplicar",children:a.jsx(nH,{className:"h-4 w-4"})}),a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>I(B.id),title:"Eliminar",disabled:B.isDefault,children:a.jsx(ei,{className:"h-4 w-4"})})]})})]},B.id)),(!S||S.length===0)&&a.jsx(Gt,{children:a.jsxs(Me,{colSpan:6,className:"text-center py-12 text-muted-foreground",children:[a.jsx(Qr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No hay plantillas configuradas"}),a.jsx("p",{className:"text-sm",children:"Crea tu primera plantilla para comenzar"})]})})]})]})})]}),a.jsx(Un,{open:t,onOpenChange:e,children:a.jsxs(zn,{className:"max-w-[95vw] max-h-[95vh] overflow-hidden",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:n?"Editar Plantilla":"Nueva Plantilla"}),a.jsx(Qn,{children:"Personaliza el diseño del PDF. Los cambios se previsualizan en tiempo real."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 h-[75vh]",children:[a.jsxs("div",{className:"space-y-4 overflow-y-auto pr-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Nombre de la plantilla *"}),a.jsx(Ie,{placeholder:"Ej: Presupuesto PYME Estándar",value:i,onChange:B=>s(B.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Tipo de presupuesto *"}),a.jsxs(un,{value:c,onValueChange:B=>u(B),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"PYME",children:"Empresas (PYME)"}),a.jsx(Ke,{value:"AUTONOMO",children:"Autónomos"}),a.jsx(Ke,{value:"RENTA",children:"Declaración de Renta"}),a.jsx(Ke,{value:"HERENCIAS",children:"Herencias"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Empresa *"}),a.jsxs(un,{value:d,onValueChange:B=>f(B),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"LA_LLAVE",children:"Asesoría La Llave"}),a.jsx(Ke,{value:"GESTORIA_ONLINE",children:"Gestoría Online"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Descripción (opcional)"}),a.jsx(la,{placeholder:"Breve descripción de la plantilla...",value:o,onChange:B=>l(B.target.value),rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Contenido de la plantilla *"}),a.jsx(eHe,{initialContent:p,budgetType:c,onChange:h})]})]}),a.jsxs("div",{className:"border-l pl-6 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-background pb-3 mb-3 border-b z-10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Vista Previa en Tiempo Real"}),a.jsx(Ge,{variant:"secondary",className:"text-xs",children:d==="LA_LLAVE"?"Asesoría La Llave":"Gestoría Online"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Datos de ejemplo • Las variables se reemplazan automáticamente"})]}),a.jsx("div",{className:"prose prose-sm max-w-none p-6 bg-white border rounded shadow-sm",dangerouslySetInnerHTML:{__html:N}})]})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:k,children:"Cancelar"}),a.jsxs(re,{onClick:O,disabled:C.isPending||T.isPending,children:[n?"Actualizar":"Crear"," Plantilla"]})]})]})}),a.jsx(Un,{open:!!m,onOpenChange:()=>g(null),children:a.jsxs(zn,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:m?.name}),a.jsx(Qn,{children:"Vista previa de la plantilla"})]}),a.jsx("div",{className:"prose max-w-none p-6 bg-white border rounded",dangerouslySetInnerHTML:{__html:m?.htmlContent||""}})]})})]})}function Wk(){const[t,e]=es(),{user:n}=Zh(),r=n?.roleName==="Administrador",i=()=>t.includes("/parametros")?"parametros":t.includes("/plantillas")?"plantillas":"presupuestos",s=o=>{o==="presupuestos"?e("/documentacion/presupuestos"):o==="parametros"?e("/documentacion/presupuestos/parametros"):o==="plantillas"&&e("/documentacion/presupuestos/plantillas")};return a.jsxs("div",{className:"container mx-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Documentación"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestión de presupuestos y documentos"})]}),a.jsxs(Wo,{value:i(),onValueChange:s,className:"w-full",children:[a.jsxs(co,{className:"grid w-full grid-cols-3",children:[a.jsxs(vn,{value:"presupuestos",className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"h-4 w-4"}),"Presupuestos"]}),r&&a.jsxs(a.Fragment,{children:[a.jsxs(vn,{value:"parametros",className:"flex items-center gap-2",children:[a.jsx(eS,{className:"h-4 w-4"}),"Parámetros"]}),a.jsxs(vn,{value:"plantillas",className:"flex items-center gap-2",children:[a.jsx(kP,{className:"h-4 w-4"}),"Plantillas"]})]})]}),a.jsx(Rn,{value:"presupuestos",className:"mt-6",children:a.jsx(U9e,{})}),r&&a.jsxs(a.Fragment,{children:[a.jsx(Rn,{value:"parametros",className:"mt-6",children:a.jsx(J9e,{})}),a.jsx(Rn,{value:"plantillas",className:"mt-6",children:a.jsx(rHe,{})})]})]})]})}function vP(){const[,t]=es();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Documentos"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Gestiona recibos, protección de datos, domiciliaciones y otros documentos"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/recibos"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(jae,{className:"w-5 h-5 text-blue-500"}),"Recibos"]}),a.jsx(Zt,{className:"mt-2",children:"Genera recibos para clientes o externos"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Para clientes y externos"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Numeración automática"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Envío por email con PDF"})]}),a.jsx(re,{className:"w-full",variant:"outline",children:"Gestionar Recibos"})]})]}),a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/proteccion-datos"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(_1,{className:"w-5 h-5 text-green-500"}),"Protección de Datos"]}),a.jsx(Zt,{className:"mt-2",children:"Documentos RGPD para clientes"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Solo clientes registrados"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Firma digital"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Plantillas personalizables"})]}),a.jsx(re,{className:"w-full",variant:"outline",children:"Gestionar RGPD"})]})]}),a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/domiciliacion"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Yk,{className:"w-5 h-5 text-purple-500"}),"Domiciliación Bancaria"]}),a.jsx(Zt,{className:"mt-2",children:"Autorización de domiciliación SEPA"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Solo clientes registrados"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Firma requerida"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Envío automático"})]}),a.jsx(re,{className:"w-full",variant:"outline",children:"Gestionar Domiciliaciones"})]})]}),a.jsxs(Fe,{className:"hover:shadow-lg transition cursor-pointer",onClick:()=>t("/documentacion/documentos/plantillas"),children:[a.jsx(Je,{children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(PP,{className:"w-5 h-5 text-orange-500"}),"Plantillas"]}),a.jsx(Zt,{className:"mt-2",children:"Gestiona plantillas de documentos"})]})})}),a.jsxs(Be,{children:[a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Editor visual TipTap"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ Variables dinámicas"}),a.jsx("p",{className:"text-sm text-gray-600",children:"✓ HTML personalizado"})]}),a.jsx(re,{className:"w-full",variant:"outline",children:"Gestionar Plantillas"})]})]})]})]})}async function iHe(t){return await ht("POST","/api/documents/receipts",t)}async function sHe(t){const e=new URLSearchParams;return await ht("GET",`/api/documents/receipts?${e.toString()}`)}async function aHe(t,e){return await ht("PUT",`/api/documents/receipts/${t}`,e)}async function oHe(t){return await ht("POST",`/api/documents/receipts/${t}/generate-pdf`)}async function lHe(t,e){return await ht("POST",`/api/documents/receipts/${t}/send`,e)}async function xie(t){return await ht("POST","/api/documents/documents",t)}async function bie(t){const e=new URLSearchParams;return t?.type&&e.append("type",t.type),t?.status&&e.append("status",t.status),t?.clientId&&e.append("clientId",t.clientId),await ht("GET",`/api/documents/documents?${e.toString()}`)}async function wie(t){return await ht("POST",`/api/documents/documents/${t}/generate-pdf`)}async function Nie(t,e,n,r){return await ht("POST",`/api/documents/documents/${t}/send`,{to:e,subject:n,message:r})}async function Sie(t,e){const n=new FormData;n.append("signedFile",e);const r=await fetch(`/api/documents/documents/${t}/accept`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:n});if(!r.ok)throw new Error(await r.text());return await r.json()}async function cHe(t){return await ht("POST","/api/documents/templates",t)}async function pI(t){const e=new URLSearchParams;return t?.type&&e.append("type",t.type),t?.isActive!==void 0&&e.append("isActive",t.isActive.toString()),await ht("GET",`/api/documents/templates?${e.toString()}`)}async function d9(t,e){return await ht("PUT",`/api/documents/templates/${t}`,e)}async function uHe(t){return await ht("DELETE",`/api/documents/templates/${t}`)}function jie(){const[,t]=es(),[e,n]=x.useState(!1),[r,i]=x.useState(null),[s,o]=x.useState("client"),[l,c]=x.useState("total"),[u,d]=x.useState(""),[f,p]=x.useState("21"),[h,m]=x.useState(""),g=Hs(),{data:v=[],isLoading:y}=At({queryKey:["/api/documents/receipts"],queryFn:()=>sHe()}),{data:b=[],isLoading:N}=At({queryKey:["/api/clients"],queryFn:()=>ht("GET","/api/clients")}),S=D=>{if(m(D),D&&!isNaN(parseFloat(D))){const z=parseFloat(D),H=parseFloat(f)||21,ee=z/(1+H/100);d(ee.toFixed(2))}},E=D=>{if(d(D),D&&!isNaN(parseFloat(D))){const z=parseFloat(D),H=parseFloat(f)||21,ee=z*(1+H/100);m(ee.toFixed(2))}},C=D=>{p(D),l==="total"&&h?S(h):l==="base"&&u&&E(u)},T=()=>{o("client"),c("total"),d(""),p("21"),m("")},_=(D,z)=>{let H=D;if(D.startsWith("/root/")){const ee=D.match(/uploads\/documents\/.+$/);ee&&(H=`/${ee[0]}`)}window.open(H,"_blank")},j=D=>{i(D),o(D.client_id?"client":"external"),d(D.base_imponible.toString()),p(D.iva_porcentaje.toString()),m(D.total.toString()),n(!0)},P=yt({mutationFn:iHe,onSuccess:()=>{g.invalidateQueries({queryKey:["receipts"]}),n(!1),i(null),T(),Zn({title:"Recibo creado correctamente"})},onError:D=>{Zn({title:"Error",description:D.message,variant:"destructive"})}}),k=yt({mutationFn:({id:D,data:z})=>aHe(D,z),onSuccess:()=>{g.invalidateQueries({queryKey:["receipts"]}),n(!1),i(null),T(),Zn({title:"Recibo actualizado correctamente"})},onError:D=>{Zn({title:"Error",description:D.message,variant:"destructive"})}}),O=yt({mutationFn:D=>oHe(D),onSuccess:()=>{g.invalidateQueries({queryKey:["receipts"]}),Zn({title:"PDF generado correctamente"})}}),M=yt({mutationFn:({id:D,to:z})=>lHe(D,{to:z}),onSuccess:()=>{g.invalidateQueries({queryKey:["receipts"]}),Zn({title:"Recibo enviado correctamente"})}}),I=D=>{D.preventDefault();const z=new FormData(D.currentTarget),H={concepto:z.get("concepto"),base_imponible:parseFloat(u),iva_porcentaje:parseFloat(f)||21,notes:z.get("notes")||void 0};if(s==="client"){H.clientId=z.get("clientId");const ee=b.find(ae=>ae.id===H.clientId);ee&&(H.recipient_name=ee.razonSocial,H.recipient_nif=ee.nifCif,H.recipient_email=ee.email||"")}else H.recipient_name=z.get("recipient_name"),H.recipient_nif=z.get("recipient_nif"),H.recipient_email=z.get("recipient_email"),H.recipient_address=z.get("recipient_address")||void 0;r?k.mutate({id:r.id,data:H}):P.mutate(H)},B=()=>{i(null),o("client"),d(""),p("21"),m(""),c("total"),n(!0)},U=D=>{const z={BORRADOR:"secondary",ENVIADO:"default",ARCHIVADO:"outline"};return a.jsx(Ge,{variant:z[D]||"secondary",children:D})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(re,{variant:"ghost",onClick:()=>t("/documentacion/documentos"),className:"mb-2",children:[a.jsx(ju,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recibos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Genera y gestiona recibos para clientes o externos"})]}),a.jsxs(Un,{open:e,onOpenChange:n,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:B,children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Nuevo Recibo"]})}),a.jsxs(zn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:r?"Editar Recibo":"Crear Nuevo Recibo"}),a.jsx(Qn,{children:r?"Modifica los datos del recibo":"Genera un recibo para un cliente registrado o una persona externa"})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Tipo de Destinatario"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(re,{type:"button",variant:s==="client"?"default":"outline",onClick:()=>o("client"),className:"flex-1",children:[a.jsx(S1,{className:"w-4 h-4 mr-2"}),"Cliente Registrado"]}),a.jsxs(re,{type:"button",variant:s==="external"?"default":"outline",onClick:()=>o("external"),className:"flex-1",children:[a.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Persona Externa"]})]})]}),s==="client"?a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(un,{name:"clientId",required:!0,defaultValue:r?.client_id,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona un cliente"})}),a.jsx(an,{children:b.map(D=>a.jsxs(Ke,{value:D.id,children:[D.razonSocial," - ",D.nifCif]},D.id))})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"recipient_name",children:"Nombre/Razón Social *"}),a.jsx(Ie,{id:"recipient_name",name:"recipient_name",required:!0,defaultValue:r?.recipient_name})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"recipient_nif",children:"NIF/CIF *"}),a.jsx(Ie,{id:"recipient_nif",name:"recipient_nif",required:!0,defaultValue:r?.recipient_nif})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"recipient_email",children:"Email *"}),a.jsx(Ie,{id:"recipient_email",name:"recipient_email",type:"email",required:!0,defaultValue:r?.recipient_email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"recipient_address",children:"Dirección"}),a.jsx(Ie,{id:"recipient_address",name:"recipient_address",defaultValue:r?.recipient_address})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"concepto",children:"Concepto *"}),a.jsx(la,{id:"concepto",name:"concepto",required:!0,rows:2,defaultValue:r?.concepto})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{children:"Modo de Cálculo"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(re,{type:"button",variant:l==="total"?"default":"outline",onClick:()=>c("total"),className:"flex-1",children:"Introducir Precio Total"}),a.jsx(re,{type:"button",variant:l==="base"?"default":"outline",onClick:()=>c("base"),className:"flex-1",children:"Introducir Base Imponible"})]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:l==="total"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"precio_total",children:"Precio Total (€) *"}),a.jsx(Ie,{id:"precio_total",name:"precio_total",type:"number",step:"0.01",min:"0",value:h,onChange:D=>S(D.target.value),required:!0,className:"font-semibold"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"iva_porcentaje",children:"IVA (%)"}),a.jsx(Ie,{id:"iva_porcentaje",name:"iva_porcentaje",type:"number",step:"0.01",value:f,onChange:D=>C(D.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{className:"text-muted-foreground",children:"Base Imponible (calculada)"}),a.jsx("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted flex items-center justify-end font-mono",children:u?`${u} €`:"-"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"base_imponible",children:"Base Imponible (€) *"}),a.jsx(Ie,{id:"base_imponible",name:"base_imponible",type:"number",step:"0.01",min:"0",value:u,onChange:D=>E(D.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"iva_porcentaje",children:"IVA (%)"}),a.jsx(Ie,{id:"iva_porcentaje",name:"iva_porcentaje",type:"number",step:"0.01",value:f,onChange:D=>C(D.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{className:"text-muted-foreground",children:"Total (calculado)"}),a.jsx("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted flex items-center justify-end font-mono font-semibold",children:h?`${h} €`:"-"})]})]})}),u&&h&&a.jsxs("div",{className:"p-3 bg-muted rounded-md text-sm space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Base Imponible:"}),a.jsxs("span",{className:"font-mono",children:[u," €"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["IVA (",f,"%):"]}),a.jsxs("span",{className:"font-mono",children:[(parseFloat(h)-parseFloat(u)).toFixed(2)," €"]})]}),a.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[a.jsx("span",{children:"TOTAL:"}),a.jsxs("span",{className:"font-mono",children:[h," €"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"notes",children:"Observaciones"}),a.jsx(la,{id:"notes",name:"notes",rows:2,defaultValue:r?.notes})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(re,{type:"submit",disabled:P.isPending||k.isPending,children:r?k.isPending?"Actualizando...":"Actualizar Recibo":P.isPending?"Creando...":"Crear Recibo"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Recibos Emitidos"}),a.jsx(Zt,{children:"Listado de todos los recibos generados"})]}),a.jsx(Be,{children:y?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):v.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay recibos. Crea tu primer recibo."}):a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Número"}),a.jsx($e,{children:"Destinatario"}),a.jsx($e,{children:"Concepto"}),a.jsx($e,{className:"text-right",children:"Total"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Fecha"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:v.map(D=>a.jsxs(Gt,{children:[a.jsx(Me,{className:"font-medium",children:D.numero}),a.jsx(Me,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:D.recipient_name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:D.recipient_nif})]})}),a.jsx(Me,{className:"max-w-xs truncate",children:D.concepto}),a.jsxs(Me,{className:"text-right font-medium",children:[Number(D.total).toFixed(2)," €"]}),a.jsx(Me,{children:U(D.status)}),a.jsx(Me,{children:new Date(D.created_at).toLocaleDateString("es-ES")}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[D.status==="BORRADOR"&&a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>j(D),title:"Editar recibo",children:a.jsx(mc,{className:"w-4 h-4"})}),!D.pdf_path&&a.jsx(re,{size:"sm",variant:"outline",onClick:()=>O.mutate(D.id),disabled:O.isPending,title:"Generar PDF",children:a.jsx(IP,{className:"w-4 h-4"})}),D.pdf_path&&a.jsx(re,{size:"sm",variant:"outline",onClick:()=>_(D.pdf_path,D.numero),title:"Descargar PDF",children:a.jsx(Cs,{className:"w-4 h-4"})}),D.pdf_path&&D.status==="BORRADOR"&&a.jsx(re,{size:"sm",onClick:()=>M.mutate({id:D.id,to:D.recipient_email}),disabled:M.isPending,title:"Enviar por email",children:a.jsx(Zx,{className:"w-4 h-4"})})]})})]},D.id))})]})})]})]})}function f9(){return a.jsxs(Xk,{children:[a.jsx(kn,{path:"/documentacion/documentos",component:vP}),a.jsx(kn,{path:"/documentacion/documentos/recibos",component:jie}),a.jsx(kn,{path:"/documentacion/documentos/proteccion-datos",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Protección de Datos"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(kn,{path:"/documentacion/documentos/domiciliacion",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Domiciliación Bancaria"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(kn,{path:"/documentacion/documentos/plantillas",children:()=>a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Plantillas"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"En desarrollo..."})]})}),a.jsx(kn,{children:()=>a.jsx(vP,{})})]})}function dHe(){const[,t]=es(),[e,n]=x.useState(!1),[r,i]=x.useState(!1),[s,o]=x.useState(null),[l,c]=x.useState(null),u=Hs(),{data:d=[],isLoading:f}=At({queryKey:["/api/documents/documents",{type:"DATA_PROTECTION"}],queryFn:()=>bie({type:"DATA_PROTECTION"})}),{data:p=[],isLoading:h}=At({queryKey:["/api/clients"],queryFn:()=>ht("GET","/api/clients")}),{data:m=[]}=At({queryKey:["/api/documents/templates",{type:"DATA_PROTECTION"}],queryFn:()=>pI({type:"DATA_PROTECTION",isActive:!0})}),g=yt({mutationFn:xie,onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),n(!1),Zn({title:"Documento creado correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),v=yt({mutationFn:j=>wie(j),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Zn({title:"PDF generado correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),y=yt({mutationFn:({id:j,to:P,subject:k,message:O})=>Nie(j,P,k,O),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Zn({title:"Documento enviado por email correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),b=yt({mutationFn:({id:j,file:P})=>Sie(j,P),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),i(!1),c(null),Zn({title:"Documento aceptado y archivo firmado guardado"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),N=j=>{j.preventDefault();const P=new FormData(j.currentTarget);g.mutate({type:"DATA_PROTECTION",clientId:P.get("clientId"),templateId:P.get("templateId")})},S=j=>{const P=p.find(k=>k.id===j.clientId);if(!P?.email){Zn({title:"Error",description:"El cliente no tiene email",variant:"destructive"});return}y.mutate({id:j.id,to:P.email,subject:"Documento de Protección de Datos - Firma requerida",message:"Adjunto encontrará el documento de protección de datos. Por favor, fírmelo y devuélvalo."})},E=()=>{if(!s||!l){Zn({title:"Error",description:"Seleccione un archivo",variant:"destructive"});return}b.mutate({id:s,file:l})},C=j=>{o(j),i(!0)},T=j=>{const P={BORRADOR:"secondary",ENVIADO:"default",ACEPTADO:"outline",RECHAZADO:"destructive",ARCHIVADO:"outline"};return a.jsx(Ge,{variant:P[j]||"default",children:j})},_=j=>{const P={PENDIENTE:"secondary",FIRMADO:"default",RECHAZADO:"destructive"},k={PENDIENTE:"text-yellow-600",FIRMADO:"text-green-600",RECHAZADO:"text-red-600"};return a.jsx(Ge,{variant:P[j]||"default",className:k[j],children:j})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(ju,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(_1,{className:"h-8 w-8 text-green-600"}),"Protección de Datos"]}),a.jsx("p",{className:"text-muted-foreground",children:"Gestión de documentos de protección de datos"})]})]}),a.jsxs(Un,{open:e,onOpenChange:n,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Crear Documento"]})}),a.jsxs(zn,{className:"max-w-xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Nuevo Documento de Protección de Datos"}),a.jsx(Qn,{children:"Selecciona el cliente y la plantilla para generar el documento"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(un,{name:"clientId",required:!0,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar cliente..."})}),a.jsx(an,{children:h?a.jsx(Ke,{value:"loading",disabled:!0,children:"Cargando..."}):p.map(j=>a.jsxs(Ke,{value:j.id,children:[j.nombre_fiscal||j.nombre," - ",j.nif]},j.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"templateId",children:"Plantilla *"}),a.jsxs(un,{name:"templateId",required:!0,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar plantilla..."})}),a.jsx(an,{children:m.length===0?a.jsx(Ke,{value:"none",disabled:!0,children:"No hay plantillas activas"}):m.map(j=>a.jsx(Ke,{value:j.id,children:j.name},j.id))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(re,{type:"submit",disabled:g.isPending,children:g.isPending?"Creando...":"Crear Documento"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Documentos de Protección de Datos"}),a.jsx(Zt,{children:"Listado de todos los documentos generados"})]}),a.jsx(Be,{children:f?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):d.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay documentos. Crea tu primer documento de protección de datos."}):a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Cliente"}),a.jsx($e,{children:"Plantilla"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Firma"}),a.jsx($e,{children:"Fecha Envío"}),a.jsx($e,{children:"Fecha Firma"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:d.map(j=>{const P=p.find(O=>O.id===j.clientId),k=m.find(O=>O.id===j.templateId);return a.jsxs(Gt,{children:[a.jsxs(Me,{className:"font-medium",children:[P?.nombre_fiscal||P?.nombre||"N/A",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-muted-foreground",children:P?.nif})]}),a.jsx(Me,{children:k?.name||"N/A"}),a.jsx(Me,{children:T(j.status)}),a.jsx(Me,{children:_(j.signatureStatus)}),a.jsx(Me,{children:j.sentAt?new Date(j.sentAt).toLocaleDateString():"-"}),a.jsx(Me,{children:j.signatureDate?new Date(j.signatureDate).toLocaleDateString():"-"}),a.jsxs(Me,{className:"text-right space-x-2",children:[!j.filePath&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>v.mutate(j.id),disabled:v.isPending,children:[a.jsx(IP,{className:"h-4 w-4 mr-1"}),"Generar PDF"]}),j.filePath&&j.status==="BORRADOR"&&a.jsxs(re,{size:"sm",onClick:()=>S(j),disabled:y.isPending,children:[a.jsx(Zx,{className:"h-4 w-4 mr-1"}),"Enviar"]}),j.status==="ENVIADO"&&j.signatureStatus==="PENDIENTE"&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>C(j.id),children:[a.jsx(sa,{className:"h-4 w-4 mr-1"}),"Subir Firmado"]}),j.signedFilePath&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>window.open(`/api/documents/documents/${j.id}/signed-pdf`,"_blank"),children:[a.jsx(_1,{className:"h-4 w-4 mr-1"}),"Ver Firmado"]})]})]},j.id)})})]})})]}),a.jsx(Un,{open:r,onOpenChange:i,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Subir Documento Firmado"}),a.jsx(Qn,{children:"Selecciona el archivo PDF firmado por el cliente"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"signedFile",children:"Archivo PDF *"}),a.jsx(Ie,{id:"signedFile",type:"file",accept:".pdf",onChange:j=>c(j.target.files?.[0]||null)})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{i(!1),c(null)},children:"Cancelar"}),a.jsx(re,{onClick:E,disabled:!l||b.isPending,children:b.isPending?"Subiendo...":"Marcar como Aceptado"})]})]})]})})]})}function fHe(){const[,t]=es(),[e,n]=x.useState(!1),[r,i]=x.useState(!1),[s,o]=x.useState(null),[l,c]=x.useState(null),u=Hs(),{data:d=[],isLoading:f}=At({queryKey:["/api/documents/documents",{type:"BANKING_DOMICILIATION"}],queryFn:()=>bie({type:"BANKING_DOMICILIATION"})}),{data:p=[],isLoading:h}=At({queryKey:["/api/clients"],queryFn:()=>ht("GET","/api/clients")}),{data:m=[]}=At({queryKey:["/api/documents/templates",{type:"BANKING_DOMICILIATION"}],queryFn:()=>pI({type:"BANKING_DOMICILIATION",isActive:!0})}),g=yt({mutationFn:xie,onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),n(!1),Zn({title:"Documento creado correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),v=yt({mutationFn:j=>wie(j),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Zn({title:"PDF generado correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),y=yt({mutationFn:({id:j,to:P,subject:k,message:O})=>Nie(j,P,k,O),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),Zn({title:"Documento enviado por email correctamente"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),b=yt({mutationFn:({id:j,file:P})=>Sie(j,P),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/documents/documents"]}),i(!1),c(null),Zn({title:"Documento aceptado y archivo firmado guardado"})},onError:j=>{Zn({title:"Error",description:j.message,variant:"destructive"})}}),N=j=>{j.preventDefault();const P=new FormData(j.currentTarget);g.mutate({type:"BANKING_DOMICILIATION",clientId:P.get("clientId"),templateId:P.get("templateId")})},S=j=>{const P=p.find(k=>k.id===j.clientId);if(!P?.email){Zn({title:"Error",description:"El cliente no tiene email",variant:"destructive"});return}y.mutate({id:j.id,to:P.email,subject:"Documento de Domiciliación Bancaria - Firma requerida",message:"Adjunto encontrará el documento de domiciliación bancaria. Por favor, fírmelo y devuélvalo."})},E=()=>{if(!s||!l){Zn({title:"Error",description:"Seleccione un archivo",variant:"destructive"});return}b.mutate({id:s,file:l})},C=j=>{o(j),i(!0)},T=j=>{const P={BORRADOR:"secondary",ENVIADO:"default",ACEPTADO:"outline",RECHAZADO:"destructive",ARCHIVADO:"outline"};return a.jsx(Ge,{variant:P[j]||"default",children:j})},_=j=>{const P={PENDIENTE:"secondary",FIRMADO:"default",RECHAZADO:"destructive"},k={PENDIENTE:"text-yellow-600",FIRMADO:"text-green-600",RECHAZADO:"text-red-600"};return a.jsx(Ge,{variant:P[j]||"default",className:k[j],children:j})};return a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{variant:"ghost",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(ju,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(Yk,{className:"h-8 w-8 text-purple-600"}),"Domiciliación Bancaria"]}),a.jsx("p",{className:"text-muted-foreground",children:"Gestión de documentos de domiciliación bancaria"})]})]}),a.jsxs(Un,{open:e,onOpenChange:n,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{children:[a.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Crear Documento"]})}),a.jsxs(zn,{className:"max-w-xl",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Nuevo Documento de Domiciliación Bancaria"}),a.jsx(Qn,{children:"Selecciona el cliente y la plantilla para generar el documento"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"clientId",children:"Cliente *"}),a.jsxs(un,{name:"clientId",required:!0,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar cliente..."})}),a.jsx(an,{children:h?a.jsx(Ke,{value:"loading",disabled:!0,children:"Cargando..."}):p.map(j=>a.jsxs(Ke,{value:j.id,children:[j.nombre_fiscal||j.nombre," - ",j.nif]},j.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"templateId",children:"Plantilla *"}),a.jsxs(un,{name:"templateId",required:!0,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar plantilla..."})}),a.jsx(an,{children:m.length===0?a.jsx(Ke,{value:"none",disabled:!0,children:"No hay plantillas activas"}):m.map(j=>a.jsx(Ke,{value:j.id,children:j.name},j.id))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),a.jsx(re,{type:"submit",disabled:g.isPending,children:g.isPending?"Creando...":"Crear Documento"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Documentos de Domiciliación Bancaria"}),a.jsx(Zt,{children:"Listado de todos los documentos generados"})]}),a.jsx(Be,{children:f?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando..."}):d.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay documentos. Crea tu primer documento de domiciliación bancaria."}):a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Cliente"}),a.jsx($e,{children:"Plantilla"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Firma"}),a.jsx($e,{children:"Fecha Envío"}),a.jsx($e,{children:"Fecha Firma"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:d.map(j=>{const P=p.find(O=>O.id===j.clientId),k=m.find(O=>O.id===j.templateId);return a.jsxs(Gt,{children:[a.jsxs(Me,{className:"font-medium",children:[P?.nombre_fiscal||P?.nombre||"N/A",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-muted-foreground",children:P?.nif})]}),a.jsx(Me,{children:k?.name||"N/A"}),a.jsx(Me,{children:T(j.status)}),a.jsx(Me,{children:_(j.signatureStatus)}),a.jsx(Me,{children:j.sentAt?new Date(j.sentAt).toLocaleDateString():"-"}),a.jsx(Me,{children:j.signatureDate?new Date(j.signatureDate).toLocaleDateString():"-"}),a.jsxs(Me,{className:"text-right space-x-2",children:[!j.filePath&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>v.mutate(j.id),disabled:v.isPending,children:[a.jsx(IP,{className:"h-4 w-4 mr-1"}),"Generar PDF"]}),j.filePath&&j.status==="BORRADOR"&&a.jsxs(re,{size:"sm",onClick:()=>S(j),disabled:y.isPending,children:[a.jsx(Zx,{className:"h-4 w-4 mr-1"}),"Enviar"]}),j.status==="ENVIADO"&&j.signatureStatus==="PENDIENTE"&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>C(j.id),children:[a.jsx(sa,{className:"h-4 w-4 mr-1"}),"Subir Firmado"]}),j.signedFilePath&&a.jsxs(re,{size:"sm",variant:"outline",onClick:()=>window.open(`/api/documents/documents/${j.id}/signed-pdf`,"_blank"),children:[a.jsx(Yk,{className:"h-4 w-4 mr-1"}),"Ver Firmado"]})]})]},j.id)})})]})})]}),a.jsx(Un,{open:r,onOpenChange:i,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Subir Documento Firmado"}),a.jsx(Qn,{children:"Selecciona el archivo PDF firmado por el cliente"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"signedFile",children:"Archivo PDF *"}),a.jsx(Ie,{id:"signedFile",type:"file",accept:".pdf",onChange:j=>c(j.target.files?.[0]||null)})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{i(!1),c(null)},children:"Cancelar"}),a.jsx(re,{onClick:E,disabled:!l||b.isPending,children:b.isPending?"Subiendo...":"Marcar como Aceptado"})]})]})]})})]})}function hHe(){const[,t]=es(),[e,n]=x.useState(!1),[r,i]=x.useState(null),[s,o]=x.useState("all"),[l,c]=x.useState(""),[u,d]=x.useState(null),f=Hs(),p=()=>({NUMERO:"REC-2025-001",NOMBRE:"Ejemplo Cliente SL",NIF:"B12345678",EMAIL:"cliente@ejemplo.com",FECHA:new Date().toLocaleDateString("es-ES"),CONCEPTO:"Servicios de asesoría fiscal - Enero 2025",BASE:"150.00",IVA_PORCENTAJE:"21",IVA_IMPORTE:"31.50",TOTAL:"181.50",NOTAS:"Gracias por confiar en nuestros servicios."});x.useMemo(()=>{if(!l)return'<p class="text-muted-foreground text-center py-12">El contenido aparecerá aquí...</p>';const P=p();let k=l;return Object.entries(P).forEach(([O,M])=>{const I=new RegExp(`{{\\s*${O}\\s*}}`,"gi");k=k.replace(I,String(M))}),k=k.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),k},[l]);const{data:h=[],isLoading:m}=At({queryKey:["/api/documents/templates"],queryFn:()=>pI()}),g=yt({mutationFn:cHe,onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),n(!1),i(null),Zn({title:"Plantilla creada correctamente"})},onError:P=>{Zn({title:"Error",description:P.message,variant:"destructive"})}}),v=yt({mutationFn:({id:P,data:k})=>d9(P,k),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),n(!1),i(null),Zn({title:"Plantilla actualizada correctamente"})},onError:P=>{Zn({title:"Error",description:P.message,variant:"destructive"})}}),y=yt({mutationFn:uHe,onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),Zn({title:"Plantilla eliminada correctamente"})},onError:P=>{Zn({title:"Error",description:P.message,variant:"destructive"})}}),b=yt({mutationFn:({id:P,isActive:k})=>d9(P,{is_active:!k}),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/documents/templates"]}),Zn({title:"Estado actualizado correctamente"})}}),N=P=>{P.preventDefault();const k=new FormData(P.currentTarget),O={type:k.get("type"),name:k.get("name"),description:k.get("description")||void 0,content:k.get("content")};r?v.mutate({id:r.id,data:O}):g.mutate(O)},S=P=>{i(P),c(P.content||""),n(!0)},E=P=>{confirm("¿Estás seguro de eliminar esta plantilla?")&&y.mutate(P)},C=()=>{i(null),c(""),n(!0)},T=P=>({DATA_PROTECTION:"Protección de Datos",BANKING_DOMICILIATION:"Domiciliación Bancaria",RECEIPT:"Recibo"})[P]||P,_=P=>({DATA_PROTECTION:"bg-blue-100 text-blue-800",BANKING_DOMICILIATION:"bg-green-100 text-green-800",RECEIPT:"bg-purple-100 text-purple-800"})[P]||"bg-gray-100 text-gray-800",j=s==="all"?h:h.filter(P=>P.type===s);return a.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(re,{variant:"outline",size:"icon",onClick:()=>t("/documentacion/documentos"),children:a.jsx(ju,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Plantillas de Documentos"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Gestiona las plantillas para generar documentos PDF"})]})]}),a.jsxs(Un,{open:e,onOpenChange:n,children:[a.jsx(As,{asChild:!0,children:a.jsxs(re,{onClick:C,children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Nueva Plantilla"]})}),a.jsxs(zn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:r?"Editar Plantilla":"Nueva Plantilla"}),a.jsxs(Qn,{children:["Las variables disponibles son: ","{{NUMERO}}",", ","{{NOMBRE}}",", ","{{NIF}}",", ","{{EMAIL}}",", ","{{FECHA}}",", ","{{CONCEPTO}}",", ","{{BASE}}",", ","{{IVA_PORCENTAJE}}",", ","{{IVA_IMPORTE}}",", ","{{TOTAL}}",", ","{{NOTAS}}"]})]}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"type",children:"Tipo de Plantilla"}),a.jsxs(un,{name:"type",defaultValue:r?.type||"",required:!0,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Selecciona un tipo"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"DATA_PROTECTION",children:"Protección de Datos"}),a.jsx(Ke,{value:"BANKING_DOMICILIATION",children:"Domiciliación Bancaria"}),a.jsx(Ke,{value:"RECEIPT",children:"Recibo"})]})]})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"name",children:"Nombre de la Plantilla"}),a.jsx(Ie,{id:"name",name:"name",defaultValue:r?.name||"",placeholder:"Ej: Plantilla de Recibo Estándar",required:!0})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"description",children:"Descripción (opcional)"}),a.jsx(la,{id:"description",name:"description",defaultValue:r?.description||"",placeholder:"Describe el propósito de esta plantilla",rows:2})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx(ye,{htmlFor:"content",children:"Contenido HTML"}),a.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:()=>d({name:r?.name||"Vista previa",content:l}),disabled:!l,children:[a.jsx(ou,{className:"w-4 h-4 mr-2"}),"Vista Previa"]})]}),a.jsx(la,{id:"content",name:"content",value:l,onChange:P=>c(P.target.value),placeholder:"Ingresa el código HTML de la plantilla con las variables {{VARIABLE}}",rows:15,className:"font-mono text-sm",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Usa HTML válido. Las variables se reemplazarán automáticamente al generar el PDF."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(re,{type:"button",variant:"outline",onClick:()=>{n(!1),i(null)},children:"Cancelar"}),a.jsxs(re,{type:"submit",disabled:g.isPending||v.isPending,children:[r?"Actualizar":"Crear"," Plantilla"]})]})]})]})]})]}),a.jsx(Fe,{children:a.jsx(Be,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ye,{children:"Filtrar por tipo:"}),a.jsxs(un,{value:s,onValueChange:o,children:[a.jsx(sn,{className:"w-[250px]",children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"all",children:"Todas las plantillas"}),a.jsx(Ke,{value:"DATA_PROTECTION",children:"Protección de Datos"}),a.jsx(Ke,{value:"BANKING_DOMICILIATION",children:"Domiciliación Bancaria"}),a.jsx(Ke,{value:"RECEIPT",children:"Recibos"})]})]})]})})}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Plantillas Registradas"}),a.jsxs(Zt,{children:[j.length," plantilla(s) encontrada(s)"]})]}),a.jsx(Be,{children:m?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cargando plantillas..."}):j.length===0?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No hay plantillas registradas. Crea una nueva para comenzar."}):a.jsxs(ii,{children:[a.jsx(si,{children:a.jsxs(Gt,{children:[a.jsx($e,{children:"Nombre"}),a.jsx($e,{children:"Tipo"}),a.jsx($e,{children:"Descripción"}),a.jsx($e,{children:"Estado"}),a.jsx($e,{children:"Fecha"}),a.jsx($e,{className:"text-right",children:"Acciones"})]})}),a.jsx(ai,{children:j.map(P=>a.jsxs(Gt,{children:[a.jsx(Me,{className:"font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4 text-muted-foreground"}),P.name]})}),a.jsx(Me,{children:a.jsx(Ge,{className:_(P.type),children:T(P.type)})}),a.jsx(Me,{className:"max-w-xs truncate",children:P.description||"-"}),a.jsx(Me,{children:a.jsx(re,{size:"sm",variant:"ghost",onClick:()=>b.mutate({id:P.id,isActive:P.is_active}),children:P.is_active?a.jsxs(Ge,{className:"bg-green-100 text-green-800",children:[a.jsx(ou,{className:"w-3 h-3 mr-1"}),"Activa"]}):a.jsxs(Ge,{variant:"secondary",children:[a.jsx(_ae,{className:"w-3 h-3 mr-1"}),"Inactiva"]})})}),a.jsx(Me,{children:new Date(P.created_at).toLocaleDateString("es-ES")}),a.jsx(Me,{className:"text-right",children:a.jsxs("div",{className:"flex gap-1 justify-end",children:[a.jsx(re,{size:"sm",variant:"outline",onClick:()=>d(P),title:"Vista previa",children:a.jsx(ou,{className:"w-4 h-4"})}),a.jsx(re,{size:"sm",variant:"outline",onClick:()=>S(P),children:a.jsx(mc,{className:"w-4 h-4"})}),a.jsx(re,{size:"sm",variant:"outline",onClick:()=>E(P.id),disabled:y.isPending,children:a.jsx(ei,{className:"w-4 h-4"})})]})})]},P.id))})]})})]}),a.jsx(Un,{open:!!u,onOpenChange:()=>d(null),children:a.jsxs(zn,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:u?.name}),a.jsx(Qn,{children:"Vista previa de la plantilla con datos de ejemplo"})]}),a.jsx("div",{className:"prose max-w-none p-6 bg-white border rounded",dangerouslySetInnerHTML:{__html:u?.content?(()=>{const P=p();let k=u.content;return Object.entries(P).forEach(([O,M])=>{const I=new RegExp(`{{\\s*${O}\\s*}}`,"gi");k=k.replace(I,String(M))}),k=k.replace(/{{([^}]+)}}/g,'<span style="background-color: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; font-size: 0.875em;">[$1]</span>'),k})():""}})]})})]})}function pHe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let yP=1;class mHe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:yP++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:r}),{...c,...e,id:s,dismissible:l,title:r}):c):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const l=i.then(async u=>{if(o=["resolve",u],le.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(vHe(u)&&!u.ok){s=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,m=typeof f=="object"&&!le.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...m})}else if(u instanceof Error){s=!1;const f=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,m=typeof f=="object"&&!le.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...m})}else if(n.success!==void 0){s=!1;const f=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,m=typeof f=="object"&&!le.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:p,...m})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){s=!1;const d=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description,h=typeof d=="object"&&!le.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...h})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{const r=n?.id||yP++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Co=new mHe,gHe=(t,e)=>{const n=e?.id||yP++;return Co.addToast({title:t,...e,id:n}),n},vHe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",yHe=gHe,xHe=()=>Co.toasts,bHe=()=>Co.getActiveToasts(),na=Object.assign(yHe,{success:Co.success,info:Co.info,warning:Co.warning,error:Co.error,custom:Co.custom,message:Co.message,promise:Co.promise,dismiss:Co.dismiss,loading:Co.loading},{getHistory:xHe,getToasts:bHe});pHe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Fp(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 €":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function h9(){const[t,e]=es(),[n,r]=iS("/documentacion/presupuestos/:id/editar"),i=r?.id,s=!!i,[o,l]=x.useState("ASESORIA_LA_LLAVE"),[c,u]=x.useState("AUTONOMO"),[d,f]=x.useState(null),[p,h]=x.useState([]),{data:m,isLoading:g}=vie(i||""),{data:v}=q9e(o),y=R9e(),b=D9e(),N=I9e(),{register:S,handleSubmit:E,watch:C,setValue:T,formState:{errors:_}}=ER({defaultValues:{tipoGestoria:"ASESORIA_LA_LLAVE",creadoPor:"admin",configId:"",nombreCliente:"",nifCif:"",email:"",telefono:"",direccion:"",personaContacto:"",facturacion:0,facturasMes:0,nominasMes:0,sistemaTributacion:"Estimación Directa",periodoDeclaraciones:"Trimestral",modelo303:!1,modelo111:!1,modelo115:!1,modelo130:!1,modelo100:!1,modelo349:!1,modelo347:!1,solicitudCertificados:!1,censosAEAT:!1,recepcionNotificaciones:!1,estadisticasINE:!1,solicitudAyudas:!1,conLaboralSocial:!1,aplicaDescuento:!1,tipoDescuento:"PORCENTAJE",valorDescuento:0}}),j=C(),P=x.useRef(null);x.useEffect(()=>{s&&m&&!g&&(l(m.tipoGestoria),T("nombreCliente",m.nombreCliente),T("nifCif",m.nifCif),T("email",m.email),T("telefono",m.telefono||""),T("direccion",m.direccion||""),T("personaContacto",m.personaContacto||""),T("facturacion",m.facturacion),T("facturasMes",m.facturasMes),T("nominasMes",m.nominasMes||0),T("sistemaTributacion",m.sistemaTributacion),T("periodoDeclaraciones",m.periodoDeclaraciones),T("modelo303",m.modelo303||!1),T("modelo111",m.modelo111||!1),T("modelo115",m.modelo115||!1),T("modelo130",m.modelo130||!1),T("modelo100",m.modelo100||!1),T("modelo349",m.modelo349||!1),T("modelo347",m.modelo347||!1),T("solicitudCertificados",m.solicitudCertificados||!1),T("censosAEAT",m.censosAEAT||!1),T("recepcionNotificaciones",m.recepcionNotificaciones||!1),T("estadisticasINE",m.estadisticasINE||!1),T("solicitudAyudas",m.solicitudAyudas||!1),T("conLaboralSocial",m.conLaboralSocial||!1),T("aplicaDescuento",m.aplicaDescuento||!1),T("tipoDescuento",m.tipoDescuento||"PORCENTAJE"),T("valorDescuento",m.valorDescuento||0),m.configId&&T("configId",m.configId))},[m,g,s,T]);const k=x.useMemo(()=>JSON.stringify({facturasMes:j.facturasMes,nominasMes:j.nominasMes,facturacion:j.facturacion,sistemaTributacion:j.sistemaTributacion,periodoDeclaraciones:j.periodoDeclaraciones,modelo303:j.modelo303,modelo111:j.modelo111,modelo115:j.modelo115,modelo130:j.modelo130,modelo100:j.modelo100,modelo349:j.modelo349,modelo347:j.modelo347,solicitudCertificados:j.solicitudCertificados,censosAEAT:j.censosAEAT,recepcionNotificaciones:j.recepcionNotificaciones,estadisticasINE:j.estadisticasINE,solicitudAyudas:j.solicitudAyudas,conLaboralSocial:j.conLaboralSocial,aplicaDescuento:j.aplicaDescuento,tipoDescuento:j.tipoDescuento,valorDescuento:j.valorDescuento}),[j.facturasMes,j.nominasMes,j.facturacion,j.sistemaTributacion,j.periodoDeclaraciones,j.modelo303,j.modelo111,j.modelo115,j.modelo130,j.modelo100,j.modelo349,j.modelo347,j.solicitudCertificados,j.censosAEAT,j.recepcionNotificaciones,j.estadisticasINE,j.solicitudAyudas,j.conLaboralSocial,j.aplicaDescuento,j.tipoDescuento,j.valorDescuento]);x.useEffect(()=>{if(!v)return;const M=JSON.parse(k);if(!M.facturasMes&&!M.facturacion){f(null);return}const I={facturasMes:M.facturasMes||0,nominasMes:M.nominasMes,facturacion:M.facturacion||0,sistemaTributacion:M.sistemaTributacion||"Estimación Directa",periodoDeclaraciones:M.periodoDeclaraciones||"Trimestral",modelo303:M.modelo303,modelo111:M.modelo111,modelo115:M.modelo115,modelo130:M.modelo130,modelo100:M.modelo100,modelo349:M.modelo349,modelo347:M.modelo347,solicitudCertificados:M.solicitudCertificados,censosAEAT:M.censosAEAT,recepcionNotificaciones:M.recepcionNotificaciones,estadisticasINE:M.estadisticasINE,solicitudAyudas:M.solicitudAyudas,conLaboralSocial:M.conLaboralSocial,aplicaDescuento:M.aplicaDescuento,tipoDescuento:M.tipoDescuento,valorDescuento:M.valorDescuento};return P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{N.mutate({calculation:I,tipo:o},{onSuccess:B=>f(B),onError:()=>f(null)})},800),()=>{P.current&&clearTimeout(P.current)}},[k,v,o]),x.useEffect(()=>{v&&T("configId",v.id)},[v,T]),x.useEffect(()=>{s&&m&&(console.log("📥 Cargando datos del presupuesto existente:",m),l(m.tipoGestoria),m.nominasMes&&m.nominasMes>0?u("EMPRESA"):u("AUTONOMO"),T("nombreCliente",m.nombreCliente),T("nifCif",m.nifCif),T("email",m.email),T("telefono",m.telefono||""),T("direccion",m.direccion||""),T("personaContacto",m.personaContacto||""),T("facturacion",m.facturacion),T("facturasMes",m.facturasMes),T("nominasMes",m.nominasMes||0),T("sistemaTributacion",m.sistemaTributacion),T("periodoDeclaraciones",m.periodoDeclaraciones),T("modelo303",m.modelo303||!1),T("modelo111",m.modelo111||!1),T("modelo115",m.modelo115||!1),T("modelo130",m.modelo130||!1),T("modelo100",m.modelo100||!1),T("modelo349",m.modelo349||!1),T("modelo347",m.modelo347||!1),T("solicitudCertificados",m.solicitudCertificados||!1),T("censosAEAT",m.censosAEAT||!1),T("recepcionNotificaciones",m.recepcionNotificaciones||!1),T("estadisticasINE",m.estadisticasINE||!1),T("solicitudAyudas",m.solicitudAyudas||!1),T("conLaboralSocial",m.conLaboralSocial||!1),T("aplicaDescuento",m.aplicaDescuento||!1),T("tipoDescuento",m.tipoDescuento||"PORCENTAJE"),T("valorDescuento",m.valorDescuento||0),T("configId",m.configId||""),T("creadoPor",m.creadoPor||"admin"))},[s,m,T]);const O=async M=>{try{console.log("📝 Datos del formulario:",M),console.log("🏢 Tipo gestoría:",o),console.log("🔧 Modo:",s?"Editar":"Crear");const I={...M,tipoGestoria:o};if(s&&i){console.log("📤 Actualizando presupuesto:",i);const B=await b.mutateAsync({id:i,input:I});console.log("✅ Presupuesto actualizado:",B),na.success("Presupuesto actualizado exitosamente"),e(`/documentacion/presupuestos/${i}`)}else{console.log("📤 Creando presupuesto nuevo");const B=await y.mutateAsync(I);console.log("✅ Presupuesto creado:",B),na.success("Presupuesto creado exitosamente"),e(`/documentacion/presupuestos/${B.id}`)}}catch(I){console.error("❌ Error:",I),console.error("❌ Detalles del error:",I.response?.data||I);const B=s?"actualizar":"crear";na.error(I.response?.data?.message||I.message||`Error al ${B} presupuesto`)}};return s&&g?a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Cargando presupuesto..."})]}):s&&!g&&!m?a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Presupuesto no encontrado"}),a.jsx(re,{onClick:()=>e("/documentacion/presupuestos"),children:"Volver a la lista"})]}):a.jsxs("div",{className:"container mx-auto py-6 max-w-7xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>e("/documentacion/presupuestos"),children:[a.jsx(ju,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:s?`Editar Presupuesto ${m?.numero||""}`:"Nuevo Presupuesto"}),a.jsx("p",{className:"text-muted-foreground",children:s?"Modifique los datos del presupuesto":"Complete los datos para generar el presupuesto"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ge,{variant:o==="ASESORIA_LA_LLAVE"?"default":"outline",children:o==="ASESORIA_LA_LLAVE"?"Asesoría La Llave":"Gestoría Online"}),a.jsx(Ge,{variant:"secondary",children:c==="EMPRESA"?"Empresa":c==="AUTONOMO"?"Autónomo":"Particular"})]})]}),a.jsx("form",{onSubmit:E(O),children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Configuración del Presupuesto"}),a.jsx(Zt,{children:"Seleccione el tipo de cliente y gestoría"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"tipoCliente",children:"Tipo de Cliente *"}),a.jsxs(un,{value:c,onValueChange:M=>u(M),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"EMPRESA",children:"🏢 Empresa"}),a.jsx(Ke,{value:"AUTONOMO",children:"👤 Autónomo"}),a.jsx(Ke,{value:"PARTICULAR",children:"🏠 Particular"})]})]})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"tipoGestoria",children:"Tipo de Gestoría *"}),a.jsxs(un,{value:o,onValueChange:M=>l(M),children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"ASESORIA_LA_LLAVE",children:"Asesoría La Llave"}),a.jsx(Ke,{value:"GESTORIA_ONLINE",children:"Gestoría Online"})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Datos del Cliente"}),a.jsx(Zt,{children:"Información del cliente potencial"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"nombreCliente",children:"Nombre Completo *"}),a.jsx(Ie,{id:"nombreCliente",...S("nombreCliente",{required:!0}),placeholder:"Nombre o razón social"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"nifCif",children:"CIF/NIF *"}),a.jsx(Ie,{id:"nifCif",...S("nifCif",{required:!0}),placeholder:"12345678A"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"email",children:"Email *"}),a.jsx(Ie,{id:"email",type:"email",...S("email",{required:!0}),placeholder:"cliente@ejemplo.com"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"telefono",children:"Teléfono"}),a.jsx(Ie,{id:"telefono",...S("telefono"),placeholder:"600 123 456"})]})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"direccion",children:"Dirección"}),a.jsx(Ie,{id:"direccion",...S("direccion"),placeholder:"Calle, número, ciudad"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"personaContacto",children:"Persona de Contacto"}),a.jsx(Ie,{id:"personaContacto",...S("personaContacto"),placeholder:"Nombre de contacto"})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Datos Empresariales"})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"facturacion",children:"Facturación Anual *"}),a.jsx(Ie,{id:"facturacion",type:"number",...S("facturacion",{required:!0,valueAsNumber:!0}),placeholder:"50000"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"facturasMes",children:"Facturas/Mes *"}),a.jsx(Ie,{id:"facturasMes",type:"number",...S("facturasMes",{required:!0,valueAsNumber:!0}),placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"nominasMes",children:"Nóminas/Mes"}),a.jsx(Ie,{id:"nominasMes",type:"number",...S("nominasMes",{valueAsNumber:!0}),placeholder:"2"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"sistemaTributacion",children:"Sistema Tributación *"}),a.jsxs(un,{onValueChange:M=>T("sistemaTributacion",M),value:j.sistemaTributacion,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"Estimación Directa",children:"Estimación Directa"}),a.jsx(Ke,{value:"Estimación Objetiva",children:"Estimación Objetiva"}),a.jsx(Ke,{value:"Módulos",children:"Módulos"})]})]})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"periodoDeclaraciones",children:"Periodo Declaraciones *"}),a.jsxs(un,{onValueChange:M=>T("periodoDeclaraciones",M),value:j.periodoDeclaraciones,children:[a.jsx(sn,{children:a.jsx(dn,{placeholder:"Seleccionar"})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"Mensual",children:"Mensual"}),a.jsx(Ke,{value:"Trimestral",children:"Trimestral"}),a.jsx(Ke,{value:"Anual",children:"Anual"})]})]})]})]})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Modelos Fiscales"}),a.jsx(Zt,{children:"Seleccione los modelos que aplican"})]}),a.jsx(Be,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo303",checked:j.modelo303,onCheckedChange:M=>T("modelo303",M)}),a.jsx(ye,{htmlFor:"modelo303",children:"Modelo 303 (IVA)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo111",checked:j.modelo111,onCheckedChange:M=>T("modelo111",M)}),a.jsx(ye,{htmlFor:"modelo111",children:"Modelo 111 (IRPF)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo115",checked:j.modelo115,onCheckedChange:M=>T("modelo115",M)}),a.jsx(ye,{htmlFor:"modelo115",children:"Modelo 115 (Alquileres)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo130",checked:j.modelo130,onCheckedChange:M=>T("modelo130",M)}),a.jsx(ye,{htmlFor:"modelo130",children:"Modelo 130 (Autónomos)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo100",checked:j.modelo100,onCheckedChange:M=>T("modelo100",M)}),a.jsx(ye,{htmlFor:"modelo100",children:"Modelo 100 (Renta)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo349",checked:j.modelo349,onCheckedChange:M=>T("modelo349",M)}),a.jsx(ye,{htmlFor:"modelo349",children:"Modelo 349 (Intracomunitarias)"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"modelo347",checked:j.modelo347,onCheckedChange:M=>T("modelo347",M)}),a.jsx(ye,{htmlFor:"modelo347",children:"Modelo 347 (Terceros)"})]})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Servicios Adicionales"})}),a.jsx(Be,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"solicitudCertificados",checked:j.solicitudCertificados,onCheckedChange:M=>T("solicitudCertificados",M)}),a.jsx(ye,{htmlFor:"solicitudCertificados",children:"Solicitud Certificados"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"censosAEAT",checked:j.censosAEAT,onCheckedChange:M=>T("censosAEAT",M)}),a.jsx(ye,{htmlFor:"censosAEAT",children:"Censos AEAT"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"recepcionNotificaciones",checked:j.recepcionNotificaciones,onCheckedChange:M=>T("recepcionNotificaciones",M)}),a.jsx(ye,{htmlFor:"recepcionNotificaciones",children:"Recepción Notificaciones"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"estadisticasINE",checked:j.estadisticasINE,onCheckedChange:M=>T("estadisticasINE",M)}),a.jsx(ye,{htmlFor:"estadisticasINE",children:"Estadísticas INE"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"solicitudAyudas",checked:j.solicitudAyudas,onCheckedChange:M=>T("solicitudAyudas",M)}),a.jsx(ye,{htmlFor:"solicitudAyudas",children:"Solicitud Ayudas"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"conLaboralSocial",checked:j.conLaboralSocial,onCheckedChange:M=>T("conLaboralSocial",M)}),a.jsx(ye,{htmlFor:"conLaboralSocial",children:"Con Laboral/Social"})]})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(et,{children:"Servicios Personalizados"}),a.jsx(Zt,{children:"Añade conceptos adicionales manualmente"})]}),a.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{h([...p,{id:Date.now().toString(),nombre:"",descripcion:"",precio:0}])},children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Añadir Servicio"]})]})}),a.jsx(Be,{className:"space-y-4",children:p.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No hay servicios personalizados. Haz clic en "Añadir Servicio" para crear uno.'}):p.map((M,I)=>a.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ye,{className:"text-sm font-medium",children:["Servicio #",I+1]}),a.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>{h(p.filter(B=>B.id!==M.id))},children:a.jsx(ei,{className:"w-4 h-4 text-destructive"})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:`nombre-${M.id}`,children:"Nombre del Servicio"}),a.jsx(Ie,{id:`nombre-${M.id}`,value:M.nombre,onChange:B=>{const U=p.map(D=>D.id===M.id?{...D,nombre:B.target.value}:D);h(U)},placeholder:"Ej: Asesoría especial, Trámite urgente..."})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:`descripcion-${M.id}`,children:"Descripción"}),a.jsx(Ie,{id:`descripcion-${M.id}`,value:M.descripcion,onChange:B=>{const U=p.map(D=>D.id===M.id?{...D,descripcion:B.target.value}:D);h(U)},placeholder:"Descripción opcional del servicio"})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:`precio-${M.id}`,children:"Precio (€)"}),a.jsx(Ie,{id:`precio-${M.id}`,type:"number",step:"0.01",value:M.precio,onChange:B=>{const U=p.map(D=>D.id===M.id?{...D,precio:parseFloat(B.target.value)||0}:D);h(U)},placeholder:"0.00"})]})]})]},M.id))})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Descuentos"})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ur,{id:"aplicaDescuento",checked:j.aplicaDescuento,onCheckedChange:M=>T("aplicaDescuento",M)}),a.jsx(ye,{htmlFor:"aplicaDescuento",children:"Aplicar Descuento"})]}),j.aplicaDescuento&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"tipoDescuento",children:"Tipo"}),a.jsxs(un,{onValueChange:M=>T("tipoDescuento",M),value:j.tipoDescuento,children:[a.jsx(sn,{children:a.jsx(dn,{})}),a.jsxs(an,{children:[a.jsx(Ke,{value:"PORCENTAJE",children:"Porcentaje (%)"}),a.jsx(Ke,{value:"FIJO",children:"Fijo (€)"})]})]})]}),a.jsxs("div",{children:[a.jsx(ye,{htmlFor:"valorDescuento",children:"Valor"}),a.jsx(Ie,{id:"valorDescuento",type:"number",...S("valorDescuento",{valueAsNumber:!0}),placeholder:j.tipoDescuento==="PORCENTAJE"?"10":"50"})]})]})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs(Fe,{className:"sticky top-6",children:[a.jsx(Je,{children:a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Py,{className:`w-5 h-5 ${N.isPending?"animate-pulse":""}`}),"Resumen del Presupuesto",N.isPending&&a.jsx("span",{className:"text-xs font-normal text-muted-foreground ml-auto",children:"Actualizando..."})]})}),a.jsxs(Be,{className:"space-y-4",children:[d?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"space-y-2 transition-opacity duration-200",style:{opacity:N.isPending?.6:1},children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Contabilidad:"}),a.jsx("span",{className:"font-medium tabular-nums",children:Fp(d.totalContabilidad)})]}),(d.totalLaboral??0)>0&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Laboral:"}),a.jsx("span",{className:"font-medium tabular-nums",children:Fp(d.totalLaboral)})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{className:"font-medium tabular-nums",children:Fp(d.subtotal)})]}),p.length>0&&a.jsxs("div",{className:"flex justify-between text-sm text-blue-600",children:[a.jsx("span",{children:"Servicios Personalizados:"}),a.jsxs("span",{className:"font-medium tabular-nums",children:["+",Fp(p.reduce((M,I)=>M+I.precio,0))]})]}),(d.descuentoCalculado??0)>0&&a.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[a.jsx("span",{children:"Descuento:"}),a.jsxs("span",{className:"font-medium tabular-nums",children:["-",Fp(d.descuentoCalculado)]})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total Final:"}),a.jsx("span",{className:"text-primary tabular-nums",children:Fp(d.totalFinal+p.reduce((M,I)=>M+I.precio,0))})]})]})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Py,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm font-medium mb-2",children:"Empiece a completar los datos"}),a.jsxs("p",{className:"text-xs",children:["El cálculo se actualizará",a.jsx("br",{}),"automáticamente mientras escribe"]})]}),a.jsxs("div",{className:"pt-4 border-t mt-4",children:[a.jsxs(re,{type:"submit",className:"w-full",size:"lg",disabled:y.isPending||b.isPending||!j.nombreCliente||!j.nifCif||!j.email,children:[a.jsx(nS,{className:"w-4 h-4 mr-2"}),y.isPending||b.isPending?s?"Actualizando...":"Guardando...":s?"Actualizar Presupuesto":"Crear Presupuesto"]}),(!j.nombreCliente||!j.nifCif||!j.email)&&a.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"Complete nombre, NIF y email del cliente"})]})]})]})})]})})]})}function wHe(){const[t,e]=x.useState(!1),[n,r]=x.useState(null),[i,s]=x.useState(null),o=x.useCallback(async c=>{e(!0),s(null);try{const u=await fetch("/api/gestoria-budgets/calculate-autonomo",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!u.ok){const p=await u.json().catch(()=>({message:"Error al calcular presupuesto"}));throw new Error(p.message||`Error ${u.status}: ${u.statusText}`)}const f={success:!0,data:await u.json()};return r(f),f}catch(u){const d=u.message||"Error al calcular presupuesto";s(d);const f={success:!1,error:d};return r(f),f}finally{e(!1)}},[]),l=x.useCallback(()=>{r(null),s(null)},[]);return{calculate:o,clearResult:l,loading:t,result:n,error:i}}var Hj="Collapsible",[NHe,_ie]=Ts(Hj),[SHe,mI]=NHe(Hj),Eie=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...l}=t,[c,u]=ao({prop:r,defaultProp:i??!1,onChange:o,caller:Hj});return a.jsx(SHe,{scope:n,disabled:s,contentId:Es(),open:c,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:a.jsx(Ot.div,{"data-state":vI(c),"data-disabled":s?"":void 0,...l,ref:e})})});Eie.displayName=Hj;var Aie="CollapsibleTrigger",Cie=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=mI(Aie,n);return a.jsx(Ot.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":vI(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:vt(t.onClick,i.onOpenToggle)})});Cie.displayName=Aie;var gI="CollapsibleContent",kie=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=mI(gI,t.__scopeCollapsible);return a.jsx(Ca,{present:n||i.open,children:({present:s})=>a.jsx(jHe,{...r,ref:e,present:s})})});kie.displayName=gI;var jHe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=mI(gI,n),[l,c]=x.useState(r),u=x.useRef(null),d=Tn(e,u),f=x.useRef(0),p=f.current,h=x.useRef(0),m=h.current,g=o.open||l,v=x.useRef(g),y=x.useRef(void 0);return x.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),qs(()=>{const b=u.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const N=b.getBoundingClientRect();f.current=N.height,h.current=N.width,v.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(r)}},[o.open,r]),a.jsx(Ot.div,{"data-state":vI(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...t.style},children:g&&i})});function vI(t){return t?"open":"closed"}var _He=Eie,EHe=Cie,AHe=kie,Rl="Accordion",CHe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[yI,kHe,THe]=Jx(Rl),[Vj]=Ts(Rl,[THe,_ie]),xI=_ie(),Tie=le.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return a.jsx(yI.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(RHe,{...s,ref:e}):a.jsx(MHe,{...i,ref:e})})});Tie.displayName=Rl;var[Oie,OHe]=Vj(Rl),[Pie,PHe]=Vj(Rl,{collapsible:!1}),MHe=le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[l,c]=ao({prop:n,defaultProp:r??"",onChange:i,caller:Rl});return a.jsx(Oie,{scope:t.__scopeAccordion,value:le.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:le.useCallback(()=>s&&c(""),[s,c]),children:a.jsx(Pie,{scope:t.__scopeAccordion,collapsible:s,children:a.jsx(Mie,{...o,ref:e})})})}),RHe=le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,l]=ao({prop:n,defaultProp:r??[],onChange:i,caller:Rl}),c=le.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=le.useCallback(d=>l((f=[])=>f.filter(p=>p!==d)),[l]);return a.jsx(Oie,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(Pie,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(Mie,{...s,ref:e})})})}),[DHe,Wj]=Vj(Rl),Mie=le.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,l=le.useRef(null),c=Tn(l,e),u=kHe(n),f=Qh(i)==="ltr",p=vt(t.onKeyDown,h=>{if(!CHe.includes(h.key))return;const m=h.target,g=u().filter(_=>!_.ref.current?.disabled),v=g.findIndex(_=>_.ref.current===m),y=g.length;if(v===-1)return;h.preventDefault();let b=v;const N=0,S=y-1,E=()=>{b=v+1,b>S&&(b=N)},C=()=>{b=v-1,b<N&&(b=S)};switch(h.key){case"Home":b=N;break;case"End":b=S;break;case"ArrowRight":s==="horizontal"&&(f?E():C());break;case"ArrowDown":s==="vertical"&&E();break;case"ArrowLeft":s==="horizontal"&&(f?C():E());break;case"ArrowUp":s==="vertical"&&C();break}const T=b%y;g[T].ref.current?.focus()});return a.jsx(DHe,{scope:n,disabled:r,direction:i,orientation:s,children:a.jsx(yI.Slot,{scope:n,children:a.jsx(Ot.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:p})})})}),GN="AccordionItem",[IHe,bI]=Vj(GN),Rie=le.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=Wj(GN,n),o=OHe(GN,n),l=xI(n),c=Es(),u=r&&o.value.includes(r)||!1,d=s.disabled||t.disabled;return a.jsx(IHe,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(_He,{"data-orientation":s.orientation,"data-state":$ie(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});Rie.displayName=GN;var Die="AccordionHeader",Iie=le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Wj(Rl,n),s=bI(Die,n);return a.jsx(Ot.h3,{"data-orientation":i.orientation,"data-state":$ie(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Iie.displayName=Die;var xP="AccordionTrigger",Lie=le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Wj(Rl,n),s=bI(xP,n),o=PHe(xP,n),l=xI(n);return a.jsx(yI.ItemSlot,{scope:n,children:a.jsx(EHe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...l,...r,ref:e})})});Lie.displayName=xP;var Fie="AccordionContent",Bie=le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Wj(Rl,n),s=bI(Fie,n),o=xI(n);return a.jsx(AHe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Bie.displayName=Fie;function $ie(t){return t?"open":"closed"}var LHe=Tie,FHe=Rie,BHe=Iie,zie=Lie,qie=Bie;const $He=LHe,Uie=x.forwardRef(({className:t,...e},n)=>a.jsx(FHe,{ref:n,className:Xe("border-b",t),...e}));Uie.displayName="AccordionItem";const Hie=x.forwardRef(({className:t,children:e,...n},r)=>a.jsx(BHe,{className:"flex",children:a.jsxs(zie,{ref:r,className:Xe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(tS,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Hie.displayName=zie.displayName;const Vie=x.forwardRef(({className:t,children:e,...n},r)=>a.jsx(qie,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:Xe("pb-4 pt-0",t),children:e})}));Vie.displayName=qie.displayName;function zHe({data:t,tipoGestoria:e}){const{detalleCalculo:n}=t,r=i=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(i);return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Fe,{className:"border-2 border-primary",children:[a.jsx(Je,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Py,{className:"h-5 w-5 text-primary"}),a.jsx(et,{children:"Resumen del Presupuesto"})]}),a.jsx(Ge,{variant:e==="ASESORIA_LA_LLAVE"?"default":"secondary",className:"text-sm",children:e==="ASESORIA_LA_LLAVE"?"Asesoría La Llave":"Gestoría Online"})]})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-lg",children:[a.jsx("span",{className:"font-medium",children:t.conceptoBase}),a.jsx("span",{className:"font-bold text-primary",children:r(t.precioBase)})]}),t.conceptosAdicionales.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ri,{}),a.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:"Conceptos Adicionales:"}),t.conceptosAdicionales.map((i,s)=>a.jsxs("div",{className:"flex justify-between items-center text-sm pl-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:i.concepto}),a.jsx(Ge,{variant:"outline",className:"text-xs",children:i.tipo})]}),a.jsx("span",{className:"font-medium",children:r(i.precio)})]},s))]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:"Subtotal"}),a.jsx("span",{className:"font-semibold",children:r(t.subtotal)})]}),a.jsxs("div",{className:"flex justify-between items-center text-muted-foreground",children:[a.jsx("span",{children:"IVA (21%)"}),a.jsx("span",{children:r(t.iva)})]}),a.jsx(ri,{className:"my-2"}),a.jsxs("div",{className:"flex justify-between items-center text-2xl",children:[a.jsx("span",{className:"font-bold",children:"Total"}),a.jsx("span",{className:"font-bold text-primary",children:r(t.total)})]})]})]}),a.jsx($He,{type:"single",collapsible:!0,className:"w-full",children:a.jsxs(Uie,{value:"detalles",children:[a.jsx(Hie,{className:"hover:no-underline",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(OP,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Ver Detalle del Cálculo"})]})}),a.jsx(Vie,{children:a.jsxs("div",{className:"space-y-6 pt-4",children:[a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(Qr,{className:"h-4 w-4"}),"1. Cálculo Base por Tramos"]})}),a.jsxs(Be,{className:"space-y-3 text-sm",children:[n.tramoFacturas&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Tramo Facturas:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoFacturas.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",n.tramoFacturas.min," - ",n.tramoFacturas.max??"∞",")"]}),a.jsx("div",{className:"font-semibold",children:r(n.precioFacturas)})]})]}),n.tramoNominas&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Tramo Nóminas:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoNominas.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["(",n.tramoNominas.min," - ",n.tramoNominas.max??"∞",")"]}),a.jsx("div",{className:"font-semibold",children:r(n.precioNominas)})]})]}),n.tramoFacturacion&&a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-muted-foreground",children:"Factor Facturación Anual:"}),a.jsxs("div",{className:"pl-4 space-y-1",children:[a.jsx("div",{children:n.tramoFacturacion.etiqueta}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Multiplicador: ",n.tramoFacturacion.multiplicador,"x"]}),a.jsxs("div",{className:"font-semibold",children:["Factor: ",n.factorFacturacion.toFixed(2)]})]})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio Base Calculado:"}),a.jsx("span",{className:"text-primary",children:r(n.precioBase)})]})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(Wd,{className:"h-4 w-4"}),"2. Ajuste Período Mensual"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje:"}),a.jsxs("span",{children:[n.porcentajePeriodoMensual,"%"]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con Período:"}),a.jsx("span",{className:"text-primary",children:r(n.precioBaseConPeriodo)})]})]})]}),e==="GESTORIA_ONLINE"&&n.porcentajeEDN!==void 0&&a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(Dd,{className:"h-4 w-4"}),"3. Incremento EDN (Gestión Online)"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje EDN:"}),a.jsxs("span",{children:[n.porcentajeEDN,"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Incremento:"}),a.jsxs("span",{children:["+",r(n.incrementoEDN||0)]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con EDN:"}),a.jsx("span",{className:"text-primary",children:r(n.precioConEDN||0)})]})]})]}),e==="GESTORIA_ONLINE"&&n.porcentajeModulos!==void 0&&a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(DP,{className:"h-4 w-4"}),"4. Incremento Módulos (Gestión Online)"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Porcentaje Módulos:"}),a.jsxs("span",{children:[n.porcentajeModulos,"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Incremento:"}),a.jsxs("span",{children:["+",r(n.incrementoModulos||0)]})]}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Precio con Módulos:"}),a.jsx("span",{className:"text-primary",children:r(n.precioConModulos||0)})]})]})]}),n.modelosFiscalesSeleccionados.length>0&&a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(Qr,{className:"h-4 w-4"}),"5. Modelos Fiscales Seleccionados"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[n.modelosFiscalesSeleccionados.map((i,s)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-xs",children:i.codigo}),a.jsx("span",{children:i.nombre})]}),a.jsx("span",{children:r(i.precio)})]},s)),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Total Modelos:"}),a.jsx("span",{className:"text-primary",children:r(n.precioModelosFiscales)})]})]})]}),n.serviciosSeleccionados.length>0&&a.jsxs(Fe,{children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2",children:[a.jsx(rH,{className:"h-4 w-4"}),"6. Servicios Adicionales"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[n.serviciosSeleccionados.map((i,s)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:i.nombre}),a.jsx(Ge,{variant:"outline",className:"text-xs",children:i.tipo})]}),a.jsx("span",{children:r(i.precio)})]},s)),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between font-semibold",children:[a.jsx("span",{children:"Total Servicios:"}),a.jsx("span",{className:"text-primary",children:r(n.precioServiciosAdicionales)})]})]})]}),n.descuentoAplicado!==void 0&&n.descuentoAplicado>0&&a.jsxs(Fe,{className:"border-green-200 bg-green-50",children:[a.jsx(Je,{className:"pb-3",children:a.jsxs(et,{className:"text-sm flex items-center gap-2 text-green-700",children:[a.jsx(Wd,{className:"h-4 w-4"}),"Descuento Aplicado"]})}),a.jsxs(Be,{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal sin descuento:"}),a.jsx("span",{children:r(n.subtotalSinDescuento||0)})]}),a.jsxs("div",{className:"flex justify-between text-green-700 font-semibold",children:[a.jsxs("span",{children:["Descuento (",n.porcentajeDescuento,"%):"]}),a.jsxs("span",{children:["-",r(n.descuentoAplicado)]})]})]})]})]})})]})})]})}function qHe({onCalculationComplete:t,initialValues:e}){const{getFiscalModels:n,getServices:r}=vf(),{calculate:i,loading:s,result:o,error:l}=wHe(),[c,u]=x.useState(e?.tipoGestoria||"ASESORIA_LA_LLAVE"),[d,f]=x.useState(e?.nFacturas||10),[p,h]=x.useState(e?.nNominas||2),[m,g]=x.useState(e?.facturacionAnual||5e4),[v,y]=x.useState(e?.modelosFiscales||[]),[b,N]=x.useState(e?.serviciosAdicionales||[]),[S,E]=x.useState(e?.aplicarDescuento||!1),[C,T]=x.useState(e?.porcentajeDescuento||0),[_,j]=x.useState([]),[P,k]=x.useState([]),[O,M]=x.useState(!0);x.useEffect(()=>{(async()=>{M(!0);try{const[z,H]=await Promise.all([n(),r()]);j(z.filter(ee=>ee.activo).sort((ee,ae)=>ee.orden-ae.orden)),k(H.filter(ee=>ee.activo).sort((ee,ae)=>ee.orden-ae.orden))}catch(z){console.error("Error cargando datos:",z)}finally{M(!1)}})()},[n,r]);const I=async()=>{const z=await i({tipoGestoria:c,nFacturas:d,nNominas:p,facturacionAnual:m,modelosFiscales:v,serviciosAdicionales:b,aplicarDescuento:S,porcentajeDescuento:S?C:void 0});z.success&&t&&t(z.data)},B=D=>{y(z=>z.includes(D)?z.filter(H=>H!==D):[...z,D])},U=D=>{N(z=>z.includes(D)?z.filter(H=>H!==D):[...z,D])};return O?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Gr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Py,{className:"h-5 w-5"}),"Tipo de Gestoría"]}),a.jsx(Zt,{children:"Selecciona el modelo de gestión"})]}),a.jsx(Be,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(re,{variant:c==="ASESORIA_LA_LLAVE"?"default":"outline",onClick:()=>u("ASESORIA_LA_LLAVE"),className:"flex-1",children:"Asesoría La Llave"}),a.jsx(re,{variant:c==="GESTORIA_ONLINE"?"default":"outline",onClick:()=>u("GESTORIA_ONLINE"),className:"flex-1",children:"Gestoría Online"})]})})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"h-5 w-5"}),"Datos de Actividad"]}),a.jsx(Zt,{children:"Introduce los datos principales del autónomo"})]}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nFacturas",children:"Nº Facturas"}),a.jsx(Ie,{id:"nFacturas",type:"number",min:"0",value:d,onChange:D=>f(parseInt(D.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturas emitidas al mes"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nNominas",children:"Nº Nóminas"}),a.jsx(Ie,{id:"nNominas",type:"number",min:"0",value:p,onChange:D=>h(parseInt(D.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Nóminas procesadas al mes"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"facturacionAnual",children:"Facturación Anual (€)"}),a.jsx(Ie,{id:"facturacionAnual",type:"number",min:"0",step:"1000",value:m,onChange:D=>g(parseFloat(D.target.value)||0)}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Facturación anual estimada"})]})]})})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Wd,{className:"h-5 w-5"}),"Modelos Fiscales"]}),a.jsx(Zt,{children:"Selecciona los modelos fiscales que necesita el autónomo"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:_.map(D=>a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>B(D.id),children:[a.jsx(Ur,{id:`modelo-${D.id}`,checked:v.includes(D.id),onCheckedChange:()=>B(D.id)}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"rounded bg-muted px-2 py-1 text-xs font-semibold",children:D.codigoModelo}),a.jsx(ye,{htmlFor:`modelo-${D.id}`,className:"cursor-pointer font-medium",children:D.nombreModelo})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[D.precio.toFixed(2),"€/mes"]})]})]},D.id))}),_.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay modelos fiscales disponibles"})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(DP,{className:"h-5 w-5"}),"Servicios Adicionales"]}),a.jsx(Zt,{children:"Añade servicios extra al presupuesto"})]}),a.jsxs(Be,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-3",children:P.map(D=>a.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>U(D.id),children:[a.jsx(Ur,{id:`servicio-${D.id}`,checked:b.includes(D.id),onCheckedChange:()=>U(D.id)}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ye,{htmlFor:`servicio-${D.id}`,className:"cursor-pointer font-medium",children:D.nombre}),a.jsx(Ge,{variant:D.tipoServicio==="MENSUAL"?"default":"outline",children:D.tipoServicio})]}),D.descripcion&&a.jsx("p",{className:"text-xs text-muted-foreground",children:D.descripcion}),a.jsxs("p",{className:"text-xs font-semibold text-primary",children:[D.precio.toFixed(2),"€",D.tipoServicio==="MENSUAL"?"/mes":""]})]})]},D.id))}),P.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hay servicios adicionales disponibles"})]})]}),a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Dd,{className:"h-5 w-5"}),"Descuento"]}),a.jsx(Zt,{children:"Aplicar descuento al presupuesto"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{id:"aplicar-descuento",checked:S,onCheckedChange:E}),a.jsx(ye,{htmlFor:"aplicar-descuento",children:"Aplicar descuento"})]}),S&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"porcentajeDescuento",children:"Porcentaje de descuento (%)"}),a.jsx(Ie,{id:"porcentajeDescuento",type:"number",min:"0",max:"100",step:"1",value:C,onChange:D=>T(parseFloat(D.target.value)||0)})]})]})]}),a.jsxs(re,{onClick:I,disabled:s,size:"lg",className:"w-full",children:[s&&a.jsx(Gr,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Calculando...":"Calcular Presupuesto"]}),l&&a.jsxs(fu,{variant:"destructive",children:[a.jsx(qo,{className:"h-4 w-4"}),a.jsx(hu,{children:l})]}),o?.success&&o.data&&a.jsx(zHe,{data:o.data,tipoGestoria:c})]})}function UHe(){const[t,e]=es(),[n,r]=x.useState("cliente"),[i,s]=x.useState(null),[o,l]=x.useState("ASESORIA_LA_LLAVE"),{register:c,handleSubmit:u,formState:{errors:d}}=ER(),f=h=>{s(h),r("guardar")},p=async h=>{if(!i){na.error("Debe calcular el presupuesto primero");return}try{const m={...h,tipoGestoria:o,subtotal:i.subtotal,iva:i.iva,total:i.total,estado:"BORRADOR",detalleCalculo:i.detalleCalculo,conceptos:[{concepto:i.conceptoBase,precio:i.precioBase},...i.conceptosAdicionales]},g=await fetch("/api/gestoria-budgets",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)});if(!g.ok){const y=await g.json();throw new Error(y.message||"Error al crear presupuesto")}const v=await g.json();na.success("Presupuesto creado exitosamente"),e(`/documentacion/presupuestos/${v.id}`)}catch(m){na.error(m.message||"Error al guardar presupuesto")}};return a.jsxs("div",{className:"container mx-auto py-6 max-w-6xl space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>e("/documentacion/presupuestos"),children:[a.jsx(ju,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Nuevo Presupuesto Autónomo"}),a.jsx("p",{className:"text-muted-foreground",children:"Genera un presupuesto personalizado con cálculo automático"})]})]})}),a.jsxs(Wo,{value:n,onValueChange:r,children:[a.jsxs(co,{className:"grid w-full grid-cols-3",children:[a.jsxs(vn,{value:"cliente",className:"flex items-center gap-2",children:[a.jsx(Eh,{className:"h-4 w-4"}),"Datos del Cliente"]}),a.jsxs(vn,{value:"calculo",className:"flex items-center gap-2",children:[a.jsx(Py,{className:"h-4 w-4"}),"Cálculo"]}),a.jsxs(vn,{value:"guardar",disabled:!i,className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"h-4 w-4"}),"Revisar y Guardar"]})]}),a.jsx(Rn,{value:"cliente",className:"space-y-6 mt-6",children:a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(Eh,{className:"h-5 w-5"}),"Información del Cliente"]}),a.jsx(Zt,{children:"Introduce los datos del cliente para el presupuesto"})]}),a.jsx(Be,{children:a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nombreCliente",children:"Nombre / Razón Social *"}),a.jsx(Ie,{id:"nombreCliente",...c("nombreCliente",{required:"Este campo es obligatorio"}),placeholder:"Juan Pérez García"}),d.nombreCliente&&a.jsx("p",{className:"text-sm text-destructive",children:d.nombreCliente.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"nifCif",children:"CIF/NIF *"}),a.jsx(Ie,{id:"nifCif",...c("nifCif",{required:"Este campo es obligatorio"}),placeholder:"12345678A"}),d.nifCif&&a.jsx("p",{className:"text-sm text-destructive",children:d.nifCif.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"email",children:"Email *"}),a.jsx(Ie,{id:"email",type:"email",...c("email",{required:"Este campo es obligatorio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email inválido"}}),placeholder:"cliente@ejemplo.com"}),d.email&&a.jsx("p",{className:"text-sm text-destructive",children:d.email.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"telefono",children:"Teléfono"}),a.jsx(Ie,{id:"telefono",...c("telefono"),placeholder:"600 123 456"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"direccion",children:"Dirección"}),a.jsx(Ie,{id:"direccion",...c("direccion"),placeholder:"Calle, número, código postal, ciudad"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"personaContacto",children:"Persona de Contacto"}),a.jsx(Ie,{id:"personaContacto",...c("personaContacto"),placeholder:"Nombre de la persona de contacto"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"observaciones",children:"Observaciones"}),a.jsx(la,{id:"observaciones",...c("observaciones"),placeholder:"Notas internas sobre el cliente o el presupuesto",rows:3})]}),a.jsx(ri,{}),a.jsx("div",{className:"flex justify-end",children:a.jsx(re,{type:"button",onClick:()=>r("calculo"),children:"Siguiente: Calcular Presupuesto"})})]})})]})}),a.jsx(Rn,{value:"calculo",className:"space-y-6 mt-6",children:a.jsx(qHe,{onCalculationComplete:f,initialValues:{tipoGestoria:o}})}),a.jsx(Rn,{value:"guardar",className:"space-y-6 mt-6",children:i&&a.jsxs(a.Fragment,{children:[a.jsxs(Fe,{children:[a.jsxs(Je,{children:[a.jsx(et,{children:"Resumen del Presupuesto"}),a.jsx(Zt,{children:"Revisa todos los datos antes de guardar el presupuesto"})]}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Concepto base:"}),a.jsx("p",{className:"font-medium",children:i.conceptoBase})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Precio base:"}),a.jsxs("p",{className:"font-medium",children:[i.precioBase.toFixed(2),"€"]})]})]}),i.conceptosAdicionales.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(ri,{}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Conceptos adicionales:"}),a.jsx("ul",{className:"space-y-1",children:i.conceptosAdicionales.map((h,m)=>a.jsxs("li",{className:"text-sm flex justify-between",children:[a.jsx("span",{children:h.concepto}),a.jsxs("span",{className:"font-medium",children:[h.precio.toFixed(2),"€"]})]},m))})]})]}),a.jsx(ri,{}),a.jsxs("div",{className:"space-y-2 text-lg",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{className:"font-semibold",children:[i.subtotal.toFixed(2),"€"]})]}),a.jsxs("div",{className:"flex justify-between text-muted-foreground text-sm",children:[a.jsx("span",{children:"IVA (21%):"}),a.jsxs("span",{children:[i.iva.toFixed(2),"€"]})]}),a.jsxs("div",{className:"flex justify-between text-2xl font-bold text-primary",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:[i.total.toFixed(2),"€"]})]})]})]})]}),a.jsxs("div",{className:"flex gap-4 justify-end",children:[a.jsx(re,{variant:"outline",onClick:()=>r("calculo"),children:"Volver a Calcular"}),a.jsxs(re,{onClick:u(p),children:[a.jsx(nS,{className:"w-4 h-4 mr-2"}),"Guardar Presupuesto"]})]})]})})]})]})}function Bp(t){const e=Number(t);return isNaN(e)||t===null||t===void 0?"0,00 €":e.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}function HHe(){const[t,e]=iS("/documentacion/presupuestos/:id"),[,n]=es(),r=e?.id||"",[i,s]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(""),{data:d,isLoading:f}=vie(r),{data:p}=z9e(r),h=F9e(),m=B9e(),g=$9e(),v=L9e();if(f)return a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Cargando presupuesto..."})]});if(!d)return a.jsxs("div",{className:"container mx-auto py-12 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Presupuesto no encontrado"}),a.jsx(re,{onClick:()=>n("/documentacion/presupuestos"),children:"Volver a la lista"})]});const y=async()=>{try{await h.mutateAsync(r),na.success("Presupuesto aceptado")}catch(C){na.error(C.message)}},b=async()=>{if(!c.trim()){na.error("Debe indicar el motivo del rechazo");return}try{await m.mutateAsync({id:r,motivoRechazo:c}),na.success("Presupuesto rechazado"),s(!1)}catch(C){na.error(C.message)}},N=async()=>{try{const C=await g.mutateAsync({id:r});na.success("Cliente creado exitosamente"),n(`/clientes/${C.clientId}`)}catch(C){na.error(C.message)}},S=async()=>{try{await v.mutateAsync({id:r}),na.success("Presupuesto enviado")}catch(C){na.error(C.message)}},E=C=>{const T={BORRADOR:"bg-gray-500",ENVIADO:"bg-blue-500",ACEPTADO:"bg-green-500",RECHAZADO:"bg-red-500",FACTURADO:"bg-purple-500"};return a.jsx(Ge,{className:T[C]||"",children:C})};return a.jsxs("div",{className:"container mx-auto py-6 max-w-6xl space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>n("/documentacion/presupuestos"),children:[a.jsx(ju,{className:"w-4 h-4 mr-2"}),"Volver"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold",children:["Presupuesto ",d.numero]}),a.jsxs("p",{className:"text-muted-foreground",children:["Creado el ",_s(new Date(d.fechaCreacion),"dd 'de' MMMM 'de' yyyy",{locale:Ro})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[E(d.estado),a.jsx(Ge,{variant:d.tipoGestoria==="ASESORIA_LA_LLAVE"?"default":"outline",children:d.tipoGestoria==="ASESORIA_LA_LLAVE"?"Asesoría La Llave":"Gestoría Online"})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Acciones"})}),a.jsxs(Be,{className:"flex flex-wrap gap-2",children:[a.jsxs(re,{onClick:()=>yie(d.id,d.numero),children:[a.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]}),d.estado==="BORRADOR"&&a.jsxs(a.Fragment,{children:[a.jsxs(re,{onClick:S,disabled:v.isPending,children:[a.jsx(RP,{className:"w-4 h-4 mr-2"}),v.isPending?"Enviando...":"Enviar por Email"]}),a.jsxs(re,{variant:"outline",onClick:()=>n(`/documentacion/presupuestos/${r}/editar`),children:[a.jsx(ec,{className:"w-4 h-4 mr-2"}),"Editar"]})]}),(d.estado==="ENVIADO"||d.estado==="BORRADOR")&&a.jsxs(a.Fragment,{children:[a.jsxs(re,{onClick:y,disabled:h.isPending,children:[a.jsx(tH,{className:"w-4 h-4 mr-2"}),h.isPending?"Aceptando...":"Marcar Aceptado"]}),a.jsxs(re,{variant:"destructive",onClick:()=>s(!0),disabled:m.isPending,children:[a.jsx(gl,{className:"w-4 h-4 mr-2"}),"Rechazar"]})]}),d.estado==="ACEPTADO"&&p?.canConvert&&a.jsxs(re,{onClick:()=>l(!0),disabled:g.isPending,children:[a.jsx(Eae,{className:"w-4 h-4 mr-2"}),g.isPending?"Convirtiendo...":"Convertir a Cliente"]}),d.estado==="ACEPTADO"&&!p?.canConvert&&a.jsx("div",{className:"text-sm text-muted-foreground",children:p?.reason||"No se puede convertir a cliente"})]})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Información del Cliente"})}),a.jsx(Be,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Nombre"}),a.jsx("p",{className:"font-medium",children:d.nombreCliente})]}),a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"CIF/NIF"}),a.jsx("p",{className:"font-medium font-mono",children:d.nifCif})]}),a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-medium",children:d.email})]}),d.telefono&&a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Teléfono"}),a.jsx("p",{className:"font-medium",children:d.telefono})]}),d.direccion&&a.jsxs("div",{className:"col-span-2",children:[a.jsx(ye,{className:"text-muted-foreground",children:"Dirección"}),a.jsx("p",{className:"font-medium",children:d.direccion})]})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Datos Empresariales"})}),a.jsx(Be,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Facturación Anual"}),a.jsx("p",{className:"font-medium",children:Bp(d.facturacion)})]}),a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Facturas/Mes"}),a.jsx("p",{className:"font-medium",children:d.facturasMes})]}),d.nominasMes&&a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Nóminas/Mes"}),a.jsx("p",{className:"font-medium",children:d.nominasMes})]}),a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Sistema Tributación"}),a.jsx("p",{className:"font-medium",children:d.sistemaTributacion})]}),a.jsxs("div",{children:[a.jsx(ye,{className:"text-muted-foreground",children:"Periodo Declaraciones"}),a.jsx("p",{className:"font-medium",children:d.periodoDeclaraciones})]})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Modelos Fiscales"})}),a.jsx(Be,{children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.modelo303&&a.jsx(Ge,{children:"Modelo 303"}),d.modelo111&&a.jsx(Ge,{children:"Modelo 111"}),d.modelo115&&a.jsx(Ge,{children:"Modelo 115"}),d.modelo130&&a.jsx(Ge,{children:"Modelo 130"}),d.modelo100&&a.jsx(Ge,{children:"Modelo 100"}),d.modelo349&&a.jsx(Ge,{children:"Modelo 349"}),d.modelo347&&a.jsx(Ge,{children:"Modelo 347"})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Servicios Adicionales"})}),a.jsx(Be,{children:a.jsxs("div",{className:"space-y-2",children:[d.solicitudCertificados&&a.jsx("div",{children:"✓ Solicitud de Certificados"}),d.censosAEAT&&a.jsx("div",{children:"✓ Censos AEAT"}),d.recepcionNotificaciones&&a.jsx("div",{children:"✓ Recepción de Notificaciones"}),d.estadisticasINE&&a.jsx("div",{children:"✓ Estadísticas INE"}),d.solicitudAyudas&&a.jsx("div",{children:"✓ Solicitud de Ayudas"}),d.conLaboralSocial&&a.jsx("div",{children:"✓ Con Laboral/Social"})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Resumen Económico"})}),a.jsxs(Be,{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Contabilidad:"}),a.jsx("span",{className:"font-medium",children:Bp(d.totalContabilidad)})]}),d.totalLaboral>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Laboral:"}),a.jsx("span",{className:"font-medium",children:Bp(d.totalLaboral)})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:Bp(d.subtotal)})]}),d.aplicaDescuento&&d.descuentoCalculado>0&&a.jsxs("div",{className:"flex justify-between text-green-600",children:[a.jsxs("span",{children:["Descuento (",d.tipoDescuento==="PORCENTAJE"?`${d.valorDescuento}%`:"Fijo","):"]}),a.jsxs("span",{className:"font-medium",children:["-",Bp(d.descuentoCalculado)]})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[a.jsx("span",{children:"Total Final:"}),a.jsx("span",{className:"text-primary",children:Bp(d.totalFinal)})]})]})]}),a.jsx(Un,{open:i,onOpenChange:s,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Rechazar Presupuesto"}),a.jsx(Qn,{children:"Indique el motivo del rechazo"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ye,{htmlFor:"motivo",children:"Motivo del Rechazo"}),a.jsx(la,{id:"motivo",value:c,onChange:C=>u(C.target.value),placeholder:"Precio elevado, no se ajusta a necesidades, etc.",rows:4})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),a.jsx(re,{variant:"destructive",onClick:b,children:"Rechazar Presupuesto"})]})]})}),a.jsx(Un,{open:o,onOpenChange:l,children:a.jsxs(zn,{children:[a.jsxs(Hn,{children:[a.jsx(Vn,{children:"Convertir a Cliente"}),a.jsx(Qn,{children:"Se creará un nuevo cliente con los datos del presupuesto. Se asignarán automáticamente todos los modelos fiscales seleccionados."})]}),a.jsxs(oi,{children:[a.jsx(re,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),a.jsx(re,{onClick:N,children:"Crear Cliente"})]})]})})]})}function VHe(){const[t,e]=iS("/public/budgets/:code/accept"),n=e?.code,i=new URLSearchParams(window.location.search).get("t"),[s,o]=x.useState(!1),[l,c]=x.useState(!1),{data:u,isLoading:d,error:f}=At({queryKey:["/public/budgets",n,i],queryFn:async()=>{if(!n||!i)throw new Error("Código o token no proporcionado");const v=await fetch(`/public/budgets/${n}/accept?t=${i}`);if(!v.ok){const y=await v.json().catch(()=>({error:"Error al cargar"}));throw new Error(y.error||"No se pudo cargar el presupuesto")}return v.json()},enabled:!!n&&!!i,retry:!1}),p=yt({mutationFn:async()=>{if(!n||!i)throw new Error("Código o token no proporcionado");const v=await fetch(`/public/budgets/${n}/accept?t=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accepted:!0})});if(!v.ok){const y=await v.json().catch(()=>({error:"Error al aceptar"}));throw new Error(y.error||"No se pudo aceptar el presupuesto")}return v.json()},onSuccess:()=>{o(!0)}}),h=()=>{if(!l){alert("Por favor, acepta los términos y condiciones");return}p.mutate()},m=u?.expiresAt&&new Date(u.expiresAt)<new Date,g=u?.acceptedAt!==null;return!t||!n||!i?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsx(Fe,{className:"max-w-md w-full",children:a.jsxs(Be,{className:"p-12 text-center",children:[a.jsx(gl,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Enlace inválido"}),a.jsx("p",{className:"text-muted-foreground",children:"El enlace que has utilizado no es válido o ha expirado."})]})})}):d?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx(Fn,{className:"h-32 w-full"}),a.jsx(Fn,{className:"h-96 w-full"}),a.jsx(Fn,{className:"h-48 w-full"})]})}):f||!u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsx(Fe,{className:"max-w-md w-full",children:a.jsxs(Be,{className:"p-12 text-center",children:[a.jsx(qo,{className:"h-16 w-16 mx-auto text-destructive mb-4"}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Error"}),a.jsx("p",{className:"text-muted-foreground",children:f?.message||"No se pudo cargar el presupuesto"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"El enlace puede haber expirado o ser inválido."})]})})}):s||g?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-emerald-100 flex items-center justify-center p-4",children:a.jsx(Fe,{className:"max-w-md w-full",children:a.jsxs(Be,{className:"p-12 text-center",children:[a.jsx("div",{className:"mb-6 inline-flex items-center justify-center w-20 h-20 rounded-full bg-emerald-100",children:a.jsx(ml,{className:"h-12 w-12 text-emerald-600"})}),a.jsx("h1",{className:"text-3xl font-bold mb-3 text-emerald-900",children:"¡Presupuesto Aceptado!"}),a.jsxs("p",{className:"text-lg text-emerald-700 mb-6",children:["Hemos recibido tu aceptación del presupuesto ",a.jsx("strong",{children:u.code})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Total aceptado:"}),a.jsxs("p",{className:"text-3xl font-bold text-primary",children:[Number(u.total).toFixed(2)," €"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Recibirás un email de confirmación en breve con los próximos pasos."}),g&&u.acceptedAt&&a.jsx("div",{className:"mt-6 p-3 bg-emerald-50 rounded-lg",children:a.jsxs("p",{className:"text-xs text-emerald-700",children:["Aceptado el ",new Date(u.acceptedAt).toLocaleString()]})})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx(Fe,{children:a.jsxs(Je,{className:"text-center pb-8",children:[a.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mx-auto",children:a.jsx(Qr,{className:"h-8 w-8 text-primary"})}),a.jsxs(et,{className:"text-3xl font-bold mb-2",children:["Presupuesto ",u.code]}),a.jsx("p",{className:"text-muted-foreground",children:"Revisa los detalles y acepta el presupuesto si estás conforme"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[a.jsxs(Ge,{className:"bg-blue-100 text-blue-700",children:["Serie ",u.series]}),m?a.jsxs(Ge,{variant:"destructive",children:[a.jsx(gl,{className:"h-3 w-3 mr-1"}),"Vencido"]}):a.jsxs(Ge,{variant:"outline",children:[a.jsx(Kf,{className:"h-3 w-3 mr-1"}),"Válido ",u.validDays," días"]})]})]})}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Información General"})}),a.jsx(Be,{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cliente"}),a.jsx("p",{className:"font-semibold",children:u.clientName})]}),u.clientEmail&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),a.jsx("p",{className:"font-semibold",children:u.clientEmail})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fecha de emisión"}),a.jsx("p",{className:"font-semibold",children:new Date(u.date).toLocaleDateString()})]}),u.expiresAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Válido hasta"}),a.jsxs("p",{className:`font-semibold ${m?"text-destructive":""}`,children:[new Date(u.expiresAt).toLocaleDateString(),m&&" (Vencido)"]})]})]})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Detalle de Servicios"})}),a.jsx(Be,{children:a.jsx("div",{className:"space-y-3",children:u.items.map((v,y)=>a.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 bg-slate-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:v.concept}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.quantity," × ",Number(v.price).toFixed(2)," € (IVA ",v.vatPct,"%)"]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-bold text-lg",children:[Number(v.subtotal).toFixed(2)," €"]})})]},y))})})]}),a.jsxs(Fe,{children:[a.jsx(Je,{children:a.jsx(et,{children:"Resumen"})}),a.jsxs(Be,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal (Base Imponible)"}),a.jsxs("span",{className:"font-semibold",children:[Number(u.subtotal).toFixed(2)," €"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"IVA Total"}),a.jsxs("span",{className:"font-semibold",children:[Number(u.vatTotal).toFixed(2)," €"]})]}),a.jsx(ri,{}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xl font-bold",children:"TOTAL"}),a.jsxs("span",{className:"text-3xl font-bold text-primary",children:[Number(u.total).toFixed(2)," €"]})]})]})]}),a.jsx(Fe,{children:a.jsx(Be,{className:"p-4",children:a.jsxs(re,{variant:"outline",className:"w-full",onClick:()=>window.open(`/public/budgets/${u.id}/pdf`,"_blank"),children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Descargar Presupuesto en PDF"]})})}),!m&&a.jsxs(Fe,{className:"border-2 border-primary",children:[a.jsx(Je,{children:a.jsxs(et,{className:"flex items-center gap-2",children:[a.jsx(ml,{className:"h-5 w-5 text-primary"}),"Aceptar Presupuesto"]})}),a.jsxs(Be,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[a.jsx(Ur,{id:"terms",checked:l,onCheckedChange:v=>c(v===!0)}),a.jsxs("label",{htmlFor:"terms",className:"text-sm cursor-pointer",children:[a.jsx("span",{className:"font-medium",children:"Acepto los términos y condiciones"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"He revisado el presupuesto y acepto los servicios, precios y condiciones detalladas. Al aceptar, estoy confirmando mi conformidad con este presupuesto."})]})]}),a.jsx(re,{size:"lg",className:"w-full",onClick:h,disabled:!l||p.isPending,children:p.isPending?a.jsx(a.Fragment,{children:"Procesando..."}):a.jsxs(a.Fragment,{children:[a.jsx(ml,{className:"h-5 w-5 mr-2"}),"Confirmar Aceptación del Presupuesto"]})}),p.error&&a.jsx("div",{className:"p-4 bg-destructive/10 border border-destructive/30 rounded-lg",children:a.jsx("p",{className:"text-sm text-destructive font-medium",children:p.error.message})}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[a.jsx(Kf,{className:"h-3 w-3 inline mr-1"}),"Conexión segura · Tu aceptación quedará registrada con fecha y hora"]})]})]}),m&&a.jsx(Fe,{className:"border-2 border-destructive",children:a.jsxs(Be,{className:"p-8 text-center",children:[a.jsx(gl,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Presupuesto Vencido"}),a.jsxs("p",{className:"text-muted-foreground",children:["Este presupuesto venció el ",new Date(u.expiresAt).toLocaleDateString(),". Por favor, contacta con nosotros para renovarlo."]})]})}),a.jsx(Fe,{className:"bg-slate-100",children:a.jsxs(Be,{className:"p-6 text-center text-sm text-muted-foreground",children:[a.jsx("p",{children:"© 2025 Asesoría La Llave · Todos los derechos reservados"}),a.jsxs("p",{className:"mt-2",children:["¿Tienes dudas? Contacta con nosotros en ",a.jsx("a",{href:"mailto:info@asesorialallave.es",className:"text-primary underline",children:"info@asesorialallave.es"})]})]})})]})})}function WHe(){const{connected:t,onlineUsers:e}=Que();return a.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:t?a.jsxs(a.Fragment,{children:[a.jsx(Aae,{className:"h-4 w-4 text-green-500"}),a.jsxs("span",{className:"hidden sm:inline",children:["Conectado (",e,")"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Cae,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:"hidden sm:inline",children:"Desconectado"})]})})}function KHe(){return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}function GHe(){const{user:t,isLoading:e}=Zh();if(e)return a.jsx(KHe,{});const[n]=iS("/public/budgets/:code/accept");if(n)return a.jsx(VHe,{});if(!t)return a.jsxs(Xk,{children:[a.jsx(kn,{path:"/",component:eL}),a.jsx(kn,{path:"/:rest*",children:a.jsx(bv,{to:"/"})})]});const r={"--sidebar-width":"20rem","--sidebar-width-icon":"4rem"};return a.jsx(pde,{style:r,children:a.jsxs("div",{className:"flex h-screen w-full",children:[a.jsx(Mde,{}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsxs("header",{className:"flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[a.jsx(gde,{"data-testid":"button-sidebar-toggle"}),a.jsx("div",{className:"flex-1 max-w-xl mx-4",children:a.jsx(lfe,{})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(cfe,{}),a.jsx(WHe,{}),a.jsx(Rde,{})]})]}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsxs(Xk,{children:[a.jsx(kn,{path:"/",component:XEe}),a.jsx(kn,{path:"/auth",component:eL}),a.jsx(kn,{path:"/clientes",component:Mke}),a.jsx(kn,{path:"/tareas",component:uRe}),a.jsx(kn,{path:"/manuales",component:dRe}),a.jsx(kn,{path:"/manuales/nuevo",component:o9}),a.jsx(kn,{path:"/manuales/:id/editar",component:o9}),a.jsx(kn,{path:"/manuales/:id",component:d3e}),a.jsx(kn,{path:"/impuestos",children:a.jsx(bv,{to:"/impuestos/control"})}),a.jsx(kn,{path:"/impuestos/control",component:PDe}),a.jsx(kn,{path:"/impuestos/calendario",component:FDe}),a.jsx(kn,{path:"/impuestos/modelos",component:BDe}),a.jsx(kn,{path:"/impuestos/reportes",component:sIe}),a.jsx(kn,{path:"/notificaciones",component:b9e}),a.jsx(kn,{path:"/documentacion",component:w9e}),a.jsx(kn,{path:"/documentacion/documentos",component:vP}),a.jsx(kn,{path:"/documentacion/documentos/recibos",component:jie}),a.jsx(kn,{path:"/documentacion/documentos/proteccion-datos",component:dHe}),a.jsx(kn,{path:"/documentacion/documentos/domiciliacion",component:fHe}),a.jsx(kn,{path:"/documentacion/documentos/plantillas",component:hHe}),a.jsx(kn,{path:"/documentos",component:f9}),a.jsx(kn,{path:"/documentos/:rest*",component:f9}),a.jsx(kn,{path:"/documentacion/presupuestos",component:Wk}),a.jsx(kn,{path:"/documentacion/presupuestos/parametros",component:Wk}),a.jsx(kn,{path:"/documentacion/presupuestos/plantillas",component:Wk}),a.jsx(kn,{path:"/documentacion/presupuestos/nuevo",component:h9}),a.jsx(kn,{path:"/documentacion/presupuestos/nuevo-autonomo",component:UHe}),a.jsx(kn,{path:"/documentacion/presupuestos/:id/editar",component:h9}),a.jsx(kn,{path:"/documentacion/presupuestos/:id",component:HHe}),a.jsx(kn,{path:"/admin",component:()=>t?.roleName==="Administrador"?a.jsx(l9,{}):a.jsx(bv,{to:"/"})}),a.jsx(kn,{path:"/admin/github-updates",component:()=>t?.roleName==="Administrador"?a.jsx(gie,{}):a.jsx(bv,{to:"/"})}),a.jsx(kn,{path:"/admin/:rest*",children:t?.roleName==="Administrador"?a.jsx(l9,{}):a.jsx(bv,{to:"/"})}),a.jsx(kn,{path:"/auditoria",component:x9e}),a.jsx(kn,{component:dfe})]})})]})]})})}function YHe(){return x.useEffect(()=>{document.cookie.split("; ").find(e=>e.startsWith("sidebar_state="))||(document.cookie="sidebar_state=true; path=/; max-age=604800")},[]),a.jsx(woe,{client:Lt,children:a.jsxs(pV,{children:[a.jsx(rue,{defaultTheme:"light",children:a.jsx(sue,{children:a.jsx(ede,{children:a.jsx(GHe,{})})})}),a.jsx(yle,{})]})})}Mae.createRoot(document.getElementById("root")).render(a.jsx(YHe,{}));export{Sr as _};
